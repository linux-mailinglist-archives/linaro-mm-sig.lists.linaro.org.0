Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 846562F1B77
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 11 Jan 2021 17:51:41 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 512B16167C
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 11 Jan 2021 16:51:40 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 4185966715; Mon, 11 Jan 2021 16:51:40 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_NONE,RCVD_IN_MSPIKE_H2,SPF_HELO_NONE autolearn=disabled
	version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 59B31618C2;
	Mon, 11 Jan 2021 16:50:46 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 57D6F618B2
 for <linaro-mm-sig@lists.linaro.org>; Mon, 11 Jan 2021 16:50:42 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 439076167C; Mon, 11 Jan 2021 16:50:42 +0000 (UTC)
Received: from mail-wm1-f47.google.com (mail-wm1-f47.google.com
 [209.85.128.47])
 by lists.linaro.org (Postfix) with ESMTPS id 4392C6167C
 for <linaro-mm-sig@lists.linaro.org>; Mon, 11 Jan 2021 16:50:40 +0000 (UTC)
Received: by mail-wm1-f47.google.com with SMTP id 3so507697wmg.4
 for <linaro-mm-sig@lists.linaro.org>; Mon, 11 Jan 2021 08:50:40 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to;
 bh=yj6pW/NLvzV1m68BPluDwqW1KUCMC2X4qQpTc9K7+Ww=;
 b=OSlQ/7NgiJnRqxILuzjIBPwpCXd8qBkwm7IwUMrPvhDmcXMCUieKVs6ckprwIp6JDD
 mSw/18d4WU1jSmThNg/q/EbSaKpFwSHGlsX7qOVVkAaUdG8Z+ekxo8KS6LiYjpAtZmra
 R1pec5x/4EO7Gwc89r2nW6eWH1sB5b/ZfeaaQHqTECKu91HbM31BY/yn0h732hWq6rD+
 7CgakJySWdMK8aIRwSiJTyAo5OXpHYLoFbiYQPmtzYcqMJGHTxDn0fMhlgHb0/0ZDxAZ
 z6mbh88bdxTyabTL0hv+fRIR0jz3g+pj+xgHLMWFrqUUcoptpdnI3qu+8HtPzLcy5kIn
 4Aww==
X-Gm-Message-State: AOAM532SrRham0bQ/UmOyf5RaxwA0vF4KhfEKAohlkgIqSPThdZ81/pT
 JpIUst/sTm4dpAGmApYSrjZARQ==
X-Google-Smtp-Source: ABdhPJyKZg/r5HU4UsZwQIpVrxWn9fGeSCEf1DAuO2I0uSSuqSMovExSe5yPcAz48ELKK/wW9CTh2Q==
X-Received: by 2002:a1c:b608:: with SMTP id g8mr552394wmf.110.1610383839338;
 Mon, 11 Jan 2021 08:50:39 -0800 (PST)
Received: from phenom.ffwll.local ([2a02:168:57f4:0:efd0:b9e5:5ae6:c2fa])
 by smtp.gmail.com with ESMTPSA id h184sm450377wmh.23.2021.01.11.08.50.37
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 11 Jan 2021 08:50:38 -0800 (PST)
Date: Mon, 11 Jan 2021 17:50:36 +0100
From: Daniel Vetter <daniel@ffwll.ch>
To: Thomas Zimmermann <tzimmermann@suse.de>
Message-ID: <X/yB3LC79f/zWTwG@phenom.ffwll.local>
References: <20210108094340.15290-1-tzimmermann@suse.de>
 <20210108094340.15290-5-tzimmermann@suse.de>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20210108094340.15290-5-tzimmermann@suse.de>
X-Operating-System: Linux phenom 5.7.0-1-amd64 
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: eric@anholt.net, sam@ravnborg.org, dri-devel@lists.freedesktop.org,
 maarten.lankhorst@linux.intel.com, mripard@kernel.org,
 christian.koenig@amd.com, linaro-mm-sig@lists.linaro.org, hdegoede@redhat.com,
 kraxel@redhat.com, daniel@ffwll.ch, airlied@redhat.com,
 virtualization@lists.linux-foundation.org, sean@poorly.run,
 linux-media@vger.kernel.org
Subject: Re: [Linaro-mm-sig] [PATCH v4 04/13] drm/shmem-helper: Provide a
 vmap function for short-term mappings
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

T24gRnJpLCBKYW4gMDgsIDIwMjEgYXQgMTA6NDM6MzFBTSArMDEwMCwgVGhvbWFzIFppbW1lcm1h
bm4gd3JvdGU6Cj4gSW1wbGVtZW50YXRpb25zIG9mIHRoZSB2bWFwL3Z1bm1hcCBHRU0gY2FsbGJh
Y2tzIG1heSBwZXJmb3JtIHBpbm5pbmcKPiBvZiB0aGUgQk8gYW5kIG1heSBhY3F1aXJlIHRoZSBh
c3NvY2lhdGVkIHJlc2VydmF0aW9uIG9iamVjdCdzIGxvY2suCj4gQ2FsbGVycyB0aGF0IG9ubHkg
cmVxdWlyZSBhIG1hcHBpbmcgb2YgdGhlIGNvbnRhaW5lZCBtZW1vcnkgY2FuIHRodXMKPiBpbnRl
cmZlcmUgd2l0aCBvdGhlciB0YXNrcyB0aGF0IHJlcXVpcmUgZXhhY3QgcGlubmluZywgc3VjaCBh
cyBzY2Fub3V0Lgo+IFRoaXMgaXMgbGVzcyBvZiBhbiBpc3N1ZSB3aXRoIHByaXZhdGUgU0hNRU0g
YnVmZmVycywgYnV0IG1heSBoYXBwZW4KPiB3aXRoIGltcG9ydGVkIG9uZXMuCj4gCj4gVGhlcmVm
b3JlIHByb3ZpZGUgdGhlIG5ldyBpbnRlcmZhY2VzIGRybV9nZW1fc2htZW1fdm1hcF9sb2NhbCgp
IGFuZAo+IGRybV9nZW1fc2htZW1fdnVubWFwX2xvY2FsKCksIHdoaWNoIG9ubHkgcGVyZm9ybSB0
aGUgdm1hcC92dW5tYXAKPiBvcGVyYXRpb25zLiBDYWxsZXJzIGhhdmUgdG8gaG9sZCB0aGUgcmVz
ZXJ2YXRpb24gbG9jayB3aGlsZSB0aGUgbWFwcGluZwo+IHBlcnNpc3RzLgo+IAo+IFRoaXMgcGF0
Y2ggYWxzbyBjb25uZWN0cyBHRU0gU0hNRU0gaGVscGVycyB0byBHRU0gb2JqZWN0IGZ1bmN0aW9u
cyB3aXRoCj4gZXF1aXZhbGVudCBmdW5jdGlvbmFsaXR5Lgo+IAo+IHY0Ogo+IAkqIGNhbGwgZG1h
X2J1Zl97dm1hcCx2dW5tYXB9X2xvY2FsKCkgd2hlcmUgbmVjZXNzYXJ5IChEYW5pZWwpCj4gCSog
bW92ZSBkcml2ZXIgY2hhbmdlcyBpbnRvIHNlcGFyYXRlIHBhdGNoZXMgKERhbmllbCkKPiAKPiBT
aWduZWQtb2ZmLWJ5OiBUaG9tYXMgWmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4KPiAt
LS0KPiAgZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmMgfCA5MCArKysrKysr
KysrKysrKysrKysrKysrKy0tLQo+ICBpbmNsdWRlL2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5o
ICAgICB8ICAyICsKPiAgMiBmaWxlcyBjaGFuZ2VkLCA4NCBpbnNlcnRpb25zKCspLCA4IGRlbGV0
aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9zaG1lbV9o
ZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jCj4gaW5kZXgg
OTgyNWMzNzhkZmE2Li4yOTg4MzJiMmI0M2IgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJt
L2RybV9nZW1fc2htZW1faGVscGVyLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9z
aG1lbV9oZWxwZXIuYwo+IEBAIC0zMiw2ICszMiw4IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZHJt
X2dlbV9vYmplY3RfZnVuY3MgZHJtX2dlbV9zaG1lbV9mdW5jcyA9IHsKPiAgCS5nZXRfc2dfdGFi
bGUgPSBkcm1fZ2VtX3NobWVtX2dldF9zZ190YWJsZSwKPiAgCS52bWFwID0gZHJtX2dlbV9zaG1l
bV92bWFwLAo+ICAJLnZ1bm1hcCA9IGRybV9nZW1fc2htZW1fdnVubWFwLAo+ICsJLnZtYXBfbG9j
YWwgPSBkcm1fZ2VtX3NobWVtX3ZtYXBfbG9jYWwsCj4gKwkudnVubWFwX2xvY2FsID0gZHJtX2dl
bV9zaG1lbV92dW5tYXBfbG9jYWwsCj4gIAkubW1hcCA9IGRybV9nZW1fc2htZW1fbW1hcCwKPiAg
fTsKPiAgCj4gQEAgLTI2MSw3ICsyNjMsOCBAQCB2b2lkIGRybV9nZW1fc2htZW1fdW5waW4oc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpvYmopCj4gIH0KPiAgRVhQT1JUX1NZTUJPTChkcm1fZ2VtX3No
bWVtX3VucGluKTsKPiAgCj4gLXN0YXRpYyBpbnQgZHJtX2dlbV9zaG1lbV92bWFwX2xvY2tlZChz
dHJ1Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKnNobWVtLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1h
cCkKPiArc3RhdGljIGludCBkcm1fZ2VtX3NobWVtX3ZtYXBfbG9ja2VkKHN0cnVjdCBkcm1fZ2Vt
X3NobWVtX29iamVjdCAqc2htZW0sIHN0cnVjdCBkbWFfYnVmX21hcCAqbWFwLAo+ICsJCQkJICAg
ICBib29sIGxvY2FsKQoKVGhpcyBpcyBhIGJpdCBzcGFnaGV0dGkgYW5kIGFsc28gaGFzIHRoZSBw
cm9ibGVtIHRoYXQgd2UncmUgbm90IGNoYW5naW5nCnNobWVtLT52bWFwX3VzZV9jb3VudCB1bmRl
ciBkaWZmZXJlbnQgbG9ja3MsIGRlcGVuZGluZyB1cG9uIHdoaWNoIHBhdGgKd2UncmUgdGFraW5n
LgoKSSB0aGluayB0aGUgY2xlYW5lc3Qgd291bGQgYmUgaWYgd2UgcHVsbCB0aGUgaWYgKGltcG9y
dF9hdHRhY2gpIGNhc2Ugb3V0Cm9mIHRoZSBfbG9ja2VkKCkgdmVyc2lvbiBjb21wbGV0ZWx5LCBm
b3IgYWxsIGNhc2VzLCBhbmQgYWxzbyBvdXRzaWRlIG9mCnRoZSBzaG1lbS0+dm1hcF9sb2NrLiBU
aGlzIG1lYW5zIG5vIGNhY2hpbmcgb2Ygdm1hcHMgaW4gdGhlIHNobWVtIGxheWVyCmFueW1vcmUg
Zm9yIGltcG9ydGVkIGJ1ZmZlcnMsIGJ1dCB0aGlzIGlzIG5vIGxvbmdlciBhIHByb2JsZW06IFdl
IGNhY2hlCnRoZW0gaW4gdGhlIGV4cG9ydGVycyBpbnN0ZWFkIChJIHRoaW5rIGF0IGxlYXN0LCBp
ZiBub3QgbWF5YmUgbmVlZCB0byBmaXgKdGhhdCB3aGVyZSBpdCdzIGV4cGVuc2l2ZSkuCgpPdGhl
ciBvcHRpb24gd291bGQgYmUgdG8gdW5seSBwdWxsIGl0IG91dCBmb3IgdGhlIF92bWFwX2xvY2Fs
IGNhc2UsIGJ1dAp0aGF0J3MgYSBiaXQgdWdseSBiZWNhdXNlIG5vIGxvbmdlciBzeW1tZXRyaWNh
bCBpbiB0aGUgdmFyaW91cyBwYXRocy4KCj4gIHsKPiAgCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAq
b2JqID0gJnNobWVtLT5iYXNlOwo+ICAJaW50IHJldCA9IDA7Cj4gQEAgLTI3Miw3ICsyNzUsMTAg
QEAgc3RhdGljIGludCBkcm1fZ2VtX3NobWVtX3ZtYXBfbG9ja2VkKHN0cnVjdCBkcm1fZ2VtX3No
bWVtX29iamVjdCAqc2htZW0sIHN0cnVjdAo+ICAJfQo+ICAKPiAgCWlmIChvYmotPmltcG9ydF9h
dHRhY2gpIHsKPiAtCQlyZXQgPSBkbWFfYnVmX3ZtYXAob2JqLT5pbXBvcnRfYXR0YWNoLT5kbWFi
dWYsIG1hcCk7Cj4gKwkJaWYgKGxvY2FsKQo+ICsJCQlyZXQgPSBkbWFfYnVmX3ZtYXBfbG9jYWwo
b2JqLT5pbXBvcnRfYXR0YWNoLT5kbWFidWYsIG1hcCk7Cj4gKwkJZWxzZQo+ICsJCQlyZXQgPSBk
bWFfYnVmX3ZtYXAob2JqLT5pbXBvcnRfYXR0YWNoLT5kbWFidWYsIG1hcCk7Cj4gIAkJaWYgKCFy
ZXQpIHsKPiAgCQkJaWYgKFdBUk5fT04obWFwLT5pc19pb21lbSkpIHsKPiAgCQkJCXJldCA9IC1F
SU87Cj4gQEAgLTMxMyw3ICszMTksNyBAQCBzdGF0aWMgaW50IGRybV9nZW1fc2htZW1fdm1hcF9s
b2NrZWQoc3RydWN0IGRybV9nZW1fc2htZW1fb2JqZWN0ICpzaG1lbSwgc3RydWN0Cj4gIAlyZXR1
cm4gcmV0Owo+ICB9Cj4gIAo+IC0vKgo+ICsvKioKPiAgICogZHJtX2dlbV9zaG1lbV92bWFwIC0g
Q3JlYXRlIGEgdmlydHVhbCBtYXBwaW5nIGZvciBhIHNobWVtIEdFTSBvYmplY3QKPiAgICogQHNo
bWVtOiBzaG1lbSBHRU0gb2JqZWN0Cj4gICAqIEBtYXA6IFJldHVybnMgdGhlIGtlcm5lbCB2aXJ0
dWFsIGFkZHJlc3Mgb2YgdGhlIFNITUVNIEdFTSBvYmplY3QncyBiYWNraW5nCj4gQEAgLTMzOSwx
NSArMzQ1LDUzIEBAIGludCBkcm1fZ2VtX3NobWVtX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0
ICpvYmosIHN0cnVjdCBkbWFfYnVmX21hcCAqbWFwKQo+ICAJcmV0ID0gbXV0ZXhfbG9ja19pbnRl
cnJ1cHRpYmxlKCZzaG1lbS0+dm1hcF9sb2NrKTsKPiAgCWlmIChyZXQpCj4gIAkJcmV0dXJuIHJl
dDsKPiAtCXJldCA9IGRybV9nZW1fc2htZW1fdm1hcF9sb2NrZWQoc2htZW0sIG1hcCk7Cj4gKwly
ZXQgPSBkcm1fZ2VtX3NobWVtX3ZtYXBfbG9ja2VkKHNobWVtLCBtYXAsIGZhbHNlKTsKPiAgCW11
dGV4X3VubG9jaygmc2htZW0tPnZtYXBfbG9jayk7Cj4gIAo+ICAJcmV0dXJuIHJldDsKPiAgfQo+
ICBFWFBPUlRfU1lNQk9MKGRybV9nZW1fc2htZW1fdm1hcCk7Cj4gIAo+ICsvKioKPiArICogZHJt
X2dlbV9zaG1lbV92bWFwX2xvY2FsIC0gQ3JlYXRlIGEgdmlydHVhbCBtYXBwaW5nIGZvciBhIHNo
bWVtIEdFTSBvYmplY3QKPiArICogQHNobWVtOiBzaG1lbSBHRU0gb2JqZWN0Cj4gKyAqIEBtYXA6
IFJldHVybnMgdGhlIGtlcm5lbCB2aXJ0dWFsIGFkZHJlc3Mgb2YgdGhlIFNITUVNIEdFTSBvYmpl
Y3QncyBiYWNraW5nCj4gKyAqICAgICAgIHN0b3JlLgo+ICsgKgo+ICsgKiBUaGlzIGZ1bmN0aW9u
IG1ha2VzIHN1cmUgdGhhdCBhIGNvbnRpZ3VvdXMga2VybmVsIHZpcnR1YWwgYWRkcmVzcyBtYXBw
aW5nCj4gKyAqIGV4aXN0cyBmb3IgdGhlIGJ1ZmZlciBiYWNraW5nIHRoZSBzaG1lbSBHRU0gb2Jq
ZWN0Lgo+ICsgKgo+ICsgKiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIEJPJ3MgcmVz
ZXJ2YXRpb24gb2JqZWN0IGxvY2tlZC4gQ2FsbGVycyBtdXN0Cj4gKyAqIGhvbGQgdGhlIGxvY2sg
dW50aWwgYWZ0ZXIgdW5tYXBwaW5nIHRoZSBidWZmZXIuCj4gKyAqCj4gKyAqIFRoaXMgZnVuY3Rp
b24gY2FuIGJlIHVzZWQgdG8gaW1wbGVtZW50ICZkcm1fZ2VtX29iamVjdF9mdW5jcy52bWFwX2xv
Y2FsLiBCdXQKPiArICogaXQgY2FuIGFsc28gYmUgY2FsbGVkIGJ5IGRyaXZlcnMgZGlyZWN0bHks
IGluIHdoaWNoIGNhc2UgaXQgd2lsbCBoaWRlIHRoZQo+ICsgKiBkaWZmZXJlbmNlcyBiZXR3ZWVu
IGRtYS1idWYgaW1wb3J0ZWQgYW5kIG5hdGl2ZWx5IGFsbG9jYXRlZCBvYmplY3RzLgoKU28gZm9y
IHRoZSBvdGhlciBjYWxsYmFja3MgSSB0cmllZCB0byBtYWtlIHN1cmUgd2UgaGF2ZSBkaWZmZXJl
bnQgZW50cnkKcG9pbnRzIGZvciB0aGlzLCBzaW5jZSBpdCdzIG5vdCByZWFsbHkgdGhlIHNhbWUg
dGhpbmcgYW5kIGJlY2F1c2Ugb2YgdGhlCmxvY2tpbmcgbWVzcyB3ZSBoYXZlIHdpdGggZG1hX3Jl
c3ZfbG9jayB2cyB2YXJpb3VzIHByZS1leGlzdGluZyBsb2NhbApsb2NraW5nIHNjaGVtZSwgaXQn
cyBlYXN5IHRvIGdldCBhIG1lc3MuCgpJIHRoaW5rIHRoZSBzdXBlciBjbGVhbiB2ZXJzaW9uIGhl
cmUgd291bGQgYmUgdG8gYWxzbyBleHBvcnQganVzdCB0aGUKaW50ZXJuYWwgc3R1ZmYgZm9yIHRo
ZSAtPnYodW4pbWFwX2xvY2FsIGhvb2tzLCBidXQgdGhhdCdzIG1heWJlIGEgYml0IHRvbwptdWNo
IGJvaWxlcnBsYXRlIGZvciBubyByZWFsIGdhaW4uCi1EYW5pZWwKCj4gKyAqCj4gKyAqIEFjcXVp
cmVkIG1hcHBpbmdzIHNob3VsZCBiZSBjbGVhbmVkIHVwIGJ5IGNhbGxpbmcgZHJtX2dlbV9zaG1l
bV92dW5tYXBfbG9jYWwoKS4KPiArICoKPiArICogUmV0dXJuczoKPiArICogMCBvbiBzdWNjZXNz
IG9yIGEgbmVnYXRpdmUgZXJyb3IgY29kZSBvbiBmYWlsdXJlLgo+ICsgKi8KPiAraW50IGRybV9n
ZW1fc2htZW1fdm1hcF9sb2NhbChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IGRt
YV9idWZfbWFwICptYXApCj4gK3sKPiArCXN0cnVjdCBkcm1fZ2VtX3NobWVtX29iamVjdCAqc2ht
ZW0gPSB0b19kcm1fZ2VtX3NobWVtX29iaihvYmopOwo+ICsJaW50IHJldDsKPiArCj4gKwlkbWFf
cmVzdl9hc3NlcnRfaGVsZChvYmotPnJlc3YpOwo+ICsKPiArCXJldCA9IG11dGV4X2xvY2tfaW50
ZXJydXB0aWJsZSgmc2htZW0tPnZtYXBfbG9jayk7Cj4gKwlpZiAocmV0KQo+ICsJCXJldHVybiBy
ZXQ7Cj4gKwlyZXQgPSBkcm1fZ2VtX3NobWVtX3ZtYXBfbG9ja2VkKHNobWVtLCBtYXAsIHRydWUp
Owo+ICsJbXV0ZXhfdW5sb2NrKCZzaG1lbS0+dm1hcF9sb2NrKTsKPiArCj4gKwlyZXR1cm4gcmV0
Owo+ICt9Cj4gK0VYUE9SVF9TWU1CT0woZHJtX2dlbV9zaG1lbV92bWFwX2xvY2FsKTsKPiArCj4g
IHN0YXRpYyB2b2lkIGRybV9nZW1fc2htZW1fdnVubWFwX2xvY2tlZChzdHJ1Y3QgZHJtX2dlbV9z
aG1lbV9vYmplY3QgKnNobWVtLAo+IC0JCQkJCXN0cnVjdCBkbWFfYnVmX21hcCAqbWFwKQo+ICsJ
CQkJCXN0cnVjdCBkbWFfYnVmX21hcCAqbWFwLCBib29sIGxvY2FsKQo+ICB7Cj4gIAlzdHJ1Y3Qg
ZHJtX2dlbV9vYmplY3QgKm9iaiA9ICZzaG1lbS0+YmFzZTsKPiAgCj4gQEAgLTM1OCw3ICs0MDIs
MTAgQEAgc3RhdGljIHZvaWQgZHJtX2dlbV9zaG1lbV92dW5tYXBfbG9ja2VkKHN0cnVjdCBkcm1f
Z2VtX3NobWVtX29iamVjdCAqc2htZW0sCj4gIAkJcmV0dXJuOwo+ICAKPiAgCWlmIChvYmotPmlt
cG9ydF9hdHRhY2gpCj4gLQkJZG1hX2J1Zl92dW5tYXAob2JqLT5pbXBvcnRfYXR0YWNoLT5kbWFi
dWYsIG1hcCk7Cj4gKwkJaWYgKGxvY2FsKQo+ICsJCQlkbWFfYnVmX3Z1bm1hcF9sb2NhbChvYmot
PmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgbWFwKTsKPiArCQllbHNlCj4gKwkJCWRtYV9idWZfdnVu
bWFwKG9iai0+aW1wb3J0X2F0dGFjaC0+ZG1hYnVmLCBtYXApOwo+ICAJZWxzZQo+ICAJCXZ1bm1h
cChzaG1lbS0+dmFkZHIpOwo+ICAKPiBAQCAtMzY2LDcgKzQxMyw3IEBAIHN0YXRpYyB2b2lkIGRy
bV9nZW1fc2htZW1fdnVubWFwX2xvY2tlZChzdHJ1Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKnNo
bWVtLAo+ICAJZHJtX2dlbV9zaG1lbV9wdXRfcGFnZXMoc2htZW0pOwo+ICB9Cj4gIAo+IC0vKgo+
ICsvKioKPiAgICogZHJtX2dlbV9zaG1lbV92dW5tYXAgLSBVbm1hcCBhIHZpcnR1YWwgbWFwcGlu
ZyBmbyBhIHNobWVtIEdFTSBvYmplY3QKPiAgICogQHNobWVtOiBzaG1lbSBHRU0gb2JqZWN0Cj4g
ICAqIEBtYXA6IEtlcm5lbCB2aXJ0dWFsIGFkZHJlc3Mgd2hlcmUgdGhlIFNITUVNIEdFTSBvYmpl
Y3Qgd2FzIG1hcHBlZAo+IEBAIC0zODQsMTEgKzQzMSwzOCBAQCB2b2lkIGRybV9nZW1fc2htZW1f
dnVubWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1h
cCkKPiAgCXN0cnVjdCBkcm1fZ2VtX3NobWVtX29iamVjdCAqc2htZW0gPSB0b19kcm1fZ2VtX3No
bWVtX29iaihvYmopOwo+ICAKPiAgCW11dGV4X2xvY2soJnNobWVtLT52bWFwX2xvY2spOwo+IC0J
ZHJtX2dlbV9zaG1lbV92dW5tYXBfbG9ja2VkKHNobWVtLCBtYXApOwo+ICsJZHJtX2dlbV9zaG1l
bV92dW5tYXBfbG9ja2VkKHNobWVtLCBtYXAsIGZhbHNlKTsKPiAgCW11dGV4X3VubG9jaygmc2ht
ZW0tPnZtYXBfbG9jayk7Cj4gIH0KPiAgRVhQT1JUX1NZTUJPTChkcm1fZ2VtX3NobWVtX3Z1bm1h
cCk7Cj4gIAo+ICsvKioKPiArICogZHJtX2dlbV9zaG1lbV92dW5tYXBfbG9jYWwgLSBVbm1hcCBh
IHZpcnR1YWwgbWFwcGluZyBmbyBhIHNobWVtIEdFTSBvYmplY3QKPiArICogQHNobWVtOiBzaG1l
bSBHRU0gb2JqZWN0Cj4gKyAqIEBtYXA6IEtlcm5lbCB2aXJ0dWFsIGFkZHJlc3Mgd2hlcmUgdGhl
IFNITUVNIEdFTSBvYmplY3Qgd2FzIG1hcHBlZAo+ICsgKgo+ICsgKiBUaGlzIGZ1bmN0aW9uIGNs
ZWFucyB1cCBhIGtlcm5lbCB2aXJ0dWFsIGFkZHJlc3MgbWFwcGluZyBhY3F1aXJlZCBieQo+ICsg
KiBkcm1fZ2VtX3NobWVtX3ZtYXBfbG9jYWwoKS4gVGhlIG1hcHBpbmcgaXMgb25seSByZW1vdmVk
IHdoZW4gdGhlIHVzZSBjb3VudAo+ICsgKiBkcm9wcyB0byB6ZXJvLgo+ICsgKgo+ICsgKiBUaGUg
ZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIEJPJ3MgcmVzZXJ2YXRpb24gb2JqZWN0IGxvY2tl
ZC4KPiArICoKPiArICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBpbXBsZW1lbnQgJmRy
bV9nZW1fb2JqZWN0X2Z1bmNzLnZtYXBfbG9jYWwuCj4gKyAqIEJ1dCBpdCBjYW4gYWxzbyBiZSBj
YWxsZWQgYnkgZHJpdmVycyBkaXJlY3RseSwgaW4gd2hpY2ggY2FzZSBpdCB3aWxsIGhpZGUKPiAr
ICogdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gZG1hLWJ1ZiBpbXBvcnRlZCBhbmQgbmF0aXZlbHkg
YWxsb2NhdGVkIG9iamVjdHMuCj4gKyAqLwo+ICt2b2lkIGRybV9nZW1fc2htZW1fdnVubWFwX2xv
Y2FsKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1hcCkK
PiArewo+ICsJc3RydWN0IGRybV9nZW1fc2htZW1fb2JqZWN0ICpzaG1lbSA9IHRvX2RybV9nZW1f
c2htZW1fb2JqKG9iaik7Cj4gKwo+ICsJZG1hX3Jlc3ZfYXNzZXJ0X2hlbGQob2JqLT5yZXN2KTsK
PiArCj4gKwltdXRleF9sb2NrKCZzaG1lbS0+dm1hcF9sb2NrKTsKPiArCWRybV9nZW1fc2htZW1f
dnVubWFwX2xvY2tlZChzaG1lbSwgbWFwLCB0cnVlKTsKPiArCW11dGV4X3VubG9jaygmc2htZW0t
PnZtYXBfbG9jayk7Cj4gK30KPiArRVhQT1JUX1NZTUJPTChkcm1fZ2VtX3NobWVtX3Z1bm1hcF9s
b2NhbCk7Cj4gKwo+ICBzdHJ1Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKgo+ICBkcm1fZ2VtX3No
bWVtX2NyZWF0ZV93aXRoX2hhbmRsZShzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwKPiAgCQkJ
CSBzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzaXplX3Qgc2l6ZSwKPiBkaWZmIC0tZ2l0IGEvaW5j
bHVkZS9kcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuaCBiL2luY2x1ZGUvZHJtL2RybV9nZW1fc2ht
ZW1faGVscGVyLmgKPiBpbmRleCA0MzQzMjhkOGEwZDkuLjNmNTliZGY3NDlhYSAxMDA2NDQKPiAt
LS0gYS9pbmNsdWRlL2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5oCj4gKysrIGIvaW5jbHVkZS9k
cm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuaAo+IEBAIC0xMTQsNyArMTE0LDkgQEAgdm9pZCBkcm1f
Z2VtX3NobWVtX3B1dF9wYWdlcyhzdHJ1Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKnNobWVtKTsK
PiAgaW50IGRybV9nZW1fc2htZW1fcGluKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKPiAg
dm9pZCBkcm1fZ2VtX3NobWVtX3VucGluKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKTsKPiAg
aW50IGRybV9nZW1fc2htZW1fdm1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0
IGRtYV9idWZfbWFwICptYXApOwo+ICtpbnQgZHJtX2dlbV9zaG1lbV92bWFwX2xvY2FsKHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgZG1hX2J1Zl9tYXAgKm1hcCk7Cj4gIHZvaWQg
ZHJtX2dlbV9zaG1lbV92dW5tYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBk
bWFfYnVmX21hcCAqbWFwKTsKPiArdm9pZCBkcm1fZ2VtX3NobWVtX3Z1bm1hcF9sb2NhbChzdHJ1
Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IGRtYV9idWZfbWFwICptYXApOwo+ICAKPiAg
aW50IGRybV9nZW1fc2htZW1fbWFkdmlzZShzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgaW50
IG1hZHYpOwo+ICAKPiAtLSAKPiAyLjI5LjIKPiAKCi0tIApEYW5pZWwgVmV0dGVyClNvZnR3YXJl
IEVuZ2luZWVyLCBJbnRlbCBDb3Jwb3JhdGlvbgpodHRwOi8vYmxvZy5mZndsbC5jaApfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1h
aWxpbmcgbGlzdApMaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5s
aW5hcm8ub3JnL21haWxtYW4vbGlzdGluZm8vbGluYXJvLW1tLXNpZwo=
