Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 421341B82DC
	for <lists+linaro-mm-sig@lfdr.de>; Sat, 25 Apr 2020 02:45:24 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 63BE1619D1
	for <lists+linaro-mm-sig@lfdr.de>; Sat, 25 Apr 2020 00:45:23 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 55B72619D4; Sat, 25 Apr 2020 00:45:23 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_NONE,RCVD_IN_MSPIKE_H3,RCVD_IN_MSPIKE_WL,SPF_HELO_NONE
	autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 1D603619CF;
	Sat, 25 Apr 2020 00:44:27 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 9E63660E45
 for <linaro-mm-sig@lists.linaro.org>; Sat, 25 Apr 2020 00:44:24 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 7B8EF619CF; Sat, 25 Apr 2020 00:44:24 +0000 (UTC)
Received: from mail-ot1-f67.google.com (mail-ot1-f67.google.com
 [209.85.210.67])
 by lists.linaro.org (Postfix) with ESMTPS id 0576260E45
 for <linaro-mm-sig@lists.linaro.org>; Sat, 25 Apr 2020 00:44:23 +0000 (UTC)
Received: by mail-ot1-f67.google.com with SMTP id j4so15759017otr.11
 for <linaro-mm-sig@lists.linaro.org>; Fri, 24 Apr 2020 17:44:22 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=CCDb553V1CVesXYGOyxZEELyTVgyKI2biYYtZJsGzDc=;
 b=P07jqxSWMMUSPVuUlWBiONWw1M7HDPdOwnfRfpeTbTg2/wyAeMfuoBHIaVgm1QAxdx
 XotNIpiF2WCorBpn1nVxmcC+CDPnlF3+zINY3NjomWG2HJ967Ii9m/FJmv5Z2QXHugIj
 PXBhVYoesx9ef1BDNkqt+NHoGFnUCQaPgTpMLJvZr5q8lX22h8c+4pXgDB1L2Sko0dEm
 SF4jtxBnSisiXDdnFhkofi1Cugu1GaW/5BNDEWisu6KS6UGwm6BwQLfWmaXFAHzGFkfZ
 b0TYWxJCzQdHtHaZvLf7zco5pYDDeu+9QNyIV0xQWgNtj6DPK95ZKtnHzdcL+HBpeHmw
 zNPQ==
X-Gm-Message-State: AGi0PuaN/2eVL+lSDGbQMFwccx97M/xLPnF8rVh1/vVkc37x9zq+2/Hk
 gucl1J3BsdaG6S5cB0LSr/9VZPeltKNYRGUoePoQaWMt
X-Google-Smtp-Source: APiQypKjehgA09VJZ5pHHDJvu+1vK/3lGElP+1ZSJh6fDhHer1J9wWO+OJn7x/bPb8K+t/5/XoksrDXfVdEfExvrDy0=
X-Received: by 2002:a05:6830:22dc:: with SMTP id
 q28mr9490064otc.221.1587775462417; 
 Fri, 24 Apr 2020 17:44:22 -0700 (PDT)
MIME-Version: 1.0
References: <20200424222740.16259-1-afd@ti.com>
In-Reply-To: <20200424222740.16259-1-afd@ti.com>
From: John Stultz <john.stultz@linaro.org>
Date: Fri, 24 Apr 2020 17:44:10 -0700
Message-ID: <CALAqxLWcUkESyqVL1=Jzn_qOayohSvZe9008HGsSZ6+6AXaRXA@mail.gmail.com>
To: "Andrew F. Davis" <afd@ti.com>
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: Arnd Bergmann <arnd@arndb.de>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 lkml <linux-kernel@vger.kernel.org>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 "moderated list:DMA BUFFER SHARING FRAMEWORK" <linaro-mm-sig@lists.linaro.org>,
 Rob Herring <robh+dt@kernel.org>, Philipp Zabel <p.zabel@pengutronix.de>
Subject: Re: [Linaro-mm-sig] [PATCH] misc: sram: Add dma-heap-export
	reserved SRAM area type
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

T24gRnJpLCBBcHIgMjQsIDIwMjAgYXQgMzoyNyBQTSBBbmRyZXcgRi4gRGF2aXMgPGFmZEB0aS5j
b20+IHdyb3RlOgo+IFRoaXMgbmV3IGV4cG9ydCB0eXBlIGV4cG9zZXMgdG8gdXNlcnNwYWNlIHRo
ZSBTUkFNIGFyZWEgYXMgYSBETUEtSGVhcCwKPiB0aGlzIGFsbG93cyBmb3IgYWxsb2NhdGlvbnMg
YXMgRE1BLUJVRnMgdGhhdCBjYW4gYmUgY29uc3VtZWQgYnkgdmFyaW91cwo+IERNQS1CVUYgc3Vw
cG9ydGluZyBkZXZpY2VzLgo+Cj4gU2lnbmVkLW9mZi1ieTogQW5kcmV3IEYuIERhdmlzIDxhZmRA
dGkuY29tPgoKTmljZSEgVmVyeSBleGNpdGVkIHRvIGhhdmUgdGhlIGZpcnN0IG5ldyBoZWFwICh0
aGF0IGRpZG4ndCBjb21lIHdpdGgKdGhlIGluaXRpYWwgcGF0Y2hzZXQpIQoKT3ZlcmFsbCBsb29r
cyBnb29kISBJIGRvbid0IGhhdmUgYW55IGNvbW1lbnQgb24gdGhlIFNSQU0gc2lkZSBvZgp0aGlu
Z3MsIGJ1dCBhIGZldyBtaW5vciBxdWVzdGlvbnMvbml0cyBiZWxvdy4KCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvbWlzYy9zcmFtLWRtYS1oZWFwLmMgYi9kcml2ZXJzL21pc2Mvc3JhbS1kbWEtaGVh
cC5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLjM4ZGYwMzk3
ZjI5NAo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL21pc2Mvc3JhbS1kbWEtaGVhcC5j
Cj4gQEAgLTAsMCArMSwyNDMgQEAKPiArLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0y
LjAKPiArLyoKPiArICogU1JBTSBETUEtSGVhcCB1c2Vyc3BhY2UgZXhwb3J0ZXIKPiArICoKPiAr
ICogQ29weXJpZ2h0IChDKSAyMDE5IFRleGFzIEluc3RydW1lbnRzIEluY29ycG9yYXRlZCAtIGh0
dHA6Ly93d3cudGkuY29tLwo+ICsgKiAgICAgQW5kcmV3IEYuIERhdmlzIDxhZmRAdGkuY29tPgo+
ICsgKi8KPiArCj4gKyNpbmNsdWRlIDxsaW51eC9kbWEtbWFwcGluZy5oPgo+ICsjaW5jbHVkZSA8
bGludXgvZXJyLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9nZW5hbGxvYy5oPgo+ICsjaW5jbHVkZSA8
bGludXgvaW8uaD4KPiArI2luY2x1ZGUgPGxpbnV4L21tLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9z
Y2F0dGVybGlzdC5oPgo+ICsjaW5jbHVkZSA8bGludXgvc2xhYi5oPgo+ICsjaW5jbHVkZSA8bGlu
dXgvZG1hLWJ1Zi5oPgo+ICsjaW5jbHVkZSA8bGludXgvZG1hLWhlYXAuaD4KPiArCj4gKyNpbmNs
dWRlICJzcmFtLmgiCj4gKwo+ICtzdHJ1Y3Qgc3JhbV9kbWFfaGVhcCB7Cj4gKyAgICAgICBzdHJ1
Y3QgZG1hX2hlYXAgKmhlYXA7Cj4gKyAgICAgICBzdHJ1Y3QgZ2VuX3Bvb2wgKnBvb2w7Cj4gK307
Cj4gKwo+ICtzdHJ1Y3Qgc3JhbV9kbWFfaGVhcF9idWZmZXIgewo+ICsgICAgICAgc3RydWN0IGdl
bl9wb29sICpwb29sOwo+ICsgICAgICAgc3RydWN0IGxpc3RfaGVhZCBhdHRhY2htZW50czsKPiAr
ICAgICAgIHN0cnVjdCBtdXRleCBhdHRhY2htZW50c19sb2NrOwo+ICsgICAgICAgdW5zaWduZWQg
bG9uZyBsZW47Cj4gKyAgICAgICB2b2lkICp2YWRkcjsKPiArICAgICAgIHBoeXNfYWRkcl90IHBh
ZGRyOwo+ICt9Owo+ICsKPiArc3RydWN0IGRtYV9oZWFwX2F0dGFjaG1lbnQgewo+ICsgICAgICAg
c3RydWN0IGRldmljZSAqZGV2Owo+ICsgICAgICAgc3RydWN0IHNnX3RhYmxlICp0YWJsZTsKPiAr
ICAgICAgIHN0cnVjdCBsaXN0X2hlYWQgbGlzdDsKPiArfTsKPiArCj4gK3N0YXRpYyBpbnQgZG1h
X2hlYXBfYXR0YWNoKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNobWVudCkKPiArewo+ICsg
ICAgICAgc3RydWN0IHNyYW1fZG1hX2hlYXBfYnVmZmVyICpidWZmZXIgPSBkbWFidWYtPnByaXY7
Cj4gKyAgICAgICBzdHJ1Y3QgZG1hX2hlYXBfYXR0YWNobWVudCAqYTsKPiArICAgICAgIHN0cnVj
dCBzZ190YWJsZSAqdGFibGU7Cj4gKwo+ICsgICAgICAgYSA9IGt6YWxsb2Moc2l6ZW9mKCphKSwg
R0ZQX0tFUk5FTCk7Cj4gKyAgICAgICBpZiAoIWEpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAt
RU5PTUVNOwo+ICsKPiArICAgICAgIHRhYmxlID0ga21hbGxvYyhzaXplb2YoKnRhYmxlKSwgR0ZQ
X0tFUk5FTCk7Cj4gKyAgICAgICBpZiAoIXRhYmxlKSB7Cj4gKyAgICAgICAgICAgICAgIGtmcmVl
KGEpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiArICAgICAgIH0KPiArICAg
ICAgIGlmIChzZ19hbGxvY190YWJsZSh0YWJsZSwgMSwgR0ZQX0tFUk5FTCkpIHsKPiArICAgICAg
ICAgICAgICAga2ZyZWUodGFibGUpOwo+ICsgICAgICAgICAgICAgICBrZnJlZShhKTsKPiArICAg
ICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gKyAgICAgICB9Cj4gKyAgICAgICBzZ19zZXRf
cGFnZSh0YWJsZS0+c2dsLCBwZm5fdG9fcGFnZShQRk5fRE9XTihidWZmZXItPnBhZGRyKSksIGJ1
ZmZlci0+bGVuLCAwKTsKPiArCj4gKyAgICAgICBhLT50YWJsZSA9IHRhYmxlOwo+ICsgICAgICAg
YS0+ZGV2ID0gYXR0YWNobWVudC0+ZGV2Owo+ICsgICAgICAgSU5JVF9MSVNUX0hFQUQoJmEtPmxp
c3QpOwo+ICsKPiArICAgICAgIGF0dGFjaG1lbnQtPnByaXYgPSBhOwo+ICsKPiArICAgICAgIG11
dGV4X2xvY2soJmJ1ZmZlci0+YXR0YWNobWVudHNfbG9jayk7Cj4gKyAgICAgICBsaXN0X2FkZCgm
YS0+bGlzdCwgJmJ1ZmZlci0+YXR0YWNobWVudHMpOwo+ICsgICAgICAgbXV0ZXhfdW5sb2NrKCZi
dWZmZXItPmF0dGFjaG1lbnRzX2xvY2spOwo+ICsKPiArICAgICAgIHJldHVybiAwOwo+ICt9Cj4g
Kwo+ICtzdGF0aWMgdm9pZCBkbWFfaGVhcF9kZXRhdGNoKHN0cnVjdCBkbWFfYnVmICpkbWFidWYs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50
ICphdHRhY2htZW50KQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3Qgc3JhbV9kbWFfaGVhcF9idWZmZXIg
KmJ1ZmZlciA9IGRtYWJ1Zi0+cHJpdjsKPiArICAgICAgIHN0cnVjdCBkbWFfaGVhcF9hdHRhY2ht
ZW50ICphID0gYXR0YWNobWVudC0+cHJpdjsKPiArCj4gKyAgICAgICBtdXRleF9sb2NrKCZidWZm
ZXItPmF0dGFjaG1lbnRzX2xvY2spOwo+ICsgICAgICAgbGlzdF9kZWwoJmEtPmxpc3QpOwo+ICsg
ICAgICAgbXV0ZXhfdW5sb2NrKCZidWZmZXItPmF0dGFjaG1lbnRzX2xvY2spOwo+ICsKPiArICAg
ICAgIHNnX2ZyZWVfdGFibGUoYS0+dGFibGUpOwo+ICsgICAgICAga2ZyZWUoYS0+dGFibGUpOwo+
ICsgICAgICAga2ZyZWUoYSk7Cj4gK30KPiArCj4gK3N0YXRpYyBzdHJ1Y3Qgc2dfdGFibGUgKmRt
YV9oZWFwX21hcF9kbWFfYnVmKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaG1lbnQs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bSBkbWFf
ZGF0YV9kaXJlY3Rpb24gZGlyZWN0aW9uKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgZG1hX2hlYXBf
YXR0YWNobWVudCAqYSA9IGF0dGFjaG1lbnQtPnByaXY7Cj4gKyAgICAgICBzdHJ1Y3Qgc2dfdGFi
bGUgKnRhYmxlID0gYS0+dGFibGU7Cj4gKwo+ICsgICAgICAgaWYgKCFkbWFfbWFwX3NnX2F0dHJz
KGF0dGFjaG1lbnQtPmRldiwgdGFibGUtPnNnbCwgdGFibGUtPm5lbnRzLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiwgRE1BX0FUVFJfU0tJUF9DUFVfU1lOQykpCgpN
aWdodCBiZSBuaWNlIHRvIGhhdmUgYSBjb21tZW50IGFzIHRvIHdoeSB5b3UncmUgdXNpbmcgU0tJ
UF9DUFVfU1lOQwphbmQgd2h5IGl0J3Mgc2FmZS4KCj4gKyAgICAgICAgICAgICAgIHJldHVybiBF
UlJfUFRSKC1FTk9NRU0pOwo+ICsKPiArICAgICAgIHJldHVybiB0YWJsZTsKPiArfQo+ICsKPiAr
c3RhdGljIHZvaWQgZG1hX2hlYXBfdW5tYXBfZG1hX2J1ZihzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2ht
ZW50ICphdHRhY2htZW50LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ry
dWN0IHNnX3RhYmxlICp0YWJsZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcmVjdGlvbikKPiArewo+ICsgICAgICAgZG1hX3Vu
bWFwX3NnX2F0dHJzKGF0dGFjaG1lbnQtPmRldiwgdGFibGUtPnNnbCwgdGFibGUtPm5lbnRzLAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiwgRE1BX0FUVFJfU0tJUF9DUFVf
U1lOQyk7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGRtYV9oZWFwX2RtYV9idWZfcmVsZWFzZShz
dHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3Qgc3JhbV9kbWFfaGVh
cF9idWZmZXIgKmJ1ZmZlciA9IGRtYWJ1Zi0+cHJpdjsKPiArCj4gKyAgICAgICBnZW5fcG9vbF9m
cmVlKGJ1ZmZlci0+cG9vbCwgKHVuc2lnbmVkIGxvbmcpYnVmZmVyLT52YWRkciwgYnVmZmVyLT5s
ZW4pOwo+ICsgICAgICAga2ZyZWUoYnVmZmVyKTsKPiArfQo+ICsKPiArc3RhdGljIGludCBkbWFf
aGVhcF9tbWFwKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAq
dm1hKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3Qgc3JhbV9kbWFfaGVhcF9idWZmZXIgKmJ1ZmZlciA9
IGRtYWJ1Zi0+cHJpdjsKPiArICAgICAgIGludCByZXQ7Cj4gKwo+ICsgICAgICAgLyogU1JBTSBt
YXBwaW5ncyBhcmUgbm90IGNhY2hlZCAqLwo+ICsgICAgICAgdm1hLT52bV9wYWdlX3Byb3QgPSBw
Z3Byb3Rfd3JpdGVjb21iaW5lKHZtYS0+dm1fcGFnZV9wcm90KTsKPiArCj4gKyAgICAgICByZXQg
PSB2bV9pb21hcF9tZW1vcnkodm1hLCBidWZmZXItPnBhZGRyLCBidWZmZXItPmxlbik7Cj4gKyAg
ICAgICBpZiAocmV0KQo+ICsgICAgICAgICAgICAgICBwcl9lcnIoIkNvdWxkIG5vdCBtYXAgYnVm
ZmVyIHRvIHVzZXJzcGFjZVxuIik7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHJldDsKPiArfQo+ICsK
PiArc3RhdGljIHZvaWQgKmRtYV9oZWFwX3ZtYXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1ZikKPiAr
ewo+ICsgICAgICAgc3RydWN0IHNyYW1fZG1hX2hlYXBfYnVmZmVyICpidWZmZXIgPSBkbWFidWYt
PnByaXY7Cj4gKwo+ICsgICAgICAgcmV0dXJuIGJ1ZmZlci0+dmFkZHI7Cj4gK30KPiArCj4gK2Nv
bnN0IHN0cnVjdCBkbWFfYnVmX29wcyBzcmFtX2RtYV9oZWFwX2J1Zl9vcHMgPSB7Cj4gKyAgICAg
ICAuYXR0YWNoID0gZG1hX2hlYXBfYXR0YWNoLAo+ICsgICAgICAgLmRldGFjaCA9IGRtYV9oZWFw
X2RldGF0Y2gsCj4gKyAgICAgICAubWFwX2RtYV9idWYgPSBkbWFfaGVhcF9tYXBfZG1hX2J1ZiwK
PiArICAgICAgIC51bm1hcF9kbWFfYnVmID0gZG1hX2hlYXBfdW5tYXBfZG1hX2J1ZiwKPiArICAg
ICAgIC5yZWxlYXNlID0gZG1hX2hlYXBfZG1hX2J1Zl9yZWxlYXNlLAo+ICsgICAgICAgLm1tYXAg
PSBkbWFfaGVhcF9tbWFwLAo+ICsgICAgICAgLnZtYXAgPSBkbWFfaGVhcF92bWFwLAo+ICt9OwoK
Tm8gYmVnaW4vZW5kX2NwdV9hY2Nlc3MgZnVuY3Rpb25zIGhlcmU/IEknbSBndWVzc2luZyBpdCdz
IGJlY2F1c2UKeW91J3JlIGFsd2F5cyB1c2luZyBTS0lQX0NQVV9TWU5DIHNvIGl0IHdvdWxkbid0
IGRvIGFueXRoaW5nPyBBIHNtYWxsCmNvbW1lbnQgaW4gdGhlIGNvZGUgbWlnaHQgaGVscC4KCgo+
ICsKPiArc3RhdGljIGludCBzcmFtX2RtYV9oZWFwX2FsbG9jYXRlKHN0cnVjdCBkbWFfaGVhcCAq
aGVhcCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgbG9uZyBs
ZW4sCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcgZmRf
ZmxhZ3MsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGxvbmcg
aGVhcF9mbGFncykKPiArewo+ICsgICAgICAgc3RydWN0IHNyYW1fZG1hX2hlYXAgKnNyYW1fZG1h
X2hlYXAgPSBkbWFfaGVhcF9nZXRfZHJ2ZGF0YShoZWFwKTsKPiArICAgICAgIHN0cnVjdCBzcmFt
X2RtYV9oZWFwX2J1ZmZlciAqYnVmZmVyOwo+ICsKPiArICAgICAgIERFRklORV9ETUFfQlVGX0VY
UE9SVF9JTkZPKGV4cF9pbmZvKTsKPiArICAgICAgIHN0cnVjdCBkbWFfYnVmICpkbWFidWY7Cj4g
KyAgICAgICBpbnQgcmV0Owo+ICsKPiArICAgICAgIGJ1ZmZlciA9IGt6YWxsb2Moc2l6ZW9mKCpi
dWZmZXIpLCBHRlBfS0VSTkVMKTsKPiArICAgICAgIGlmICghYnVmZmVyKQo+ICsgICAgICAgICAg
ICAgICByZXR1cm4gLUVOT01FTTsKPiArICAgICAgIGJ1ZmZlci0+cG9vbCA9IHNyYW1fZG1hX2hl
YXAtPnBvb2w7Cj4gKyAgICAgICBJTklUX0xJU1RfSEVBRCgmYnVmZmVyLT5hdHRhY2htZW50cyk7
Cj4gKyAgICAgICBtdXRleF9pbml0KCZidWZmZXItPmF0dGFjaG1lbnRzX2xvY2spOwo+ICsgICAg
ICAgYnVmZmVyLT5sZW4gPSBsZW47Cj4gKwo+ICsgICAgICAgYnVmZmVyLT52YWRkciA9ICh2b2lk
ICopZ2VuX3Bvb2xfYWxsb2MoYnVmZmVyLT5wb29sLCBidWZmZXItPmxlbik7Cj4gKyAgICAgICBp
ZiAoIWJ1ZmZlci0+dmFkZHIpIHsKPiArICAgICAgICAgICAgICAgcmV0ID0gLUVOT01FTTsKPiAr
ICAgICAgICAgICAgICAgZ290byBmcmVlX2J1ZmZlcjsKPiArICAgICAgIH0KPiArCj4gKyAgICAg
ICBidWZmZXItPnBhZGRyID0gZ2VuX3Bvb2xfdmlydF90b19waHlzKGJ1ZmZlci0+cG9vbCwgKHVu
c2lnbmVkIGxvbmcpYnVmZmVyLT52YWRkcik7Cj4gKyAgICAgICBpZiAoYnVmZmVyLT5wYWRkciA9
PSAtMSkgewo+ICsgICAgICAgICAgICAgICByZXQgPSAtRU5PTUVNOwo+ICsgICAgICAgICAgICAg
ICBnb3RvIGZyZWVfcG9vbDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICAvKiBjcmVhdGUgdGhl
IGRtYWJ1ZiAqLwo+ICsgICAgICAgZXhwX2luZm8ub3BzID0gJnNyYW1fZG1hX2hlYXBfYnVmX29w
czsKPiArICAgICAgIGV4cF9pbmZvLnNpemUgPSBidWZmZXItPmxlbjsKPiArICAgICAgIGV4cF9p
bmZvLmZsYWdzID0gZmRfZmxhZ3M7Cj4gKyAgICAgICBleHBfaW5mby5wcml2ID0gYnVmZmVyOwo+
ICsgICAgICAgZG1hYnVmID0gZG1hX2J1Zl9leHBvcnQoJmV4cF9pbmZvKTsKPiArICAgICAgIGlm
IChJU19FUlIoZG1hYnVmKSkgewo+ICsgICAgICAgICAgICAgICByZXQgPSBQVFJfRVJSKGRtYWJ1
Zik7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gZnJlZV9wb29sOwo+ICsgICAgICAgfQo+ICsKPiAr
ICAgICAgIHJldCA9IGRtYV9idWZfZmQoZG1hYnVmLCBmZF9mbGFncyk7Cj4gKyAgICAgICBpZiAo
cmV0IDwgMCkgewo+ICsgICAgICAgICAgICAgICBkbWFfYnVmX3B1dChkbWFidWYpOwo+ICsgICAg
ICAgICAgICAgICAvKiBqdXN0IHJldHVybiwgYXMgcHV0IHdpbGwgY2FsbCByZWxlYXNlIGFuZCB0
aGF0IHdpbGwgZnJlZSAqLwo+ICsgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ICsgICAgICAg
fQo+ICsKPiArICAgICAgIHJldHVybiByZXQ7Cj4gKwo+ICtmcmVlX3Bvb2w6Cj4gKyAgICAgICBn
ZW5fcG9vbF9mcmVlKGJ1ZmZlci0+cG9vbCwgKHVuc2lnbmVkIGxvbmcpYnVmZmVyLT52YWRkciwg
YnVmZmVyLT5sZW4pOwo+ICtmcmVlX2J1ZmZlcjoKPiArICAgICAgIGtmcmVlKGJ1ZmZlcik7Cj4g
Kwo+ICsgICAgICAgcmV0dXJuIHJldDsKPiArfQo+ICsKPiArc3RhdGljIHN0cnVjdCBkbWFfaGVh
cF9vcHMgc3JhbV9kbWFfaGVhcF9vcHMgPSB7Cj4gKyAgICAgICAuYWxsb2NhdGUgPSBzcmFtX2Rt
YV9oZWFwX2FsbG9jYXRlLAo+ICt9Owo+ICsKPiAraW50IHNyYW1fZG1hX2hlYXBfZXhwb3J0KHN0
cnVjdCBzcmFtX2RldiAqc3JhbSwKClRoaXMgaXMgdG90YWxseSBhIGJpa2VzaGVkIHRoaW5nIChm
ZWVsIGZyZWUgdG8gaWdub3JlKSwgYnV0IG1heWJlCnNyYW1fZG1hX2hlYXBfY3JlYXRlKCkgIG9y
IF9hZGQoKSB3b3VsZCBiZSBhIGJldHRlciBuYW1lIHRvIGF2b2lkCmZvbGtzIG1peGluZyBpdCB1
cCB3aXRoIHRoZSBkbWFidWYgZXhwb3J0ZXI/Cgo+ICsgICAgICAgICAgICAgICAgICAgICAgICBz
dHJ1Y3Qgc3JhbV9yZXNlcnZlICpibG9jaywKPiArICAgICAgICAgICAgICAgICAgICAgICAgcGh5
c19hZGRyX3Qgc3RhcnQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBzcmFtX3Bh
cnRpdGlvbiAqcGFydCkKPiArewo+ICsgICAgICAgc3RydWN0IHNyYW1fZG1hX2hlYXAgKnNyYW1f
ZG1hX2hlYXA7Cj4gKyAgICAgICBzdHJ1Y3QgZG1hX2hlYXBfZXhwb3J0X2luZm8gZXhwX2luZm87
Cj4gKwo+ICsgICAgICAgZGV2X2luZm8oc3JhbS0+ZGV2LCAiRXhwb3J0aW5nIFNSQU0gcG9vbCAn
JXMnXG4iLCBibG9jay0+bGFiZWwpOwoKQWdhaW4sIHNoZWQgaXNzdWU6IGJ1dCBmb3IgdGVybWlu
b2xvZ3kgY29uc2lzdGVuY3kgKGF0IGxlYXN0IGluIHRoZQpkbWFidWYgaGVhcHMgc3BhY2UpLCBt
YXliZSBoZWFwIGluc3RlYWQgb2YgcG9vbD8KClRoYW5rcyBzbyBtdWNoIGFnYWluIGZvciBzdWJt
aXR0aW5nIHRoaXMhCi1qb2huCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkxpbmFyby1tbS1zaWcgbWFpbGluZyBsaXN0CkxpbmFyby1tbS1zaWdAbGlzdHMu
bGluYXJvLm9yZwpodHRwczovL2xpc3RzLmxpbmFyby5vcmcvbWFpbG1hbi9saXN0aW5mby9saW5h
cm8tbW0tc2lnCg==
