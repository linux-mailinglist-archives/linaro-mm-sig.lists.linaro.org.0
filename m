Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id DB12D1FB0FB
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 16 Jun 2020 14:41:40 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id F34B86171A
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 16 Jun 2020 12:41:39 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id E89F5606A3; Tue, 16 Jun 2020 12:41:39 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_BLOCKED,RCVD_IN_MSPIKE_H2,SPF_HELO_NONE
	autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 8C4AF617AE;
	Tue, 16 Jun 2020 12:40:56 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id D8FB7606A3
 for <linaro-mm-sig@lists.linaro.org>; Tue, 16 Jun 2020 12:40:53 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id C2182617AE; Tue, 16 Jun 2020 12:40:53 +0000 (UTC)
Received: from mail-oi1-f194.google.com (mail-oi1-f194.google.com
 [209.85.167.194])
 by lists.linaro.org (Postfix) with ESMTPS id 5584E606A3
 for <linaro-mm-sig@lists.linaro.org>; Tue, 16 Jun 2020 12:40:52 +0000 (UTC)
Received: by mail-oi1-f194.google.com with SMTP id d67so19057329oig.6
 for <linaro-mm-sig@lists.linaro.org>; Tue, 16 Jun 2020 05:40:52 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=yRuEYGWYbCpgbt9WyvifXrnW7xoF05jSYdHgJjfemG4=;
 b=UqU27GWbJd6prNyDVxnFkjZudC1hD12xVYF46AUtbMo5KRsP8R00y5VuZ4aLKCsFdh
 ELlxzJuWRld7Z8lhErs/hyYnRbPg9puhw/hTssB/aqMKjNwDA24BMDGsNcdTKRUldcOr
 DgIvx1Rlbw/LV7UDxsBqNspN+AaP4t/cq2EJglQZnQtjkldIESDaqj4VmdyXuw7hQ1Kv
 7uOMK7GcfFZftBmDnSlKoLo6JhfO3bx/DrNtPyaJzKiPVxas4DxebRP5dx41HPxHv5AF
 a9bH+hauAPY4h8LrKkZ+kzHSh0jqst0cTHklyXFF1dUht1cWJHOnGstHBMyMxCXoIbcG
 sykg==
X-Gm-Message-State: AOAM531cqg5aWcddtF9NgJQCzT9tTndtuzeeTO8hUS+rLEEgboYWkPke
 83fpKHNnyMnj/cxnymxbxGszYym6ooATXcnvl1FYy+dy
X-Google-Smtp-Source: ABdhPJw1HIcntem/ur3nYuYQnYfdpeq3LaH9w6z+uVXnvPpWXi7NcZfGZ06MIquL/3rMm6i3W0PzTlBfRGVBUlNtAcQ=
X-Received: by 2002:a05:6808:a96:: with SMTP id
 q22mr3251821oij.76.1592311251656; 
 Tue, 16 Jun 2020 05:40:51 -0700 (PDT)
MIME-Version: 1.0
References: <316a5cf9-ca71-6506-bf8b-e79ded9055b2@codeaurora.org>
In-Reply-To: <316a5cf9-ca71-6506-bf8b-e79ded9055b2@codeaurora.org>
From: Sumit Semwal <sumit.semwal@linaro.org>
Date: Tue, 16 Jun 2020 18:10:40 +0530
Message-ID: <CAO_48GEa2B+a8XbaqurvRPZswRQGWq82YqUr4uotvyQKjPQuFQ@mail.gmail.com>
To: Charan Teja Kalla <charante@codeaurora.org>,
 Chris Wilson <chris@chris-wilson.co.uk>, Daniel Vetter <daniel@ffwll.ch>
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: LKML <linux-kernel@vger.kernel.org>, "# 3.4.x" <stable@vger.kernel.org>,
 Linaro MM SIG <linaro-mm-sig@lists.linaro.org>, vinmenon@codeaurora.org,
 DRI mailing list <dri-devel@lists.freedesktop.org>,
 "open list:DMA BUFFER SHARING FRAMEWORK" <linux-media@vger.kernel.org>
Subject: Re: [Linaro-mm-sig] [PATCH] dmabuf: use spinlock to access
	dmabuf->name
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

SGkgRGFuaWVsLCBDaHJpcywKCk9uIFRodSwgMTEgSnVuIDIwMjAgYXQgMTk6MTAsIENoYXJhbiBU
ZWphIEthbGxhIDxjaGFyYW50ZUBjb2RlYXVyb3JhLm9yZz4gd3JvdGU6Cj4KPiBUaGVyZSBleGlz
dHMgYSBzbGVlcC13aGlsZS1hdG9taWMgYnVnIHdoaWxlIGFjY2Vzc2luZyB0aGUgZG1hYnVmLT5u
YW1lCj4gdW5kZXIgbXV0ZXggaW4gdGhlIGRtYWJ1ZmZzX2RuYW1lKCkuIFRoaXMgaXMgY2F1c2Vk
IGZyb20gdGhlIFNFTGludXgKPiBwZXJtaXNzaW9ucyBjaGVja3Mgb24gYSBwcm9jZXNzIHdoZXJl
IGl0IHRyaWVzIHRvIHZhbGlkYXRlIHRoZSBpbmhlcml0ZWQKPiBmaWxlcyBmcm9tIGZvcmsoKSBi
eSB0cmF2ZXJzaW5nIHRoZW0gdGhyb3VnaCBpdGVyYXRlX2ZkKCkgKHdoaWNoCj4gdHJhdmVyc2Ug
ZmlsZXMgdW5kZXIgc3Bpbl9sb2NrKSBhbmQgY2FsbAo+IG1hdGNoX2ZpbGUoc2VjdXJpdHkvc2Vs
aW51eC9ob29rcy5jKSB3aGVyZSB0aGUgcGVybWlzc2lvbiBjaGVja3MgaGFwcGVuLgo+IFRoaXMg
YXVkaXQgaW5mb3JtYXRpb24gaXMgbG9nZ2VkIHVzaW5nIGR1bXBfY29tbW9uX2F1ZGl0X2RhdGEo
KSB3aGVyZSBpdAo+IGNhbGxzIGRfcGF0aCgpIHRvIGdldCB0aGUgZmlsZSBwYXRoIG5hbWUuIElm
IHRoZSBmaWxlIGNoZWNrIGhhcHBlbiBvbgo+IHRoZSBkbWFidWYncyBmZCwgdGhlbiBpdCBlbmRz
IHVwIGluIC0+ZG1hYnVmZnNfZG5hbWUoKSBhbmQgdXNlIG11dGV4IHRvCj4gYWNjZXNzIGRtYWJ1
Zi0+bmFtZS4gVGhlIGZsb3cgd2lsbCBiZSBsaWtlIGJlbG93Ogo+IGZsdXNoX3VuYXV0aG9yaXpl
ZF9maWxlcygpCj4gICBpdGVyYXRlX2ZkKCkKPiAgICAgc3Bpbl9sb2NrKCkgLS0+IFN0YXJ0IG9m
IHRoZSBhdG9taWMgc2VjdGlvbi4KPiAgICAgICBtYXRjaF9maWxlKCkKPiAgICAgICAgIGZpbGVf
aGFzX3Blcm0oKQo+ICAgICAgICAgICBhdmNfaGFzX3Blcm0oKQo+ICAgICAgICAgICAgIGF2Y19h
dWRpdCgpCj4gICAgICAgICAgICAgICBzbG93X2F2Y19hdWRpdCgpCj4gICAgICAgICAgICAgICAg
IGNvbW1vbl9sc21fYXVkaXQoKQo+ICAgICAgICAgICAgICAgICAgIGR1bXBfY29tbW9uX2F1ZGl0
X2RhdGEoKQo+ICAgICAgICAgICAgICAgICAgICAgYXVkaXRfbG9nX2RfcGF0aCgpCj4gICAgICAg
ICAgICAgICAgICAgICAgIGRfcGF0aCgpCj4gICAgICAgICAgICAgICAgICAgICAgICAgZG1hYnVm
ZnNfZG5hbWUoKQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0ZXhfbG9jaygpLS0+IFNs
ZWVwIHdoaWxlIGF0b21pYy4KPgo+IENhbGwgdHJhY2UgY2FwdHVyZWQgKG9uIDQuMTkga2VybmVs
cykgaXMgYmVsb3c6Cj4gX19fbWlnaHRfc2xlZXArMHgyMDQvMHgyMDgKPiBfX21pZ2h0X3NsZWVw
KzB4NTAvMHg4OAo+IF9fbXV0ZXhfbG9ja19jb21tb24rMHg1Yy8weDEwNjgKPiBfX211dGV4X2xv
Y2tfY29tbW9uKzB4NWMvMHgxMDY4Cj4gbXV0ZXhfbG9ja19uZXN0ZWQrMHg0MC8weDUwCj4gZG1h
YnVmZnNfZG5hbWUrMHhhMC8weDE3MAo+IGRfcGF0aCsweDg0LzB4MjkwCj4gYXVkaXRfbG9nX2Rf
cGF0aCsweDc0LzB4MTMwCj4gY29tbW9uX2xzbV9hdWRpdCsweDMzNC8weDZlOAo+IHNsb3dfYXZj
X2F1ZGl0KzB4YjgvMHhmOAo+IGF2Y19oYXNfcGVybSsweDE1NC8weDIxOAo+IGZpbGVfaGFzX3Bl
cm0rMHg3MC8weDE4MAo+IG1hdGNoX2ZpbGUrMHg2MC8weDc4Cj4gaXRlcmF0ZV9mZCsweDEyOC8w
eDE2OAo+IHNlbGludXhfYnBybV9jb21taXR0aW5nX2NyZWRzKzB4MTc4LzB4MjQ4Cj4gc2VjdXJp
dHlfYnBybV9jb21taXR0aW5nX2NyZWRzKzB4MzAvMHg0OAo+IGluc3RhbGxfZXhlY19jcmVkcysw
eDFjLzB4NjgKPiBsb2FkX2VsZl9iaW5hcnkrMHgzYTQvMHgxNGUwCj4gc2VhcmNoX2JpbmFyeV9o
YW5kbGVyKzB4YjAvMHgxZTAKPgo+IFNvLCB1c2Ugc3BpbmxvY2sgdG8gYWNjZXNzIGRtYWJ1Zi0+
bmFtZSB0byBhdm9pZCBzbGVlcC13aGlsZS1hdG9taWMuCkFueSBvYmplY3Rpb25zIHRvIHRoaXMg
Y2hhbmdlPyBUaGlzIGNoYW5nZXMgcHJvdGVjdGlvbiBvbmx5IGZvcgpkbWFidWYtPm5hbWUgZmll
bGQsIGJ1dCBJJ2QgcmVxdWVzdCBlaXRoZXIgb2YgeW91IHRvIHJldmlldyBpdCwKcGxlYXNlPwo+
Cj4gQ2M6IDxzdGFibGVAdmdlci5rZXJuZWwub3JnPiBbNS4zK10KPiBTaWduZWQtb2ZmLWJ5OiBD
aGFyYW4gVGVqYSBSZWRkeSA8Y2hhcmFudGVAY29kZWF1cm9yYS5vcmc+Cj4gLS0tCj4gIGRyaXZl
cnMvZG1hLWJ1Zi9kbWEtYnVmLmMgfCAxMyArKysrKysrLS0tLS0tCj4gIGluY2x1ZGUvbGludXgv
ZG1hLWJ1Zi5oICAgfCAgMSArCj4gIDIgZmlsZXMgY2hhbmdlZCwgOCBpbnNlcnRpb25zKCspLCA2
IGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMg
Yi9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jCj4gaW5kZXggMDFjZTEyNS4uMmUwNDU2YyAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jCj4gKysrIGIvZHJpdmVycy9kbWEt
YnVmL2RtYS1idWYuYwo+IEBAIC00NSwxMCArNDUsMTAgQEAgc3RhdGljIGNoYXIgKmRtYWJ1ZmZz
X2RuYW1lKHN0cnVjdCBkZW50cnkgKmRlbnRyeSwgY2hhciAqYnVmZmVyLCBpbnQgYnVmbGVuKQo+
ICAgICAgICAgc2l6ZV90IHJldCA9IDA7Cj4KPiAgICAgICAgIGRtYWJ1ZiA9IGRlbnRyeS0+ZF9m
c2RhdGE7Cj4gLSAgICAgICBkbWFfcmVzdl9sb2NrKGRtYWJ1Zi0+cmVzdiwgTlVMTCk7Cj4gKyAg
ICAgICBzcGluX2xvY2soJmRtYWJ1Zi0+bmFtZV9sb2NrKTsKPiAgICAgICAgIGlmIChkbWFidWYt
Pm5hbWUpCj4gICAgICAgICAgICAgICAgIHJldCA9IHN0cmxjcHkobmFtZSwgZG1hYnVmLT5uYW1l
LCBETUFfQlVGX05BTUVfTEVOKTsKPiAtICAgICAgIGRtYV9yZXN2X3VubG9jayhkbWFidWYtPnJl
c3YpOwo+ICsgICAgICAgc3Bpbl91bmxvY2soJmRtYWJ1Zi0+bmFtZV9sb2NrKTsKPgo+ICAgICAg
ICAgcmV0dXJuIGR5bmFtaWNfZG5hbWUoZGVudHJ5LCBidWZmZXIsIGJ1ZmxlbiwgIi8lczolcyIs
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZW50cnktPmRfbmFtZS5uYW1lLCByZXQg
PiAwID8gbmFtZSA6ICIiKTsKPiBAQCAtMzM1LDcgKzMzNSw3IEBAIHN0YXRpYyBsb25nIGRtYV9i
dWZfc2V0X25hbWUoc3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwgY29uc3QgY2hhciBfX3VzZXIgKmJ1
ZikKPiAgICAgICAgIGlmIChJU19FUlIobmFtZSkpCj4gICAgICAgICAgICAgICAgIHJldHVybiBQ
VFJfRVJSKG5hbWUpOwo+Cj4gLSAgICAgICBkbWFfcmVzdl9sb2NrKGRtYWJ1Zi0+cmVzdiwgTlVM
TCk7Cj4gKyAgICAgICBzcGluX2xvY2soJmRtYWJ1Zi0+bmFtZV9sb2NrKTsKPiAgICAgICAgIGlm
ICghbGlzdF9lbXB0eSgmZG1hYnVmLT5hdHRhY2htZW50cykpIHsKPiAgICAgICAgICAgICAgICAg
cmV0ID0gLUVCVVNZOwo+ICAgICAgICAgICAgICAgICBrZnJlZShuYW1lKTsKPiBAQCAtMzQ1LDcg
KzM0NSw3IEBAIHN0YXRpYyBsb25nIGRtYV9idWZfc2V0X25hbWUoc3RydWN0IGRtYV9idWYgKmRt
YWJ1ZiwgY29uc3QgY2hhciBfX3VzZXIgKmJ1ZikKPiAgICAgICAgIGRtYWJ1Zi0+bmFtZSA9IG5h
bWU7Cj4KPiAgb3V0X3VubG9jazoKPiAtICAgICAgIGRtYV9yZXN2X3VubG9jayhkbWFidWYtPnJl
c3YpOwo+ICsgICAgICAgc3Bpbl91bmxvY2soJmRtYWJ1Zi0+bmFtZV9sb2NrKTsKPiAgICAgICAg
IHJldHVybiByZXQ7Cj4gIH0KPgo+IEBAIC00MDUsMTAgKzQwNSwxMCBAQCBzdGF0aWMgdm9pZCBk
bWFfYnVmX3Nob3dfZmRpbmZvKHN0cnVjdCBzZXFfZmlsZSAqbSwgc3RydWN0IGZpbGUgKmZpbGUp
Cj4gICAgICAgICAvKiBEb24ndCBjb3VudCB0aGUgdGVtcG9yYXJ5IHJlZmVyZW5jZSB0YWtlbiBp
bnNpZGUgcHJvY2ZzIHNlcV9zaG93ICovCj4gICAgICAgICBzZXFfcHJpbnRmKG0sICJjb3VudDpc
dCVsZFxuIiwgZmlsZV9jb3VudChkbWFidWYtPmZpbGUpIC0gMSk7Cj4gICAgICAgICBzZXFfcHJp
bnRmKG0sICJleHBfbmFtZTpcdCVzXG4iLCBkbWFidWYtPmV4cF9uYW1lKTsKPiAtICAgICAgIGRt
YV9yZXN2X2xvY2soZG1hYnVmLT5yZXN2LCBOVUxMKTsKPiArICAgICAgIHNwaW5fbG9jaygmZG1h
YnVmLT5uYW1lX2xvY2spOwo+ICAgICAgICAgaWYgKGRtYWJ1Zi0+bmFtZSkKPiAgICAgICAgICAg
ICAgICAgc2VxX3ByaW50ZihtLCAibmFtZTpcdCVzXG4iLCBkbWFidWYtPm5hbWUpOwo+IC0gICAg
ICAgZG1hX3Jlc3ZfdW5sb2NrKGRtYWJ1Zi0+cmVzdik7Cj4gKyAgICAgICBzcGluX3VubG9jaygm
ZG1hYnVmLT5uYW1lX2xvY2spOwo+ICB9Cj4KPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBmaWxlX29w
ZXJhdGlvbnMgZG1hX2J1Zl9mb3BzID0gewo+IEBAIC01NDYsNiArNTQ2LDcgQEAgc3RydWN0IGRt
YV9idWYgKmRtYV9idWZfZXhwb3J0KGNvbnN0IHN0cnVjdCBkbWFfYnVmX2V4cG9ydF9pbmZvICpl
eHBfaW5mbykKPiAgICAgICAgIGRtYWJ1Zi0+c2l6ZSA9IGV4cF9pbmZvLT5zaXplOwo+ICAgICAg
ICAgZG1hYnVmLT5leHBfbmFtZSA9IGV4cF9pbmZvLT5leHBfbmFtZTsKPiAgICAgICAgIGRtYWJ1
Zi0+b3duZXIgPSBleHBfaW5mby0+b3duZXI7Cj4gKyAgICAgICBzcGluX2xvY2tfaW5pdCgmZG1h
YnVmLT5uYW1lX2xvY2spOwo+ICAgICAgICAgaW5pdF93YWl0cXVldWVfaGVhZCgmZG1hYnVmLT5w
b2xsKTsKPiAgICAgICAgIGRtYWJ1Zi0+Y2JfZXhjbC5wb2xsID0gZG1hYnVmLT5jYl9zaGFyZWQu
cG9sbCA9ICZkbWFidWYtPnBvbGw7Cj4gICAgICAgICBkbWFidWYtPmNiX2V4Y2wuYWN0aXZlID0g
ZG1hYnVmLT5jYl9zaGFyZWQuYWN0aXZlID0gMDsKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51
eC9kbWEtYnVmLmggYi9pbmNsdWRlL2xpbnV4L2RtYS1idWYuaAo+IGluZGV4IGFiMGMxNTYuLjkz
MTA4ZmQgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9saW51eC9kbWEtYnVmLmgKPiArKysgYi9pbmNs
dWRlL2xpbnV4L2RtYS1idWYuaAo+IEBAIC0zMTEsNiArMzExLDcgQEAgc3RydWN0IGRtYV9idWYg
ewo+ICAgICAgICAgdm9pZCAqdm1hcF9wdHI7Cj4gICAgICAgICBjb25zdCBjaGFyICpleHBfbmFt
ZTsKPiAgICAgICAgIGNvbnN0IGNoYXIgKm5hbWU7Cj4gKyAgICAgICBzcGlubG9ja190IG5hbWVf
bG9jazsKPiAgICAgICAgIHN0cnVjdCBtb2R1bGUgKm93bmVyOwo+ICAgICAgICAgc3RydWN0IGxp
c3RfaGVhZCBsaXN0X25vZGU7Cj4gICAgICAgICB2b2lkICpwcml2Owo+IC0tCj4gVGhlIFF1YWxj
b21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIGlzIGEgbWVtYmVyIG9mIHRoZSBDb2RlIEF1cm9y
YSBGb3J1bSwgYSBMaW51eCBGb3VuZGF0aW9uIENvbGxhYm9yYXRpdmUgUHJvamVjdAoKQmVzdCwK
U3VtaXQuCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxp
bmFyby1tbS1zaWcgbWFpbGluZyBsaXN0CkxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZwpo
dHRwczovL2xpc3RzLmxpbmFyby5vcmcvbWFpbG1hbi9saXN0aW5mby9saW5hcm8tbW0tc2lnCg==
