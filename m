Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 4DA105118CD
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 27 Apr 2022 16:34:58 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 7D02047FB5
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 27 Apr 2022 14:34:57 +0000 (UTC)
Received: from mail-yb1-f201.google.com (mail-yb1-f201.google.com [209.85.219.201])
	by lists.linaro.org (Postfix) with ESMTPS id 0C6DB4030D
	for <linaro-mm-sig@lists.linaro.org>; Wed, 20 Apr 2022 23:52:52 +0000 (UTC)
Received: by mail-yb1-f201.google.com with SMTP id l16-20020a25cc10000000b006456cb3d1deso1545651ybf.14
        for <linaro-mm-sig@lists.linaro.org>; Wed, 20 Apr 2022 16:52:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20210112;
        h=date:in-reply-to:message-id:mime-version:references:subject:from:to
         :cc:content-transfer-encoding;
        bh=/gvN+QpYV7OLh/aEKqlMjgKuKem4NnQTY6rvHp91u8M=;
        b=sMA3qf7elQFHyscq19H1EpWDhaRa/I7ci48fDvM7QclHAcQqhkQtppdGXfJls2ija/
         MvtUn9QqCmeX2jXoh9aXOsqLWBhS95CDoqK3LEcBjVCrsZn3rhJ6gF2q3wsCJy6141rn
         HXihJHcxQFcvvrhcZnXaBAOeuPSzPOu5OP6IP7nryfGBwy/4jH9/4rQvdFweYWS4ZJ7o
         iFBWJJboWcdIl0qxM5PnlYsSTP+g7LGwTte4o0TcoqvscLQAxZbvTu5sODCDXJ8Q1tgA
         rw3i8pgp7ryIMuZezHAtqRxaB/qJTOcE2DcxLzUs4No3oDDwuF4FO1tWii3lpPVJrOBb
         r2rg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:date:in-reply-to:message-id:mime-version
         :references:subject:from:to:cc:content-transfer-encoding;
        bh=/gvN+QpYV7OLh/aEKqlMjgKuKem4NnQTY6rvHp91u8M=;
        b=bLdqOYrgvcZZZkww9T2ffvPBfOcVYJCqjNa3Y2qWKPs+Bofs10qDoHxTb+1UsN98PK
         CQzFyXIomeLUKxWwyR5MOBfyM2HwVyQddQBknmAd8unY4YP5eoCRFg+7r7bz2dt5CVg4
         YUmpKJn+kR94TTQYWNuhMBtwquOjwX7sxLhI0BaQLUbvZvVCnkXVIgo0e0COGmAV6Wke
         h2BnvP2kMm10VEGlNDLzDBs5VapzSPVVijGpUycQ2XB/iIneibUE+3vB1mVVQN0yndHC
         TnNItMPDoygTesNGk9eN+R44WauRLlFSfYI1r441CWB7pk8SbTiKe+LHbVEYOSAdmWPx
         hfPg==
X-Gm-Message-State: AOAM5312nWHJFvd/z6inrx0MX/0rxNxMAU7CDUwoCwkSfL3rfjL2QmQD
	sDDLu8klwDfkX2gLsLO3AfZK7ReoWUzwhF0=
X-Google-Smtp-Source: ABdhPJxTnlpo/iNagwkjPHbucxYH+CtEj8ohxJdE5GbeBLJ3G2GWRSAkV6DdlP8lN0r7l8RCXlv3YW3DGl+NeWs=
X-Received: from tj.c.googlers.com ([fda3:e722:ac3:cc00:20:ed76:c0a8:53a])
 (user=tjmercier job=sendgmr) by 2002:a25:2d4d:0:b0:641:d14e:ff85 with SMTP id
 s13-20020a252d4d000000b00641d14eff85mr21685745ybe.128.1650498771646; Wed, 20
 Apr 2022 16:52:51 -0700 (PDT)
Date: Wed, 20 Apr 2022 23:52:23 +0000
In-Reply-To: <20220420235228.2767816-1-tjmercier@google.com>
Message-Id: <20220420235228.2767816-6-tjmercier@google.com>
Mime-Version: 1.0
References: <20220420235228.2767816-1-tjmercier@google.com>
X-Mailer: git-send-email 2.36.0.rc0.470.gd361397f0d-goog
From: "T.J. Mercier" <tjmercier@google.com>
To: tjmercier@google.com, daniel@ffwll.ch, tj@kernel.org,
	Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
	"=?UTF-8?q?Arve=20Hj=C3=B8nnev=C3=A5g?=" <arve@android.com>, Todd Kjos <tkjos@android.com>, Martijn Coenen <maco@android.com>,
	Joel Fernandes <joel@joelfernandes.org>, Christian Brauner <brauner@kernel.org>,
	Hridya Valsaraju <hridya@google.com>, Suren Baghdasaryan <surenb@google.com>,
	Sumit Semwal <sumit.semwal@linaro.org>,
	"=?UTF-8?q?Christian=20K=C3=B6nig?=" <christian.koenig@amd.com>
X-MailFrom: 305xgYgkKDagbRUMZKQMZOWWOTM.KWUTQVIZW-UU-aQOTQaba.TQVIZW.WZO@flex--tjmercier.bounces.google.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
Message-ID-Hash: UATXNLMP3EWHJJPZDV77U26DCMF436YD
X-Message-ID-Hash: UATXNLMP3EWHJJPZDV77U26DCMF436YD
X-Mailman-Approved-At: Wed, 27 Apr 2022 14:34:50 +0000
CC: jstultz@google.com, cmllamas@google.com, kaleshsingh@google.com, Kenny.Ho@amd.com, mkoutny@suse.com, skhan@linuxfoundation.org, kernel-team@android.com, linux-kernel@vger.kernel.org, linux-media@vger.kernel.org, dri-devel@lists.freedesktop.org, linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [RFC v5 5/6] binder: Add flags to relinquish ownership of fds
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/UATXNLMP3EWHJJPZDV77U26DCMF436YD/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

RnJvbTogSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlhQGdvb2dsZS5jb20+DQoNClRoaXMgcGF0Y2gg
aW50cm9kdWNlcyBmbGFncyBCSU5ERVJfRkRfRkxBR19TRU5ERVJfTk9fTkVFRCwgYW5kDQpCSU5E
RVJfRkRBX0ZMQUdfU0VOREVSX05PX05FRUQgdGhhdCBhIHByb2Nlc3Mgc2VuZGluZyBhbiBpbmRp
dmlkdWFsDQpmZCBvciBmZCBhcnJheSB0byBhbm90aGVyIHByb2Nlc3Mgb3ZlciBiaW5kZXIgSVBD
IGNhbiBzZXQgdG8gcmVsaW5xdWlzaA0Kb3duZXJzaGlwIG9mIHRoZSBmZHMgYmVpbmcgc2VudCBm
b3IgbWVtb3J5IGFjY291bnRpbmcgcHVycG9zZXMuIElmIHRoZQ0KZmxhZyBpcyBmb3VuZCB0byBi
ZSBzZXQgZHVyaW5nIHRoZSBmZCBvciBmZCBhcnJheSB0cmFuc2xhdGlvbiBhbmQgdGhlDQpmZCBp
cyBmb3IgYSBETUEtQlVGLCB0aGUgYnVmZmVyIGlzIHVuY2hhcmdlZCBmcm9tIHRoZSBzZW5kZXIn
cyBjZ3JvdXANCmFuZCBjaGFyZ2VkIHRvIHRoZSByZWNlaXZpbmcgcHJvY2VzcydzIGNncm91cCBp
bnN0ZWFkLg0KDQpJdCBpcyB1cCB0byB0aGUgc2VuZGluZyBwcm9jZXNzIHRvIGVuc3VyZSB0aGF0
IGl0IGNsb3NlcyB0aGUgZmRzDQpyZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIHRyYW5zZmVyIGZh
aWxlZCBvciBzdWNjZWVkZWQuDQoNCk1vc3QgZ3JhcGhpY3Mgc2hhcmVkIG1lbW9yeSBhbGxvY2F0
aW9ucyBpbiBBbmRyb2lkIGFyZSBkb25lIGJ5IHRoZQ0KZ3JhcGhpY3MgYWxsb2NhdG9yIEhBTCBw
cm9jZXNzLiBPbiByZXF1ZXN0cyBmcm9tIGNsaWVudHMsIHRoZSBIQUwgcHJvY2Vzcw0KYWxsb2Nh
dGVzIG1lbW9yeSBhbmQgc2VuZHMgdGhlIGZkcyB0byB0aGUgY2xpZW50cyBvdmVyIGJpbmRlciBJ
UEMuDQpUaGUgZ3JhcGhpY3MgYWxsb2NhdG9yIEhBTCB3aWxsIG5vdCByZXRhaW4gYW55IHJlZmVy
ZW5jZXMgdG8gdGhlDQpidWZmZXJzLiBXaGVuIHRoZSBIQUwgc2V0cyAqX0ZMQUdfU0VOREVSX05P
X05FRUQgZm9yIGZkIGFycmF5cyBob2xkaW5nDQpETUEtQlVGIGZkcywgb3IgaW5kaXZpZHVhbCBm
ZCBvYmplY3RzLCB0aGUgZ3B1IGNncm91cCBjb250cm9sbGVyIHdpbGwNCmJlIGFibGUgdG8gY29y
cmVjdGx5IGNoYXJnZSB0aGUgYnVmZmVycyB0byB0aGUgY2xpZW50IHByb2Nlc3NlcyBpbnN0ZWFk
DQpvZiB0aGUgZ3JhcGhpY3MgYWxsb2NhdG9yIEhBTC4NCg0KU2luY2UgdGhpcyBpcyBhIG5ldyBm
ZWF0dXJlIGV4cG9zZWQgdG8gdXNlcnNwYWNlLCB0aGUga2VybmVsIGFuZCB1c2Vyc3BhY2UNCm11
c3QgYmUgY29tcGF0aWJsZSBmb3IgdGhlIGFjY291bnRpbmcgdG8gd29yayBmb3IgdHJhbnNmZXJz
LiBJbiBhbGwgY2FzZXMNCnRoZSBhbGxvY2F0aW9uIGFuZCB0cmFuc3BvcnQgb2YgRE1BIGJ1ZmZl
cnMgdmlhIGJpbmRlciB3aWxsIHN1Y2NlZWQsIGJ1dA0Kb25seSB3aGVuIGJvdGggdGhlIGtlcm5l
bCBzdXBwb3J0cywgYW5kIHVzZXJzcGFjZSBkZXBlbmRzIG9uIHRoaXMgZmVhdHVyZQ0Kd2lsbCB0
aGUgdHJhbnNmZXIgYWNjb3VudGluZyB3b3JrLiBUaGUgcG9zc2libGUgc2NlbmFyaW9zIGFyZSBk
ZXRhaWxlZA0KYmVsb3c6DQoNCjEuIG5ldyBrZXJuZWwgKyBvbGQgdXNlcnNwYWNlDQpUaGUga2Vy
bmVsIHN1cHBvcnRzIHRoZSBmZWF0dXJlIGJ1dCB1c2Vyc3BhY2UgZG9lcyBub3QgdXNlIGl0LiBU
aGUgb2xkDQp1c2Vyc3BhY2Ugd29uJ3QgbW91bnQgdGhlIG5ldyBjZ3JvdXAgY29udHJvbGxlciwg
YWNjb3VudGluZyBpcyBub3QNCnBlcmZvcm1lZCwgY2hhcmdlIGlzIG5vdCB0cmFuc2ZlcnJlZC4N
Cg0KMi4gb2xkIGtlcm5lbCArIG5ldyB1c2Vyc3BhY2UNClRoZSBuZXcgY2dyb3VwIGNvbnRyb2xs
ZXIgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUga2VybmVsLCBhY2NvdW50aW5nIGlzDQpub3QgcGVy
Zm9ybWVkLCBjaGFyZ2UgaXMgbm90IHRyYW5zZmVycmVkLg0KDQozLiBvbGQga2VybmVsICsgb2xk
IHVzZXJzcGFjZQ0KU2FtZSBhcyAjMg0KDQo0LiBuZXcga2VybmVsICsgbmV3IHVzZXJzcGFjZQ0K
Q2dyb3VwIGlzIG1vdW50ZWQsIGZlYXR1cmUgaXMgc3VwcG9ydGVkIGFuZCB1c2VkLg0KDQpTaWdu
ZWQtb2ZmLWJ5OiBIcmlkeWEgVmFsc2FyYWp1IDxocmlkeWFAZ29vZ2xlLmNvbT4NClNpZ25lZC1v
ZmYtYnk6IFQuSi4gTWVyY2llciA8dGptZXJjaWVyQGdvb2dsZS5jb20+DQoNCi0tLQ0KdjUgY2hh
bmdlcw0KU3VwcG9ydCBib3RoIGJpbmRlcl9mZF9hcnJheV9vYmplY3QgYW5kIGJpbmRlcl9mZF9v
YmplY3QuIFRoaXMgaXMNCm5lY2Vzc2FyeSBiZWNhdXNlIG5ldyB2ZXJzaW9ucyBvZiBBbmRyb2lk
IHdpbGwgdXNlIGJpbmRlcl9mZF9vYmplY3QNCmluc3RlYWQgb2YgYmluZGVyX2ZkX2FycmF5X29i
amVjdCwgYW5kIHdlIG5lZWQgdG8gc3VwcG9ydCBib3RoLg0KDQpVc2UgdGhlIG5ldywgc2ltcGxl
ciBkbWFfYnVmX3RyYW5zZmVyX2NoYXJnZSBBUEkuDQoNCnYzIGNoYW5nZXMNClJlbW92ZSBhbmRy
b2lkIGZyb20gdGl0bGUgcGVyIFRvZGQgS2pvcy4NCg0KVXNlIG1vcmUgY29tbW9uIGR1YWwgYXV0
aG9yIGNvbW1pdCBtZXNzYWdlIGZvcm1hdCBwZXIgSm9obiBTdHVsdHouDQoNCkluY2x1ZGUgZGV0
YWlscyBvbiBiZWhhdmlvciBmb3IgYWxsIGNvbWJpbmF0aW9ucyBvZiBrZXJuZWwvdXNlcnNwYWNl
DQp2ZXJzaW9ucyBpbiBjaGFuZ2Vsb2cgKHRoYW5rcyBTdXJlbiBCYWdoZGFzYXJ5YW4pIHBlciBH
cmVnIEtyb2FoLUhhcnRtYW4uDQoNCnYyIGNoYW5nZXMNCk1vdmUgZG1hLWJ1ZiBjZ3JvdXAgY2hh
cmdlIHRyYW5zZmVyIGZyb20gYSBkbWFfYnVmX29wIGRlZmluZWQgYnkgZXZlcnkNCmhlYXAgdG8g
YSBzaW5nbGUgZG1hLWJ1ZiBmdW5jdGlvbiBmb3IgYWxsIGhlYXBzIHBlciBEYW5pZWwgVmV0dGVy
IGFuZA0KQ2hyaXN0aWFuIEvDtm5pZy4NCi0tLQ0KIGRyaXZlcnMvYW5kcm9pZC9iaW5kZXIuYyAg
ICAgICAgICAgIHwgMjcgKysrKysrKysrKysrKysrKysrKysrKystLS0tDQogZHJpdmVycy9kbWEt
YnVmL2RtYS1idWYuYyAgICAgICAgICAgfCAgNCArKy0tDQogaW5jbHVkZS9saW51eC9kbWEtYnVm
LmggICAgICAgICAgICAgfCAgMiArLQ0KIGluY2x1ZGUvdWFwaS9saW51eC9hbmRyb2lkL2JpbmRl
ci5oIHwgMjMgKysrKysrKysrKysrKysrKysrKy0tLS0NCiA0IGZpbGVzIGNoYW5nZWQsIDQ1IGlu
c2VydGlvbnMoKyksIDExIGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9hbmRy
b2lkL2JpbmRlci5jIGIvZHJpdmVycy9hbmRyb2lkL2JpbmRlci5jDQppbmRleCA4MzUxYzU2Mzg4
ODAuLmIwN2Q1MGZlMWM4MCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvYW5kcm9pZC9iaW5kZXIuYw0K
KysrIGIvZHJpdmVycy9hbmRyb2lkL2JpbmRlci5jDQpAQCAtNDIsNiArNDIsNyBAQA0KIA0KICNk
ZWZpbmUgcHJfZm10KGZtdCkgS0JVSUxEX01PRE5BTUUgIjogIiBmbXQNCiANCisjaW5jbHVkZSA8
bGludXgvZG1hLWJ1Zi5oPg0KICNpbmNsdWRlIDxsaW51eC9mZHRhYmxlLmg+DQogI2luY2x1ZGUg
PGxpbnV4L2ZpbGUuaD4NCiAjaW5jbHVkZSA8bGludXgvZnJlZXplci5oPg0KQEAgLTIxNzAsNyAr
MjE3MSw3IEBAIHN0YXRpYyBpbnQgYmluZGVyX3RyYW5zbGF0ZV9oYW5kbGUoc3RydWN0IGZsYXRf
YmluZGVyX29iamVjdCAqZnAsDQogCXJldHVybiByZXQ7DQogfQ0KIA0KLXN0YXRpYyBpbnQgYmlu
ZGVyX3RyYW5zbGF0ZV9mZCh1MzIgZmQsIGJpbmRlcl9zaXplX3QgZmRfb2Zmc2V0LA0KK3N0YXRp
YyBpbnQgYmluZGVyX3RyYW5zbGF0ZV9mZCh1MzIgZmQsIGJpbmRlcl9zaXplX3QgZmRfb2Zmc2V0
LCBfX3UzMiBmbGFncywNCiAJCQkgICAgICAgc3RydWN0IGJpbmRlcl90cmFuc2FjdGlvbiAqdCwN
CiAJCQkgICAgICAgc3RydWN0IGJpbmRlcl90aHJlYWQgKnRocmVhZCwNCiAJCQkgICAgICAgc3Ry
dWN0IGJpbmRlcl90cmFuc2FjdGlvbiAqaW5fcmVwbHlfdG8pDQpAQCAtMjIwOCw2ICsyMjA5LDIz
IEBAIHN0YXRpYyBpbnQgYmluZGVyX3RyYW5zbGF0ZV9mZCh1MzIgZmQsIGJpbmRlcl9zaXplX3Qg
ZmRfb2Zmc2V0LA0KIAkJZ290byBlcnJfc2VjdXJpdHk7DQogCX0NCiANCisJaWYgKElTX0VOQUJM
RUQoQ09ORklHX0NHUk9VUF9HUFUpICYmIChmbGFncyAmIEJJTkRFUl9GRF9GTEFHX1NFTkRFUl9O
T19ORUVEKSkgew0KKwkJaWYgKGlzX2RtYV9idWZfZmlsZShmaWxlKSkgew0KKwkJCXN0cnVjdCBk
bWFfYnVmICpkbWFidWYgPSBmaWxlLT5wcml2YXRlX2RhdGE7DQorDQorCQkJcmV0ID0gZG1hX2J1
Zl90cmFuc2Zlcl9jaGFyZ2UoZG1hYnVmLCB0YXJnZXRfcHJvYy0+dHNrKTsNCisJCQlpZiAocmV0
KQ0KKwkJCQlwcl93YXJuKCIlZDolZCBVbmFibGUgdG8gdHJhbnNmZXIgRE1BLUJVRiBmZCBjaGFy
Z2UgdG8gJWRcbiIsDQorCQkJCQlwcm9jLT5waWQsIHRocmVhZC0+cGlkLCB0YXJnZXRfcHJvYy0+
cGlkKTsNCisJCX0gZWxzZSB7DQorCQkJYmluZGVyX3VzZXJfZXJyb3IoDQorCQkJCSIlZDolZCBn
b3QgdHJhbnNhY3Rpb24gd2l0aCBTRU5ERVJfTk9fTkVFRCBmb3Igbm9uLWRtYWJ1ZiBmZCwgJWRc
biIsDQorCQkJCXByb2MtPnBpZCwgdGhyZWFkLT5waWQsIGZkKTsNCisJCQlyZXQgPSAtRUlOVkFM
Ow0KKwkJCWdvdG8gZXJyX25vbmVlZDsNCisJCX0NCisJfQ0KKw0KIAkvKg0KIAkgKiBBZGQgZml4
dXAgcmVjb3JkIGZvciB0aGlzIHRyYW5zYWN0aW9uLiBUaGUgYWxsb2NhdGlvbg0KIAkgKiBvZiB0
aGUgZmQgaW4gdGhlIHRhcmdldCBuZWVkcyB0byBiZSBkb25lIGZyb20gYQ0KQEAgLTIyMjYsNiAr
MjI0NCw3IEBAIHN0YXRpYyBpbnQgYmluZGVyX3RyYW5zbGF0ZV9mZCh1MzIgZmQsIGJpbmRlcl9z
aXplX3QgZmRfb2Zmc2V0LA0KIAlyZXR1cm4gcmV0Ow0KIA0KIGVycl9hbGxvYzoNCitlcnJfbm9u
ZWVkOg0KIGVycl9zZWN1cml0eToNCiAJZnB1dChmaWxlKTsNCiBlcnJfZmdldDoNCkBAIC0yNTI4
LDcgKzI1NDcsNyBAQCBzdGF0aWMgaW50IGJpbmRlcl90cmFuc2xhdGVfZmRfYXJyYXkoc3RydWN0
IGxpc3RfaGVhZCAqcGZfaGVhZCwNCiANCiAJCXJldCA9IGNvcHlfZnJvbV91c2VyKCZmZCwgc2Vu
ZGVyX3VmZGFfYmFzZSArIHNlbmRlcl91b2Zmc2V0LCBzaXplb2YoZmQpKTsNCiAJCWlmICghcmV0
KQ0KLQkJCXJldCA9IGJpbmRlcl90cmFuc2xhdGVfZmQoZmQsIG9mZnNldCwgdCwgdGhyZWFkLA0K
KwkJCXJldCA9IGJpbmRlcl90cmFuc2xhdGVfZmQoZmQsIG9mZnNldCwgZmRhLT5mbGFncywgdCwg
dGhyZWFkLA0KIAkJCQkJCSAgaW5fcmVwbHlfdG8pOw0KIAkJaWYgKHJldCkNCiAJCQlyZXR1cm4g
cmV0ID4gMCA/IC1FSU5WQUwgOiByZXQ7DQpAQCAtMzE3OSw4ICszMTk4LDggQEAgc3RhdGljIHZv
aWQgYmluZGVyX3RyYW5zYWN0aW9uKHN0cnVjdCBiaW5kZXJfcHJvYyAqcHJvYywNCiAJCQlzdHJ1
Y3QgYmluZGVyX2ZkX29iamVjdCAqZnAgPSB0b19iaW5kZXJfZmRfb2JqZWN0KGhkcik7DQogCQkJ
YmluZGVyX3NpemVfdCBmZF9vZmZzZXQgPSBvYmplY3Rfb2Zmc2V0ICsNCiAJCQkJKHVpbnRwdHJf
dCkmZnAtPmZkIC0gKHVpbnRwdHJfdClmcDsNCi0JCQlpbnQgcmV0ID0gYmluZGVyX3RyYW5zbGF0
ZV9mZChmcC0+ZmQsIGZkX29mZnNldCwgdCwNCi0JCQkJCQkgICAgICB0aHJlYWQsIGluX3JlcGx5
X3RvKTsNCisJCQlpbnQgcmV0ID0gYmluZGVyX3RyYW5zbGF0ZV9mZChmcC0+ZmQsIGZkX29mZnNl
dCwgZnAtPmZsYWdzLA0KKwkJCQkJCSAgICAgIHQsIHRocmVhZCwgaW5fcmVwbHlfdG8pOw0KIA0K
IAkJCWZwLT5wYWRfYmluZGVyID0gMDsNCiAJCQlpZiAocmV0IDwgMCB8fA0KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jDQpp
bmRleCBmM2ZiODQ0OTI1ZTIuLjM2ZWQ2Y2Q0ZGRjYyAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZG1h
LWJ1Zi9kbWEtYnVmLmMNCisrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMNCkBAIC0zMSw3
ICszMSw2IEBADQogDQogI2luY2x1ZGUgImRtYS1idWYtc3lzZnMtc3RhdHMuaCINCiANCi1zdGF0
aWMgaW5saW5lIGludCBpc19kbWFfYnVmX2ZpbGUoc3RydWN0IGZpbGUgKik7DQogDQogc3RydWN0
IGRtYV9idWZfbGlzdCB7DQogCXN0cnVjdCBsaXN0X2hlYWQgaGVhZDsNCkBAIC00MDAsMTAgKzM5
OSwxMSBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyBkbWFfYnVmX2ZvcHMg
PSB7DQogLyoNCiAgKiBpc19kbWFfYnVmX2ZpbGUgLSBDaGVjayBpZiBzdHJ1Y3QgZmlsZSogaXMg
YXNzb2NpYXRlZCB3aXRoIGRtYV9idWYNCiAgKi8NCi1zdGF0aWMgaW5saW5lIGludCBpc19kbWFf
YnVmX2ZpbGUoc3RydWN0IGZpbGUgKmZpbGUpDQoraW50IGlzX2RtYV9idWZfZmlsZShzdHJ1Y3Qg
ZmlsZSAqZmlsZSkNCiB7DQogCXJldHVybiBmaWxlLT5mX29wID09ICZkbWFfYnVmX2ZvcHM7DQog
fQ0KK0VYUE9SVF9TWU1CT0xfTlNfR1BMKGlzX2RtYV9idWZfZmlsZSwgRE1BX0JVRik7DQogDQog
c3RhdGljIHN0cnVjdCBmaWxlICpkbWFfYnVmX2dldGZpbGUoc3RydWN0IGRtYV9idWYgKmRtYWJ1
ZiwgaW50IGZsYWdzKQ0KIHsNCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1idWYuaCBi
L2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oDQppbmRleCA0MzhhZDg1NzdiNzYuLjJiOTgxMjc1OGZl
ZSAxMDA2NDQNCi0tLSBhL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oDQorKysgYi9pbmNsdWRlL2xp
bnV4L2RtYS1idWYuaA0KQEAgLTYxNCw3ICs2MTQsNyBAQCBkbWFfYnVmX2F0dGFjaG1lbnRfaXNf
ZHluYW1pYyhzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpDQogew0KIAlyZXR1cm4g
ISFhdHRhY2gtPmltcG9ydGVyX29wczsNCiB9DQotDQoraW50IGlzX2RtYV9idWZfZmlsZShzdHJ1
Y3QgZmlsZSAqZmlsZSk7DQogc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqZG1hX2J1Zl9hdHRh
Y2goc3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwNCiAJCQkJCSAgc3RydWN0IGRldmljZSAqZGV2KTsN
CiBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICoNCmRpZmYgLS1naXQgYS9pbmNsdWRlL3VhcGkv
bGludXgvYW5kcm9pZC9iaW5kZXIuaCBiL2luY2x1ZGUvdWFwaS9saW51eC9hbmRyb2lkL2JpbmRl
ci5oDQppbmRleCAxMTE1N2ZhZThhOGUuLmIyNjNjYmI2MDNlYSAxMDA2NDQNCi0tLSBhL2luY2x1
ZGUvdWFwaS9saW51eC9hbmRyb2lkL2JpbmRlci5oDQorKysgYi9pbmNsdWRlL3VhcGkvbGludXgv
YW5kcm9pZC9iaW5kZXIuaA0KQEAgLTkxLDE0ICs5MSwxNCBAQCBzdHJ1Y3QgZmxhdF9iaW5kZXJf
b2JqZWN0IHsNCiAvKioNCiAgKiBzdHJ1Y3QgYmluZGVyX2ZkX29iamVjdCAtIGRlc2NyaWJlcyBh
IGZpbGVkZXNjcmlwdG9yIHRvIGJlIGZpeGVkIHVwLg0KICAqIEBoZHI6CWNvbW1vbiBoZWFkZXIg
c3RydWN0dXJlDQotICogQHBhZF9mbGFnczoJcGFkZGluZyB0byByZW1haW4gY29tcGF0aWJsZSB3
aXRoIG9sZCB1c2Vyc3BhY2UgY29kZQ0KKyAqIEBmbGFnczoJT25lIG9yIG1vcmUgQklOREVSX0ZE
X0ZMQUdfKiBmbGFncw0KICAqIEBwYWRfYmluZGVyOglwYWRkaW5nIHRvIHJlbWFpbiBjb21wYXRp
YmxlIHdpdGggb2xkIHVzZXJzcGFjZSBjb2RlDQogICogQGZkOgkJZmlsZSBkZXNjcmlwdG9yDQog
ICogQGNvb2tpZToJb3BhcXVlIGRhdGEsIHVzZWQgYnkgdXNlci1zcGFjZQ0KICAqLw0KIHN0cnVj
dCBiaW5kZXJfZmRfb2JqZWN0IHsNCiAJc3RydWN0IGJpbmRlcl9vYmplY3RfaGVhZGVyCWhkcjsN
Ci0JX191MzIJCQkJcGFkX2ZsYWdzOw0KKwlfX3UzMgkJCQlmbGFnczsNCiAJdW5pb24gew0KIAkJ
YmluZGVyX3VpbnRwdHJfdAlwYWRfYmluZGVyOw0KIAkJX191MzIJCQlmZDsNCkBAIC0xMDcsNiAr
MTA3LDE3IEBAIHN0cnVjdCBiaW5kZXJfZmRfb2JqZWN0IHsNCiAJYmluZGVyX3VpbnRwdHJfdAkJ
Y29va2llOw0KIH07DQogDQorZW51bSB7DQorCS8qKg0KKwkgKiBAQklOREVSX0ZEX0ZMQUdfU0VO
REVSX05PX05FRUQNCisJICoNCisJICogV2hlbiBzZXQsIHRoZSBzZW5kZXIgb2YgYSBiaW5kZXJf
ZmRfb2JqZWN0IHdpc2hlcyB0byByZWxpbnF1aXNoIG93bmVyc2hpcCBvZiB0aGUgZmQgZm9yDQor
CSAqIG1lbW9yeSBhY2NvdW50aW5nIHB1cnBvc2VzLiBJZiB0aGUgZmQgaXMgZm9yIGEgRE1BLUJV
RiwgdGhlIGJ1ZmZlciBpcyB1bmNoYXJnZWQgZnJvbSB0aGUNCisJICogc2VuZGVyJ3MgY2dyb3Vw
IGFuZCBjaGFyZ2VkIHRvIHRoZSByZWNlaXZpbmcgcHJvY2VzcydzIGNncm91cCBpbnN0ZWFkLg0K
KwkgKi8NCisJQklOREVSX0ZEX0ZMQUdfU0VOREVSX05PX05FRUQgPSAweDIwMDAsDQorfTsNCisN
CiAvKiBzdHJ1Y3QgYmluZGVyX2J1ZmZlcl9vYmplY3QgLSBvYmplY3QgZGVzY3JpYmluZyBhIHVz
ZXJzcGFjZSBidWZmZXINCiAgKiBAaGRyOgkJY29tbW9uIGhlYWRlciBzdHJ1Y3R1cmUNCiAgKiBA
ZmxhZ3M6CQlvbmUgb3IgbW9yZSBCSU5ERVJfQlVGRkVSXyogZmxhZ3MNCkBAIC0xNDEsNyArMTUy
LDcgQEAgZW51bSB7DQogDQogLyogc3RydWN0IGJpbmRlcl9mZF9hcnJheV9vYmplY3QgLSBvYmpl
Y3QgZGVzY3JpYmluZyBhbiBhcnJheSBvZiBmZHMgaW4gYSBidWZmZXINCiAgKiBAaGRyOgkJY29t
bW9uIGhlYWRlciBzdHJ1Y3R1cmUNCi0gKiBAcGFkOgkJcGFkZGluZyB0byBlbnN1cmUgY29ycmVj
dCBhbGlnbm1lbnQNCisgKiBmbGFnczoJCU9uZSBvciBtb3JlIEJJTkRFUl9GREFfRkxBR18qIGZs
YWdzDQogICogQG51bV9mZHM6CQludW1iZXIgb2YgZmlsZSBkZXNjcmlwdG9ycyBpbiB0aGUgYnVm
ZmVyDQogICogQHBhcmVudDoJCWluZGV4IGluIG9mZnNldCBhcnJheSB0byBidWZmZXIgaG9sZGlu
ZyB0aGUgZmQgYXJyYXkNCiAgKiBAcGFyZW50X29mZnNldDoJc3RhcnQgb2Zmc2V0IG9mIGZkIGFy
cmF5IGluIHRoZSBidWZmZXINCkBAIC0xNjIsMTIgKzE3MywxNiBAQCBlbnVtIHsNCiAgKi8NCiBz
dHJ1Y3QgYmluZGVyX2ZkX2FycmF5X29iamVjdCB7DQogCXN0cnVjdCBiaW5kZXJfb2JqZWN0X2hl
YWRlcgloZHI7DQotCV9fdTMyCQkJCXBhZDsNCisJX191MzIJCQkJZmxhZ3M7DQogCWJpbmRlcl9z
aXplX3QJCQludW1fZmRzOw0KIAliaW5kZXJfc2l6ZV90CQkJcGFyZW50Ow0KIAliaW5kZXJfc2l6
ZV90CQkJcGFyZW50X29mZnNldDsNCiB9Ow0KIA0KK2VudW0gew0KKwlCSU5ERVJfRkRBX0ZMQUdf
U0VOREVSX05PX05FRUQgPSBCSU5ERVJfRkRfRkxBR19TRU5ERVJfTk9fTkVFRCwNCit9Ow0KKw0K
IC8qDQogICogT24gNjQtYml0IHBsYXRmb3JtcyB3aGVyZSB1c2VyIGNvZGUgbWF5IHJ1biBpbiAz
Mi1iaXRzIHRoZSBkcml2ZXIgbXVzdA0KICAqIHRyYW5zbGF0ZSB0aGUgYnVmZmVyIChhbmQgbG9j
YWwgYmluZGVyKSBhZGRyZXNzZXMgYXBwcm9wcmlhdGVseS4NCi0tIA0KMi4zNi4wLnJjMC40NzAu
Z2QzNjEzOTdmMGQtZ29vZw0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdCAtLSBsaW5hcm8tbW0tc2lnQGxp
c3RzLmxpbmFyby5vcmcKVG8gdW5zdWJzY3JpYmUgc2VuZCBhbiBlbWFpbCB0byBsaW5hcm8tbW0t
c2lnLWxlYXZlQGxpc3RzLmxpbmFyby5vcmcK
