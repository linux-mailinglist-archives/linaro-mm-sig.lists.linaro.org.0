Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 059741B6D4E
	for <lists+linaro-mm-sig@lfdr.de>; Fri, 24 Apr 2020 07:36:18 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 23373619DA
	for <lists+linaro-mm-sig@lfdr.de>; Fri, 24 Apr 2020 05:36:17 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 1404D622F6; Fri, 24 Apr 2020 05:36:17 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-7.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_HI,SPF_HELO_NONE autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 2688E6604E;
	Fri, 24 Apr 2020 05:29:48 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id E2114666DB
 for <linaro-mm-sig@lists.linaro.org>; Wed,  8 Apr 2020 12:00:54 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id D67C16663F; Wed,  8 Apr 2020 12:00:54 +0000 (UTC)
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
 by lists.linaro.org (Postfix) with ESMTPS id 3BE496663F
 for <linaro-mm-sig@lists.linaro.org>; Wed,  8 Apr 2020 12:00:16 +0000 (UTC)
Received: from [2001:4bb8:180:5765:65b6:f11e:f109:b151] (helo=localhost)
 by bombadil.infradead.org with esmtpsa (Exim 4.92.3 #3 (Red Hat Linux))
 id 1jM9My-0001wY-DB; Wed, 08 Apr 2020 11:59:49 +0000
From: Christoph Hellwig <hch@lst.de>
To: Andrew Morton <akpm@linux-foundation.org>,
 "K. Y. Srinivasan" <kys@microsoft.com>,
 Haiyang Zhang <haiyangz@microsoft.com>,
 Stephen Hemminger <sthemmin@microsoft.com>, Wei Liu <wei.liu@kernel.org>,
 x86@kernel.org, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel@ffwll.ch>, Laura Abbott <labbott@redhat.com>,
 Sumit Semwal <sumit.semwal@linaro.org>,
 Sakari Ailus <sakari.ailus@linux.intel.com>,
 Minchan Kim <minchan@kernel.org>, Nitin Gupta <ngupta@vflare.org>
Date: Wed,  8 Apr 2020 13:59:04 +0200
Message-Id: <20200408115926.1467567-7-hch@lst.de>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200408115926.1467567-1-hch@lst.de>
References: <20200408115926.1467567-1-hch@lst.de>
MIME-Version: 1.0
X-SRS-Rewrite: SMTP reverse-path rewritten from <hch@infradead.org> by
 bombadil.infradead.org. See http://www.infradead.org/rpr.html
X-Virus-Scanned: ClamAV using ClamSMTP
X-Mailman-Approved-At: Fri, 24 Apr 2020 05:29:38 +0000
Cc: Christophe Leroy <christophe.leroy@c-s.fr>, linux-arch@vger.kernel.org,
 linux-hyperv@vger.kernel.org, linux-s390@vger.kernel.org,
 Peter Zijlstra <peterz@infradead.org>, linuxppc-dev@lists.ozlabs.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linaro-mm-sig@lists.linaro.org, linux-mm@kvack.org,
 iommu@lists.linux-foundation.org, bpf@vger.kernel.org,
 Robin Murphy <robin.murphy@arm.com>, linux-arm-kernel@lists.infradead.org
Subject: [Linaro-mm-sig] [PATCH 06/28] powerpc: remove __ioremap_at and
	__iounmap_at
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

VGhlc2UgaGVscGVycyBhcmUgb25seSB1c2VkIGZvciByZW1hcHBpbmcgdGhlIElTQSBJL08gYmFz
ZS4gIFJlcGxhY2UKdGhlIG1hcHBpbmcgc2lkZSB3aXRoIGEgcmVtYXBfaXNhX3JhbmdlIGhlbHBl
ciBpbiBpc2EtYnJpZGdlLmMgdGhhdApoYXJkIGNvZGVzIGFsbCB0aGUga25vd24gYXJndW1lbnRz
LCBhbmQganVzdCByZW1vdmUgX19pb3VubWFwX2F0IGluCmZhdm91ciBvZiBvcGVuIGNvZGluZyBp
dCBpbiB0aGUgb25seSBjYWxsZXIuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RvcGggSGVsbHdpZyA8
aGNoQGxzdC5kZT4KLS0tCiBhcmNoL3Bvd2VycGMvaW5jbHVkZS9hc20vaW8uaCAgICB8ICA4IC0t
LS0tCiBhcmNoL3Bvd2VycGMva2VybmVsL2lzYS1icmlkZ2UuYyB8IDI4ICsrKysrKysrKysrKyst
LS0tLQogYXJjaC9wb3dlcnBjL21tL2lvcmVtYXBfNjQuYyAgICAgfCA1MCAtLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQogMyBmaWxlcyBjaGFuZ2VkLCAyMSBpbnNlcnRpb25zKCspLCA2
NSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9hcmNoL3Bvd2VycGMvaW5jbHVkZS9hc20vaW8u
aCBiL2FyY2gvcG93ZXJwYy9pbmNsdWRlL2FzbS9pby5oCmluZGV4IDcxZjFjNWQ2OTgzOS4uNGZk
YmI5ZTQ1ZGQ3IDEwMDY0NAotLS0gYS9hcmNoL3Bvd2VycGMvaW5jbHVkZS9hc20vaW8uaAorKysg
Yi9hcmNoL3Bvd2VycGMvaW5jbHVkZS9hc20vaW8uaApAQCAtNjk5LDEwICs2OTksNiBAQCBzdGF0
aWMgaW5saW5lIHZvaWQgaW9zeW5jKHZvaWQpCiAgKgogICogKiBpb3VubWFwIHVuZG9lcyBzdWNo
IGEgbWFwcGluZyBhbmQgY2FuIGJlIGhvb2tlZAogICoKLSAqICogX19pb3JlbWFwX2F0IChhbmQg
dGhlIHBlbmRpbmcgX19pb3VubWFwX2F0KSBhcmUgbG93IGxldmVsIGZ1bmN0aW9ucyB0bwotICog
ICBjcmVhdGUgaGFuZC1tYWRlIG1hcHBpbmdzIGZvciB1c2Ugb25seSBieSB0aGUgUENJIGNvZGUg
YW5kIGNhbm5vdAotICogICBjdXJyZW50bHkgYmUgaG9va2VkLiBNdXN0IGJlIHBhZ2UgYWxpZ25l
ZC4KLSAqCiAgKiAqIF9faW9yZW1hcF9jYWxsZXIgaXMgdGhlIHNhbWUgYXMgYWJvdmUgYnV0IHRh
a2VzIGFuIGV4cGxpY2l0IGNhbGxlcgogICogICByZWZlcmVuY2UgcmF0aGVyIHRoYW4gdXNpbmcg
X19idWlsdGluX3JldHVybl9hZGRyZXNzKDApCiAgKgpAQCAtNzI5LDEwICs3MjUsNiBAQCB2b2lk
IF9faW9tZW0gKmRvX2lvcmVtYXAocGh5c19hZGRyX3QgcGEsIHBoeXNfYWRkcl90IG9mZnNldCwg
dW5zaWduZWQgbG9uZyBzaXplLAogZXh0ZXJuIHZvaWQgX19pb21lbSAqX19pb3JlbWFwX2NhbGxl
cihwaHlzX2FkZHJfdCwgdW5zaWduZWQgbG9uZyBzaXplLAogCQkJCSAgICAgIHBncHJvdF90IHBy
b3QsIHZvaWQgKmNhbGxlcik7CiAKLWV4dGVybiB2b2lkIF9faW9tZW0gKiBfX2lvcmVtYXBfYXQo
cGh5c19hZGRyX3QgcGEsIHZvaWQgKmVhLAotCQkJCSAgIHVuc2lnbmVkIGxvbmcgc2l6ZSwgcGdw
cm90X3QgcHJvdCk7Ci1leHRlcm4gdm9pZCBfX2lvdW5tYXBfYXQodm9pZCAqZWEsIHVuc2lnbmVk
IGxvbmcgc2l6ZSk7Ci0KIC8qCiAgKiBXaGVuIENPTkZJR19QUENfSU5ESVJFQ1RfUElPIGlzIHNl
dCwgd2UgdXNlIHRoZSBnZW5lcmljIGlvbWFwIGltcGxlbWVudGF0aW9uCiAgKiB3aGljaCBuZWVk
cyBzb21lIGFkZGl0aW9uYWwgZGVmaW5pdGlvbnMgaGVyZS4gVGhleSBiYXNpY2FsbHkgYWxsb3cg
UElPCmRpZmYgLS1naXQgYS9hcmNoL3Bvd2VycGMva2VybmVsL2lzYS1icmlkZ2UuYyBiL2FyY2gv
cG93ZXJwYy9rZXJuZWwvaXNhLWJyaWRnZS5jCmluZGV4IDc3MzY3MWI1MTJkZi4uMjI1N2QyNGU2
YTI2IDEwMDY0NAotLS0gYS9hcmNoL3Bvd2VycGMva2VybmVsL2lzYS1icmlkZ2UuYworKysgYi9h
cmNoL3Bvd2VycGMva2VybmVsL2lzYS1icmlkZ2UuYwpAQCAtMTgsNiArMTgsNyBAQAogI2luY2x1
ZGUgPGxpbnV4L2luaXQuaD4KICNpbmNsdWRlIDxsaW51eC9tbS5oPgogI2luY2x1ZGUgPGxpbnV4
L25vdGlmaWVyLmg+CisjaW5jbHVkZSA8bGludXgvdm1hbGxvYy5oPgogCiAjaW5jbHVkZSA8YXNt
L3Byb2Nlc3Nvci5oPgogI2luY2x1ZGUgPGFzbS9pby5oPgpAQCAtMzgsNiArMzksMjIgQEAgRVhQ
T1JUX1NZTUJPTF9HUEwoaXNhX2JyaWRnZV9wY2lkZXYpOwogI2RlZmluZSBJU0FfU1BBQ0VfTUFT
SyAweDEKICNkZWZpbmUgSVNBX1NQQUNFX0lPIDB4MQogCitzdGF0aWMgdm9pZCByZW1hcF9pc2Ff
YmFzZShwaHlzX2FkZHJfdCBwYSwgdW5zaWduZWQgbG9uZyBzaXplKQoreworCVdBUk5fT05fT05D
RShJU0FfSU9fQkFTRSAmIH5QQUdFX01BU0spOworCVdBUk5fT05fT05DRShwYSAmIH5QQUdFX01B
U0spOworCVdBUk5fT05fT05DRShzaXplICYgflBBR0VfTUFTSyk7CisKKwlpZiAoc2xhYl9pc19h
dmFpbGFibGUoKSkgeworCQlpZiAoaW9yZW1hcF9wYWdlX3JhbmdlKElTQV9JT19CQVNFLCBJU0Ff
SU9fQkFTRSArIHNpemUsIHBhLAorCQkJCXBncHJvdF9ub25jYWNoZWQoUEFHRV9LRVJORUwpKSkK
KwkJCXVubWFwX2tlcm5lbF9yYW5nZShJU0FfSU9fQkFTRSwgc2l6ZSk7CisJfSBlbHNlIHsKKwkJ
ZWFybHlfaW9yZW1hcF9yYW5nZShJU0FfSU9fQkFTRSwgcGEsIHNpemUsCisJCQkJcGdwcm90X25v
bmNhY2hlZChQQUdFX0tFUk5FTCkpOworCX0KK30KKwogc3RhdGljIHZvaWQgcGNpX3Byb2Nlc3Nf
SVNBX09GX3JhbmdlcyhzdHJ1Y3QgZGV2aWNlX25vZGUgKmlzYV9ub2RlLAogCQkJCSAgICAgIHVu
c2lnbmVkIGxvbmcgcGhiX2lvX2Jhc2VfcGh5cykKIHsKQEAgLTEwNSwxNSArMTIyLDEzIEBAIHN0
YXRpYyB2b2lkIHBjaV9wcm9jZXNzX0lTQV9PRl9yYW5nZXMoc3RydWN0IGRldmljZV9ub2RlICpp
c2Ffbm9kZSwKIAlpZiAoc2l6ZSA+IDB4MTAwMDApCiAJCXNpemUgPSAweDEwMDAwOwogCi0JX19p
b3JlbWFwX2F0KHBoYl9pb19iYXNlX3BoeXMsICh2b2lkICopSVNBX0lPX0JBU0UsCi0JCSAgICAg
c2l6ZSwgcGdwcm90X25vbmNhY2hlZChQQUdFX0tFUk5FTCkpOworCXJlbWFwX2lzYV9iYXNlKHBo
Yl9pb19iYXNlX3BoeXMsIHNpemUpOwogCXJldHVybjsKIAogaW52YWxfcmFuZ2U6CiAJcHJpbnRr
KEtFUk5fRVJSICJubyBJU0EgSU8gcmFuZ2VzIG9yIHVuZXhwZWN0ZWQgaXNhIHJhbmdlLCAiCiAJ
ICAgICAgICJtYXBwaW5nIDY0a1xuIik7Ci0JX19pb3JlbWFwX2F0KHBoYl9pb19iYXNlX3BoeXMs
ICh2b2lkICopSVNBX0lPX0JBU0UsCi0JCSAgICAgMHgxMDAwMCwgcGdwcm90X25vbmNhY2hlZChQ
QUdFX0tFUk5FTCkpOworCXJlbWFwX2lzYV9iYXNlKHBoYl9pb19iYXNlX3BoeXMsIDB4MTAwMDAp
OwogfQogCiAKQEAgLTI0OCw4ICsyNjMsNyBAQCB2b2lkIF9faW5pdCBpc2FfYnJpZGdlX2luaXRf
bm9uX3BjaShzdHJ1Y3QgZGV2aWNlX25vZGUgKm5wKQogCSAqIGFuZCBtYXAgaXQKIAkgKi8KIAlp
c2FfaW9fYmFzZSA9IElTQV9JT19CQVNFOwotCV9faW9yZW1hcF9hdChwYmFzZSwgKHZvaWQgKilJ
U0FfSU9fQkFTRSwKLQkJICAgICBzaXplLCBwZ3Byb3Rfbm9uY2FjaGVkKFBBR0VfS0VSTkVMKSk7
CisJcmVtYXBfaXNhX2Jhc2UocGJhc2UsIHNpemUpOwogCiAJcHJfZGVidWcoIklTQTogTm9uLVBD
SSBicmlkZ2UgaXMgJXBPRlxuIiwgbnApOwogfQpAQCAtMjk3LDcgKzMxMSw3IEBAIHN0YXRpYyB2
b2lkIGlzYV9icmlkZ2VfcmVtb3ZlKHZvaWQpCiAJaXNhX2JyaWRnZV9wY2lkZXYgPSBOVUxMOwog
CiAJLyogVW5tYXAgdGhlIElTQSBhcmVhICovCi0JX19pb3VubWFwX2F0KCh2b2lkICopSVNBX0lP
X0JBU0UsIDB4MTAwMDApOworCXVubWFwX2tlcm5lbF9yYW5nZShJU0FfSU9fQkFTRSwgMHgxMDAw
MCk7CiB9CiAKIC8qKgpkaWZmIC0tZ2l0IGEvYXJjaC9wb3dlcnBjL21tL2lvcmVtYXBfNjQuYyBi
L2FyY2gvcG93ZXJwYy9tbS9pb3JlbWFwXzY0LmMKaW5kZXggNTBhOTlkOTY4NGY3Li5iYTVjYmIw
ZDY2YmQgMTAwNjQ0Ci0tLSBhL2FyY2gvcG93ZXJwYy9tbS9pb3JlbWFwXzY0LmMKKysrIGIvYXJj
aC9wb3dlcnBjL21tL2lvcmVtYXBfNjQuYwpAQCAtNCw1NiArNCw2IEBACiAjaW5jbHVkZSA8bGlu
dXgvc2xhYi5oPgogI2luY2x1ZGUgPGxpbnV4L3ZtYWxsb2MuaD4KIAotLyoqCi0gKiBMb3cgbGV2
ZWwgZnVuY3Rpb24gdG8gZXN0YWJsaXNoIHRoZSBwYWdlIHRhYmxlcyBmb3IgYW4gSU8gbWFwcGlu
ZwotICovCi12b2lkIF9faW9tZW0gKl9faW9yZW1hcF9hdChwaHlzX2FkZHJfdCBwYSwgdm9pZCAq
ZWEsIHVuc2lnbmVkIGxvbmcgc2l6ZSwgcGdwcm90X3QgcHJvdCkKLXsKLQlpbnQgcmV0OwotCXVu
c2lnbmVkIGxvbmcgdmEgPSAodW5zaWduZWQgbG9uZyllYTsKLQotCS8qIFdlIGRvbid0IHN1cHBv
cnQgdGhlIDRLIFBGTiBoYWNrIHdpdGggaW9yZW1hcCAqLwotCWlmIChwZ3Byb3RfdmFsKHByb3Qp
ICYgSF9QQUdFXzRLX1BGTikKLQkJcmV0dXJuIE5VTEw7Ci0KLQlpZiAoKGVhICsgc2l6ZSkgPj0g
KHZvaWQgKilJT1JFTUFQX0VORCkgewotCQlwcl93YXJuKCJPdXRzaWRlIHRoZSBzdXBwb3J0ZWQg
cmFuZ2VcbiIpOwotCQlyZXR1cm4gTlVMTDsKLQl9Ci0KLQlXQVJOX09OKHBhICYgflBBR0VfTUFT
Syk7Ci0JV0FSTl9PTigoKHVuc2lnbmVkIGxvbmcpZWEpICYgflBBR0VfTUFTSyk7Ci0JV0FSTl9P
TihzaXplICYgflBBR0VfTUFTSyk7Ci0KLQlpZiAoc2xhYl9pc19hdmFpbGFibGUoKSkgewotCQly
ZXQgPSBpb3JlbWFwX3BhZ2VfcmFuZ2UodmEsIHZhICsgc2l6ZSwgcGEsIHByb3QpOwotCQlpZiAo
cmV0KQotCQkJdW5tYXBfa2VybmVsX3JhbmdlKHZhLCBzaXplKTsKLQl9IGVsc2UgewotCQlyZXQg
PSBlYXJseV9pb3JlbWFwX3JhbmdlKHZhLCBwYSwgc2l6ZSwgcHJvdCk7Ci0JfQotCi0JaWYgKHJl
dCkKLQkJcmV0dXJuIE5VTEw7Ci0KLQlyZXR1cm4gKHZvaWQgX19pb21lbSAqKWVhOwotfQotRVhQ
T1JUX1NZTUJPTChfX2lvcmVtYXBfYXQpOwotCi0vKioKLSAqIExvdyBsZXZlbCBmdW5jdGlvbiB0
byB0ZWFyIGRvd24gdGhlIHBhZ2UgdGFibGVzIGZvciBhbiBJTyBtYXBwaW5nLiBUaGlzIGlzCi0g
KiB1c2VkIGZvciBtYXBwaW5ncyB0aGF0IGFyZSBtYW5pcHVsYXRlZCBtYW51YWxseSwgbGlrZSBw
YXJ0aWFsIHVubWFwcGluZyBvZgotICogUENJIElPcyBvciBJU0Egc3BhY2UuCi0gKi8KLXZvaWQg
X19pb3VubWFwX2F0KHZvaWQgKmVhLCB1bnNpZ25lZCBsb25nIHNpemUpCi17Ci0JV0FSTl9PTigo
KHVuc2lnbmVkIGxvbmcpZWEpICYgflBBR0VfTUFTSyk7Ci0JV0FSTl9PTihzaXplICYgflBBR0Vf
TUFTSyk7Ci0KLQl1bm1hcF9rZXJuZWxfcmFuZ2UoKHVuc2lnbmVkIGxvbmcpZWEsIHNpemUpOwot
fQotRVhQT1JUX1NZTUJPTChfX2lvdW5tYXBfYXQpOwotCiB2b2lkIF9faW9tZW0gKl9faW9yZW1h
cF9jYWxsZXIocGh5c19hZGRyX3QgYWRkciwgdW5zaWduZWQgbG9uZyBzaXplLAogCQkJICAgICAg
IHBncHJvdF90IHByb3QsIHZvaWQgKmNhbGxlcikKIHsKLS0gCjIuMjUuMQoKX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGluYXJvLW1tLXNpZyBtYWlsaW5n
IGxpc3QKTGluYXJvLW1tLXNpZ0BsaXN0cy5saW5hcm8ub3JnCmh0dHBzOi8vbGlzdHMubGluYXJv
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL2xpbmFyby1tbS1zaWcK
