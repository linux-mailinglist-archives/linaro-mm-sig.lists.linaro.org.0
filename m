Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 3BBA8C5812C
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 13 Nov 2025 15:54:45 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 505C83F865
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 13 Nov 2025 14:54:44 +0000 (UTC)
Received: from mail-ej1-f52.google.com (mail-ej1-f52.google.com [209.85.218.52])
	by lists.linaro.org (Postfix) with ESMTPS id 49F103F811
	for <linaro-mm-sig@lists.linaro.org>; Thu, 13 Nov 2025 14:53:39 +0000 (UTC)
Authentication-Results: lists.linaro.org;
	dkim=pass header.d=gmail.com header.s=20230601 header.b=nCvf2mKm;
	dmarc=pass (policy=none) header.from=gmail.com;
	spf=pass (lists.linaro.org: domain of ckoenig.leichtzumerken@gmail.com designates 209.85.218.52 as permitted sender) smtp.mailfrom=ckoenig.leichtzumerken@gmail.com
Received: by mail-ej1-f52.google.com with SMTP id a640c23a62f3a-b7359b03878so80926666b.1
        for <linaro-mm-sig@lists.linaro.org>; Thu, 13 Nov 2025 06:53:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20230601; t=1763045618; x=1763650418; darn=lists.linaro.org;
        h=content-transfer-encoding:mime-version:references:in-reply-to
         :message-id:date:subject:to:from:from:to:cc:subject:date:message-id
         :reply-to;
        bh=hpZ7aPTeWXdgUXjcwxnqtDUJxNdWGIyevRY/cXbvH6k=;
        b=nCvf2mKmXmPiZACR4Tp8pD8PIz9Qldji71igO7d3kFYfzfC/xyg8A+JXJxM9yu9Zgc
         sYoc9iYGUFjLS9rzWQcVsGnpo6OILqPX1D3HsCA5AMzVGI4BqwfmtehvN3hXyCD0MBuf
         89QEFOcdwcLI5n62m6vA+I5svBUgMNswevZn5zrjwFdFNLzkVHdt4volSYfhveYlKhZV
         LBka4Cb1Q6oHxFWpwk3WWr7QTbeAcmIo5SMO2vCxXS2/WlpGhKJi0sz6/6I7J7xv6IOb
         51iLU1nYQ9kHFZwxj5o54YdBB4KGZ6GNReP0o/8OHohP0a7F3+8l8xK9Pt4m8/LFI71j
         qH3w==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20230601; t=1763045618; x=1763650418;
        h=content-transfer-encoding:mime-version:references:in-reply-to
         :message-id:date:subject:to:from:x-gm-gg:x-gm-message-state:from:to
         :cc:subject:date:message-id:reply-to;
        bh=hpZ7aPTeWXdgUXjcwxnqtDUJxNdWGIyevRY/cXbvH6k=;
        b=ZgKh+vhhNK29zk9GU0E7OMV+8BxammdUzyn6le68bPn+KaG7T+XVkXj4svAJ18pwVo
         yLJBy0RavW4iqYT+z12fRwhrOClULFPJtL74lgVlWoa48mV1/ZwTWUuKj3DYgy2uqxnz
         i+IaNyeJ7Afjaju0kKax2YwAUj1PGyNE9HsHlksi1JsM+EUudLvd/eBt9y7jIMm6wzBb
         9NNmejrSV/IdxAwHDIHkVP+6rlLHqis60BKySUjgB3kQNjC7SI/KcsNySU1wym+wNXue
         Nnz4AJe8ufV03i8aGmnDCoBeSR0Q/wXT3lc13eUj6bJeARNX+/MI0W7SNuhXVlpbHa1r
         jUNQ==
X-Forwarded-Encrypted: i=1; AJvYcCUY8STjFtccoJPbFROu2bCtgFP2tw0Bv+wILKI+VEZbFktOOE3OR/eCSKAjZMKAkDDvW5OwczsF7eeoqt84@lists.linaro.org
X-Gm-Message-State: AOJu0Yy9cTNU7X4ntkLvHP5FFOfl4liPVJQ92ldyoziHkGD4eLCnRDSW
	ZOUhNVL8qs0y2bxH6z1JuO9ai5NUnbU0eat/aS8MfeNv1ZRyr3EROL5W
X-Gm-Gg: ASbGncs/xCcIZizCclDPuv3ufQh2ZnXNuGlUU/ckX65v8NgnzADxXERp33c6Jahsvbx
	FYIkx3pzyAYtm3Wii2Uxb0UoitfkLMHHJnGDIOeHh++DTryOEGJRA7qA4n72X7tOHMDoHf4bhz1
	McisfC+h4lsnZldnnNOQO5NxELTEG3dQOWHo+m2cRVP4Xb4idvbkEiwp8u/Vb9WT/k1Vw//Mv27
	oUobZ/jAgwZ8ConqZC2sd2tKphSaMSDhylNb9SJwMRRyrgWU4uJtIbejqzNCpYQ4PTgXzlhWmQl
	zp34Bzu1/VFSk8ezsjTWx/V5CmGdM04XSEWiSzThqulsaUy2n8gYhrPt6arxxIBUcSsZnoI4qwY
	VDwmvNeXHok3Lz9JUiFz39kKGgZ+/c/ZzItNKhORM+5jNuJ4qBA5Wgk0myZhNq9nAC2ylv4KPbX
	075YcmNSIyxdY=
X-Google-Smtp-Source: AGHT+IE8uMyNlZw9FaMtmtjbzJFefZFo/m+PUlONkA4SK3fcyaMCs1MiLvqc2p0cALKdGDO41jzjaA==
X-Received: by 2002:a17:907:3e86:b0:b61:e088:b560 with SMTP id a640c23a62f3a-b73480bd92amr390966066b.4.1763045618029;
        Thu, 13 Nov 2025 06:53:38 -0800 (PST)
Received: from able.fritz.box ([2a00:e180:15aa:c600:cef:d94:436c:abc5])
        by smtp.gmail.com with ESMTPSA id a640c23a62f3a-b73513b400fsm173747166b.1.2025.11.13.06.53.37
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Thu, 13 Nov 2025 06:53:37 -0800 (PST)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
To: phasta@mailbox.org,
	alexdeucher@gmail.com,
	simona.vetter@ffwll.ch,
	tursulin@ursulin.net,
	matthew.brost@intel.com,
	dri-devel@lists.freedesktop.org,
	amd-gfx@lists.freedesktop.org,
	linaro-mm-sig@lists.linaro.org,
	sumit.semwal@linaro.org
Date: Thu, 13 Nov 2025 15:51:41 +0100
Message-ID: <20251113145332.16805-5-christian.koenig@amd.com>
X-Mailer: git-send-email 2.43.0
In-Reply-To: <20251113145332.16805-1-christian.koenig@amd.com>
References: <20251113145332.16805-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Rspamd-Server: lists.linaro.org
X-Rspamd-Queue-Id: 49F103F811
X-Spamd-Bar: ----
X-Spamd-Result: default: False [-4.10 / 15.00];
	BAYES_HAM(-3.00)[100.00%];
	DMARC_POLICY_ALLOW(-0.50)[gmail.com,none];
	R_DKIM_ALLOW(-0.20)[gmail.com:s=20230601];
	R_SPF_ALLOW(-0.20)[+ip4:209.85.128.0/17:c];
	RWL_MAILSPIKE_GOOD(-0.10)[209.85.218.52:from];
	MIME_GOOD(-0.10)[text/plain];
	ARC_NA(0.00)[];
	ASN(0.00)[asn:15169, ipnet:209.85.128.0/17, country:US];
	FREEMAIL_FROM(0.00)[gmail.com];
	FREEMAIL_TO(0.00)[mailbox.org,gmail.com,ffwll.ch,ursulin.net,intel.com,lists.freedesktop.org,lists.linaro.org,linaro.org];
	MIME_TRACE(0.00)[0:+];
	RCVD_VIA_SMTP_AUTH(0.00)[];
	RCPT_COUNT_SEVEN(0.00)[9];
	RCVD_TLS_LAST(0.00)[];
	NEURAL_HAM(-0.00)[-1.000];
	RCVD_COUNT_TWO(0.00)[2];
	FROM_EQ_ENVFROM(0.00)[];
	FROM_HAS_DN(0.00)[];
	FREEMAIL_ENVFROM(0.00)[gmail.com];
	TO_DN_NONE(0.00)[];
	PREVIOUSLY_DELIVERED(0.00)[linaro-mm-sig@lists.linaro.org];
	TAGGED_FROM(0.00)[];
	TO_MATCH_ENVRCPT_SOME(0.00)[];
	DKIM_TRACE(0.00)[gmail.com:+]
X-Rspamd-Action: no action
Message-ID-Hash: JDTK7PSQAFIGD3IZMF4FPJ76JMNOANK6
X-Message-ID-Hash: JDTK7PSQAFIGD3IZMF4FPJ76JMNOANK6
X-MailFrom: ckoenig.leichtzumerken@gmail.com
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH 04/18] dma-buf: inline spinlock for fence protection v2
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/JDTK7PSQAFIGD3IZMF4FPJ76JMNOANK6/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

SW1wbGVtZW50IHBlci1mZW5jZSBzcGlubG9ja3MsIGFsbG93aW5nIGltcGxlbWVudGF0aW9ucyB0
byBub3QgZ2l2ZSBhbg0KZXh0ZXJuYWwgc3BpbmxvY2sgdG8gcHJvdGVjdCB0aGUgZmVuY2UgaW50
ZXJuYWwgc3RhdGVpLiBJbnN0ZWFkIGEgc3BpbmxvY2sNCmVtYmVkZGVkIGludG8gdGhlIGZlbmNl
IHN0cnVjdHVyZSBpdHNlbGYgaXMgdXNlZCBpbiB0aGlzIGNhc2UuDQoNClNoYXJlZCBzcGlubG9j
a3MgaGF2ZSB0aGUgcHJvYmxlbSB0aGF0IGltcGxlbWVudGF0aW9ucyBuZWVkIHRvIGd1YXJhbnRl
ZQ0KdGhhdCB0aGUgbG9jayBsaXZlIGF0IGxlYXN0IGFzIGxvbmcgYWxsIGZlbmNlcyByZWZlcmVu
Y2luZyB0aGVtLg0KDQpVc2luZyBhIHBlci1mZW5jZSBzcGlubG9jayBhbGxvd3MgY29tcGxldGVs
eSBkZWNvdXBsaW5nIHNwaW5sb2NrIHByb2R1Y2VyDQphbmQgY29uc3VtZXIgbGlmZSB0aW1lcywg
c2ltcGxpZnlpbmcgdGhlIGhhbmRsaW5nIGluIG1vc3QgdXNlIGNhc2VzLg0KDQp2MjogaW1wcm92
ZSBuYW1pbmcsIGNvdmVyYWdlIGFuZCBmdW5jdGlvbiBkb2N1bWVudGF0aW9uDQoNClNpZ25lZC1v
ZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4NCi0tLQ0K
IGRyaXZlcnMvZG1hLWJ1Zi9kbWEtZmVuY2UuYyAgICAgICAgICAgICAgfCA2NiArKysrKysrKysr
KysrLS0tLS0tLS0tLS0NCiBkcml2ZXJzL2RtYS1idWYvc3dfc3luYy5jICAgICAgICAgICAgICAg
IHwgMTQgKystLS0NCiBkcml2ZXJzL2RtYS1idWYvc3luY19kZWJ1Zy5oICAgICAgICAgICAgIHwg
IDIgKy0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfcmluZy5jIHwgIDQgKy0N
CiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYyAgIHwgIDQgKy0NCiBkcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uaCAgIHwgMTIgKystLS0NCiBkcml2ZXJz
L2dwdS9kcm0vZHJtX2NydGMuYyAgICAgICAgICAgICAgIHwgIDIgKy0NCiBkcml2ZXJzL2dwdS9k
cm0vZHJtX3dyaXRlYmFjay5jICAgICAgICAgIHwgIDIgKy0NCiBkcml2ZXJzL2dwdS9kcm0vbm91
dmVhdS9ub3V2ZWF1X2RybS5jICAgIHwgIDUgKy0NCiBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9u
b3V2ZWF1X2ZlbmNlLmMgIHwgIDMgKy0NCiBkcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9yZWxlYXNl
LmMgICAgICAgIHwgIDMgKy0NCiBkcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2ZlbmNl
LmMgIHwgIDQgKy0NCiBkcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9mZW5jZS5jICAgIHwg
IDMgKy0NCiBkcml2ZXJzL2dwdS9kcm0veGUveGVfaHdfZmVuY2UuYyAgICAgICAgIHwgIDMgKy0N
CiBkcml2ZXJzL2dwdS9kcm0veGUveGVfc2NoZWRfam9iLmMgICAgICAgIHwgIDQgKy0NCiBpbmNs
dWRlL2xpbnV4L2RtYS1mZW5jZS5oICAgICAgICAgICAgICAgIHwgNDIgKysrKysrKysrKysrKyst
DQogMTYgZmlsZXMgY2hhbmdlZCwgMTExIGluc2VydGlvbnMoKyksIDYyIGRlbGV0aW9ucygtKQ0K
DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL2RtYS1mZW5jZS5jIGIvZHJpdmVycy9kbWEt
YnVmL2RtYS1mZW5jZS5jDQppbmRleCA3MDc0MzQ3ZjUwNmQuLjlhNWFhOWU0NGUxMyAxMDA2NDQN
Ci0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtZmVuY2UuYw0KKysrIGIvZHJpdmVycy9kbWEtYnVm
L2RtYS1mZW5jZS5jDQpAQCAtMzQzLDcgKzM0Myw2IEBAIHZvaWQgX19kbWFfZmVuY2VfbWlnaHRf
d2FpdCh2b2lkKQ0KIH0NCiAjZW5kaWYNCiANCi0NCiAvKioNCiAgKiBkbWFfZmVuY2Vfc2lnbmFs
X3RpbWVzdGFtcF9sb2NrZWQgLSBzaWduYWwgY29tcGxldGlvbiBvZiBhIGZlbmNlDQogICogQGZl
bmNlOiB0aGUgZmVuY2UgdG8gc2lnbmFsDQpAQCAtMzY4LDcgKzM2Nyw3IEBAIGludCBkbWFfZmVu
Y2Vfc2lnbmFsX3RpbWVzdGFtcF9sb2NrZWQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsDQogCXN0
cnVjdCBkbWFfZmVuY2VfY2IgKmN1ciwgKnRtcDsNCiAJc3RydWN0IGxpc3RfaGVhZCBjYl9saXN0
Ow0KIA0KLQlsb2NrZGVwX2Fzc2VydF9oZWxkKGZlbmNlLT5sb2NrKTsNCisJbG9ja2RlcF9hc3Nl
cnRfaGVsZChkbWFfZmVuY2Vfc3BpbmxvY2soZmVuY2UpKTsNCiANCiAJaWYgKHVubGlrZWx5KHRl
c3RfYW5kX3NldF9iaXQoRE1BX0ZFTkNFX0ZMQUdfU0lHTkFMRURfQklULA0KIAkJCQkgICAgICAm
ZmVuY2UtPmZsYWdzKSkpDQpAQCAtNDIxLDkgKzQyMCw5IEBAIGludCBkbWFfZmVuY2Vfc2lnbmFs
X3RpbWVzdGFtcChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwga3RpbWVfdCB0aW1lc3RhbXApDQog
CWlmIChXQVJOX09OKCFmZW5jZSkpDQogCQlyZXR1cm4gLUVJTlZBTDsNCiANCi0Jc3Bpbl9sb2Nr
X2lycXNhdmUoZmVuY2UtPmxvY2ssIGZsYWdzKTsNCisJZG1hX2ZlbmNlX2xvY2tfaXJxc2F2ZShm
ZW5jZSwgZmxhZ3MpOw0KIAlyZXQgPSBkbWFfZmVuY2Vfc2lnbmFsX3RpbWVzdGFtcF9sb2NrZWQo
ZmVuY2UsIHRpbWVzdGFtcCk7DQotCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoZmVuY2UtPmxvY2ss
IGZsYWdzKTsNCisJZG1hX2ZlbmNlX3VubG9ja19pcnFyZXN0b3JlKGZlbmNlLCBmbGFncyk7DQog
DQogCXJldHVybiByZXQ7DQogfQ0KQEAgLTQ3NSw5ICs0NzQsOSBAQCBpbnQgZG1hX2ZlbmNlX3Np
Z25hbChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkNCiANCiAJdG1wID0gZG1hX2ZlbmNlX2JlZ2lu
X3NpZ25hbGxpbmcoKTsNCiANCi0Jc3Bpbl9sb2NrX2lycXNhdmUoZmVuY2UtPmxvY2ssIGZsYWdz
KTsNCisJZG1hX2ZlbmNlX2xvY2tfaXJxc2F2ZShmZW5jZSwgZmxhZ3MpOw0KIAlyZXQgPSBkbWFf
ZmVuY2Vfc2lnbmFsX3RpbWVzdGFtcF9sb2NrZWQoZmVuY2UsIGt0aW1lX2dldCgpKTsNCi0Jc3Bp
bl91bmxvY2tfaXJxcmVzdG9yZShmZW5jZS0+bG9jaywgZmxhZ3MpOw0KKwlkbWFfZmVuY2VfdW5s
b2NrX2lycXJlc3RvcmUoZmVuY2UsIGZsYWdzKTsNCiANCiAJZG1hX2ZlbmNlX2VuZF9zaWduYWxs
aW5nKHRtcCk7DQogDQpAQCAtNTc5LDEwICs1NzgsMTAgQEAgdm9pZCBkbWFfZmVuY2VfcmVsZWFz
ZShzdHJ1Y3Qga3JlZiAqa3JlZikNCiAJCSAqIGRvbid0IGxlYXZlIGNoYWlucyBkYW5nbGluZy4g
V2Ugc2V0IHRoZSBlcnJvciBmbGFnIGZpcnN0DQogCQkgKiBzbyB0aGF0IHRoZSBjYWxsYmFja3Mg
a25vdyB0aGlzIHNpZ25hbCBpcyBkdWUgdG8gYW4gZXJyb3IuDQogCQkgKi8NCi0JCXNwaW5fbG9j
a19pcnFzYXZlKGZlbmNlLT5sb2NrLCBmbGFncyk7DQorCQlkbWFfZmVuY2VfbG9ja19pcnFzYXZl
KGZlbmNlLCBmbGFncyk7DQogCQlmZW5jZS0+ZXJyb3IgPSAtRURFQURMSzsNCiAJCWRtYV9mZW5j
ZV9zaWduYWxfbG9ja2VkKGZlbmNlKTsNCi0JCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoZmVuY2Ut
PmxvY2ssIGZsYWdzKTsNCisJCWRtYV9mZW5jZV91bmxvY2tfaXJxcmVzdG9yZShmZW5jZSwgZmxh
Z3MpOw0KIAl9DQogDQogCW9wcyA9IHJjdV9kZXJlZmVyZW5jZShmZW5jZS0+b3BzKTsNCkBAIC02
MTIsNyArNjExLDcgQEAgc3RhdGljIGJvb2wgX19kbWFfZmVuY2VfZW5hYmxlX3NpZ25hbGluZyhz
dHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkNCiAJY29uc3Qgc3RydWN0IGRtYV9mZW5jZV9vcHMgKm9w
czsNCiAJYm9vbCB3YXNfc2V0Ow0KIA0KLQlsb2NrZGVwX2Fzc2VydF9oZWxkKGZlbmNlLT5sb2Nr
KTsNCisJbG9ja2RlcF9hc3NlcnRfaGVsZChkbWFfZmVuY2Vfc3BpbmxvY2soZmVuY2UpKTsNCiAN
CiAJd2FzX3NldCA9IHRlc3RfYW5kX3NldF9iaXQoRE1BX0ZFTkNFX0ZMQUdfRU5BQkxFX1NJR05B
TF9CSVQsDQogCQkJCSAgICZmZW5jZS0+ZmxhZ3MpOw0KQEAgLTY0OCw5ICs2NDcsOSBAQCB2b2lk
IGRtYV9mZW5jZV9lbmFibGVfc3dfc2lnbmFsaW5nKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQ0K
IHsNCiAJdW5zaWduZWQgbG9uZyBmbGFnczsNCiANCi0Jc3Bpbl9sb2NrX2lycXNhdmUoZmVuY2Ut
PmxvY2ssIGZsYWdzKTsNCisJZG1hX2ZlbmNlX2xvY2tfaXJxc2F2ZShmZW5jZSwgZmxhZ3MpOw0K
IAlfX2RtYV9mZW5jZV9lbmFibGVfc2lnbmFsaW5nKGZlbmNlKTsNCi0Jc3Bpbl91bmxvY2tfaXJx
cmVzdG9yZShmZW5jZS0+bG9jaywgZmxhZ3MpOw0KKwlkbWFfZmVuY2VfdW5sb2NrX2lycXJlc3Rv
cmUoZmVuY2UsIGZsYWdzKTsNCiB9DQogRVhQT1JUX1NZTUJPTChkbWFfZmVuY2VfZW5hYmxlX3N3
X3NpZ25hbGluZyk7DQogDQpAQCAtNjkwLDggKzY4OSw3IEBAIGludCBkbWFfZmVuY2VfYWRkX2Nh
bGxiYWNrKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLCBzdHJ1Y3QgZG1hX2ZlbmNlX2NiICpjYiwN
CiAJCXJldHVybiAtRU5PRU5UOw0KIAl9DQogDQotCXNwaW5fbG9ja19pcnFzYXZlKGZlbmNlLT5s
b2NrLCBmbGFncyk7DQotDQorCWRtYV9mZW5jZV9sb2NrX2lycXNhdmUoZmVuY2UsIGZsYWdzKTsN
CiAJaWYgKF9fZG1hX2ZlbmNlX2VuYWJsZV9zaWduYWxpbmcoZmVuY2UpKSB7DQogCQljYi0+ZnVu
YyA9IGZ1bmM7DQogCQlsaXN0X2FkZF90YWlsKCZjYi0+bm9kZSwgJmZlbmNlLT5jYl9saXN0KTsN
CkBAIC02OTksOCArNjk3LDcgQEAgaW50IGRtYV9mZW5jZV9hZGRfY2FsbGJhY2soc3RydWN0IGRt
YV9mZW5jZSAqZmVuY2UsIHN0cnVjdCBkbWFfZmVuY2VfY2IgKmNiLA0KIAkJSU5JVF9MSVNUX0hF
QUQoJmNiLT5ub2RlKTsNCiAJCXJldCA9IC1FTk9FTlQ7DQogCX0NCi0NCi0Jc3Bpbl91bmxvY2tf
aXJxcmVzdG9yZShmZW5jZS0+bG9jaywgZmxhZ3MpOw0KKwlkbWFfZmVuY2VfdW5sb2NrX2lycXJl
c3RvcmUoZmVuY2UsIGZsYWdzKTsNCiANCiAJcmV0dXJuIHJldDsNCiB9DQpAQCAtNzIzLDkgKzcy
MCw5IEBAIGludCBkbWFfZmVuY2VfZ2V0X3N0YXR1cyhzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkN
CiAJdW5zaWduZWQgbG9uZyBmbGFnczsNCiAJaW50IHN0YXR1czsNCiANCi0Jc3Bpbl9sb2NrX2ly
cXNhdmUoZmVuY2UtPmxvY2ssIGZsYWdzKTsNCisJZG1hX2ZlbmNlX2xvY2tfaXJxc2F2ZShmZW5j
ZSwgZmxhZ3MpOw0KIAlzdGF0dXMgPSBkbWFfZmVuY2VfZ2V0X3N0YXR1c19sb2NrZWQoZmVuY2Up
Ow0KLQlzcGluX3VubG9ja19pcnFyZXN0b3JlKGZlbmNlLT5sb2NrLCBmbGFncyk7DQorCWRtYV9m
ZW5jZV91bmxvY2tfaXJxcmVzdG9yZShmZW5jZSwgZmxhZ3MpOw0KIA0KIAlyZXR1cm4gc3RhdHVz
Ow0KIH0NCkBAIC03NTUsMTMgKzc1MiwxMSBAQCBkbWFfZmVuY2VfcmVtb3ZlX2NhbGxiYWNrKHN0
cnVjdCBkbWFfZmVuY2UgKmZlbmNlLCBzdHJ1Y3QgZG1hX2ZlbmNlX2NiICpjYikNCiAJdW5zaWdu
ZWQgbG9uZyBmbGFnczsNCiAJYm9vbCByZXQ7DQogDQotCXNwaW5fbG9ja19pcnFzYXZlKGZlbmNl
LT5sb2NrLCBmbGFncyk7DQotDQorCWRtYV9mZW5jZV9sb2NrX2lycXNhdmUoZmVuY2UsIGZsYWdz
KTsNCiAJcmV0ID0gIWxpc3RfZW1wdHkoJmNiLT5ub2RlKTsNCiAJaWYgKHJldCkNCiAJCWxpc3Rf
ZGVsX2luaXQoJmNiLT5ub2RlKTsNCi0NCi0Jc3Bpbl91bmxvY2tfaXJxcmVzdG9yZShmZW5jZS0+
bG9jaywgZmxhZ3MpOw0KKwlkbWFfZmVuY2VfdW5sb2NrX2lycXJlc3RvcmUoZmVuY2UsIGZsYWdz
KTsNCiANCiAJcmV0dXJuIHJldDsNCiB9DQpAQCAtODAwLDggKzc5NSw3IEBAIGRtYV9mZW5jZV9k
ZWZhdWx0X3dhaXQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsIGJvb2wgaW50ciwgc2lnbmVkIGxv
bmcgdGltZW91dCkNCiAJdW5zaWduZWQgbG9uZyBmbGFnczsNCiAJc2lnbmVkIGxvbmcgcmV0ID0g
dGltZW91dCA/IHRpbWVvdXQgOiAxOw0KIA0KLQlzcGluX2xvY2tfaXJxc2F2ZShmZW5jZS0+bG9j
aywgZmxhZ3MpOw0KLQ0KKwlkbWFfZmVuY2VfbG9ja19pcnFzYXZlKGZlbmNlLCBmbGFncyk7DQog
CWlmICh0ZXN0X2JpdChETUFfRkVOQ0VfRkxBR19TSUdOQUxFRF9CSVQsICZmZW5jZS0+ZmxhZ3Mp
KQ0KIAkJZ290byBvdXQ7DQogDQpAQCAtODI0LDExICs4MTgsMTEgQEAgZG1hX2ZlbmNlX2RlZmF1
bHRfd2FpdChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwgYm9vbCBpbnRyLCBzaWduZWQgbG9uZyB0
aW1lb3V0KQ0KIAkJCV9fc2V0X2N1cnJlbnRfc3RhdGUoVEFTS19JTlRFUlJVUFRJQkxFKTsNCiAJ
CWVsc2UNCiAJCQlfX3NldF9jdXJyZW50X3N0YXRlKFRBU0tfVU5JTlRFUlJVUFRJQkxFKTsNCi0J
CXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoZmVuY2UtPmxvY2ssIGZsYWdzKTsNCisJCWRtYV9mZW5j
ZV91bmxvY2tfaXJxcmVzdG9yZShmZW5jZSwgZmxhZ3MpOw0KIA0KIAkJcmV0ID0gc2NoZWR1bGVf
dGltZW91dChyZXQpOw0KIA0KLQkJc3Bpbl9sb2NrX2lycXNhdmUoZmVuY2UtPmxvY2ssIGZsYWdz
KTsNCisJCWRtYV9mZW5jZV9sb2NrX2lycXNhdmUoZmVuY2UsIGZsYWdzKTsNCiAJCWlmIChyZXQg
PiAwICYmIGludHIgJiYgc2lnbmFsX3BlbmRpbmcoY3VycmVudCkpDQogCQkJcmV0ID0gLUVSRVNU
QVJUU1lTOw0KIAl9DQpAQCAtODM4LDcgKzgzMiw3IEBAIGRtYV9mZW5jZV9kZWZhdWx0X3dhaXQo
c3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsIGJvb2wgaW50ciwgc2lnbmVkIGxvbmcgdGltZW91dCkN
CiAJX19zZXRfY3VycmVudF9zdGF0ZShUQVNLX1JVTk5JTkcpOw0KIA0KIG91dDoNCi0Jc3Bpbl91
bmxvY2tfaXJxcmVzdG9yZShmZW5jZS0+bG9jaywgZmxhZ3MpOw0KKwlkbWFfZmVuY2VfdW5sb2Nr
X2lycXJlc3RvcmUoZmVuY2UsIGZsYWdzKTsNCiAJcmV0dXJuIHJldDsNCiB9DQogRVhQT1JUX1NZ
TUJPTChkbWFfZmVuY2VfZGVmYXVsdF93YWl0KTsNCkBAIC0xMDQ3LDcgKzEwNDEsNiBAQCBzdGF0
aWMgdm9pZA0KIF9fZG1hX2ZlbmNlX2luaXQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsIGNvbnN0
IHN0cnVjdCBkbWFfZmVuY2Vfb3BzICpvcHMsDQogCSAgICAgICAgIHNwaW5sb2NrX3QgKmxvY2ss
IHU2NCBjb250ZXh0LCB1NjQgc2Vxbm8sIHVuc2lnbmVkIGxvbmcgZmxhZ3MpDQogew0KLQlCVUdf
T04oIWxvY2spOw0KIAlCVUdfT04oIW9wcyB8fCAhb3BzLT5nZXRfZHJpdmVyX25hbWUgfHwgIW9w
cy0+Z2V0X3RpbWVsaW5lX25hbWUpOw0KIA0KIAlrcmVmX2luaXQoJmZlbmNlLT5yZWZjb3VudCk7
DQpAQCAtMTA1OCwxMCArMTA1MSwxNSBAQCBfX2RtYV9mZW5jZV9pbml0KHN0cnVjdCBkbWFfZmVu
Y2UgKmZlbmNlLCBjb25zdCBzdHJ1Y3QgZG1hX2ZlbmNlX29wcyAqb3BzLA0KIAkgKi8NCiAJUkNV
X0lOSVRfUE9JTlRFUihmZW5jZS0+b3BzLCBvcHMpOw0KIAlJTklUX0xJU1RfSEVBRCgmZmVuY2Ut
PmNiX2xpc3QpOw0KLQlmZW5jZS0+bG9jayA9IGxvY2s7DQogCWZlbmNlLT5jb250ZXh0ID0gY29u
dGV4dDsNCiAJZmVuY2UtPnNlcW5vID0gc2Vxbm87DQogCWZlbmNlLT5mbGFncyA9IGZsYWdzOw0K
KwlpZiAobG9jaykgew0KKwkJZmVuY2UtPmV4dGVybl9sb2NrID0gbG9jazsNCisJfSBlbHNlIHsN
CisJCXNwaW5fbG9ja19pbml0KCZmZW5jZS0+aW5saW5lX2xvY2spOw0KKwkJZmVuY2UtPmZsYWdz
IHw9IEJJVChETUFfRkVOQ0VfRkxBR19JTkxJTkVfTE9DS19CSVQpOw0KKwl9DQogCWZlbmNlLT5l
cnJvciA9IDA7DQogDQogCXRyYWNlX2RtYV9mZW5jZV9pbml0KGZlbmNlKTsNCkBAIC0xMDcxLDcg
KzEwNjksNyBAQCBfX2RtYV9mZW5jZV9pbml0KHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLCBjb25z
dCBzdHJ1Y3QgZG1hX2ZlbmNlX29wcyAqb3BzLA0KICAqIGRtYV9mZW5jZV9pbml0IC0gSW5pdGlh
bGl6ZSBhIGN1c3RvbSBmZW5jZS4NCiAgKiBAZmVuY2U6IHRoZSBmZW5jZSB0byBpbml0aWFsaXpl
DQogICogQG9wczogdGhlIGRtYV9mZW5jZV9vcHMgZm9yIG9wZXJhdGlvbnMgb24gdGhpcyBmZW5j
ZQ0KLSAqIEBsb2NrOiB0aGUgaXJxc2FmZSBzcGlubG9jayB0byB1c2UgZm9yIGxvY2tpbmcgdGhp
cyBmZW5jZQ0KKyAqIEBsb2NrOiBvcHRpb25hbCBpcnFzYWZlIHNwaW5sb2NrIHRvIHVzZSBmb3Ig
bG9ja2luZyB0aGlzIGZlbmNlDQogICogQGNvbnRleHQ6IHRoZSBleGVjdXRpb24gY29udGV4dCB0
aGlzIGZlbmNlIGlzIHJ1biBvbg0KICAqIEBzZXFubzogYSBsaW5lYXIgaW5jcmVhc2luZyBzZXF1
ZW5jZSBudW1iZXIgZm9yIHRoaXMgY29udGV4dA0KICAqDQpAQCAtMTA4MSw2ICsxMDc5LDEwIEBA
IF9fZG1hX2ZlbmNlX2luaXQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsIGNvbnN0IHN0cnVjdCBk
bWFfZmVuY2Vfb3BzICpvcHMsDQogICoNCiAgKiBjb250ZXh0IGFuZCBzZXFubyBhcmUgdXNlZCBm
b3IgZWFzeSBjb21wYXJpc29uIGJldHdlZW4gZmVuY2VzLCBhbGxvd2luZw0KICAqIHRvIGNoZWNr
IHdoaWNoIGZlbmNlIGlzIGxhdGVyIGJ5IHNpbXBseSB1c2luZyBkbWFfZmVuY2VfbGF0ZXIoKS4N
CisgKg0KKyAqIEl0IGlzIHN0cm9uZ2x5IGRpc2NvdXJhZ2VkIHRvIHByb3ZpZGUgYW4gZXh0ZXJu
YWwgbG9jay4gVGhpcyBpcyBvbmx5IGFsbG93ZWQNCisgKiBmb3IgbGVnYWN5IHVzZSBjYXNlcyB3
aGVuIG11bHRpcGxlIGZlbmNlcyBuZWVkIHRvIGJlIHByZXZlbnRlZCBmcm9tDQorICogc2lnbmFs
aW5nIG91dCBvZiBvcmRlci4NCiAgKi8NCiB2b2lkDQogZG1hX2ZlbmNlX2luaXQoc3RydWN0IGRt
YV9mZW5jZSAqZmVuY2UsIGNvbnN0IHN0cnVjdCBkbWFfZmVuY2Vfb3BzICpvcHMsDQpAQCAtMTA5
NCw3ICsxMDk2LDcgQEAgRVhQT1JUX1NZTUJPTChkbWFfZmVuY2VfaW5pdCk7DQogICogZG1hX2Zl
bmNlX2luaXQ2NCAtIEluaXRpYWxpemUgYSBjdXN0b20gZmVuY2Ugd2l0aCA2NC1iaXQgc2Vxbm8g
c3VwcG9ydC4NCiAgKiBAZmVuY2U6IHRoZSBmZW5jZSB0byBpbml0aWFsaXplDQogICogQG9wczog
dGhlIGRtYV9mZW5jZV9vcHMgZm9yIG9wZXJhdGlvbnMgb24gdGhpcyBmZW5jZQ0KLSAqIEBsb2Nr
OiB0aGUgaXJxc2FmZSBzcGlubG9jayB0byB1c2UgZm9yIGxvY2tpbmcgdGhpcyBmZW5jZQ0KKyAq
IEBsb2NrOiBvcHRpb25hbCBpcnFzYWZlIHNwaW5sb2NrIHRvIHVzZSBmb3IgbG9ja2luZyB0aGlz
IGZlbmNlDQogICogQGNvbnRleHQ6IHRoZSBleGVjdXRpb24gY29udGV4dCB0aGlzIGZlbmNlIGlz
IHJ1biBvbg0KICAqIEBzZXFubzogYSBsaW5lYXIgaW5jcmVhc2luZyBzZXF1ZW5jZSBudW1iZXIg
Zm9yIHRoaXMgY29udGV4dA0KICAqDQpAQCAtMTEwNCw2ICsxMTA2LDEwIEBAIEVYUE9SVF9TWU1C
T0woZG1hX2ZlbmNlX2luaXQpOw0KICAqDQogICogQ29udGV4dCBhbmQgc2Vxbm8gYXJlIHVzZWQg
Zm9yIGVhc3kgY29tcGFyaXNvbiBiZXR3ZWVuIGZlbmNlcywgYWxsb3dpbmcNCiAgKiB0byBjaGVj
ayB3aGljaCBmZW5jZSBpcyBsYXRlciBieSBzaW1wbHkgdXNpbmcgZG1hX2ZlbmNlX2xhdGVyKCku
DQorICoNCisgKiBJdCBpcyBzdHJvbmdseSBkaXNjb3VyYWdlZCB0byBwcm92aWRlIGFuIGV4dGVy
bmFsIGxvY2suIFRoaXMgaXMgb25seSBhbGxvd2VkDQorICogZm9yIGxlZ2FjeSB1c2UgY2FzZXMg
d2hlbiBtdWx0aXBsZSBmZW5jZXMgbmVlZCB0byBiZSBwcmV2ZW50ZWQgZnJvbQ0KKyAqIHNpZ25h
bGluZyBvdXQgb2Ygb3JkZXIuDQogICovDQogdm9pZA0KIGRtYV9mZW5jZV9pbml0NjQoc3RydWN0
IGRtYV9mZW5jZSAqZmVuY2UsIGNvbnN0IHN0cnVjdCBkbWFfZmVuY2Vfb3BzICpvcHMsDQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL3N3X3N5bmMuYyBiL2RyaXZlcnMvZG1hLWJ1Zi9zd19z
eW5jLmMNCmluZGV4IDNjMjBmMWQzMWNmNS4uOTU2YTNhZDdhMDc1IDEwMDY0NA0KLS0tIGEvZHJp
dmVycy9kbWEtYnVmL3N3X3N5bmMuYw0KKysrIGIvZHJpdmVycy9kbWEtYnVmL3N3X3N5bmMuYw0K
QEAgLTE1NSwxMiArMTU1LDEyIEBAIHN0YXRpYyB2b2lkIHRpbWVsaW5lX2ZlbmNlX3JlbGVhc2Uo
c3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpDQogCXN0cnVjdCBzeW5jX3RpbWVsaW5lICpwYXJlbnQg
PSBkbWFfZmVuY2VfcGFyZW50KGZlbmNlKTsNCiAJdW5zaWduZWQgbG9uZyBmbGFnczsNCiANCi0J
c3Bpbl9sb2NrX2lycXNhdmUoZmVuY2UtPmxvY2ssIGZsYWdzKTsNCisJZG1hX2ZlbmNlX2xvY2tf
aXJxc2F2ZShmZW5jZSwgZmxhZ3MpOw0KIAlpZiAoIWxpc3RfZW1wdHkoJnB0LT5saW5rKSkgew0K
IAkJbGlzdF9kZWwoJnB0LT5saW5rKTsNCiAJCXJiX2VyYXNlKCZwdC0+bm9kZSwgJnBhcmVudC0+
cHRfdHJlZSk7DQogCX0NCi0Jc3Bpbl91bmxvY2tfaXJxcmVzdG9yZShmZW5jZS0+bG9jaywgZmxh
Z3MpOw0KKwlkbWFfZmVuY2VfdW5sb2NrX2lycXJlc3RvcmUoZmVuY2UsIGZsYWdzKTsNCiANCiAJ
c3luY190aW1lbGluZV9wdXQocGFyZW50KTsNCiAJZG1hX2ZlbmNlX2ZyZWUoZmVuY2UpOw0KQEAg
LTE3OCw3ICsxNzgsNyBAQCBzdGF0aWMgdm9pZCB0aW1lbGluZV9mZW5jZV9zZXRfZGVhZGxpbmUo
c3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsIGt0aW1lX3QgZGVhZGxpbg0KIAlzdHJ1Y3Qgc3luY19w
dCAqcHQgPSBkbWFfZmVuY2VfdG9fc3luY19wdChmZW5jZSk7DQogCXVuc2lnbmVkIGxvbmcgZmxh
Z3M7DQogDQotCXNwaW5fbG9ja19pcnFzYXZlKGZlbmNlLT5sb2NrLCBmbGFncyk7DQorCWRtYV9m
ZW5jZV9sb2NrX2lycXNhdmUoZmVuY2UsIGZsYWdzKTsNCiAJaWYgKHRlc3RfYml0KFNXX1NZTkNf
SEFTX0RFQURMSU5FX0JJVCwgJmZlbmNlLT5mbGFncykpIHsNCiAJCWlmIChrdGltZV9iZWZvcmUo
ZGVhZGxpbmUsIHB0LT5kZWFkbGluZSkpDQogCQkJcHQtPmRlYWRsaW5lID0gZGVhZGxpbmU7DQpA
QCAtMTg2LDcgKzE4Niw3IEBAIHN0YXRpYyB2b2lkIHRpbWVsaW5lX2ZlbmNlX3NldF9kZWFkbGlu
ZShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwga3RpbWVfdCBkZWFkbGluDQogCQlwdC0+ZGVhZGxp
bmUgPSBkZWFkbGluZTsNCiAJCV9fc2V0X2JpdChTV19TWU5DX0hBU19ERUFETElORV9CSVQsICZm
ZW5jZS0+ZmxhZ3MpOw0KIAl9DQotCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoZmVuY2UtPmxvY2ss
IGZsYWdzKTsNCisJZG1hX2ZlbmNlX3VubG9ja19pcnFyZXN0b3JlKGZlbmNlLCBmbGFncyk7DQog
fQ0KIA0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZG1hX2ZlbmNlX29wcyB0aW1lbGluZV9mZW5jZV9v
cHMgPSB7DQpAQCAtNDI3LDEzICs0MjcsMTMgQEAgc3RhdGljIGludCBzd19zeW5jX2lvY3RsX2dl
dF9kZWFkbGluZShzdHJ1Y3Qgc3luY190aW1lbGluZSAqb2JqLCB1bnNpZ25lZCBsb25nIGENCiAJ
CWdvdG8gcHV0X2ZlbmNlOw0KIAl9DQogDQotCXNwaW5fbG9ja19pcnFzYXZlKGZlbmNlLT5sb2Nr
LCBmbGFncyk7DQorCWRtYV9mZW5jZV9sb2NrX2lycXNhdmUoZmVuY2UsIGZsYWdzKTsNCiAJaWYg
KCF0ZXN0X2JpdChTV19TWU5DX0hBU19ERUFETElORV9CSVQsICZmZW5jZS0+ZmxhZ3MpKSB7DQog
CQlyZXQgPSAtRU5PRU5UOw0KIAkJZ290byB1bmxvY2s7DQogCX0NCiAJZGF0YS5kZWFkbGluZV9u
cyA9IGt0aW1lX3RvX25zKHB0LT5kZWFkbGluZSk7DQotCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUo
ZmVuY2UtPmxvY2ssIGZsYWdzKTsNCisJZG1hX2ZlbmNlX3VubG9ja19pcnFyZXN0b3JlKGZlbmNl
LCBmbGFncyk7DQogDQogCWRtYV9mZW5jZV9wdXQoZmVuY2UpOw0KIA0KQEAgLTQ0Niw3ICs0NDYs
NyBAQCBzdGF0aWMgaW50IHN3X3N5bmNfaW9jdGxfZ2V0X2RlYWRsaW5lKHN0cnVjdCBzeW5jX3Rp
bWVsaW5lICpvYmosIHVuc2lnbmVkIGxvbmcgYQ0KIAlyZXR1cm4gMDsNCiANCiB1bmxvY2s6DQot
CXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoZmVuY2UtPmxvY2ssIGZsYWdzKTsNCisJZG1hX2ZlbmNl
X3VubG9ja19pcnFyZXN0b3JlKGZlbmNlLCBmbGFncyk7DQogcHV0X2ZlbmNlOg0KIAlkbWFfZmVu
Y2VfcHV0KGZlbmNlKTsNCiANCmRpZmYgLS1naXQgYS9kcml2ZXJzL2RtYS1idWYvc3luY19kZWJ1
Zy5oIGIvZHJpdmVycy9kbWEtYnVmL3N5bmNfZGVidWcuaA0KaW5kZXggMDJhZjM0NzI5M2QwLi5j
NDkzMjQ1MDViMjAgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2RtYS1idWYvc3luY19kZWJ1Zy5oDQor
KysgYi9kcml2ZXJzL2RtYS1idWYvc3luY19kZWJ1Zy5oDQpAQCAtNDcsNyArNDcsNyBAQCBzdHJ1
Y3Qgc3luY190aW1lbGluZSB7DQogDQogc3RhdGljIGlubGluZSBzdHJ1Y3Qgc3luY190aW1lbGlu
ZSAqZG1hX2ZlbmNlX3BhcmVudChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkNCiB7DQotCXJldHVy
biBjb250YWluZXJfb2YoZmVuY2UtPmxvY2ssIHN0cnVjdCBzeW5jX3RpbWVsaW5lLCBsb2NrKTsN
CisJcmV0dXJuIGNvbnRhaW5lcl9vZihmZW5jZS0+ZXh0ZXJuX2xvY2ssIHN0cnVjdCBzeW5jX3Rp
bWVsaW5lLCBsb2NrKTsNCiB9DQogDQogLyoqDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X3JpbmcuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9yaW5nLmMNCmluZGV4IGNkODg3M2M2OTMxYS4uYWI0MTQ4OGIwZGY5IDEwMDY0NA0KLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3JpbmcuYw0KKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3JpbmcuYw0KQEAgLTQ3NCwxMCArNDc0LDEwIEBA
IGJvb2wgYW1kZ3B1X3Jpbmdfc29mdF9yZWNvdmVyeShzdHJ1Y3QgYW1kZ3B1X3JpbmcgKnJpbmcs
IHVuc2lnbmVkIGludCB2bWlkLA0KIAlpZiAoYW1kZ3B1X3NyaW92X3ZmKHJpbmctPmFkZXYpIHx8
ICFyaW5nLT5mdW5jcy0+c29mdF9yZWNvdmVyeSB8fCAhZmVuY2UpDQogCQlyZXR1cm4gZmFsc2U7
DQogDQotCXNwaW5fbG9ja19pcnFzYXZlKGZlbmNlLT5sb2NrLCBmbGFncyk7DQorCWRtYV9mZW5j
ZV9sb2NrX2lycXNhdmUoZmVuY2UsIGZsYWdzKTsNCiAJaWYgKCFkbWFfZmVuY2VfaXNfc2lnbmFs
ZWRfbG9ja2VkKGZlbmNlKSkNCiAJCWRtYV9mZW5jZV9zZXRfZXJyb3IoZmVuY2UsIC1FTk9EQVRB
KTsNCi0Jc3Bpbl91bmxvY2tfaXJxcmVzdG9yZShmZW5jZS0+bG9jaywgZmxhZ3MpOw0KKwlkbWFf
ZmVuY2VfdW5sb2NrX2lycXJlc3RvcmUoZmVuY2UsIGZsYWdzKTsNCiANCiAJd2hpbGUgKCFkbWFf
ZmVuY2VfaXNfc2lnbmFsZWQoZmVuY2UpICYmDQogCSAgICAgICBrdGltZV90b19ucyhrdGltZV9z
dWIoZGVhZGxpbmUsIGt0aW1lX2dldCgpKSkgPiAwKQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3ZtLmMNCmluZGV4IDcwMGI0YTc3NjUzMi4uNGI1MzYwYmM0ODEzIDEwMDY0NA0KLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtLmMNCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5jDQpAQCAtMjc4Miw4ICsyNzgyLDggQEAgdm9p
ZCBhbWRncHVfdm1fZmluaShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgc3RydWN0IGFtZGdw
dV92bSAqdm0pDQogCWRtYV9mZW5jZV9wdXQodm0tPmxhc3RfdW5sb2NrZWQpOw0KIAlkbWFfZmVu
Y2Vfd2FpdCh2bS0+bGFzdF90bGJfZmx1c2gsIGZhbHNlKTsNCiAJLyogTWFrZSBzdXJlIHRoYXQg
YWxsIGZlbmNlIGNhbGxiYWNrcyBoYXZlIGNvbXBsZXRlZCAqLw0KLQlzcGluX2xvY2tfaXJxc2F2
ZSh2bS0+bGFzdF90bGJfZmx1c2gtPmxvY2ssIGZsYWdzKTsNCi0Jc3Bpbl91bmxvY2tfaXJxcmVz
dG9yZSh2bS0+bGFzdF90bGJfZmx1c2gtPmxvY2ssIGZsYWdzKTsNCisJZG1hX2ZlbmNlX2xvY2tf
aXJxc2F2ZSh2bS0+bGFzdF90bGJfZmx1c2gsIGZsYWdzKTsNCisJZG1hX2ZlbmNlX3VubG9ja19p
cnFyZXN0b3JlKHZtLT5sYXN0X3RsYl9mbHVzaCwgZmxhZ3MpOw0KIAlkbWFfZmVuY2VfcHV0KHZt
LT5sYXN0X3RsYl9mbHVzaCk7DQogDQogCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZShtYXBwaW5n
LCB0bXAsICZ2bS0+ZnJlZWQsIGxpc3QpIHsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdm0uaCBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV92bS5oDQppbmRleCBjZjBlYzk0ZThhMDcuLjgyNDkyYTU3NTlhMCAxMDA2NDQNCi0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV92bS5oDQorKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uaA0KQEAgLTYzMSwyMCArNjMxLDIwIEBAIGJvb2wgYW1k
Z3B1X3ZtX2lzX2JvX2Fsd2F5c192YWxpZChzdHJ1Y3QgYW1kZ3B1X3ZtICp2bSwgc3RydWN0IGFt
ZGdwdV9ibyAqYm8pOw0KICAqLw0KIHN0YXRpYyBpbmxpbmUgdWludDY0X3QgYW1kZ3B1X3ZtX3Rs
Yl9zZXEoc3RydWN0IGFtZGdwdV92bSAqdm0pDQogew0KKwlzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5j
ZTsNCiAJdW5zaWduZWQgbG9uZyBmbGFnczsNCi0Jc3BpbmxvY2tfdCAqbG9jazsNCiANCiAJLyoN
CiAJICogV29ya2Fyb3VuZCB0byBzdG9wIHJhY2luZyBiZXR3ZWVuIHRoZSBmZW5jZSBzaWduYWxp
bmcgYW5kIGhhbmRsaW5nDQotCSAqIHRoZSBjYi4gVGhlIGxvY2sgaXMgc3RhdGljIGFmdGVyIGlu
aXRpYWxseSBzZXR0aW5nIGl0IHVwLCBqdXN0IG1ha2UNCi0JICogc3VyZSB0aGF0IHRoZSBkbWFf
ZmVuY2Ugc3RydWN0dXJlIGlzbid0IGZyZWVkIHVwLg0KKwkgKiB0aGUgY2IuDQogCSAqLw0KIAly
Y3VfcmVhZF9sb2NrKCk7DQotCWxvY2sgPSB2bS0+bGFzdF90bGJfZmx1c2gtPmxvY2s7DQorCWZl
bmNlID0gZG1hX2ZlbmNlX2dldF9yY3Uodm0tPmxhc3RfdGxiX2ZsdXNoKTsNCiAJcmN1X3JlYWRf
dW5sb2NrKCk7DQogDQotCXNwaW5fbG9ja19pcnFzYXZlKGxvY2ssIGZsYWdzKTsNCi0Jc3Bpbl91
bmxvY2tfaXJxcmVzdG9yZShsb2NrLCBmbGFncyk7DQorCWRtYV9mZW5jZV9sb2NrX2lycXNhdmUo
ZmVuY2UsIGZsYWdzKTsNCisJZG1hX2ZlbmNlX3VubG9ja19pcnFyZXN0b3JlKGZlbmNlLCBmbGFn
cyk7DQorCWRtYV9mZW5jZV9wdXQoZmVuY2UpOw0KIA0KIAlyZXR1cm4gYXRvbWljNjRfcmVhZCgm
dm0tPnRsYl9zZXEpOw0KIH0NCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2NydGMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Yy5jDQppbmRleCBhNzc5N2QyNjBmMWUuLjE3NDcy
OTE1ODQyZiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fY3J0Yy5jDQorKysgYi9k
cml2ZXJzL2dwdS9kcm0vZHJtX2NydGMuYw0KQEAgLTE1OSw3ICsxNTksNyBAQCBzdGF0aWMgY29u
c3Qgc3RydWN0IGRtYV9mZW5jZV9vcHMgZHJtX2NydGNfZmVuY2Vfb3BzOw0KIHN0YXRpYyBzdHJ1
Y3QgZHJtX2NydGMgKmZlbmNlX3RvX2NydGMoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpDQogew0K
IAlCVUdfT04oZmVuY2UtPm9wcyAhPSAmZHJtX2NydGNfZmVuY2Vfb3BzKTsNCi0JcmV0dXJuIGNv
bnRhaW5lcl9vZihmZW5jZS0+bG9jaywgc3RydWN0IGRybV9jcnRjLCBmZW5jZV9sb2NrKTsNCisJ
cmV0dXJuIGNvbnRhaW5lcl9vZihmZW5jZS0+ZXh0ZXJuX2xvY2ssIHN0cnVjdCBkcm1fY3J0Yywg
ZmVuY2VfbG9jayk7DQogfQ0KIA0KIHN0YXRpYyBjb25zdCBjaGFyICpkcm1fY3J0Y19mZW5jZV9n
ZXRfZHJpdmVyX25hbWUoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpDQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2RybV93cml0ZWJhY2suYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fd3JpdGVi
YWNrLmMNCmluZGV4IDk1YjhhMmU0YmRhNi4uNjI0YTRlOGI2Yzk5IDEwMDY0NA0KLS0tIGEvZHJp
dmVycy9ncHUvZHJtL2RybV93cml0ZWJhY2suYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV93
cml0ZWJhY2suYw0KQEAgLTgxLDcgKzgxLDcgQEANCiAgKglGcm9tIHVzZXJzcGFjZSwgdGhpcyBw
cm9wZXJ0eSB3aWxsIGFsd2F5cyByZWFkIGFzIHplcm8uDQogICovDQogDQotI2RlZmluZSBmZW5j
ZV90b193Yl9jb25uZWN0b3IoeCkgY29udGFpbmVyX29mKHgtPmxvY2ssIFwNCisjZGVmaW5lIGZl
bmNlX3RvX3diX2Nvbm5lY3Rvcih4KSBjb250YWluZXJfb2YoeC0+ZXh0ZXJuX2xvY2ssIFwNCiAJ
CQkJCSAgICAgIHN0cnVjdCBkcm1fd3JpdGViYWNrX2Nvbm5lY3RvciwgXA0KIAkJCQkJICAgICAg
ZmVuY2VfbG9jaykNCiANCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2
ZWF1X2RybS5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9kcm0uYw0KaW5kZXgg
MTUyN2I4MDFmMDEzLi5lYzRkZmEzZWE3MjUgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
bm91dmVhdS9ub3V2ZWF1X2RybS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2
ZWF1X2RybS5jDQpAQCAtMTU2LDEyICsxNTYsMTMgQEAgbm91dmVhdV9uYW1lKHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYpDQogc3RhdGljIGlubGluZSBib29sDQogbm91dmVhdV9jbGlfd29ya19yZWFk
eShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkNCiB7DQorCXVuc2lnbmVkIGxvbmcgZmxhZ3M7DQog
CWJvb2wgcmV0ID0gdHJ1ZTsNCiANCi0Jc3Bpbl9sb2NrX2lycShmZW5jZS0+bG9jayk7DQorCWRt
YV9mZW5jZV9sb2NrX2lycXNhdmUoZmVuY2UsIGZsYWdzKTsNCiAJaWYgKCFkbWFfZmVuY2VfaXNf
c2lnbmFsZWRfbG9ja2VkKGZlbmNlKSkNCiAJCXJldCA9IGZhbHNlOw0KLQlzcGluX3VubG9ja19p
cnEoZmVuY2UtPmxvY2spOw0KKwlkbWFfZmVuY2VfdW5sb2NrX2lycXJlc3RvcmUoZmVuY2UsIGZs
YWdzKTsNCiANCiAJaWYgKHJldCA9PSB0cnVlKQ0KIAkJZG1hX2ZlbmNlX3B1dChmZW5jZSk7DQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9mZW5jZS5jIGIvZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9mZW5jZS5jDQppbmRleCA4NjlkNDMzNWMwZjQu
LmE3NTEyYzIyYzg1ZiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZl
YXVfZmVuY2UuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9mZW5jZS5j
DQpAQCAtNDEsNyArNDEsOCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRtYV9mZW5jZV9vcHMgbm91
dmVhdV9mZW5jZV9vcHNfbGVnYWN5Ow0KIHN0YXRpYyBpbmxpbmUgc3RydWN0IG5vdXZlYXVfZmVu
Y2VfY2hhbiAqDQogbm91dmVhdV9mY3R4KHN0cnVjdCBub3V2ZWF1X2ZlbmNlICpmZW5jZSkNCiB7
DQotCXJldHVybiBjb250YWluZXJfb2YoZmVuY2UtPmJhc2UubG9jaywgc3RydWN0IG5vdXZlYXVf
ZmVuY2VfY2hhbiwgbG9jayk7DQorCXJldHVybiBjb250YWluZXJfb2YoZmVuY2UtPmJhc2UuZXh0
ZXJuX2xvY2ssIHN0cnVjdCBub3V2ZWF1X2ZlbmNlX2NoYW4sDQorCQkJICAgIGxvY2spOw0KIH0N
CiANCiBzdGF0aWMgYm9vbA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3Jl
bGVhc2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3JlbGVhc2UuYw0KaW5kZXggN2IzYzlh
NjAxNmRiLi5kZTA1ZTM5MmRmODggMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4
bF9yZWxlYXNlLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3JlbGVhc2UuYw0KQEAg
LTYyLDcgKzYyLDggQEAgc3RhdGljIGxvbmcgcXhsX2ZlbmNlX3dhaXQoc3RydWN0IGRtYV9mZW5j
ZSAqZmVuY2UsIGJvb2wgaW50ciwNCiAJc3RydWN0IHF4bF9kZXZpY2UgKnFkZXY7DQogCXVuc2ln
bmVkIGxvbmcgY3VyLCBlbmQgPSBqaWZmaWVzICsgdGltZW91dDsNCiANCi0JcWRldiA9IGNvbnRh
aW5lcl9vZihmZW5jZS0+bG9jaywgc3RydWN0IHF4bF9kZXZpY2UsIHJlbGVhc2VfbG9jayk7DQor
CXFkZXYgPSBjb250YWluZXJfb2YoZmVuY2UtPmV4dGVybl9sb2NrLCBzdHJ1Y3QgcXhsX2Rldmlj
ZSwNCisJCQkgICAgcmVsZWFzZV9sb2NrKTsNCiANCiAJaWYgKCF3YWl0X2V2ZW50X3RpbWVvdXQo
cWRldi0+cmVsZWFzZV9ldmVudCwNCiAJCQkJKGRtYV9mZW5jZV9pc19zaWduYWxlZChmZW5jZSkg
fHwNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2ZlbmNlLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2ZlbmNlLmMNCmluZGV4IDkzOTFkNmYw
ZGMwMS4uMDhjY2JkZThiMmY1IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxl
ci9zY2hlZF9mZW5jZS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2Zl
bmNlLmMNCkBAIC0xNTYsNyArMTU2LDcgQEAgc3RhdGljIHZvaWQgZHJtX3NjaGVkX2ZlbmNlX3Nl
dF9kZWFkbGluZV9maW5pc2hlZChzdHJ1Y3QgZG1hX2ZlbmNlICpmLA0KIAlzdHJ1Y3QgZG1hX2Zl
bmNlICpwYXJlbnQ7DQogCXVuc2lnbmVkIGxvbmcgZmxhZ3M7DQogDQotCXNwaW5fbG9ja19pcnFz
YXZlKCZmZW5jZS0+bG9jaywgZmxhZ3MpOw0KKwlkbWFfZmVuY2VfbG9ja19pcnFzYXZlKGYsIGZs
YWdzKTsNCiANCiAJLyogSWYgd2UgYWxyZWFkeSBoYXZlIGFuIGVhcmxpZXIgZGVhZGxpbmUsIGtl
ZXAgaXQ6ICovDQogCWlmICh0ZXN0X2JpdChEUk1fU0NIRURfRkVOQ0VfRkxBR19IQVNfREVBRExJ
TkVfQklULCAmZi0+ZmxhZ3MpICYmDQpAQCAtMTY4LDcgKzE2OCw3IEBAIHN0YXRpYyB2b2lkIGRy
bV9zY2hlZF9mZW5jZV9zZXRfZGVhZGxpbmVfZmluaXNoZWQoc3RydWN0IGRtYV9mZW5jZSAqZiwN
CiAJZmVuY2UtPmRlYWRsaW5lID0gZGVhZGxpbmU7DQogCXNldF9iaXQoRFJNX1NDSEVEX0ZFTkNF
X0ZMQUdfSEFTX0RFQURMSU5FX0JJVCwgJmYtPmZsYWdzKTsNCiANCi0Jc3Bpbl91bmxvY2tfaXJx
cmVzdG9yZSgmZmVuY2UtPmxvY2ssIGZsYWdzKTsNCisJZG1hX2ZlbmNlX3VubG9ja19pcnFyZXN0
b3JlKGYsIGZsYWdzKTsNCiANCiAJLyoNCiAJICogc21wX2xvYWRfYXF1aXJlKCkgdG8gZW5zdXJl
IHRoYXQgaWYgd2UgYXJlIHJhY2luZyBhbm90aGVyDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL3Ztd2dmeC92bXdnZnhfZmVuY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4
X2ZlbmNlLmMNCmluZGV4IDAwYmU5MmRhNTUwOS4uNjIxYWEwYWE4NDA2IDEwMDY0NA0KLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfZmVuY2UuYw0KKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3Ztd2dmeC92bXdnZnhfZmVuY2UuYw0KQEAgLTQ3LDcgKzQ3LDggQEAgc3RydWN0IHZtd19l
dmVudF9mZW5jZV9hY3Rpb24gew0KIHN0YXRpYyBzdHJ1Y3Qgdm13X2ZlbmNlX21hbmFnZXIgKg0K
IGZtYW5fZnJvbV9mZW5jZShzdHJ1Y3Qgdm13X2ZlbmNlX29iaiAqZmVuY2UpDQogew0KLQlyZXR1
cm4gY29udGFpbmVyX29mKGZlbmNlLT5iYXNlLmxvY2ssIHN0cnVjdCB2bXdfZmVuY2VfbWFuYWdl
ciwgbG9jayk7DQorCXJldHVybiBjb250YWluZXJfb2YoZmVuY2UtPmJhc2UuZXh0ZXJuX2xvY2ss
IHN0cnVjdCB2bXdfZmVuY2VfbWFuYWdlciwNCisJCQkgICAgbG9jayk7DQogfQ0KIA0KIHN0YXRp
YyB2b2lkIHZtd19mZW5jZV9vYmpfZGVzdHJveShzdHJ1Y3QgZG1hX2ZlbmNlICpmKQ0KZGlmZiAt
LWdpdCBhL2RyaXZlcnMvZ3B1L2RybS94ZS94ZV9od19mZW5jZS5jIGIvZHJpdmVycy9ncHUvZHJt
L3hlL3hlX2h3X2ZlbmNlLmMNCmluZGV4IGIyYTBjNDZkZmNkNC4uMzQ1NmJlYzkzYzcwIDEwMDY0
NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3hlL3hlX2h3X2ZlbmNlLmMNCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS94ZS94ZV9od19mZW5jZS5jDQpAQCAtMTQ0LDcgKzE0NCw4IEBAIHN0YXRpYyBzdHJ1
Y3QgeGVfaHdfZmVuY2UgKnRvX3hlX2h3X2ZlbmNlKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKTsN
CiANCiBzdGF0aWMgc3RydWN0IHhlX2h3X2ZlbmNlX2lycSAqeGVfaHdfZmVuY2VfaXJxKHN0cnVj
dCB4ZV9od19mZW5jZSAqZmVuY2UpDQogew0KLQlyZXR1cm4gY29udGFpbmVyX29mKGZlbmNlLT5k
bWEubG9jaywgc3RydWN0IHhlX2h3X2ZlbmNlX2lycSwgbG9jayk7DQorCXJldHVybiBjb250YWlu
ZXJfb2YoZmVuY2UtPmRtYS5leHRlcm5fbG9jaywgc3RydWN0IHhlX2h3X2ZlbmNlX2lycSwNCisJ
CQkgICAgbG9jayk7DQogfQ0KIA0KIHN0YXRpYyBjb25zdCBjaGFyICp4ZV9od19mZW5jZV9nZXRf
ZHJpdmVyX25hbWUoc3RydWN0IGRtYV9mZW5jZSAqZG1hX2ZlbmNlKQ0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS94ZS94ZV9zY2hlZF9qb2IuYyBiL2RyaXZlcnMvZ3B1L2RybS94ZS94ZV9z
Y2hlZF9qb2IuYw0KaW5kZXggY2I2NzRhMzIyMTEzLi45YTQzZWQ2ODllNjUgMTAwNjQ0DQotLS0g
YS9kcml2ZXJzL2dwdS9kcm0veGUveGVfc2NoZWRfam9iLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS94ZS94ZV9zY2hlZF9qb2IuYw0KQEAgLTE4OSwxMSArMTg5LDExIEBAIHN0YXRpYyBib29sIHhl
X2ZlbmNlX3NldF9lcnJvcihzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwgaW50IGVycm9yKQ0KIAl1
bnNpZ25lZCBsb25nIGlycV9mbGFnczsNCiAJYm9vbCBzaWduYWxlZDsNCiANCi0Jc3Bpbl9sb2Nr
X2lycXNhdmUoZmVuY2UtPmxvY2ssIGlycV9mbGFncyk7DQorCWRtYV9mZW5jZV9sb2NrX2lycXNh
dmUoZmVuY2UsIGlycV9mbGFncyk7DQogCXNpZ25hbGVkID0gdGVzdF9iaXQoRE1BX0ZFTkNFX0ZM
QUdfU0lHTkFMRURfQklULCAmZmVuY2UtPmZsYWdzKTsNCiAJaWYgKCFzaWduYWxlZCkNCiAJCWRt
YV9mZW5jZV9zZXRfZXJyb3IoZmVuY2UsIGVycm9yKTsNCi0Jc3Bpbl91bmxvY2tfaXJxcmVzdG9y
ZShmZW5jZS0+bG9jaywgaXJxX2ZsYWdzKTsNCisJZG1hX2ZlbmNlX3VubG9ja19pcnFyZXN0b3Jl
KGZlbmNlLCBpcnFfZmxhZ3MpOw0KIA0KIAlyZXR1cm4gc2lnbmFsZWQ7DQogfQ0KZGlmZiAtLWdp
dCBhL2luY2x1ZGUvbGludXgvZG1hLWZlbmNlLmggYi9pbmNsdWRlL2xpbnV4L2RtYS1mZW5jZS5o
DQppbmRleCBlYjU3YmNjODcxMmYuLmQ0OTNkMTVhZDUyYSAxMDA2NDQNCi0tLSBhL2luY2x1ZGUv
bGludXgvZG1hLWZlbmNlLmgNCisrKyBiL2luY2x1ZGUvbGludXgvZG1hLWZlbmNlLmgNCkBAIC0z
NCw3ICszNCw4IEBAIHN0cnVjdCBzZXFfZmlsZTsNCiAgKiBAb3BzOiBkbWFfZmVuY2Vfb3BzIGFz
c29jaWF0ZWQgd2l0aCB0aGlzIGZlbmNlDQogICogQHJjdTogdXNlZCBmb3IgcmVsZWFzaW5nIGZl
bmNlIHdpdGgga2ZyZWVfcmN1DQogICogQGNiX2xpc3Q6IGxpc3Qgb2YgYWxsIGNhbGxiYWNrcyB0
byBjYWxsDQotICogQGxvY2s6IHNwaW5fbG9ja19pcnFzYXZlIHVzZWQgZm9yIGxvY2tpbmcNCisg
KiBAZXh0ZXJuX2xvY2s6IGV4dGVybmFsIHNwaW5fbG9ja19pcnFzYXZlIHVzZWQgZm9yIGxvY2tp
bmcNCisgKiBAaW5saW5lX2xvY2s6IGFsdGVybmF0aXZlIGludGVybmFsIHNwaW5fbG9ja19pcnFz
YXZlIHVzZWQgZm9yIGxvY2tpbmcNCiAgKiBAY29udGV4dDogZXhlY3V0aW9uIGNvbnRleHQgdGhp
cyBmZW5jZSBiZWxvbmdzIHRvLCByZXR1cm5lZCBieQ0KICAqICAgICAgICAgICBkbWFfZmVuY2Vf
Y29udGV4dF9hbGxvYygpDQogICogQHNlcW5vOiB0aGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoaXMg
ZmVuY2UgaW5zaWRlIHRoZSBleGVjdXRpb24gY29udGV4dCwNCkBAIC00OCw2ICs0OSw3IEBAIHN0
cnVjdCBzZXFfZmlsZTsNCiAgKiBhdG9taWMgb3BzIChiaXRfKiksIHNvIHRha2luZyB0aGUgc3Bp
bmxvY2sgd2lsbCBub3QgYmUgbmVlZGVkIG1vc3QNCiAgKiBvZiB0aGUgdGltZS4NCiAgKg0KKyAq
IERNQV9GRU5DRV9GTEFHX0lOTElORV9MT0NLX0JJVCAtIHVzZSBpbmxpbmUgc3BpbmxvY2sgaW5z
dGVhZCBvZiBleHRlcm5hbCBvbmUNCiAgKiBETUFfRkVOQ0VfRkxBR19TSUdOQUxFRF9CSVQgLSBm
ZW5jZSBpcyBhbHJlYWR5IHNpZ25hbGVkDQogICogRE1BX0ZFTkNFX0ZMQUdfVElNRVNUQU1QX0JJ
VCAtIHRpbWVzdGFtcCByZWNvcmRlZCBmb3IgZmVuY2Ugc2lnbmFsaW5nDQogICogRE1BX0ZFTkNF
X0ZMQUdfRU5BQkxFX1NJR05BTF9CSVQgLSBlbmFibGVfc2lnbmFsaW5nIG1pZ2h0IGhhdmUgYmVl
biBjYWxsZWQNCkBAIC02NSw3ICs2NywxMCBAQCBzdHJ1Y3Qgc2VxX2ZpbGU7DQogICogYmVlbiBj
b21wbGV0ZWQsIG9yIG5ldmVyIGNhbGxlZCBhdCBhbGwuDQogICovDQogc3RydWN0IGRtYV9mZW5j
ZSB7DQotCXNwaW5sb2NrX3QgKmxvY2s7DQorCXVuaW9uIHsNCisJCXNwaW5sb2NrX3QgKmV4dGVy
bl9sb2NrOw0KKwkJc3BpbmxvY2tfdCBpbmxpbmVfbG9jazsNCisJfTsNCiAJY29uc3Qgc3RydWN0
IGRtYV9mZW5jZV9vcHMgX19yY3UgKm9wczsNCiAJLyoNCiAJICogV2UgY2xlYXIgdGhlIGNhbGxi
YWNrIGxpc3Qgb24ga3JlZl9wdXQgc28gdGhhdCBieSB0aGUgdGltZSB3ZQ0KQEAgLTk4LDYgKzEw
Myw3IEBAIHN0cnVjdCBkbWFfZmVuY2Ugew0KIH07DQogDQogZW51bSBkbWFfZmVuY2VfZmxhZ19i
aXRzIHsNCisJRE1BX0ZFTkNFX0ZMQUdfSU5MSU5FX0xPQ0tfQklULA0KIAlETUFfRkVOQ0VfRkxB
R19TRVFOTzY0X0JJVCwNCiAJRE1BX0ZFTkNFX0ZMQUdfU0lHTkFMRURfQklULA0KIAlETUFfRkVO
Q0VfRkxBR19USU1FU1RBTVBfQklULA0KQEAgLTM2Miw2ICszNjgsMzggQEAgZG1hX2ZlbmNlX2dl
dF9yY3Vfc2FmZShzdHJ1Y3QgZG1hX2ZlbmNlIF9fcmN1ICoqZmVuY2VwKQ0KIAl9IHdoaWxlICgx
KTsNCiB9DQogDQorLyoqDQorICogZG1hX2ZlbmNlX3NwaW5sb2NrIC0gcmV0dXJuIHBvaW50ZXIg
dG8gdGhlIHNwaW5sb2NrIHByb3RlY3RpbmcgdGhlIGZlbmNlDQorICogQGZlbmNlOiB0aGUgZmVu
Y2UgdG8gZ2V0IHRoZSBsb2NrIGZyb20NCisgKg0KKyAqIFJldHVybiBlaXRoZXIgdGhlIHBvaW50
ZXIgdG8gdGhlIGVtYmVkZGVkIG9yIHRoZSBleHRlcm5hbCBzcGluIGxvY2suDQorICovDQorc3Rh
dGljIGlubGluZSBzcGlubG9ja190ICpkbWFfZmVuY2Vfc3BpbmxvY2soc3RydWN0IGRtYV9mZW5j
ZSAqZmVuY2UpDQorew0KKwlyZXR1cm4gdGVzdF9iaXQoRE1BX0ZFTkNFX0ZMQUdfSU5MSU5FX0xP
Q0tfQklULCAmZmVuY2UtPmZsYWdzKSA/DQorCQkmZmVuY2UtPmlubGluZV9sb2NrIDogZmVuY2Ut
PmV4dGVybl9sb2NrOw0KK30NCisNCisvKioNCisgKiBkbWFfZmVuY2VfbG9ja19pcnFzYXZlIC0g
aXJxc2F2ZSBsb2NrIHRoZSBmZW5jZQ0KKyAqIEBmZW5jZTogdGhlIGZlbmNlIHRvIGxvY2sNCisg
KiBAZmxhZ3M6IHdoZXJlIHRvIHN0b3JlIHRoZSBDUFUgZmxhZ3MuDQorICoNCisgKiBMb2NrIHRo
ZSBmZW5jZSwgcHJldmVudGluZyBpdCBmcm9tIGNoYW5naW5nIHRvIHRoZSBzaWduYWxlZCBzdGF0
ZS4NCisgKi8NCisjZGVmaW5lIGRtYV9mZW5jZV9sb2NrX2lycXNhdmUoZmVuY2UsIGZsYWdzKQlc
DQorCXNwaW5fbG9ja19pcnFzYXZlKGRtYV9mZW5jZV9zcGlubG9jayhmZW5jZSksIGZsYWdzKQ0K
Kw0KKy8qKg0KKyAqIGRtYV9mZW5jZV91bmxvY2tfaXJxcmVzdG9yZSAtIHVubG9jayB0aGUgZmVu
Y2UgYW5kIGlycXJlc3RvcmUNCisgKiBAZmVuY2U6IHRoZSBmZW5jZSB0byB1bmxvY2sNCisgKiBA
ZmxhZ3MgdGhlIENQVSBmbGFncyB0byByZXN0b3JlDQorICoNCisgKiBVbmxvY2sgdGhlIGZlbmNl
LCBhbGxvd2luZyBpdCB0byBjaGFuZ2UgaXQncyBzdGF0ZSB0byBzaWduYWxlZCBhZ2Fpbi4NCisg
Ki8NCisjZGVmaW5lIGRtYV9mZW5jZV91bmxvY2tfaXJxcmVzdG9yZShmZW5jZSwgZmxhZ3MpCVwN
CisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZShkbWFfZmVuY2Vfc3BpbmxvY2soZmVuY2UpLCBmbGFn
cykNCisNCiAjaWZkZWYgQ09ORklHX0xPQ0tERVANCiBib29sIGRtYV9mZW5jZV9iZWdpbl9zaWdu
YWxsaW5nKHZvaWQpOw0KIHZvaWQgZG1hX2ZlbmNlX2VuZF9zaWduYWxsaW5nKGJvb2wgY29va2ll
KTsNCi0tIA0KMi40My4wDQoNCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkxpbmFyby1tbS1zaWcgbWFpbGluZyBsaXN0IC0tIGxpbmFyby1tbS1zaWdAbGlz
dHMubGluYXJvLm9yZwpUbyB1bnN1YnNjcmliZSBzZW5kIGFuIGVtYWlsIHRvIGxpbmFyby1tbS1z
aWctbGVhdmVAbGlzdHMubGluYXJvLm9yZwo=
