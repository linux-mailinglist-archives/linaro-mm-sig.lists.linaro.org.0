Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id F274B63F38C
	for <lists+linaro-mm-sig@lfdr.de>; Thu,  1 Dec 2022 16:17:17 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 09B933F444
	for <lists+linaro-mm-sig@lfdr.de>; Thu,  1 Dec 2022 15:17:17 +0000 (UTC)
Received: from new4-smtp.messagingengine.com (new4-smtp.messagingengine.com [66.111.4.230])
	by lists.linaro.org (Postfix) with ESMTPS id 58C153F30D
	for <linaro-mm-sig@lists.linaro.org>; Thu,  1 Dec 2022 15:14:57 +0000 (UTC)
Authentication-Results: lists.linaro.org;
	dkim=pass header.d=cerno.tech header.s=fm2 header.b="U qM/fuM";
	dkim=pass header.d=messagingengine.com header.s=fm1 header.b="W 45aher";
	spf=pass (lists.linaro.org: domain of maxime@cerno.tech designates 66.111.4.230 as permitted sender) smtp.mailfrom=maxime@cerno.tech;
	dmarc=pass (policy=none) header.from=cerno.tech
Received: from compute5.internal (compute5.nyi.internal [10.202.2.45])
	by mailnew.nyi.internal (Postfix) with ESMTP id 3C6B6580381;
	Thu,  1 Dec 2022 10:14:57 -0500 (EST)
Received: from mailfrontend1 ([10.202.2.162])
  by compute5.internal (MEProxy); Thu, 01 Dec 2022 10:14:57 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=cerno.tech; h=cc
	:cc:content-transfer-encoding:content-type:date:date:from:from
	:in-reply-to:in-reply-to:message-id:mime-version:references
	:reply-to:sender:subject:subject:to:to; s=fm2; t=1669907697; x=
	1669914897; bh=kwkfz5PW+M+CxtrhikgqotT1zIv4xEiTulE/3PlEXME=; b=U
	qM/fuMgiH+FCir6PZIBUHYzdNkLIzB68/se/UhI9ors/v+nNZkurxxXbYGdhnwPF
	vWDAhbYP8ahM6RymGEGEUtUQ34dVfMbztQc4yZoHEVsoT4Qlr1O+JioTbo6Bjutm
	Bugs+Qhd6sVsrqeh/o1dSfgqmqRl7zZOBU9UkKKqLl07ns2G9oY4M1q1jBP61ssm
	Ng1T41v8TfiJzdxx6VpkxhTa1dC2/diUoPSwMkB7+d823hAYp03AExDMBi3Ncx8K
	c1Mga5lDXQwTTD0gMe1q+MVKRfM92T1qfaiVKXnKcc6B1daxtjiZxLE7/7zxDPWM
	GfFtiNkyYC1vB5X8lSVhA==
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=
	messagingengine.com; h=cc:cc:content-transfer-encoding
	:content-type:date:date:feedback-id:feedback-id:from:from
	:in-reply-to:in-reply-to:message-id:mime-version:references
	:reply-to:sender:subject:subject:to:to:x-me-proxy:x-me-proxy
	:x-me-sender:x-me-sender:x-sasl-enc; s=fm1; t=1669907697; x=
	1669914897; bh=kwkfz5PW+M+CxtrhikgqotT1zIv4xEiTulE/3PlEXME=; b=W
	45aherA/iOhenqy+4mkTBiJ2BSrqsex+JYLjj2Gss4lMdH3xlLuXM5HokphHp73e
	I6sejwXX3E93V63bLgmRj599wnEZHeFzEG3+7nGWzk1AbUwC7xfnz3vA4YpnPOG7
	GGw0cK4h0gyi1ybKD/6LRhAfdHwubt9C92sPZfTunPcKfijjeRj5ORUJHHE505Rg
	i+ANuZT0KRtMYWeDeN74uYYYGplMFcKa7jZrFcZJK9rwPxEePB8mBYYweYPMqRWk
	7b5pNBHKwhqNbaj/3/LiiaxpLJtO4nGZ7t9aiTf3mZmvScdqoIaFM9kKJZQKFXTu
	ESnFDUuRB5szYlLqdrHIA==
X-ME-Sender: <xms:8cSIY813f92oDL2uAAG-tRRz78qnf0_z37dNHNS0QJHMDwkNj1unZg>
    <xme:8cSIY3FM2lO6Oj3kzglzfKZ1MKJy5wdKVpD-Rx3lFMhnBQyhBItsuhVEf3OwDqhIQ
    szt04riV24cJbZaG4E>
X-ME-Received: <xmr:8cSIY05qLEIxI5hULDXpgZPtrNGAlgtlMh-zr-UKHrZt7N4wAZUToalBqJw0l4VVvSv0tnmpuHSC-f7e3DPYTTZXcG-SYlqqmGxkceFL_wtBYg>
X-ME-Proxy-Cause: gggruggvucftvghtrhhoucdtuddrgedvhedrtdehgdejgecutefuodetggdotefrodftvf
    curfhrohhfihhlvgemucfhrghsthforghilhdpqfgfvfdpuffrtefokffrpgfnqfghnecu
    uegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenuc
    fjughrpefhfffuggfgtgfkfhgjvfevofesthekredtredtjeenucfhrhhomhepofgrgihi
    mhgvucftihhprghrugcuoehmrgigihhmvgestggvrhhnohdrthgvtghhqeenucggtffrrg
    htthgvrhhnpedvgfevjefhtdetveevhfelieeuueetgfdvgeevkeegudejffegfffgtedt
    leelhfenucevlhhushhtvghrufhiiigvpedunecurfgrrhgrmhepmhgrihhlfhhrohhmpe
    hmrgigihhmvgestggvrhhnohdrthgvtghh
X-ME-Proxy: <xmx:8cSIY13DNv136dub3rmQjsJdHC-MEppAle_mu45H9qL3bz2ncJG8fQ>
    <xmx:8cSIY_GA1v8Vin8rFK0zhz18uQBY6QNGHQoauDMTmaMyPbU0uPQOGA>
    <xmx:8cSIY-8IQANZw-3jlKhKd7b44MwCsU5rMS_M4JCysXdlbCi66PjzLg>
    <xmx:8cSIY-Gfs0cAYqRSn5Nvo-MvgmCwwuVNxJofZyK5EVgWvKO43znfdw>
Feedback-ID: i8771445c:Fastmail
Received: by mail.messagingengine.com (Postfix) with ESMTPA; Thu,
 1 Dec 2022 10:14:56 -0500 (EST)
From: Maxime Ripard <maxime@cerno.tech>
Date: Thu, 01 Dec 2022 16:11:38 +0100
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Message-Id: <20221123-rpi-kunit-tests-v3-7-4615a663a84a@cerno.tech>
References: <20221123-rpi-kunit-tests-v3-0-4615a663a84a@cerno.tech>
In-Reply-To: <20221123-rpi-kunit-tests-v3-0-4615a663a84a@cerno.tech>
To: Maxime Ripard <mripard@kernel.org>, Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Daniel Vetter <daniel@ffwll.ch>, Thomas Zimmermann <tzimmermann@suse.de>, David Airlie <airlied@gmail.com>
X-Mailer: b4 0.10.1
X-Developer-Signature: v=1; a=openpgp-sha256; l=9380; i=maxime@cerno.tech;
 h=from:subject:message-id; bh=3Exym6xxqWVt6fOmdHC7PPteC1L5T2y3IaPsIclT7Mg=;
 b=owGbwMvMwCX2+D1vfrpE4FHG02pJDMkdRzS2KqzPM7E99tFe/TdLbXjquuy3hQ8Z75UbbjnNyJZZ
 Ijizo5SFQYyLQVZMkSVG2HxJ3KlZrzvZ+ObBzGFlAhnCwMUpABOZcYCRYd75VTPSheYFR2Rv83o8N3
 vZwWtJ/NIcIdybDd1fp834s4iR4VFImfrcts390+exN3h8//xUOz3w7IbptS8lLrPJsBUV8AAA
X-Developer-Key: i=maxime@cerno.tech; a=openpgp;
 fpr=BE5675C37E818C8B5764241C254BCFC56BF6CE8D
X-Rspamd-Queue-Id: 58C153F30D
X-Spamd-Bar: -----------
X-Spamd-Result: default: False [-11.60 / 15.00];
	REPLY(-4.00)[];
	DWL_DNSWL_HI(-3.50)[messagingengine.com:dkim];
	BAYES_HAM(-3.00)[100.00%];
	DMARC_POLICY_ALLOW(-0.50)[cerno.tech,none];
	R_SPF_ALLOW(-0.20)[+ip4:66.111.4.230:c];
	R_DKIM_ALLOW(-0.20)[cerno.tech:s=fm2,messagingengine.com:s=fm1];
	RCVD_IN_DNSWL_LOW(-0.10)[66.111.4.230:from];
	MIME_GOOD(-0.10)[text/plain];
	MIME_TRACE(0.00)[0:+];
	ASN(0.00)[asn:19151, ipnet:66.111.4.0/24, country:US];
	MID_RHS_MATCH_FROM(0.00)[];
	NEURAL_HAM(-0.00)[-1.000];
	FREEMAIL_TO(0.00)[kernel.org,linux.intel.com,ffwll.ch,suse.de,gmail.com];
	RCVD_TLS_LAST(0.00)[];
	FROM_EQ_ENVFROM(0.00)[];
	DBL_BLOCKED_OPENRESOLVER(0.00)[cerno.tech:email,cerno.tech:dkim,new4-smtp.messagingengine.com:rdns,new4-smtp.messagingengine.com:helo,messagingengine.com:dkim];
	DKIM_TRACE(0.00)[cerno.tech:+,messagingengine.com:+];
	TO_MATCH_ENVRCPT_SOME(0.00)[];
	URIBL_BLOCKED(0.00)[cerno.tech:email,cerno.tech:dkim,new4-smtp.messagingengine.com:rdns,new4-smtp.messagingengine.com:helo,igalia.com:email];
	RCVD_VIA_SMTP_AUTH(0.00)[];
	RCPT_COUNT_TWELVE(0.00)[19];
	FROM_HAS_DN(0.00)[];
	RCVD_COUNT_THREE(0.00)[4];
	TO_DN_SOME(0.00)[];
	ARC_NA(0.00)[]
X-Rspamd-Action: no action
X-Rspamd-Server: lists.linaro.org
Message-ID-Hash: 7T75Q6BORATSBMUPWZRE67UU4GU4ESNQ
X-Message-ID-Hash: 7T75Q6BORATSBMUPWZRE67UU4GU4ESNQ
X-MailFrom: maxime@cerno.tech
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
CC: linux-kselftest@vger.kernel.org, Greg Kroah-Hartman <gregkh@linuxfoundation.org>, dri-devel@lists.freedesktop.org, Maxime Ripard <maxime@cerno.tech>, =?utf-8?b?TWHvv73vv71yYSBDYW5hbA==?= <mcanal@igalia.com>, Javier Martinez Canillas <javierm@redhat.com>, linux-kernel@vger.kernel.org, Brendan Higgins <brendan.higgins@linux.dev>, Dave Stevenson <dave.stevenson@raspberrypi.com>, linux-media@vger.kernel.org, David Gow <davidgow@google.com>, linaro-mm-sig@lists.linaro.org, kunit-dev@googlegroups.com, =?utf-8?b?TWHvv73vv71yYSBDYW5hbA==?= <mairacanal@riseup.net>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH v3 07/20] drm/tests: helpers: Create the device in another function
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/7T75Q6BORATSBMUPWZRE67UU4GU4ESNQ/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Transfer-Encoding: base64

V2UnbGwgbmVlZCBpbiBzb21lIHRlc3RzIHRvIGNvbnRyb2wgd2hlbiB0aGUgZGV2aWNlIG5lZWRz
IHRvIGJlIGFkZGVkDQphbmQgcmVtb3ZlZCwgc28gbGV0J3Mgc3BsaXQgdGhlIGRldmljZSBjcmVh
dGlvbiBmcm9tIHRoZSBEUk0gZGV2aWNlDQpjcmVhdGlvbiBmdW5jdGlvbi4NCg0KUmV2aWV3ZWQt
Ynk6IE1hw61yYSBDYW5hbCA8bWNhbmFsQGlnYWxpYS5jb20+DQpTaWduZWQtb2ZmLWJ5OiBNYXhp
bWUgUmlwYXJkIDxtYXhpbWVAY2Vybm8udGVjaD4NCi0tLQ0KIGRyaXZlcnMvZ3B1L2RybS90ZXN0
cy9kcm1fY2xpZW50X21vZGVzZXRfdGVzdC5jIHwgMTQgKysrKysrLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS90ZXN0cy9kcm1fa3VuaXRfaGVscGVycy5jICAgICAgIHwgNTYgKysrKysrKysrKysrKysrLS0t
LS0tLS0tLQ0KIGRyaXZlcnMvZ3B1L2RybS90ZXN0cy9kcm1fbW9kZXNfdGVzdC5jICAgICAgICAg
IHwgMTUgKysrKysrLQ0KIGRyaXZlcnMvZ3B1L2RybS90ZXN0cy9kcm1fcHJvYmVfaGVscGVyX3Rl
c3QuYyAgIHwgMTQgKysrKysrLQ0KIGluY2x1ZGUvZHJtL2RybV9rdW5pdF9oZWxwZXJzLmggICAg
ICAgICAgICAgICAgIHwgIDUgKystDQogNSBmaWxlcyBjaGFuZ2VkLCA3NyBpbnNlcnRpb25zKCsp
LCAyNyBkZWxldGlvbnMoLSkNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90ZXN0cy9k
cm1fY2xpZW50X21vZGVzZXRfdGVzdC5jIGIvZHJpdmVycy9ncHUvZHJtL3Rlc3RzL2RybV9jbGll
bnRfbW9kZXNldF90ZXN0LmMNCmluZGV4IDRkNDc1YWU2ZGJiNi4uMDUzZGJjMDEwNmQ5IDEwMDY0
NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Rlc3RzL2RybV9jbGllbnRfbW9kZXNldF90ZXN0LmMN
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS90ZXN0cy9kcm1fY2xpZW50X21vZGVzZXRfdGVzdC5jDQpA
QCAtMTUsNiArMTUsNyBAQA0KIA0KIHN0cnVjdCBkcm1fY2xpZW50X21vZGVzZXRfdGVzdF9wcml2
IHsNCiAJc3RydWN0IGRybV9kZXZpY2UgKmRybTsNCisJc3RydWN0IGRldmljZSAqZGV2Ow0KIAlz
dHJ1Y3QgZHJtX2Nvbm5lY3RvciBjb25uZWN0b3I7DQogfTsNCiANCkBAIC01OSw3ICs2MCwxMCBA
QCBzdGF0aWMgaW50IGRybV9jbGllbnRfbW9kZXNldF90ZXN0X2luaXQoc3RydWN0IGt1bml0ICp0
ZXN0KQ0KIA0KIAl0ZXN0LT5wcml2ID0gcHJpdjsNCiANCi0JcHJpdi0+ZHJtID0gZHJtX2t1bml0
X2hlbHBlcl9hbGxvY19kcm1fZGV2aWNlKHRlc3QsIERSSVZFUl9NT0RFU0VUKTsNCisJcHJpdi0+
ZGV2ID0gZHJtX2t1bml0X2hlbHBlcl9hbGxvY19kZXZpY2UodGVzdCk7DQorCUtVTklUX0FTU0VS
VF9OT1RfRVJSX09SX05VTEwodGVzdCwgcHJpdi0+ZGV2KTsNCisNCisJcHJpdi0+ZHJtID0gZHJt
X2t1bml0X2hlbHBlcl9hbGxvY19kcm1fZGV2aWNlKHRlc3QsIHByaXYtPmRldiwgRFJJVkVSX01P
REVTRVQpOw0KIAlLVU5JVF9BU1NFUlRfTk9UX0VSUl9PUl9OVUxMKHRlc3QsIHByaXYtPmRybSk7
DQogDQogCXJldCA9IGRybW1fY29ubmVjdG9yX2luaXQocHJpdi0+ZHJtLCAmcHJpdi0+Y29ubmVj
dG9yLA0KQEAgLTc2LDYgKzgwLDEzIEBAIHN0YXRpYyBpbnQgZHJtX2NsaWVudF9tb2Rlc2V0X3Rl
c3RfaW5pdChzdHJ1Y3Qga3VuaXQgKnRlc3QpDQogCXJldHVybiAwOw0KIH0NCiANCitzdGF0aWMg
dm9pZCBkcm1fY2xpZW50X21vZGVzZXRfdGVzdF9leGl0KHN0cnVjdCBrdW5pdCAqdGVzdCkNCit7
DQorCXN0cnVjdCBkcm1fY2xpZW50X21vZGVzZXRfdGVzdF9wcml2ICpwcml2ID0gdGVzdC0+cHJp
djsNCisNCisJZHJtX2t1bml0X2hlbHBlcl9mcmVlX2RldmljZSh0ZXN0LCBwcml2LT5kZXYpOw0K
K30NCisNCiBzdGF0aWMgdm9pZCBkcm1fdGVzdF9waWNrX2NtZGxpbmVfcmVzXzE5MjBfMTA4MF82
MChzdHJ1Y3Qga3VuaXQgKnRlc3QpDQogew0KIAlzdHJ1Y3QgZHJtX2NsaWVudF9tb2Rlc2V0X3Rl
c3RfcHJpdiAqcHJpdiA9IHRlc3QtPnByaXY7DQpAQCAtMTc1LDYgKzE4Niw3IEBAIHN0YXRpYyBz
dHJ1Y3Qga3VuaXRfY2FzZSBkcm1fdGVzdF9waWNrX2NtZGxpbmVfdGVzdHNbXSA9IHsNCiBzdGF0
aWMgc3RydWN0IGt1bml0X3N1aXRlIGRybV90ZXN0X3BpY2tfY21kbGluZV90ZXN0X3N1aXRlID0g
ew0KIAkubmFtZSA9ICJkcm1fdGVzdF9waWNrX2NtZGxpbmUiLA0KIAkuaW5pdCA9IGRybV9jbGll
bnRfbW9kZXNldF90ZXN0X2luaXQsDQorCS5leGl0ID0gZHJtX2NsaWVudF9tb2Rlc2V0X3Rlc3Rf
ZXhpdCwNCiAJLnRlc3RfY2FzZXMgPSBkcm1fdGVzdF9waWNrX2NtZGxpbmVfdGVzdHMNCiB9Ow0K
IA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90ZXN0cy9kcm1fa3VuaXRfaGVscGVycy5j
IGIvZHJpdmVycy9ncHUvZHJtL3Rlc3RzL2RybV9rdW5pdF9oZWxwZXJzLmMNCmluZGV4IGVjMzNm
Y2JkMDkyZC4uNGJmOThiZDBhOGM2IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Rlc3Rz
L2RybV9rdW5pdF9oZWxwZXJzLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90ZXN0cy9kcm1fa3Vu
aXRfaGVscGVycy5jDQpAQCAtMTcsMzYgKzE3LDUxIEBAIHN0cnVjdCBrdW5pdF9kZXYgew0KIHN0
YXRpYyBjb25zdCBzdHJ1Y3QgZHJtX21vZGVfY29uZmlnX2Z1bmNzIGRybV9tb2RlX2NvbmZpZ19m
dW5jcyA9IHsNCiB9Ow0KIA0KLXN0YXRpYyBpbnQgZGV2X2luaXQoc3RydWN0IGt1bml0X3Jlc291
cmNlICpyZXMsIHZvaWQgKnB0cikNCisvKioNCisgKiBkcm1fa3VuaXRfaGVscGVyX2FsbG9jX2Rl
dmljZSAtIEFsbG9jYXRlIGEgbW9jayBkZXZpY2UgZm9yIGEgS1VuaXQgdGVzdA0KKyAqIEB0ZXN0
OiBUaGUgdGVzdCBjb250ZXh0IG9iamVjdA0KKyAqDQorICogVGhpcyBhbGxvY2F0ZXMgYSBmYWtl
IHN0cnVjdCAmZGV2aWNlIHRvIGNyZWF0ZSBhIG1vY2sgZm9yIGEgS1VuaXQNCisgKiB0ZXN0Lg0K
KyAqDQorICogQ2FsbGVycyBuZWVkIHRvIG1ha2Ugc3VyZSBkcm1fa3VuaXRfaGVscGVyX2ZyZWVf
ZGV2aWNlKCkgb24gdGhlDQorICogZGV2aWNlIHdoZW4gZG9uZS4NCisgKg0KKyAqIFJldHVybnM6
DQorICogQSBwb2ludGVyIHRvIHRoZSBuZXcgZGV2aWNlLCBvciBhbiBFUlJfUFRSKCkgb3RoZXJ3
aXNlLg0KKyAqLw0KK3N0cnVjdCBkZXZpY2UgKmRybV9rdW5pdF9oZWxwZXJfYWxsb2NfZGV2aWNl
KHN0cnVjdCBrdW5pdCAqdGVzdCkNCiB7DQotCWNoYXIgKm5hbWUgPSBwdHI7DQotCXN0cnVjdCBk
ZXZpY2UgKmRldjsNCi0NCi0JZGV2ID0gcm9vdF9kZXZpY2VfcmVnaXN0ZXIobmFtZSk7DQotCWlm
IChJU19FUlIoZGV2KSkNCi0JCXJldHVybiBQVFJfRVJSKGRldik7DQotDQotCXJlcy0+ZGF0YSA9
IGRldjsNCi0JcmV0dXJuIDA7DQorCXJldHVybiByb290X2RldmljZV9yZWdpc3RlcihLVU5JVF9E
RVZJQ0VfTkFNRSk7DQogfQ0KK0VYUE9SVF9TWU1CT0xfR1BMKGRybV9rdW5pdF9oZWxwZXJfYWxs
b2NfZGV2aWNlKTsNCiANCi1zdGF0aWMgdm9pZCBkZXZfZnJlZShzdHJ1Y3Qga3VuaXRfcmVzb3Vy
Y2UgKnJlcykNCisvKioNCisgKiBkcm1fa3VuaXRfaGVscGVyX2ZyZWVfZGV2aWNlIC0gRnJlZXMg
YSBtb2NrIGRldmljZQ0KKyAqIEB0ZXN0OiBUaGUgdGVzdCBjb250ZXh0IG9iamVjdA0KKyAqIEBk
ZXY6IFRoZSBkZXZpY2UgdG8gZnJlZQ0KKyAqDQorICogRnJlZXMgYSBkZXZpY2UgYWxsb2NhdGVk
IHdpdGggZHJtX2t1bml0X2hlbHBlcl9hbGxvY19kZXZpY2UoKS4NCisgKi8NCit2b2lkIGRybV9r
dW5pdF9oZWxwZXJfZnJlZV9kZXZpY2Uoc3RydWN0IGt1bml0ICp0ZXN0LCBzdHJ1Y3QgZGV2aWNl
ICpkZXYpDQogew0KLQlzdHJ1Y3QgZGV2aWNlICpkZXYgPSByZXMtPmRhdGE7DQotDQogCXJvb3Rf
ZGV2aWNlX3VucmVnaXN0ZXIoZGV2KTsNCiB9DQorRVhQT1JUX1NZTUJPTF9HUEwoZHJtX2t1bml0
X2hlbHBlcl9mcmVlX2RldmljZSk7DQogDQogLyoqDQogICogZHJtX2t1bml0X2hlbHBlcl9hbGxv
Y19kcm1fZGV2aWNlIC0gQWxsb2NhdGVzIGEgbW9jayBEUk0gZGV2aWNlIGZvciBLVW5pdCB0ZXN0
cw0KICAqIEB0ZXN0OiBUaGUgdGVzdCBjb250ZXh0IG9iamVjdA0KKyAqIEBkZXY6IFRoZSBwYXJl
bnQgZGV2aWNlIG9iamVjdA0KICAqIEBmZWF0dXJlczogTW9ja2VkIERSTSBkZXZpY2UgZHJpdmVy
IGZlYXR1cmVzDQogICoNCi0gKiBUaGlzIGZ1bmN0aW9uIGFsbG9jYXRlcyBhIG5ldyBzdHJ1Y3Qg
JmRldmljZSwgY3JlYXRlcyBhIHN0cnVjdA0KLSAqICZkcm1fZHJpdmVyIGFuZCB3aWxsIGNyZWF0
ZSBhIHN0cnVjdCAmZHJtX2RldmljZSB1c2luZyBib3RoLg0KKyAqIFRoaXMgZnVuY3Rpb24gY3Jl
YXRlcyBhIHN0cnVjdCAmZHJtX2RyaXZlciBhbmQgd2lsbCBjcmVhdGUgYSBzdHJ1Y3QNCisgKiAm
ZHJtX2RldmljZSBmcm9tIEBkZXYgYW5kIHRoYXQgZHJpdmVyLg0KICAqDQotICogVGhlIGRldmlj
ZSBhbmQgZHJpdmVyIGFyZSB0aWVkIHRvIHRoZSBAdGVzdCBjb250ZXh0IGFuZCB3aWxsIGdldA0K
LSAqIGNsZWFuZWQgYXQgdGhlIGVuZCBvZiB0aGUgdGVzdC4gVGhlIGRybV9kZXZpY2UgaXMgYWxs
b2NhdGVkIHRocm91Z2gNCisgKiBAZGV2IHNob3VsZCBiZSBhbGxvY2F0ZWQgdXNpbmcgZHJtX2t1
bml0X2hlbHBlcl9hbGxvY19kZXZpY2UoKS4NCisgKg0KKyAqIFRoZSBkcml2ZXIgaXMgdGllZCB0
byB0aGUgQHRlc3QgY29udGV4dCBhbmQgd2lsbCBnZXQgY2xlYW5lZCBhdCB0aGUNCisgKiBlbmQg
b2YgdGhlIHRlc3QuIFRoZSBkcm1fZGV2aWNlIGlzIGFsbG9jYXRlZCB0aHJvdWdoDQogICogZGV2
bV9kcm1fZGV2X2FsbG9jKCkgYW5kIHdpbGwgdGh1cyBiZSBmcmVlZCB0aHJvdWdoIGEgZGV2aWNl
LW1hbmFnZWQNCiAgKiByZXNvdXJjZS4NCiAgKg0KQEAgLTU0LDE5ICs2OSwxNCBAQCBzdGF0aWMg
dm9pZCBkZXZfZnJlZShzdHJ1Y3Qga3VuaXRfcmVzb3VyY2UgKnJlcykNCiAgKiBBIHBvaW50ZXIg
dG8gdGhlIG5ldyBkcm1fZGV2aWNlLCBvciBhbiBFUlJfUFRSKCkgb3RoZXJ3aXNlLg0KICAqLw0K
IHN0cnVjdCBkcm1fZGV2aWNlICoNCi1kcm1fa3VuaXRfaGVscGVyX2FsbG9jX2RybV9kZXZpY2Uo
c3RydWN0IGt1bml0ICp0ZXN0LA0KK2RybV9rdW5pdF9oZWxwZXJfYWxsb2NfZHJtX2RldmljZShz
dHJ1Y3Qga3VuaXQgKnRlc3QsIHN0cnVjdCBkZXZpY2UgKmRldiwNCiAJCQkJICB1MzIgZmVhdHVy
ZXMpDQogew0KIAlzdHJ1Y3Qga3VuaXRfZGV2ICprZGV2Ow0KIAlzdHJ1Y3QgZHJtX2RldmljZSAq
ZHJtOw0KIAlzdHJ1Y3QgZHJtX2RyaXZlciAqZHJpdmVyOw0KLQlzdHJ1Y3QgZGV2aWNlICpkZXY7
DQogCWludCByZXQ7DQogDQotCWRldiA9IGt1bml0X2FsbG9jX3Jlc291cmNlKHRlc3QsIGRldl9p
bml0LCBkZXZfZnJlZSwgR0ZQX0tFUk5FTCwgS1VOSVRfREVWSUNFX05BTUUpOw0KLQlpZiAoIWRl
dikNCi0JCXJldHVybiBFUlJfUFRSKC1FTk9NRU0pOw0KLQ0KIAlkcml2ZXIgPSBrdW5pdF9remFs
bG9jKHRlc3QsIHNpemVvZigqZHJpdmVyKSwgR0ZQX0tFUk5FTCk7DQogCWlmICghZHJpdmVyKQ0K
IAkJcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3Rlc3RzL2RybV9tb2Rlc190ZXN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vdGVzdHMvZHJtX21vZGVz
X3Rlc3QuYw0KaW5kZXggMzU5NjVhZDg2MTg4Li5kMWU5ZjNjMDQzM2EgMTAwNjQ0DQotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vdGVzdHMvZHJtX21vZGVzX3Rlc3QuYw0KKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3Rlc3RzL2RybV9tb2Rlc190ZXN0LmMNCkBAIC0xMyw2ICsxMyw3IEBADQogDQogc3RydWN0
IGRybV90ZXN0X21vZGVzX3ByaXYgew0KIAlzdHJ1Y3QgZHJtX2RldmljZSAqZHJtOw0KKwlzdHJ1
Y3QgZGV2aWNlICpkZXY7DQogfTsNCiANCiBzdGF0aWMgaW50IGRybV90ZXN0X21vZGVzX2luaXQo
c3RydWN0IGt1bml0ICp0ZXN0KQ0KQEAgLTIyLDcgKzIzLDExIEBAIHN0YXRpYyBpbnQgZHJtX3Rl
c3RfbW9kZXNfaW5pdChzdHJ1Y3Qga3VuaXQgKnRlc3QpDQogCXByaXYgPSBrdW5pdF9remFsbG9j
KHRlc3QsIHNpemVvZigqcHJpdiksIEdGUF9LRVJORUwpOw0KIAlLVU5JVF9BU1NFUlRfTk9UX05V
TEwodGVzdCwgcHJpdik7DQogDQotCXByaXYtPmRybSA9IGRybV9rdW5pdF9oZWxwZXJfYWxsb2Nf
ZHJtX2RldmljZSh0ZXN0LCBEUklWRVJfTU9ERVNFVCk7DQorCXByaXYtPmRldiA9IGRybV9rdW5p
dF9oZWxwZXJfYWxsb2NfZGV2aWNlKHRlc3QpOw0KKwlLVU5JVF9BU1NFUlRfTk9UX0VSUl9PUl9O
VUxMKHRlc3QsIHByaXYtPmRldik7DQorDQorCXByaXYtPmRybSA9IGRybV9rdW5pdF9oZWxwZXJf
YWxsb2NfZHJtX2RldmljZSh0ZXN0LCBwcml2LT5kZXYsDQorCQkJCQkJICAgICAgRFJJVkVSX01P
REVTRVQpOw0KIAlLVU5JVF9BU1NFUlRfTk9UX0VSUl9PUl9OVUxMKHRlc3QsIHByaXYtPmRybSk7
DQogDQogCXRlc3QtPnByaXYgPSBwcml2Ow0KQEAgLTMwLDYgKzM1LDEzIEBAIHN0YXRpYyBpbnQg
ZHJtX3Rlc3RfbW9kZXNfaW5pdChzdHJ1Y3Qga3VuaXQgKnRlc3QpDQogCXJldHVybiAwOw0KIH0N
CiANCitzdGF0aWMgdm9pZCBkcm1fdGVzdF9tb2Rlc19leGl0KHN0cnVjdCBrdW5pdCAqdGVzdCkN
Cit7DQorCXN0cnVjdCBkcm1fdGVzdF9tb2Rlc19wcml2ICpwcml2ID0gdGVzdC0+cHJpdjsNCisN
CisJZHJtX2t1bml0X2hlbHBlcl9mcmVlX2RldmljZSh0ZXN0LCBwcml2LT5kZXYpOw0KK30NCisN
CiBzdGF0aWMgdm9pZCBkcm1fdGVzdF9tb2Rlc19hbmFsb2dfdHZfbnRzY180ODBpKHN0cnVjdCBr
dW5pdCAqdGVzdCkNCiB7DQogCXN0cnVjdCBkcm1fdGVzdF9tb2Rlc19wcml2ICpwcml2ID0gdGVz
dC0+cHJpdjsNCkBAIC0xMzUsNiArMTQ3LDcgQEAgc3RhdGljIHN0cnVjdCBrdW5pdF9jYXNlIGRy
bV9tb2Rlc19hbmFsb2dfdHZfdGVzdHNbXSA9IHsNCiBzdGF0aWMgc3RydWN0IGt1bml0X3N1aXRl
IGRybV9tb2Rlc19hbmFsb2dfdHZfdGVzdF9zdWl0ZSA9IHsNCiAJLm5hbWUgPSAiZHJtX21vZGVz
X2FuYWxvZ190diIsDQogCS5pbml0ID0gZHJtX3Rlc3RfbW9kZXNfaW5pdCwNCisJLmV4aXQgPSBk
cm1fdGVzdF9tb2Rlc19leGl0LA0KIAkudGVzdF9jYXNlcyA9IGRybV9tb2Rlc19hbmFsb2dfdHZf
dGVzdHMsDQogfTsNCiANCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdGVzdHMvZHJtX3By
b2JlX2hlbHBlcl90ZXN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vdGVzdHMvZHJtX3Byb2JlX2hlbHBl
cl90ZXN0LmMNCmluZGV4IGJlNjFhOTJiNzlkMi4uNjNhM2JkMWE2ZTRkIDEwMDY0NA0KLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3Rlc3RzL2RybV9wcm9iZV9oZWxwZXJfdGVzdC5jDQorKysgYi9kcml2
ZXJzL2dwdS9kcm0vdGVzdHMvZHJtX3Byb2JlX2hlbHBlcl90ZXN0LmMNCkBAIC0xNyw2ICsxNyw3
IEBADQogDQogc3RydWN0IGRybV9wcm9iZV9oZWxwZXJfdGVzdF9wcml2IHsNCiAJc3RydWN0IGRy
bV9kZXZpY2UgKmRybTsNCisJc3RydWN0IGRldmljZSAqZGV2Ow0KIAlzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciBjb25uZWN0b3I7DQogfTsNCiANCkBAIC0zOSw3ICs0MCwxMCBAQCBzdGF0aWMgaW50IGRy
bV9wcm9iZV9oZWxwZXJfdGVzdF9pbml0KHN0cnVjdCBrdW5pdCAqdGVzdCkNCiAJS1VOSVRfQVNT
RVJUX05PVF9OVUxMKHRlc3QsIHByaXYpOw0KIAl0ZXN0LT5wcml2ID0gcHJpdjsNCiANCi0JcHJp
di0+ZHJtID0gZHJtX2t1bml0X2hlbHBlcl9hbGxvY19kcm1fZGV2aWNlKHRlc3QsDQorCXByaXYt
PmRldiA9IGRybV9rdW5pdF9oZWxwZXJfYWxsb2NfZGV2aWNlKHRlc3QpOw0KKwlLVU5JVF9BU1NF
UlRfTk9UX0VSUl9PUl9OVUxMKHRlc3QsIHByaXYtPmRldik7DQorDQorCXByaXYtPmRybSA9IGRy
bV9rdW5pdF9oZWxwZXJfYWxsb2NfZHJtX2RldmljZSh0ZXN0LCBwcml2LT5kZXYsDQogCQkJCQkJ
ICAgICAgRFJJVkVSX01PREVTRVQgfCBEUklWRVJfQVRPTUlDKTsNCiAJS1VOSVRfQVNTRVJUX05P
VF9FUlJfT1JfTlVMTCh0ZXN0LCBwcml2LT5kcm0pOw0KIA0KQEAgLTU1LDYgKzU5LDEzIEBAIHN0
YXRpYyBpbnQgZHJtX3Byb2JlX2hlbHBlcl90ZXN0X2luaXQoc3RydWN0IGt1bml0ICp0ZXN0KQ0K
IAlyZXR1cm4gMDsNCiB9DQogDQorc3RhdGljIHZvaWQgZHJtX3Byb2JlX2hlbHBlcl90ZXN0X2V4
aXQoc3RydWN0IGt1bml0ICp0ZXN0KQ0KK3sNCisJc3RydWN0IGRybV9wcm9iZV9oZWxwZXJfdGVz
dF9wcml2ICpwcml2ID0gdGVzdC0+cHJpdjsNCisNCisJZHJtX2t1bml0X2hlbHBlcl9mcmVlX2Rl
dmljZSh0ZXN0LCBwcml2LT5kZXYpOw0KK30NCisNCiB0eXBlZGVmIHN0cnVjdCBkcm1fZGlzcGxh
eV9tb2RlICooKmV4cGVjdGVkX21vZGVfZnVuY190KShzdHJ1Y3QgZHJtX2RldmljZSAqKTsNCiAN
CiBzdHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfdHZfZ2V0X21vZGVzX3Rlc3Qgew0KQEAgLTE5
NSw2ICsyMDYsNyBAQCBzdGF0aWMgc3RydWN0IGt1bml0X2Nhc2UgZHJtX3Rlc3RfY29ubmVjdG9y
X2hlbHBlcl90dl9nZXRfbW9kZXNfdGVzdHNbXSA9IHsNCiBzdGF0aWMgc3RydWN0IGt1bml0X3N1
aXRlIGRybV90ZXN0X2Nvbm5lY3Rvcl9oZWxwZXJfdHZfZ2V0X21vZGVzX3N1aXRlID0gew0KIAku
bmFtZSA9ICJkcm1fY29ubmVjdG9yX2hlbHBlcl90dl9nZXRfbW9kZXMiLA0KIAkuaW5pdCA9IGRy
bV9wcm9iZV9oZWxwZXJfdGVzdF9pbml0LA0KKwkuZXhpdCA9IGRybV9wcm9iZV9oZWxwZXJfdGVz
dF9leGl0LA0KIAkudGVzdF9jYXNlcyA9IGRybV90ZXN0X2Nvbm5lY3Rvcl9oZWxwZXJfdHZfZ2V0
X21vZGVzX3Rlc3RzLA0KIH07DQogDQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2t1bml0
X2hlbHBlcnMuaCBiL2luY2x1ZGUvZHJtL2RybV9rdW5pdF9oZWxwZXJzLmgNCmluZGV4IDZjMTJi
MTQyNmJhMC4uYjQyNzdmZTkyYzM4IDEwMDY0NA0KLS0tIGEvaW5jbHVkZS9kcm0vZHJtX2t1bml0
X2hlbHBlcnMuaA0KKysrIGIvaW5jbHVkZS9kcm0vZHJtX2t1bml0X2hlbHBlcnMuaA0KQEAgLTYs
OCArNiwxMSBAQA0KIHN0cnVjdCBkcm1fZGV2aWNlOw0KIHN0cnVjdCBrdW5pdDsNCiANCitzdHJ1
Y3QgZGV2aWNlICpkcm1fa3VuaXRfaGVscGVyX2FsbG9jX2RldmljZShzdHJ1Y3Qga3VuaXQgKnRl
c3QpOw0KK3ZvaWQgZHJtX2t1bml0X2hlbHBlcl9mcmVlX2RldmljZShzdHJ1Y3Qga3VuaXQgKnRl
c3QsIHN0cnVjdCBkZXZpY2UgKmRldik7DQorDQogc3RydWN0IGRybV9kZXZpY2UgKg0KLWRybV9r
dW5pdF9oZWxwZXJfYWxsb2NfZHJtX2RldmljZShzdHJ1Y3Qga3VuaXQgKnRlc3QsDQorZHJtX2t1
bml0X2hlbHBlcl9hbGxvY19kcm1fZGV2aWNlKHN0cnVjdCBrdW5pdCAqdGVzdCwgc3RydWN0IGRl
dmljZSAqZGV2LA0KIAkJCQkgIHUzMiBmZWF0dXJlcyk7DQogDQogI2VuZGlmIC8vIERSTV9LVU5J
VF9IRUxQRVJTX0hfDQoNCi0tIA0KYjQgMC4xMC4xDQpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdCAtLSBsaW5h
cm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKVG8gdW5zdWJzY3JpYmUgc2VuZCBhbiBlbWFpbCB0
byBsaW5hcm8tbW0tc2lnLWxlYXZlQGxpc3RzLmxpbmFyby5vcmcK
