Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 0BDF397E839
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 23 Sep 2024 11:09:19 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id CD66343C1E
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 23 Sep 2024 09:09:17 +0000 (UTC)
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
	by lists.linaro.org (Postfix) with ESMTP id 767353F533
	for <linaro-mm-sig@lists.linaro.org>; Mon, 23 Sep 2024 09:07:19 +0000 (UTC)
Authentication-Results: lists.linaro.org;
	dkim=none;
	dmarc=pass (policy=none) header.from=arm.com;
	spf=pass (lists.linaro.org: domain of steven.price@arm.com designates 217.140.110.172 as permitted sender) smtp.mailfrom=steven.price@arm.com
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
	by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 81EC3FEC;
	Mon, 23 Sep 2024 02:07:48 -0700 (PDT)
Received: from [10.57.79.18] (unknown [10.57.79.18])
	by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 1471D3F64C;
	Mon, 23 Sep 2024 02:07:15 -0700 (PDT)
Message-ID: <07c8c715-4016-4963-8544-2e9cc1a8208b@arm.com>
Date: Mon, 23 Sep 2024 10:07:14 +0100
MIME-Version: 1.0
User-Agent: Mozilla Thunderbird
To: =?UTF-8?Q?Adri=C3=A1n_Larumbe?= <adrian.larumbe@collabora.com>,
 Boris Brezillon <boris.brezillon@collabora.com>,
 Liviu Dudau <liviu.dudau@arm.com>,
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Maxime Ripard <mripard@kernel.org>, Thomas Zimmermann <tzimmermann@suse.de>,
 David Airlie <airlied@gmail.com>, Simona Vetter <simona@ffwll.ch>,
 Sumit Semwal <sumit.semwal@linaro.org>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
References: <20240920234436.207563-1-adrian.larumbe@collabora.com>
 <20240920234436.207563-2-adrian.larumbe@collabora.com>
From: Steven Price <steven.price@arm.com>
Content-Language: en-GB
In-Reply-To: <20240920234436.207563-2-adrian.larumbe@collabora.com>
X-Rspamd-Server: lists.linaro.org
X-Rspamd-Queue-Id: 767353F533
X-Spamd-Bar: ---
X-Spamd-Result: default: False [-3.70 / 15.00];
	BAYES_HAM(-3.00)[100.00%];
	DMARC_POLICY_ALLOW(-0.50)[arm.com,none];
	R_SPF_ALLOW(-0.20)[+ip4:217.140.96.0/20];
	MIME_GOOD(-0.10)[text/plain];
	RCVD_NO_TLS_LAST(0.10)[];
	RCVD_COUNT_TWO(0.00)[2];
	ASN(0.00)[asn:28939, ipnet:217.140.110.0/24, country:GB];
	ARC_NA(0.00)[];
	MIME_TRACE(0.00)[0:+];
	RCPT_COUNT_TWELVE(0.00)[16];
	TO_MATCH_ENVRCPT_SOME(0.00)[];
	RCVD_VIA_SMTP_AUTH(0.00)[];
	FREEMAIL_TO(0.00)[collabora.com,arm.com,linux.intel.com,kernel.org,suse.de,gmail.com,ffwll.ch,linaro.org,amd.com];
	FROM_EQ_ENVFROM(0.00)[];
	FROM_HAS_DN(0.00)[];
	R_DKIM_NA(0.00)[];
	TO_DN_SOME(0.00)[];
	MID_RHS_MATCH_FROM(0.00)[]
X-Rspamd-Action: no action
Message-ID-Hash: 5Q6MYVV2FAKFKSON4WDFZD3TYIRLMXZD
X-Message-ID-Hash: 5Q6MYVV2FAKFKSON4WDFZD3TYIRLMXZD
X-MailFrom: steven.price@arm.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
CC: kernel@collabora.com, dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org, linux-media@vger.kernel.org, linaro-mm-sig@lists.linaro.org, Boris Brezillon <boris.brezillon@collabora.com>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] Re: [PATCH v7 1/5] drm/panthor: introduce job cycle and timestamp accounting
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/5Q6MYVV2FAKFKSON4WDFZD3TYIRLMXZD/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

T24gMjEvMDkvMjAyNCAwMDo0MywgQWRyacOhbiBMYXJ1bWJlIHdyb3RlOg0KPiBFbmFibGUgY2Fs
Y3VsYXRpb25zIG9mIGpvYiBzdWJtaXNzaW9uIHRpbWVzIGluIGNsb2NrIGN5Y2xlcyBhbmQgd2Fs
bA0KPiB0aW1lLiBUaGlzIGlzIGRvbmUgYnkgZXhwYW5kaW5nIHRoZSBib2lsZXJwbGF0ZSBjb21t
YW5kIHN0cmVhbSB3aGVuIHJ1bm5pbmcNCj4gYSBqb2IgdG8gaW5jbHVkZSBpbnN0cnVjdGlvbnMg
dGhhdCBjb21wdXRlIHNhaWQgdGltZXMgcmlnaHQgYmVmb3JlIGFuZA0KPiBhZnRlciBhIHVzZXIg
Q1MuDQo+IA0KPiBBIHNlcGFyYXRlIGtlcm5lbCBCTyBpcyBjcmVhdGVkIHBlciBxdWV1ZSB0byBz
dG9yZSB0aG9zZSB2YWx1ZXMuIEpvYnMgY2FuDQo+IGFjY2VzcyB0aGVpciBzYW1wbGVkIGRhdGEg
dGhyb3VnaCBhbiBpbmRleCBkaWZmZXJlbnQgZnJvbSB0aGF0IG9mIHRoZQ0KPiBxdWV1ZSdzIHJp
bmdidWZmZXIuIFRoZSByZWFzb24gZm9yIHRoaXMgaXMgc2F2aW5nIG1lbW9yeSBvbiB0aGUgcHJv
ZmlsaW5nDQo+IGluZm9ybWF0aW9uIGtlcm5lbCBCTywgc2luY2UgdGhlIGFtb3VudCBvZiBzaW11
bHRhbmVvdXMgcHJvZmlsZWQgam9icyB3ZQ0KPiBjYW4gd3JpdGUgaW50byB0aGUgcXVldWUncyBy
aW5nYnVmZmVyIG1pZ2h0IGJlIG11Y2ggc21hbGxlciB0aGFuIGZvcg0KPiByZWd1bGFyIGpvYnMs
IGFzIHRoZSBmb3JtZXIgdGFrZSBtb3JlIENTRiBpbnN0cnVjdGlvbnMuDQo+IA0KPiBUaGlzIGNv
bW1pdCBpcyBkb25lIGluIHByZXBhcmF0aW9uIGZvciBlbmFibGluZyBEUk0gZmRpbmZvIHN1cHBv
cnQgaW4gdGhlDQo+IFBhbnRob3IgZHJpdmVyLCB3aGljaCBkZXBlbmRzIG9uIHRoZSBudW1iZXJz
IGNhbGN1bGF0ZWQgaGVyZWluLg0KPiANCj4gQSBwcm9maWxlIG1vZGUgbWFzayBoYXMgYmVlbiBh
ZGRlZCB0aGF0IHdpbGwgaW4gYSBmdXR1cmUgY29tbWl0IGFsbG93IFVNIHRvDQo+IHRvZ2dsZSBw
ZXJmb3JtYW5jZSBtZXRyaWMgc2FtcGxpbmcgYmVoYXZpb3VyLCB3aGljaCBpcyBkaXNhYmxlZCBi
eSBkZWZhdWx0DQo+IHRvIHNhdmUgcG93ZXIuIFdoZW4gYSByaW5nYnVmZmVyIENTIGlzIGNvbnN0
cnVjdGVkLCB0aW1lc3RhbXAgYW5kIGN5Y2xpbmcNCj4gc2FtcGxpbmcgaW5zdHJ1Y3Rpb25zIGFy
ZSBhZGRlZCBkZXBlbmRpbmcgb24gdGhlIGVuYWJsZWQgZmxhZ3MgaW4gdGhlDQo+IHByb2ZpbGlu
ZyBtYXNrLg0KPiANCj4gQSBoZWxwZXIgd2FzIHByb3ZpZGVkIHRoYXQgY2FsY3VsYXRlcyB0aGUg
bnVtYmVyIG9mIGluc3RydWN0aW9ucyBmb3IgYQ0KPiBnaXZlbiBzZXQgb2YgZW5hYmxlbWVudCBt
YXNrLCBhbmQgdGhlc2UgYXJlIHBhc3NlZCBhcyB0aGUgbnVtYmVyIG9mIGNyZWRpdHMNCj4gd2hl
biBpbml0aWFsaXNpbmcgYSBEUk0gc2NoZWR1bGVyIGpvYi4NCj4gDQo+IFNpZ25lZC1vZmYtYnk6
IEFkcmnDoW4gTGFydW1iZSA8YWRyaWFuLmxhcnVtYmVAY29sbGFib3JhLmNvbT4NCj4gUmV2aWV3
ZWQtYnk6IEJvcmlzIEJyZXppbGxvbiA8Ym9yaXMuYnJlemlsbG9uQGNvbGxhYm9yYS5jb20+DQo+
IFJldmlld2VkLWJ5OiBMaXZpdSBEdWRhdSA8bGl2aXUuZHVkYXVAYXJtLmNvbT4NCg0KSSB0aGlu
ayBqdXN0IG9uZSBidWcgcmVtYWluaW5nIC0gc2VlIGJlbG93Li4uDQoNCj4gLS0tDQo+ICBkcml2
ZXJzL2dwdS9kcm0vcGFudGhvci9wYW50aG9yX2RldmljZS5oIHwgIDIyICsrDQo+ICBkcml2ZXJz
L2dwdS9kcm0vcGFudGhvci9wYW50aG9yX3NjaGVkLmMgIHwgMzI4ICsrKysrKysrKysrKysrKysr
KystLS0tDQo+ICAyIGZpbGVzIGNoYW5nZWQsIDMwMSBpbnNlcnRpb25zKCspLCA0OSBkZWxldGlv
bnMoLSkNCj4gDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcGFudGhvci9wYW50aG9y
X2RldmljZS5oIGIvZHJpdmVycy9ncHUvZHJtL3BhbnRob3IvcGFudGhvcl9kZXZpY2UuaA0KPiBp
bmRleCBlMzg4YzA0NzJiYTcuLmE0OGUzMGQwYWYzMCAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9n
cHUvZHJtL3BhbnRob3IvcGFudGhvcl9kZXZpY2UuaA0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0v
cGFudGhvci9wYW50aG9yX2RldmljZS5oDQo+IEBAIC02Niw2ICs2NiwyNSBAQCBzdHJ1Y3QgcGFu
dGhvcl9pcnEgew0KPiAgCWF0b21pY190IHN1c3BlbmRlZDsNCj4gIH07DQo+ICANCj4gKy8qKg0K
PiArICogZW51bSBwYW50aG9yX2RldmljZV9wcm9maWxpbmdfbW9kZSAtIFByb2ZpbGluZyBzdGF0
ZQ0KPiArICovDQo+ICtlbnVtIHBhbnRob3JfZGV2aWNlX3Byb2ZpbGluZ19mbGFncyB7DQo+ICsJ
LyoqIEBQQU5USE9SX0RFVklDRV9QUk9GSUxJTkdfRElTQUJMRUQ6IFByb2ZpbGluZyBpcyBkaXNh
YmxlZC4gKi8NCj4gKwlQQU5USE9SX0RFVklDRV9QUk9GSUxJTkdfRElTQUJMRUQgPSAwLA0KPiAr
DQo+ICsJLyoqIEBQQU5USE9SX0RFVklDRV9QUk9GSUxJTkdfQ1lDTEVTOiBTYW1wbGluZyBqb2Ig
Y3ljbGVzLiAqLw0KPiArCVBBTlRIT1JfREVWSUNFX1BST0ZJTElOR19DWUNMRVMgPSBCSVQoMCks
DQo+ICsNCj4gKwkvKiogQFBBTlRIT1JfREVWSUNFX1BST0ZJTElOR19USU1FU1RBTVA6IFNhbXBs
aW5nIGpvYiB0aW1lc3RhbXAuICovDQo+ICsJUEFOVEhPUl9ERVZJQ0VfUFJPRklMSU5HX1RJTUVT
VEFNUCA9IEJJVCgxKSwNCj4gKw0KPiArCS8qKiBAUEFOVEhPUl9ERVZJQ0VfUFJPRklMSU5HX0FM
TDogU2FtcGxpbmcgZXZlcnl0aGluZy4gKi8NCj4gKwlQQU5USE9SX0RFVklDRV9QUk9GSUxJTkdf
QUxMID0NCj4gKwlQQU5USE9SX0RFVklDRV9QUk9GSUxJTkdfQ1lDTEVTIHwNCj4gKwlQQU5USE9S
X0RFVklDRV9QUk9GSUxJTkdfVElNRVNUQU1QLA0KPiArfTsNCj4gKw0KPiAgLyoqDQo+ICAgKiBz
dHJ1Y3QgcGFudGhvcl9kZXZpY2UgLSBQYW50aG9yIGRldmljZQ0KPiAgICovDQo+IEBAIC0xNjIs
NiArMTgxLDkgQEAgc3RydWN0IHBhbnRob3JfZGV2aWNlIHsNCj4gIAkJICovDQo+ICAJCXN0cnVj
dCBwYWdlICpkdW1teV9sYXRlc3RfZmx1c2g7DQo+ICAJfSBwbTsNCj4gKw0KPiArCS8qKiBAcHJv
ZmlsZV9tYXNrOiBVc2VyLXNldCBwcm9maWxpbmcgZmxhZ3MgZm9yIGpvYiBhY2NvdW50aW5nLiAq
Lw0KPiArCXUzMiBwcm9maWxlX21hc2s7DQo+ICB9Ow0KPiAgDQo+ICAvKioNCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9wYW50aG9yL3BhbnRob3Jfc2NoZWQuYyBiL2RyaXZlcnMvZ3B1
L2RybS9wYW50aG9yL3BhbnRob3Jfc2NoZWQuYw0KPiBpbmRleCA0MmFmZGYwZGRiN2UuLjZkYTVj
M2QwMDE1ZSAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3BhbnRob3IvcGFudGhvcl9z
Y2hlZC5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9wYW50aG9yL3BhbnRob3Jfc2NoZWQuYw0K
PiBAQCAtOTMsNiArOTMsOSBAQA0KPiAgI2RlZmluZSBNSU5fQ1NHUwkJCQkzDQo+ICAjZGVmaW5l
IE1BWF9DU0dfUFJJTwkJCQkweGYNCj4gIA0KPiArI2RlZmluZSBOVU1fSU5TVFJTX1BFUl9DQUNI
RV9MSU5FCQkoNjQgLyBzaXplb2YodTY0KSkNCj4gKyNkZWZpbmUgTUFYX0lOU1RSU19QRVJfSk9C
CQkJMjQNCj4gKw0KPiAgc3RydWN0IHBhbnRob3JfZ3JvdXA7DQo+ICANCj4gIC8qKg0KPiBAQCAt
NDc2LDYgKzQ3OSwxOCBAQCBzdHJ1Y3QgcGFudGhvcl9xdWV1ZSB7DQo+ICAJCSAqLw0KPiAgCQlz
dHJ1Y3QgbGlzdF9oZWFkIGluX2ZsaWdodF9qb2JzOw0KPiAgCX0gZmVuY2VfY3R4Ow0KPiArDQo+
ICsJLyoqIEBwcm9maWxpbmc6IEpvYiBwcm9maWxpbmcgZGF0YSBzbG90cyBhbmQgYWNjZXNzIGlu
Zm9ybWF0aW9uLiAqLw0KPiArCXN0cnVjdCB7DQo+ICsJCS8qKiBAc2xvdHM6IEtlcm5lbCBCTyBo
b2xkaW5nIHRoZSBzbG90cy4gKi8NCj4gKwkJc3RydWN0IHBhbnRob3Jfa2VybmVsX2JvICpzbG90
czsNCj4gKw0KPiArCQkvKiogQHNsb3RfY291bnQ6IE51bWJlciBvZiBqb2JzIHJpbmdidWZmZXIg
Y2FuIGhvbGQgYXQgb25jZS4gKi8NCj4gKwkJdTMyIHNsb3RfY291bnQ7DQo+ICsNCj4gKwkJLyoq
IEBzZXFubzogSW5kZXggb2YgdGhlIG5leHQgYXZhaWxhYmxlIHByb2ZpbGluZyBpbmZvcm1hdGlv
biBzbG90LiAqLw0KPiArCQl1MzIgc2Vxbm87DQo+ICsJfSBwcm9maWxpbmc7DQo+ICB9Ow0KPiAg
DQo+ICAvKioNCj4gQEAgLTY2MSw2ICs2NzYsMTggQEAgc3RydWN0IHBhbnRob3JfZ3JvdXAgew0K
PiAgCXN0cnVjdCBsaXN0X2hlYWQgd2FpdF9ub2RlOw0KPiAgfTsNCj4gIA0KPiArc3RydWN0IHBh
bnRob3Jfam9iX3Byb2ZpbGluZ19kYXRhIHsNCj4gKwlzdHJ1Y3Qgew0KPiArCQl1NjQgYmVmb3Jl
Ow0KPiArCQl1NjQgYWZ0ZXI7DQo+ICsJfSBjeWNsZXM7DQo+ICsNCj4gKwlzdHJ1Y3Qgew0KPiAr
CQl1NjQgYmVmb3JlOw0KPiArCQl1NjQgYWZ0ZXI7DQo+ICsJfSB0aW1lOw0KPiArfTsNCj4gKw0K
PiAgLyoqDQo+ICAgKiBncm91cF9xdWV1ZV93b3JrKCkgLSBRdWV1ZSBhIGdyb3VwIHdvcmsNCj4g
ICAqIEBncm91cDogR3JvdXAgdG8gcXVldWUgdGhlIHdvcmsgZm9yLg0KPiBAQCAtNzc0LDYgKzgw
MSwxNSBAQCBzdHJ1Y3QgcGFudGhvcl9qb2Igew0KPiAgDQo+ICAJLyoqIEBkb25lX2ZlbmNlOiBG
ZW5jZSBzaWduYWxlZCB3aGVuIHRoZSBqb2IgaXMgZmluaXNoZWQgb3IgY2FuY2VsbGVkLiAqLw0K
PiAgCXN0cnVjdCBkbWFfZmVuY2UgKmRvbmVfZmVuY2U7DQo+ICsNCj4gKwkvKiogQHByb2ZpbGlu
ZzogSm9iIHByb2ZpbGluZyBpbmZvcm1hdGlvbi4gKi8NCj4gKwlzdHJ1Y3Qgew0KPiArCQkvKiog
QG1hc2s6IEN1cnJlbnQgZGV2aWNlIGpvYiBwcm9maWxpbmcgZW5hYmxlbWVudCBiaXRtYXNrLiAq
Lw0KPiArCQl1MzIgbWFzazsNCj4gKw0KPiArCQkvKiogQHNsb3Q6IEpvYiBpbmRleCBpbiB0aGUg
cHJvZmlsaW5nIHNsb3RzIEJPLiAqLw0KPiArCQl1MzIgc2xvdDsNCj4gKwl9IHByb2ZpbGluZzsN
Cj4gIH07DQo+ICANCj4gIHN0YXRpYyB2b2lkDQo+IEBAIC04MzgsNiArODc0LDcgQEAgc3RhdGlj
IHZvaWQgZ3JvdXBfZnJlZV9xdWV1ZShzdHJ1Y3QgcGFudGhvcl9ncm91cCAqZ3JvdXAsIHN0cnVj
dCBwYW50aG9yX3F1ZXVlICoNCj4gIA0KPiAgCXBhbnRob3Jfa2VybmVsX2JvX2Rlc3Ryb3kocXVl
dWUtPnJpbmdidWYpOw0KPiAgCXBhbnRob3Jfa2VybmVsX2JvX2Rlc3Ryb3kocXVldWUtPmlmYWNl
Lm1lbSk7DQo+ICsJcGFudGhvcl9rZXJuZWxfYm9fZGVzdHJveShxdWV1ZS0+cHJvZmlsaW5nLnNs
b3RzKTsNCj4gIA0KPiAgCS8qIFJlbGVhc2UgdGhlIGxhc3RfZmVuY2Ugd2Ugd2VyZSBob2xkaW5n
LCBpZiBhbnkuICovDQo+ICAJZG1hX2ZlbmNlX3B1dChxdWV1ZS0+ZmVuY2VfY3R4Lmxhc3RfZmVu
Y2UpOw0KPiBAQCAtMTk4Miw4ICsyMDE5LDYgQEAgdGlja19jdHhfaW5pdChzdHJ1Y3QgcGFudGhv
cl9zY2hlZHVsZXIgKnNjaGVkLA0KPiAgCX0NCj4gIH0NCj4gIA0KPiAtI2RlZmluZSBOVU1fSU5T
VFJTX1BFUl9TTE9UCQkxNg0KPiAtDQo+ICBzdGF0aWMgdm9pZA0KPiAgZ3JvdXBfdGVybV9wb3N0
X3Byb2Nlc3Npbmcoc3RydWN0IHBhbnRob3JfZ3JvdXAgKmdyb3VwKQ0KPiAgew0KPiBAQCAtMjgx
NSw2NSArMjg1MCwxOTIgQEAgc3RhdGljIHZvaWQgZ3JvdXBfc3luY191cGRfd29yayhzdHJ1Y3Qg
d29ya19zdHJ1Y3QgKndvcmspDQo+ICAJZ3JvdXBfcHV0KGdyb3VwKTsNCj4gIH0NCj4gIA0KPiAt
c3RhdGljIHN0cnVjdCBkbWFfZmVuY2UgKg0KPiAtcXVldWVfcnVuX2pvYihzdHJ1Y3QgZHJtX3Nj
aGVkX2pvYiAqc2NoZWRfam9iKQ0KPiArc3RydWN0IHBhbnRob3Jfam9iX3JpbmdidWZfaW5zdHJz
IHsNCj4gKwl1NjQgYnVmZmVyW01BWF9JTlNUUlNfUEVSX0pPQl07DQo+ICsJdTMyIGNvdW50Ow0K
PiArfTsNCj4gKw0KPiArc3RydWN0IHBhbnRob3Jfam9iX2luc3RyIHsNCj4gKwl1MzIgcHJvZmls
ZV9tYXNrOw0KPiArCXU2NCBpbnN0cjsNCj4gK307DQo+ICsNCj4gKyNkZWZpbmUgSk9CX0lOU1RS
KF9fcHJvZiwgX19pbnN0cikgXA0KPiArCXsgXA0KPiArCQkucHJvZmlsZV9tYXNrID0gX19wcm9m
LCBcDQo+ICsJCS5pbnN0ciA9IF9faW5zdHIsIFwNCj4gKwl9DQo+ICsNCj4gK3N0YXRpYyB2b2lk
DQo+ICtjb3B5X2luc3Ryc190b19yaW5nYnVmKHN0cnVjdCBwYW50aG9yX3F1ZXVlICpxdWV1ZSwN
Cj4gKwkJICAgICAgIHN0cnVjdCBwYW50aG9yX2pvYiAqam9iLA0KPiArCQkgICAgICAgc3RydWN0
IHBhbnRob3Jfam9iX3JpbmdidWZfaW5zdHJzICppbnN0cnMpDQo+ICt7DQo+ICsJdTY0IHJpbmdi
dWZfc2l6ZSA9IHBhbnRob3Jfa2VybmVsX2JvX3NpemUocXVldWUtPnJpbmdidWYpOw0KPiArCXU2
NCBzdGFydCA9IGpvYi0+cmluZ2J1Zi5zdGFydCAmIChyaW5nYnVmX3NpemUgLSAxKTsNCj4gKwl1
NjQgc2l6ZSwgd3JpdHRlbjsNCj4gKw0KPiArCS8qDQo+ICsJICogV2UgbmVlZCB0byB3cml0ZSBh
IHdob2xlIHNsb3QsIGluY2x1ZGluZyBhbnkgdHJhaWxpbmcgemVyb2VzDQo+ICsJICogdGhhdCBt
YXkgY29tZSBhdCB0aGUgZW5kIG9mIGl0LiBBbHNvLCBiZWNhdXNlIGluc3Rycy5idWZmZXIgaGFz
DQo+ICsJICogYmVlbiB6ZXJvLWluaXRpYWxpc2VkLCB0aGVyZSdzIG5vIG5lZWQgdG8gcGFkIGl0
IHdpdGggMCdzDQo+ICsJICovDQo+ICsJaW5zdHJzLT5jb3VudCA9IEFMSUdOKGluc3Rycy0+Y291
bnQsIE5VTV9JTlNUUlNfUEVSX0NBQ0hFX0xJTkUpOw0KPiArCXNpemUgPSBpbnN0cnMtPmNvdW50
ICogc2l6ZW9mKHU2NCk7DQo+ICsJV0FSTl9PTihzaXplID4gcmluZ2J1Zl9zaXplKTsNCj4gKwl3
cml0dGVuID0gbWluKHJpbmdidWZfc2l6ZSAtIHN0YXJ0LCBzaXplKTsNCj4gKw0KPiArCW1lbWNw
eShxdWV1ZS0+cmluZ2J1Zi0+a21hcCArIHN0YXJ0LCBpbnN0cnMtPmJ1ZmZlciwgd3JpdHRlbik7
DQo+ICsNCj4gKwlpZiAod3JpdHRlbiA8IHNpemUpDQo+ICsJCW1lbWNweShxdWV1ZS0+cmluZ2J1
Zi0+a21hcCwNCj4gKwkJICAgICAgICZpbnN0cnMtPmJ1ZmZlclt3cml0dGVuL3NpemVvZih1NjQp
XSwNCj4gKwkJICAgICAgIHNpemUgLSB3cml0dGVuKTsNCj4gK30NCj4gKw0KPiArc3RydWN0IHBh
bnRob3Jfam9iX2NzX3BhcmFtcyB7DQo+ICsJdTMyIHByb2ZpbGVfbWFzazsNCj4gKwl1NjQgYWRk
cl9yZWc7IHU2NCB2YWxfcmVnOw0KPiArCXU2NCBjeWNsZV9yZWc7IHU2NCB0aW1lX3JlZzsNCj4g
Kwl1NjQgc3luY19hZGRyOyB1NjQgdGltZXNfYWRkcjsNCj4gKwl1NjQgY3Nfc3RhcnQ7IHU2NCBj
c19zaXplOw0KPiArCXUzMiBsYXN0X2ZsdXNoOyB1MzIgd2FpdGFsbF9tYXNrOw0KPiArfTsNCj4g
Kw0KPiArc3RhdGljIHZvaWQNCj4gK2dldF9qb2JfY3NfcGFyYW1zKHN0cnVjdCBwYW50aG9yX2pv
YiAqam9iLCBzdHJ1Y3QgcGFudGhvcl9qb2JfY3NfcGFyYW1zICpwYXJhbXMpDQo+ICB7DQo+IC0J
c3RydWN0IHBhbnRob3Jfam9iICpqb2IgPSBjb250YWluZXJfb2Yoc2NoZWRfam9iLCBzdHJ1Y3Qg
cGFudGhvcl9qb2IsIGJhc2UpOw0KPiAgCXN0cnVjdCBwYW50aG9yX2dyb3VwICpncm91cCA9IGpv
Yi0+Z3JvdXA7DQo+ICAJc3RydWN0IHBhbnRob3JfcXVldWUgKnF1ZXVlID0gZ3JvdXAtPnF1ZXVl
c1tqb2ItPnF1ZXVlX2lkeF07DQo+ICAJc3RydWN0IHBhbnRob3JfZGV2aWNlICpwdGRldiA9IGdy
b3VwLT5wdGRldjsNCj4gIAlzdHJ1Y3QgcGFudGhvcl9zY2hlZHVsZXIgKnNjaGVkID0gcHRkZXYt
PnNjaGVkdWxlcjsNCj4gLQl1MzIgcmluZ2J1Zl9zaXplID0gcGFudGhvcl9rZXJuZWxfYm9fc2l6
ZShxdWV1ZS0+cmluZ2J1Zik7DQo+IC0JdTMyIHJpbmdidWZfaW5zZXJ0ID0gcXVldWUtPmlmYWNl
LmlucHV0LT5pbnNlcnQgJiAocmluZ2J1Zl9zaXplIC0gMSk7DQo+IC0JdTY0IGFkZHJfcmVnID0g
cHRkZXYtPmNzaWZfaW5mby5jc19yZWdfY291bnQgLQ0KPiAtCQkgICAgICAgcHRkZXYtPmNzaWZf
aW5mby51bnByZXNlcnZlZF9jc19yZWdfY291bnQ7DQo+IC0JdTY0IHZhbF9yZWcgPSBhZGRyX3Jl
ZyArIDI7DQo+IC0JdTY0IHN5bmNfYWRkciA9IHBhbnRob3Jfa2VybmVsX2JvX2dwdXZhKGdyb3Vw
LT5zeW5jb2JqcykgKw0KPiAtCQkJam9iLT5xdWV1ZV9pZHggKiBzaXplb2Yoc3RydWN0IHBhbnRo
b3Jfc3luY29ial82NGIpOw0KPiAtCXUzMiB3YWl0YWxsX21hc2sgPSBHRU5NQVNLKHNjaGVkLT5z
Yl9zbG90X2NvdW50IC0gMSwgMCk7DQo+IC0Jc3RydWN0IGRtYV9mZW5jZSAqZG9uZV9mZW5jZTsN
Cj4gLQlpbnQgcmV0Ow0KPiAgDQo+IC0JdTY0IGNhbGxfaW5zdHJzW05VTV9JTlNUUlNfUEVSX1NM
T1RdID0gew0KPiAtCQkvKiBNT1YzMiByWCsyLCBjcy5sYXRlc3RfZmx1c2ggKi8NCj4gLQkJKDJ1
bGwgPDwgNTYpIHwgKHZhbF9yZWcgPDwgNDgpIHwgam9iLT5jYWxsX2luZm8ubGF0ZXN0X2ZsdXNo
LA0KPiArCXBhcmFtcy0+YWRkcl9yZWcgPSBwdGRldi0+Y3NpZl9pbmZvLmNzX3JlZ19jb3VudCAt
DQo+ICsJCQkgICBwdGRldi0+Y3NpZl9pbmZvLnVucHJlc2VydmVkX2NzX3JlZ19jb3VudDsNCj4g
KwlwYXJhbXMtPnZhbF9yZWcgPSBwYXJhbXMtPmFkZHJfcmVnICsgMjsNCj4gKwlwYXJhbXMtPmN5
Y2xlX3JlZyA9IHBhcmFtcy0+YWRkcl9yZWc7DQo+ICsJcGFyYW1zLT50aW1lX3JlZyA9IHBhcmFt
cy0+dmFsX3JlZzsNCj4gIA0KPiAtCQkvKiBGTFVTSF9DQUNIRTIuY2xlYW5faW52X2FsbC5ub193
YWl0LnNpZ25hbCgwKSByWCsyICovDQo+IC0JCSgzNnVsbCA8PCA1NikgfCAoMHVsbCA8PCA0OCkg
fCAodmFsX3JlZyA8PCA0MCkgfCAoMCA8PCAxNikgfCAweDIzMywNCj4gKwlwYXJhbXMtPnN5bmNf
YWRkciA9IHBhbnRob3Jfa2VybmVsX2JvX2dwdXZhKGdyb3VwLT5zeW5jb2JqcykgKw0KPiArCQkJ
ICAgIGpvYi0+cXVldWVfaWR4ICogc2l6ZW9mKHN0cnVjdCBwYW50aG9yX3N5bmNvYmpfNjRiKTsN
Cj4gKwlwYXJhbXMtPnRpbWVzX2FkZHIgPSBwYW50aG9yX2tlcm5lbF9ib19ncHV2YShxdWV1ZS0+
cHJvZmlsaW5nLnNsb3RzKSArDQo+ICsJCQkgICAgIChqb2ItPnByb2ZpbGluZy5zbG90ICogc2l6
ZW9mKHN0cnVjdCBwYW50aG9yX2pvYl9wcm9maWxpbmdfZGF0YSkpOw0KPiArCXBhcmFtcy0+d2Fp
dGFsbF9tYXNrID0gR0VOTUFTSyhzY2hlZC0+c2Jfc2xvdF9jb3VudCAtIDEsIDApOw0KPiAgDQo+
IC0JCS8qIE1PVjQ4IHJYOnJYKzEsIGNzLnN0YXJ0ICovDQo+IC0JCSgxdWxsIDw8IDU2KSB8IChh
ZGRyX3JlZyA8PCA0OCkgfCBqb2ItPmNhbGxfaW5mby5zdGFydCwNCj4gKwlwYXJhbXMtPmNzX3N0
YXJ0ID0gam9iLT5jYWxsX2luZm8uc3RhcnQ7DQo+ICsJcGFyYW1zLT5jc19zaXplID0gam9iLT5j
YWxsX2luZm8uc2l6ZTsNCj4gKwlwYXJhbXMtPmxhc3RfZmx1c2ggPSBqb2ItPmNhbGxfaW5mby5s
YXRlc3RfZmx1c2g7DQo+ICANCj4gLQkJLyogTU9WMzIgclgrMiwgY3Muc2l6ZSAqLw0KPiAtCQko
MnVsbCA8PCA1NikgfCAodmFsX3JlZyA8PCA0OCkgfCBqb2ItPmNhbGxfaW5mby5zaXplLA0KPiAr
CXBhcmFtcy0+cHJvZmlsZV9tYXNrID0gam9iLT5wcm9maWxpbmcubWFzazsNCj4gK30NCj4gIA0K
PiAtCQkvKiBXQUlUKDApID0+IHdhaXRzIGZvciBGTFVTSF9DQUNIRTIgaW5zdHJ1Y3Rpb24gKi8N
Cj4gLQkJKDN1bGwgPDwgNTYpIHwgKDEgPDwgMTYpLA0KPiArI2RlZmluZSBKT0JfSU5TVFJfQUxX
QVlTKGluc3RyKSBcDQo+ICsJSk9CX0lOU1RSKFBBTlRIT1JfREVWSUNFX1BST0ZJTElOR19ESVNB
QkxFRCwgKGluc3RyKSkNCj4gKyNkZWZpbmUgSk9CX0lOU1RSX1RJTUVTVEFNUChpbnN0cikgXA0K
PiArCUpPQl9JTlNUUihQQU5USE9SX0RFVklDRV9QUk9GSUxJTkdfVElNRVNUQU1QLCAoaW5zdHIp
KQ0KPiArI2RlZmluZSBKT0JfSU5TVFJfQ1lDTEVTKGluc3RyKSBcDQo+ICsJSk9CX0lOU1RSKFBB
TlRIT1JfREVWSUNFX1BST0ZJTElOR19DWUNMRVMsIChpbnN0cikpDQo+ICANCj4gK3N0YXRpYyB2
b2lkDQo+ICtwcmVwYXJlX2pvYl9pbnN0cnMoY29uc3Qgc3RydWN0IHBhbnRob3Jfam9iX2NzX3Bh
cmFtcyAqcGFyYW1zLA0KPiArCQkgICBzdHJ1Y3QgcGFudGhvcl9qb2JfcmluZ2J1Zl9pbnN0cnMg
Kmluc3RycykNCj4gK3sNCj4gKwljb25zdCBzdHJ1Y3QgcGFudGhvcl9qb2JfaW5zdHIgaW5zdHJf
c2VxW10gPSB7DQo+ICsJCS8qIE1PVjMyIHJYKzIsIGNzLmxhdGVzdF9mbHVzaCAqLw0KPiArCQlK
T0JfSU5TVFJfQUxXQVlTKCgydWxsIDw8IDU2KSB8IChwYXJhbXMtPnZhbF9yZWcgPDwgNDgpIHwg
cGFyYW1zLT5sYXN0X2ZsdXNoKSwNCj4gKwkJLyogRkxVU0hfQ0FDSEUyLmNsZWFuX2ludl9hbGwu
bm9fd2FpdC5zaWduYWwoMCkgclgrMiAqLw0KPiArCQlKT0JfSU5TVFJfQUxXQVlTKCgzNnVsbCA8
PCA1NikgfCAoMHVsbCA8PCA0OCkgfCAocGFyYW1zLT52YWxfcmVnIDw8IDQwKSB8ICgwIDw8IDE2
KSB8IDB4MjMzKSwNCj4gKwkJLyogTU9WNDggclg6clgrMSwgY3ljbGVzX29mZnNldCAqLw0KPiAr
CQlKT0JfSU5TVFJfQ1lDTEVTKCgxdWxsIDw8IDU2KSB8IChwYXJhbXMtPmN5Y2xlX3JlZyA8PCA0
OCkgfA0KPiArCQkJCSAocGFyYW1zLT50aW1lc19hZGRyICsgb2Zmc2V0b2Yoc3RydWN0IHBhbnRo
b3Jfam9iX3Byb2ZpbGluZ19kYXRhLCBjeWNsZXMuYmVmb3JlKSkpLA0KPiArCQkvKiBTVE9SRV9T
VEFURSBjeWNsZXMgKi8NCj4gKwkJSk9CX0lOU1RSX0NZQ0xFUygoNDB1bGwgPDwgNTYpIHwgKHBh
cmFtcy0+Y3ljbGVfcmVnIDw8IDQwKSB8ICgxbGwgPDwgMzIpKSwNCj4gKwkJLyogTU9WNDggclg6
clgrMSwgdGltZV9vZmZzZXQgKi8NCj4gKwkJSk9CX0lOU1RSX1RJTUVTVEFNUCgoMXVsbCA8PCA1
NikgfCAocGFyYW1zLT50aW1lX3JlZyA8PCA0OCkgfCAocGFyYW1zLT50aW1lc19hZGRyICsNCj4g
KwkJCSAgIG9mZnNldG9mKHN0cnVjdCBwYW50aG9yX2pvYl9wcm9maWxpbmdfZGF0YSwgdGltZS5i
ZWZvcmUpKSksDQo+ICsJCS8qIFNUT1JFX1NUQVRFIHRpbWVyICovDQo+ICsJCUpPQl9JTlNUUl9U
SU1FU1RBTVAoKDQwdWxsIDw8IDU2KSB8IChwYXJhbXMtPnRpbWVfcmVnIDw8IDQwKSB8ICgwbGwg
PDwgMzIpKSwNCj4gKwkJLyogTU9WNDggclg6clgrMSwgY3Muc3RhcnQgKi8NCj4gKwkJSk9CX0lO
U1RSX0FMV0FZUygoMXVsbCA8PCA1NikgfCAocGFyYW1zLT5hZGRyX3JlZyA8PCA0OCkgfCBwYXJh
bXMtPmNzX3N0YXJ0KSwNCj4gKwkJLyogTU9WMzIgclgrMiwgY3Muc2l6ZSAqLw0KPiArCQlKT0Jf
SU5TVFJfQUxXQVlTKCgydWxsIDw8IDU2KSB8IChwYXJhbXMtPnZhbF9yZWcgPDwgNDgpIHwgcGFy
YW1zLT5jc19zaXplKSwNCj4gKwkJLyogV0FJVCgwKSA9PiB3YWl0cyBmb3IgRkxVU0hfQ0FDSEUy
IGluc3RydWN0aW9uICovDQo+ICsJCUpPQl9JTlNUUl9BTFdBWVMoKDN1bGwgPDwgNTYpIHwgKDEg
PDwgMTYpKSwNCj4gIAkJLyogQ0FMTCByWDpyWCsxLCByWCsyICovDQo+IC0JCSgzMnVsbCA8PCA1
NikgfCAoYWRkcl9yZWcgPDwgNDApIHwgKHZhbF9yZWcgPDwgMzIpLA0KPiAtDQo+ICsJCUpPQl9J
TlNUUl9BTFdBWVMoKDMydWxsIDw8IDU2KSB8IChwYXJhbXMtPmFkZHJfcmVnIDw8IDQwKSB8IChw
YXJhbXMtPnZhbF9yZWcgPDwgMzIpKSwNCj4gKwkJLyogTU9WNDggclg6clgrMSwgY3ljbGVzX29m
ZnNldCAqLw0KPiArCQlKT0JfSU5TVFJfQ1lDTEVTKCgxdWxsIDw8IDU2KSB8IChwYXJhbXMtPmN5
Y2xlX3JlZyA8PCA0OCkgfA0KPiArCQkJCSAocGFyYW1zLT50aW1lc19hZGRyICsgb2Zmc2V0b2Yo
c3RydWN0IHBhbnRob3Jfam9iX3Byb2ZpbGluZ19kYXRhLCBjeWNsZXMuYWZ0ZXIpKSksDQo+ICsJ
CS8qIFNUT1JFX1NUQVRFIGN5Y2xlcyAqLw0KPiArCQlKT0JfSU5TVFJfQ1lDTEVTKCg0MHVsbCA8
PCA1NikgfCAocGFyYW1zLT5jeWNsZV9yZWcgPDwgNDApIHwgKDFsbCA8PCAzMikpLA0KPiArCQkv
KiBNT1Y0OCByWDpyWCsxLCB0aW1lX29mZnNldCAqLw0KPiArCQlKT0JfSU5TVFJfVElNRVNUQU1Q
KCgxdWxsIDw8IDU2KSB8IChwYXJhbXMtPnRpbWVfcmVnIDw8IDQ4KSB8DQo+ICsJCQkgIChwYXJh
bXMtPnRpbWVzX2FkZHIgKyBvZmZzZXRvZihzdHJ1Y3QgcGFudGhvcl9qb2JfcHJvZmlsaW5nX2Rh
dGEsIHRpbWUuYWZ0ZXIpKSksDQo+ICsJCS8qIFNUT1JFX1NUQVRFIHRpbWVyICovDQo+ICsJCUpP
Ql9JTlNUUl9USU1FU1RBTVAoKDQwdWxsIDw8IDU2KSB8IChwYXJhbXMtPnRpbWVfcmVnIDw8IDQw
KSB8ICgwbGwgPDwgMzIpKSwNCj4gIAkJLyogTU9WNDggclg6clgrMSwgc3luY19hZGRyICovDQo+
IC0JCSgxdWxsIDw8IDU2KSB8IChhZGRyX3JlZyA8PCA0OCkgfCBzeW5jX2FkZHIsDQo+IC0NCj4g
KwkJSk9CX0lOU1RSX0FMV0FZUygoMXVsbCA8PCA1NikgfCAocGFyYW1zLT5hZGRyX3JlZyA8PCA0
OCkgfCBwYXJhbXMtPnN5bmNfYWRkciksDQo+ICAJCS8qIE1PVjQ4IHJYKzIsICMxICovDQo+IC0J
CSgxdWxsIDw8IDU2KSB8ICh2YWxfcmVnIDw8IDQ4KSB8IDEsDQo+IC0NCj4gKwkJSk9CX0lOU1RS
X0FMV0FZUygoMXVsbCA8PCA1NikgfCAocGFyYW1zLT52YWxfcmVnIDw8IDQ4KSB8IDEpLA0KPiAg
CQkvKiBXQUlUKGFsbCkgKi8NCj4gLQkJKDN1bGwgPDwgNTYpIHwgKHdhaXRhbGxfbWFzayA8PCAx
NiksDQo+IC0NCj4gKwkJSk9CX0lOU1RSX0FMV0FZUygoM3VsbCA8PCA1NikgfCAocGFyYW1zLT53
YWl0YWxsX21hc2sgPDwgMTYpKSwNCj4gIAkJLyogU1lOQ19BREQ2NC5zeXN0ZW1fc2NvcGUucHJv
cGFnZV9lcnIubm93YWl0IHJYOnJYKzEsIHJYKzIqLw0KPiAtCQkoNTF1bGwgPDwgNTYpIHwgKDB1
bGwgPDwgNDgpIHwgKGFkZHJfcmVnIDw8IDQwKSB8ICh2YWxfcmVnIDw8IDMyKSB8ICgwIDw8IDE2
KSB8IDEsDQo+ICsJCUpPQl9JTlNUUl9BTFdBWVMoKDUxdWxsIDw8IDU2KSB8ICgwdWxsIDw8IDQ4
KSB8IChwYXJhbXMtPmFkZHJfcmVnIDw8IDQwKSB8DQo+ICsJCQkJIChwYXJhbXMtPnZhbF9yZWcg
PDwgMzIpIHwgKDAgPDwgMTYpIHwgMSksDQo+ICsJCS8qIEVSUk9SX0JBUlJJRVIsIHNvIHdlIGNh
biByZWNvdmVyIGZyb20gZmF1bHRzIGF0IGpvYiBib3VuZGFyaWVzLiAqLw0KPiArCQlKT0JfSU5T
VFJfQUxXQVlTKCg0N3VsbCA8PCA1NikpLA0KPiArCX07DQo+ICsJdTMyIHBhZDsNCj4gIA0KPiAt
CQkvKiBFUlJPUl9CQVJSSUVSLCBzbyB3ZSBjYW4gcmVjb3ZlciBmcm9tIGZhdWx0cyBhdCBqb2IN
Cj4gLQkJICogYm91bmRhcmllcy4NCj4gLQkJICovDQo+IC0JCSg0N3VsbCA8PCA1NiksDQo+ICsJ
LyogTkVFRCB0byBiZSBjYWNoZWxpbmUgYWxpZ25lZCB0byBwbGVhc2UgdGhlIHByZWZldGNoZXIu
ICovDQo+ICsJc3RhdGljX2Fzc2VydChzaXplb2YoaW5zdHJzLT5idWZmZXIpICUgNjQgPT0gMCwN
Cj4gKwkJICAgICAgInBhbnRob3Jfam9iX3JpbmdidWZfaW5zdHJzOjpidWZmZXIgaXMgbm90IGFs
aWduZWQgb24gYSBjYWNoZWxpbmUiKTsNCj4gKw0KPiArCS8qIE1ha2Ugc3VyZSB3ZSBoYXZlIGVu
b3VnaCBzdG9yYWdlIHRvIHN0b3JlIHRoZSB3aG9sZSBzZXF1ZW5jZS4gKi8NCj4gKwlzdGF0aWNf
YXNzZXJ0KEFMSUdOKEFSUkFZX1NJWkUoaW5zdHJfc2VxKSwgTlVNX0lOU1RSU19QRVJfQ0FDSEVf
TElORSkgPT0NCj4gKwkJICAgICAgQVJSQVlfU0laRShpbnN0cnMtPmJ1ZmZlciksDQo+ICsJCSAg
ICAgICJpbnN0cl9zZXEgdnMgcGFudGhvcl9qb2JfcmluZ2J1Zl9pbnN0cnM6OmJ1ZmZlciBzaXpl
IG1pc21hdGNoIik7DQo+ICsNCj4gKwlmb3IgKHUzMiBpID0gMDsgaSA8IEFSUkFZX1NJWkUoaW5z
dHJfc2VxKTsgaSsrKSB7DQo+ICsJCS8qIElmIHRoZSBwcm9maWxlIG1hc2sgb2YgdGhpcyBpbnN0
cnVjdGlvbiBpcyBub3QgZW5hYmxlZCwgc2tpcCBpdC4gKi8NCj4gKwkJaWYgKGluc3RyX3NlcVtp
XS5wcm9maWxlX21hc2sgJiYNCj4gKwkJICAgICEoaW5zdHJfc2VxW2ldLnByb2ZpbGVfbWFzayAm
IHBhcmFtcy0+cHJvZmlsZV9tYXNrKSkNCj4gKwkJCWNvbnRpbnVlOw0KPiArDQo+ICsJCWluc3Ry
cy0+YnVmZmVyW2luc3Rycy0+Y291bnQrK10gPSBpbnN0cl9zZXFbaV0uaW5zdHI7DQo+ICsJfQ0K
PiArDQo+ICsJcGFkID0gQUxJR04oaW5zdHJzLT5jb3VudCwgTlVNX0lOU1RSU19QRVJfQ0FDSEVf
TElORSk7DQo+ICsJbWVtc2V0KCZpbnN0cnMtPmJ1ZmZlcltpbnN0cnMtPmNvdW50XSwgMCwNCj4g
KwkgICAgICAgKHBhZCAtIGluc3Rycy0+Y291bnQpICogc2l6ZW9mKGluc3Rycy0+YnVmZmVyWzBd
KSk7DQo+ICsJaW5zdHJzLT5jb3VudCA9IHBhZDsNCj4gK30NCj4gKw0KPiArc3RhdGljIHUzMiBj
YWxjX2pvYl9jcmVkaXRzKHUzMiBwcm9maWxlX21hc2spDQo+ICt7DQo+ICsJc3RydWN0IHBhbnRo
b3Jfam9iX3JpbmdidWZfaW5zdHJzIGluc3RycyA9IHsNCj4gKwkJLmNvdW50ID0gMCwNCj4gKwl9
Ow0KPiArCXN0cnVjdCBwYW50aG9yX2pvYl9jc19wYXJhbXMgcGFyYW1zID0gew0KPiArCQkucHJv
ZmlsZV9tYXNrID0gcHJvZmlsZV9tYXNrLA0KPiAgCX07DQo+ICANCj4gLQkvKiBOZWVkIHRvIGJl
IGNhY2hlbGluZSBhbGlnbmVkIHRvIHBsZWFzZSB0aGUgcHJlZmV0Y2hlci4gKi8NCj4gLQlzdGF0
aWNfYXNzZXJ0KHNpemVvZihjYWxsX2luc3RycykgJSA2NCA9PSAwLA0KPiAtCQkgICAgICAiY2Fs
bF9pbnN0cnMgaXMgbm90IGFsaWduZWQgb24gYSBjYWNoZWxpbmUiKTsNCj4gKwlwcmVwYXJlX2pv
Yl9pbnN0cnMoJnBhcmFtcywgJmluc3Rycyk7DQo+ICsJcmV0dXJuIGluc3Rycy5jb3VudDsNCj4g
K30NCj4gKw0KPiArc3RhdGljIHN0cnVjdCBkbWFfZmVuY2UgKg0KPiArcXVldWVfcnVuX2pvYihz
dHJ1Y3QgZHJtX3NjaGVkX2pvYiAqc2NoZWRfam9iKQ0KPiArew0KPiArCXN0cnVjdCBwYW50aG9y
X2pvYiAqam9iID0gY29udGFpbmVyX29mKHNjaGVkX2pvYiwgc3RydWN0IHBhbnRob3Jfam9iLCBi
YXNlKTsNCj4gKwlzdHJ1Y3QgcGFudGhvcl9ncm91cCAqZ3JvdXAgPSBqb2ItPmdyb3VwOw0KPiAr
CXN0cnVjdCBwYW50aG9yX3F1ZXVlICpxdWV1ZSA9IGdyb3VwLT5xdWV1ZXNbam9iLT5xdWV1ZV9p
ZHhdOw0KPiArCXN0cnVjdCBwYW50aG9yX2RldmljZSAqcHRkZXYgPSBncm91cC0+cHRkZXY7DQo+
ICsJc3RydWN0IHBhbnRob3Jfc2NoZWR1bGVyICpzY2hlZCA9IHB0ZGV2LT5zY2hlZHVsZXI7DQo+
ICsJc3RydWN0IHBhbnRob3Jfam9iX3JpbmdidWZfaW5zdHJzIGluc3RyczsNCg0KaW5zdHJzIGlz
bid0IGluaXRpYWxpc2VkLi4uDQoNCj4gKwlzdHJ1Y3QgcGFudGhvcl9qb2JfY3NfcGFyYW1zIGNz
X3BhcmFtczsNCj4gKwlzdHJ1Y3QgZG1hX2ZlbmNlICpkb25lX2ZlbmNlOw0KPiArCWludCByZXQ7
DQo+ICANCj4gIAkvKiBTdHJlYW0gc2l6ZSBpcyB6ZXJvLCBub3RoaW5nIHRvIGRvIGV4Y2VwdCBt
YWtpbmcgc3VyZSBhbGwgcHJldmlvdXNseQ0KPiAgCSAqIHN1Ym1pdHRlZCBqb2JzIGFyZSBkb25l
IGJlZm9yZSB3ZSBzaWduYWwgdGhlDQo+IEBAIC0yOTAwLDE3ICszMDYyLDIzIEBAIHF1ZXVlX3J1
bl9qb2Ioc3RydWN0IGRybV9zY2hlZF9qb2IgKnNjaGVkX2pvYikNCj4gIAkJICAgICAgIHF1ZXVl
LT5mZW5jZV9jdHguaWQsDQo+ICAJCSAgICAgICBhdG9taWM2NF9pbmNfcmV0dXJuKCZxdWV1ZS0+
ZmVuY2VfY3R4LnNlcW5vKSk7DQo+ICANCj4gLQltZW1jcHkocXVldWUtPnJpbmdidWYtPmttYXAg
KyByaW5nYnVmX2luc2VydCwNCj4gLQkgICAgICAgY2FsbF9pbnN0cnMsIHNpemVvZihjYWxsX2lu
c3RycykpOw0KPiArCWpvYi0+cHJvZmlsaW5nLnNsb3QgPSBxdWV1ZS0+cHJvZmlsaW5nLnNlcW5v
Kys7DQo+ICsJaWYgKHF1ZXVlLT5wcm9maWxpbmcuc2Vxbm8gPT0gcXVldWUtPnByb2ZpbGluZy5z
bG90X2NvdW50KQ0KPiArCQlxdWV1ZS0+cHJvZmlsaW5nLnNlcW5vID0gMDsNCj4gKw0KPiArCWpv
Yi0+cmluZ2J1Zi5zdGFydCA9IHF1ZXVlLT5pZmFjZS5pbnB1dC0+aW5zZXJ0Ow0KPiArDQo+ICsJ
Z2V0X2pvYl9jc19wYXJhbXMoam9iLCAmY3NfcGFyYW1zKTsNCj4gKwlwcmVwYXJlX2pvYl9pbnN0
cnMoJmNzX3BhcmFtcywgJmluc3Rycyk7DQoNCi4uLmJ1dCBpdCdzIHBhc3NlZCBpbnRvIHByZXBh
cmVfam9iX2luc3RycygpIHdoaWNoIGRlcGVuZHMgb24NCmluc3Rycy5jb3VudCAoc2FtZSBidWcg
YXMgd2FzIGluIGNhbGNfam9iX2NyZWRpdHMoKSkgLSBzb3JyeSBJIGRpZG4ndA0Kc3BvdCBpdCBs
YXN0IHJldmlldy4NCg0KSW5pdGlhbGl6aW5nIGluc3RycyBtYWtlcyBldmVyeXRoaW5nIHdvcmsg
Zm9yIG1lLg0KDQpJJ20gbm90IHN1cmUgcXVpdGUgd2hhdCBrZXJuZWwgY29uZmlndXJhdGlvbiB5
b3UgYXJlIHVzaW5nIGJ1dCBJIHdvbmRlcg0KaWYgeW91J3ZlIGdvdCBhICdoYXJkZW5pbmcnIG9w
dGlvbiBlbmFibGVkIHdoaWNoIGlzIGNhdXNpbmcgdGhlIHN0YWNrIHRvDQpiZSB6ZXJvLWluaXRp
YWxpc2VkLiBJdCdzIHdvcnRoIHR1cm5pbmcgaXQgb2ZmIGZvciB0ZXN0aW5nIHB1cnBvc2VzIDsp
DQoNClN0ZXZlDQoNCj4gKwljb3B5X2luc3Ryc190b19yaW5nYnVmKHF1ZXVlLCBqb2IsICZpbnN0
cnMpOw0KPiArDQo+ICsJam9iLT5yaW5nYnVmLmVuZCA9IGpvYi0+cmluZ2J1Zi5zdGFydCArIChp
bnN0cnMuY291bnQgKiBzaXplb2YodTY0KSk7DQo+ICANCj4gIAlwYW50aG9yX2pvYl9nZXQoJmpv
Yi0+YmFzZSk7DQo+ICAJc3Bpbl9sb2NrKCZxdWV1ZS0+ZmVuY2VfY3R4LmxvY2spOw0KPiAgCWxp
c3RfYWRkX3RhaWwoJmpvYi0+bm9kZSwgJnF1ZXVlLT5mZW5jZV9jdHguaW5fZmxpZ2h0X2pvYnMp
Ow0KPiAgCXNwaW5fdW5sb2NrKCZxdWV1ZS0+ZmVuY2VfY3R4LmxvY2spOw0KPiAgDQo+IC0Jam9i
LT5yaW5nYnVmLnN0YXJ0ID0gcXVldWUtPmlmYWNlLmlucHV0LT5pbnNlcnQ7DQo+IC0Jam9iLT5y
aW5nYnVmLmVuZCA9IGpvYi0+cmluZ2J1Zi5zdGFydCArIHNpemVvZihjYWxsX2luc3Rycyk7DQo+
IC0NCj4gIAkvKiBNYWtlIHN1cmUgdGhlIHJpbmcgYnVmZmVyIGlzIHVwZGF0ZWQgYmVmb3JlIHRo
ZSBJTlNFUlQNCj4gIAkgKiByZWdpc3Rlci4NCj4gIAkgKi8NCj4gQEAgLTMwMDMsNiArMzE3MSwz
NCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGRybV9zY2hlZF9iYWNrZW5kX29wcyBwYW50aG9yX3F1
ZXVlX3NjaGVkX29wcyA9IHsNCj4gIAkuZnJlZV9qb2IgPSBxdWV1ZV9mcmVlX2pvYiwNCj4gIH07
DQo+ICANCj4gK3N0YXRpYyB1MzIgY2FsY19wcm9maWxpbmdfcmluZ2J1Zl9udW1fc2xvdHMoc3Ry
dWN0IHBhbnRob3JfZGV2aWNlICpwdGRldiwNCj4gKwkJCQkgICAgICAgdTMyIGNzX3JpbmdidWZf
c2l6ZSkNCj4gK3sNCj4gKwl1MzIgbWluX3Byb2ZpbGVkX2pvYl9pbnN0cnMgPSBVMzJfTUFYOw0K
PiArCXUzMiBsYXN0X2ZsYWcgPSBmbHMoUEFOVEhPUl9ERVZJQ0VfUFJPRklMSU5HX0FMTCk7DQo+
ICsNCj4gKwkvKg0KPiArCSAqIFdlIHdhbnQgdG8gY2FsY3VsYXRlIHRoZSBtaW5pbXVtIHNpemUg
b2YgYSBwcm9maWxlZCBqb2IncyBDUywNCj4gKwkgKiBiZWNhdXNlIHNpbmNlIHRoZXkgbmVlZCBh
ZGRpdGlvbmFsIGluc3RydWN0aW9ucyBmb3IgdGhlIHNhbXBsaW5nDQo+ICsJICogb2YgcGVyZm9y
bWFuY2UgbWV0cmljcywgdGhleSBtaWdodCB0YWtlIHVwIGZ1cnRoZXIgc2xvdHMgaW4NCj4gKwkg
KiB0aGUgcXVldWUncyByaW5nYnVmZmVyLiBUaGlzIG1lYW5zIHdlIG1pZ2h0IG5vdCBuZWVkIGFz
IG1hbnkgam9iDQo+ICsJICogc2xvdHMgZm9yIGtlZXBpbmcgdHJhY2sgb2YgdGhlaXIgcHJvZmls
aW5nIGluZm9ybWF0aW9uLiBXaGF0IHdlDQo+ICsJICogbmVlZCBpcyB0aGUgbWF4aW11bSBudW1i
ZXIgb2Ygc2xvdHMgd2Ugc2hvdWxkIGFsbG9jYXRlIHRvIHRoaXMgZW5kLA0KPiArCSAqIHdoaWNo
IG1hdGNoZXMgdGhlIG1heGltdW0gbnVtYmVyIG9mIHByb2ZpbGVkIGpvYnMgd2UgY2FuIHBsYWNl
DQo+ICsJICogc2ltdWx0YW5lb3VzbHkgaW4gdGhlIHF1ZXVlJ3MgcmluZyBidWZmZXIuDQo+ICsJ
ICogVGhhdCBoYXMgdG8gYmUgY2FsY3VsYXRlZCBzZXBhcmF0ZWx5IGZvciBldmVyeSBzaW5nbGUg
am9iIHByb2ZpbGluZw0KPiArCSAqIGZsYWcsIGJ1dCBub3QgaW4gdGhlIGNhc2Ugam9iIHByb2Zp
bGluZyBpcyBkaXNhYmxlZCwgc2luY2UgdW5wcm9maWxlZA0KPiArCSAqIGpvYnMgZG9uJ3QgbmVl
ZCB0byBrZWVwIHRyYWNrIG9mIHRoaXMgYXQgYWxsLg0KPiArCSAqLw0KPiArCWZvciAodTMyIGkg
PSAwOyBpIDwgbGFzdF9mbGFnOyBpKyspIHsNCj4gKwkJaWYgKEJJVChpKSAmIFBBTlRIT1JfREVW
SUNFX1BST0ZJTElOR19BTEwpDQo+ICsJCQltaW5fcHJvZmlsZWRfam9iX2luc3RycyA9DQo+ICsJ
CQkJbWluKG1pbl9wcm9maWxlZF9qb2JfaW5zdHJzLCBjYWxjX2pvYl9jcmVkaXRzKEJJVChpKSkp
Ow0KPiArCX0NCj4gKw0KPiArCXJldHVybiBESVZfUk9VTkRfVVAoY3NfcmluZ2J1Zl9zaXplLCBt
aW5fcHJvZmlsZWRfam9iX2luc3RycyAqIHNpemVvZih1NjQpKTsNCj4gK30NCj4gKw0KPiAgc3Rh
dGljIHN0cnVjdCBwYW50aG9yX3F1ZXVlICoNCj4gIGdyb3VwX2NyZWF0ZV9xdWV1ZShzdHJ1Y3Qg
cGFudGhvcl9ncm91cCAqZ3JvdXAsDQo+ICAJCSAgIGNvbnN0IHN0cnVjdCBkcm1fcGFudGhvcl9x
dWV1ZV9jcmVhdGUgKmFyZ3MpDQo+IEBAIC0zMDU2LDkgKzMyNTIsMzUgQEAgZ3JvdXBfY3JlYXRl
X3F1ZXVlKHN0cnVjdCBwYW50aG9yX2dyb3VwICpncm91cCwNCj4gIAkJZ290byBlcnJfZnJlZV9x
dWV1ZTsNCj4gIAl9DQo+ICANCj4gKwlxdWV1ZS0+cHJvZmlsaW5nLnNsb3RfY291bnQgPQ0KPiAr
CQljYWxjX3Byb2ZpbGluZ19yaW5nYnVmX251bV9zbG90cyhncm91cC0+cHRkZXYsIGFyZ3MtPnJp
bmdidWZfc2l6ZSk7DQo+ICsNCj4gKwlxdWV1ZS0+cHJvZmlsaW5nLnNsb3RzID0NCj4gKwkJcGFu
dGhvcl9rZXJuZWxfYm9fY3JlYXRlKGdyb3VwLT5wdGRldiwgZ3JvdXAtPnZtLA0KPiArCQkJCQkg
cXVldWUtPnByb2ZpbGluZy5zbG90X2NvdW50ICoNCj4gKwkJCQkJIHNpemVvZihzdHJ1Y3QgcGFu
dGhvcl9qb2JfcHJvZmlsaW5nX2RhdGEpLA0KPiArCQkJCQkgRFJNX1BBTlRIT1JfQk9fTk9fTU1B
UCwNCj4gKwkJCQkJIERSTV9QQU5USE9SX1ZNX0JJTkRfT1BfTUFQX05PRVhFQyB8DQo+ICsJCQkJ
CSBEUk1fUEFOVEhPUl9WTV9CSU5EX09QX01BUF9VTkNBQ0hFRCwNCj4gKwkJCQkJIFBBTlRIT1Jf
Vk1fS0VSTkVMX0FVVE9fVkEpOw0KPiArDQo+ICsJaWYgKElTX0VSUihxdWV1ZS0+cHJvZmlsaW5n
LnNsb3RzKSkgew0KPiArCQlyZXQgPSBQVFJfRVJSKHF1ZXVlLT5wcm9maWxpbmcuc2xvdHMpOw0K
PiArCQlnb3RvIGVycl9mcmVlX3F1ZXVlOw0KPiArCX0NCj4gKw0KPiArCXJldCA9IHBhbnRob3Jf
a2VybmVsX2JvX3ZtYXAocXVldWUtPnByb2ZpbGluZy5zbG90cyk7DQo+ICsJaWYgKHJldCkNCj4g
KwkJZ290byBlcnJfZnJlZV9xdWV1ZTsNCj4gKw0KPiArCS8qDQo+ICsJICogQ3JlZGl0IGxpbWl0
IGFyZ3VtZW50IHRlbGxzIHVzIHRoZSB0b3RhbCBudW1iZXIgb2YgaW5zdHJ1Y3Rpb25zDQo+ICsJ
ICogYWNyb3NzIGFsbCBDUyBzbG90cyBpbiB0aGUgcmluZ2J1ZmZlciwgd2l0aCBzb21lIGpvYnMg
cmVxdWlyaW5nDQo+ICsJICogdHdpY2UgYXMgbWFueSBhcyBvdGhlcnMsIGRlcGVuZGluZyBvbiB0
aGVpciBwcm9maWxpbmcgc3RhdHVzLg0KPiArCSAqLw0KPiAgCXJldCA9IGRybV9zY2hlZF9pbml0
KCZxdWV1ZS0+c2NoZWR1bGVyLCAmcGFudGhvcl9xdWV1ZV9zY2hlZF9vcHMsDQo+ICAJCQkgICAg
IGdyb3VwLT5wdGRldi0+c2NoZWR1bGVyLT53cSwgMSwNCj4gLQkJCSAgICAgYXJncy0+cmluZ2J1
Zl9zaXplIC8gKE5VTV9JTlNUUlNfUEVSX1NMT1QgKiBzaXplb2YodTY0KSksDQo+ICsJCQkgICAg
IGFyZ3MtPnJpbmdidWZfc2l6ZSAvIHNpemVvZih1NjQpLA0KPiAgCQkJICAgICAwLCBtc2Vjc190
b19qaWZmaWVzKEpPQl9USU1FT1VUX01TKSwNCj4gIAkJCSAgICAgZ3JvdXAtPnB0ZGV2LT5yZXNl
dC53cSwNCj4gIAkJCSAgICAgTlVMTCwgInBhbnRob3ItcXVldWUiLCBncm91cC0+cHRkZXYtPmJh
c2UuZGV2KTsNCj4gQEAgLTMzNTQsNiArMzU3Niw3IEBAIHBhbnRob3Jfam9iX2NyZWF0ZShzdHJ1
Y3QgcGFudGhvcl9maWxlICpwZmlsZSwNCj4gIHsNCj4gIAlzdHJ1Y3QgcGFudGhvcl9ncm91cF9w
b29sICpncG9vbCA9IHBmaWxlLT5ncm91cHM7DQo+ICAJc3RydWN0IHBhbnRob3Jfam9iICpqb2I7
DQo+ICsJdTMyIGNyZWRpdHM7DQo+ICAJaW50IHJldDsNCj4gIA0KPiAgCWlmIChxc3VibWl0LT5w
YWQpDQo+IEBAIC0zNDA3LDkgKzM2MzAsMTYgQEAgcGFudGhvcl9qb2JfY3JlYXRlKHN0cnVjdCBw
YW50aG9yX2ZpbGUgKnBmaWxlLA0KPiAgCQl9DQo+ICAJfQ0KPiAgDQo+ICsJam9iLT5wcm9maWxp
bmcubWFzayA9IHBmaWxlLT5wdGRldi0+cHJvZmlsZV9tYXNrOw0KPiArCWNyZWRpdHMgPSBjYWxj
X2pvYl9jcmVkaXRzKGpvYi0+cHJvZmlsaW5nLm1hc2spOw0KPiArCWlmIChjcmVkaXRzID09IDAp
IHsNCj4gKwkJcmV0ID0gLUVJTlZBTDsNCj4gKwkJZ290byBlcnJfcHV0X2pvYjsNCj4gKwl9DQo+
ICsNCj4gIAlyZXQgPSBkcm1fc2NoZWRfam9iX2luaXQoJmpvYi0+YmFzZSwNCj4gIAkJCQkgJmpv
Yi0+Z3JvdXAtPnF1ZXVlc1tqb2ItPnF1ZXVlX2lkeF0tPmVudGl0eSwNCj4gLQkJCQkgMSwgam9i
LT5ncm91cCk7DQo+ICsJCQkJIGNyZWRpdHMsIGpvYi0+Z3JvdXApOw0KPiAgCWlmIChyZXQpDQo+
ICAJCWdvdG8gZXJyX3B1dF9qb2I7DQo+ICANCg0KX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KTGluYXJvLW1tLXNpZyBtYWlsaW5nIGxpc3QgLS0gbGluYXJv
LW1tLXNpZ0BsaXN0cy5saW5hcm8ub3JnClRvIHVuc3Vic2NyaWJlIHNlbmQgYW4gZW1haWwgdG8g
bGluYXJvLW1tLXNpZy1sZWF2ZUBsaXN0cy5saW5hcm8ub3JnCg==
