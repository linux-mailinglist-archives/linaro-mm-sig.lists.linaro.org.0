Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id CC4944B8065
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 16 Feb 2022 07:15:32 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 089223EE95
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 16 Feb 2022 06:15:32 +0000 (UTC)
Received: from mail-ej1-f47.google.com (mail-ej1-f47.google.com [209.85.218.47])
	by lists.linaro.org (Postfix) with ESMTPS id BD8F83EEB1
	for <linaro-mm-sig@lists.linaro.org>; Fri, 11 Feb 2022 12:50:21 +0000 (UTC)
Received: by mail-ej1-f47.google.com with SMTP id fy20so22562699ejc.0
        for <linaro-mm-sig@lists.linaro.org>; Fri, 11 Feb 2022 04:50:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20210112;
        h=from:to:subject:date:message-id:in-reply-to:references:mime-version
         :content-transfer-encoding;
        bh=+X2ZHoae4I2ZOPFBs2L5T9wnWhXAeJMn9nnOpISw13s=;
        b=Ymug2FQFKck+de+lHRTcyp+7dmclzDWblSjAMpUUkPxwmz/9mtzqfpL6hn5YAOMmtc
         D2V5jDxQoXA5iyd/b3u5vrZDChhZzIJCwl3z1GIC+DccAAX4t+UqQP8cxPMT8Ts/PFvk
         j+aMSwxaAMBsRW+IivoHiD6x8XcMo8fc+YiFLq54cWMsSLNSBmDsL+2MWzqW5itlnIgj
         6mqbCm6v+eAeTHY/3UDCuy/VZF2MTHPsAPKkmMIgkE9GAqSYrlcC2RqmtmNGbWQN1w2h
         AbNc03zWcivcOJsKseSjMc8OtF3OrFIc84pD5ql4yvwKQX9aRnLRBzIfrg0/C6dZOA2D
         tM4Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
         :references:mime-version:content-transfer-encoding;
        bh=+X2ZHoae4I2ZOPFBs2L5T9wnWhXAeJMn9nnOpISw13s=;
        b=HJI9u5n6Cg4dafNHyXUICdxw+GlGlWnVT1WQIiaDoLH3QKSW4dSUrKbcAHw/1KCYZX
         e7fl1gPCfWopYI7nD3nZAQVtfaSf2SwPkHBDFMylO1pIw3ExqU54kGT5dSx0biKbYu30
         8bsAgHctzSjJ2yJX/GqIquWbeb6z5g+aCHKrzLucWwWBLak5YMITLe0Mw7lG0A1yWsmu
         N5MbdHjetuIVtomdlbrR7mwPi/1QWBErV9rhso/XMralppz966N+gU4BqQ/irmnsxiUe
         gJSfi55/rqkyhe1GP5rFGhBux7cG2RrV5+1vsLM3YDAYHhTyWsXNxKMJb7nqzctlYhs8
         T2gA==
X-Gm-Message-State: AOAM531GfsMn0bcLri2xyFujurCXK7IAM02Nt5X/x0fh1Xazob+h0nnI
	j2ZvxFIpsgQWpMrt2BE/3Rw=
X-Google-Smtp-Source: ABdhPJwZpmq3b+ogi0nGjYWvjU/0PbgNoSncKZaFbNbnBE8gVjwChB3EEvpzDPfiMzMtJAV7pZAccQ==
X-Received: by 2002:a17:907:948f:: with SMTP id dm15mr1240389ejc.209.1644583820482;
        Fri, 11 Feb 2022 04:50:20 -0800 (PST)
Received: from able.fritz.box (p57b0bff8.dip0.t-ipconnect.de. [87.176.191.248])
        by smtp.gmail.com with ESMTPSA id w22sm7868604ejc.137.2022.02.11.04.50.19
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Fri, 11 Feb 2022 04:50:20 -0800 (PST)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
To: daniel@ffwll.ch,
	sumit.semwal@linaro.org,
	dri-devel@lists.freedesktop.org,
	linaro-mm-sig@lists.linaro.org
Date: Fri, 11 Feb 2022 13:49:56 +0100
Message-Id: <20220211125003.918447-17-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20220211125003.918447-1-christian.koenig@amd.com>
References: <20220211125003.918447-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-MailFrom: ckoenig.leichtzumerken@gmail.com
X-Mailman-Rule-Hits: max-size
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; nonmember-moderation; administrivia; implicit-dest; max-recipients; news-moderation; no-subject; digests; suspicious-header
Message-ID-Hash: RMLE2S7DXVPBHUZUR4HC6UNP6YDDP2VY
X-Message-ID-Hash: RMLE2S7DXVPBHUZUR4HC6UNP6YDDP2VY
X-Mailman-Approved-At: Wed, 16 Feb 2022 06:15:28 +0000
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH 16/23] dma-buf: add enum dma_resv_usage v3
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/RMLE2S7DXVPBHUZUR4HC6UNP6YDDP2VY/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

VGhpcyBjaGFuZ2UgYWRkcyB0aGUgZG1hX3Jlc3ZfdXNhZ2UgZW51bSBhbmQgYWxsb3dzIHVzIHRv
IHNwZWNpZnkgd2h5IGENCmRtYV9yZXN2IG9iamVjdCBpcyBxdWVyaWVkIGZvciBpdHMgY29udGFp
bmluZyBmZW5jZXMuDQoNCkFkZGl0aW9uYWwgdG8gdGhhdCBhIGRtYV9yZXN2X3VzYWdlX3J3KCkg
aGVscGVyIGZ1bmN0aW9uIGlzIGFkZGVkIHRvIGFpZA0KcmV0cmlldmluZyB0aGUgZmVuY2VzIGZv
ciBhIHJlYWQgb3Igd3JpdGUgdXNlcnNwYWNlIHN1Ym1pc3Npb24uDQoNClRoaXMgaXMgdGhlbiBk
ZXBsb3llZCB0byB0aGUgZGlmZmVyZW50IHF1ZXJ5IGZ1bmN0aW9ucyBvZiB0aGUgZG1hX3Jlc3YN
Cm9iamVjdCBhbmQgYWxsIG9mIHRoZWlyIHVzZXJzLiBXaGVuIHRoZSB3cml0ZSBwYXJhdGVybWVy
IHdhcyBwcmV2aW91c2x5DQp0cnVlIHdlIG5vdyB1c2UgRE1BX1JFU1ZfVVNBR0VfV1JJVEUgYW5k
IERNQV9SRVNWX1VTQUdFX1JFQUQgb3RoZXJ3aXNlLg0KDQp2MjogYWRkIEtFUk5FTC9PVEhFUiBp
biBzZXBhcmF0ZSBwYXRjaA0KdjM6IHNvbWUga2VybmVsZG9jIHN1Z2dlc3Rpb25zIGJ5IERhbmll
bA0KDQpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFt
ZC5jb20+DQotLS0NCiBkcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jICAgICAgICAgICAgICAgICAg
ICAgfCAgMyArLQ0KIGRyaXZlcnMvZG1hLWJ1Zi9kbWEtcmVzdi5jICAgICAgICAgICAgICAgICAg
ICB8IDMzICsrKysrLS0tLQ0KIGRyaXZlcnMvZG1hLWJ1Zi9zdC1kbWEtcmVzdi5jICAgICAgICAg
ICAgICAgICB8IDQ4ICsrKysrKy0tLS0tLS0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9h
bWRncHVfY3MuYyAgICAgICAgfCAgNCArLQ0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9kaXNwbGF5LmMgICB8ICAzICstDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2dlbS5jICAgICAgIHwgIDMgKy0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfaWRzLmMgICAgICAgfCAgNSArLQ0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdw
dV9tbi5jICAgICAgICB8ICA0ICstDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X29iamVjdC5jICAgIHwgIDQgKy0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
c3luYy5jICAgICAgfCAgMyArLQ0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90
dG0uYyAgICAgICB8ICAzICstDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3V2
ZC5jICAgICAgIHwgIDMgKy0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0u
YyAgICAgICAgfCAgNyArLQ0KIC4uLi9ncHUvZHJtL2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRn
cHVfZG0uYyB8ICAzICstDQogZHJpdmVycy9ncHUvZHJtL2RybV9nZW0uYyAgICAgICAgICAgICAg
ICAgICAgIHwgIDYgKy0NCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9hdG9taWNfaGVscGVyLmMg
ICAgICAgfCAgMiArLQ0KIGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmMgICAg
ICAgICB8ICA2ICstDQogZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW1fc3VibWl0
LmMgIHwgIDcgKy0NCiAuLi4vZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljX3BsYW5l
LmMgfCAgMyArLQ0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9idXN5LmMgICAg
ICB8ICA0ICstDQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2xtZW0uYyAgICAg
IHwgIDIgKy0NCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jICAg
fCAgMiArLQ0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV93YWl0LmMgICAgICB8
ICA2ICstDQogLi4uL2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMgIHwg
IDMgKy0NCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyAgICAgICAgICAgfCAg
MyArLQ0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc3dfZmVuY2UuYyAgICAgICAgICB8ICAy
ICstDQogZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtLmMgICAgICAgICAgICAgICAgIHwgIDMg
Ky0NCiBkcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9kaXNwbnY1MC93bmR3LmMgICAgICAgfCAgMyAr
LQ0KIGRyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYyAgICAgICAgICB8ICA4ICst
LQ0KIGRyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZmVuY2UuYyAgICAgICB8ICA4ICsr
LQ0KIGRyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZ2VtLmMgICAgICAgICB8ICAzICst
DQogZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jICAgICAgIHwgIDMgKy0N
CiBkcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9kZWJ1Z2ZzLmMgICAgICAgICAgICAgfCAgMyArLQ0K
IGRyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2Rpc3BsYXkuYyAgICAgICB8ICAzICstDQog
ZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fZ2VtLmMgICAgICAgICAgIHwgIDkgKystDQog
ZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fbW4uYyAgICAgICAgICAgIHwgIDQgKy0NCiBk
cml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9zeW5jLmMgICAgICAgICAgfCAgMiArLQ0KIGRy
aXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3V2ZC5jICAgICAgICAgICB8ICA0ICstDQogZHJp
dmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMgICAgICAgIHwgIDMgKy0NCiBkcml2
ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jICAgICAgICAgICAgICAgICAgfCAxOCArKy0tLQ0KIGRy
aXZlcnMvZ3B1L2RybS92Z2VtL3ZnZW1fZmVuY2UuYyAgICAgICAgICAgICB8ICA0ICstDQogZHJp
dmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2lvY3RsLmMgICAgICAgIHwgIDUgKy0NCiBkcml2
ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9iby5jICAgICAgICAgICAgfCAgNCArLQ0KIGRyaXZl
cnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3Jlc291cmNlLmMgICAgICB8ICA0ICstDQogZHJpdmVy
cy9pbmZpbmliYW5kL2NvcmUvdW1lbV9kbWFidWYuYyAgICAgICAgIHwgIDMgKy0NCiBpbmNsdWRl
L2xpbnV4L2RtYS1yZXN2LmggICAgICAgICAgICAgICAgICAgICAgfCA2OSArKysrKysrKysrKysr
KystLS0tDQogNDYgZmlsZXMgY2hhbmdlZCwgMjA4IGluc2VydGlvbnMoKyksIDEyNyBkZWxldGlv
bnMoLSkNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMgYi9kcml2ZXJz
L2RtYS1idWYvZG1hLWJ1Zi5jDQppbmRleCA2MDJiMTJkNzQ3MGQuLjUyODk4M2QzYmE2NCAxMDA2
NDQNCi0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMNCisrKyBiL2RyaXZlcnMvZG1hLWJ1
Zi9kbWEtYnVmLmMNCkBAIC0xMTI0LDcgKzExMjQsOCBAQCBzdGF0aWMgaW50IF9fZG1hX2J1Zl9i
ZWdpbl9jcHVfYWNjZXNzKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsDQogCWxvbmcgcmV0Ow0KIA0K
IAkvKiBXYWl0IG9uIGFueSBpbXBsaWNpdCByZW5kZXJpbmcgZmVuY2VzICovDQotCXJldCA9IGRt
YV9yZXN2X3dhaXRfdGltZW91dChyZXN2LCB3cml0ZSwgdHJ1ZSwgTUFYX1NDSEVEVUxFX1RJTUVP
VVQpOw0KKwlyZXQgPSBkbWFfcmVzdl93YWl0X3RpbWVvdXQocmVzdiwgZG1hX3Jlc3ZfdXNhZ2Vf
cncod3JpdGUpLA0KKwkJCQkgICAgdHJ1ZSwgTUFYX1NDSEVEVUxFX1RJTUVPVVQpOw0KIAlpZiAo
cmV0IDwgMCkNCiAJCXJldHVybiByZXQ7DQogDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVm
L2RtYS1yZXN2LmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLXJlc3YuYw0KaW5kZXggY2NlZjVlNTNm
OGU3Li4wMTgwMzQ4ZjMyZjggMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2RtYS1idWYvZG1hLXJlc3Yu
Yw0KKysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMNCkBAIC0zODIsNyArMzgyLDcgQEAg
c3RhdGljIHZvaWQgZG1hX3Jlc3ZfaXRlcl9yZXN0YXJ0X3VubG9ja2VkKHN0cnVjdCBkbWFfcmVz
dl9pdGVyICpjdXJzb3IpDQogCWN1cnNvci0+c2VxID0gcmVhZF9zZXFjb3VudF9iZWdpbigmY3Vy
c29yLT5vYmotPnNlcSk7DQogCWN1cnNvci0+aW5kZXggPSAtMTsNCiAJY3Vyc29yLT5zaGFyZWRf
Y291bnQgPSAwOw0KLQlpZiAoY3Vyc29yLT5hbGxfZmVuY2VzKSB7DQorCWlmIChjdXJzb3ItPnVz
YWdlID49IERNQV9SRVNWX1VTQUdFX1JFQUQpIHsNCiAJCWN1cnNvci0+ZmVuY2VzID0gZG1hX3Jl
c3Zfc2hhcmVkX2xpc3QoY3Vyc29yLT5vYmopOw0KIAkJaWYgKGN1cnNvci0+ZmVuY2VzKQ0KIAkJ
CWN1cnNvci0+c2hhcmVkX2NvdW50ID0gY3Vyc29yLT5mZW5jZXMtPnNoYXJlZF9jb3VudDsNCkBA
IC00OTQsNyArNDk0LDcgQEAgc3RydWN0IGRtYV9mZW5jZSAqZG1hX3Jlc3ZfaXRlcl9maXJzdChz
dHJ1Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vyc29yKQ0KIAlkbWFfcmVzdl9hc3NlcnRfaGVsZChjdXJz
b3ItPm9iaik7DQogDQogCWN1cnNvci0+aW5kZXggPSAwOw0KLQlpZiAoY3Vyc29yLT5hbGxfZmVu
Y2VzKQ0KKwlpZiAoY3Vyc29yLT51c2FnZSA+PSBETUFfUkVTVl9VU0FHRV9SRUFEKQ0KIAkJY3Vy
c29yLT5mZW5jZXMgPSBkbWFfcmVzdl9zaGFyZWRfbGlzdChjdXJzb3ItPm9iaik7DQogCWVsc2UN
CiAJCWN1cnNvci0+ZmVuY2VzID0gTlVMTDsNCkBAIC01NDksNyArNTQ5LDcgQEAgaW50IGRtYV9y
ZXN2X2NvcHlfZmVuY2VzKHN0cnVjdCBkbWFfcmVzdiAqZHN0LCBzdHJ1Y3QgZG1hX3Jlc3YgKnNy
YykNCiAJbGlzdCA9IE5VTEw7DQogCWV4Y2wgPSBOVUxMOw0KIA0KLQlkbWFfcmVzdl9pdGVyX2Jl
Z2luKCZjdXJzb3IsIHNyYywgdHJ1ZSk7DQorCWRtYV9yZXN2X2l0ZXJfYmVnaW4oJmN1cnNvciwg
c3JjLCBETUFfUkVTVl9VU0FHRV9SRUFEKTsNCiAJZG1hX3Jlc3ZfZm9yX2VhY2hfZmVuY2VfdW5s
b2NrZWQoJmN1cnNvciwgZikgew0KIA0KIAkJaWYgKGRtYV9yZXN2X2l0ZXJfaXNfcmVzdGFydGVk
KCZjdXJzb3IpKSB7DQpAQCAtNTk1LDcgKzU5NSw3IEBAIEVYUE9SVF9TWU1CT0woZG1hX3Jlc3Zf
Y29weV9mZW5jZXMpOw0KICAqIGRtYV9yZXN2X2dldF9mZW5jZXMgLSBHZXQgYW4gb2JqZWN0J3Mg
c2hhcmVkIGFuZCBleGNsdXNpdmUNCiAgKiBmZW5jZXMgd2l0aG91dCB1cGRhdGUgc2lkZSBsb2Nr
IGhlbGQNCiAgKiBAb2JqOiB0aGUgcmVzZXJ2YXRpb24gb2JqZWN0DQotICogQHdyaXRlOiB0cnVl
IGlmIHdlIHNob3VsZCByZXR1cm4gYWxsIGZlbmNlcw0KKyAqIEB1c2FnZTogY29udHJvbHMgd2hp
Y2ggZmVuY2VzIHRvIGluY2x1ZGUsIHNlZSBlbnVtIGRtYV9yZXN2X3VzYWdlLg0KICAqIEBudW1f
ZmVuY2VzOiB0aGUgbnVtYmVyIG9mIGZlbmNlcyByZXR1cm5lZA0KICAqIEBmZW5jZXM6IHRoZSBh
cnJheSBvZiBmZW5jZSBwdHJzIHJldHVybmVkIChhcnJheSBpcyBrcmVhbGxvYydkIHRvIHRoZQ0K
ICAqIHJlcXVpcmVkIHNpemUsIGFuZCBtdXN0IGJlIGZyZWVkIGJ5IGNhbGxlcikNCkBAIC02MDMs
NyArNjAzLDcgQEAgRVhQT1JUX1NZTUJPTChkbWFfcmVzdl9jb3B5X2ZlbmNlcyk7DQogICogUmV0
cmlldmUgYWxsIGZlbmNlcyBmcm9tIHRoZSByZXNlcnZhdGlvbiBvYmplY3QuDQogICogUmV0dXJu
cyBlaXRoZXIgemVybyBvciAtRU5PTUVNLg0KICAqLw0KLWludCBkbWFfcmVzdl9nZXRfZmVuY2Vz
KHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBib29sIHdyaXRlLA0KK2ludCBkbWFfcmVzdl9nZXRfZmVu
Y2VzKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlLA0KIAkJ
CXVuc2lnbmVkIGludCAqbnVtX2ZlbmNlcywgc3RydWN0IGRtYV9mZW5jZSAqKipmZW5jZXMpDQog
ew0KIAlzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBjdXJzb3I7DQpAQCAtNjEyLDcgKzYxMiw3IEBAIGlu
dCBkbWFfcmVzdl9nZXRfZmVuY2VzKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBib29sIHdyaXRlLA0K
IAkqbnVtX2ZlbmNlcyA9IDA7DQogCSpmZW5jZXMgPSBOVUxMOw0KIA0KLQlkbWFfcmVzdl9pdGVy
X2JlZ2luKCZjdXJzb3IsIG9iaiwgd3JpdGUpOw0KKwlkbWFfcmVzdl9pdGVyX2JlZ2luKCZjdXJz
b3IsIG9iaiwgdXNhZ2UpOw0KIAlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZV91bmxvY2tlZCgmY3Vy
c29yLCBmZW5jZSkgew0KIA0KIAkJaWYgKGRtYV9yZXN2X2l0ZXJfaXNfcmVzdGFydGVkKCZjdXJz
b3IpKSB7DQpAQCAtNjQ0LDcgKzY0NCw3IEBAIEVYUE9SVF9TWU1CT0xfR1BMKGRtYV9yZXN2X2dl
dF9mZW5jZXMpOw0KIC8qKg0KICAqIGRtYV9yZXN2X2dldF9zaW5nbGV0b24gLSBHZXQgYSBzaW5n
bGUgZmVuY2UgZm9yIGFsbCB0aGUgZmVuY2VzDQogICogQG9iajogdGhlIHJlc2VydmF0aW9uIG9i
amVjdA0KLSAqIEB3cml0ZTogdHJ1ZSBpZiB3ZSBzaG91bGQgcmV0dXJuIGFsbCBmZW5jZXMNCisg
KiBAdXNhZ2U6IGNvbnRyb2xzIHdoaWNoIGZlbmNlcyB0byBpbmNsdWRlLCBzZWUgZW51bSBkbWFf
cmVzdl91c2FnZS4NCiAgKiBAZmVuY2U6IHRoZSByZXN1bHRpbmcgZmVuY2UNCiAgKg0KICAqIEdl
dCBhIHNpbmdsZSBmZW5jZSByZXByZXNlbnRpbmcgYWxsIHRoZSBmZW5jZXMgaW5zaWRlIHRoZSBy
ZXN2IG9iamVjdC4NCkBAIC02NTQsNyArNjU0LDcgQEAgRVhQT1JUX1NZTUJPTF9HUEwoZG1hX3Jl
c3ZfZ2V0X2ZlbmNlcyk7DQogICogb2JqZWN0IHNpbmNlIHRoYXQgY2FuIGxlYWQgdG8gc3RhY2sg
Y29ycnVwdGlvbiB3aGVuIGZpbmFsaXppbmcgdGhlDQogICogZG1hX2ZlbmNlX2FycmF5Lg0KICAq
Lw0KLWludCBkbWFfcmVzdl9nZXRfc2luZ2xldG9uKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBib29s
IHdyaXRlLA0KK2ludCBkbWFfcmVzdl9nZXRfc2luZ2xldG9uKHN0cnVjdCBkbWFfcmVzdiAqb2Jq
LCBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlLA0KIAkJCSAgIHN0cnVjdCBkbWFfZmVuY2UgKipm
ZW5jZSkNCiB7DQogCXN0cnVjdCBkbWFfZmVuY2VfYXJyYXkgKmFycmF5Ow0KQEAgLTY2Miw3ICs2
NjIsNyBAQCBpbnQgZG1hX3Jlc3ZfZ2V0X3NpbmdsZXRvbihzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwg
Ym9vbCB3cml0ZSwNCiAJdW5zaWduZWQgY291bnQ7DQogCWludCByOw0KIA0KLQlyID0gZG1hX3Jl
c3ZfZ2V0X2ZlbmNlcyhvYmosIHdyaXRlLCAmY291bnQsICZmZW5jZXMpOw0KKwlyID0gZG1hX3Jl
c3ZfZ2V0X2ZlbmNlcyhvYmosIHVzYWdlLCAmY291bnQsICZmZW5jZXMpOw0KICAgICAgICAgaWYg
KHIpDQogCQlyZXR1cm4gcjsNCiANCkBAIC02OTYsNyArNjk2LDcgQEAgRVhQT1JUX1NZTUJPTF9H
UEwoZG1hX3Jlc3ZfZ2V0X3NpbmdsZXRvbik7DQogICogZG1hX3Jlc3Zfd2FpdF90aW1lb3V0IC0g
V2FpdCBvbiByZXNlcnZhdGlvbidzIG9iamVjdHMNCiAgKiBzaGFyZWQgYW5kL29yIGV4Y2x1c2l2
ZSBmZW5jZXMuDQogICogQG9iajogdGhlIHJlc2VydmF0aW9uIG9iamVjdA0KLSAqIEB3YWl0X2Fs
bDogaWYgdHJ1ZSwgd2FpdCBvbiBhbGwgZmVuY2VzLCBlbHNlIHdhaXQgb24ganVzdCBleGNsdXNp
dmUgZmVuY2UNCisgKiBAdXNhZ2U6IGNvbnRyb2xzIHdoaWNoIGZlbmNlcyB0byBpbmNsdWRlLCBz
ZWUgZW51bSBkbWFfcmVzdl91c2FnZS4NCiAgKiBAaW50cjogaWYgdHJ1ZSwgZG8gaW50ZXJydXB0
aWJsZSB3YWl0DQogICogQHRpbWVvdXQ6IHRpbWVvdXQgdmFsdWUgaW4gamlmZmllcyBvciB6ZXJv
IHRvIHJldHVybiBpbW1lZGlhdGVseQ0KICAqDQpAQCAtNzA2LDE0ICs3MDYsMTQgQEAgRVhQT1JU
X1NZTUJPTF9HUEwoZG1hX3Jlc3ZfZ2V0X3NpbmdsZXRvbik7DQogICogUmV0dXJucyAtRVJFU1RB
UlRTWVMgaWYgaW50ZXJydXB0ZWQsIDAgaWYgdGhlIHdhaXQgdGltZWQgb3V0LCBvcg0KICAqIGdy
ZWF0ZXIgdGhhbiB6ZXIgb24gc3VjY2Vzcy4NCiAgKi8NCi1sb25nIGRtYV9yZXN2X3dhaXRfdGlt
ZW91dChzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgYm9vbCB3YWl0X2FsbCwgYm9vbCBpbnRyLA0KLQkJ
CSAgIHVuc2lnbmVkIGxvbmcgdGltZW91dCkNCitsb25nIGRtYV9yZXN2X3dhaXRfdGltZW91dChz
dHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSwNCisJCQkgICBi
b29sIGludHIsIHVuc2lnbmVkIGxvbmcgdGltZW91dCkNCiB7DQogCWxvbmcgcmV0ID0gdGltZW91
dCA/IHRpbWVvdXQgOiAxOw0KIAlzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBjdXJzb3I7DQogCXN0cnVj
dCBkbWFfZmVuY2UgKmZlbmNlOw0KIA0KLQlkbWFfcmVzdl9pdGVyX2JlZ2luKCZjdXJzb3IsIG9i
aiwgd2FpdF9hbGwpOw0KKwlkbWFfcmVzdl9pdGVyX2JlZ2luKCZjdXJzb3IsIG9iaiwgdXNhZ2Up
Ow0KIAlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZV91bmxvY2tlZCgmY3Vyc29yLCBmZW5jZSkgew0K
IA0KIAkJcmV0ID0gZG1hX2ZlbmNlX3dhaXRfdGltZW91dChmZW5jZSwgaW50ciwgcmV0KTsNCkBA
IC03MzMsOCArNzMzLDcgQEAgRVhQT1JUX1NZTUJPTF9HUEwoZG1hX3Jlc3Zfd2FpdF90aW1lb3V0
KTsNCiAgKiBkbWFfcmVzdl90ZXN0X3NpZ25hbGVkIC0gVGVzdCBpZiBhIHJlc2VydmF0aW9uIG9i
amVjdCdzIGZlbmNlcyBoYXZlIGJlZW4NCiAgKiBzaWduYWxlZC4NCiAgKiBAb2JqOiB0aGUgcmVz
ZXJ2YXRpb24gb2JqZWN0DQotICogQHRlc3RfYWxsOiBpZiB0cnVlLCB0ZXN0IGFsbCBmZW5jZXMs
IG90aGVyd2lzZSBvbmx5IHRlc3QgdGhlIGV4Y2x1c2l2ZQ0KLSAqIGZlbmNlDQorICogQHVzYWdl
OiBjb250cm9scyB3aGljaCBmZW5jZXMgdG8gaW5jbHVkZSwgc2VlIGVudW0gZG1hX3Jlc3ZfdXNh
Z2UuDQogICoNCiAgKiBDYWxsZXJzIGFyZSBub3QgcmVxdWlyZWQgdG8gaG9sZCBzcGVjaWZpYyBs
b2NrcywgYnV0IG1heWJlIGhvbGQNCiAgKiBkbWFfcmVzdl9sb2NrKCkgYWxyZWFkeS4NCkBAIC03
NDMsMTIgKzc0MiwxMiBAQCBFWFBPUlRfU1lNQk9MX0dQTChkbWFfcmVzdl93YWl0X3RpbWVvdXQp
Ow0KICAqDQogICogVHJ1ZSBpZiBhbGwgZmVuY2VzIHNpZ25hbGVkLCBlbHNlIGZhbHNlLg0KICAq
Lw0KLWJvb2wgZG1hX3Jlc3ZfdGVzdF9zaWduYWxlZChzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgYm9v
bCB0ZXN0X2FsbCkNCitib29sIGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWQoc3RydWN0IGRtYV9yZXN2
ICpvYmosIGVudW0gZG1hX3Jlc3ZfdXNhZ2UgdXNhZ2UpDQogew0KIAlzdHJ1Y3QgZG1hX3Jlc3Zf
aXRlciBjdXJzb3I7DQogCXN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlOw0KIA0KLQlkbWFfcmVzdl9p
dGVyX2JlZ2luKCZjdXJzb3IsIG9iaiwgdGVzdF9hbGwpOw0KKwlkbWFfcmVzdl9pdGVyX2JlZ2lu
KCZjdXJzb3IsIG9iaiwgdXNhZ2UpOw0KIAlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZV91bmxvY2tl
ZCgmY3Vyc29yLCBmZW5jZSkgew0KIAkJZG1hX3Jlc3ZfaXRlcl9lbmQoJmN1cnNvcik7DQogCQly
ZXR1cm4gZmFsc2U7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL3N0LWRtYS1yZXN2LmMg
Yi9kcml2ZXJzL2RtYS1idWYvc3QtZG1hLXJlc3YuYw0KaW5kZXggZDJlNjFmNmFlOTg5Li5kMDk3
OTgxMDYxYjEgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2RtYS1idWYvc3QtZG1hLXJlc3YuYw0KKysr
IGIvZHJpdmVycy9kbWEtYnVmL3N0LWRtYS1yZXN2LmMNCkBAIC01OCw3ICs1OCw3IEBAIHN0YXRp
YyBpbnQgc2FuaXR5Y2hlY2sodm9pZCAqYXJnKQ0KIAlyZXR1cm4gcjsNCiB9DQogDQotc3RhdGlj
IGludCB0ZXN0X3NpZ25hbGluZyh2b2lkICphcmcsIGJvb2wgc2hhcmVkKQ0KK3N0YXRpYyBpbnQg
dGVzdF9zaWduYWxpbmcodm9pZCAqYXJnLCBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlKQ0KIHsN
CiAJc3RydWN0IGRtYV9yZXN2IHJlc3Y7DQogCXN0cnVjdCBkbWFfZmVuY2UgKmY7DQpAQCAtODEs
MTggKzgxLDE4IEBAIHN0YXRpYyBpbnQgdGVzdF9zaWduYWxpbmcodm9pZCAqYXJnLCBib29sIHNo
YXJlZCkNCiAJCWdvdG8gZXJyX3VubG9jazsNCiAJfQ0KIA0KLQlpZiAoc2hhcmVkKQ0KKwlpZiAo
dXNhZ2UgPj0gRE1BX1JFU1ZfVVNBR0VfUkVBRCkNCiAJCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVu
Y2UoJnJlc3YsIGYpOw0KIAllbHNlDQogCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZSgmcmVzdiwg
Zik7DQogDQotCWlmIChkbWFfcmVzdl90ZXN0X3NpZ25hbGVkKCZyZXN2LCBzaGFyZWQpKSB7DQor
CWlmIChkbWFfcmVzdl90ZXN0X3NpZ25hbGVkKCZyZXN2LCB1c2FnZSkpIHsNCiAJCXByX2Vycigi
UmVzdiB1bmV4cGVjdGVkbHkgc2lnbmFsZWRcbiIpOw0KIAkJciA9IC1FSU5WQUw7DQogCQlnb3Rv
IGVycl91bmxvY2s7DQogCX0NCiAJZG1hX2ZlbmNlX3NpZ25hbChmKTsNCi0JaWYgKCFkbWFfcmVz
dl90ZXN0X3NpZ25hbGVkKCZyZXN2LCBzaGFyZWQpKSB7DQorCWlmICghZG1hX3Jlc3ZfdGVzdF9z
aWduYWxlZCgmcmVzdiwgdXNhZ2UpKSB7DQogCQlwcl9lcnIoIlJlc3Ygbm90IHJlcG9ydGluZyBz
aWduYWxlZFxuIik7DQogCQlyID0gLUVJTlZBTDsNCiAJCWdvdG8gZXJyX3VubG9jazsNCkBAIC0x
MDcsMTUgKzEwNywxNSBAQCBzdGF0aWMgaW50IHRlc3Rfc2lnbmFsaW5nKHZvaWQgKmFyZywgYm9v
bCBzaGFyZWQpDQogDQogc3RhdGljIGludCB0ZXN0X2V4Y2xfc2lnbmFsaW5nKHZvaWQgKmFyZykN
CiB7DQotCXJldHVybiB0ZXN0X3NpZ25hbGluZyhhcmcsIGZhbHNlKTsNCisJcmV0dXJuIHRlc3Rf
c2lnbmFsaW5nKGFyZywgRE1BX1JFU1ZfVVNBR0VfV1JJVEUpOw0KIH0NCiANCiBzdGF0aWMgaW50
IHRlc3Rfc2hhcmVkX3NpZ25hbGluZyh2b2lkICphcmcpDQogew0KLQlyZXR1cm4gdGVzdF9zaWdu
YWxpbmcoYXJnLCB0cnVlKTsNCisJcmV0dXJuIHRlc3Rfc2lnbmFsaW5nKGFyZywgRE1BX1JFU1Zf
VVNBR0VfUkVBRCk7DQogfQ0KIA0KLXN0YXRpYyBpbnQgdGVzdF9mb3JfZWFjaCh2b2lkICphcmcs
IGJvb2wgc2hhcmVkKQ0KK3N0YXRpYyBpbnQgdGVzdF9mb3JfZWFjaCh2b2lkICphcmcsIGVudW0g
ZG1hX3Jlc3ZfdXNhZ2UgdXNhZ2UpDQogew0KIAlzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBjdXJzb3I7
DQogCXN0cnVjdCBkbWFfZmVuY2UgKmYsICpmZW5jZTsNCkBAIC0xMzksMTMgKzEzOSwxMyBAQCBz
dGF0aWMgaW50IHRlc3RfZm9yX2VhY2godm9pZCAqYXJnLCBib29sIHNoYXJlZCkNCiAJCWdvdG8g
ZXJyX3VubG9jazsNCiAJfQ0KIA0KLQlpZiAoc2hhcmVkKQ0KKwlpZiAodXNhZ2UgPj0gRE1BX1JF
U1ZfVVNBR0VfUkVBRCkNCiAJCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UoJnJlc3YsIGYpOw0K
IAllbHNlDQogCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZSgmcmVzdiwgZik7DQogDQogCXIgPSAt
RU5PRU5UOw0KLQlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCAmcmVzdiwgc2hhcmVk
LCBmZW5jZSkgew0KKwlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCAmcmVzdiwgdXNh
Z2UsIGZlbmNlKSB7DQogCQlpZiAoIXIpIHsNCiAJCQlwcl9lcnIoIk1vcmUgdGhhbiBvbmUgZmVu
Y2UgZm91bmRcbiIpOw0KIAkJCXIgPSAtRUlOVkFMOw0KQEAgLTE1Niw3ICsxNTYsOCBAQCBzdGF0
aWMgaW50IHRlc3RfZm9yX2VhY2godm9pZCAqYXJnLCBib29sIHNoYXJlZCkNCiAJCQlyID0gLUVJ
TlZBTDsNCiAJCQlnb3RvIGVycl91bmxvY2s7DQogCQl9DQotCQlpZiAoZG1hX3Jlc3ZfaXRlcl9p
c19leGNsdXNpdmUoJmN1cnNvcikgIT0gIXNoYXJlZCkgew0KKwkJaWYgKGRtYV9yZXN2X2l0ZXJf
aXNfZXhjbHVzaXZlKCZjdXJzb3IpICE9DQorCQkgICAgKHVzYWdlID49IERNQV9SRVNWX1VTQUdF
X1JFQUQpKSB7DQogCQkJcHJfZXJyKCJVbmV4cGVjdGVkIGZlbmNlIHVzYWdlXG4iKTsNCiAJCQly
ID0gLUVJTlZBTDsNCiAJCQlnb3RvIGVycl91bmxvY2s7DQpAQCAtMTc4LDE1ICsxNzksMTUgQEAg
c3RhdGljIGludCB0ZXN0X2Zvcl9lYWNoKHZvaWQgKmFyZywgYm9vbCBzaGFyZWQpDQogDQogc3Rh
dGljIGludCB0ZXN0X2V4Y2xfZm9yX2VhY2godm9pZCAqYXJnKQ0KIHsNCi0JcmV0dXJuIHRlc3Rf
Zm9yX2VhY2goYXJnLCBmYWxzZSk7DQorCXJldHVybiB0ZXN0X2Zvcl9lYWNoKGFyZywgRE1BX1JF
U1ZfVVNBR0VfV1JJVEUpOw0KIH0NCiANCiBzdGF0aWMgaW50IHRlc3Rfc2hhcmVkX2Zvcl9lYWNo
KHZvaWQgKmFyZykNCiB7DQotCXJldHVybiB0ZXN0X2Zvcl9lYWNoKGFyZywgdHJ1ZSk7DQorCXJl
dHVybiB0ZXN0X2Zvcl9lYWNoKGFyZywgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7DQogfQ0KIA0KLXN0
YXRpYyBpbnQgdGVzdF9mb3JfZWFjaF91bmxvY2tlZCh2b2lkICphcmcsIGJvb2wgc2hhcmVkKQ0K
K3N0YXRpYyBpbnQgdGVzdF9mb3JfZWFjaF91bmxvY2tlZCh2b2lkICphcmcsIGVudW0gZG1hX3Jl
c3ZfdXNhZ2UgdXNhZ2UpDQogew0KIAlzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBjdXJzb3I7DQogCXN0
cnVjdCBkbWFfZmVuY2UgKmYsICpmZW5jZTsNCkBAIC0yMTEsMTQgKzIxMiwxNCBAQCBzdGF0aWMg
aW50IHRlc3RfZm9yX2VhY2hfdW5sb2NrZWQodm9pZCAqYXJnLCBib29sIHNoYXJlZCkNCiAJCWdv
dG8gZXJyX2ZyZWU7DQogCX0NCiANCi0JaWYgKHNoYXJlZCkNCisJaWYgKHVzYWdlID49IERNQV9S
RVNWX1VTQUdFX1JFQUQpDQogCQlkbWFfcmVzdl9hZGRfc2hhcmVkX2ZlbmNlKCZyZXN2LCBmKTsN
CiAJZWxzZQ0KIAkJZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2UoJnJlc3YsIGYpOw0KIAlkbWFfcmVz
dl91bmxvY2soJnJlc3YpOw0KIA0KIAlyID0gLUVOT0VOVDsNCi0JZG1hX3Jlc3ZfaXRlcl9iZWdp
bigmY3Vyc29yLCAmcmVzdiwgc2hhcmVkKTsNCisJZG1hX3Jlc3ZfaXRlcl9iZWdpbigmY3Vyc29y
LCAmcmVzdiwgdXNhZ2UpOw0KIAlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZV91bmxvY2tlZCgmY3Vy
c29yLCBmZW5jZSkgew0KIAkJaWYgKCFyKSB7DQogCQkJcHJfZXJyKCJNb3JlIHRoYW4gb25lIGZl
bmNlIGZvdW5kXG4iKTsNCkBAIC0yMzQsNyArMjM1LDggQEAgc3RhdGljIGludCB0ZXN0X2Zvcl9l
YWNoX3VubG9ja2VkKHZvaWQgKmFyZywgYm9vbCBzaGFyZWQpDQogCQkJciA9IC1FSU5WQUw7DQog
CQkJZ290byBlcnJfaXRlcl9lbmQ7DQogCQl9DQotCQlpZiAoZG1hX3Jlc3ZfaXRlcl9pc19leGNs
dXNpdmUoJmN1cnNvcikgIT0gIXNoYXJlZCkgew0KKwkJaWYgKGRtYV9yZXN2X2l0ZXJfaXNfZXhj
bHVzaXZlKCZjdXJzb3IpICE9DQorCQkgICAgKHVzYWdlID49IERNQV9SRVNWX1VTQUdFX1JFQUQp
KSB7DQogCQkJcHJfZXJyKCJVbmV4cGVjdGVkIGZlbmNlIHVzYWdlXG4iKTsNCiAJCQlyID0gLUVJ
TlZBTDsNCiAJCQlnb3RvIGVycl9pdGVyX2VuZDsNCkBAIC0yNjIsMTUgKzI2NCwxNSBAQCBzdGF0
aWMgaW50IHRlc3RfZm9yX2VhY2hfdW5sb2NrZWQodm9pZCAqYXJnLCBib29sIHNoYXJlZCkNCiAN
CiBzdGF0aWMgaW50IHRlc3RfZXhjbF9mb3JfZWFjaF91bmxvY2tlZCh2b2lkICphcmcpDQogew0K
LQlyZXR1cm4gdGVzdF9mb3JfZWFjaF91bmxvY2tlZChhcmcsIGZhbHNlKTsNCisJcmV0dXJuIHRl
c3RfZm9yX2VhY2hfdW5sb2NrZWQoYXJnLCBETUFfUkVTVl9VU0FHRV9XUklURSk7DQogfQ0KIA0K
IHN0YXRpYyBpbnQgdGVzdF9zaGFyZWRfZm9yX2VhY2hfdW5sb2NrZWQodm9pZCAqYXJnKQ0KIHsN
Ci0JcmV0dXJuIHRlc3RfZm9yX2VhY2hfdW5sb2NrZWQoYXJnLCB0cnVlKTsNCisJcmV0dXJuIHRl
c3RfZm9yX2VhY2hfdW5sb2NrZWQoYXJnLCBETUFfUkVTVl9VU0FHRV9SRUFEKTsNCiB9DQogDQot
c3RhdGljIGludCB0ZXN0X2dldF9mZW5jZXModm9pZCAqYXJnLCBib29sIHNoYXJlZCkNCitzdGF0
aWMgaW50IHRlc3RfZ2V0X2ZlbmNlcyh2b2lkICphcmcsIGVudW0gZG1hX3Jlc3ZfdXNhZ2UgdXNh
Z2UpDQogew0KIAlzdHJ1Y3QgZG1hX2ZlbmNlICpmLCAqKmZlbmNlcyA9IE5VTEw7DQogCXN0cnVj
dCBkbWFfcmVzdiByZXN2Ow0KQEAgLTI5NCwxMyArMjk2LDEzIEBAIHN0YXRpYyBpbnQgdGVzdF9n
ZXRfZmVuY2VzKHZvaWQgKmFyZywgYm9vbCBzaGFyZWQpDQogCQlnb3RvIGVycl9yZXN2Ow0KIAl9
DQogDQotCWlmIChzaGFyZWQpDQorCWlmICh1c2FnZSA+PSBETUFfUkVTVl9VU0FHRV9SRUFEKQ0K
IAkJZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZSgmcmVzdiwgZik7DQogCWVsc2UNCiAJCWRtYV9y
ZXN2X2FkZF9leGNsX2ZlbmNlKCZyZXN2LCBmKTsNCiAJZG1hX3Jlc3ZfdW5sb2NrKCZyZXN2KTsN
CiANCi0JciA9IGRtYV9yZXN2X2dldF9mZW5jZXMoJnJlc3YsIHNoYXJlZCwgJmksICZmZW5jZXMp
Ow0KKwlyID0gZG1hX3Jlc3ZfZ2V0X2ZlbmNlcygmcmVzdiwgdXNhZ2UsICZpLCAmZmVuY2VzKTsN
CiAJaWYgKHIpIHsNCiAJCXByX2VycigiZ2V0X2ZlbmNlcyBmYWlsZWRcbiIpOw0KIAkJZ290byBl
cnJfZnJlZTsNCkBAIC0zMjQsMTIgKzMyNiwxMiBAQCBzdGF0aWMgaW50IHRlc3RfZ2V0X2ZlbmNl
cyh2b2lkICphcmcsIGJvb2wgc2hhcmVkKQ0KIA0KIHN0YXRpYyBpbnQgdGVzdF9leGNsX2dldF9m
ZW5jZXModm9pZCAqYXJnKQ0KIHsNCi0JcmV0dXJuIHRlc3RfZ2V0X2ZlbmNlcyhhcmcsIGZhbHNl
KTsNCisJcmV0dXJuIHRlc3RfZ2V0X2ZlbmNlcyhhcmcsIERNQV9SRVNWX1VTQUdFX1dSSVRFKTsN
CiB9DQogDQogc3RhdGljIGludCB0ZXN0X3NoYXJlZF9nZXRfZmVuY2VzKHZvaWQgKmFyZykNCiB7
DQotCXJldHVybiB0ZXN0X2dldF9mZW5jZXMoYXJnLCB0cnVlKTsNCisJcmV0dXJuIHRlc3RfZ2V0
X2ZlbmNlcyhhcmcsIERNQV9SRVNWX1VTQUdFX1JFQUQpOw0KIH0NCiANCiBpbnQgZG1hX3Jlc3Yo
dm9pZCkNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfY3Mu
YyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jDQppbmRleCBhZTgzZGY0
ZDBjMTAuLjk1YzQzNzBhMDU0OSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9jcy5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
Y3MuYw0KQEAgLTEyNzgsNyArMTI3OCw5IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X2NzX3N1Ym1pdChz
dHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCwNCiAJCSAqIHN1Ym1pc3Npb24gaW4gYSBkbWFfZmVu
Y2VfY2hhaW4gYW5kIGFkZCBpdCBhcyBleGNsdXNpdmUNCiAJCSAqIGZlbmNlLg0KIAkJICovDQot
CQlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCByZXN2LCBmYWxzZSwgZmVuY2UpIHsN
CisJCWRtYV9yZXN2X2Zvcl9lYWNoX2ZlbmNlKCZjdXJzb3IsIHJlc3YsDQorCQkJCQlETUFfUkVT
Vl9VU0FHRV9XUklURSwNCisJCQkJCWZlbmNlKSB7DQogCQkJYnJlYWs7DQogCQl9DQogCQlkbWFf
ZmVuY2VfY2hhaW5faW5pdChjaGFpbiwgZmVuY2UsIGRtYV9mZW5jZV9nZXQocC0+ZmVuY2UpLCAx
KTsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZGlzcGxh
eS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2Rpc3BsYXkuYw0KaW5kZXgg
ZTc2Yjk2ZDU1NTUxLi5jZWZhNDA0ZDc4NDIgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfZGlzcGxheS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfZGlzcGxheS5jDQpAQCAtMjAwLDggKzIwMCw3IEBAIGludCBhbWRncHVfZGlz
cGxheV9jcnRjX3BhZ2VfZmxpcF90YXJnZXQoc3RydWN0IGRybV9jcnRjICpjcnRjLA0KIAkJZ290
byB1bnBpbjsNCiAJfQ0KIA0KLQkvKiBUT0RPOiBVbmlmeSB0aGlzIHdpdGggb3RoZXIgZHJpdmVy
cyAqLw0KLQlyID0gZG1hX3Jlc3ZfZ2V0X2ZlbmNlcyhuZXdfYWJvLT50Ym8uYmFzZS5yZXN2LCB0
cnVlLA0KKwlyID0gZG1hX3Jlc3ZfZ2V0X2ZlbmNlcyhuZXdfYWJvLT50Ym8uYmFzZS5yZXN2LCBE
TUFfUkVTVl9VU0FHRV9XUklURSwNCiAJCQkJJndvcmstPnNoYXJlZF9jb3VudCwNCiAJCQkJJndv
cmstPnNoYXJlZCk7DQogCWlmICh1bmxpa2VseShyICE9IDApKSB7DQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2dlbS5jDQppbmRleCA5YjEyY2FiNWU2MDYuLjNhNWZlMDVjN2E3ZSAx
MDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9nZW0uYw0KKysr
IGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2dlbS5jDQpAQCAtNTI2LDcgKzUy
Niw4IEBAIGludCBhbWRncHVfZ2VtX3dhaXRfaWRsZV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LCB2b2lkICpkYXRhLA0KIAkJcmV0dXJuIC1FTk9FTlQ7DQogCX0NCiAJcm9iaiA9IGdlbV90
b19hbWRncHVfYm8oZ29iaik7DQotCXJldCA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChyb2JqLT50
Ym8uYmFzZS5yZXN2LCB0cnVlLCB0cnVlLCB0aW1lb3V0KTsNCisJcmV0ID0gZG1hX3Jlc3Zfd2Fp
dF90aW1lb3V0KHJvYmotPnRiby5iYXNlLnJlc3YsIERNQV9SRVNWX1VTQUdFX1JFQUQsDQorCQkJ
CSAgICB0cnVlLCB0aW1lb3V0KTsNCiANCiAJLyogcmV0ID09IDAgbWVhbnMgbm90IHNpZ25hbGVk
LA0KIAkgKiByZXQgPiAwIG1lYW5zIHNpZ25hbGVkDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lkcy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2lkcy5jDQppbmRleCA4ODhkOTcxNDMxNzcuLjQ5MGQyYTdhM2UyYiAxMDA2NDQNCi0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9pZHMuYw0KKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lkcy5jDQpAQCAtMTExLDcgKzExMSw3IEBAIHZv
aWQgYW1kZ3B1X3Bhc2lkX2ZyZWVfZGVsYXllZChzdHJ1Y3QgZG1hX3Jlc3YgKnJlc3YsDQogCXN0
cnVjdCBkbWFfZmVuY2UgKmZlbmNlOw0KIAlpbnQgcjsNCiANCi0JciA9IGRtYV9yZXN2X2dldF9z
aW5nbGV0b24ocmVzdiwgdHJ1ZSwgJmZlbmNlKTsNCisJciA9IGRtYV9yZXN2X2dldF9zaW5nbGV0
b24ocmVzdiwgRE1BX1JFU1ZfVVNBR0VfUkVBRCwgJmZlbmNlKTsNCiAJaWYgKHIpDQogCQlnb3Rv
IGZhbGxiYWNrOw0KIA0KQEAgLTEzOSw3ICsxMzksOCBAQCB2b2lkIGFtZGdwdV9wYXNpZF9mcmVl
X2RlbGF5ZWQoc3RydWN0IGRtYV9yZXN2ICpyZXN2LA0KIAkvKiBOb3QgZW5vdWdoIG1lbW9yeSBm
b3IgdGhlIGRlbGF5ZWQgZGVsZXRlLCBhcyBsYXN0IHJlc29ydA0KIAkgKiBibG9jayBmb3IgYWxs
IHRoZSBmZW5jZXMgdG8gY29tcGxldGUuDQogCSAqLw0KLQlkbWFfcmVzdl93YWl0X3RpbWVvdXQo
cmVzdiwgdHJ1ZSwgZmFsc2UsIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsNCisJZG1hX3Jlc3Zfd2Fp
dF90aW1lb3V0KHJlc3YsIERNQV9SRVNWX1VTQUdFX1JFQUQsDQorCQkJICAgICAgZmFsc2UsIE1B
WF9TQ0hFRFVMRV9USU1FT1VUKTsNCiAJYW1kZ3B1X3Bhc2lkX2ZyZWUocGFzaWQpOw0KIH0NCiAN
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfbW4uYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9tbi5jDQppbmRleCA0YjE1M2RhZjI4M2Qu
Ljg2ZjUyNDg2NzZiMCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9tbi5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfbW4uYw0K
QEAgLTc1LDggKzc1LDggQEAgc3RhdGljIGJvb2wgYW1kZ3B1X21uX2ludmFsaWRhdGVfZ2Z4KHN0
cnVjdCBtbXVfaW50ZXJ2YWxfbm90aWZpZXIgKm1uaSwNCiANCiAJbW11X2ludGVydmFsX3NldF9z
ZXEobW5pLCBjdXJfc2VxKTsNCiANCi0JciA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChiby0+dGJv
LmJhc2UucmVzdiwgdHJ1ZSwgZmFsc2UsDQotCQkJCSAgTUFYX1NDSEVEVUxFX1RJTUVPVVQpOw0K
KwlyID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGJvLT50Ym8uYmFzZS5yZXN2LCBETUFfUkVTVl9V
U0FHRV9SRUFELA0KKwkJCQkgIGZhbHNlLCBNQVhfU0NIRURVTEVfVElNRU9VVCk7DQogCW11dGV4
X3VubG9jaygmYWRldi0+bm90aWZpZXJfbG9jayk7DQogCWlmIChyIDw9IDApDQogCQlEUk1fRVJS
T1IoIiglbGQpIGZhaWxlZCB0byB3YWl0IGZvciB1c2VyIGJvXG4iLCByKTsNCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMNCmluZGV4IGVhNjNhMGQxMzYyMS4uMTY4
YmFjNjYwYWUyIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X29iamVjdC5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0
LmMNCkBAIC03NjUsOCArNzY1LDggQEAgaW50IGFtZGdwdV9ib19rbWFwKHN0cnVjdCBhbWRncHVf
Ym8gKmJvLCB2b2lkICoqcHRyKQ0KIAkJcmV0dXJuIDA7DQogCX0NCiANCi0JciA9IGRtYV9yZXN2
X3dhaXRfdGltZW91dChiby0+dGJvLmJhc2UucmVzdiwgZmFsc2UsIGZhbHNlLA0KLQkJCQkgIE1B
WF9TQ0hFRFVMRV9USU1FT1VUKTsNCisJciA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChiby0+dGJv
LmJhc2UucmVzdiwgRE1BX1JFU1ZfVVNBR0VfV1JJVEUsDQorCQkJCSAgZmFsc2UsIE1BWF9TQ0hF
RFVMRV9USU1FT1VUKTsNCiAJaWYgKHIgPCAwKQ0KIAkJcmV0dXJuIHI7DQogDQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuYyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9zeW5jLmMNCmluZGV4IDQwZTA2NzQ1ZmFlOS4uNzQ0ZTE0
NGU1ZmMyIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5
bmMuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuYw0KQEAg
LTI1OSw3ICsyNTksOCBAQCBpbnQgYW1kZ3B1X3N5bmNfcmVzdihzdHJ1Y3QgYW1kZ3B1X2Rldmlj
ZSAqYWRldiwgc3RydWN0IGFtZGdwdV9zeW5jICpzeW5jLA0KIAlpZiAocmVzdiA9PSBOVUxMKQ0K
IAkJcmV0dXJuIC1FSU5WQUw7DQogDQotCWRtYV9yZXN2X2Zvcl9lYWNoX2ZlbmNlKCZjdXJzb3Is
IHJlc3YsIHRydWUsIGYpIHsNCisJLyogVE9ETzogVXNlIERNQV9SRVNWX1VTQUdFX1JFQUQgaGVy
ZSAqLw0KKwlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCByZXN2LCBETUFfUkVTVl9V
U0FHRV9SRUFELCBmKSB7DQogCQlkbWFfZmVuY2VfY2hhaW5fZm9yX2VhY2goZiwgZikgew0KIAkJ
CXN0cnVjdCBkbWFfZmVuY2UgKnRtcCA9IGRtYV9mZW5jZV9jaGFpbl9jb250YWluZWQoZik7DQog
DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIGIv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jDQppbmRleCBkMTc4ZmJlYzcw
NDguLmY2NDY4MGQzMDE1MCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV90dG0uYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0
bS5jDQpAQCAtMTM1Niw3ICsxMzU2LDggQEAgc3RhdGljIGJvb2wgYW1kZ3B1X3R0bV9ib19ldmlj
dGlvbl92YWx1YWJsZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLA0KIAkgKiBJZiB0cnVl
LCB0aGVuIHJldHVybiBmYWxzZSBhcyBhbnkgS0ZEIHByb2Nlc3MgbmVlZHMgYWxsIGl0cyBCT3Mg
dG8NCiAJICogYmUgcmVzaWRlbnQgdG8gcnVuIHN1Y2Nlc3NmdWxseQ0KIAkgKi8NCi0JZG1hX3Jl
c3ZfZm9yX2VhY2hfZmVuY2UoJnJlc3ZfY3Vyc29yLCBiby0+YmFzZS5yZXN2LCB0cnVlLCBmKSB7
DQorCWRtYV9yZXN2X2Zvcl9lYWNoX2ZlbmNlKCZyZXN2X2N1cnNvciwgYm8tPmJhc2UucmVzdiwN
CisJCQkJRE1BX1JFU1ZfVVNBR0VfUkVBRCwgZikgew0KIAkJaWYgKGFtZGtmZF9mZW5jZV9jaGVj
a19tbShmLCBjdXJyZW50LT5tbSkpDQogCQkJcmV0dXJuIGZhbHNlOw0KIAl9DQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3V2ZC5jIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3V2ZC5jDQppbmRleCA2ZjhkZTExYTE3ZjEuLjMzZGViMGRm
NjJmZCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV91dmQu
Yw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3V2ZC5jDQpAQCAtMTE2
Miw3ICsxMTYyLDggQEAgc3RhdGljIGludCBhbWRncHVfdXZkX3NlbmRfbXNnKHN0cnVjdCBhbWRn
cHVfcmluZyAqcmluZywgc3RydWN0IGFtZGdwdV9ibyAqYm8sDQogCWliLT5sZW5ndGhfZHcgPSAx
NjsNCiANCiAJaWYgKGRpcmVjdCkgew0KLQkJciA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChiby0+
dGJvLmJhc2UucmVzdiwgdHJ1ZSwgZmFsc2UsDQorCQlyID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0
KGJvLT50Ym8uYmFzZS5yZXN2LA0KKwkJCQkJICBETUFfUkVTVl9VU0FHRV9XUklURSwgZmFsc2Us
DQogCQkJCQkgIG1zZWNzX3RvX2ppZmZpZXMoMTApKTsNCiAJCWlmIChyID09IDApDQogCQkJciA9
IC1FVElNRURPVVQ7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X3ZtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm0uYw0KaW5kZXgg
MGFiODUyODBlOGVkLi5mMzIzNWFhZDcyODIgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdm0uYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3ZtLmMNCkBAIC0yMTA1LDcgKzIxMDUsNyBAQCBzdGF0aWMgdm9pZCBhbWRncHVfdm1f
cHJ0X2Zpbmkoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVjdCBhbWRncHVfdm0gKnZt
KQ0KIAlzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBjdXJzb3I7DQogCXN0cnVjdCBkbWFfZmVuY2UgKmZl
bmNlOw0KIA0KLQlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCByZXN2LCB0cnVlLCBm
ZW5jZSkgew0KKwlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCByZXN2LCBETUFfUkVT
Vl9VU0FHRV9SRUFELCBmZW5jZSkgew0KIAkJLyogQWRkIGEgY2FsbGJhY2sgZm9yIGVhY2ggZmVu
Y2UgaW4gdGhlIHJlc2VydmF0aW9uIG9iamVjdCAqLw0KIAkJYW1kZ3B1X3ZtX3BydF9nZXQoYWRl
dik7DQogCQlhbWRncHVfdm1fYWRkX3BydF9jYihhZGV2LCBmZW5jZSk7DQpAQCAtMjcwNyw3ICsy
NzA3LDcgQEAgYm9vbCBhbWRncHVfdm1fZXZpY3RhYmxlKHN0cnVjdCBhbWRncHVfYm8gKmJvKQ0K
IAkJcmV0dXJuIHRydWU7DQogDQogCS8qIERvbid0IGV2aWN0IFZNIHBhZ2UgdGFibGVzIHdoaWxl
IHRoZXkgYXJlIGJ1c3kgKi8NCi0JaWYgKCFkbWFfcmVzdl90ZXN0X3NpZ25hbGVkKGJvLT50Ym8u
YmFzZS5yZXN2LCB0cnVlKSkNCisJaWYgKCFkbWFfcmVzdl90ZXN0X3NpZ25hbGVkKGJvLT50Ym8u
YmFzZS5yZXN2LCBETUFfUkVTVl9VU0FHRV9SRUFEKSkNCiAJCXJldHVybiBmYWxzZTsNCiANCiAJ
LyogVHJ5IHRvIGJsb2NrIG9uZ29pbmcgdXBkYXRlcyAqLw0KQEAgLTI4ODcsNyArMjg4Nyw4IEBA
IHZvaWQgYW1kZ3B1X3ZtX2FkanVzdF9zaXplKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCB1
aW50MzJfdCBtaW5fdm1fc2l6ZSwNCiAgKi8NCiBsb25nIGFtZGdwdV92bV93YWl0X2lkbGUoc3Ry
dWN0IGFtZGdwdV92bSAqdm0sIGxvbmcgdGltZW91dCkNCiB7DQotCXRpbWVvdXQgPSBkbWFfcmVz
dl93YWl0X3RpbWVvdXQodm0tPnJvb3QuYm8tPnRiby5iYXNlLnJlc3YsIHRydWUsDQorCXRpbWVv
dXQgPSBkbWFfcmVzdl93YWl0X3RpbWVvdXQodm0tPnJvb3QuYm8tPnRiby5iYXNlLnJlc3YsDQor
CQkJCQlETUFfUkVTVl9VU0FHRV9SRUFELA0KIAkJCQkJdHJ1ZSwgdGltZW91dCk7DQogCWlmICh0
aW1lb3V0IDw9IDApDQogCQlyZXR1cm4gdGltZW91dDsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2Rpc3BsYXkvYW1kZ3B1X2RtL2FtZGdwdV9kbS5jIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9kaXNwbGF5L2FtZGdwdV9kbS9hbWRncHVfZG0uYw0KaW5kZXggMGVlYjM5NGU5NDljLi5j
OTUzMjY0MjU1OWMgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1k
Z3B1X2RtL2FtZGdwdV9kbS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Rpc3BsYXkvYW1k
Z3B1X2RtL2FtZGdwdV9kbS5jDQpAQCAtOTE5OSw3ICs5MTk5LDggQEAgc3RhdGljIHZvaWQgYW1k
Z3B1X2RtX2NvbW1pdF9wbGFuZXMoc3RydWN0IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlLA0KIAkJ
ICogZGVhZGxvY2sgZHVyaW5nIEdQVSByZXNldCB3aGVuIHRoaXMgZmVuY2Ugd2lsbCBub3Qgc2ln
bmFsDQogCQkgKiBidXQgd2UgaG9sZCByZXNlcnZhdGlvbiBsb2NrIGZvciB0aGUgQk8uDQogCQkg
Ki8NCi0JCXIgPSBkbWFfcmVzdl93YWl0X3RpbWVvdXQoYWJvLT50Ym8uYmFzZS5yZXN2LCB0cnVl
LCBmYWxzZSwNCisJCXIgPSBkbWFfcmVzdl93YWl0X3RpbWVvdXQoYWJvLT50Ym8uYmFzZS5yZXN2
LA0KKwkJCQkJICBETUFfUkVTVl9VU0FHRV9XUklURSwgZmFsc2UsDQogCQkJCQkgIG1zZWNzX3Rv
X2ppZmZpZXMoNTAwMCkpOw0KIAkJaWYgKHVubGlrZWx5KHIgPD0gMCkpDQogCQkJRFJNX0VSUk9S
KCJXYWl0aW5nIGZvciBmZW5jZXMgdGltZWQgb3V0ISIpOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9kcm1fZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbS5jDQppbmRleCAzYzg4
OGRiNTllYTQuLjU0MDc5ZDc2MjA1MSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1f
Z2VtLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtLmMNCkBAIC03NzEsNyArNzcxLDgg
QEAgbG9uZyBkcm1fZ2VtX2RtYV9yZXN2X3dhaXQoc3RydWN0IGRybV9maWxlICpmaWxlcCwgdTMy
IGhhbmRsZSwNCiAJCXJldHVybiAtRUlOVkFMOw0KIAl9DQogDQotCXJldCA9IGRtYV9yZXN2X3dh
aXRfdGltZW91dChvYmotPnJlc3YsIHdhaXRfYWxsLCB0cnVlLCB0aW1lb3V0KTsNCisJcmV0ID0g
ZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KG9iai0+cmVzdiwgZG1hX3Jlc3ZfdXNhZ2Vfcncod2FpdF9h
bGwpLA0KKwkJCQkgICAgdHJ1ZSwgdGltZW91dCk7DQogCWlmIChyZXQgPT0gMCkNCiAJCXJldCA9
IC1FVElNRTsNCiAJZWxzZSBpZiAocmV0ID4gMCkNCkBAIC0xMzQ1LDcgKzEzNDYsOCBAQCBpbnQg
ZHJtX2dlbV9mZW5jZV9hcnJheV9hZGRfaW1wbGljaXQoc3RydWN0IHhhcnJheSAqZmVuY2VfYXJy
YXksDQogCXN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlOw0KIAlpbnQgcmV0ID0gMDsNCiANCi0JZG1h
X3Jlc3ZfZm9yX2VhY2hfZmVuY2UoJmN1cnNvciwgb2JqLT5yZXN2LCB3cml0ZSwgZmVuY2UpIHsN
CisJZG1hX3Jlc3ZfZm9yX2VhY2hfZmVuY2UoJmN1cnNvciwgb2JqLT5yZXN2LCBkbWFfcmVzdl91
c2FnZV9ydyh3cml0ZSksDQorCQkJCWZlbmNlKSB7DQogCQlyZXQgPSBkcm1fZ2VtX2ZlbmNlX2Fy
cmF5X2FkZChmZW5jZV9hcnJheSwgZmVuY2UpOw0KIAkJaWYgKHJldCkNCiAJCQlicmVhazsNCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9hdG9taWNfaGVscGVyLmMgYi9kcml2
ZXJzL2dwdS9kcm0vZHJtX2dlbV9hdG9taWNfaGVscGVyLmMNCmluZGV4IDkzMzhkZGI3ZWRmZi4u
YTZkODlhZWQwYmRhIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fYXRvbWlj
X2hlbHBlci5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9hdG9taWNfaGVscGVyLmMN
CkBAIC0xNTEsNyArMTUxLDcgQEAgaW50IGRybV9nZW1fcGxhbmVfaGVscGVyX3ByZXBhcmVfZmIo
c3RydWN0IGRybV9wbGFuZSAqcGxhbmUsIHN0cnVjdCBkcm1fcGxhbmVfc3QNCiAJCXJldHVybiAw
Ow0KIA0KIAlvYmogPSBkcm1fZ2VtX2ZiX2dldF9vYmooc3RhdGUtPmZiLCAwKTsNCi0JcmV0ID0g
ZG1hX3Jlc3ZfZ2V0X3NpbmdsZXRvbihvYmotPnJlc3YsIGZhbHNlLCAmZmVuY2UpOw0KKwlyZXQg
PSBkbWFfcmVzdl9nZXRfc2luZ2xldG9uKG9iai0+cmVzdiwgRE1BX1JFU1ZfVVNBR0VfV1JJVEUs
ICZmZW5jZSk7DQogCWlmIChyZXQpDQogCQlyZXR1cm4gcmV0Ow0KIA0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vZXRu
YXZpdi9ldG5hdml2X2dlbS5jDQppbmRleCBkNTMxNGFhMjhmZjcuLjUwNzE3MmUyNzgwYiAxMDA2
NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmMNCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmMNCkBAIC0zODAsMTIgKzM4MCwxNCBA
QCBpbnQgZXRuYXZpdl9nZW1fY3B1X3ByZXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHUz
MiBvcCwNCiAJfQ0KIA0KIAlpZiAob3AgJiBFVE5BX1BSRVBfTk9TWU5DKSB7DQotCQlpZiAoIWRt
YV9yZXN2X3Rlc3Rfc2lnbmFsZWQob2JqLT5yZXN2LCB3cml0ZSkpDQorCQlpZiAoIWRtYV9yZXN2
X3Rlc3Rfc2lnbmFsZWQob2JqLT5yZXN2LA0KKwkJCQkJICAgIGRtYV9yZXN2X3VzYWdlX3J3KHdy
aXRlKSkpDQogCQkJcmV0dXJuIC1FQlVTWTsNCiAJfSBlbHNlIHsNCiAJCXVuc2lnbmVkIGxvbmcg
cmVtYWluID0gZXRuYXZpdl90aW1lb3V0X3RvX2ppZmZpZXModGltZW91dCk7DQogDQotCQlyZXQg
PSBkbWFfcmVzdl93YWl0X3RpbWVvdXQob2JqLT5yZXN2LCB3cml0ZSwgdHJ1ZSwgcmVtYWluKTsN
CisJCXJldCA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChvYmotPnJlc3YsIGRtYV9yZXN2X3VzYWdl
X3J3KHdyaXRlKSwNCisJCQkJCSAgICB0cnVlLCByZW1haW4pOw0KIAkJaWYgKHJldCA8PSAwKQ0K
IAkJCXJldHVybiByZXQgPT0gMCA/IC1FVElNRURPVVQgOiByZXQ7DQogCX0NCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9zdWJtaXQuYyBiL2RyaXZlcnMv
Z3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jDQppbmRleCBiODA4ZGRiOWRhNDgu
LmQ3Y2QyNmRmYWY4YSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2
aXZfZ2VtX3N1Ym1pdC5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dl
bV9zdWJtaXQuYw0KQEAgLTE3OCw2ICsxNzgsNyBAQCBzdGF0aWMgaW50IHN1Ym1pdF9mZW5jZV9z
eW5jKHN0cnVjdCBldG5hdml2X2dlbV9zdWJtaXQgKnN1Ym1pdCkNCiAJZm9yIChpID0gMDsgaSA8
IHN1Ym1pdC0+bnJfYm9zOyBpKyspIHsNCiAJCXN0cnVjdCBldG5hdml2X2dlbV9zdWJtaXRfYm8g
KmJvID0gJnN1Ym1pdC0+Ym9zW2ldOw0KIAkJc3RydWN0IGRtYV9yZXN2ICpyb2JqID0gYm8tPm9i
ai0+YmFzZS5yZXN2Ow0KKwkJZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZTsNCiANCiAJCXJldCA9
IGRtYV9yZXN2X3Jlc2VydmVfZmVuY2VzKHJvYmosIDEpOw0KIAkJaWYgKHJldCkNCkBAIC0xODYs
OSArMTg3LDkgQEAgc3RhdGljIGludCBzdWJtaXRfZmVuY2Vfc3luYyhzdHJ1Y3QgZXRuYXZpdl9n
ZW1fc3VibWl0ICpzdWJtaXQpDQogCQlpZiAoc3VibWl0LT5mbGFncyAmIEVUTkFfU1VCTUlUX05P
X0lNUExJQ0lUKQ0KIAkJCWNvbnRpbnVlOw0KIA0KLQkJcmV0ID0gZG1hX3Jlc3ZfZ2V0X2ZlbmNl
cyhyb2JqLA0KLQkJCQkJICBiby0+ZmxhZ3MgJiBFVE5BX1NVQk1JVF9CT19XUklURSwNCi0JCQkJ
CSAgJmJvLT5ucl9zaGFyZWQsICZiby0+c2hhcmVkKTsNCisJCXVzYWdlID0gZG1hX3Jlc3ZfdXNh
Z2VfcncoYm8tPmZsYWdzICYgRVROQV9TVUJNSVRfQk9fV1JJVEUpOw0KKwkJcmV0ID0gZG1hX3Jl
c3ZfZ2V0X2ZlbmNlcyhyb2JqLCB1c2FnZSwgJmJvLT5ucl9zaGFyZWQsDQorCQkJCQkgICZiby0+
c2hhcmVkKTsNCiAJCWlmIChyZXQpDQogCQkJcmV0dXJuIHJldDsNCiAJfQ0KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2Rpc3BsYXkvaW50ZWxfYXRvbWljX3BsYW5lLmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9kaXNwbGF5L2ludGVsX2F0b21pY19wbGFuZS5jDQppbmRleCBjMmM1
MTJjZDhlYzAuLjJjM2JiOGFlY2QwNyAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfYXRvbWljX3BsYW5lLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2Rpc3BsYXkvaW50ZWxfYXRvbWljX3BsYW5lLmMNCkBAIC03OTksNyArNzk5LDggQEAgaW50ZWxf
cHJlcGFyZV9wbGFuZV9mYihzdHJ1Y3QgZHJtX3BsYW5lICpfcGxhbmUsDQogCQlpZiAocmV0IDwg
MCkNCiAJCQlnb3RvIHVucGluX2ZiOw0KIA0KLQkJZG1hX3Jlc3ZfaXRlcl9iZWdpbigmY3Vyc29y
LCBvYmotPmJhc2UucmVzdiwgZmFsc2UpOw0KKwkJZG1hX3Jlc3ZfaXRlcl9iZWdpbigmY3Vyc29y
LCBvYmotPmJhc2UucmVzdiwNCisJCQkJICAgIERNQV9SRVNWX1VTQUdFX1dSSVRFKTsNCiAJCWRt
YV9yZXN2X2Zvcl9lYWNoX2ZlbmNlX3VubG9ja2VkKCZjdXJzb3IsIGZlbmNlKSB7DQogCQkJYWRk
X3Jwc19ib29zdF9hZnRlcl92YmxhbmsobmV3X3BsYW5lX3N0YXRlLT5ody5jcnRjLA0KIAkJCQkJ
CSAgIGZlbmNlKTsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fYnVzeS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2J1c3kuYw0KaW5k
ZXggNDcwZmRmZDYxYTBmLi4xNGExYzBhZDhjM2MgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fYnVzeS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9n
ZW0vaTkxNV9nZW1fYnVzeS5jDQpAQCAtMTM4LDEyICsxMzgsMTIgQEAgaTkxNV9nZW1fYnVzeV9p
b2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCB2b2lkICpkYXRhLA0KIAkgKiBBbHRlcm5hdGl2
ZWx5LCB3ZSBjYW4gdHJhZGUgdGhhdCBleHRyYSBpbmZvcm1hdGlvbiBvbiByZWFkL3dyaXRlDQog
CSAqIGFjdGl2aXR5IHdpdGgNCiAJICoJYXJncy0+YnVzeSA9DQotCSAqCQkhZG1hX3Jlc3ZfdGVz
dF9zaWduYWxlZChvYmotPnJlc3YsIHRydWUpOw0KKwkgKgkJIWRtYV9yZXN2X3Rlc3Rfc2lnbmFs
ZWQob2JqLT5yZXN2LCBETUFfUkVTVl9VU0FHRV9SRUFEKTsNCiAJICogdG8gcmVwb3J0IHRoZSBv
dmVyYWxsIGJ1c3luZXNzLiBUaGlzIGlzIHdoYXQgdGhlIHdhaXQtaW9jdGwgZG9lcy4NCiAJICoN
CiAJICovDQogCWFyZ3MtPmJ1c3kgPSAwOw0KLQlkbWFfcmVzdl9pdGVyX2JlZ2luKCZjdXJzb3Is
IG9iai0+YmFzZS5yZXN2LCB0cnVlKTsNCisJZG1hX3Jlc3ZfaXRlcl9iZWdpbigmY3Vyc29yLCBv
YmotPmJhc2UucmVzdiwgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7DQogCWRtYV9yZXN2X2Zvcl9lYWNo
X2ZlbmNlX3VubG9ja2VkKCZjdXJzb3IsIGZlbmNlKSB7DQogCQlpZiAoZG1hX3Jlc3ZfaXRlcl9p
c19yZXN0YXJ0ZWQoJmN1cnNvcikpDQogCQkJYXJncy0+YnVzeSA9IDA7DQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2xtZW0uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9sbWVtLmMNCmluZGV4IDQ0NGY4MjY4YjljNS4uYTIwMGQzZTY2
NTczIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2xtZW0u
Yw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2xtZW0uYw0KQEAgLTY2
LDcgKzY2LDcgQEAgYm9vbCBfX2k5MTVfZ2VtX29iamVjdF9pc19sbWVtKHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmopDQogCXN0cnVjdCBpbnRlbF9tZW1vcnlfcmVnaW9uICptciA9IFJF
QURfT05DRShvYmotPm1tLnJlZ2lvbik7DQogDQogI2lmZGVmIENPTkZJR19MT0NLREVQDQotCUdF
TV9XQVJOX09OKGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWQob2JqLT5iYXNlLnJlc3YsIHRydWUpICYm
DQorCUdFTV9XQVJOX09OKGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWQob2JqLT5iYXNlLnJlc3YsIERN
QV9SRVNWX1VTQUdFX1JFQUQpICYmDQogCQkgICAgaTkxNV9nZW1fb2JqZWN0X2V2aWN0YWJsZShv
YmopKTsNCiAjZW5kaWYNCiAJcmV0dXJuIG1yICYmIChtci0+dHlwZSA9PSBJTlRFTF9NRU1PUllf
TE9DQUwgfHwNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1f
dXNlcnB0ci5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3VzZXJwdHIuYw0K
aW5kZXggM2NjMDFjMzBkZDYyLi42MGZlZmY5MTYwZGUgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fdXNlcnB0ci5jDQpAQCAtODUsNyArODUsNyBAQCBzdGF0aWMgYm9v
bCBpOTE1X2dlbV91c2VycHRyX2ludmFsaWRhdGUoc3RydWN0IG1tdV9pbnRlcnZhbF9ub3RpZmll
ciAqbW5pLA0KIAkJcmV0dXJuIHRydWU7DQogDQogCS8qIHdlIHdpbGwgdW5iaW5kIG9uIG5leHQg
c3VibWlzc2lvbiwgc3RpbGwgaGF2ZSB1c2VycHRyIHBpbnMgKi8NCi0JciA9IGRtYV9yZXN2X3dh
aXRfdGltZW91dChvYmotPmJhc2UucmVzdiwgdHJ1ZSwgZmFsc2UsDQorCXIgPSBkbWFfcmVzdl93
YWl0X3RpbWVvdXQob2JqLT5iYXNlLnJlc3YsIERNQV9SRVNWX1VTQUdFX1JFQUQsIGZhbHNlLA0K
IAkJCQkgIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsNCiAJaWYgKHIgPD0gMCkNCiAJCWRybV9lcnIo
Jmk5MTUtPmRybSwgIiglbGQpIGZhaWxlZCB0byB3YWl0IGZvciBpZGxlXG4iLCByKTsNCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fd2FpdC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3dhaXQuYw0KaW5kZXggZGFiM2QzMGMwOWEwLi4z
MTk5MzZmOTFhYzUgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fd2FpdC5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fd2FpdC5j
DQpAQCAtNDAsNyArNDAsOCBAQCBpOTE1X2dlbV9vYmplY3Rfd2FpdF9yZXNlcnZhdGlvbihzdHJ1
Y3QgZG1hX3Jlc3YgKnJlc3YsDQogCXN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlOw0KIAlsb25nIHJl
dCA9IHRpbWVvdXQgPzogMTsNCiANCi0JZG1hX3Jlc3ZfaXRlcl9iZWdpbigmY3Vyc29yLCByZXN2
LCBmbGFncyAmIEk5MTVfV0FJVF9BTEwpOw0KKwlkbWFfcmVzdl9pdGVyX2JlZ2luKCZjdXJzb3Is
IHJlc3YsDQorCQkJICAgIGRtYV9yZXN2X3VzYWdlX3J3KGZsYWdzICYgSTkxNV9XQUlUX0FMTCkp
Ow0KIAlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZV91bmxvY2tlZCgmY3Vyc29yLCBmZW5jZSkgew0K
IAkJcmV0ID0gaTkxNV9nZW1fb2JqZWN0X3dhaXRfZmVuY2UoZmVuY2UsIGZsYWdzLCB0aW1lb3V0
KTsNCiAJCWlmIChyZXQgPD0gMCkNCkBAIC0xMTcsNyArMTE4LDggQEAgaTkxNV9nZW1fb2JqZWN0
X3dhaXRfcHJpb3JpdHkoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwNCiAJc3RydWN0
IGRtYV9yZXN2X2l0ZXIgY3Vyc29yOw0KIAlzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZTsNCiANCi0J
ZG1hX3Jlc3ZfaXRlcl9iZWdpbigmY3Vyc29yLCBvYmotPmJhc2UucmVzdiwgZmxhZ3MgJiBJOTE1
X1dBSVRfQUxMKTsNCisJZG1hX3Jlc3ZfaXRlcl9iZWdpbigmY3Vyc29yLCBvYmotPmJhc2UucmVz
diwNCisJCQkgICAgZG1hX3Jlc3ZfdXNhZ2VfcncoZmxhZ3MgJiBJOTE1X1dBSVRfQUxMKSk7DQog
CWRtYV9yZXN2X2Zvcl9lYWNoX2ZlbmNlX3VubG9ja2VkKCZjdXJzb3IsIGZlbmNlKQ0KIAkJaTkx
NV9nZW1fZmVuY2Vfd2FpdF9wcmlvcml0eShmZW5jZSwgYXR0cik7DQogCWRtYV9yZXN2X2l0ZXJf
ZW5kKCZjdXJzb3IpOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxm
dGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRl
c3RzL2k5MTVfZ2VtX2RtYWJ1Zi5jDQppbmRleCAzY2M3NGIwZmVkMDYuLjM0MmRmNjU4ZTBmYyAx
MDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1f
ZG1hYnVmLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9n
ZW1fZG1hYnVmLmMNCkBAIC0yMTksNyArMjE5LDggQEAgc3RhdGljIGludCBpZ3RfZG1hYnVmX2lt
cG9ydF9zYW1lX2RyaXZlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwNCiAJCWdvdG8g
b3V0X2RldGFjaDsNCiAJfQ0KIA0KLQl0aW1lb3V0ID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGRt
YWJ1Zi0+cmVzdiwgZmFsc2UsIHRydWUsIDUgKiBIWik7DQorCXRpbWVvdXQgPSBkbWFfcmVzdl93
YWl0X3RpbWVvdXQoZG1hYnVmLT5yZXN2LCBETUFfUkVTVl9VU0FHRV9XUklURSwNCisJCQkJCXRy
dWUsIDUgKiBIWik7DQogCWlmICghdGltZW91dCkgew0KIAkJcHJfZXJyKCJkbWFidWYgd2FpdCBm
b3IgZXhjbHVzaXZlIGZlbmNlIHRpbWVkIG91dC5cbiIpOw0KIAkJdGltZW91dCA9IC1FVElNRTsN
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5jDQppbmRleCA3NmNmNWFjOTFlOTQuLjE3ZDcy
MTZjZTIyMSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfcmVxdWVzdC5j
DQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3JlcXVlc3QuYw0KQEAgLTE1OTQsNyAr
MTU5NCw4IEBAIGk5MTVfcmVxdWVzdF9hd2FpdF9vYmplY3Qoc3RydWN0IGk5MTVfcmVxdWVzdCAq
dG8sDQogCXN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlOw0KIAlpbnQgcmV0ID0gMDsNCiANCi0JZG1h
X3Jlc3ZfZm9yX2VhY2hfZmVuY2UoJmN1cnNvciwgb2JqLT5iYXNlLnJlc3YsIHdyaXRlLCBmZW5j
ZSkgew0KKwlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCBvYmotPmJhc2UucmVzdiwN
CisJCQkJZG1hX3Jlc3ZfdXNhZ2Vfcncod3JpdGUpLCBmZW5jZSkgew0KIAkJcmV0ID0gaTkxNV9y
ZXF1ZXN0X2F3YWl0X2RtYV9mZW5jZSh0bywgZmVuY2UpOw0KIAkJaWYgKHJldCkNCiAJCQlicmVh
azsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N3X2ZlbmNlLmMgYi9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N3X2ZlbmNlLmMNCmluZGV4IDJhNzRhOWExY2FmZS4u
YWU5ODRjNjZjNDhhIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zd19m
ZW5jZS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3N3X2ZlbmNlLmMNCkBAIC01
ODUsNyArNTg1LDcgQEAgaW50IGk5MTVfc3dfZmVuY2VfYXdhaXRfcmVzZXJ2YXRpb24oc3RydWN0
IGk5MTVfc3dfZmVuY2UgKmZlbmNlLA0KIAlkZWJ1Z19mZW5jZV9hc3NlcnQoZmVuY2UpOw0KIAlt
aWdodF9zbGVlcF9pZihnZnBmbGFnc19hbGxvd19ibG9ja2luZyhnZnApKTsNCiANCi0JZG1hX3Jl
c3ZfaXRlcl9iZWdpbigmY3Vyc29yLCByZXN2LCB3cml0ZSk7DQorCWRtYV9yZXN2X2l0ZXJfYmVn
aW4oJmN1cnNvciwgcmVzdiwgZG1hX3Jlc3ZfdXNhZ2Vfcncod3JpdGUpKTsNCiAJZG1hX3Jlc3Zf
Zm9yX2VhY2hfZmVuY2VfdW5sb2NrZWQoJmN1cnNvciwgZikgew0KIAkJcGVuZGluZyA9IGk5MTVf
c3dfZmVuY2VfYXdhaXRfZG1hX2ZlbmNlKGZlbmNlLCBmLCB0aW1lb3V0LA0KIAkJCQkJCQlnZnAp
Ow0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dlbS5jIGIvZHJpdmVycy9n
cHUvZHJtL21zbS9tc21fZ2VtLmMNCmluZGV4IDAyYjlhZTY1YTk2YS4uMDFiYmI1ZjJkNDYyIDEw
MDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtLmMNCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9tc20vbXNtX2dlbS5jDQpAQCAtODQ4LDcgKzg0OCw4IEBAIGludCBtc21fZ2VtX2Nw
dV9wcmVwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCB1aW50MzJfdCBvcCwga3RpbWVfdCAq
dGltZW91dCkNCiAJCW9wICYgTVNNX1BSRVBfTk9TWU5DID8gMCA6IHRpbWVvdXRfdG9famlmZmll
cyh0aW1lb3V0KTsNCiAJbG9uZyByZXQ7DQogDQotCXJldCA9IGRtYV9yZXN2X3dhaXRfdGltZW91
dChvYmotPnJlc3YsIHdyaXRlLCB0cnVlLCAgcmVtYWluKTsNCisJcmV0ID0gZG1hX3Jlc3Zfd2Fp
dF90aW1lb3V0KG9iai0+cmVzdiwgZG1hX3Jlc3ZfdXNhZ2Vfcncod3JpdGUpLA0KKwkJCQkgICAg
dHJ1ZSwgIHJlbWFpbik7DQogCWlmIChyZXQgPT0gMCkNCiAJCXJldHVybiByZW1haW4gPT0gMCA/
IC1FQlVTWSA6IC1FVElNRURPVVQ7DQogCWVsc2UgaWYgKHJldCA8IDApDQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvZGlzcG52NTAvd25kdy5jIGIvZHJpdmVycy9ncHUvZHJt
L25vdXZlYXUvZGlzcG52NTAvd25kdy5jDQppbmRleCBiNTVhOGE3MjM1ODEuLjUzYmFmOWFhZTRi
MSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L2Rpc3BudjUwL3duZHcuYw0K
KysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvZGlzcG52NTAvd25kdy5jDQpAQCAtNTU4LDcg
KzU1OCw4IEBAIG52NTBfd25kd19wcmVwYXJlX2ZiKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLCBz
dHJ1Y3QgZHJtX3BsYW5lX3N0YXRlICpzdGF0ZSkNCiAJCQlhc3l3LT5pbWFnZS5oYW5kbGVbMF0g
PSBjdHhkbWEtPm9iamVjdC5oYW5kbGU7DQogCX0NCiANCi0JcmV0ID0gZG1hX3Jlc3ZfZ2V0X3Np
bmdsZXRvbihudmJvLT5iby5iYXNlLnJlc3YsIGZhbHNlLA0KKwlyZXQgPSBkbWFfcmVzdl9nZXRf
c2luZ2xldG9uKG52Ym8tPmJvLmJhc2UucmVzdiwNCisJCQkJICAgICBETUFfUkVTVl9VU0FHRV9X
UklURSwNCiAJCQkJICAgICAmYXN5dy0+c3RhdGUuZmVuY2UpOw0KIAlpZiAocmV0KQ0KIAkJcmV0
dXJuIHJldDsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2Jv
LmMgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMNCmluZGV4IDc0Zjg2NTJk
MmJkMy4uYzZiYjRkYmNkNzM1IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUv
bm91dmVhdV9iby5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMN
CkBAIC05NjIsMTEgKzk2MiwxMSBAQCBub3V2ZWF1X2JvX3ZtX2NsZWFudXAoc3RydWN0IHR0bV9i
dWZmZXJfb2JqZWN0ICpibywNCiAJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7DQogCWludCByZXQ7
DQogDQotCS8qIFRPRE86IFRoaXMgaXMgYWN0dWFsbHkgYSBtZW1vcnkgbWFuYWdlbWVudCBkZXBl
bmRlbmN5ICovDQotCXJldCA9IGRtYV9yZXN2X2dldF9zaW5nbGV0b24oYm8tPmJhc2UucmVzdiwg
ZmFsc2UsICZmZW5jZSk7DQorCXJldCA9IGRtYV9yZXN2X2dldF9zaW5nbGV0b24oYm8tPmJhc2Uu
cmVzdiwgRE1BX1JFU1ZfVVNBR0VfV1JJVEUsDQorCQkJCSAgICAgJmZlbmNlKTsNCiAJaWYgKHJl
dCkNCi0JCWRtYV9yZXN2X3dhaXRfdGltZW91dChiby0+YmFzZS5yZXN2LCBmYWxzZSwgZmFsc2Us
DQotCQkJCSAgICAgIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsNCisJCWRtYV9yZXN2X3dhaXRfdGlt
ZW91dChiby0+YmFzZS5yZXN2LCBETUFfUkVTVl9VU0FHRV9XUklURSwNCisJCQkJICAgICAgZmFs
c2UsIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsNCiANCiAJbnYxMF9ib19wdXRfdGlsZV9yZWdpb24o
ZGV2LCAqb2xkX3RpbGUsIGZlbmNlKTsNCiAJKm9sZF90aWxlID0gbmV3X3RpbGU7DQpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9mZW5jZS5jIGIvZHJpdmVycy9n
cHUvZHJtL25vdXZlYXUvbm91dmVhdV9mZW5jZS5jDQppbmRleCAwMjY4MjU5ZTk3ZWIuLmQ1ZTgx
Y2NlZTAxYyAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfZmVu
Y2UuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9mZW5jZS5jDQpAQCAt
MzUwLDE0ICszNTAsMTYgQEAgbm91dmVhdV9mZW5jZV9zeW5jKHN0cnVjdCBub3V2ZWF1X2JvICpu
dmJvLCBzdHJ1Y3Qgbm91dmVhdV9jaGFubmVsICpjaGFuLA0KIAlpZiAocmV0KQ0KIAkJcmV0dXJu
IHJldDsNCiANCi0JLyogV2FpdGluZyBmb3IgdGhlIGV4Y2x1c2l2ZSBmZW5jZSBmaXJzdCBjYXVz
ZXMgcGVyZm9ybWFuY2UgcmVncmVzc2lvbnMNCi0JICogdW5kZXIgc29tZSBjaXJjdW1zdGFuY2Vz
LiBTbyBtYW51YWxseSB3YWl0IGZvciB0aGUgc2hhcmVkIG9uZXMgZmlyc3QuDQorCS8qIFdhaXRp
bmcgZm9yIHRoZSB3cml0ZXMgZmlyc3QgY2F1c2VzIHBlcmZvcm1hbmNlIHJlZ3Jlc3Npb25zDQor
CSAqIHVuZGVyIHNvbWUgY2lyY3Vtc3RhbmNlcy4gU28gbWFudWFsbHkgd2FpdCBmb3IgdGhlIHJl
YWRzIGZpcnN0Lg0KIAkgKi8NCiAJZm9yIChpID0gMDsgaSA8IDI7ICsraSkgew0KIAkJc3RydWN0
IGRtYV9yZXN2X2l0ZXIgY3Vyc29yOw0KIAkJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7DQogDQot
CQlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCByZXN2LCBleGNsdXNpdmUsIGZlbmNl
KSB7DQorCQlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCByZXN2LA0KKwkJCQkJZG1h
X3Jlc3ZfdXNhZ2VfcncoZXhjbHVzaXZlKSwNCisJCQkJCWZlbmNlKSB7DQogCQkJc3RydWN0IG5v
dXZlYXVfZmVuY2UgKmY7DQogDQogCQkJaWYgKGkgPT0gMCAmJiBkbWFfcmVzdl9pdGVyX2lzX2V4
Y2x1c2l2ZSgmY3Vyc29yKSkNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9u
b3V2ZWF1X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9nZW0uYw0KaW5k
ZXggOTQxNmJlZTkyMTQxLi5mYWI1NDJhNzU4ZmYgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vbm91dmVhdS9ub3V2ZWF1X2dlbS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9u
b3V2ZWF1X2dlbS5jDQpAQCAtOTYyLDcgKzk2Miw4IEBAIG5vdXZlYXVfZ2VtX2lvY3RsX2NwdV9w
cmVwKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsDQogCQlyZXR1cm4gLUVOT0VO
VDsNCiAJbnZibyA9IG5vdXZlYXVfZ2VtX29iamVjdChnZW0pOw0KIA0KLQlscmV0ID0gZG1hX3Jl
c3Zfd2FpdF90aW1lb3V0KG52Ym8tPmJvLmJhc2UucmVzdiwgd3JpdGUsIHRydWUsDQorCWxyZXQg
PSBkbWFfcmVzdl93YWl0X3RpbWVvdXQobnZiby0+Ym8uYmFzZS5yZXN2LA0KKwkJCQkgICAgIGRt
YV9yZXN2X3VzYWdlX3J3KHdyaXRlKSwgdHJ1ZSwNCiAJCQkJICAgICBub193YWl0ID8gMCA6IDMw
ICogSFopOw0KIAlpZiAoIWxyZXQpDQogCQlyZXQgPSAtRUJVU1k7DQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jIGIvZHJpdmVycy9ncHUvZHJtL3Bh
bmZyb3N0L3BhbmZyb3N0X2Rydi5jDQppbmRleCA5NmJiNWE0NjU2MjcuLjBkZWIyZDIxNDIyZiAx
MDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9wYW5mcm9zdC9wYW5mcm9zdF9kcnYuYw0KKysr
IGIvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2Rydi5jDQpAQCAtMzE2LDcgKzMx
Niw4IEBAIHBhbmZyb3N0X2lvY3RsX3dhaXRfYm8oc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9p
ZCAqZGF0YSwNCiAJaWYgKCFnZW1fb2JqKQ0KIAkJcmV0dXJuIC1FTk9FTlQ7DQogDQotCXJldCA9
IGRtYV9yZXN2X3dhaXRfdGltZW91dChnZW1fb2JqLT5yZXN2LCB0cnVlLCB0cnVlLCB0aW1lb3V0
KTsNCisJcmV0ID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGdlbV9vYmotPnJlc3YsIERNQV9SRVNW
X1VTQUdFX1JFQUQsDQorCQkJCSAgICB0cnVlLCB0aW1lb3V0KTsNCiAJaWYgKCFyZXQpDQogCQly
ZXQgPSB0aW1lb3V0ID8gLUVUSU1FRE9VVCA6IC1FQlVTWTsNCiANCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vcXhsL3F4bF9kZWJ1Z2ZzLmMgYi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9k
ZWJ1Z2ZzLmMNCmluZGV4IDZhMzZiMGZkODQ1Yy4uMzNlNTg4OWQ2NjA4IDEwMDY0NA0KLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfZGVidWdmcy5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0v
cXhsL3F4bF9kZWJ1Z2ZzLmMNCkBAIC02MSw3ICs2MSw4IEBAIHF4bF9kZWJ1Z2ZzX2J1ZmZlcnNf
aW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRhdGEpDQogCQlzdHJ1Y3QgZG1hX2ZlbmNl
ICpmZW5jZTsNCiAJCWludCByZWwgPSAwOw0KIA0KLQkJZG1hX3Jlc3ZfaXRlcl9iZWdpbigmY3Vy
c29yLCBiby0+dGJvLmJhc2UucmVzdiwgdHJ1ZSk7DQorCQlkbWFfcmVzdl9pdGVyX2JlZ2luKCZj
dXJzb3IsIGJvLT50Ym8uYmFzZS5yZXN2LA0KKwkJCQkgICAgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7
DQogCQlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZV91bmxvY2tlZCgmY3Vyc29yLCBmZW5jZSkgew0K
IAkJCWlmIChkbWFfcmVzdl9pdGVyX2lzX3Jlc3RhcnRlZCgmY3Vyc29yKSkNCiAJCQkJcmVsID0g
MDsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9kaXNwbGF5LmMg
Yi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9kaXNwbGF5LmMNCmluZGV4IGY2MGU4MjZj
ZDI5Mi4uNTdmZjJiNzIzYzg3IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
YWRlb25fZGlzcGxheS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9kaXNw
bGF5LmMNCkBAIC01MzMsNyArNTMzLDggQEAgc3RhdGljIGludCByYWRlb25fY3J0Y19wYWdlX2Zs
aXBfdGFyZ2V0KHN0cnVjdCBkcm1fY3J0YyAqY3J0YywNCiAJCURSTV9FUlJPUigiZmFpbGVkIHRv
IHBpbiBuZXcgcmJvIGJ1ZmZlciBiZWZvcmUgZmxpcFxuIik7DQogCQlnb3RvIGNsZWFudXA7DQog
CX0NCi0JciA9IGRtYV9yZXN2X2dldF9zaW5nbGV0b24obmV3X3Jiby0+dGJvLmJhc2UucmVzdiwg
ZmFsc2UsICZ3b3JrLT5mZW5jZSk7DQorCXIgPSBkbWFfcmVzdl9nZXRfc2luZ2xldG9uKG5ld19y
Ym8tPnRiby5iYXNlLnJlc3YsIERNQV9SRVNWX1VTQUdFX1dSSVRFLA0KKwkJCQkgICAmd29yay0+
ZmVuY2UpOw0KIAlpZiAocikgew0KIAkJcmFkZW9uX2JvX3VucmVzZXJ2ZShuZXdfcmJvKTsNCiAJ
CURSTV9FUlJPUigiZmFpbGVkIHRvIGdldCBuZXcgcmJvIGJ1ZmZlciBmZW5jZXNcbiIpOw0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2dlbS5jIGIvZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yYWRlb25fZ2VtLmMNCmluZGV4IGEzNmE0ZjJjNzZiMC4uNzFiZjkyOTll
NDVjIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fZ2VtLmMNCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX2dlbS5jDQpAQCAtMTYxLDcgKzE2MSw5
IEBAIHN0YXRpYyBpbnQgcmFkZW9uX2dlbV9zZXRfZG9tYWluKHN0cnVjdCBkcm1fZ2VtX29iamVj
dCAqZ29iaiwNCiAJfQ0KIAlpZiAoZG9tYWluID09IFJBREVPTl9HRU1fRE9NQUlOX0NQVSkgew0K
IAkJLyogQXNraW5nIGZvciBjcHUgYWNjZXNzIHdhaXQgZm9yIG9iamVjdCBpZGxlICovDQotCQly
ID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KHJvYmotPnRiby5iYXNlLnJlc3YsIHRydWUsIHRydWUs
IDMwICogSFopOw0KKwkJciA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChyb2JqLT50Ym8uYmFzZS5y
ZXN2LA0KKwkJCQkJICBETUFfUkVTVl9VU0FHRV9SRUFELA0KKwkJCQkJICB0cnVlLCAzMCAqIEha
KTsNCiAJCWlmICghcikNCiAJCQlyID0gLUVCVVNZOw0KIA0KQEAgLTUyMyw3ICs1MjUsNyBAQCBp
bnQgcmFkZW9uX2dlbV9idXN5X2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRh
dGEsDQogCX0NCiAJcm9iaiA9IGdlbV90b19yYWRlb25fYm8oZ29iaik7DQogDQotCXIgPSBkbWFf
cmVzdl90ZXN0X3NpZ25hbGVkKHJvYmotPnRiby5iYXNlLnJlc3YsIHRydWUpOw0KKwlyID0gZG1h
X3Jlc3ZfdGVzdF9zaWduYWxlZChyb2JqLT50Ym8uYmFzZS5yZXN2LCBETUFfUkVTVl9VU0FHRV9S
RUFEKTsNCiAJaWYgKHIgPT0gMCkNCiAJCXIgPSAtRUJVU1k7DQogCWVsc2UNCkBAIC01NTIsNyAr
NTU0LDggQEAgaW50IHJhZGVvbl9nZW1fd2FpdF9pZGxlX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNl
ICpkZXYsIHZvaWQgKmRhdGEsDQogCX0NCiAJcm9iaiA9IGdlbV90b19yYWRlb25fYm8oZ29iaik7
DQogDQotCXJldCA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChyb2JqLT50Ym8uYmFzZS5yZXN2LCB0
cnVlLCB0cnVlLCAzMCAqIEhaKTsNCisJcmV0ID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KHJvYmot
PnRiby5iYXNlLnJlc3YsIERNQV9SRVNWX1VTQUdFX1JFQUQsDQorCQkJCSAgICB0cnVlLCAzMCAq
IEhaKTsNCiAJaWYgKHJldCA9PSAwKQ0KIAkJciA9IC1FQlVTWTsNCiAJZWxzZSBpZiAocmV0IDwg
MCkNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9tbi5jIGIvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fbW4uYw0KaW5kZXggOWZhODg1NDljODllLi42OGVi
ZWIxYmRmZmYgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9tbi5j
DQorKysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9tbi5jDQpAQCAtNjYsOCArNjYs
OCBAQCBzdGF0aWMgYm9vbCByYWRlb25fbW5faW52YWxpZGF0ZShzdHJ1Y3QgbW11X2ludGVydmFs
X25vdGlmaWVyICptbiwNCiAJCXJldHVybiB0cnVlOw0KIAl9DQogDQotCXIgPSBkbWFfcmVzdl93
YWl0X3RpbWVvdXQoYm8tPnRiby5iYXNlLnJlc3YsIHRydWUsIGZhbHNlLA0KLQkJCQkgIE1BWF9T
Q0hFRFVMRV9USU1FT1VUKTsNCisJciA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChiby0+dGJvLmJh
c2UucmVzdiwgRE1BX1JFU1ZfVVNBR0VfUkVBRCwNCisJCQkJICBmYWxzZSwgTUFYX1NDSEVEVUxF
X1RJTUVPVVQpOw0KIAlpZiAociA8PSAwKQ0KIAkJRFJNX0VSUk9SKCIoJWxkKSBmYWlsZWQgdG8g
d2FpdCBmb3IgdXNlciBib1xuIiwgcik7DQogDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3JhZGVvbi9yYWRlb25fc3luYy5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fc3lu
Yy5jDQppbmRleCBiOTkxYmExYmNkNTEuLjQ5YmJiMjI2NmMwZiAxMDA2NDQNCi0tLSBhL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3N5bmMuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL3Jh
ZGVvbi9yYWRlb25fc3luYy5jDQpAQCAtOTYsNyArOTYsNyBAQCBpbnQgcmFkZW9uX3N5bmNfcmVz
dihzdHJ1Y3QgcmFkZW9uX2RldmljZSAqcmRldiwNCiAJc3RydWN0IGRtYV9mZW5jZSAqZjsNCiAJ
aW50IHIgPSAwOw0KIA0KLQlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCByZXN2LCBz
aGFyZWQsIGYpIHsNCisJZG1hX3Jlc3ZfZm9yX2VhY2hfZmVuY2UoJmN1cnNvciwgcmVzdiwgZG1h
X3Jlc3ZfdXNhZ2Vfcncoc2hhcmVkKSwgZikgew0KIAkJZmVuY2UgPSB0b19yYWRlb25fZmVuY2Uo
Zik7DQogCQlpZiAoZmVuY2UgJiYgZmVuY2UtPnJkZXYgPT0gcmRldikNCiAJCQlyYWRlb25fc3lu
Y19mZW5jZShzeW5jLCBmZW5jZSk7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3JhZGVv
bi9yYWRlb25fdXZkLmMgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl91dmQuYw0KaW5k
ZXggMzc3ZjljZGI1YjUzLi40MDAwYWQyZjM5YmEgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vcmFkZW9uL3JhZGVvbl91dmQuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRl
b25fdXZkLmMNCkBAIC00NzgsOCArNDc4LDggQEAgc3RhdGljIGludCByYWRlb25fdXZkX2NzX21z
ZyhzdHJ1Y3QgcmFkZW9uX2NzX3BhcnNlciAqcCwgc3RydWN0IHJhZGVvbl9ibyAqYm8sDQogCQly
ZXR1cm4gLUVJTlZBTDsNCiAJfQ0KIA0KLQlyID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGJvLT50
Ym8uYmFzZS5yZXN2LCBmYWxzZSwgZmFsc2UsDQotCQkJCSAgTUFYX1NDSEVEVUxFX1RJTUVPVVQp
Ow0KKwlyID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGJvLT50Ym8uYmFzZS5yZXN2LCBETUFfUkVT
Vl9VU0FHRV9XUklURSwNCisJCQkJICBmYWxzZSwgTUFYX1NDSEVEVUxFX1RJTUVPVVQpOw0KIAlp
ZiAociA8PSAwKSB7DQogCQlEUk1fRVJST1IoIkZhaWxlZCB3YWl0aW5nIGZvciBVVkQgbWVzc2Fn
ZSAoJWQpIVxuIiwgcik7DQogCQlyZXR1cm4gciA/IHIgOiAtRVRJTUU7DQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMgYi9kcml2ZXJzL2dwdS9kcm0v
c2NoZWR1bGVyL3NjaGVkX21haW4uYw0KaW5kZXggZjkxZmIzMWFiN2E3Li4zYWViMjhhZDBmM2Yg
MTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX21haW4uYw0KKysr
IGIvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMNCkBAIC03MDMsNyArNzAz
LDggQEAgaW50IGRybV9zY2hlZF9qb2JfYWRkX2ltcGxpY2l0X2RlcGVuZGVuY2llcyhzdHJ1Y3Qg
ZHJtX3NjaGVkX2pvYiAqam9iLA0KIAlzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZTsNCiAJaW50IHJl
dDsNCiANCi0JZG1hX3Jlc3ZfZm9yX2VhY2hfZmVuY2UoJmN1cnNvciwgb2JqLT5yZXN2LCB3cml0
ZSwgZmVuY2UpIHsNCisJZG1hX3Jlc3ZfZm9yX2VhY2hfZmVuY2UoJmN1cnNvciwgb2JqLT5yZXN2
LCBkbWFfcmVzdl91c2FnZV9ydyh3cml0ZSksDQorCQkJCWZlbmNlKSB7DQogCQkvKiBNYWtlIHN1
cmUgdG8gZ3JhYiBhbiBhZGRpdGlvbmFsIHJlZiBvbiB0aGUgYWRkZWQgZmVuY2UgKi8NCiAJCWRt
YV9mZW5jZV9nZXQoZmVuY2UpOw0KIAkJcmV0ID0gZHJtX3NjaGVkX2pvYl9hZGRfZGVwZW5kZW5j
eShqb2IsIGZlbmNlKTsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5j
IGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYw0KaW5kZXggMWRkNmYxM2JiMDNjLi5kNGIy
Njk1NjA2ZTIgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jDQorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jDQpAQCAtMjcyLDcgKzI3Miw3IEBAIHN0YXRp
YyB2b2lkIHR0bV9ib19mbHVzaF9hbGxfZmVuY2VzKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAq
Ym8pDQogCXN0cnVjdCBkbWFfcmVzdl9pdGVyIGN1cnNvcjsNCiAJc3RydWN0IGRtYV9mZW5jZSAq
ZmVuY2U7DQogDQotCWRtYV9yZXN2X2l0ZXJfYmVnaW4oJmN1cnNvciwgcmVzdiwgdHJ1ZSk7DQor
CWRtYV9yZXN2X2l0ZXJfYmVnaW4oJmN1cnNvciwgcmVzdiwgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7
DQogCWRtYV9yZXN2X2Zvcl9lYWNoX2ZlbmNlX3VubG9ja2VkKCZjdXJzb3IsIGZlbmNlKSB7DQog
CQlpZiAoIWZlbmNlLT5vcHMtPnNpZ25hbGVkKQ0KIAkJCWRtYV9mZW5jZV9lbmFibGVfc3dfc2ln
bmFsaW5nKGZlbmNlKTsNCkBAIC0zMDEsNyArMzAxLDcgQEAgc3RhdGljIGludCB0dG1fYm9fY2xl
YW51cF9yZWZzKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sDQogCXN0cnVjdCBkbWFfcmVz
diAqcmVzdiA9ICZiby0+YmFzZS5fcmVzdjsNCiAJaW50IHJldDsNCiANCi0JaWYgKGRtYV9yZXN2
X3Rlc3Rfc2lnbmFsZWQocmVzdiwgdHJ1ZSkpDQorCWlmIChkbWFfcmVzdl90ZXN0X3NpZ25hbGVk
KHJlc3YsIERNQV9SRVNWX1VTQUdFX1JFQUQpKQ0KIAkJcmV0ID0gMDsNCiAJZWxzZQ0KIAkJcmV0
ID0gLUVCVVNZOw0KQEAgLTMxMyw3ICszMTMsOCBAQCBzdGF0aWMgaW50IHR0bV9ib19jbGVhbnVw
X3JlZnMoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywNCiAJCQlkbWFfcmVzdl91bmxvY2so
Ym8tPmJhc2UucmVzdik7DQogCQlzcGluX3VubG9jaygmYm8tPmJkZXYtPmxydV9sb2NrKTsNCiAN
Ci0JCWxyZXQgPSBkbWFfcmVzdl93YWl0X3RpbWVvdXQocmVzdiwgdHJ1ZSwgaW50ZXJydXB0aWJs
ZSwNCisJCWxyZXQgPSBkbWFfcmVzdl93YWl0X3RpbWVvdXQocmVzdiwgRE1BX1JFU1ZfVVNBR0Vf
UkVBRCwNCisJCQkJCSAgICAgaW50ZXJydXB0aWJsZSwNCiAJCQkJCSAgICAgMzAgKiBIWik7DQog
DQogCQlpZiAobHJldCA8IDApDQpAQCAtNDE2LDcgKzQxNyw4IEBAIHN0YXRpYyB2b2lkIHR0bV9i
b19yZWxlYXNlKHN0cnVjdCBrcmVmICprcmVmKQ0KIAkJCS8qIExhc3QgcmVzb3J0LCBpZiB3ZSBm
YWlsIHRvIGFsbG9jYXRlIG1lbW9yeSBmb3IgdGhlDQogCQkJICogZmVuY2VzIGJsb2NrIGZvciB0
aGUgQk8gdG8gYmVjb21lIGlkbGUNCiAJCQkgKi8NCi0JCQlkbWFfcmVzdl93YWl0X3RpbWVvdXQo
Ym8tPmJhc2UucmVzdiwgdHJ1ZSwgZmFsc2UsDQorCQkJZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGJv
LT5iYXNlLnJlc3YsDQorCQkJCQkgICAgICBETUFfUkVTVl9VU0FHRV9SRUFELCBmYWxzZSwNCiAJ
CQkJCSAgICAgIDMwICogSFopOw0KIAkJfQ0KIA0KQEAgLTQyNyw3ICs0MjksNyBAQCBzdGF0aWMg
dm9pZCB0dG1fYm9fcmVsZWFzZShzdHJ1Y3Qga3JlZiAqa3JlZikNCiAJCXR0bV9tZW1faW9fZnJl
ZShiZGV2LCBiby0+cmVzb3VyY2UpOw0KIAl9DQogDQotCWlmICghZG1hX3Jlc3ZfdGVzdF9zaWdu
YWxlZChiby0+YmFzZS5yZXN2LCB0cnVlKSB8fA0KKwlpZiAoIWRtYV9yZXN2X3Rlc3Rfc2lnbmFs
ZWQoYm8tPmJhc2UucmVzdiwgRE1BX1JFU1ZfVVNBR0VfUkVBRCkgfHwNCiAJICAgICFkbWFfcmVz
dl90cnlsb2NrKGJvLT5iYXNlLnJlc3YpKSB7DQogCQkvKiBUaGUgQk8gaXMgbm90IGlkbGUsIHJl
c3VycmVjdCBpdCBmb3IgZGVsYXllZCBkZXN0cm95ICovDQogCQl0dG1fYm9fZmx1c2hfYWxsX2Zl
bmNlcyhibyk7DQpAQCAtMTA3MiwxNCArMTA3NCwxNCBAQCBpbnQgdHRtX2JvX3dhaXQoc3RydWN0
IHR0bV9idWZmZXJfb2JqZWN0ICpibywNCiAJbG9uZyB0aW1lb3V0ID0gMTUgKiBIWjsNCiANCiAJ
aWYgKG5vX3dhaXQpIHsNCi0JCWlmIChkbWFfcmVzdl90ZXN0X3NpZ25hbGVkKGJvLT5iYXNlLnJl
c3YsIHRydWUpKQ0KKwkJaWYgKGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWQoYm8tPmJhc2UucmVzdiwg
RE1BX1JFU1ZfVVNBR0VfUkVBRCkpDQogCQkJcmV0dXJuIDA7DQogCQllbHNlDQogCQkJcmV0dXJu
IC1FQlVTWTsNCiAJfQ0KIA0KLQl0aW1lb3V0ID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGJvLT5i
YXNlLnJlc3YsIHRydWUsIGludGVycnVwdGlibGUsDQotCQkJCQl0aW1lb3V0KTsNCisJdGltZW91
dCA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChiby0+YmFzZS5yZXN2LCBETUFfUkVTVl9VU0FHRV9S
RUFELA0KKwkJCQkJaW50ZXJydXB0aWJsZSwgdGltZW91dCk7DQogCWlmICh0aW1lb3V0IDwgMCkN
CiAJCXJldHVybiB0aW1lb3V0Ow0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92Z2Vt
L3ZnZW1fZmVuY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS92Z2VtL3ZnZW1fZmVuY2UuYw0KaW5kZXgg
MmRkYmViY2E4N2Q5Li45MWZjNDk0MGM2NWEgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
dmdlbS92Z2VtX2ZlbmNlLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92Z2VtL3ZnZW1fZmVuY2Uu
Yw0KQEAgLTEzMCw2ICsxMzAsNyBAQCBpbnQgdmdlbV9mZW5jZV9hdHRhY2hfaW9jdGwoc3RydWN0
IGRybV9kZXZpY2UgKmRldiwNCiAJc3RydWN0IHZnZW1fZmlsZSAqdmZpbGUgPSBmaWxlLT5kcml2
ZXJfcHJpdjsNCiAJc3RydWN0IGRtYV9yZXN2ICpyZXN2Ow0KIAlzdHJ1Y3QgZHJtX2dlbV9vYmpl
Y3QgKm9iajsNCisJZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZTsNCiAJc3RydWN0IGRtYV9mZW5j
ZSAqZmVuY2U7DQogCWludCByZXQ7DQogDQpAQCAtMTUxLDcgKzE1Miw4IEBAIGludCB2Z2VtX2Zl
bmNlX2F0dGFjaF9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LA0KIA0KIAkvKiBDaGVjayBm
b3IgYSBjb25mbGljdGluZyBmZW5jZSAqLw0KIAlyZXN2ID0gb2JqLT5yZXN2Ow0KLQlpZiAoIWRt
YV9yZXN2X3Rlc3Rfc2lnbmFsZWQocmVzdiwgYXJnLT5mbGFncyAmIFZHRU1fRkVOQ0VfV1JJVEUp
KSB7DQorCXVzYWdlID0gZG1hX3Jlc3ZfdXNhZ2VfcncoYXJnLT5mbGFncyAmIFZHRU1fRkVOQ0Vf
V1JJVEUpOw0KKwlpZiAoIWRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWQocmVzdiwgdXNhZ2UpKSB7DQog
CQlyZXQgPSAtRUJVU1k7DQogCQlnb3RvIGVycl9mZW5jZTsNCiAJfQ0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9pb2N0bC5jIGIvZHJpdmVycy9ncHUvZHJtL3Zp
cnRpby92aXJ0Z3B1X2lvY3RsLmMNCmluZGV4IGM3MDhiYWI1NTVjNi4uNTU3N2NjNzQwOGIyIDEw
MDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZpcnRpby92aXJ0Z3B1X2lvY3RsLmMNCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9pb2N0bC5jDQpAQCAtNTE4LDkgKzUxOCwx
MCBAQCBzdGF0aWMgaW50IHZpcnRpb19ncHVfd2FpdF9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAq
ZGV2LCB2b2lkICpkYXRhLA0KIAkJcmV0dXJuIC1FTk9FTlQ7DQogDQogCWlmIChhcmdzLT5mbGFn
cyAmIFZJUlRHUFVfV0FJVF9OT1dBSVQpIHsNCi0JCXJldCA9IGRtYV9yZXN2X3Rlc3Rfc2lnbmFs
ZWQob2JqLT5yZXN2LCB0cnVlKTsNCisJCXJldCA9IGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWQob2Jq
LT5yZXN2LCBETUFfUkVTVl9VU0FHRV9SRUFEKTsNCiAJfSBlbHNlIHsNCi0JCXJldCA9IGRtYV9y
ZXN2X3dhaXRfdGltZW91dChvYmotPnJlc3YsIHRydWUsIHRydWUsIHRpbWVvdXQpOw0KKwkJcmV0
ID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KG9iai0+cmVzdiwgRE1BX1JFU1ZfVVNBR0VfUkVBRCwN
CisJCQkJCSAgICB0cnVlLCB0aW1lb3V0KTsNCiAJfQ0KIAlpZiAocmV0ID09IDApDQogCQlyZXQg
PSAtRUJVU1k7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYm8u
YyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2JvLmMNCmluZGV4IGZlMTNhYThiNGE2
NC4uYjk2ODg0ZjdkMDNkIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdn
ZnhfYm8uYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYm8uYw0KQEAgLTUy
OCw4ICs1MjgsOCBAQCBzdGF0aWMgaW50IHZtd191c2VyX2JvX3N5bmNjcHVfZ3JhYihzdHJ1Y3Qg
dm13X2J1ZmZlcl9vYmplY3QgKnZtd19ibywNCiAJaWYgKGZsYWdzICYgZHJtX3Ztd19zeW5jY3B1
X2FsbG93X2NzKSB7DQogCQlsb25nIGxyZXQ7DQogDQotCQlscmV0ID0gZG1hX3Jlc3Zfd2FpdF90
aW1lb3V0KGJvLT5iYXNlLnJlc3YsIHRydWUsIHRydWUsDQotCQkJCQkgICAgIG5vbmJsb2NrID8g
MCA6DQorCQlscmV0ID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGJvLT5iYXNlLnJlc3YsIERNQV9S
RVNWX1VTQUdFX1JFQUQsDQorCQkJCQkgICAgIHRydWUsIG5vbmJsb2NrID8gMCA6DQogCQkJCQkg
ICAgIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsNCiAJCWlmICghbHJldCkNCiAJCQlyZXR1cm4gLUVC
VVNZOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3Jlc291cmNl
LmMgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jDQppbmRleCAzNmMz
YjVkYjdlNjkuLjM5MDgxZGJmOWFjOCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdn
Zngvdm13Z2Z4X3Jlc291cmNlLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4
X3Jlc291cmNlLmMNCkBAIC0xMTY2LDggKzExNjYsOCBAQCBpbnQgdm13X3Jlc291cmNlc19jbGVh
bihzdHJ1Y3Qgdm13X2J1ZmZlcl9vYmplY3QgKnZibywgcGdvZmZfdCBzdGFydCwNCiAJCWlmIChi
by0+bW92aW5nKQ0KIAkJCWRtYV9mZW5jZV9wdXQoYm8tPm1vdmluZyk7DQogDQotCQkvKiBUT0RP
OiBUaGlzIGlzIGFjdHVhbGx5IGEgbWVtb3J5IG1hbmFnZW1lbnQgZGVwZW5kZW5jeSAqLw0KLQkJ
cmV0dXJuIGRtYV9yZXN2X2dldF9zaW5nbGV0b24oYm8tPmJhc2UucmVzdiwgZmFsc2UsDQorCQly
ZXR1cm4gZG1hX3Jlc3ZfZ2V0X3NpbmdsZXRvbihiby0+YmFzZS5yZXN2LA0KKwkJCQkJICAgICAg
RE1BX1JFU1ZfVVNBR0VfV1JJVEUsDQogCQkJCQkgICAgICAmYm8tPm1vdmluZyk7DQogCX0NCiAN
CmRpZmYgLS1naXQgYS9kcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtX2RtYWJ1Zi5jIGIvZHJp
dmVycy9pbmZpbmliYW5kL2NvcmUvdW1lbV9kbWFidWYuYw0KaW5kZXggZDMyY2Q3NTM4ODM1Li5m
OTkwMWQyNzNiOGUgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtX2Rt
YWJ1Zi5jDQorKysgYi9kcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtX2RtYWJ1Zi5jDQpAQCAt
NjcsNyArNjcsOCBAQCBpbnQgaWJfdW1lbV9kbWFidWZfbWFwX3BhZ2VzKHN0cnVjdCBpYl91bWVt
X2RtYWJ1ZiAqdW1lbV9kbWFidWYpDQogCSAqIG1heSBiZSBub3QgdXAtdG8tZGF0ZS4gV2FpdCBm
b3IgdGhlIGV4cG9ydGVyIHRvIGZpbmlzaA0KIAkgKiB0aGUgbWlncmF0aW9uLg0KIAkgKi8NCi0J
cmV0dXJuIGRtYV9yZXN2X3dhaXRfdGltZW91dCh1bWVtX2RtYWJ1Zi0+YXR0YWNoLT5kbWFidWYt
PnJlc3YsIGZhbHNlLA0KKwlyZXR1cm4gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KHVtZW1fZG1hYnVm
LT5hdHRhY2gtPmRtYWJ1Zi0+cmVzdiwNCisJCQkJICAgICBETUFfUkVTVl9VU0FHRV9XUklURSwN
CiAJCQkJICAgICBmYWxzZSwgTUFYX1NDSEVEVUxFX1RJTUVPVVQpOw0KIH0NCiBFWFBPUlRfU1lN
Qk9MKGliX3VtZW1fZG1hYnVmX21hcF9wYWdlcyk7DQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51
eC9kbWEtcmVzdi5oIGIvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oDQppbmRleCA1ZmEwNGQwZmNj
YWQuLjY1ODY3NGM0YjdiOSAxMDA2NDQNCi0tLSBhL2luY2x1ZGUvbGludXgvZG1hLXJlc3YuaA0K
KysrIGIvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oDQpAQCAtNDksNiArNDksNDkgQEAgZXh0ZXJu
IHN0cnVjdCB3d19jbGFzcyByZXNlcnZhdGlvbl93d19jbGFzczsNCiANCiBzdHJ1Y3QgZG1hX3Jl
c3ZfbGlzdDsNCiANCisvKioNCisgKiBlbnVtIGRtYV9yZXN2X3VzYWdlIC0gaG93IHRoZSBmZW5j
ZXMgZnJvbSBhIGRtYV9yZXN2IG9iaiBhcmUgdXNlZA0KKyAqDQorICogVGhpcyBlbnVtIGRlc2Ny
aWJlcyB0aGUgZGlmZmVyZW50IHVzZSBjYXNlcyBmb3IgYSBkbWFfcmVzdiBvYmplY3QgYW5kDQor
ICogY29udHJvbHMgd2hpY2ggZmVuY2VzIGFyZSByZXR1cm5lZCB3aGVuIHF1ZXJpZWQuDQorICov
DQorZW51bSBkbWFfcmVzdl91c2FnZSB7DQorCS8qKg0KKwkgKiBARE1BX1JFU1ZfVVNBR0VfV1JJ
VEU6IEltcGxpY2l0IHdyaXRlIHN5bmNocm9uaXphdGlvbi4NCisJICoNCisJICogVGhpcyBzaG91
bGQgb25seSBiZSB1c2VkIGZvciB1c2Vyc3BhY2UgY29tbWFuZCBzdWJtaXNzaW9ucyB3aGljaCBh
ZGQNCisJICogYW4gaW1wbGljaXQgd3JpdGUgZGVwZW5kZW5jeS4NCisJICovDQorCURNQV9SRVNW
X1VTQUdFX1dSSVRFLA0KKw0KKwkvKioNCisJICogQERNQV9SRVNWX1VTQUdFX1JFQUQ6IEltcGxp
Y2l0IHJlYWQgc3luY2hyb25pemF0aW9uLg0KKwkgKg0KKwkgKiBUaGlzIHNob3VsZCBvbmx5IGJl
IHVzZWQgZm9yIHVzZXJzcGFjZSBjb21tYW5kIHN1Ym1pc3Npb25zIHdoaWNoIGFkZA0KKwkgKiBh
biBpbXBsaWNpdCByZWFkIGRlcGVuZGVuY3kuDQorCSAqLw0KKwlETUFfUkVTVl9VU0FHRV9SRUFE
LA0KK307DQorDQorLyoqDQorICogZG1hX3Jlc3ZfdXNhZ2VfcncgLSBoZWxwZXIgZm9yIGltcGxp
Y2l0IHN5bmMNCisgKiBAd3JpdGU6IHRydWUgaWYgd2UgY3JlYXRlIGEgbmV3IGltcGxpY2l0IHN5
bmMgd3JpdGUNCisgKg0KKyAqIFRoaXMgcmV0dXJucyB0aGUgaW1wbGljaXQgc3luY2hyb25pemF0
aW9uIHVzYWdlIGZvciB3cml0ZSBvciByZWFkIGFjY2Vzc2VzLA0KKyAqIHNlZSBlbnVtIGRtYV9y
ZXN2X3VzYWdlLg0KKyAqLw0KK3N0YXRpYyBpbmxpbmUgZW51bSBkbWFfcmVzdl91c2FnZSBkbWFf
cmVzdl91c2FnZV9ydyhib29sIHdyaXRlKQ0KK3sNCisJLyogVGhpcyBsb29rcyBjb25mdXNpbmcg
YXQgZmlyc3Qgc2lnaHQsIGJ1dCBpcyBpbmRlZWQgY29ycmVjdC4NCisJICoNCisJICogVGhlIHJh
dGlvbmFsIGlzIHRoYXQgbmV3IHdyaXRlIG9wZXJhdGlvbnMgbmVlZHMgdG8gd2FpdCBmb3IgdGhl
DQorCSAqIGV4aXN0aW5nIHJlYWQgYW5kIHdyaXRlIG9wZXJhdGlvbnMgdG8gZmluaXNoLg0KKwkg
KiBCdXQgYSBuZXcgcmVhZCBvcGVyYXRpb24gb25seSBuZWVkcyB0byB3YWl0IGZvciB0aGUgZXhp
c3Rpbmcgd3JpdGUNCisJICogb3BlcmF0aW9ucyB0byBmaW5pc2guDQorCSAqLw0KKwlyZXR1cm4g
d3JpdGUgPyBETUFfUkVTVl9VU0FHRV9SRUFEIDogRE1BX1JFU1ZfVVNBR0VfV1JJVEU7DQorfQ0K
Kw0KIC8qKg0KICAqIHN0cnVjdCBkbWFfcmVzdiAtIGEgcmVzZXJ2YXRpb24gb2JqZWN0IG1hbmFn
ZXMgZmVuY2VzIGZvciBhIGJ1ZmZlcg0KICAqDQpAQCAtMTQyLDggKzE4NSw4IEBAIHN0cnVjdCBk
bWFfcmVzdl9pdGVyIHsNCiAJLyoqIEBvYmo6IFRoZSBkbWFfcmVzdiBvYmplY3Qgd2UgaXRlcmF0
ZSBvdmVyICovDQogCXN0cnVjdCBkbWFfcmVzdiAqb2JqOw0KIA0KLQkvKiogQGFsbF9mZW5jZXM6
IElmIGFsbCBmZW5jZXMgc2hvdWxkIGJlIHJldHVybmVkICovDQotCWJvb2wgYWxsX2ZlbmNlczsN
CisJLyoqIEB1c2FnZTogQ29udHJvbHMgd2hpY2ggZmVuY2VzIGFyZSByZXR1cm5lZCAqLw0KKwll
bnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlOw0KIA0KIAkvKiogQGZlbmNlOiB0aGUgY3VycmVudGx5
IGhhbmRsZWQgZmVuY2UgKi8NCiAJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7DQpAQCAtMTczLDE0
ICsyMTYsMTQgQEAgc3RydWN0IGRtYV9mZW5jZSAqZG1hX3Jlc3ZfaXRlcl9uZXh0KHN0cnVjdCBk
bWFfcmVzdl9pdGVyICpjdXJzb3IpOw0KICAqIGRtYV9yZXN2X2l0ZXJfYmVnaW4gLSBpbml0aWFs
aXplIGEgZG1hX3Jlc3ZfaXRlciBvYmplY3QNCiAgKiBAY3Vyc29yOiBUaGUgZG1hX3Jlc3ZfaXRl
ciBvYmplY3QgdG8gaW5pdGlhbGl6ZQ0KICAqIEBvYmo6IFRoZSBkbWFfcmVzdiBvYmplY3Qgd2hp
Y2ggd2Ugd2FudCB0byBpdGVyYXRlIG92ZXINCi0gKiBAYWxsX2ZlbmNlczogSWYgYWxsIGZlbmNl
cyBzaG91bGQgYmUgcmV0dXJuZWQgb3IganVzdCB0aGUgZXhjbHVzaXZlIG9uZQ0KKyAqIEB1c2Fn
ZTogY29udHJvbHMgd2hpY2ggZmVuY2VzIHRvIGluY2x1ZGUsIHNlZSBlbnVtIGRtYV9yZXN2X3Vz
YWdlLg0KICAqLw0KIHN0YXRpYyBpbmxpbmUgdm9pZCBkbWFfcmVzdl9pdGVyX2JlZ2luKHN0cnVj
dCBkbWFfcmVzdl9pdGVyICpjdXJzb3IsDQogCQkJCSAgICAgICBzdHJ1Y3QgZG1hX3Jlc3YgKm9i
aiwNCi0JCQkJICAgICAgIGJvb2wgYWxsX2ZlbmNlcykNCisJCQkJICAgICAgIGVudW0gZG1hX3Jl
c3ZfdXNhZ2UgdXNhZ2UpDQogew0KIAljdXJzb3ItPm9iaiA9IG9iajsNCi0JY3Vyc29yLT5hbGxf
ZmVuY2VzID0gYWxsX2ZlbmNlczsNCisJY3Vyc29yLT51c2FnZSA9IHVzYWdlOw0KIAljdXJzb3It
PmZlbmNlID0gTlVMTDsNCiB9DQogDQpAQCAtMjQxLDcgKzI4NCw3IEBAIHN0YXRpYyBpbmxpbmUg
Ym9vbCBkbWFfcmVzdl9pdGVyX2lzX3Jlc3RhcnRlZChzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vy
c29yKQ0KICAqIGRtYV9yZXN2X2Zvcl9lYWNoX2ZlbmNlIC0gZmVuY2UgaXRlcmF0b3INCiAgKiBA
Y3Vyc29yOiBhIHN0cnVjdCBkbWFfcmVzdl9pdGVyIHBvaW50ZXINCiAgKiBAb2JqOiBhIGRtYV9y
ZXN2IG9iamVjdCBwb2ludGVyDQotICogQGFsbF9mZW5jZXM6IHRydWUgaWYgYWxsIGZlbmNlcyBz
aG91bGQgYmUgcmV0dXJuZWQNCisgKiBAdXNhZ2U6IGNvbnRyb2xzIHdoaWNoIGZlbmNlcyB0byBy
ZXR1cm4NCiAgKiBAZmVuY2U6IHRoZSBjdXJyZW50IGZlbmNlDQogICoNCiAgKiBJdGVyYXRlIG92
ZXIgdGhlIGZlbmNlcyBpbiBhIHN0cnVjdCBkbWFfcmVzdiBvYmplY3Qgd2hpbGUgaG9sZGluZyB0
aGUNCkBAIC0yNTAsOCArMjkzLDggQEAgc3RhdGljIGlubGluZSBib29sIGRtYV9yZXN2X2l0ZXJf
aXNfcmVzdGFydGVkKHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IpDQogICogdmFsaWQgYXMg
bG9uZyBhcyB0aGUgbG9jayBpcyBoZWxkIGFuZCBzbyBubyBleHRyYSByZWZlcmVuY2UgdG8gdGhl
IGZlbmNlIGlzDQogICogdGFrZW4uDQogICovDQotI2RlZmluZSBkbWFfcmVzdl9mb3JfZWFjaF9m
ZW5jZShjdXJzb3IsIG9iaiwgYWxsX2ZlbmNlcywgZmVuY2UpCVwNCi0JZm9yIChkbWFfcmVzdl9p
dGVyX2JlZ2luKGN1cnNvciwgb2JqLCBhbGxfZmVuY2VzKSwJXA0KKyNkZWZpbmUgZG1hX3Jlc3Zf
Zm9yX2VhY2hfZmVuY2UoY3Vyc29yLCBvYmosIHVzYWdlLCBmZW5jZSkJXA0KKwlmb3IgKGRtYV9y
ZXN2X2l0ZXJfYmVnaW4oY3Vyc29yLCBvYmosIHVzYWdlKSwJXA0KIAkgICAgIGZlbmNlID0gZG1h
X3Jlc3ZfaXRlcl9maXJzdChjdXJzb3IpOyBmZW5jZTsJXA0KIAkgICAgIGZlbmNlID0gZG1hX3Jl
c3ZfaXRlcl9uZXh0KGN1cnNvcikpDQogDQpAQCAtNDE4LDE0ICs0NjEsMTQgQEAgdm9pZCBkbWFf
cmVzdl9hZGRfc2hhcmVkX2ZlbmNlKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBzdHJ1Y3QgZG1hX2Zl
bmNlICpmZW5jZSk7DQogdm9pZCBkbWFfcmVzdl9yZXBsYWNlX2ZlbmNlcyhzdHJ1Y3QgZG1hX3Jl
c3YgKm9iaiwgdWludDY0X3QgY29udGV4dCwNCiAJCQkgICAgIHN0cnVjdCBkbWFfZmVuY2UgKmZl
bmNlKTsNCiB2b2lkIGRtYV9yZXN2X2FkZF9leGNsX2ZlbmNlKHN0cnVjdCBkbWFfcmVzdiAqb2Jq
LCBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSk7DQotaW50IGRtYV9yZXN2X2dldF9mZW5jZXMoc3Ry
dWN0IGRtYV9yZXN2ICpvYmosIGJvb2wgd3JpdGUsDQoraW50IGRtYV9yZXN2X2dldF9mZW5jZXMo
c3RydWN0IGRtYV9yZXN2ICpvYmosIGVudW0gZG1hX3Jlc3ZfdXNhZ2UgdXNhZ2UsDQogCQkJdW5z
aWduZWQgaW50ICpudW1fZmVuY2VzLCBzdHJ1Y3QgZG1hX2ZlbmNlICoqKmZlbmNlcyk7DQotaW50
IGRtYV9yZXN2X2dldF9zaW5nbGV0b24oc3RydWN0IGRtYV9yZXN2ICpvYmosIGJvb2wgd3JpdGUs
DQoraW50IGRtYV9yZXN2X2dldF9zaW5nbGV0b24oc3RydWN0IGRtYV9yZXN2ICpvYmosIGVudW0g
ZG1hX3Jlc3ZfdXNhZ2UgdXNhZ2UsDQogCQkJICAgc3RydWN0IGRtYV9mZW5jZSAqKmZlbmNlKTsN
CiBpbnQgZG1hX3Jlc3ZfY29weV9mZW5jZXMoc3RydWN0IGRtYV9yZXN2ICpkc3QsIHN0cnVjdCBk
bWFfcmVzdiAqc3JjKTsNCi1sb25nIGRtYV9yZXN2X3dhaXRfdGltZW91dChzdHJ1Y3QgZG1hX3Jl
c3YgKm9iaiwgYm9vbCB3YWl0X2FsbCwgYm9vbCBpbnRyLA0KLQkJCSAgIHVuc2lnbmVkIGxvbmcg
dGltZW91dCk7DQotYm9vbCBkbWFfcmVzdl90ZXN0X3NpZ25hbGVkKHN0cnVjdCBkbWFfcmVzdiAq
b2JqLCBib29sIHRlc3RfYWxsKTsNCitsb25nIGRtYV9yZXN2X3dhaXRfdGltZW91dChzdHJ1Y3Qg
ZG1hX3Jlc3YgKm9iaiwgZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSwNCisJCQkgICBib29sIGlu
dHIsIHVuc2lnbmVkIGxvbmcgdGltZW91dCk7DQorYm9vbCBkbWFfcmVzdl90ZXN0X3NpZ25hbGVk
KHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlKTsNCiB2b2lk
IGRtYV9yZXN2X2Rlc2NyaWJlKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBzdHJ1Y3Qgc2VxX2ZpbGUg
KnNlcSk7DQogDQogI2VuZGlmIC8qIF9MSU5VWF9SRVNFUlZBVElPTl9IICovDQotLSANCjIuMjUu
MQ0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW5h
cm8tbW0tc2lnIG1haWxpbmcgbGlzdCAtLSBsaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcK
VG8gdW5zdWJzY3JpYmUgc2VuZCBhbiBlbWFpbCB0byBsaW5hcm8tbW0tc2lnLWxlYXZlQGxpc3Rz
LmxpbmFyby5vcmcK
