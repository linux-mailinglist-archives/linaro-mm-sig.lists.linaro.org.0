Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id C1EDE382F30
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 17 May 2021 16:13:39 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 19D89607E1
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 17 May 2021 14:13:38 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id B5DF461033; Mon, 17 May 2021 14:13:35 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id B082D60C2B;
	Mon, 17 May 2021 14:13:30 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id EFE2360B35
 for <linaro-mm-sig@lists.linaro.org>; Mon, 17 May 2021 14:11:38 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id EB7F360B8C; Mon, 17 May 2021 14:11:38 +0000 (UTC)
Received: from mail-ed1-f43.google.com (mail-ed1-f43.google.com
 [209.85.208.43])
 by lists.linaro.org (Postfix) with ESMTPS id BD27F60B35
 for <linaro-mm-sig@lists.linaro.org>; Mon, 17 May 2021 14:11:36 +0000 (UTC)
Received: by mail-ed1-f43.google.com with SMTP id df21so7092677edb.3
 for <linaro-mm-sig@lists.linaro.org>; Mon, 17 May 2021 07:11:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=QKKcvjX+jFfdKukJI7NqNwtn+WGlVAQGNyUUME+8cuI=;
 b=oD7cp4nzC8nxYSFnZ+V5oY8WNBzuEWEkwepreUkHDND+XykvUE6tluczLSqtP7o+cq
 GeLtFaIDdfh0s7edigs7tztu24/Uh7dvP5Ka/nhkysJCv3gLVuMoiECul3K4aj4cickx
 V2nZqrlvojfg8j6bacOiX0AGKWRkX/jaeL/omtrPjWyvXyFdz1Jrl7u9Zr/QnGZN2KRI
 rfESp3hdSBqhPn2Oo+eqxBQdgpg+vHWaRkWwQGsT3Knyd0ewSsWLA+dw0Pc6xmtZKDU5
 ARd1gDJCUvcryIJn9erjyrWdk6DD5Jy1X1j0bKF3wQy229T32ZXzS61t/y+E1VmU2Eu9
 qXlQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=QKKcvjX+jFfdKukJI7NqNwtn+WGlVAQGNyUUME+8cuI=;
 b=EAM6a+BSCtf8k0S6mb0CNWK2CplJrk0krJTGI36nS0a3C0EUeD+lYKV2gqAGo6G2hk
 SnaT7AOFb4n1YLQNcuKrH0ETQu/VxU3lmV2JSzMapWIsfsQJSSCj1ykvZ+sC45MfAz5I
 FbzXPKy3TT8rXT186UQCAxv3dsqQS6QNpv0F0r26dJJugxZJwAwpuiQrFIL5Z+if8M7l
 6gg2aqPGMTFxM//NLcDjJtGaAy6VedE5UpV5N9RRbvtBZx7yNfhcGlaBY4zKboUPsYoC
 DU/21n7JIO3LQDRnNawLGSwVtP1qxu+Smb8/K65EFnZbu8TvFEBglK2k/JdQQT0RLm7V
 vIAw==
X-Gm-Message-State: AOAM530m92dPUfT5OiTxA3aUF3rJmOW9n4u6y6IB2BBTFSRRfOjnfFve
 DqzUMv4guUnQYeWMTy2admCRnvIMqbE=
X-Google-Smtp-Source: ABdhPJzLn9M0MzV+qmtjbhqY6IVrTOChhTlQuPkboPuSgHqItsXy2n+XqZSY/MN4Fz+229YJWEwGRw==
X-Received: by 2002:aa7:cb90:: with SMTP id r16mr218011edt.247.1621260695913; 
 Mon, 17 May 2021 07:11:35 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:1df4:c5b6:b8fd:3c4b])
 by smtp.gmail.com with ESMTPSA id b9sm2419624edt.71.2021.05.17.07.11.35
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 17 May 2021 07:11:35 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org,
	linaro-mm-sig@lists.linaro.org
Date: Mon, 17 May 2021 16:11:23 +0200
Message-Id: <20210517141129.2225-6-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20210517141129.2225-1-christian.koenig@amd.com>
References: <20210517141129.2225-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: [Linaro-mm-sig] [PATCH 05/11] dma-buf: rename and cleanup
 dma_resv_get_list
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: daniel@ffwll.ch
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

V2hlbiB0aGUgY29tbWVudCBuZWVkcyB0byBzdGF0ZSBleHBsaWNpdGx5IHRoYXQgdGhpcyBpcyBk
b2Vzbid0IGdldCBhIHJlZmVyZW5jZQp0byB0aGUgb2JqZWN0IHRoZW4gdGhlIGZ1bmN0aW9uIGlz
IG5hbWVkIHJhdGhlciBiYWRseS4KClJlbmFtZSB0aGUgZnVuY3Rpb24gYW5kIHVzZSBpdCBpbiBl
dmVuIG1vcmUgcGxhY2VzLgoKU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0
aWFuLmtvZW5pZ0BhbWQuY29tPgotLS0KIGRyaXZlcnMvZG1hLWJ1Zi9kbWEtcmVzdi5jICAgICAg
ICAgICAgICAgICAgICB8IDMyICsrKysrKysrKy0tLS0tLS0tLS0KIC4uLi9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5jICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3N5bmMuYyAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV90dG0uYyAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9l
dG5hdml2X2dlbS5jICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5
MTVfZ2VtX2J1c3kuYyAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dlbS5j
ICAgICAgICAgICAgICAgICB8ICA0ICstLQogZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVh
dV9mZW5jZS5jICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX2RlYnVnZnMu
YyAgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9zeW5j
LmMgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYyAgICAgICAg
ICAgICAgICAgIHwgIDIgKy0KIGluY2x1ZGUvbGludXgvZG1hLXJlc3YuaCAgICAgICAgICAgICAg
ICAgICAgICB8IDI1ICsrKysrKystLS0tLS0tLQogMTMgZmlsZXMgY2hhbmdlZCwgMzkgaW5zZXJ0
aW9ucygrKSwgNDIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL2Rt
YS1yZXN2LmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLXJlc3YuYwppbmRleCA4MWIwMzJiNDM0NTcu
LmIxYTFhMzFkYzAwOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMKKysr
IGIvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMKQEAgLTE0OSw4ICsxNDksNyBAQCBpbnQgZG1h
X3Jlc3ZfcmVzZXJ2ZV9zaGFyZWQoc3RydWN0IGRtYV9yZXN2ICpvYmosIHVuc2lnbmVkIGludCBu
dW1fZmVuY2VzKQogCiAJZG1hX3Jlc3ZfYXNzZXJ0X2hlbGQob2JqKTsKIAotCW9sZCA9IGRtYV9y
ZXN2X2dldF9saXN0KG9iaik7Ci0KKwlvbGQgPSBkbWFfcmVzdl9zaGFyZWQob2JqKTsKIAlpZiAo
b2xkICYmIG9sZC0+c2hhcmVkX21heCkgewogCQlpZiAoKG9sZC0+c2hhcmVkX2NvdW50ICsgbnVt
X2ZlbmNlcykgPD0gb2xkLT5zaGFyZWRfbWF4KQogCQkJcmV0dXJuIDA7CkBAIC0yMTcsMTIgKzIx
NiwxMyBAQCBFWFBPUlRfU1lNQk9MKGRtYV9yZXN2X3Jlc2VydmVfc2hhcmVkKTsKICAqLwogdm9p
ZCBkbWFfcmVzdl9yZXNldF9zaGFyZWRfbWF4KHN0cnVjdCBkbWFfcmVzdiAqb2JqKQogewotCS8q
IFRlc3Qgc2hhcmVkIGZlbmNlIHNsb3QgcmVzZXJ2YXRpb24gKi8KLQlpZiAocmN1X2FjY2Vzc19w
b2ludGVyKG9iai0+ZmVuY2UpKSB7Ci0JCXN0cnVjdCBkbWFfcmVzdl9saXN0ICpmZW5jZSA9IGRt
YV9yZXN2X2dldF9saXN0KG9iaik7CisJc3RydWN0IGRtYV9yZXN2X2xpc3QgKmZlbmNlcyA9IGRt
YV9yZXN2X3NoYXJlZChvYmopOwogCi0JCWZlbmNlLT5zaGFyZWRfbWF4ID0gZmVuY2UtPnNoYXJl
ZF9jb3VudDsKLQl9CisJZG1hX3Jlc3ZfYXNzZXJ0X2hlbGQob2JqKTsKKworCS8qIFRlc3Qgc2hh
cmVkIGZlbmNlIHNsb3QgcmVzZXJ2YXRpb24gKi8KKwlpZiAoZmVuY2VzKQorCQlmZW5jZXMtPnNo
YXJlZF9tYXggPSBmZW5jZXMtPnNoYXJlZF9jb3VudDsKIH0KICNlbmRpZgogCkBAIC0yNDQsNyAr
MjQ0LDcgQEAgdm9pZCBkbWFfcmVzdl9hZGRfc2hhcmVkX2ZlbmNlKHN0cnVjdCBkbWFfcmVzdiAq
b2JqLCBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkKIAogCWRtYV9yZXN2X2Fzc2VydF9oZWxkKG9i
aik7CiAKLQlmb2JqID0gZG1hX3Jlc3ZfZ2V0X2xpc3Qob2JqKTsKKwlmb2JqID0gZG1hX3Jlc3Zf
c2hhcmVkKG9iaik7CiAJY291bnQgPSBmb2JqLT5zaGFyZWRfY291bnQ7CiAKIAl3cml0ZV9zZXFj
b3VudF9iZWdpbigmb2JqLT5zZXEpOwpAQCAtMjg3LDcgKzI4Nyw3IEBAIHZvaWQgZG1hX3Jlc3Zf
YWRkX2V4Y2xfZmVuY2Uoc3RydWN0IGRtYV9yZXN2ICpvYmosIHN0cnVjdCBkbWFfZmVuY2UgKmZl
bmNlKQogCiAJZG1hX3Jlc3ZfYXNzZXJ0X2hlbGQob2JqKTsKIAotCW9sZCA9IGRtYV9yZXN2X2dl
dF9saXN0KG9iaik7CisJb2xkID0gZG1hX3Jlc3Zfc2hhcmVkKG9iaik7CiAJaWYgKG9sZCkKIAkJ
aSA9IG9sZC0+c2hhcmVkX2NvdW50OwogCkBAIC0zMjYsNyArMzI2LDcgQEAgaW50IGRtYV9yZXN2
X2NvcHlfZmVuY2VzKHN0cnVjdCBkbWFfcmVzdiAqZHN0LCBzdHJ1Y3QgZG1hX3Jlc3YgKnNyYykK
IAlkbWFfcmVzdl9hc3NlcnRfaGVsZChkc3QpOwogCiAJcmN1X3JlYWRfbG9jaygpOwotCXNyY19s
aXN0ID0gcmN1X2RlcmVmZXJlbmNlKHNyYy0+ZmVuY2UpOworCXNyY19saXN0ID0gZG1hX3Jlc3Zf
c2hhcmVkKHNyYyk7CiAKIHJldHJ5OgogCWlmIChzcmNfbGlzdCkgewpAQCAtMzM5LDcgKzMzOSw3
IEBAIGludCBkbWFfcmVzdl9jb3B5X2ZlbmNlcyhzdHJ1Y3QgZG1hX3Jlc3YgKmRzdCwgc3RydWN0
IGRtYV9yZXN2ICpzcmMpCiAJCQlyZXR1cm4gLUVOT01FTTsKIAogCQlyY3VfcmVhZF9sb2NrKCk7
Ci0JCXNyY19saXN0ID0gcmN1X2RlcmVmZXJlbmNlKHNyYy0+ZmVuY2UpOworCQlzcmNfbGlzdCA9
IGRtYV9yZXN2X3NoYXJlZChzcmMpOwogCQlpZiAoIXNyY19saXN0IHx8IHNyY19saXN0LT5zaGFy
ZWRfY291bnQgPiBzaGFyZWRfY291bnQpIHsKIAkJCWtmcmVlKGRzdF9saXN0KTsKIAkJCWdvdG8g
cmV0cnk7CkBAIC0zNTcsNyArMzU3LDcgQEAgaW50IGRtYV9yZXN2X2NvcHlfZmVuY2VzKHN0cnVj
dCBkbWFfcmVzdiAqZHN0LCBzdHJ1Y3QgZG1hX3Jlc3YgKnNyYykKIAogCQkJaWYgKCFkbWFfZmVu
Y2VfZ2V0X3JjdShmZW5jZSkpIHsKIAkJCQlkbWFfcmVzdl9saXN0X2ZyZWUoZHN0X2xpc3QpOwot
CQkJCXNyY19saXN0ID0gcmN1X2RlcmVmZXJlbmNlKHNyYy0+ZmVuY2UpOworCQkJCXNyY19saXN0
ID0gZG1hX3Jlc3Zfc2hhcmVkKHNyYyk7CiAJCQkJZ290byByZXRyeTsKIAkJCX0KIApAQCAtMzc2
LDcgKzM3Niw3IEBAIGludCBkbWFfcmVzdl9jb3B5X2ZlbmNlcyhzdHJ1Y3QgZG1hX3Jlc3YgKmRz
dCwgc3RydWN0IGRtYV9yZXN2ICpzcmMpCiAJbmV3ID0gZG1hX2ZlbmNlX2dldF9yY3Vfc2FmZSgm
c3JjLT5mZW5jZV9leGNsKTsKIAlyY3VfcmVhZF91bmxvY2soKTsKIAotCXNyY19saXN0ID0gZG1h
X3Jlc3ZfZ2V0X2xpc3QoZHN0KTsKKwlzcmNfbGlzdCA9IGRtYV9yZXN2X3NoYXJlZChkc3QpOwog
CW9sZCA9IGRtYV9yZXN2X2V4Y2x1c2l2ZShkc3QpOwogCiAJd3JpdGVfc2VxY291bnRfYmVnaW4o
JmRzdC0+c2VxKTsKQEAgLTQyOSw3ICs0MjksNyBAQCBpbnQgZG1hX3Jlc3ZfZ2V0X2ZlbmNlc19y
Y3Uoc3RydWN0IGRtYV9yZXN2ICpvYmosCiAJCWlmIChmZW5jZV9leGNsICYmICFkbWFfZmVuY2Vf
Z2V0X3JjdShmZW5jZV9leGNsKSkKIAkJCWdvdG8gdW5sb2NrOwogCi0JCWZvYmogPSByY3VfZGVy
ZWZlcmVuY2Uob2JqLT5mZW5jZSk7CisJCWZvYmogPSBkbWFfcmVzdl9zaGFyZWQob2JqKTsKIAkJ
aWYgKGZvYmopCiAJCQlzeiArPSBzaXplb2YoKnNoYXJlZCkgKiBmb2JqLT5zaGFyZWRfbWF4Owog
CkBAIC01MzUsNyArNTM1LDcgQEAgbG9uZyBkbWFfcmVzdl93YWl0X3RpbWVvdXRfcmN1KHN0cnVj
dCBkbWFfcmVzdiAqb2JqLAogCX0KIAogCWlmICh3YWl0X2FsbCkgewotCQlzdHJ1Y3QgZG1hX3Jl
c3ZfbGlzdCAqZm9iaiA9IHJjdV9kZXJlZmVyZW5jZShvYmotPmZlbmNlKTsKKwkJc3RydWN0IGRt
YV9yZXN2X2xpc3QgKmZvYmogPSBkbWFfcmVzdl9zaGFyZWQob2JqKTsKIAogCQlpZiAoZm9iaikK
IAkJCXNoYXJlZF9jb3VudCA9IGZvYmotPnNoYXJlZF9jb3VudDsKQEAgLTYyMCw3ICs2MjAsNyBA
QCBib29sIGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWRfcmN1KHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBi
b29sIHRlc3RfYWxsKQogCXNlcSA9IHJlYWRfc2VxY291bnRfYmVnaW4oJm9iai0+c2VxKTsKIAog
CWlmICh0ZXN0X2FsbCkgewotCQlzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqZm9iaiA9IHJjdV9kZXJl
ZmVyZW5jZShvYmotPmZlbmNlKTsKKwkJc3RydWN0IGRtYV9yZXN2X2xpc3QgKmZvYmogPSBkbWFf
cmVzdl9zaGFyZWQob2JqKTsKIAkJdW5zaWduZWQgaW50IGk7CiAKIAkJaWYgKGZvYmopCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMKaW5kZXgg
N2Q0MTE4YzgxMjhhLi44OGRhMGU0MDA0MDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMKQEAgLTI0NSw3ICsyNDUsNyBAQCBzdGF0aWMg
aW50IGFtZGdwdV9hbWRrZmRfcmVtb3ZlX2V2aWN0aW9uX2ZlbmNlKHN0cnVjdCBhbWRncHVfYm8g
KmJvLAogCWlmICghZWYpCiAJCXJldHVybiAtRUlOVkFMOwogCi0Jb2xkID0gZG1hX3Jlc3ZfZ2V0
X2xpc3QocmVzdik7CisJb2xkID0gZG1hX3Jlc3Zfc2hhcmVkKHJlc3YpOwogCWlmICghb2xkKQog
CQlyZXR1cm4gMDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2RtYV9idWYuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVm
LmMKaW5kZXggYmFhOTgwYTQ3N2Q5Li4wMzcxOTQ3YmE5NmIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMKKysrIGIvZHJpdmVycy9ncHUvZHJt
L2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuYwpAQCAtOTUsNyArOTUsNyBAQCBfX2RtYV9yZXN2
X21ha2VfZXhjbHVzaXZlKHN0cnVjdCBkbWFfcmVzdiAqb2JqKQogCXVuc2lnbmVkIGludCBjb3Vu
dDsKIAlpbnQgcjsKIAotCWlmICghZG1hX3Jlc3ZfZ2V0X2xpc3Qob2JqKSkgLyogbm8gc2hhcmVk
IGZlbmNlcyB0byBjb252ZXJ0ICovCisJaWYgKCFkbWFfcmVzdl9zaGFyZWQob2JqKSkgLyogbm8g
c2hhcmVkIGZlbmNlcyB0byBjb252ZXJ0ICovCiAJCXJldHVybiAwOwogCiAJciA9IGRtYV9yZXN2
X2dldF9mZW5jZXNfcmN1KG9iaiwgTlVMTCwgJmNvdW50LCAmZmVuY2VzKTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9zeW5jLmMgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfc3luYy5jCmluZGV4IGM4NGQ1Yjg0Mzk4NS4uYzUwZDlmOTJh
MGNkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfc3luYy5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9zeW5jLmMKQEAgLTIxMyw3
ICsyMTMsNyBAQCBpbnQgYW1kZ3B1X3N5bmNfcmVzdihzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRl
diwgc3RydWN0IGFtZGdwdV9zeW5jICpzeW5jLAogCWYgPSBkbWFfcmVzdl9leGNsdXNpdmUocmVz
dik7CiAJciA9IGFtZGdwdV9zeW5jX2ZlbmNlKHN5bmMsIGYpOwogCi0JZmxpc3QgPSBkbWFfcmVz
dl9nZXRfbGlzdChyZXN2KTsKKwlmbGlzdCA9IGRtYV9yZXN2X3NoYXJlZChyZXN2KTsKIAlpZiAo
IWZsaXN0IHx8IHIpCiAJCXJldHVybiByOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdHRtLmMKaW5kZXggOGM3ZWMwOWViMWE0Li42YWI1MDgxMGJkNTQgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMKQEAgLTE0MDcsNyArMTQwNyw3IEBAIHN0YXRpYyBi
b29sIGFtZGdwdV90dG1fYm9fZXZpY3Rpb25fdmFsdWFibGUoc3RydWN0IHR0bV9idWZmZXJfb2Jq
ZWN0ICpibywKIAkgKiBJZiB0cnVlLCB0aGVuIHJldHVybiBmYWxzZSBhcyBhbnkgS0ZEIHByb2Nl
c3MgbmVlZHMgYWxsIGl0cyBCT3MgdG8KIAkgKiBiZSByZXNpZGVudCB0byBydW4gc3VjY2Vzc2Z1
bGx5CiAJICovCi0JZmxpc3QgPSBkbWFfcmVzdl9nZXRfbGlzdChiby0+YmFzZS5yZXN2KTsKKwlm
bGlzdCA9IGRtYV9yZXN2X3NoYXJlZChiby0+YmFzZS5yZXN2KTsKIAlpZiAoZmxpc3QpIHsKIAkJ
Zm9yIChpID0gMDsgaSA8IGZsaXN0LT5zaGFyZWRfY291bnQ7ICsraSkgewogCQkJZiA9IHJjdV9k
ZXJlZmVyZW5jZV9wcm90ZWN0ZWQoZmxpc3QtPnNoYXJlZFtpXSwKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZp
di9ldG5hdml2X2dlbS5jCmluZGV4IGQ0ZjU0ZGVhOGFjMS4uNGQ0M2I4NjMwZjBlIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbS5jCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtLmMKQEAgLTQ2MSw3ICs0NjEsNyBAQCBzdGF0aWMg
dm9pZCBldG5hdml2X2dlbV9kZXNjcmliZShzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwgc3Ry
dWN0IHNlcV9maWxlICptKQogCQkJb2ZmLCBldG5hdml2X29iai0+dmFkZHIsIG9iai0+c2l6ZSk7
CiAKIAlyY3VfcmVhZF9sb2NrKCk7Ci0JZm9iaiA9IHJjdV9kZXJlZmVyZW5jZShyb2JqLT5mZW5j
ZSk7CisJZm9iaiA9IGRtYV9yZXN2X3NoYXJlZChyb2JqKTsKIAlpZiAoZm9iaikgewogCQl1bnNp
Z25lZCBpbnQgaSwgc2hhcmVkX2NvdW50ID0gZm9iai0+c2hhcmVkX2NvdW50OwogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fYnVzeS5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2J1c3kuYwppbmRleCAwMjMxMmEwYzNhMzYuLjNmOTRi
ZWNhYzU0MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2J1
c3kuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fYnVzeS5jCkBAIC0x
MTYsNyArMTE2LDcgQEAgaTkxNV9nZW1fYnVzeV9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LCB2b2lkICpkYXRhLAogCWFyZ3MtPmJ1c3kgPSBidXN5X2NoZWNrX3dyaXRlcihkbWFfcmVzdl9l
eGNsdXNpdmUob2JqLT5iYXNlLnJlc3YpKTsKIAogCS8qIFRyYW5zbGF0ZSBzaGFyZWQgZmVuY2Vz
IHRvIFJFQUQgc2V0IG9mIGVuZ2luZXMgKi8KLQlsaXN0ID0gcmN1X2RlcmVmZXJlbmNlKG9iai0+
YmFzZS5yZXN2LT5mZW5jZSk7CisJbGlzdCA9IGRtYV9yZXN2X3NoYXJlZChvYmotPmJhc2UucmVz
dik7CiAJaWYgKGxpc3QpIHsKIAkJdW5zaWduZWQgaW50IHNoYXJlZF9jb3VudCA9IGxpc3QtPnNo
YXJlZF9jb3VudCwgaTsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2Vt
LmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9nZW0uYwppbmRleCA5OWI4Y2VmYjAwNzIuLmNm
M2UwOGI2YTkxMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtLmMKKysr
IGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtLmMKQEAgLTgwMyw3ICs4MDMsNyBAQCBpbnQg
bXNtX2dlbV9zeW5jX29iamVjdChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwKIAlzdHJ1Y3Qg
ZG1hX2ZlbmNlICpmZW5jZTsKIAlpbnQgaSwgcmV0OwogCi0JZm9iaiA9IGRtYV9yZXN2X2dldF9s
aXN0KG9iai0+cmVzdik7CisJZm9iaiA9IGRtYV9yZXN2X3NoYXJlZChvYmotPnJlc3YpOwogCWlm
ICghZm9iaiB8fCAoZm9iai0+c2hhcmVkX2NvdW50ID09IDApKSB7CiAJCWZlbmNlID0gZG1hX3Jl
c3ZfZXhjbHVzaXZlKG9iai0+cmVzdik7CiAJCS8qIGRvbid0IG5lZWQgdG8gd2FpdCBvbiBvdXIg
b3duIGZlbmNlcywgc2luY2UgcmluZyBpcyBmaWZvICovCkBAIC0xMDExLDcgKzEwMTEsNyBAQCB2
b2lkIG1zbV9nZW1fZGVzY3JpYmUoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBz
ZXFfZmlsZSAqbSwKIAl9CiAKIAlyY3VfcmVhZF9sb2NrKCk7Ci0JZm9iaiA9IHJjdV9kZXJlZmVy
ZW5jZShyb2JqLT5mZW5jZSk7CisJZm9iaiA9IGRtYV9yZXN2X3NoYXJlZChyb2JqKTsKIAlpZiAo
Zm9iaikgewogCQl1bnNpZ25lZCBpbnQgaSwgc2hhcmVkX2NvdW50ID0gZm9iai0+c2hhcmVkX2Nv
dW50OwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2ZlbmNl
LmMgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2ZlbmNlLmMKaW5kZXggYTZjYjM1
MTgxYWVlLi41Y2U0NDFjNjU1ZWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1
L25vdXZlYXVfZmVuY2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2Zl
bmNlLmMKQEAgLTM1NSw3ICszNTUsNyBAQCBub3V2ZWF1X2ZlbmNlX3N5bmMoc3RydWN0IG5vdXZl
YXVfYm8gKm52Ym8sIHN0cnVjdCBub3V2ZWF1X2NoYW5uZWwgKmNoYW4sIGJvb2wgZQogCQkJcmV0
dXJuIHJldDsKIAl9CiAKLQlmb2JqID0gZG1hX3Jlc3ZfZ2V0X2xpc3QocmVzdik7CisJZm9iaiA9
IGRtYV9yZXN2X3NoYXJlZChyZXN2KTsKIAlmZW5jZSA9IGRtYV9yZXN2X2V4Y2x1c2l2ZShyZXN2
KTsKIAogCWlmIChmZW5jZSAmJiAoIWV4Y2x1c2l2ZSB8fCAhZm9iaiB8fCAhZm9iai0+c2hhcmVk
X2NvdW50KSkgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfZGVidWdmcy5j
IGIvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfZGVidWdmcy5jCmluZGV4IDE4M2QxNWUyY2Y1OC4u
MGFjYzcwYTZkM2RkIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9kZWJ1Z2Zz
LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfZGVidWdmcy5jCkBAIC02MSw3ICs2MSw3
IEBAIHF4bF9kZWJ1Z2ZzX2J1ZmZlcnNfaW5mbyhzdHJ1Y3Qgc2VxX2ZpbGUgKm0sIHZvaWQgKmRh
dGEpCiAJCWludCByZWw7CiAKIAkJcmN1X3JlYWRfbG9jaygpOwotCQlmb2JqID0gcmN1X2RlcmVm
ZXJlbmNlKGJvLT50Ym8uYmFzZS5yZXN2LT5mZW5jZSk7CisJCWZvYmogPSBkbWFfcmVzdl9zaGFy
ZWQoYm8tPnRiby5iYXNlLnJlc3YpOwogCQlyZWwgPSBmb2JqID8gZm9iai0+c2hhcmVkX2NvdW50
IDogMDsKIAkJcmN1X3JlYWRfdW5sb2NrKCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9yYWRlb24vcmFkZW9uX3N5bmMuYyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3N5
bmMuYwppbmRleCBlNDc2ZjkwZWYxYzEuLmE5Y2RiODhkYTE3MyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fc3luYy5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRl
b24vcmFkZW9uX3N5bmMuYwpAQCAtMTA1LDcgKzEwNSw3IEBAIGludCByYWRlb25fc3luY19yZXN2
KHN0cnVjdCByYWRlb25fZGV2aWNlICpyZGV2LAogCWVsc2UgaWYgKGYpCiAJCXIgPSBkbWFfZmVu
Y2Vfd2FpdChmLCB0cnVlKTsKIAotCWZsaXN0ID0gZG1hX3Jlc3ZfZ2V0X2xpc3QocmVzdik7CisJ
Zmxpc3QgPSBkbWFfcmVzdl9zaGFyZWQocmVzdik7CiAJaWYgKHNoYXJlZCB8fCAhZmxpc3QgfHwg
cikKIAkJcmV0dXJuIHI7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2Jv
LmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCmluZGV4IDk1ZmE3M2VmOTBmYi4uOWQ0
NTNjMmNhODAwIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKQEAgLTI1OSw3ICsyNTksNyBAQCBzdGF0aWMg
dm9pZCB0dG1fYm9fZmx1c2hfYWxsX2ZlbmNlcyhzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJv
KQogCWludCBpOwogCiAJcmN1X3JlYWRfbG9jaygpOwotCWZvYmogPSByY3VfZGVyZWZlcmVuY2Uo
cmVzdi0+ZmVuY2UpOworCWZvYmogPSBkbWFfcmVzdl9zaGFyZWQocmVzdik7CiAJZmVuY2UgPSBk
bWFfcmVzdl9leGNsdXNpdmUocmVzdik7CiAJaWYgKGZlbmNlICYmICFmZW5jZS0+b3BzLT5zaWdu
YWxlZCkKIAkJZG1hX2ZlbmNlX2VuYWJsZV9zd19zaWduYWxpbmcoZmVuY2UpOwpkaWZmIC0tZ2l0
IGEvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oIGIvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oCmlu
ZGV4IDc1NDllYzVlYjM1Yy4uOThhYzY2ZmVjYjcxIDEwMDY0NAotLS0gYS9pbmNsdWRlL2xpbnV4
L2RtYS1yZXN2LmgKKysrIGIvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oCkBAIC03OCwyMCArNzgs
NiBAQCBzdHJ1Y3QgZG1hX3Jlc3YgewogI2RlZmluZSBkbWFfcmVzdl9oZWxkKG9iaikgbG9ja2Rl
cF9pc19oZWxkKCYob2JqKS0+bG9jay5iYXNlKQogI2RlZmluZSBkbWFfcmVzdl9hc3NlcnRfaGVs
ZChvYmopIGxvY2tkZXBfYXNzZXJ0X2hlbGQoJihvYmopLT5sb2NrLmJhc2UpCiAKLS8qKgotICog
ZG1hX3Jlc3ZfZ2V0X2xpc3QgLSBnZXQgdGhlIHJlc2VydmF0aW9uIG9iamVjdCdzCi0gKiBzaGFy
ZWQgZmVuY2UgbGlzdCwgd2l0aCB1cGRhdGUtc2lkZSBsb2NrIGhlbGQKLSAqIEBvYmo6IHRoZSBy
ZXNlcnZhdGlvbiBvYmplY3QKLSAqCi0gKiBSZXR1cm5zIHRoZSBzaGFyZWQgZmVuY2UgbGlzdC4g
IERvZXMgTk9UIHRha2UgcmVmZXJlbmNlcyB0bwotICogdGhlIGZlbmNlLiAgVGhlIG9iai0+bG9j
ayBtdXN0IGJlIGhlbGQuCi0gKi8KLXN0YXRpYyBpbmxpbmUgc3RydWN0IGRtYV9yZXN2X2xpc3Qg
KmRtYV9yZXN2X2dldF9saXN0KHN0cnVjdCBkbWFfcmVzdiAqb2JqKQotewotCXJldHVybiByY3Vf
ZGVyZWZlcmVuY2VfcHJvdGVjdGVkKG9iai0+ZmVuY2UsCi0JCQkJCSBkbWFfcmVzdl9oZWxkKG9i
aikpOwotfQotCiAjaWZkZWYgQ09ORklHX0RFQlVHX01VVEVYRVMKIHZvaWQgZG1hX3Jlc3ZfcmVz
ZXRfc2hhcmVkX21heChzdHJ1Y3QgZG1hX3Jlc3YgKm9iaik7CiAjZWxzZQpAQCAtMjY3LDYgKzI1
MywxNyBAQCBkbWFfcmVzdl9nZXRfZXhjbF9yY3Uoc3RydWN0IGRtYV9yZXN2ICpvYmopCiAJcmV0
dXJuIGZlbmNlOwogfQogCisvKioKKyAqIGRtYV9yZXN2X3NoYXJlZCAtIGdldCB0aGUgcmVzZXJ2
YXRpb24gb2JqZWN0J3Mgc2hhcmVkIGZlbmNlIGxpc3QKKyAqIEBvYmo6IHRoZSByZXNlcnZhdGlv
biBvYmplY3QKKyAqCisgKiBSZXR1cm5zIHRoZSBzaGFyZWQgZmVuY2UgbGlzdC4gVGhlIG9iai0+
bG9jayBvciByY3UgcmVhZCBzaWRlIG11c3QgYmUgaGVsZC4KKyAqLworc3RhdGljIGlubGluZSBz
dHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqZG1hX3Jlc3Zfc2hhcmVkKHN0cnVjdCBkbWFfcmVzdiAqb2Jq
KQoreworCXJldHVybiByY3VfZGVyZWZlcmVuY2VfY2hlY2sob2JqLT5mZW5jZSwgZG1hX3Jlc3Zf
aGVsZChvYmopKTsKK30KKwogdm9pZCBkbWFfcmVzdl9pbml0KHN0cnVjdCBkbWFfcmVzdiAqb2Jq
KTsKIHZvaWQgZG1hX3Jlc3ZfZmluaShzdHJ1Y3QgZG1hX3Jlc3YgKm9iaik7CiBpbnQgZG1hX3Jl
c3ZfcmVzZXJ2ZV9zaGFyZWQoc3RydWN0IGRtYV9yZXN2ICpvYmosIHVuc2lnbmVkIGludCBudW1f
ZmVuY2VzKTsKLS0gCjIuMjUuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KTGluYXJvLW1tLXNpZyBtYWlsaW5nIGxpc3QKTGluYXJvLW1tLXNpZ0BsaXN0
cy5saW5hcm8ub3JnCmh0dHBzOi8vbGlzdHMubGluYXJvLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2xp
bmFyby1tbS1zaWcK
