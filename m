Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id AE05D6B7AB9
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 13 Mar 2023 15:45:37 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id BA66C3F503
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 13 Mar 2023 14:45:36 +0000 (UTC)
Received: from mail-oi1-f178.google.com (mail-oi1-f178.google.com [209.85.167.178])
	by lists.linaro.org (Postfix) with ESMTPS id 972BA3E8AA
	for <linaro-mm-sig@lists.linaro.org>; Mon, 13 Mar 2023 14:45:17 +0000 (UTC)
Authentication-Results: lists.linaro.org;
	dkim=pass header.d=gmail.com header.s=20210112 header.b=i2SilUaV;
	spf=pass (lists.linaro.org: domain of robdclark@gmail.com designates 209.85.167.178 as permitted sender) smtp.mailfrom=robdclark@gmail.com;
	dmarc=pass (policy=none) header.from=gmail.com
Received: by mail-oi1-f178.google.com with SMTP id bg11so9586982oib.5
        for <linaro-mm-sig@lists.linaro.org>; Mon, 13 Mar 2023 07:45:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20210112; t=1678718717;
        h=content-transfer-encoding:cc:to:subject:message-id:date:from
         :in-reply-to:references:mime-version:from:to:cc:subject:date
         :message-id:reply-to;
        bh=a+CV2SifknfjhIyuWjTUWiSmqHONl4lWciVnfKStENI=;
        b=i2SilUaV3bWr54dJkta8nQzXHC3ldAO2CIGhbaD4W2v+7zFai9h4s8d7ydJi9vnydm
         Rmxl312JsKwfTHbOQLjbx4ktE/y8WN+0Ln9BrXobMgsxonH4DFHkVFZGtGLQwkktvLcn
         itJSuVzIf/F02deRU7nI6BeVfpriCFR4EcK582FgWJjppl9SIKcmwheYjcDbIg8zeJQJ
         EqcgvRMfQTswHXsnOv6HitRObCa9s28QUTIkupuGHf7aMdDZJ+yoECnuZ7K1ra/bLFsM
         w/LkdVBqGREcJJxbxVtzcDHoNH7OJXB6MFwr8ln2do2Ocvm9ns+3WsrN9mjLPqHcnqb5
         ykcw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112; t=1678718717;
        h=content-transfer-encoding:cc:to:subject:message-id:date:from
         :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
         :subject:date:message-id:reply-to;
        bh=a+CV2SifknfjhIyuWjTUWiSmqHONl4lWciVnfKStENI=;
        b=jEnYkukGazZ+YJUMgDF4gDAT0ECgzxvVRLBfSmuq5yqSdCZoBsODjt6Z3NA8eueLeQ
         NpFeefYoVnZCkvrtdhbcpEUOks3SnEhFDNDYAJT9FSBQlHi55YknXuHapk+EvJX3P+ly
         t007alat7oDN+6VOVZ9twJqLtwH1ryfQ2py62JA92mu2V4jN9BGc09RDq1i4Ra/9QP83
         Ftg6o6PNBf7p2g2l5S8A1qDJ5RjbIDLVGYK4Q/SCTe8WGOQOo/UvquJLEej6WJ8hnnGS
         2MiXvQLpfojRBE/kR9aQMhJ9bgIiUyCPcH79MTst/cvc+cEC/xwZ1efGslFXgRzL4tV/
         dOqg==
X-Gm-Message-State: AO0yUKVs0EKC9Uo7aoQ9yDBosR5/ztl//Y/XJ12urPdbqoRAwp00pm5Z
	BnHJBH9ReOM2G1OIRbp4vQ5D0AgEHo6NLjfL2dc=
X-Google-Smtp-Source: AK7set8Ti1T85pfZ3x3mojTmAFJI+E2j4PltKQSmP4vh2+nZAmydeBWLtDIItpnDphn3KDx5PrbNv0r21XjWrzrB7RA=
X-Received: by 2002:a05:6808:220a:b0:383:db64:65 with SMTP id
 bd10-20020a056808220a00b00383db640065mr5424701oib.4.1678718716877; Mon, 13
 Mar 2023 07:45:16 -0700 (PDT)
MIME-Version: 1.0
References: <20230311173513.1080397-1-robdclark@gmail.com> <20230311173513.1080397-3-robdclark@gmail.com>
 <b846101c-e6ef-2d3e-9db9-077003b72e57@amd.com>
In-Reply-To: <b846101c-e6ef-2d3e-9db9-077003b72e57@amd.com>
From: Rob Clark <robdclark@gmail.com>
Date: Mon, 13 Mar 2023 07:45:05 -0700
Message-ID: <CAF6AEGvH==PPLpdxim4Pi=Q7RA8Ou4NYxvYBW=N8sh9amEqQVQ@mail.gmail.com>
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
X-Rspamd-Action: no action
X-Rspamd-Server: lists.linaro.org
X-Rspamd-Queue-Id: 972BA3E8AA
X-Spamd-Bar: --------
X-Spamd-Result: default: False [-8.00 / 15.00];
	REPLY(-4.00)[];
	BAYES_HAM(-3.00)[100.00%];
	DMARC_POLICY_ALLOW(-0.50)[gmail.com,none];
	R_SPF_ALLOW(-0.20)[+ip4:209.85.128.0/17];
	R_DKIM_ALLOW(-0.20)[gmail.com:s=20210112];
	MIME_GOOD(-0.10)[text/plain];
	NEURAL_HAM(-0.00)[-0.997];
	RCPT_COUNT_TWELVE(0.00)[15];
	RCVD_TLS_LAST(0.00)[];
	MIME_TRACE(0.00)[0:+];
	FREEMAIL_CC(0.00)[lists.freedesktop.org,amd.com,vger.kernel.org,chromium.org,quicinc.com,linaro.org,poorly.run,gmail.com,ffwll.ch,lists.linaro.org];
	FROM_EQ_ENVFROM(0.00)[];
	ASN(0.00)[asn:15169, ipnet:209.85.128.0/17, country:US];
	FREEMAIL_ENVFROM(0.00)[gmail.com];
	DKIM_TRACE(0.00)[gmail.com:+];
	TO_MATCH_ENVRCPT_SOME(0.00)[];
	URIBL_BLOCKED(0.00)[amd.com:email,patchwork.freedesktop.org:url,chromium.org:email];
	RWL_MAILSPIKE_POSSIBLE(0.00)[209.85.167.178:from];
	ARC_NA(0.00)[];
	MID_RHS_MATCH_FROMTLD(0.00)[];
	FROM_HAS_DN(0.00)[];
	FREEMAIL_FROM(0.00)[gmail.com];
	TO_DN_SOME(0.00)[];
	PREVIOUSLY_DELIVERED(0.00)[linaro-mm-sig@lists.linaro.org];
	RCVD_COUNT_TWO(0.00)[2]
Message-ID-Hash: ZRYP4NQM33WKRHZNLIFUCCJJ6UDROLAK
X-Message-ID-Hash: ZRYP4NQM33WKRHZNLIFUCCJJ6UDROLAK
X-MailFrom: robdclark@gmail.com
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
CC: dri-devel@lists.freedesktop.org, "Tuikov, Luben" <Luben.Tuikov@amd.com>, linux-arm-msm@vger.kernel.org, freedreno@lists.freedesktop.org, Rob Clark <robdclark@chromium.org>, Abhinav Kumar <quic_abhinavk@quicinc.com>, Dmitry Baryshkov <dmitry.baryshkov@linaro.org>, Sean Paul <sean@poorly.run>, Daniel Vetter <daniel@ffwll.ch>, Sumit Semwal <sumit.semwal@linaro.org>, open list <linux-kernel@vger.kernel.org>, "open list:DMA BUFFER SHARING FRAMEWORK" <linux-media@vger.kernel.org>, "moderated list:DMA BUFFER SHARING FRAMEWORK" <linaro-mm-sig@lists.linaro.org>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] Re: [PATCH 2/2] drm/msm: Embed the hw_fence in msm_gem_submit
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/ZRYP4NQM33WKRHZNLIFUCCJJ6UDROLAK/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

T24gTW9uLCBNYXIgMTMsIDIwMjMgYXQgMTI6MTnigK9BTSBDaHJpc3RpYW4gS8O2bmlnDQo8Y2hy
aXN0aWFuLmtvZW5pZ0BhbWQuY29tPiB3cm90ZToNCj4NCj4gQW0gMTEuMDMuMjMgdW0gMTg6MzUg
c2NocmllYiBSb2IgQ2xhcms6DQo+ID4gRnJvbTogUm9iIENsYXJrIDxyb2JkY2xhcmtAY2hyb21p
dW0ub3JnPg0KPiA+DQo+ID4gQXZvaWQgYWxsb2NhdGluZyBtZW1vcnkgaW4gam9iX3J1bigpIGJ5
IGVtYmVkZGluZyB0aGUgZmVuY2UgaW4gdGhlDQo+ID4gc3VibWl0IG9iamVjdC4gIFNpbmNlIG1z
bSBncHUgZmVuY2VzIGFyZSBhbHdheXMgMToxIHdpdGggbXNtX2dlbV9zdWJtaXQNCj4gPiB3ZSBj
YW4ganVzdCB1c2UgdGhlIGZlbmNlJ3MgcmVmY250IHRvIHRyYWNrIHRoZSBzdWJtaXQuICBBbmQg
c2luY2Ugd2UNCj4gPiBjYW4gZ2V0IHRoZSBmZW5jZSBjdHggZnJvbSB0aGUgc3VibWl0IHdlIGNh
biBqdXN0IGRyb3AgdGhlIG1zbV9mZW5jZQ0KPiA+IHN0cnVjdCBhbHRvZ2V0aGVyLiAgVGhpcyB1
c2VzIHRoZSBuZXcgZG1hX2ZlbmNlX2luaXRfbm9yZWYoKSB0byBkZWFsDQo+ID4gd2l0aCB0aGUg
ZmFjdCB0aGF0IHRoZSBmZW5jZSdzIHJlZmNudCBpcyBpbml0aWFsaXplZCB3aGVuIHRoZSBzdWJt
aXQgaXMNCj4gPiBjcmVhdGVkLCBsb25nIGJlZm9yZSBqb2JfcnVuKCkuDQo+DQo+IFdlbGwgdGhp
cyBpcyBhIHZlcnkgdmVyeSBiYWQgaWRlYSwgd2UgbWFkZSB0aGUgc2FtZSBtaXN0YWtlIHdpdGgg
YW1kZ3B1DQo+IGFzIHdlbGwuDQo+DQo+IEl0J3MgdHJ1ZSB0aGF0IHlvdSBzaG91bGQgbm90IGhh
dmUgYW55IG1lbW9yeSBhbGxvY2F0aW9uIGluIHlvdXIgcnVuX2pvYg0KPiBjYWxsYmFjaywgYnV0
IHlvdSBjb3VsZCBhbHNvIGp1c3QgYWxsb2NhdGUgdGhlIGh3IGZlbmNlIGR1cmluZyBqb2INCj4g
Y3JlYXRpb24gYW5kIGluaXRpYWxpemluZyBpdCBsYXRlciBvbi4NCj4NCj4gSSd2ZSBzdWdnZXN0
ZWQgdG8gZW1iZWQgdGhlIGZlbmNlIGludG8gdGhlIGpvYiBmb3IgYW1kZ3B1IGJlY2F1c2Ugc29t
ZQ0KPiBwZW9wbGUgaW5zaXN0ZWQgb2YgcmUtc3VibWl0dGluZyBqb2JzIGR1cmluZyB0aW1lb3V0
IGFuZCBHUFUgcmVzZXQuIFRoaXMNCj4gdHVybmVkIGludG8gYSBuaWdodG1hcmUgd2l0aCB0b25z
IG9mIGJ1ZyBmaXhlcyBvbiB0b3Agb2YgYnVnIGZpeGVzIG9uDQo+IHRvcCBvZiBidWcgZml4ZXMg
YmVjYXVzZSBpdCBtZXNzZXMgdXAgdGhlIGpvYiBhbmQgZmVuY2UgbGlmZXRpbWUgYXMNCj4gZGVm
aW5lZCBieSB0aGUgRFJNIHNjaGVkdWxlciBhbmQgRE1BLWJ1ZiBmcmFtZXdvcmsuDQo+DQo+IEx1
YmVuIGlzIGN1cnJlbnRseSB3b3JraW5nIG9uIGNsZWFuaW5nIGFsbCB0aGlzIHVwLg0KDQpUaGlz
IGFjdHVhbGx5IHNob3VsZG4ndCBiZSBhIHByb2JsZW0gd2l0aCBtc20sIGFzIHRoZSBmZW5jZSBk
b2Vzbid0DQpjaGFuZ2UgaWYgdGhlcmUgaXMgYSBncHUgcmVzZXQuICBXZSBzaW1wbHkgc2lnbmFs
IHRoZSBmZW5jZSBmb3IgdGhlDQpvZmZlbmRpbmcgam9iLCByZXNldCB0aGUgR1BVLCBhbmQgcmUt
cGxheSB0aGUgcmVtYWluaW5nIGluLWZsaWdodCBqb2JzDQooaWUuIHRoaW5ncyB0aGF0IGFscmVh
ZHkgaGFkIHRoZWlyIGpvYl9ydW4oKSBjYWxsZWQpIHdpdGggdGhlIG9yaWdpbmFsDQpmZW5jZXMu
ICAoV2UgZG9uJ3QgdXNlIGdwdSBzY2hlZCdzIHJlc2V0L3RpbWVvdXQgaGFuZGxpbmcuLiB3aGVu
IEkNCm1pZ3JhdGVkIHRvIGdwdSBzY2hlZCBJIGtlcHQgb3VyIGV4aXN0aW5nIGhhbmdjaGVjay9y
ZWNvdmVyeQ0KbWVjaGFuaXNtLikNCg0KQlIsDQotUg0KDQo+IFJlZ2FyZHMsDQo+IENocmlzdGlh
bi4NCj4NCj4gPg0KPiA+IFNpZ25lZC1vZmYtYnk6IFJvYiBDbGFyayA8cm9iZGNsYXJrQGNocm9t
aXVtLm9yZz4NCj4gPiAtLS0NCj4gPiBOb3RlIHRoYXQgdGhpcyBhcHBsaWVzIG9uIHRvcCBvZiBo
dHRwczovL3BhdGNod29yay5mcmVlZGVza3RvcC5vcmcvc2VyaWVzLzkzMDM1Lw0KPiA+IG91dCBv
ZiBjb252ZW5pZW5jZSBmb3IgbXlzZWxmLCBidXQgSSBjYW4gcmUtd29yayBpdCB0byBnbyBiZWZv
cmUNCj4gPiBkZXBlbmRpbmcgb24gdGhlIG9yZGVyIHRoYXQgdGhpbmdzIGxhbmQuDQo+ID4NCj4g
PiAgIGRyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2ZlbmNlLmMgICAgICB8IDQ1ICsrKysrKysrKysr
LS0tLS0tLS0tLS0tLS0tLS0NCj4gPiAgIGRyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2ZlbmNlLmgg
ICAgICB8ICAyICstDQo+ID4gICBkcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9nZW0uaCAgICAgICAg
fCAxMCArKystLS0tDQo+ID4gICBkcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9nZW1fc3VibWl0LmMg
fCAgOCArKy0tLQ0KPiA+ICAgZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ3B1LmMgICAgICAgIHwg
IDQgKy0tDQo+ID4gICBkcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9yaW5nYnVmZmVyLmMgfCAgNCAr
LS0NCj4gPiAgIDYgZmlsZXMgY2hhbmdlZCwgMzEgaW5zZXJ0aW9ucygrKSwgNDIgZGVsZXRpb25z
KC0pDQo+ID4NCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZmVuY2Uu
YyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2ZlbmNlLmMNCj4gPiBpbmRleCA1MWI0NjFmMzIx
MDMuLjUxZjlmMWYwY2I2NiAxMDA2NDQNCj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL21z
bV9mZW5jZS5jDQo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZmVuY2UuYw0KPiA+
IEBAIC0xMDMsMTQgKzEwMyw5IEBAIHZvaWQgbXNtX3VwZGF0ZV9mZW5jZShzdHJ1Y3QgbXNtX2Zl
bmNlX2NvbnRleHQgKmZjdHgsIHVpbnQzMl90IGZlbmNlKQ0KPiA+ICAgICAgIHNwaW5fdW5sb2Nr
X2lycXJlc3RvcmUoJmZjdHgtPnNwaW5sb2NrLCBmbGFncyk7DQo+ID4gICB9DQo+ID4NCj4gPiAt
c3RydWN0IG1zbV9mZW5jZSB7DQo+ID4gLSAgICAgc3RydWN0IGRtYV9mZW5jZSBiYXNlOw0KPiA+
IC0gICAgIHN0cnVjdCBtc21fZmVuY2VfY29udGV4dCAqZmN0eDsNCj4gPiAtfTsNCj4gPiAtDQo+
ID4gLXN0YXRpYyBpbmxpbmUgc3RydWN0IG1zbV9mZW5jZSAqdG9fbXNtX2ZlbmNlKHN0cnVjdCBk
bWFfZmVuY2UgKmZlbmNlKQ0KPiA+ICtzdGF0aWMgaW5saW5lIHN0cnVjdCBtc21fZ2VtX3N1Ym1p
dCAqZmVuY2VfdG9fc3VibWl0KHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQ0KPiA+ICAgew0KPiA+
IC0gICAgIHJldHVybiBjb250YWluZXJfb2YoZmVuY2UsIHN0cnVjdCBtc21fZmVuY2UsIGJhc2Up
Ow0KPiA+ICsgICAgIHJldHVybiBjb250YWluZXJfb2YoZmVuY2UsIHN0cnVjdCBtc21fZ2VtX3N1
Ym1pdCwgaHdfZmVuY2UpOw0KPiA+ICAgfQ0KPiA+DQo+ID4gICBzdGF0aWMgY29uc3QgY2hhciAq
bXNtX2ZlbmNlX2dldF9kcml2ZXJfbmFtZShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkNCj4gPiBA
QCAtMTIwLDIwICsxMTUsMjAgQEAgc3RhdGljIGNvbnN0IGNoYXIgKm1zbV9mZW5jZV9nZXRfZHJp
dmVyX25hbWUoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpDQo+ID4NCj4gPiAgIHN0YXRpYyBjb25z
dCBjaGFyICptc21fZmVuY2VfZ2V0X3RpbWVsaW5lX25hbWUoc3RydWN0IGRtYV9mZW5jZSAqZmVu
Y2UpDQo+ID4gICB7DQo+ID4gLSAgICAgc3RydWN0IG1zbV9mZW5jZSAqZiA9IHRvX21zbV9mZW5j
ZShmZW5jZSk7DQo+ID4gLSAgICAgcmV0dXJuIGYtPmZjdHgtPm5hbWU7DQo+ID4gKyAgICAgc3Ry
dWN0IG1zbV9nZW1fc3VibWl0ICpzdWJtaXQgPSBmZW5jZV90b19zdWJtaXQoZmVuY2UpOw0KPiA+
ICsgICAgIHJldHVybiBzdWJtaXQtPnJpbmctPmZjdHgtPm5hbWU7DQo+ID4gICB9DQo+ID4NCj4g
PiAgIHN0YXRpYyBib29sIG1zbV9mZW5jZV9zaWduYWxlZChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5j
ZSkNCj4gPiAgIHsNCj4gPiAtICAgICBzdHJ1Y3QgbXNtX2ZlbmNlICpmID0gdG9fbXNtX2ZlbmNl
KGZlbmNlKTsNCj4gPiAtICAgICByZXR1cm4gbXNtX2ZlbmNlX2NvbXBsZXRlZChmLT5mY3R4LCBm
LT5iYXNlLnNlcW5vKTsNCj4gPiArICAgICBzdHJ1Y3QgbXNtX2dlbV9zdWJtaXQgKnN1Ym1pdCA9
IGZlbmNlX3RvX3N1Ym1pdChmZW5jZSk7DQo+ID4gKyAgICAgcmV0dXJuIG1zbV9mZW5jZV9jb21w
bGV0ZWQoc3VibWl0LT5yaW5nLT5mY3R4LCBmZW5jZS0+c2Vxbm8pOw0KPiA+ICAgfQ0KPiA+DQo+
ID4gICBzdGF0aWMgdm9pZCBtc21fZmVuY2Vfc2V0X2RlYWRsaW5lKHN0cnVjdCBkbWFfZmVuY2Ug
KmZlbmNlLCBrdGltZV90IGRlYWRsaW5lKQ0KPiA+ICAgew0KPiA+IC0gICAgIHN0cnVjdCBtc21f
ZmVuY2UgKmYgPSB0b19tc21fZmVuY2UoZmVuY2UpOw0KPiA+IC0gICAgIHN0cnVjdCBtc21fZmVu
Y2VfY29udGV4dCAqZmN0eCA9IGYtPmZjdHg7DQo+ID4gKyAgICAgc3RydWN0IG1zbV9nZW1fc3Vi
bWl0ICpzdWJtaXQgPSBmZW5jZV90b19zdWJtaXQoZmVuY2UpOw0KPiA+ICsgICAgIHN0cnVjdCBt
c21fZmVuY2VfY29udGV4dCAqZmN0eCA9IHN1Ym1pdC0+cmluZy0+ZmN0eDsNCj4gPiAgICAgICB1
bnNpZ25lZCBsb25nIGZsYWdzOw0KPiA+ICAgICAgIGt0aW1lX3Qgbm93Ow0KPiA+DQo+ID4gQEAg
LTE2NSwyNiArMTYwLDIyIEBAIHN0YXRpYyB2b2lkIG1zbV9mZW5jZV9zZXRfZGVhZGxpbmUoc3Ry
dWN0IGRtYV9mZW5jZSAqZmVuY2UsIGt0aW1lX3QgZGVhZGxpbmUpDQo+ID4gICAgICAgc3Bpbl91
bmxvY2tfaXJxcmVzdG9yZSgmZmN0eC0+c3BpbmxvY2ssIGZsYWdzKTsNCj4gPiAgIH0NCj4gPg0K
PiA+ICtzdGF0aWMgdm9pZCBtc21fZmVuY2VfcmVsZWFzZShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5j
ZSkNCj4gPiArew0KPiA+ICsgICAgIF9fbXNtX2dlbV9zdWJtaXRfZGVzdHJveShmZW5jZV90b19z
dWJtaXQoZmVuY2UpKTsNCj4gPiArfQ0KPiA+ICsNCj4gPiAgIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZG1hX2ZlbmNlX29wcyBtc21fZmVuY2Vfb3BzID0gew0KPiA+ICAgICAgIC5nZXRfZHJpdmVyX25h
bWUgPSBtc21fZmVuY2VfZ2V0X2RyaXZlcl9uYW1lLA0KPiA+ICAgICAgIC5nZXRfdGltZWxpbmVf
bmFtZSA9IG1zbV9mZW5jZV9nZXRfdGltZWxpbmVfbmFtZSwNCj4gPiAgICAgICAuc2lnbmFsZWQg
PSBtc21fZmVuY2Vfc2lnbmFsZWQsDQo+ID4gICAgICAgLnNldF9kZWFkbGluZSA9IG1zbV9mZW5j
ZV9zZXRfZGVhZGxpbmUsDQo+ID4gKyAgICAgLnJlbGVhc2UgPSBtc21fZmVuY2VfcmVsZWFzZSwN
Cj4gPiAgIH07DQo+ID4NCj4gPiAtc3RydWN0IGRtYV9mZW5jZSAqDQo+ID4gLW1zbV9mZW5jZV9h
bGxvYyhzdHJ1Y3QgbXNtX2ZlbmNlX2NvbnRleHQgKmZjdHgpDQo+ID4gK3ZvaWQNCj4gPiArbXNt
X2ZlbmNlX2luaXQoc3RydWN0IG1zbV9mZW5jZV9jb250ZXh0ICpmY3R4LCBzdHJ1Y3QgZG1hX2Zl
bmNlICpmKQ0KPiA+ICAgew0KPiA+IC0gICAgIHN0cnVjdCBtc21fZmVuY2UgKmY7DQo+ID4gLQ0K
PiA+IC0gICAgIGYgPSBremFsbG9jKHNpemVvZigqZiksIEdGUF9LRVJORUwpOw0KPiA+IC0gICAg
IGlmICghZikNCj4gPiAtICAgICAgICAgICAgIHJldHVybiBFUlJfUFRSKC1FTk9NRU0pOw0KPiA+
IC0NCj4gPiAtICAgICBmLT5mY3R4ID0gZmN0eDsNCj4gPiAtDQo+ID4gLSAgICAgZG1hX2ZlbmNl
X2luaXQoJmYtPmJhc2UsICZtc21fZmVuY2Vfb3BzLCAmZmN0eC0+c3BpbmxvY2ssDQo+ID4gLSAg
ICAgICAgICAgICAgICAgICAgZmN0eC0+Y29udGV4dCwgKytmY3R4LT5sYXN0X2ZlbmNlKTsNCj4g
PiAtDQo+ID4gLSAgICAgcmV0dXJuICZmLT5iYXNlOw0KPiA+ICsgICAgIGRtYV9mZW5jZV9pbml0
X25vcmVmKGYsICZtc21fZmVuY2Vfb3BzLCAmZmN0eC0+c3BpbmxvY2ssDQo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgZmN0eC0+Y29udGV4dCwgKytmY3R4LT5sYXN0X2ZlbmNlKTsNCj4g
PiAgIH0NCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZmVuY2UuaCBi
L2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2ZlbmNlLmgNCj4gPiBpbmRleCBjZGFlYmZiOTRmNWMu
LjhmY2EzN2U5NzczYiAxMDA2NDQNCj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9m
ZW5jZS5oDQo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZmVuY2UuaA0KPiA+IEBA
IC04MSw3ICs4MSw3IEBAIHZvaWQgbXNtX2ZlbmNlX2NvbnRleHRfZnJlZShzdHJ1Y3QgbXNtX2Zl
bmNlX2NvbnRleHQgKmZjdHgpOw0KPiA+ICAgYm9vbCBtc21fZmVuY2VfY29tcGxldGVkKHN0cnVj
dCBtc21fZmVuY2VfY29udGV4dCAqZmN0eCwgdWludDMyX3QgZmVuY2UpOw0KPiA+ICAgdm9pZCBt
c21fdXBkYXRlX2ZlbmNlKHN0cnVjdCBtc21fZmVuY2VfY29udGV4dCAqZmN0eCwgdWludDMyX3Qg
ZmVuY2UpOw0KPiA+DQo+ID4gLXN0cnVjdCBkbWFfZmVuY2UgKiBtc21fZmVuY2VfYWxsb2Moc3Ry
dWN0IG1zbV9mZW5jZV9jb250ZXh0ICpmY3R4KTsNCj4gPiArdm9pZCBtc21fZmVuY2VfaW5pdChz
dHJ1Y3QgbXNtX2ZlbmNlX2NvbnRleHQgKmZjdHgsIHN0cnVjdCBkbWFfZmVuY2UgKmYpOw0KPiA+
DQo+ID4gICBzdGF0aWMgaW5saW5lIGJvb2wNCj4gPiAgIGZlbmNlX2JlZm9yZSh1aW50MzJfdCBh
LCB1aW50MzJfdCBiKQ0KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9n
ZW0uaCBiL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dlbS5oDQo+ID4gaW5kZXggYzQ4NDRjZjNh
NTg1Li5lMDZhZmVkOTlkNWIgMTAwNjQ0DQo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9t
c21fZ2VtLmgNCj4gPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9nZW0uaA0KPiA+IEBA
IC0yNTksMTAgKzI1OSwxMCBAQCBzdHJ1Y3QgbXNtX2dlbV9zdWJtaXQgew0KPiA+ICAgICAgIHN0
cnVjdCB3d19hY3F1aXJlX2N0eCB0aWNrZXQ7DQo+ID4gICAgICAgdWludDMyX3Qgc2Vxbm87ICAg
ICAgICAgLyogU2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBzdWJtaXQgb24gdGhlIHJpbmcgKi8NCj4g
Pg0KPiA+IC0gICAgIC8qIEh3IGZlbmNlLCB3aGljaCBpcyBjcmVhdGVkIHdoZW4gdGhlIHNjaGVk
dWxlciBleGVjdXRlcyB0aGUgam9iLCBhbmQNCj4gPiArICAgICAvKiBIdyBmZW5jZSwgd2hpY2gg
aXMgaW5pdGlhbGl6ZWQgd2hlbiB0aGUgc2NoZWR1bGVyIGV4ZWN1dGVzIHRoZSBqb2IsIGFuZA0K
PiA+ICAgICAgICAqIGlzIHNpZ25hbGVkIHdoZW4gdGhlIGh3IGZpbmlzaGVzICh2aWEgc2Vxbm8g
d3JpdGUgZnJvbSBjbWRzdHJlYW0pDQo+ID4gICAgICAgICovDQo+ID4gLSAgICAgc3RydWN0IGRt
YV9mZW5jZSAqaHdfZmVuY2U7DQo+ID4gKyAgICAgc3RydWN0IGRtYV9mZW5jZSBod19mZW5jZTsN
Cj4gPg0KPiA+ICAgICAgIC8qIFVzZXJzcGFjZSB2aXNpYmxlIGZlbmNlLCB3aGljaCBpcyBzaWdu
YWxlZCBieSB0aGUgc2NoZWR1bGVyIGFmdGVyDQo+ID4gICAgICAgICogdGhlIGh3X2ZlbmNlIGlz
IHNpZ25hbGVkLg0KPiA+IEBAIC0zMDksMTYgKzMwOSwxNiBAQCBzdGF0aWMgaW5saW5lIHN0cnVj
dCBtc21fZ2VtX3N1Ym1pdCAqdG9fbXNtX3N1Ym1pdChzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAqam9i
KQ0KPiA+ICAgICAgIHJldHVybiBjb250YWluZXJfb2Yoam9iLCBzdHJ1Y3QgbXNtX2dlbV9zdWJt
aXQsIGJhc2UpOw0KPiA+ICAgfQ0KPiA+DQo+ID4gLXZvaWQgX19tc21fZ2VtX3N1Ym1pdF9kZXN0
cm95KHN0cnVjdCBrcmVmICprcmVmKTsNCj4gPiArdm9pZCBfX21zbV9nZW1fc3VibWl0X2Rlc3Ry
b3koc3RydWN0IG1zbV9nZW1fc3VibWl0ICpzdWJtaXQpOw0KPiA+DQo+ID4gICBzdGF0aWMgaW5s
aW5lIHZvaWQgbXNtX2dlbV9zdWJtaXRfZ2V0KHN0cnVjdCBtc21fZ2VtX3N1Ym1pdCAqc3VibWl0
KQ0KPiA+ICAgew0KPiA+IC0gICAgIGtyZWZfZ2V0KCZzdWJtaXQtPnJlZik7DQo+ID4gKyAgICAg
ZG1hX2ZlbmNlX2dldCgmc3VibWl0LT5od19mZW5jZSk7DQo+ID4gICB9DQo+ID4NCj4gPiAgIHN0
YXRpYyBpbmxpbmUgdm9pZCBtc21fZ2VtX3N1Ym1pdF9wdXQoc3RydWN0IG1zbV9nZW1fc3VibWl0
ICpzdWJtaXQpDQo+ID4gICB7DQo+ID4gLSAgICAga3JlZl9wdXQoJnN1Ym1pdC0+cmVmLCBfX21z
bV9nZW1fc3VibWl0X2Rlc3Ryb3kpOw0KPiA+ICsgICAgIGRtYV9mZW5jZV9wdXQoJnN1Ym1pdC0+
aHdfZmVuY2UpOw0KPiA+ICAgfQ0KPiA+DQo+ID4gICB2b2lkIG1zbV9zdWJtaXRfcmV0aXJlKHN0
cnVjdCBtc21fZ2VtX3N1Ym1pdCAqc3VibWl0KTsNCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL21zbS9tc21fZ2VtX3N1Ym1pdC5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2Vt
X3N1Ym1pdC5jDQo+ID4gaW5kZXggYmU0YmY3NzEwM2NkLi41MjJjOGM4MmU4MjcgMTAwNjQ0DQo+
ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtX3N1Ym1pdC5jDQo+ID4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ2VtX3N1Ym1pdC5jDQo+ID4gQEAgLTQ3LDcgKzQ3LDcg
QEAgc3RhdGljIHN0cnVjdCBtc21fZ2VtX3N1Ym1pdCAqc3VibWl0X2NyZWF0ZShzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LA0KPiA+ICAgICAgICAgICAgICAgcmV0dXJuIEVSUl9QVFIocmV0KTsNCj4g
PiAgICAgICB9DQo+ID4NCj4gPiAtICAgICBrcmVmX2luaXQoJnN1Ym1pdC0+cmVmKTsNCj4gPiAr
ICAgICBrcmVmX2luaXQoJnN1Ym1pdC0+aHdfZmVuY2UucmVmY291bnQpOw0KPiA+ICAgICAgIHN1
Ym1pdC0+ZGV2ID0gZGV2Ow0KPiA+ICAgICAgIHN1Ym1pdC0+YXNwYWNlID0gcXVldWUtPmN0eC0+
YXNwYWNlOw0KPiA+ICAgICAgIHN1Ym1pdC0+Z3B1ID0gZ3B1Ow0KPiA+IEBAIC02NSwxMCArNjUs
OSBAQCBzdGF0aWMgc3RydWN0IG1zbV9nZW1fc3VibWl0ICpzdWJtaXRfY3JlYXRlKHN0cnVjdCBk
cm1fZGV2aWNlICpkZXYsDQo+ID4gICAgICAgcmV0dXJuIHN1Ym1pdDsNCj4gPiAgIH0NCj4gPg0K
PiA+IC12b2lkIF9fbXNtX2dlbV9zdWJtaXRfZGVzdHJveShzdHJ1Y3Qga3JlZiAqa3JlZikNCj4g
PiArLyogQ2FsbGVkIHdoZW4gdGhlIGh3X2ZlbmNlIGlzIGRlc3Ryb3llZDogKi8NCj4gPiArdm9p
ZCBfX21zbV9nZW1fc3VibWl0X2Rlc3Ryb3koc3RydWN0IG1zbV9nZW1fc3VibWl0ICpzdWJtaXQp
DQo+ID4gICB7DQo+ID4gLSAgICAgc3RydWN0IG1zbV9nZW1fc3VibWl0ICpzdWJtaXQgPQ0KPiA+
IC0gICAgICAgICAgICAgICAgICAgICBjb250YWluZXJfb2Yoa3JlZiwgc3RydWN0IG1zbV9nZW1f
c3VibWl0LCByZWYpOw0KPiA+ICAgICAgIHVuc2lnbmVkIGk7DQo+ID4NCj4gPiAgICAgICBpZiAo
c3VibWl0LT5mZW5jZV9pZCkgew0KPiA+IEBAIC03OCw3ICs3Nyw2IEBAIHZvaWQgX19tc21fZ2Vt
X3N1Ym1pdF9kZXN0cm95KHN0cnVjdCBrcmVmICprcmVmKQ0KPiA+ICAgICAgIH0NCj4gPg0KPiA+
ICAgICAgIGRtYV9mZW5jZV9wdXQoc3VibWl0LT51c2VyX2ZlbmNlKTsNCj4gPiAtICAgICBkbWFf
ZmVuY2VfcHV0KHN1Ym1pdC0+aHdfZmVuY2UpOw0KPiA+DQo+ID4gICAgICAgcHV0X3BpZChzdWJt
aXQtPnBpZCk7DQo+ID4gICAgICAgbXNtX3N1Ym1pdHF1ZXVlX3B1dChzdWJtaXQtPnF1ZXVlKTsN
Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ3B1LmMgYi9kcml2ZXJz
L2dwdS9kcm0vbXNtL21zbV9ncHUuYw0KPiA+IGluZGV4IDM4MDI0OTUwMDMyNS4uYTgyZDExZGQ1
ZmNmIDEwMDY0NA0KPiA+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dwdS5jDQo+ID4g
KysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ3B1LmMNCj4gPiBAQCAtNzE2LDcgKzcxNiw3
IEBAIHN0YXRpYyB2b2lkIHJldGlyZV9zdWJtaXRzKHN0cnVjdCBtc21fZ3B1ICpncHUpDQo+ID4g
ICAgICAgICAgICAgICAgICAgICAgICAqIGJlZW4gc2lnbmFsbGVkLCB0aGVuIGxhdGVyIHN1Ym1p
dHMgYXJlIG5vdCBzaWduYWxsZWQNCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICogZWl0aGVy
LCBzbyB3ZSBhcmUgYWxzbyBkb25lLg0KPiA+ICAgICAgICAgICAgICAgICAgICAgICAgKi8NCj4g
PiAtICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Ym1pdCAmJiBkbWFfZmVuY2VfaXNfc2lnbmFs
ZWQoc3VibWl0LT5od19mZW5jZSkpIHsNCj4gPiArICAgICAgICAgICAgICAgICAgICAgaWYgKHN1
Ym1pdCAmJiBkbWFfZmVuY2VfaXNfc2lnbmFsZWQoJnN1Ym1pdC0+aHdfZmVuY2UpKSB7DQo+ID4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0aXJlX3N1Ym1pdChncHUsIHJpbmcsIHN1
Ym1pdCk7DQo+ID4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQo+ID4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQo+ID4gQEAgLTc2MCw3ICs3NjAsNyBAQCB2b2lk
IG1zbV9ncHVfc3VibWl0KHN0cnVjdCBtc21fZ3B1ICpncHUsIHN0cnVjdCBtc21fZ2VtX3N1Ym1p
dCAqc3VibWl0KQ0KPiA+DQo+ID4gICAgICAgbXNtX2dwdV9od19pbml0KGdwdSk7DQo+ID4NCj4g
PiAtICAgICBzdWJtaXQtPnNlcW5vID0gc3VibWl0LT5od19mZW5jZS0+c2Vxbm87DQo+ID4gKyAg
ICAgc3VibWl0LT5zZXFubyA9IHN1Ym1pdC0+aHdfZmVuY2Uuc2Vxbm87DQo+ID4NCj4gPiAgICAg
ICBtc21fcmRfZHVtcF9zdWJtaXQocHJpdi0+cmQsIHN1Ym1pdCwgTlVMTCk7DQo+ID4NCj4gPiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fcmluZ2J1ZmZlci5jIGIvZHJpdmVy
cy9ncHUvZHJtL21zbS9tc21fcmluZ2J1ZmZlci5jDQo+ID4gaW5kZXggNTdhOGU5NTY0NTQwLi41
YzU0YmVmYTI0MjcgMTAwNjQ0DQo+ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fcmlu
Z2J1ZmZlci5jDQo+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fcmluZ2J1ZmZlci5j
DQo+ID4gQEAgLTE4LDcgKzE4LDcgQEAgc3RhdGljIHN0cnVjdCBkbWFfZmVuY2UgKm1zbV9qb2Jf
cnVuKHN0cnVjdCBkcm1fc2NoZWRfam9iICpqb2IpDQo+ID4gICAgICAgc3RydWN0IG1zbV9ncHUg
KmdwdSA9IHN1Ym1pdC0+Z3B1Ow0KPiA+ICAgICAgIGludCBpOw0KPiA+DQo+ID4gLSAgICAgc3Vi
bWl0LT5od19mZW5jZSA9IG1zbV9mZW5jZV9hbGxvYyhmY3R4KTsNCj4gPiArICAgICBtc21fZmVu
Y2VfaW5pdChmY3R4LCAmc3VibWl0LT5od19mZW5jZSk7DQo+ID4NCj4gPiAgICAgICBmb3IgKGkg
PSAwOyBpIDwgc3VibWl0LT5ucl9ib3M7IGkrKykgew0KPiA+ICAgICAgICAgICAgICAgc3RydWN0
IGRybV9nZW1fb2JqZWN0ICpvYmogPSAmc3VibWl0LT5ib3NbaV0ub2JqLT5iYXNlOw0KPiA+IEBA
IC0zNyw3ICszNyw3IEBAIHN0YXRpYyBzdHJ1Y3QgZG1hX2ZlbmNlICptc21fam9iX3J1bihzdHJ1
Y3QgZHJtX3NjaGVkX2pvYiAqam9iKQ0KPiA+DQo+ID4gICAgICAgbXV0ZXhfdW5sb2NrKCZncHUt
PmxvY2spOw0KPiA+DQo+ID4gLSAgICAgcmV0dXJuIGRtYV9mZW5jZV9nZXQoc3VibWl0LT5od19m
ZW5jZSk7DQo+ID4gKyAgICAgcmV0dXJuIGRtYV9mZW5jZV9nZXQoJnN1Ym1pdC0+aHdfZmVuY2Up
Ow0KPiA+ICAgfQ0KPiA+DQo+ID4gICBzdGF0aWMgdm9pZCBtc21fam9iX2ZyZWUoc3RydWN0IGRy
bV9zY2hlZF9qb2IgKmpvYikNCj4NCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCkxpbmFyby1tbS1zaWcgbWFpbGluZyBsaXN0IC0tIGxpbmFyby1tbS1zaWdA
bGlzdHMubGluYXJvLm9yZwpUbyB1bnN1YnNjcmliZSBzZW5kIGFuIGVtYWlsIHRvIGxpbmFyby1t
bS1zaWctbGVhdmVAbGlzdHMubGluYXJvLm9yZwo=
