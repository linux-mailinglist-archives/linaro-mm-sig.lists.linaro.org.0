Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 3B58E7ED849
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 16 Nov 2023 00:45:22 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 2D26C3F0A5
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 15 Nov 2023 23:45:21 +0000 (UTC)
Received: from mail-pl1-f171.google.com (mail-pl1-f171.google.com [209.85.214.171])
	by lists.linaro.org (Postfix) with ESMTPS id 407143F0A5
	for <linaro-mm-sig@lists.linaro.org>; Wed, 15 Nov 2023 23:45:04 +0000 (UTC)
Authentication-Results: lists.linaro.org;
	dkim=pass header.d=google.com header.s=20230601 header.b=yWTb166l;
	dmarc=pass (policy=reject) header.from=google.com;
	spf=pass (lists.linaro.org: domain of jkardatzke@google.com designates 209.85.214.171 as permitted sender) smtp.mailfrom=jkardatzke@google.com
Received: by mail-pl1-f171.google.com with SMTP id d9443c01a7336-1cc30de471dso64505ad.0
        for <linaro-mm-sig@lists.linaro.org>; Wed, 15 Nov 2023 15:45:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20230601; t=1700091903; x=1700696703; darn=lists.linaro.org;
        h=content-transfer-encoding:cc:to:subject:message-id:date:from
         :in-reply-to:references:mime-version:from:to:cc:subject:date
         :message-id:reply-to;
        bh=R0HQzSRtljGrY6Ct7U4zPmfDbNyabfc92sz3kDFmCiU=;
        b=yWTb166lZTSJnSyFj0lwpbV1xAZQswKg8by+cScpQqho1F3relHsPJaHTqj4OU0Zk7
         9maYw0GZdyoKpySS4agPeo3RravY7IY4YJlqueTVutYpbfK8IO9/WYBkkGogH0ZmnuYZ
         uHogYplu8M/D1UX5cxUAf5rwgfKa1VeLjjZutXRu7j5MYfmfAcelSvDMSFDUGki2C5w8
         ceiSsvWsuwYtY3+hO/Mo3wxiR9yf56msJKctFuP+YijIzqiFwzxb1jnAd1BgJJc8D6T3
         KsXKrqrUQAHhk3RpL4MfbxnmEg5df5wee27j+qc/XxwBt3kQuvcB0P9rQDD/j63woTDC
         sz8g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20230601; t=1700091903; x=1700696703;
        h=content-transfer-encoding:cc:to:subject:message-id:date:from
         :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
         :subject:date:message-id:reply-to;
        bh=R0HQzSRtljGrY6Ct7U4zPmfDbNyabfc92sz3kDFmCiU=;
        b=vWe6T3txOyfwmMq3bZ5k/20wSryA1GYXghSu735nYnDLrHn69Vw1yE/GVS7Idm+uxU
         jgNvNh3FycyBCE9FtLPKf14Xfb1c/xOxibSP4us7SaUiXRUNOsIqc1nfR+za+Uyzhcvu
         ej+Zn1U9edsBsV5bJU2+0EU24Kz7tsbmo/gxsE/dsPhR+L1dmFyhINAX0+VqfJ/6eYDk
         nqoWN2vHPSwZvQbl9eg3d+tKaXMFBAxSk2Qk8Cd/2iPoqWUQ7XuAt5D9Dqh1NgXwMaEN
         dVWzxuDzEmSND0T/ariLNipYdwfL7/KiNjQjqAfTalABnlc/9cj/s28eyj73HXPSpTNl
         RhwQ==
X-Gm-Message-State: AOJu0Yx0HXvcurT0QQ18O8ubhwzly68ssSEAJFyaeDvlyeaxpHcR3/Uq
	lvgVgqr1Wm0S4PA8eEMY1HhmliXDKMx6hGg8Lp2H
X-Google-Smtp-Source: AGHT+IHISxj9EsT/9lY/lJetsyYrfbppRvYUbomdqDwOMwE4b3B7cZrenSrMORfWdoLXEO2C2FzUxtsSuisll17+FN8=
X-Received: by 2002:a17:903:191:b0:1cc:4eb0:64c8 with SMTP id
 z17-20020a170903019100b001cc4eb064c8mr65472plg.25.1700091903097; Wed, 15 Nov
 2023 15:45:03 -0800 (PST)
MIME-Version: 1.0
References: <20231111111559.8218-1-yong.wu@mediatek.com> <20231111111559.8218-8-yong.wu@mediatek.com>
In-Reply-To: <20231111111559.8218-8-yong.wu@mediatek.com>
From: Jeffrey Kardatzke <jkardatzke@google.com>
Date: Wed, 15 Nov 2023 15:44:51 -0800
Message-ID: <CA+ddPcMrdhV0G73i8C6Lpc==XF+BA-SPjU3zefTLDicbQpzqpA@mail.gmail.com>
To: Yong Wu <yong.wu@mediatek.com>
X-Rspamd-Server: lists.linaro.org
X-Rspamd-Queue-Id: 407143F0A5
X-Spamd-Bar: --
X-Spamd-Result: default: False [-2.50 / 15.00];
	BAYES_HAM(-3.00)[100.00%];
	SUSPICIOUS_RECIPS(1.50)[];
	DMARC_POLICY_ALLOW(-0.50)[google.com,reject];
	R_SPF_ALLOW(-0.20)[+ip4:209.85.128.0/17];
	R_DKIM_ALLOW(-0.20)[google.com:s=20230601];
	MIME_GOOD(-0.10)[text/plain];
	RWL_MAILSPIKE_POSSIBLE(0.00)[209.85.214.171:from];
	ARC_NA(0.00)[];
	RCVD_COUNT_ONE(0.00)[1];
	ASN(0.00)[asn:15169, ipnet:209.85.128.0/17, country:US];
	RCPT_COUNT_TWELVE(0.00)[25];
	MIME_TRACE(0.00)[0:+];
	TAGGED_RCPT(0.00)[dt];
	NEURAL_HAM(-0.00)[-1.000];
	RCVD_TLS_LAST(0.00)[];
	FROM_HAS_DN(0.00)[];
	FREEMAIL_CC(0.00)[kernel.org,linaro.org,amd.com,gmail.com,collabora.com,arm.com,google.com,vger.kernel.org,lists.freedesktop.org,lists.linaro.org,lists.infradead.org,mediatek.com,quicinc.com,ndufresne.ca];
	TO_DN_SOME(0.00)[];
	FROM_EQ_ENVFROM(0.00)[];
	PREVIOUSLY_DELIVERED(0.00)[linaro-mm-sig@lists.linaro.org];
	TO_MATCH_ENVRCPT_SOME(0.00)[];
	DKIM_TRACE(0.00)[google.com:+]
X-Rspamd-Action: no action
Message-ID-Hash: QAAMLVA2AHE4A2AE3KVW454JFZZW2C5H
X-Message-ID-Hash: QAAMLVA2AHE4A2AE3KVW454JFZZW2C5H
X-MailFrom: jkardatzke@google.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
CC: Rob Herring <robh+dt@kernel.org>, Sumit Semwal <sumit.semwal@linaro.org>, christian.koenig@amd.com, Matthias Brugger <matthias.bgg@gmail.com>, Krzysztof Kozlowski <krzysztof.kozlowski+dt@linaro.org>, Conor Dooley <conor+dt@kernel.org>, Benjamin Gaignard <benjamin.gaignard@collabora.com>, Brian Starkey <Brian.Starkey@arm.com>, John Stultz <jstultz@google.com>, tjmercier@google.com, AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>, devicetree@vger.kernel.org, linux-kernel@vger.kernel.org, linux-media@vger.kernel.org, dri-devel@lists.freedesktop.org, linaro-mm-sig@lists.linaro.org, linux-arm-kernel@lists.infradead.org, linux-mediatek@lists.infradead.org, jianjiao.zeng@mediatek.com, kuohong.wang@mediatek.com, Vijayanand Jitta <quic_vjitta@quicinc.com>, Joakim Bech <joakim.bech@linaro.org>, Nicolas Dufresne <nicolas@ndufresne.ca>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] Re: [PATCH v2 7/8] dma_buf: heaps: secure_heap: Add a new MediaTek CMA heap
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/QAAMLVA2AHE4A2AE3KVW454JFZZW2C5H/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

TW9zdCBvZiB0aGUgdGhpbmdzIGluIHRoaXMgcGF0Y2ggc2hvdWxkIGdvIGluIHRoZSBNVEsgc3Bl
Y2lmaWMNCmltcGxlbWVudGF0aW9uIChleGNlcHQgZm9yIHRoZSBzZWN1cmVfaGVhcF9pbml0IGNo
YW5nZXMpLiBFc3BlY2lhbGx5DQp0aGUgUkVTRVJWRURNRU1fT0ZfREVDTEFSRS4NCg0KT24gU2F0
LCBOb3YgMTEsIDIwMjMgYXQgMzoxOOKAr0FNIFlvbmcgV3UgPHlvbmcud3VAbWVkaWF0ZWsuY29t
PiB3cm90ZToNCj4NCj4gQ3JlYXRlIGEgbmV3IE1lZGlhVGVrIENNQSBoZWFwIGZyb20gdGhlIENN
QSByZXNlcnZlZCBidWZmZXIuDQo+DQo+IEluIHRoaXMgaGVhcCwgV2hlbiB0aGUgZmlyc3QgYWxs
b2NhdGluZyBidWZmZXIsIHVzZSBjbWFfYWxsb2MgdG8gcHJlcGFyZQ0KPiB3aG9sZSB0aGUgQ01B
IHJhbmdlLCB0aGVuIHNlbmQgaXRzIHJhbmdlIHRvIFRFRSB0byBwcm90ZWN0IGFuZCBtYW5hZ2Uu
DQo+IEZvciB0aGUgbGF0ZXIgYWxsb2NhdGluZywgd2UganVzdCBhZGRzIHRoZSBjbWFfdXNlZF9z
aXplX210ay4NCj4NCj4gVGhpcyBDTUEgZmxvdyBtYXkgYmUgZGlmZmVyZW50IHdpdGggdGhlIG5v
cm1hbCBDTUEgaGVhcCBvZiBuZXh0IHBhdGNoLg0KPiBTbyBJIG5hbWVkIHRoZSB2YXJpYWJsZSB3
aXRoIF9tdGsgc3VmZml4IGxpa2UgY21hX3BhZ2VfbXRrLw0KPiBjbWFfdXNlZF9zaXplX210ay4g
VGhpcyBpcyBhbHNvIHRvIGRpc3Rpbmd1aXNoIGl0IGZyb20gdGhlIGNtYV9wYWdlIG9mDQo+IHRo
ZSBidWZmZXIgc3RydWN0dXJlIGluIHRoZSBuZXh0IHBhdGNoLg0KPg0KPiBXaGVuIFNWUCBkb25l
LCBjbWFfcmVsZWFzZSB3aWxsIHJlbGVhc2UgdGhlIGJ1ZmZlciwgdGhlbiBrZXJuZWwgbWF5DQo+
IHJldXNlIGl0Lg0KPg0KPiBNZWFud2hpbGUsIHRoaXMgcGF0Y2ggYWRkcyBhICJoZWFwX2luaXQi
IHBvaW50ZXIsIHdoaWxlIGFsbG93cyBzb21lIGhlYXANCj4gaW5pdGlhbGl6YXRpb24gb3BlcmF0
aW9ucy4gVGhpcyBjYXNlIGFsc28gY2hlY2tzIGlmIHRoZSBDTUEgcmFuZ2UgaXMNCj4gcmVhZHku
DQo+DQo+IFNpZ25lZC1vZmYtYnk6IFlvbmcgV3UgPHlvbmcud3VAbWVkaWF0ZWsuY29tPg0KPiAt
LS0NCj4gIGRyaXZlcnMvZG1hLWJ1Zi9oZWFwcy9zZWN1cmVfaGVhcC5jIHwgMTI0ICsrKysrKysr
KysrKysrKysrKysrKysrKysrKy0NCj4gIDEgZmlsZSBjaGFuZ2VkLCAxMjIgaW5zZXJ0aW9ucygr
KSwgMiBkZWxldGlvbnMoLSkNCj4NCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9oZWFw
cy9zZWN1cmVfaGVhcC5jIGIvZHJpdmVycy9kbWEtYnVmL2hlYXBzL3NlY3VyZV9oZWFwLmMNCj4g
aW5kZXggMjVjYzk1NDQyYzU2Li5mOGI4NGZkMTYyODggMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMv
ZG1hLWJ1Zi9oZWFwcy9zZWN1cmVfaGVhcC5jDQo+ICsrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9oZWFw
cy9zZWN1cmVfaGVhcC5jDQo+IEBAIC00LDExICs0LDEyIEBADQo+ICAgKg0KPiAgICogQ29weXJp
Z2h0IChDKSAyMDIzIE1lZGlhVGVrIEluYy4NCj4gICAqLw0KPiAtDQo+ICsjaW5jbHVkZSA8bGlu
dXgvY21hLmg+DQo+ICAjaW5jbHVkZSA8bGludXgvZG1hLWJ1Zi5oPg0KPiAgI2luY2x1ZGUgPGxp
bnV4L2RtYS1oZWFwLmg+DQo+ICAjaW5jbHVkZSA8bGludXgvZXJyLmg+DQo+ICAjaW5jbHVkZSA8
bGludXgvbW9kdWxlLmg+DQo+ICsjaW5jbHVkZSA8bGludXgvb2ZfcmVzZXJ2ZWRfbWVtLmg+DQo+
ICAjaW5jbHVkZSA8bGludXgvc2NhdHRlcmxpc3QuaD4NCj4gICNpbmNsdWRlIDxsaW51eC9zbGFi
Lmg+DQo+ICAjaW5jbHVkZSA8bGludXgvdGVlX2Rydi5oPg0KPiBAQCAtMjUsNiArMjYsOCBAQCBl
bnVtIHNlY3VyZV9idWZmZXJfdGVlX2NtZCB7IC8qIFBBUkFNIE5VTSBhbHdheXMgaXMgNC4gKi8N
Cj4gICAgICAgICAgKiBbaW5dICB2YWx1ZVswXS5hOiBUaGUgYnVmZmVyIHNpemUuDQo+ICAgICAg
ICAgICogICAgICAgdmFsdWVbMF0uYjogYWxpZ25tZW50Lg0KPiAgICAgICAgICAqIFtpbl0gIHZh
bHVlWzFdLmE6IGVudW0gc2VjdXJlX21lbW9yeV90eXBlLg0KPiArICAgICAgICAqIFtpbl0gIHZh
bHVlWzJdLmE6IHBhIGJhc2UgaW4gY21hIGNhc2UuDQo+ICsgICAgICAgICogICAgICAgdmFsdWVb
Ml0uYjogVGhlIGJ1ZmZlciBzaXplIGluIGNtYSBjYXNlLg0KPiAgICAgICAgICAqIFtvdXRdIHZh
bHVlWzNdLmE6IFRoZSBzZWN1cmUgaGFuZGxlLg0KPiAgICAgICAgICAqLw0KPiAgICAgICAgIFRa
Q01EX1NFQ01FTV9aQUxMT0MgPSAwLA0KPiBAQCAtNDUsNiArNDgsMTMgQEAgZW51bSBzZWN1cmVf
bWVtb3J5X3R5cGUgew0KPiAgICAgICAgICAqIG1hbmFnZW1lbnQgaXMgaW5zaWRlIHRoZSBURUUu
DQo+ICAgICAgICAgICovDQo+ICAgICAgICAgU0VDVVJFX01FTU9SWV9UWVBFX01US19DTV9UWiAg
ICA9IDEsDQo+ICsgICAgICAgLyoNCj4gKyAgICAgICAgKiBNZWRpYVRlayBkeW5hbWljIGNodW5r
IG1lbW9yeSBjYXJ2ZWQgb3V0IGZyb20gQ01BLg0KPiArICAgICAgICAqIEluIG5vcm1hbCBjYXNl
LCB0aGUgQ01BIGNvdWxkIGJlIHVzZWQgaW4ga2VybmVsOyBXaGVuIFNWUCBzdGFydCwgd2Ugd2ls
bA0KPiArICAgICAgICAqIGFsbG9jYXRlIHdob2xlIHRoaXMgQ01BIGFuZCBwYXNzIHdob2xlIHRo
ZSBDTUEgUEEgYW5kIHNpemUgaW50byBURUUgdG8NCj4gKyAgICAgICAgKiBwcm90ZWN0IGl0LCB0
aGVuIHRoZSBkZXRhaWwgbWVtb3J5IG1hbmFnZW1lbnQgYWxzbyBpcyBpbnNpZGUgdGhlIFRFRS4N
Cj4gKyAgICAgICAgKi8NCj4gKyAgICAgICBTRUNVUkVfTUVNT1JZX1RZUEVfTVRLX0NNX0NNQSAg
ID0gMiwNCj4gIH07DQo+DQo+ICBzdHJ1Y3Qgc2VjdXJlX2J1ZmZlciB7DQo+IEBAIC03MCw2ICs4
MCw3IEBAIHN0cnVjdCBzZWN1cmVfaGVhcF9wcnZfZGF0YSB7DQo+ICAgICAgICAgICovDQo+ICAg
ICAgICAgY29uc3QgaW50ICAgICAgICAgICAgICAgICAgICAgICB0ZWVfY29tbWFuZF9pZF9iYXNl
Ow0KPg0KPiArICAgICAgIGludCAgICAgKCpoZWFwX2luaXQpKHN0cnVjdCBzZWN1cmVfaGVhcCAq
c2VjX2hlYXApOw0KPiAgICAgICAgIGludCAgICAgKCptZW1vcnlfYWxsb2MpKHN0cnVjdCBzZWN1
cmVfaGVhcCAqc2VjX2hlYXAsIHN0cnVjdCBzZWN1cmVfYnVmZmVyICpzZWNfYnVmKTsNCj4gICAg
ICAgICB2b2lkICAgICgqbWVtb3J5X2ZyZWUpKHN0cnVjdCBzZWN1cmVfaGVhcCAqc2VjX2hlYXAs
IHN0cnVjdCBzZWN1cmVfYnVmZmVyICpzZWNfYnVmKTsNCj4NCj4gQEAgLTg2LDYgKzk3LDEzIEBA
IHN0cnVjdCBzZWN1cmVfaGVhcCB7DQo+ICAgICAgICAgdTMyICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB0ZWVfc2Vzc2lvbjsNCj4NCj4gICAgICAgICBjb25zdCBzdHJ1Y3Qgc2VjdXJlX2hl
YXBfcHJ2X2RhdGEgKmRhdGE7DQo+ICsNCj4gKyAgICAgICBzdHJ1Y3QgY21hICAgICAgICAgICAg
ICAqY21hOw0KPiArICAgICAgIHN0cnVjdCBwYWdlICAgICAgICAgICAgICpjbWFfcGFnZV9tdGs7
DQo+ICsgICAgICAgdW5zaWduZWQgbG9uZyAgICAgICAgICAgY21hX3BhZGRyOw0KPiArICAgICAg
IHVuc2lnbmVkIGxvbmcgICAgICAgICAgIGNtYV9zaXplOw0KPiArICAgICAgIHVuc2lnbmVkIGxv
bmcgICAgICAgICAgIGNtYV91c2VkX3NpemVfbXRrOw0KPiArICAgICAgIHN0cnVjdCBtdXRleCAg
ICAgICAgICAgIGxvY2s7IC8qIGxvY2sgZm9yIGNtYV91c2VkX3NpemVfbXRrICovDQo+ICB9Ow0K
Pg0KPiAgc3RydWN0IHNlY3VyZV9oZWFwX2F0dGFjaG1lbnQgew0KPiBAQCAtMTY4LDcgKzE4Niwx
MCBAQCBzdGF0aWMgaW50IHNlY3VyZV9oZWFwX3RlZV9zZWN1cmVfbWVtb3J5KHN0cnVjdCBzZWN1
cmVfaGVhcCAqc2VjX2hlYXAsDQo+ICAgICAgICAgcGFyYW1zWzFdLmF0dHIgPSBURUVfSU9DVExf
UEFSQU1fQVRUUl9UWVBFX1ZBTFVFX0lOUFVUOw0KPiAgICAgICAgIHBhcmFtc1sxXS51LnZhbHVl
LmEgPSBzZWNfaGVhcC0+bWVtX3R5cGU7DQo+ICAgICAgICAgcGFyYW1zWzJdLmF0dHIgPSBURUVf
SU9DVExfUEFSQU1fQVRUUl9UWVBFX1ZBTFVFX0lOUFVUOw0KPiAtDQo+ICsgICAgICAgaWYgKHNl
Y19oZWFwLT5jbWEgJiYgc2VjX2hlYXAtPm1lbV90eXBlID09IFNFQ1VSRV9NRU1PUllfVFlQRV9N
VEtfQ01fQ01BKSB7DQo+ICsgICAgICAgICAgICAgICBwYXJhbXNbMl0udS52YWx1ZS5hID0gc2Vj
X2hlYXAtPmNtYV9wYWRkcjsNCj4gKyAgICAgICAgICAgICAgIHBhcmFtc1syXS51LnZhbHVlLmIg
PSBzZWNfaGVhcC0+Y21hX3NpemU7DQo+ICsgICAgICAgfQ0KPiAgICAgICAgIHBhcmFtc1szXS5h
dHRyID0gVEVFX0lPQ1RMX1BBUkFNX0FUVFJfVFlQRV9WQUxVRV9PVVRQVVQ7DQo+ICAgICAgICAg
cmV0ID0gc2VjdXJlX2hlYXBfdGVlX3NlcnZpY2VfY2FsbChzZWNfaGVhcC0+dGVlX2N0eCwgc2Vj
X2hlYXAtPnRlZV9zZXNzaW9uLA0KPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZGF0YS0+dGVlX2NvbW1hbmRfaWRfYmFzZSArIFRaQ01EX1NFQ01FTV9aQUxMT0Ms
DQo+IEBAIC0xOTcsNiArMjE4LDY2IEBAIHN0YXRpYyB2b2lkIHNlY3VyZV9oZWFwX3RlZV91bnNl
Y3VyZV9tZW1vcnkoc3RydWN0IHNlY3VyZV9oZWFwICpzZWNfaGVhcCwNCj4gICAgICAgICAgICAg
ICAgICAgICAgICBzZWNfaGVhcC0+bmFtZSwgc2VjX2J1Zi0+c2VjX2hhbmRsZSwgcGFyYW1zWzFd
LnUudmFsdWUuYSk7DQo+ICB9DQo+DQo+ICtzdGF0aWMgaW50IG10a19zZWN1cmVfbWVtb3J5X2Nt
YV9hbGxvY2F0ZShzdHJ1Y3Qgc2VjdXJlX2hlYXAgKnNlY19oZWFwLA0KPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qgc2VjdXJlX2J1ZmZlciAqc2VjX2J1
ZikNCj4gK3sNCj4gKyAgICAgICAvKg0KPiArICAgICAgICAqIEFsbG9jYXRlIENNQSBvbmx5IHdo
ZW4gYWxsb2NhdGluZyBidWZmZXIgZm9yIHRoZSBmaXJzdCB0aW1lLCBhbmQganVzdA0KPiArICAg
ICAgICAqIGluY3JlYXNlIGNtYV91c2VkX3NpemVfbXRrIGF0IHRoZSBvdGhlciB0aW1lLg0KPiAr
ICAgICAgICAqLw0KPiArICAgICAgIG11dGV4X2xvY2soJnNlY19oZWFwLT5sb2NrKTsNCj4gKyAg
ICAgICBpZiAoc2VjX2hlYXAtPmNtYV91c2VkX3NpemVfbXRrKQ0KPiArICAgICAgICAgICAgICAg
Z290byBhZGRfc2l6ZTsNCj4gKw0KPiArICAgICAgIG11dGV4X3VubG9jaygmc2VjX2hlYXAtPmxv
Y2spOw0KPiArICAgICAgIHNlY19oZWFwLT5jbWFfcGFnZV9tdGsgPSBjbWFfYWxsb2Moc2VjX2hl
YXAtPmNtYSwgc2VjX2hlYXAtPmNtYV9zaXplID4+IFBBR0VfU0hJRlQsDQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfb3JkZXIoUEFHRV9TSVpFKSwgZmFs
c2UpOw0KPiArICAgICAgIGlmICghc2VjX2hlYXAtPmNtYV9wYWdlX210aykNCj4gKyAgICAgICAg
ICAgICAgIHJldHVybiAtRU5PTUVNOw0KPiArDQo+ICsgICAgICAgbXV0ZXhfbG9jaygmc2VjX2hl
YXAtPmxvY2spOw0KPiArYWRkX3NpemU6DQo+ICsgICAgICAgc2VjX2hlYXAtPmNtYV91c2VkX3Np
emVfbXRrICs9IHNlY19idWYtPnNpemU7DQo+ICsgICAgICAgbXV0ZXhfdW5sb2NrKCZzZWNfaGVh
cC0+bG9jayk7DQo+ICsNCj4gKyAgICAgICByZXR1cm4gMDsNCj4gK30NCj4gKw0KPiArc3RhdGlj
IHZvaWQgbXRrX3NlY3VyZV9tZW1vcnlfY21hX2ZyZWUoc3RydWN0IHNlY3VyZV9oZWFwICpzZWNf
aGVhcCwNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHNl
Y3VyZV9idWZmZXIgKnNlY19idWYpDQo+ICt7DQo+ICsgICAgICAgYm9vbCBjbWFfaXNfZW1wdHk7
DQo+ICsNCj4gKyAgICAgICBtdXRleF9sb2NrKCZzZWNfaGVhcC0+bG9jayk7DQo+ICsgICAgICAg
c2VjX2hlYXAtPmNtYV91c2VkX3NpemVfbXRrIC09IHNlY19idWYtPnNpemU7DQo+ICsgICAgICAg
Y21hX2lzX2VtcHR5ID0gIXNlY19oZWFwLT5jbWFfdXNlZF9zaXplX210azsNCj4gKyAgICAgICBt
dXRleF91bmxvY2soJnNlY19oZWFwLT5sb2NrKTsNCj4gKw0KPiArICAgICAgIGlmIChjbWFfaXNf
ZW1wdHkpDQo+ICsgICAgICAgICAgICAgICBjbWFfcmVsZWFzZShzZWNfaGVhcC0+Y21hLCBzZWNf
aGVhcC0+Y21hX3BhZ2VfbXRrLA0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjX2hl
YXAtPmNtYV9zaXplID4+IFBBR0VfU0hJRlQpOw0KPiArfQ0KPiArDQo+ICtzdGF0aWMgaW50IG10
a19zZWN1cmVfaGVhcF9jbWFfaW5pdChzdHJ1Y3Qgc2VjdXJlX2hlYXAgKnNlY19oZWFwKQ0KPiAr
ew0KPiArICAgICAgIGlmICghc2VjX2hlYXAtPmNtYSkNCj4gKyAgICAgICAgICAgICAgIHJldHVy
biAtRUlOVkFMOw0KPiArICAgICAgIG11dGV4X2luaXQoJnNlY19oZWFwLT5sb2NrKTsNCj4gKyAg
ICAgICByZXR1cm4gMDsNCj4gK30NCj4gKw0KPiArLyogVXNlIENNQSB0byBwcmVwYXJlIHRoZSBi
dWZmZXIgYW5kIHRoZSBtZW1vcnkgYWxsb2NhdGluZyBpcyB3aXRoaW4gdGhlIFRFRS4gKi8NCj4g
K2NvbnN0IHN0cnVjdCBzZWN1cmVfaGVhcF9wcnZfZGF0YSBtdGtfc2VjX21lbV9kYXRhX2NtYSA9
IHsNCj4gKyAgICAgICAudXVpZCAgICAgICAgICAgICAgICAgICA9IFRaX1RBX01FTV9VVUlEX01U
SywNCj4gKyAgICAgICAudGVlX2ltcGxfaWQgICAgICAgICAgICA9IFRFRV9JTVBMX0lEX09QVEVF
LA0KPiArICAgICAgIC50ZWVfY29tbWFuZF9pZF9iYXNlICAgID0gVEVFX01FTV9DT01NQU5EX0lE
X0JBU0VfTVRLLA0KPiArICAgICAgIC5oZWFwX2luaXQgICAgICAgICAgICAgID0gbXRrX3NlY3Vy
ZV9oZWFwX2NtYV9pbml0LA0KPiArICAgICAgIC5tZW1vcnlfYWxsb2MgICAgICAgICAgID0gbXRr
X3NlY3VyZV9tZW1vcnlfY21hX2FsbG9jYXRlLA0KPiArICAgICAgIC5tZW1vcnlfZnJlZSAgICAg
ICAgICAgID0gbXRrX3NlY3VyZV9tZW1vcnlfY21hX2ZyZWUsDQo+ICsgICAgICAgLnNlY3VyZV90
aGVfbWVtb3J5ICAgICAgPSBzZWN1cmVfaGVhcF90ZWVfc2VjdXJlX21lbW9yeSwNCj4gKyAgICAg
ICAudW5zZWN1cmVfdGhlX21lbW9yeSAgICA9IHNlY3VyZV9oZWFwX3RlZV91bnNlY3VyZV9tZW1v
cnksDQo+ICt9Ow0KPiArDQo+ICAvKiBUaGUgbWVtb3J5IGFsbG9jYXRpbmcgaXMgd2l0aGluIHRo
ZSBURUUuICovDQo+ICBjb25zdCBzdHJ1Y3Qgc2VjdXJlX2hlYXBfcHJ2X2RhdGEgbXRrX3NlY19t
ZW1fZGF0YSA9IHsNCj4gICAgICAgICAudXVpZCAgICAgICAgICAgICAgICAgICA9IFRaX1RBX01F
TV9VVUlEX01USywNCj4gQEAgLTQyMCwyMCArNTAxLDU5IEBAIHN0YXRpYyBzdHJ1Y3Qgc2VjdXJl
X2hlYXAgc2VjdXJlX2hlYXBzW10gPSB7DQo+ICAgICAgICAgICAgICAgICAubWVtX3R5cGUgICAg
ICAgPSBTRUNVUkVfTUVNT1JZX1RZUEVfTVRLX0NNX1RaLA0KPiAgICAgICAgICAgICAgICAgLmRh
dGEgICAgICAgICAgID0gJm10a19zZWNfbWVtX2RhdGEsDQo+ICAgICAgICAgfSwNCj4gKyAgICAg
ICB7DQo+ICsgICAgICAgICAgICAgICAubmFtZSAgICAgICAgICAgPSAic2VjdXJlX210a19jbWEi
LA0KPiArICAgICAgICAgICAgICAgLm1lbV90eXBlICAgICAgID0gU0VDVVJFX01FTU9SWV9UWVBF
X01US19DTV9DTUEsDQo+ICsgICAgICAgICAgICAgICAuZGF0YSAgICAgICAgICAgPSAmbXRrX3Nl
Y19tZW1fZGF0YV9jbWEsDQo+ICsgICAgICAgfSwNCj4gIH07DQo+DQo+ICtzdGF0aWMgaW50IF9f
aW5pdCBzZWN1cmVfY21hX2luaXQoc3RydWN0IHJlc2VydmVkX21lbSAqcm1lbSkNCj4gK3sNCj4g
KyAgICAgICBzdHJ1Y3Qgc2VjdXJlX2hlYXAgKnNlY19oZWFwID0gc2VjdXJlX2hlYXBzOw0KPiAr
ICAgICAgIHN0cnVjdCBjbWEgKnNlY19jbWE7DQo+ICsgICAgICAgaW50IHJldCwgaTsNCj4gKw0K
PiArICAgICAgIHJldCA9IGNtYV9pbml0X3Jlc2VydmVkX21lbShybWVtLT5iYXNlLCBybWVtLT5z
aXplLCAwLCBybWVtLT5uYW1lLA0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAmc2VjX2NtYSk7DQo+ICsgICAgICAgaWYgKHJldCkgew0KPiArICAgICAgICAgICAgICAgcHJf
ZXJyKCIlczogJXMgc2V0IHVwIENNQSBmYWlsXG4iLCBfX2Z1bmNfXywgcm1lbS0+bmFtZSk7DQo+
ICsgICAgICAgICAgICAgICByZXR1cm4gcmV0Ow0KPiArICAgICAgIH0NCj4gKw0KPiArICAgICAg
IGZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKHNlY3VyZV9oZWFwcyk7IGkrKywgc2VjX2hlYXAr
Kykgew0KPiArICAgICAgICAgICAgICAgaWYgKHNlY19oZWFwLT5tZW1fdHlwZSAhPSBTRUNVUkVf
TUVNT1JZX1RZUEVfTVRLX0NNX0NNQSkNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgY29udGlu
dWU7DQo+ICsNCj4gKyAgICAgICAgICAgICAgIHNlY19oZWFwLT5jbWEgPSBzZWNfY21hOw0KPiAr
ICAgICAgICAgICAgICAgc2VjX2hlYXAtPmNtYV9wYWRkciA9IHJtZW0tPmJhc2U7DQo+ICsgICAg
ICAgICAgICAgICBzZWNfaGVhcC0+Y21hX3NpemUgPSBybWVtLT5zaXplOw0KPiArICAgICAgIH0N
Cj4gKyAgICAgICByZXR1cm4gMDsNCj4gK30NCj4gKw0KPiArUkVTRVJWRURNRU1fT0ZfREVDTEFS
RShzZWN1cmVfY21hLCAic2VjdXJlX2NtYV9yZWdpb24iLCBzZWN1cmVfY21hX2luaXQpOw0KPiAr
DQo+ICBzdGF0aWMgaW50IHNlY3VyZV9oZWFwX2luaXQodm9pZCkNCj4gIHsNCj4gICAgICAgICBz
dHJ1Y3Qgc2VjdXJlX2hlYXAgKnNlY19oZWFwID0gc2VjdXJlX2hlYXBzOw0KPiAgICAgICAgIHN0
cnVjdCBkbWFfaGVhcF9leHBvcnRfaW5mbyBleHBfaW5mbzsNCj4gICAgICAgICBzdHJ1Y3QgZG1h
X2hlYXAgKmhlYXA7DQo+ICAgICAgICAgdW5zaWduZWQgaW50IGk7DQo+ICsgICAgICAgaW50IHJl
dDsNCj4NCj4gICAgICAgICBmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShzZWN1cmVfaGVhcHMp
OyBpKyssIHNlY19oZWFwKyspIHsNCj4gICAgICAgICAgICAgICAgIGV4cF9pbmZvLm5hbWUgPSBz
ZWNfaGVhcC0+bmFtZTsNCj4gICAgICAgICAgICAgICAgIGV4cF9pbmZvLm9wcyA9ICZzZWNfaGVh
cF9vcHM7DQo+ICAgICAgICAgICAgICAgICBleHBfaW5mby5wcml2ID0gKHZvaWQgKilzZWNfaGVh
cDsNCj4NCj4gKyAgICAgICAgICAgICAgIGlmIChzZWNfaGVhcC0+ZGF0YSAmJiBzZWNfaGVhcC0+
ZGF0YS0+aGVhcF9pbml0KSB7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IHNlY19o
ZWFwLT5kYXRhLT5oZWFwX2luaXQoc2VjX2hlYXApOw0KPiArICAgICAgICAgICAgICAgICAgICAg
ICBpZiAocmV0KSB7DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJfZXJyKCJz
ZWNfaGVhcCAlcyBpbml0IGZhaWwgJWQuXG4iLCBzZWNfaGVhcC0+bmFtZSwgcmV0KTsNCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgfQ0KPiArICAgICAgICAgICAgICAgfQ0KPiAgICAgICAgICAgICAgICAgaGVhcCA9
IGRtYV9oZWFwX2FkZCgmZXhwX2luZm8pOw0KPiAgICAgICAgICAgICAgICAgaWYgKElTX0VSUiho
ZWFwKSkNCj4gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9FUlIoaGVhcCk7DQo+
IC0tDQo+IDIuMjUuMQ0KPg0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KTGluYXJvLW1tLXNpZyBtYWlsaW5nIGxpc3QgLS0gbGluYXJvLW1tLXNpZ0BsaXN0
cy5saW5hcm8ub3JnClRvIHVuc3Vic2NyaWJlIHNlbmQgYW4gZW1haWwgdG8gbGluYXJvLW1tLXNp
Zy1sZWF2ZUBsaXN0cy5saW5hcm8ub3JnCg==
