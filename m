Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 7EC9896B72F
	for <lists+linaro-mm-sig@lfdr.de>; Wed,  4 Sep 2024 11:44:49 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 35851440FB
	for <lists+linaro-mm-sig@lfdr.de>; Wed,  4 Sep 2024 09:44:48 +0000 (UTC)
Received: from mail-oo1-f48.google.com (mail-oo1-f48.google.com [209.85.161.48])
	by lists.linaro.org (Postfix) with ESMTPS id 0D54B40CEF
	for <linaro-mm-sig@lists.linaro.org>; Wed,  4 Sep 2024 09:44:46 +0000 (UTC)
Authentication-Results: lists.linaro.org;
	dkim=pass header.d=linaro.org header.s=google header.b=eSIGlHFY;
	spf=pass (lists.linaro.org: domain of jens.wiklander@linaro.org designates 209.85.161.48 as permitted sender) smtp.mailfrom=jens.wiklander@linaro.org;
	dmarc=pass (policy=none) header.from=linaro.org
Received: by mail-oo1-f48.google.com with SMTP id 006d021491bc7-5df998d7a44so3616208eaf.2
        for <linaro-mm-sig@lists.linaro.org>; Wed, 04 Sep 2024 02:44:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=linaro.org; s=google; t=1725443085; x=1726047885; darn=lists.linaro.org;
        h=content-transfer-encoding:cc:to:subject:message-id:date:from
         :in-reply-to:references:mime-version:from:to:cc:subject:date
         :message-id:reply-to;
        bh=G2jCB3Mh2D7e/fKcpdcpOCelHevV01EHEW0KXFzYpnE=;
        b=eSIGlHFYSF+i9PKzB/IQxXtpw/iVLMCXcHmjnl0aFm333IES59m3TVpmRox6era4SC
         ir5txX19y1Va7291DqObL5zGZXvpJF4yfd8pbbYRXZUw/NfOuag+38LDB4uNLTozWgrc
         QY4NTgkkddZNaHdEUKVIdsYQLYbfmx6XrPylskZeJTCxgE6Fm2KnU42V6/fYydCRm08h
         xFs73cQRduxEGxH2ty2vdE3yDStGtTRJXK7aUVfb2ILoc7kEL0urtcGf98IG011sCpxH
         itmDzcXTmSWsuKU44zFoKIOM7Id3gOhlDnP+zVLk47dduACLyhQiC5aTFNuEzdVyJqiF
         +hOw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20230601; t=1725443085; x=1726047885;
        h=content-transfer-encoding:cc:to:subject:message-id:date:from
         :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
         :subject:date:message-id:reply-to;
        bh=G2jCB3Mh2D7e/fKcpdcpOCelHevV01EHEW0KXFzYpnE=;
        b=Bl/zA7eLvmzUkrXsmbpWgVUPsHDNlhBeA5Mry3z9nwxGM0boUuMp5MHxS8/BRc4+bE
         pgv6jtN7zIUQ3dSMj77GCVmegUr/ZQ/O8PElErc1PCfSRO0O+gZYOQ4e9Ax6WB4nRAre
         Wda4adN1HVgW545YL7CkJrsVpPu0ew2Dzwc5uFliyi4OueiDBdrtqa2d7srGA4JrlnTV
         tVI03UrKR7SgV1BbTEz+Clws1TUOeXPN9UazcquPzolYls9AYHX+xeEeilEscgxwCEyu
         2yzrszae1SU5czXtbCdFfC4YmPWIaAObV5WdG65g4Ex7K+il5kduCgH+Imd0R2Mm+ebe
         pRlg==
X-Forwarded-Encrypted: i=1; AJvYcCVvIwfBoI5x7expmtyKwIN87wmAvdkBhspGqsldu7lHgmo84pupMu/OHebt69w6KX08Q+dGcAE2d/VoUo8V@lists.linaro.org
X-Gm-Message-State: AOJu0YxlCok9RzNly75nDR6Y6ggcfWncnKfuto3KwfKKsJE9Ml/Z+JVa
	LkPU+4F6cwm7LnqZ8EGyciw61QdgsvYXB4K9N9dL6kMRuKU5x+mia3Hqdi430QHH8V+i/3Mhdhw
	XRFwoZSfCjJrjrHeCad4FEE/nh+ZSochfpw1KSZT6
X-Google-Smtp-Source: AGHT+IGYbHJdBZDqXfJaLvPa+cheRpz0nZvpY4lYVwTEuIeN+wJEbeHIAIs0Kb9fRcKIKf3+GKU49MLlqIZtGriKRJU=
X-Received: by 2002:a05:6870:171d:b0:25d:f0ba:eab7 with SMTP id
 586e51a60fabf-27810b95f26mr7655971fac.18.1725443085257; Wed, 04 Sep 2024
 02:44:45 -0700 (PDT)
MIME-Version: 1.0
References: <20240830070351.2855919-1-jens.wiklander@linaro.org>
 <20240830070351.2855919-5-jens.wiklander@linaro.org> <CABdmKX2KzswmiDY4oWw69_rPWs8d_Cqp7OXouSeMQaYX1SDSmw@mail.gmail.com>
In-Reply-To: <CABdmKX2KzswmiDY4oWw69_rPWs8d_Cqp7OXouSeMQaYX1SDSmw@mail.gmail.com>
From: Jens Wiklander <jens.wiklander@linaro.org>
Date: Wed, 4 Sep 2024 11:44:33 +0200
Message-ID: <CAHUa44FYYFVQWf0DGUXNHoOVQEC0-HRyYa0386dHNjo4y1qSiQ@mail.gmail.com>
To: "T.J. Mercier" <tjmercier@google.com>
X-Rspamd-Action: no action
X-Spamd-Bar: ------
X-Rspamd-Server: lists.linaro.org
X-Rspamd-Queue-Id: 0D54B40CEF
X-Spamd-Result: default: False [-6.60 / 15.00];
	REPLY(-4.00)[];
	BAYES_HAM(-3.00)[100.00%];
	SUSPICIOUS_RECIPS(1.50)[];
	DMARC_POLICY_ALLOW(-0.50)[linaro.org,none];
	R_SPF_ALLOW(-0.20)[+ip4:209.85.128.0/17];
	R_DKIM_ALLOW(-0.20)[linaro.org:s=google];
	MIME_GOOD(-0.10)[text/plain];
	RWL_MAILSPIKE_GOOD(-0.10)[209.85.161.48:from];
	ARC_NA(0.00)[];
	ASN(0.00)[asn:15169, ipnet:209.85.128.0/17, country:US];
	MIME_TRACE(0.00)[0:+];
	RCVD_COUNT_ONE(0.00)[1];
	TO_DN_SOME(0.00)[];
	RCPT_COUNT_TWELVE(0.00)[23];
	TAGGED_RCPT(0.00)[dt];
	NEURAL_HAM(-0.00)[-1.000];
	RCVD_TLS_LAST(0.00)[];
	FROM_HAS_DN(0.00)[];
	FREEMAIL_CC(0.00)[vger.kernel.org,lists.freedesktop.org,lists.linaro.org,lists.trustedfirmware.org,lists.infradead.org,nxp.com,gmail.com,mediatek.com,linaro.org,collabora.com,arm.com,google.com,amd.com,kernel.org];
	MISSING_XM_UA(0.00)[];
	FROM_EQ_ENVFROM(0.00)[];
	PREVIOUSLY_DELIVERED(0.00)[linaro-mm-sig@lists.linaro.org];
	TO_MATCH_ENVRCPT_SOME(0.00)[];
	DKIM_TRACE(0.00)[linaro.org:+]
Message-ID-Hash: W5JVOOR44GUYNBFZKWVOG6NU5JO4BRG3
X-Message-ID-Hash: W5JVOOR44GUYNBFZKWVOG6NU5JO4BRG3
X-MailFrom: jens.wiklander@linaro.org
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
CC: linux-kernel@vger.kernel.org, devicetree@vger.kernel.org, linux-media@vger.kernel.org, dri-devel@lists.freedesktop.org, linaro-mm-sig@lists.linaro.org, op-tee@lists.trustedfirmware.org, linux-arm-kernel@lists.infradead.org, linux-mediatek@lists.infradead.org, Olivier Masse <olivier.masse@nxp.com>, Thierry Reding <thierry.reding@gmail.com>, Yong Wu <yong.wu@mediatek.com>, Sumit Semwal <sumit.semwal@linaro.org>, Benjamin Gaignard <benjamin.gaignard@collabora.com>, Brian Starkey <Brian.Starkey@arm.com>, John Stultz <jstultz@google.com>, =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>, Sumit Garg <sumit.garg@linaro.org>, Matthias Brugger <matthias.bgg@gmail.com>, AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>, Rob Herring <robh@kernel.org>, Krzysztof Kozlowski <krzk+dt@kernel.org>, Conor Dooley <conor+dt@kernel.org>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] Re: [RFC PATCH 4/4] dma-buf: heaps: add Linaro restricted dmabuf heap support
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/W5JVOOR44GUYNBFZKWVOG6NU5JO4BRG3/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

T24gVHVlLCBTZXAgMywgMjAyNCBhdCA3OjUw4oCvUE0gVC5KLiBNZXJjaWVyIDx0am1lcmNpZXJA
Z29vZ2xlLmNvbT4gd3JvdGU6DQo+DQo+IE9uIEZyaSwgQXVnIDMwLCAyMDI0IGF0IDEyOjA04oCv
QU0gSmVucyBXaWtsYW5kZXINCj4gPGplbnMud2lrbGFuZGVyQGxpbmFyby5vcmc+IHdyb3RlOg0K
PiA+DQo+ID4gQWRkIGEgTGluYXJvIHJlc3RyaWN0ZWQgaGVhcCB1c2luZyB0aGUgbGluYXJvLHJl
c3RyaWN0ZWQtaGVhcCBiaW5kaW5ncw0KPiA+IGltcGxlbWVudGVkIGJhc2VkIG9uIHRoZSBnZW5l
cmljIHJlc3RyaWN0ZWQgaGVhcC4NCj4gPg0KPiA+IFRoZSBiaW5kaW5ncyBkZWZpbmVzIGEgcmFu
Z2Ugb2YgcGh5c2ljYWwgcmVzdHJpY3RlZCBtZW1vcnkuIFRoZSBoZWFwDQo+ID4gbWFuYWdlcyB0
aGlzIGFkZHJlc3MgcmFuZ2UgdXNpbmcgZ2VuYWxsb2MuIFRoZSBhbGxvY2F0ZWQgZG1hLWJ1ZiBm
aWxlDQo+ID4gZGVzY3JpcHRvciBjYW4gbGF0ZXIgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBURUUg
c3Vic3lzdGVtIGZvciBsYXRlciB1c2UNCj4gPiB2aWEgVHJ1c3RlZCBBcHBsaWNhdGlvbnMgaW4g
dGhlIHNlY3VyZSB3b3JsZC4NCj4gPg0KPiA+IENvLWRldmVsb3BlZC1ieTogT2xpdmllciBNYXNz
ZSA8b2xpdmllci5tYXNzZUBueHAuY29tPg0KPiA+IFNpZ25lZC1vZmYtYnk6IE9saXZpZXIgTWFz
c2UgPG9saXZpZXIubWFzc2VAbnhwLmNvbT4NCj4gPiBTaWduZWQtb2ZmLWJ5OiBKZW5zIFdpa2xh
bmRlciA8amVucy53aWtsYW5kZXJAbGluYXJvLm9yZz4NCj4gPiAtLS0NCj4gPiAgZHJpdmVycy9k
bWEtYnVmL2hlYXBzL0tjb25maWcgICAgICAgICAgICAgICAgIHwgIDEwICsrDQo+ID4gIGRyaXZl
cnMvZG1hLWJ1Zi9oZWFwcy9NYWtlZmlsZSAgICAgICAgICAgICAgICB8ICAgMSArDQo+ID4gIC4u
Li9kbWEtYnVmL2hlYXBzL3Jlc3RyaWN0ZWRfaGVhcF9saW5hcm8uYyAgICB8IDE2NSArKysrKysr
KysrKysrKysrKysNCj4gPiAgMyBmaWxlcyBjaGFuZ2VkLCAxNzYgaW5zZXJ0aW9ucygrKQ0KPiA+
ICBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9kbWEtYnVmL2hlYXBzL3Jlc3RyaWN0ZWRfaGVh
cF9saW5hcm8uYw0KPiA+DQo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9oZWFwcy9L
Y29uZmlnIGIvZHJpdmVycy9kbWEtYnVmL2hlYXBzL0tjb25maWcNCj4gPiBpbmRleCA1ODkwM2Jj
NjJhYzguLjgyZTJjNWQwOTI0MiAxMDA2NDQNCj4gPiAtLS0gYS9kcml2ZXJzL2RtYS1idWYvaGVh
cHMvS2NvbmZpZw0KPiA+ICsrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9oZWFwcy9LY29uZmlnDQo+ID4g
QEAgLTI4LDMgKzI4LDEzIEBAIGNvbmZpZyBETUFCVUZfSEVBUFNfUkVTVFJJQ1RFRF9NVEsNCj4g
PiAgICAgICAgIGhlbHANCj4gPiAgICAgICAgICAgRW5hYmxlIHJlc3RyaWN0ZWQgZG1hLWJ1ZiBo
ZWFwcyBmb3IgTWVkaWFUZWsgcGxhdGZvcm0uIFRoaXMgaGVhcCBpcyBiYWNrZWQgYnkNCj4gPiAg
ICAgICAgICAgVEVFIGNsaWVudCBpbnRlcmZhY2VzLiBJZiBpbiBkb3VidCwgc2F5IE4uDQo+ID4g
Kw0KPiA+ICtjb25maWcgRE1BQlVGX0hFQVBTX1JFU1RSSUNURURfTElOQVJPDQo+ID4gKyAgICAg
ICBib29sICJMaW5hcm8gRE1BLUJVRiBSZXN0cmljdGVkIEhlYXAiDQo+ID4gKyAgICAgICBkZXBl
bmRzIG9uIERNQUJVRl9IRUFQU19SRVNUUklDVEVEDQo+ID4gKyAgICAgICBoZWxwDQo+ID4gKyAg
ICAgICAgIENob29zZSB0aGlzIG9wdGlvbiB0byBlbmFibGUgdGhlIExpbmFybyByZXN0cmljdGVk
IGRtYS1idWYgaGVhcC4NCj4gPiArICAgICAgICAgVGhlIHJlc3RyaWN0ZWQgaGVhcCBwb29scyBh
cmUgZGVmaW5lZCBhY2NvcmRpbmcgdG8gdGhlIERULiBIZWFwcw0KPiA+ICsgICAgICAgICBhcmUg
YWxsb2NhdGVkIGluIHRoZSBwb29scyB1c2luZyBnZW4gYWxsb2NhdGVyLg0KPiA+ICsgICAgICAg
ICBJZiBpbiBkb3VidCwgc2F5IE4uDQo+ID4gKw0KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2Rt
YS1idWYvaGVhcHMvTWFrZWZpbGUgYi9kcml2ZXJzL2RtYS1idWYvaGVhcHMvTWFrZWZpbGUNCj4g
PiBpbmRleCAwMDI4YWE5ZDg3NWYuLjY2YjJmNjdjNDdiNSAxMDA2NDQNCj4gPiAtLS0gYS9kcml2
ZXJzL2RtYS1idWYvaGVhcHMvTWFrZWZpbGUNCj4gPiArKysgYi9kcml2ZXJzL2RtYS1idWYvaGVh
cHMvTWFrZWZpbGUNCj4gPiBAQCAtMiw0ICsyLDUgQEANCj4gPiAgb2JqLSQoQ09ORklHX0RNQUJV
Rl9IRUFQU19DTUEpICAgICAgICAgKz0gY21hX2hlYXAubw0KPiA+ICBvYmotJChDT05GSUdfRE1B
QlVGX0hFQVBTX1JFU1RSSUNURUQpICArPSByZXN0cmljdGVkX2hlYXAubw0KPiA+ICBvYmotJChD
T05GSUdfRE1BQlVGX0hFQVBTX1JFU1RSSUNURURfTVRLKSAgICAgICs9IHJlc3RyaWN0ZWRfaGVh
cF9tdGsubw0KPiA+ICtvYmotJChDT05GSUdfRE1BQlVGX0hFQVBTX1JFU1RSSUNURURfTElOQVJP
KSAgICs9IHJlc3RyaWN0ZWRfaGVhcF9saW5hcm8ubw0KPiA+ICBvYmotJChDT05GSUdfRE1BQlVG
X0hFQVBTX1NZU1RFTSkgICAgICArPSBzeXN0ZW1faGVhcC5vDQo+ID4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZG1hLWJ1Zi9oZWFwcy9yZXN0cmljdGVkX2hlYXBfbGluYXJvLmMgYi9kcml2ZXJzL2Rt
YS1idWYvaGVhcHMvcmVzdHJpY3RlZF9oZWFwX2xpbmFyby5jDQo+ID4gbmV3IGZpbGUgbW9kZSAx
MDA2NDQNCj4gPiBpbmRleCAwMDAwMDAwMDAwMDAuLjRiMDhlZDUxNDAyMw0KPiA+IC0tLSAvZGV2
L251bGwNCj4gPiArKysgYi9kcml2ZXJzL2RtYS1idWYvaGVhcHMvcmVzdHJpY3RlZF9oZWFwX2xp
bmFyby5jDQo+ID4gQEAgLTAsMCArMSwxNjUgQEANCj4gPiArLy8gU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjANCj4gPiArLyoNCj4gPiArICogRE1BQlVGIHNlY3VyZSBoZWFwIGV4cG9y
dGVyDQo+ID4gKyAqDQo+ID4gKyAqIENvcHlyaWdodCAyMDIxIE5YUC4NCj4gPiArICogQ29weXJp
Z2h0IDIwMjQgTGluYXJvIExpbWl0ZWQuDQo+ID4gKyAqLw0KPiA+ICsNCj4gPiArI2RlZmluZSBw
cl9mbXQoZm10KSAgICAgInJoZWFwX2xpbmFybzogIiBmbXQNCj4gPiArDQo+ID4gKyNpbmNsdWRl
IDxsaW51eC9kbWEtYnVmLmg+DQo+ID4gKyNpbmNsdWRlIDxsaW51eC9lcnIuaD4NCj4gPiArI2lu
Y2x1ZGUgPGxpbnV4L2dlbmFsbG9jLmg+DQo+ID4gKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4N
Cj4gPiArI2luY2x1ZGUgPGxpbnV4L29mLmg+DQo+ID4gKyNpbmNsdWRlIDxsaW51eC9vZl9mZHQu
aD4NCj4gPiArI2luY2x1ZGUgPGxpbnV4L29mX3Jlc2VydmVkX21lbS5oPg0KPiA+ICsjaW5jbHVk
ZSA8bGludXgvc2NhdHRlcmxpc3QuaD4NCj4gPiArI2luY2x1ZGUgPGxpbnV4L3NsYWIuaD4NCj4g
PiArDQo+ID4gKyNpbmNsdWRlICJyZXN0cmljdGVkX2hlYXAuaCINCj4gPiArDQo+ID4gKyNkZWZp
bmUgTUFYX0hFQVBfQ09VTlQgMg0KPg0KPiBBcmUgbXVsdGlwbGUgc3VwcG9ydGVkIGJlY2F1c2Ug
b2Ygd2hhdCBDeXJpbGxlIG1lbnRpb25lZCBoZXJlIGFib3V0IHBlcm1pc3Npb25zPw0KPiBodHRw
czovL2xvcmUua2VybmVsLm9yZy9sa21sL0RCQlBSMDRNQjc1MTRFMDA2NDU1QUVBNDA3MDQxRTRG
Nzg4NzA5QERCQlBSMDRNQjc1MTQuZXVycHJkMDQucHJvZC5vdXRsb29rLmNvbS8NCg0KWWVzLCBJ
IGtlcHQgdGhhdCBhcyBpcy4NCg0KPg0KPiBTbyB0aGlzIGlzIGp1c3Qgc29tZSBhcmJpdHJhcnkg
bGltaXQ/IEknZCBwcmVmZXIgdG8gaGF2ZSBzb21lIHNvcnQgb2YNCj4gZG9jdW1lbnRhdGlvbiBh
Ym91dCB0aGlzLg0KDQpIb3cgYWJvdXQgcmVtb3ZpbmcgdGhlIGxpbWl0IGFuZCB1c2luZyBkeW5h
bWljIGFsbG9jYXRpb24gaW5zdGVhZD8NCg0KVGhhbmtzLA0KSmVucw0KDQo+DQo+DQo+ID4gKyNk
ZWZpbmUgSEVBUF9OQU1FX0xFTiAgMzINCj4gPiArDQo+ID4gK3N0cnVjdCByZXNtZW1fcmVzdHJp
Y3RlZCB7DQo+ID4gKyAgICAgICBwaHlzX2FkZHJfdCBiYXNlOw0KPiA+ICsgICAgICAgcGh5c19h
ZGRyX3Qgc2l6ZTsNCj4gPiArDQo+ID4gKyAgICAgICBjaGFyIG5hbWVbSEVBUF9OQU1FX0xFTl07
DQo+ID4gKw0KPiA+ICsgICAgICAgYm9vbCBub19tYXA7DQo+ID4gK307DQo+ID4gKw0KPiA+ICtz
dGF0aWMgc3RydWN0IHJlc21lbV9yZXN0cmljdGVkIHJlc3RyaWN0ZWRfZGF0YVtNQVhfSEVBUF9D
T1VOVF0gPSB7MH07DQo+ID4gK3N0YXRpYyB1bnNpZ25lZCBpbnQgcmVzdHJpY3RlZF9kYXRhX2Nv
dW50Ow0KPiA+ICsNCj4gPiArc3RhdGljIGludCBsaW5hcm9fcmVzdHJpY3RlZF9tZW1vcnlfYWxs
b2NhdGUoc3RydWN0IHJlc3RyaWN0ZWRfaGVhcCAqaGVhcCwNCj4gPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgcmVzdHJpY3RlZF9idWZmZXIgKmJ1
ZikNCj4gPiArew0KPiA+ICsgICAgICAgc3RydWN0IGdlbl9wb29sICpwb29sID0gaGVhcC0+cHJp
dl9kYXRhOw0KPiA+ICsgICAgICAgdW5zaWduZWQgbG9uZyBwYTsNCj4gPiArICAgICAgIGludCBy
ZXQ7DQo+ID4gKw0KPiA+ICsgICAgICAgYnVmLT5zaXplID0gQUxJR04oYnVmLT5zaXplLCBQQUdF
X1NJWkUpOw0KPiA+ICsgICAgICAgcGEgPSBnZW5fcG9vbF9hbGxvYyhwb29sLCBidWYtPnNpemUp
Ow0KPiA+ICsgICAgICAgaWYgKCFwYSkNCj4gPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9N
RU07DQo+ID4gKw0KPiA+ICsgICAgICAgcmV0ID0gc2dfYWxsb2NfdGFibGUoJmJ1Zi0+c2dfdGFi
bGUsIDEsIEdGUF9LRVJORUwpOw0KPiA+ICsgICAgICAgaWYgKHJldCkgew0KPiA+ICsgICAgICAg
ICAgICAgICBnZW5fcG9vbF9mcmVlKHBvb2wsIHBhLCBidWYtPnNpemUpOw0KPiA+ICsgICAgICAg
ICAgICAgICByZXR1cm4gcmV0Ow0KPiA+ICsgICAgICAgfQ0KPiA+ICsNCj4gPiArICAgICAgIHNn
X3NldF9wYWdlKGJ1Zi0+c2dfdGFibGUuc2dsLCBwaHlzX3RvX3BhZ2UocGEpLCBidWYtPnNpemUs
IDApOw0KPiA+ICsNCj4gPiArICAgICAgIHJldHVybiAwOw0KPiA+ICt9DQo+ID4gKw0KPiA+ICtz
dGF0aWMgdm9pZCBsaW5hcm9fcmVzdHJpY3RlZF9tZW1vcnlfZnJlZShzdHJ1Y3QgcmVzdHJpY3Rl
ZF9oZWFwICpoZWFwLA0KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cnVjdCByZXN0cmljdGVkX2J1ZmZlciAqYnVmKQ0KPiA+ICt7DQo+ID4gKyAgICAgICBz
dHJ1Y3QgZ2VuX3Bvb2wgKnBvb2wgPSBoZWFwLT5wcml2X2RhdGE7DQo+ID4gKyAgICAgICBzdHJ1
Y3Qgc2NhdHRlcmxpc3QgKnNnOw0KPiA+ICsgICAgICAgdW5zaWduZWQgaW50IGk7DQo+ID4gKw0K
PiA+ICsgICAgICAgZm9yX2VhY2hfc2coYnVmLT5zZ190YWJsZS5zZ2wsIHNnLCBidWYtPnNnX3Rh
YmxlLm5lbnRzLCBpKQ0KPiA+ICsgICAgICAgICAgICAgICBnZW5fcG9vbF9mcmVlKHBvb2wsIHBh
Z2VfdG9fcGh5cyhzZ19wYWdlKHNnKSksIHNnLT5sZW5ndGgpOw0KPiA+ICsgICAgICAgc2dfZnJl
ZV90YWJsZSgmYnVmLT5zZ190YWJsZSk7DQo+ID4gK30NCj4gPiArDQo+ID4gK3N0YXRpYyBjb25z
dCBzdHJ1Y3QgcmVzdHJpY3RlZF9oZWFwX29wcyBsaW5hcm9fcmVzdHJpY3RlZF9oZWFwX29wcyA9
IHsNCj4gPiArICAgICAgIC5hbGxvYyA9IGxpbmFyb19yZXN0cmljdGVkX21lbW9yeV9hbGxvY2F0
ZSwNCj4gPiArICAgICAgIC5mcmVlID0gbGluYXJvX3Jlc3RyaWN0ZWRfbWVtb3J5X2ZyZWUsDQo+
ID4gK307DQo+ID4gKw0KPiA+ICtzdGF0aWMgaW50IGFkZF9oZWFwKHN0cnVjdCByZXNtZW1fcmVz
dHJpY3RlZCAqbWVtKQ0KPiA+ICt7DQo+ID4gKyAgICAgICBzdHJ1Y3QgcmVzdHJpY3RlZF9oZWFw
ICpoZWFwOw0KPiA+ICsgICAgICAgc3RydWN0IGdlbl9wb29sICpwb29sOw0KPiA+ICsgICAgICAg
aW50IHJldDsNCj4gPiArDQo+ID4gKyAgICAgICBpZiAobWVtLT5iYXNlID09IDAgfHwgbWVtLT5z
aXplID09IDApIHsNCj4gPiArICAgICAgICAgICAgICAgcHJfZXJyKCJyZXN0cmljdGVkX2RhdGEg
YmFzZSBvciBzaXplIGlzIG5vdCBjb3JyZWN0XG4iKTsNCj4gPiArICAgICAgICAgICAgICAgcmV0
dXJuIC1FSU5WQUw7DQo+ID4gKyAgICAgICB9DQo+ID4gKw0KPiA+ICsgICAgICAgaGVhcCA9IGt6
YWxsb2Moc2l6ZW9mKCpoZWFwKSwgR0ZQX0tFUk5FTCk7DQo+ID4gKyAgICAgICBpZiAoIWhlYXAp
DQo+ID4gKyAgICAgICAgICAgICAgIHJldHVybiAtRU5PTUVNOw0KPiA+ICsNCj4gPiArICAgICAg
IHBvb2wgPSBnZW5fcG9vbF9jcmVhdGUoUEFHRV9TSElGVCwgLTEpOw0KPiA+ICsgICAgICAgaWYg
KCFwb29sKSB7DQo+ID4gKyAgICAgICAgICAgICAgIHJldCA9IC1FTk9NRU07DQo+ID4gKyAgICAg
ICAgICAgICAgIGdvdG8gZXJyX2ZyZWVfaGVhcDsNCj4gPiArICAgICAgIH0NCj4gPiArDQo+ID4g
KyAgICAgICByZXQgPSBnZW5fcG9vbF9hZGQocG9vbCwgbWVtLT5iYXNlLCBtZW0tPnNpemUsIC0x
KTsNCj4gPiArICAgICAgIGlmIChyZXQpDQo+ID4gKyAgICAgICAgICAgICAgIGdvdG8gZXJyX2Zy
ZWVfcG9vbDsNCj4gPiArDQo+ID4gKyAgICAgICBoZWFwLT5ub19tYXAgPSBtZW0tPm5vX21hcDsN
Cj4gPiArICAgICAgIGhlYXAtPnByaXZfZGF0YSA9IHBvb2w7DQo+ID4gKyAgICAgICBoZWFwLT5u
YW1lID0gbWVtLT5uYW1lOw0KPiA+ICsgICAgICAgaGVhcC0+b3BzID0gJmxpbmFyb19yZXN0cmlj
dGVkX2hlYXBfb3BzOw0KPiA+ICsNCj4gPiArICAgICAgIHJldCA9IHJlc3RyaWN0ZWRfaGVhcF9h
ZGQoaGVhcCk7DQo+ID4gKyAgICAgICBpZiAocmV0KQ0KPiA+ICsgICAgICAgICAgICAgICBnb3Rv
IGVycl9mcmVlX3Bvb2w7DQo+ID4gKw0KPiA+ICsgICAgICAgcmV0dXJuIDA7DQo+ID4gKw0KPiA+
ICtlcnJfZnJlZV9wb29sOg0KPiA+ICsgICAgICAgZ2VuX3Bvb2xfZGVzdHJveShwb29sKTsNCj4g
PiArZXJyX2ZyZWVfaGVhcDoNCj4gPiArICAgICAgIGtmcmVlKGhlYXApOw0KPiA+ICsNCj4gPiAr
ICAgICAgIHJldHVybiByZXQ7DQo+ID4gK30NCj4gPiArDQo+ID4gK3N0YXRpYyBpbnQgX19pbml0
IHJtZW1fcmVzdHJpY3RlZF9oZWFwX3NldHVwKHN0cnVjdCByZXNlcnZlZF9tZW0gKnJtZW0pDQo+
ID4gK3sNCj4gPiArICAgICAgIHNpemVfdCBsZW4gPSBIRUFQX05BTUVfTEVOOw0KPiA+ICsgICAg
ICAgY29uc3QgY2hhciAqczsNCj4gPiArICAgICAgIGJvb2wgbm9fbWFwOw0KPiA+ICsNCj4gPiAr
ICAgICAgIGlmIChXQVJOX09OQ0UocmVzdHJpY3RlZF9kYXRhX2NvdW50ID49IE1BWF9IRUFQX0NP
VU5ULA0KPiA+ICsgICAgICAgICAgICAgICAgICAgICAiQ2Fubm90IGhhbmRsZSBtb3JlIHRoYW4g
JXUgcmVzdHJpY3RlZCBoZWFwc1xuIiwNCj4gPiArICAgICAgICAgICAgICAgICAgICAgTUFYX0hF
QVBfQ09VTlQpKQ0KPiA+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsNCj4gPiArDQo+
ID4gKyAgICAgICBub19tYXAgPSBvZl9nZXRfZmxhdF9kdF9wcm9wKHJtZW0tPmZkdF9ub2RlLCAi
bm8tbWFwIiwgTlVMTCk7DQo+ID4gKyAgICAgICBzID0gc3RyY2hyKHJtZW0tPm5hbWUsICdAJyk7
DQo+ID4gKyAgICAgICBpZiAocykNCj4gPiArICAgICAgICAgICAgICAgbGVuID0gdW1pbihzIC0g
cm1lbS0+bmFtZSArIDEsIGxlbik7DQo+ID4gKw0KPiA+ICsgICAgICAgcmVzdHJpY3RlZF9kYXRh
W3Jlc3RyaWN0ZWRfZGF0YV9jb3VudF0uYmFzZSA9IHJtZW0tPmJhc2U7DQo+ID4gKyAgICAgICBy
ZXN0cmljdGVkX2RhdGFbcmVzdHJpY3RlZF9kYXRhX2NvdW50XS5zaXplID0gcm1lbS0+c2l6ZTsN
Cj4gPiArICAgICAgIHJlc3RyaWN0ZWRfZGF0YVtyZXN0cmljdGVkX2RhdGFfY291bnRdLm5vX21h
cCA9IG5vX21hcDsNCj4gPiArICAgICAgIHN0cnNjcHkocmVzdHJpY3RlZF9kYXRhW3Jlc3RyaWN0
ZWRfZGF0YV9jb3VudF0ubmFtZSwgcm1lbS0+bmFtZSwgbGVuKTsNCj4gPiArDQo+ID4gKyAgICAg
ICByZXN0cmljdGVkX2RhdGFfY291bnQrKzsNCj4gPiArICAgICAgIHJldHVybiAwOw0KPiA+ICt9
DQo+ID4gKw0KPiA+ICtSRVNFUlZFRE1FTV9PRl9ERUNMQVJFKGxpbmFyb19yZXN0cmljdGVkX2hl
YXAsICJsaW5hcm8scmVzdHJpY3RlZC1oZWFwIiwNCj4gPiArICAgICAgICAgICAgICAgICAgICAg
IHJtZW1fcmVzdHJpY3RlZF9oZWFwX3NldHVwKTsNCj4gPiArDQo+ID4gK3N0YXRpYyBpbnQgbGlu
YXJvX3Jlc3RyaWN0ZWRfaGVhcF9pbml0KHZvaWQpDQo+ID4gK3sNCj4gPiArICAgICAgIHVuc2ln
bmVkIGludCBpOw0KPiA+ICsgICAgICAgaW50IHJldDsNCj4gPiArDQo+ID4gKyAgICAgICBmb3Ig
KGkgPSAwOyBpIDwgcmVzdHJpY3RlZF9kYXRhX2NvdW50OyBpKyspIHsNCj4gPiArICAgICAgICAg
ICAgICAgcmV0ID0gYWRkX2hlYXAoJnJlc3RyaWN0ZWRfZGF0YVtpXSk7DQo+ID4gKyAgICAgICAg
ICAgICAgIGlmIChyZXQpDQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDsN
Cj4gPiArICAgICAgIH0NCj4gPiArICAgICAgIHJldHVybiAwOw0KPiA+ICt9DQo+ID4gKw0KPiA+
ICttb2R1bGVfaW5pdChsaW5hcm9fcmVzdHJpY3RlZF9oZWFwX2luaXQpOw0KPiA+ICtNT0RVTEVf
REVTQ1JJUFRJT04oIkxpbmFybyBSZXN0cmljdGVkIEhlYXAgRHJpdmVyIik7DQo+ID4gK01PRFVM
RV9MSUNFTlNFKCJHUEwiKTsNCj4gPiAtLQ0KPiA+IDIuMzQuMQ0KPiA+DQpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcg
bGlzdCAtLSBsaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKVG8gdW5zdWJzY3JpYmUgc2Vu
ZCBhbiBlbWFpbCB0byBsaW5hcm8tbW0tc2lnLWxlYXZlQGxpc3RzLmxpbmFyby5vcmcK
