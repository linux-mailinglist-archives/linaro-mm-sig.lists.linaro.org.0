Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 70CCE3BE709
	for <lists+linaro-mm-sig@lfdr.de>; Wed,  7 Jul 2021 13:24:10 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 1AA7F668D4
	for <lists+linaro-mm-sig@lfdr.de>; Wed,  7 Jul 2021 11:24:09 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id DCFA266959; Wed,  7 Jul 2021 11:24:08 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id A6C3566884;
	Wed,  7 Jul 2021 11:24:04 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id CF0AF611F5
 for <linaro-mm-sig@lists.linaro.org>; Wed,  7 Jul 2021 11:24:02 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id CCAE76687E; Wed,  7 Jul 2021 11:24:02 +0000 (UTC)
Received: from mail-oi1-f182.google.com (mail-oi1-f182.google.com
 [209.85.167.182])
 by lists.linaro.org (Postfix) with ESMTPS id BB50E6687D
 for <linaro-mm-sig@lists.linaro.org>; Wed,  7 Jul 2021 11:24:00 +0000 (UTC)
Received: by mail-oi1-f182.google.com with SMTP id m3so2943500oig.10
 for <linaro-mm-sig@lists.linaro.org>; Wed, 07 Jul 2021 04:24:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ffwll.ch; s=google;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=Tar4b0LBQyvLoWTlvQ9190P3aM1wRMYSQXQTRc63Uyk=;
 b=GcA4GGzpL1iYPbq2ffdxSuLNqWAiYa38P8MnLGqz2otDQnZTUb44hfanT4lRW4U4cN
 cEwh8sl3MAAWhG0nCTl+z4SXQO3+0k7qf7FY6ctuWTWr5pI+kA1TKXTCTt8EyBnOWKMr
 DAT6DqVstxSvlHSCr5QYUKvdkYSt00ktWbLMM=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=Tar4b0LBQyvLoWTlvQ9190P3aM1wRMYSQXQTRc63Uyk=;
 b=Uqo6qIzLTJE3O1NcIMmrRsEcjf4vFP6QS9WewddAM99G90bzJVE6lw2WP6mE4dMcYn
 CgFWEFN8B5Zo9EyySt+dQteJ9CCx4GGaVNEt7kwyUNO78gdCHr1U61m4v1//ScbtJxLx
 /vPpx3qLkFkvGlPdJvn9SCpm4W7TIje/AwEz2MHekKrowuvlIcFEQN12dSB74BF3uKmo
 hcPIpA3nETUMXo7RKUeXFm0Q7zXYAbE7mPeyAe4uaT5fSc7UgqjdfN+euHTERi/qkXAm
 AVZcx0NYbb4fGPiQMufqog0b7SJHVPxNVR6aY671LJPlttP93eozRvoQKWGHVLq7RbUP
 FVPw==
X-Gm-Message-State: AOAM532r5FEwJndQkQpeHEXsyT5jVYFMDexf9xodCXbw/bW9HAN2pp4p
 QrNGbXoFD7VI7E91pQRQ1Ru7R75Ovfux/hD1qHNAajMuo3A=
X-Google-Smtp-Source: ABdhPJxweqrybBYRw34FpMRYT/9snMLQZn8gtGL0hUzzc3SFy7MgPf7R7GHrArCkOqrllxhpYZxttuIRRzVaQddNdKw=
X-Received: by 2002:aca:5793:: with SMTP id l141mr4439471oib.14.1625657040137; 
 Wed, 07 Jul 2021 04:24:00 -0700 (PDT)
MIME-Version: 1.0
References: <20210702213815.2249499-1-daniel.vetter@ffwll.ch>
 <20210702213815.2249499-3-daniel.vetter@ffwll.ch>
 <f5d59915-af83-4076-c338-d4df68e7d8cd@gmail.com>
In-Reply-To: <f5d59915-af83-4076-c338-d4df68e7d8cd@gmail.com>
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Wed, 7 Jul 2021 13:23:48 +0200
Message-ID: <CAKMK7uE5CVkSj7jYmfk2+JO+br6bM2rwpCcNXt4rRP69oVhFgQ@mail.gmail.com>
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <ckoenig.leichtzumerken@gmail.com>
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: Re: [Linaro-mm-sig] [PATCH v2 02/11] drm/sched: Add dependency
 tracking
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: Andrey Grodzovsky <andrey.grodzovsky@amd.com>,
 Jack Zhang <Jack.Zhang1@amd.com>, David Airlie <airlied@linux.ie>,
 DRI Development <dri-devel@lists.freedesktop.org>,
 Steven Price <steven.price@arm.com>,
 "moderated list:DMA BUFFER SHARING FRAMEWORK" <linaro-mm-sig@lists.linaro.org>,
 Boris Brezillon <boris.brezillon@collabora.com>,
 Alex Deucher <alexander.deucher@amd.com>,
 Daniel Vetter <daniel.vetter@intel.com>, Nirmoy Das <nirmoy.aiemd@gmail.com>,
 Lee Jones <lee.jones@linaro.org>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>,
 Luben Tuikov <luben.tuikov@amd.com>,
 "open list:DMA BUFFER SHARING FRAMEWORK" <linux-media@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

T24gV2VkLCBKdWwgNywgMjAyMSBhdCAxMToyNiBBTSBDaHJpc3RpYW4gS8O2bmlnCjxja29lbmln
LmxlaWNodHp1bWVya2VuQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiBBbSAwMi4wNy4yMSB1bSAyMzoz
OCBzY2hyaWViIERhbmllbCBWZXR0ZXI6Cj4gPiBJbnN0ZWFkIG9mIGp1c3QgYSBjYWxsYmFjayB3
ZSBjYW4ganVzdCBnbHVlIGluIHRoZSBnZW0gaGVscGVycyB0aGF0Cj4gPiBwYW5mcm9zdCwgdjNk
IGFuZCBsaW1hIGN1cnJlbnRseSB1c2UuIFRoZXJlJ3MgcmVhbGx5IG5vdCB0aGF0IG1hbnkKPiA+
IHdheXMgdG8gc2tpbiB0aGlzIGNhdC4KPiA+Cj4gPiBPbiB0aGUgbmFtaW5nIGJpa2VzaGVkOiBU
aGUgaWRlYSBmb3IgdXNpbmcgX2F3YWl0XyB0byBkZW5vdGUgYWRkaW5nCj4gPiBkZXBlbmRlbmNp
ZXMgdG8gYSBqb2IgY29tZXMgZnJvbSBpOTE1LCB3aGVyZSB0aGF0J3MgdXNlZCBxdWl0ZQo+ID4g
ZXh0ZW5zaXZlbHkgYWxsIG92ZXIgdGhlIHBsYWNlLCBpbiBsb3RzIG9mIGRhdGFzdHJ1Y3R1cmVz
Lgo+ID4KPiA+IHYyOiBSZWJhc2VkLgo+ID4KPiA+IFJldmlld2VkLWJ5OiBTdGV2ZW4gUHJpY2Ug
PHN0ZXZlbi5wcmljZUBhcm0uY29tPiAodjEpCj4gPiBTaWduZWQtb2ZmLWJ5OiBEYW5pZWwgVmV0
dGVyIDxkYW5pZWwudmV0dGVyQGludGVsLmNvbT4KPiA+IENjOiBEYXZpZCBBaXJsaWUgPGFpcmxp
ZWRAbGludXguaWU+Cj4gPiBDYzogRGFuaWVsIFZldHRlciA8ZGFuaWVsQGZmd2xsLmNoPgo+ID4g
Q2M6IFN1bWl0IFNlbXdhbCA8c3VtaXQuc2Vtd2FsQGxpbmFyby5vcmc+Cj4gPiBDYzogIkNocmlz
dGlhbiBLw7ZuaWciIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cj4gPiBDYzogQW5kcmV5IEdy
b2R6b3Zza3kgPGFuZHJleS5ncm9kem92c2t5QGFtZC5jb20+Cj4gPiBDYzogTGVlIEpvbmVzIDxs
ZWUuam9uZXNAbGluYXJvLm9yZz4KPiA+IENjOiBOaXJtb3kgRGFzIDxuaXJtb3kuYWllbWRAZ21h
aWwuY29tPgo+ID4gQ2M6IEJvcmlzIEJyZXppbGxvbiA8Ym9yaXMuYnJlemlsbG9uQGNvbGxhYm9y
YS5jb20+Cj4gPiBDYzogTHViZW4gVHVpa292IDxsdWJlbi50dWlrb3ZAYW1kLmNvbT4KPiA+IENj
OiBBbGV4IERldWNoZXIgPGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Cj4gPiBDYzogSmFjayBa
aGFuZyA8SmFjay5aaGFuZzFAYW1kLmNvbT4KPiA+IENjOiBsaW51eC1tZWRpYUB2Z2VyLmtlcm5l
bC5vcmcKPiA+IENjOiBsaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKPiA+IC0tLQo+ID4g
ICBkcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2VudGl0eS5jIHwgIDE4ICsrKy0KPiA+
ICAgZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMgICB8IDEwMyArKysrKysr
KysrKysrKysrKysrKysrKwo+ID4gICBpbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmggICAgICAg
ICAgICAgIHwgIDMxICsrKysrKy0KPiA+ICAgMyBmaWxlcyBjaGFuZ2VkLCAxNDYgaW5zZXJ0aW9u
cygrKSwgNiBkZWxldGlvbnMoLSkKPiA+Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJt
L3NjaGVkdWxlci9zY2hlZF9lbnRpdHkuYyBiL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2No
ZWRfZW50aXR5LmMKPiA+IGluZGV4IGY3MzQ3YzI4NDg4Ni4uYjZmNzJmYWZkNTA0IDEwMDY0NAo+
ID4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9lbnRpdHkuYwo+ID4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9lbnRpdHkuYwo+ID4gQEAgLTIxMSw2
ICsyMTEsMTkgQEAgc3RhdGljIHZvaWQgZHJtX3NjaGVkX2VudGl0eV9raWxsX2pvYnNfY2Ioc3Ry
dWN0IGRtYV9mZW5jZSAqZiwKPiA+ICAgICAgIGpvYi0+c2NoZWQtPm9wcy0+ZnJlZV9qb2Ioam9i
KTsKPiA+ICAgfQo+ID4KPiA+ICtzdGF0aWMgc3RydWN0IGRtYV9mZW5jZSAqCj4gPiArZHJtX3Nj
aGVkX2pvYl9kZXBlbmRlbmN5KHN0cnVjdCBkcm1fc2NoZWRfam9iICpqb2IsCj4gPiArICAgICAg
ICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHkpCj4gPiArewo+
ID4gKyAgICAgaWYgKCF4YV9lbXB0eSgmam9iLT5kZXBlbmRlbmNpZXMpKQo+ID4gKyAgICAgICAg
ICAgICByZXR1cm4geGFfZXJhc2UoJmpvYi0+ZGVwZW5kZW5jaWVzLCBqb2ItPmxhc3RfZGVwZW5k
ZW5jeSsrKTsKPiA+ICsKPiA+ICsgICAgIGlmIChqb2ItPnNjaGVkLT5vcHMtPmRlcGVuZGVuY3kp
Cj4gPiArICAgICAgICAgICAgIHJldHVybiBqb2ItPnNjaGVkLT5vcHMtPmRlcGVuZGVuY3koam9i
LCBlbnRpdHkpOwo+ID4gKwo+ID4gKyAgICAgcmV0dXJuIE5VTEw7Cj4gPiArfQo+ID4gKwo+ID4g
ICAvKioKPiA+ICAgICogZHJtX3NjaGVkX2VudGl0eV9raWxsX2pvYnMgLSBNYWtlIHN1cmUgYWxs
IHJlbWFpbmluZyBqb2JzIGFyZSBraWxsZWQKPiA+ICAgICoKPiA+IEBAIC0yMjksNyArMjQyLDcg
QEAgc3RhdGljIHZvaWQgZHJtX3NjaGVkX2VudGl0eV9raWxsX2pvYnMoc3RydWN0IGRybV9zY2hl
ZF9lbnRpdHkgKmVudGl0eSkKPiA+ICAgICAgICAgICAgICAgc3RydWN0IGRybV9zY2hlZF9mZW5j
ZSAqc19mZW5jZSA9IGpvYi0+c19mZW5jZTsKPiA+Cj4gPiAgICAgICAgICAgICAgIC8qIFdhaXQg
Zm9yIGFsbCBkZXBlbmRlbmNpZXMgdG8gYXZvaWQgZGF0YSBjb3JydXB0aW9ucyAqLwo+ID4gLSAg
ICAgICAgICAgICB3aGlsZSAoKGYgPSBqb2ItPnNjaGVkLT5vcHMtPmRlcGVuZGVuY3koam9iLCBl
bnRpdHkpKSkKPiA+ICsgICAgICAgICAgICAgd2hpbGUgKChmID0gZHJtX3NjaGVkX2pvYl9kZXBl
bmRlbmN5KGpvYiwgZW50aXR5KSkpCj4gPiAgICAgICAgICAgICAgICAgICAgICAgZG1hX2ZlbmNl
X3dhaXQoZiwgZmFsc2UpOwo+ID4KPiA+ICAgICAgICAgICAgICAgZHJtX3NjaGVkX2ZlbmNlX3Nj
aGVkdWxlZChzX2ZlbmNlKTsKPiA+IEBAIC00MTksNyArNDMyLDYgQEAgc3RhdGljIGJvb2wgZHJt
X3NjaGVkX2VudGl0eV9hZGRfZGVwZW5kZW5jeV9jYihzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAq
ZW50aXR5KQo+ID4gICAgKi8KPiA+ICAgc3RydWN0IGRybV9zY2hlZF9qb2IgKmRybV9zY2hlZF9l
bnRpdHlfcG9wX2pvYihzdHJ1Y3QgZHJtX3NjaGVkX2VudGl0eSAqZW50aXR5KQo+ID4gICB7Cj4g
PiAtICAgICBzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKnNjaGVkID0gZW50aXR5LT5ycS0+c2No
ZWQ7Cj4gPiAgICAgICBzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAqc2NoZWRfam9iOwo+ID4KPiA+ICAg
ICAgIHNjaGVkX2pvYiA9IHRvX2RybV9zY2hlZF9qb2Ioc3BzY19xdWV1ZV9wZWVrKCZlbnRpdHkt
PmpvYl9xdWV1ZSkpOwo+ID4gQEAgLTQyNyw3ICs0MzksNyBAQCBzdHJ1Y3QgZHJtX3NjaGVkX2pv
YiAqZHJtX3NjaGVkX2VudGl0eV9wb3Bfam9iKHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRp
dHkpCj4gPiAgICAgICAgICAgICAgIHJldHVybiBOVUxMOwo+ID4KPiA+ICAgICAgIHdoaWxlICgo
ZW50aXR5LT5kZXBlbmRlbmN5ID0KPiA+IC0gICAgICAgICAgICAgICAgICAgICBzY2hlZC0+b3Bz
LT5kZXBlbmRlbmN5KHNjaGVkX2pvYiwgZW50aXR5KSkpIHsKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICBkcm1fc2NoZWRfam9iX2RlcGVuZGVuY3koc2NoZWRfam9iLCBlbnRpdHkpKSkgewo+ID4g
ICAgICAgICAgICAgICB0cmFjZV9kcm1fc2NoZWRfam9iX3dhaXRfZGVwKHNjaGVkX2pvYiwgZW50
aXR5LT5kZXBlbmRlbmN5KTsKPiA+Cj4gPiAgICAgICAgICAgICAgIGlmIChkcm1fc2NoZWRfZW50
aXR5X2FkZF9kZXBlbmRlbmN5X2NiKGVudGl0eSkpCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMgYi9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVy
L3NjaGVkX21haW4uYwo+ID4gaW5kZXggNWU4NGUxNTAwYzMyLi4xMmQ1MzM0ODY1MTggMTAwNjQ0
Cj4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX21haW4uYwo+ID4gKysr
IGIvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMKPiA+IEBAIC02MDUsNiAr
NjA1LDggQEAgaW50IGRybV9zY2hlZF9qb2JfaW5pdChzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAqam9i
LAo+ID4KPiA+ICAgICAgIElOSVRfTElTVF9IRUFEKCZqb2ItPmxpc3QpOwo+ID4KPiA+ICsgICAg
IHhhX2luaXRfZmxhZ3MoJmpvYi0+ZGVwZW5kZW5jaWVzLCBYQV9GTEFHU19BTExPQyk7Cj4gPiAr
Cj4gPiAgICAgICByZXR1cm4gMDsKPiA+ICAgfQo+ID4gICBFWFBPUlRfU1lNQk9MKGRybV9zY2hl
ZF9qb2JfaW5pdCk7Cj4gPiBAQCAtNjI4LDYgKzYzMCw5OCBAQCB2b2lkIGRybV9zY2hlZF9qb2Jf
YXJtKHN0cnVjdCBkcm1fc2NoZWRfam9iICpqb2IpCj4gPiAgIH0KPiA+ICAgRVhQT1JUX1NZTUJP
TChkcm1fc2NoZWRfam9iX2FybSk7Cj4gPgo+ID4gKy8qKgo+ID4gKyAqIGRybV9zY2hlZF9qb2Jf
YXdhaXRfZmVuY2UgLSBhZGRzIHRoZSBmZW5jZSBhcyBhIGpvYiBkZXBlbmRlbmN5Cj4gPiArICog
QGpvYjogc2NoZWR1bGVyIGpvYiB0byBhZGQgdGhlIGRlcGVuZGVuY2llcyB0bwo+ID4gKyAqIEBm
ZW5jZTogdGhlIGRtYV9mZW5jZSB0byBhZGQgdG8gdGhlIGxpc3Qgb2YgZGVwZW5kZW5jaWVzLgo+
ID4gKyAqCj4gPiArICogTm90ZSB0aGF0IEBmZW5jZSBpcyBjb25zdW1lZCBpbiBib3RoIHRoZSBz
dWNjZXNzIGFuZCBlcnJvciBjYXNlcy4KPiA+ICsgKgo+ID4gKyAqIFJldHVybnM6Cj4gPiArICog
MCBvbiBzdWNjZXNzLCBvciBhbiBlcnJvciBvbiBmYWlsaW5nIHRvIGV4cGFuZCB0aGUgYXJyYXku
Cj4gPiArICovCj4gPiAraW50IGRybV9zY2hlZF9qb2JfYXdhaXRfZmVuY2Uoc3RydWN0IGRybV9z
Y2hlZF9qb2IgKmpvYiwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZG1h
X2ZlbmNlICpmZW5jZSkKPgo+IEknbSBzdGlsbCBub3QgdmVyeSBrZWVuIGFib3V0IHRoZSBuYW1p
bmcgImF3YWl0IiwgY2FuJ3Qgd2UganVzdCBjYWxsCj4gdGhpcyBfYWRkX2RlcGVuZGVuY3k/IGFu
ZCBfcmVtb3ZlX2RlcGVuZGVuY3koKSA/CgpJIGZyYW5rbHkgbmV2ZXIgY2FyZSBhYm91dCBiaWtl
c2hlZHMgaWYgdGhlcmUncyBhIGNvbnNlbnN1cywgYXdhaXQKanVzdCBpcyBhIGJpdCBsZXNzIHR5
cGluZy4gU28gd2UncmUgbm90IHJlbW92aW5nIGRlcGVuZGVuY2llcwphbnl3aGVyZSwgYnV0IHRo
ZXJlJ3Mgc3RpbGwgdHdvIGZ1bmN0aW9ucyBoZXJlLCBvbmUgZm9yIGZlbmNlcyBvbmNlCmZvciBp
bXBsaWNpdCBzeW5jIHN0dWZmLiBTbyBJIG5lZWQgdHdvIG5hbWVzLCBhbmQgaWRlYWxseSBzb21l
b25lIGVsc2UKd2hvIGFja3MgdGhlIG5ldyBuYW1pbmcgc2NoZW1lIHNvIEkgZG9uJ3QgaGF2ZSB0
byByZW5hbWUgdHdpY2UgOi0pCgpUaGVuIEknbGwgaGFwcGlseSBvYmxpZ2UuCgpDaGVlcnMsIERh
bmllbAoKPgo+IENocmlzdGlhbi4KPgo+ID4gK3sKPiA+ICsgICAgIHN0cnVjdCBkbWFfZmVuY2Ug
KmVudHJ5Owo+ID4gKyAgICAgdW5zaWduZWQgbG9uZyBpbmRleDsKPiA+ICsgICAgIHUzMiBpZCA9
IDA7Cj4gPiArICAgICBpbnQgcmV0Owo+ID4gKwo+ID4gKyAgICAgaWYgKCFmZW5jZSkKPiA+ICsg
ICAgICAgICAgICAgcmV0dXJuIDA7Cj4gPiArCj4gPiArICAgICAvKiBEZWR1cGxpY2F0ZSBpZiB3
ZSBhbHJlYWR5IGRlcGVuZCBvbiBhIGZlbmNlIGZyb20gdGhlIHNhbWUgY29udGV4dC4KPiA+ICsg
ICAgICAqIFRoaXMgbGV0cyB0aGUgc2l6ZSBvZiB0aGUgYXJyYXkgb2YgZGVwcyBzY2FsZSB3aXRo
IHRoZSBudW1iZXIgb2YKPiA+ICsgICAgICAqIGVuZ2luZXMgaW52b2x2ZWQsIHJhdGhlciB0aGFu
IHRoZSBudW1iZXIgb2YgQk9zLgo+ID4gKyAgICAgICovCj4gPiArICAgICB4YV9mb3JfZWFjaCgm
am9iLT5kZXBlbmRlbmNpZXMsIGluZGV4LCBlbnRyeSkgewo+ID4gKyAgICAgICAgICAgICBpZiAo
ZW50cnktPmNvbnRleHQgIT0gZmVuY2UtPmNvbnRleHQpCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgY29udGludWU7Cj4gPiArCj4gPiArICAgICAgICAgICAgIGlmIChkbWFfZmVuY2VfaXNfbGF0
ZXIoZmVuY2UsIGVudHJ5KSkgewo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRtYV9mZW5jZV9w
dXQoZW50cnkpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHhhX3N0b3JlKCZqb2ItPmRlcGVu
ZGVuY2llcywgaW5kZXgsIGZlbmNlLCBHRlBfS0VSTkVMKTsKPiA+ICsgICAgICAgICAgICAgfSBl
bHNlIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICBkbWFfZmVuY2VfcHV0KGZlbmNlKTsKPiA+
ICsgICAgICAgICAgICAgfQo+ID4gKyAgICAgICAgICAgICByZXR1cm4gMDsKPiA+ICsgICAgIH0K
PiA+ICsKPiA+ICsgICAgIHJldCA9IHhhX2FsbG9jKCZqb2ItPmRlcGVuZGVuY2llcywgJmlkLCBm
ZW5jZSwgeGFfbGltaXRfMzJiLCBHRlBfS0VSTkVMKTsKPiA+ICsgICAgIGlmIChyZXQgIT0gMCkK
PiA+ICsgICAgICAgICAgICAgZG1hX2ZlbmNlX3B1dChmZW5jZSk7Cj4gPiArCj4gPiArICAgICBy
ZXR1cm4gcmV0Owo+ID4gK30KPiA+ICtFWFBPUlRfU1lNQk9MKGRybV9zY2hlZF9qb2JfYXdhaXRf
ZmVuY2UpOwo+ID4gKwo+ID4gKy8qKgo+ID4gKyAqIGRybV9zY2hlZF9qb2JfYXdhaXRfaW1wbGlj
aXQgLSBhZGRzIGltcGxpY2l0IGRlcGVuZGVuY2llcyBhcyBqb2IgZGVwZW5kZW5jaWVzCj4gPiAr
ICogQGpvYjogc2NoZWR1bGVyIGpvYiB0byBhZGQgdGhlIGRlcGVuZGVuY2llcyB0bwo+ID4gKyAq
IEBvYmo6IHRoZSBnZW0gb2JqZWN0IHRvIGFkZCBuZXcgZGVwZW5kZW5jaWVzIGZyb20uCj4gPiAr
ICogQHdyaXRlOiB3aGV0aGVyIHRoZSBqb2IgbWlnaHQgd3JpdGUgdGhlIG9iamVjdCAoc28gd2Ug
bmVlZCB0byBkZXBlbmQgb24KPiA+ICsgKiBzaGFyZWQgZmVuY2VzIGluIHRoZSByZXNlcnZhdGlv
biBvYmplY3QpLgo+ID4gKyAqCj4gPiArICogVGhpcyBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGRy
bV9nZW1fbG9ja19yZXNlcnZhdGlvbnMoKSBvbiB5b3VyIGFycmF5IG9mCj4gPiArICogR0VNIG9i
amVjdHMgdXNlZCBpbiB0aGUgam9iIGJ1dCBiZWZvcmUgdXBkYXRpbmcgdGhlIHJlc2VydmF0aW9u
cyB3aXRoIHlvdXIKPiA+ICsgKiBvd24gZmVuY2VzLgo+ID4gKyAqCj4gPiArICogUmV0dXJuczoK
PiA+ICsgKiAwIG9uIHN1Y2Nlc3MsIG9yIGFuIGVycm9yIG9uIGZhaWxpbmcgdG8gZXhwYW5kIHRo
ZSBhcnJheS4KPiA+ICsgKi8KPiA+ICtpbnQgZHJtX3NjaGVkX2pvYl9hd2FpdF9pbXBsaWNpdChz
dHJ1Y3QgZHJtX3NjaGVkX2pvYiAqam9iLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLAo+ID4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGJvb2wgd3JpdGUpCj4gPiArewo+ID4gKyAgICAgaW50IHJldDsKPiA+ICsgICAg
IHN0cnVjdCBkbWFfZmVuY2UgKipmZW5jZXM7Cj4gPiArICAgICB1bnNpZ25lZCBpbnQgaSwgZmVu
Y2VfY291bnQ7Cj4gPiArCj4gPiArICAgICBpZiAoIXdyaXRlKSB7Cj4gPiArICAgICAgICAgICAg
IHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlID0gZG1hX3Jlc3ZfZ2V0X2V4Y2xfdW5sb2NrZWQob2Jq
LT5yZXN2KTsKPiA+ICsKPiA+ICsgICAgICAgICAgICAgcmV0dXJuIGRybV9zY2hlZF9qb2JfYXdh
aXRfZmVuY2Uoam9iLCBmZW5jZSk7Cj4gPiArICAgICB9Cj4gPiArCj4gPiArICAgICByZXQgPSBk
bWFfcmVzdl9nZXRfZmVuY2VzKG9iai0+cmVzdiwgTlVMTCwgJmZlbmNlX2NvdW50LCAmZmVuY2Vz
KTsKPiA+ICsgICAgIGlmIChyZXQgfHwgIWZlbmNlX2NvdW50KQo+ID4gKyAgICAgICAgICAgICBy
ZXR1cm4gcmV0Owo+ID4gKwo+ID4gKyAgICAgZm9yIChpID0gMDsgaSA8IGZlbmNlX2NvdW50OyBp
KyspIHsKPiA+ICsgICAgICAgICAgICAgcmV0ID0gZHJtX3NjaGVkX2pvYl9hd2FpdF9mZW5jZShq
b2IsIGZlbmNlc1tpXSk7Cj4gPiArICAgICAgICAgICAgIGlmIChyZXQpCj4gPiArICAgICAgICAg
ICAgICAgICAgICAgYnJlYWs7Cj4gPiArICAgICB9Cj4gPiArCj4gPiArICAgICBmb3IgKDsgaSA8
IGZlbmNlX2NvdW50OyBpKyspCj4gPiArICAgICAgICAgICAgIGRtYV9mZW5jZV9wdXQoZmVuY2Vz
W2ldKTsKPiA+ICsgICAgIGtmcmVlKGZlbmNlcyk7Cj4gPiArICAgICByZXR1cm4gcmV0Owo+ID4g
K30KPiA+ICtFWFBPUlRfU1lNQk9MKGRybV9zY2hlZF9qb2JfYXdhaXRfaW1wbGljaXQpOwo+ID4g
Kwo+ID4gKwo+ID4gICAvKioKPiA+ICAgICogZHJtX3NjaGVkX2pvYl9jbGVhbnVwIC0gY2xlYW4g
dXAgc2NoZWR1bGVyIGpvYiByZXNvdXJjZXMKPiA+ICAgICogQGpvYjogc2NoZWR1bGVyIGpvYiB0
byBjbGVhbiB1cAo+ID4gQEAgLTY0Myw2ICs3MzcsOSBAQCBFWFBPUlRfU1lNQk9MKGRybV9zY2hl
ZF9qb2JfYXJtKTsKPiA+ICAgICovCj4gPiAgIHZvaWQgZHJtX3NjaGVkX2pvYl9jbGVhbnVwKHN0
cnVjdCBkcm1fc2NoZWRfam9iICpqb2IpCj4gPiAgIHsKPiA+ICsgICAgIHN0cnVjdCBkbWFfZmVu
Y2UgKmZlbmNlOwo+ID4gKyAgICAgdW5zaWduZWQgbG9uZyBpbmRleDsKPiA+ICsKPiA+ICAgICAg
IGlmICgha3JlZl9yZWFkKCZqb2ItPnNfZmVuY2UtPmZpbmlzaGVkLnJlZmNvdW50KSkgewo+ID4g
ICAgICAgICAgICAgICAvKiBkcm1fc2NoZWRfam9iX2FybSgpIGhhcyBiZWVuIGNhbGxlZCAqLwo+
ID4gICAgICAgICAgICAgICBkbWFfZmVuY2VfcHV0KCZqb2ItPnNfZmVuY2UtPmZpbmlzaGVkKTsK
PiA+IEBAIC02NTIsNiArNzQ5LDEyIEBAIHZvaWQgZHJtX3NjaGVkX2pvYl9jbGVhbnVwKHN0cnVj
dCBkcm1fc2NoZWRfam9iICpqb2IpCj4gPiAgICAgICB9Cj4gPgo+ID4gICAgICAgam9iLT5zX2Zl
bmNlID0gTlVMTDsKPiA+ICsKPiA+ICsgICAgIHhhX2Zvcl9lYWNoKCZqb2ItPmRlcGVuZGVuY2ll
cywgaW5kZXgsIGZlbmNlKSB7Cj4gPiArICAgICAgICAgICAgIGRtYV9mZW5jZV9wdXQoZmVuY2Up
Owo+ID4gKyAgICAgfQo+ID4gKyAgICAgeGFfZGVzdHJveSgmam9iLT5kZXBlbmRlbmNpZXMpOwo+
ID4gKwo+ID4gICB9Cj4gPiAgIEVYUE9SVF9TWU1CT0woZHJtX3NjaGVkX2pvYl9jbGVhbnVwKTsK
PiA+Cj4gPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oIGIvaW5jbHVk
ZS9kcm0vZ3B1X3NjaGVkdWxlci5oCj4gPiBpbmRleCA4M2FmYzNhYThlMmYuLjc0ZmIzMjFkYmM0
NCAxMDA2NDQKPiA+IC0tLSBhL2luY2x1ZGUvZHJtL2dwdV9zY2hlZHVsZXIuaAo+ID4gKysrIGIv
aW5jbHVkZS9kcm0vZ3B1X3NjaGVkdWxlci5oCj4gPiBAQCAtMjcsOSArMjcsMTIgQEAKPiA+ICAg
I2luY2x1ZGUgPGRybS9zcHNjX3F1ZXVlLmg+Cj4gPiAgICNpbmNsdWRlIDxsaW51eC9kbWEtZmVu
Y2UuaD4KPiA+ICAgI2luY2x1ZGUgPGxpbnV4L2NvbXBsZXRpb24uaD4KPiA+ICsjaW5jbHVkZSA8
bGludXgveGFycmF5Lmg+Cj4gPgo+ID4gICAjZGVmaW5lIE1BWF9XQUlUX1NDSEVEX0VOVElUWV9R
X0VNUFRZIG1zZWNzX3RvX2ppZmZpZXMoMTAwMCkKPiA+Cj4gPiArc3RydWN0IGRybV9nZW1fb2Jq
ZWN0Owo+ID4gKwo+ID4gICBzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXI7Cj4gPiAgIHN0cnVjdCBk
cm1fc2NoZWRfcnE7Cj4gPgo+ID4gQEAgLTE5OCw2ICsyMDEsMTYgQEAgc3RydWN0IGRybV9zY2hl
ZF9qb2Igewo+ID4gICAgICAgZW51bSBkcm1fc2NoZWRfcHJpb3JpdHkgICAgICAgICBzX3ByaW9y
aXR5Owo+ID4gICAgICAgc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgICAgICAgICAqZW50aXR5Owo+
ID4gICAgICAgc3RydWN0IGRtYV9mZW5jZV9jYiAgICAgICAgICAgICBjYjsKPiA+ICsgICAgIC8q
Kgo+ID4gKyAgICAgICogQGRlcGVuZGVuY2llczoKPiA+ICsgICAgICAqCj4gPiArICAgICAgKiBD
b250YWlucyB0aGUgZGVwZW5kZW5jaWVzIGFzIHN0cnVjdCBkbWFfZmVuY2UgZm9yIHRoaXMgam9i
LCBzZWUKPiA+ICsgICAgICAqIGRybV9zY2hlZF9qb2JfYXdhaXRfZmVuY2UoKSBhbmQgZHJtX3Nj
aGVkX2pvYl9hd2FpdF9pbXBsaWNpdCgpLgo+ID4gKyAgICAgICovCj4gPiArICAgICBzdHJ1Y3Qg
eGFycmF5ICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczsKPiA+ICsKPiA+ICsgICAgIC8q
KiBAbGFzdF9kZXBlbmRlbmN5OiB0cmFja3MgQGRlcGVuZGVuY2llcyBhcyB0aGV5IHNpZ25hbCAq
Lwo+ID4gKyAgICAgdW5zaWduZWQgbG9uZyAgICAgICAgICAgICAgICAgICBsYXN0X2RlcGVuZGVu
Y3k7Cj4gPiAgIH07Cj4gPgo+ID4gICBzdGF0aWMgaW5saW5lIGJvb2wgZHJtX3NjaGVkX2ludmFs
aWRhdGVfam9iKHN0cnVjdCBkcm1fc2NoZWRfam9iICpzX2pvYiwKPiA+IEBAIC0yMjAsOSArMjMz
LDE0IEBAIGVudW0gZHJtX2dwdV9zY2hlZF9zdGF0IHsKPiA+ICAgICovCj4gPiAgIHN0cnVjdCBk
cm1fc2NoZWRfYmFja2VuZF9vcHMgewo+ID4gICAgICAgLyoqCj4gPiAtICAgICAgICAgKiBAZGVw
ZW5kZW5jeTogQ2FsbGVkIHdoZW4gdGhlIHNjaGVkdWxlciBpcyBjb25zaWRlcmluZyBzY2hlZHVs
aW5nCj4gPiAtICAgICAgICAgKiB0aGlzIGpvYiBuZXh0LCB0byBnZXQgYW5vdGhlciBzdHJ1Y3Qg
ZG1hX2ZlbmNlIGZvciB0aGlzIGpvYiB0bwo+ID4gLSAgICAgICogYmxvY2sgb24uICBPbmNlIGl0
IHJldHVybnMgTlVMTCwgcnVuX2pvYigpIG1heSBiZSBjYWxsZWQuCj4gPiArICAgICAgKiBAZGVw
ZW5kZW5jeToKPiA+ICsgICAgICAqCj4gPiArICAgICAgKiBDYWxsZWQgd2hlbiB0aGUgc2NoZWR1
bGVyIGlzIGNvbnNpZGVyaW5nIHNjaGVkdWxpbmcgdGhpcyBqb2IgbmV4dCwgdG8KPiA+ICsgICAg
ICAqIGdldCBhbm90aGVyIHN0cnVjdCBkbWFfZmVuY2UgZm9yIHRoaXMgam9iIHRvIGJsb2NrIG9u
LiAgT25jZSBpdAo+ID4gKyAgICAgICogcmV0dXJucyBOVUxMLCBydW5fam9iKCkgbWF5IGJlIGNh
bGxlZC4KPiA+ICsgICAgICAqCj4gPiArICAgICAgKiBJZiBhIGRyaXZlciBleGNsdXNpdmVseSB1
c2VzIGRybV9zY2hlZF9qb2JfYXdhaXRfZmVuY2UoKSBhbmQKPiA+ICsgICAgICAqIGRybV9zY2hl
ZF9qb2JfYXdhaXRfaW1wbGljaXQoKSB0aGlzIGNhbiBiZSBvbW1pdHRlZCBhbmQgbGVmdCBhcyBO
VUxMLgo+ID4gICAgICAgICovCj4gPiAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICooKmRlcGVuZGVu
Y3kpKHN0cnVjdCBkcm1fc2NoZWRfam9iICpzY2hlZF9qb2IsCj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICpzX2VudGl0eSk7
Cj4gPiBAQCAtMzQ5LDYgKzM2NywxMyBAQCBpbnQgZHJtX3NjaGVkX2pvYl9pbml0KHN0cnVjdCBk
cm1fc2NoZWRfam9iICpqb2IsCj4gPiAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX3Nj
aGVkX2VudGl0eSAqZW50aXR5LAo+ID4gICAgICAgICAgICAgICAgICAgICAgdm9pZCAqb3duZXIp
Owo+ID4gICB2b2lkIGRybV9zY2hlZF9qb2JfYXJtKHN0cnVjdCBkcm1fc2NoZWRfam9iICpqb2Ip
Owo+ID4gK2ludCBkcm1fc2NoZWRfam9iX2F3YWl0X2ZlbmNlKHN0cnVjdCBkcm1fc2NoZWRfam9i
ICpqb2IsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRtYV9mZW5jZSAq
ZmVuY2UpOwo+ID4gK2ludCBkcm1fc2NoZWRfam9iX2F3YWl0X2ltcGxpY2l0KHN0cnVjdCBkcm1f
c2NoZWRfam9iICpqb2IsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0
IGRybV9nZW1fb2JqZWN0ICpvYmosCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
Ym9vbCB3cml0ZSk7Cj4gPiArCj4gPiArCj4gPiAgIHZvaWQgZHJtX3NjaGVkX2VudGl0eV9tb2Rp
Znlfc2NoZWQoc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eSwKPiA+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXIgKipzY2hlZF9s
aXN0LAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGlu
dCBudW1fc2NoZWRfbGlzdCk7Cj4KCgotLSAKRGFuaWVsIFZldHRlcgpTb2Z0d2FyZSBFbmdpbmVl
ciwgSW50ZWwgQ29ycG9yYXRpb24KaHR0cDovL2Jsb2cuZmZ3bGwuY2gKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGluYXJvLW1tLXNpZyBtYWlsaW5nIGxp
c3QKTGluYXJvLW1tLXNpZ0BsaXN0cy5saW5hcm8ub3JnCmh0dHBzOi8vbGlzdHMubGluYXJvLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2xpbmFyby1tbS1zaWcK
