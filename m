Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 80DB34F7AAF
	for <lists+linaro-mm-sig@lfdr.de>; Thu,  7 Apr 2022 11:00:09 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id B69933EF12
	for <lists+linaro-mm-sig@lfdr.de>; Thu,  7 Apr 2022 09:00:08 +0000 (UTC)
Received: from mail-ej1-f54.google.com (mail-ej1-f54.google.com [209.85.218.54])
	by lists.linaro.org (Postfix) with ESMTPS id 8E0BE402C3
	for <linaro-mm-sig@lists.linaro.org>; Thu,  7 Apr 2022 08:59:53 +0000 (UTC)
Received: by mail-ej1-f54.google.com with SMTP id i27so9401912ejd.9
        for <linaro-mm-sig@lists.linaro.org>; Thu, 07 Apr 2022 01:59:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20210112;
        h=from:to:cc:subject:date:message-id:in-reply-to:references
         :mime-version:content-transfer-encoding;
        bh=C6x/Cgu85YAEsWhUHam4qG6WvwBbchw6Zug4vb1YlGM=;
        b=gC8cLzfnwGLztZ6XD8us40MtdrxOr2vlPLMzQv6mAwKX/GPUJrOthNZ0KaptjOGQZQ
         z4ziDJSfLfCK2MwC8nSmaAsQPhbjqrxOOq8LWwW49vHk/aEIRA642OecrYtVTfxxhr3q
         DhQhDHOIdXopHF5XfVfwg47GqKyanxTT3Q+pSMvKNHe2Ktqqs48CkH1NtRuuI5XXBcMu
         QgcmNiQ4ehmpwaE0pkiAoyrwggU9AOlIF2Efwkb7rm2JGYLVp8H3JPffY73VYs09Bj2S
         tVzm537Xb97PRr62oJn5TC5Kq0GdCtjasQBlWyOXhROsuoFdN9nRJ+lpIl+iCqlNMX0t
         8yWA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
         :references:mime-version:content-transfer-encoding;
        bh=C6x/Cgu85YAEsWhUHam4qG6WvwBbchw6Zug4vb1YlGM=;
        b=A7KdzORGV3vA34C2CxuM6mVcsC9spUPvNhvk5c7R2D7Z5HlACnjKAtCta+o2UvLkVM
         wEVrUcxLSObYuBMiSb3yZkh1vV4zPsFJVhRXPpmyu8P4oMKFD2DTQFbP56xh9BKfd1mj
         lPPmGwEtDk0Ojo766nj7xbBPYldQtgHMVBN3WtIty6oblrjAbWzxzIou8uL/oRWnDdRP
         daUZww47j6bVJporfKNPWduzW0zuMTThkXu9xmo2CU+pjlbt5AqpCVDF5p4JVGICYBwA
         mS/YkEgLphmHpzRMN1rxaf1AqzI/sXDY5BhouKZdybH1UN0ZsuaiP3LhIlSUpRA5C3/I
         WqsA==
X-Gm-Message-State: AOAM531y/gEv7cTBfsIPaCYsO8I9PpPqlylOmFAGBY0m+bpEYtXOHcvL
	vy/E05kWW8hnK1OIZRXUFaQ=
X-Google-Smtp-Source: ABdhPJyOHG3FjdwJp21n/Q6fgpBkohlQoN63WtXPr3xokwpS2xYO8Ui+BjUdcYlwlwcx0tOG8fVyeg==
X-Received: by 2002:a17:906:cccf:b0:6e7:5336:8bd7 with SMTP id ot15-20020a170906cccf00b006e753368bd7mr12482059ejb.583.1649321992428;
        Thu, 07 Apr 2022 01:59:52 -0700 (PDT)
Received: from able.fritz.box (p57b0b9e1.dip0.t-ipconnect.de. [87.176.185.225])
        by smtp.gmail.com with ESMTPSA id h26-20020a170906111a00b006e778bd4fc8sm5186563eja.38.2022.04.07.01.59.51
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Thu, 07 Apr 2022 01:59:51 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
To: daniel.vetter@ffwll.ch,
	dri-devel@lists.freedesktop.org,
	linux-media@vger.kernel.org,
	linaro-mm-sig@lists.linaro.org,
	intel-gfx@lists.freedesktop.org
Date: Thu,  7 Apr 2022 10:59:33 +0200
Message-Id: <20220407085946.744568-3-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20220407085946.744568-1-christian.koenig@amd.com>
References: <20220407085946.744568-1-christian.koenig@amd.com>
MIME-Version: 1.0
Message-ID-Hash: FFSN5Q7EZSWASYLDA3D4MUSQBY2IOUN2
X-Message-ID-Hash: FFSN5Q7EZSWASYLDA3D4MUSQBY2IOUN2
X-MailFrom: ckoenig.leichtzumerken@gmail.com
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
CC: =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH 02/15] dma-buf: specify usage while adding fences to dma_resv obj v7
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/FFSN5Q7EZSWASYLDA3D4MUSQBY2IOUN2/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

SW5zdGVhZCBvZiBkaXN0aW5ndGluZyBiZXR3ZWVuIHNoYXJlZCBhbmQgZXhjbHVzaXZlIGZlbmNl
cyBzcGVjaWZ5DQp0aGUgZmVuY2UgdXNhZ2Ugd2hpbGUgYWRkaW5nIGZlbmNlcy4NCg0KUmV3b3Jr
IGFsbCBkcml2ZXJzIHRvIHVzZSB0aGlzIGludGVyZmFjZSBpbnN0ZWFkIGFuZCBkZXByZWNhdGUg
dGhlIG9sZCBvbmUuDQoNCnYyOiBzb21lIGtlcm5lbGRvYyBjb21tZW50cyBzdWdnZXN0ZWQgYnkg
RGFuaWVsDQp2MzogZml4IGEgbWlzc2luZyBjYXNlIGluIHJhZGVvbg0KdjQ6IHJlYmFzZSBvbiBu
b3V2ZWF1IGNoYW5nZXMsIGZpeCBsb2NrZGVwIGFuZCB0ZW1wb3JhcnkgZGlzYWJsZSB3YXJuaW5n
DQp2NTogbW9yZSBkb2N1bWVudGF0aW9uIHVwZGF0ZXMNCnY2OiBzZXBhcmF0ZSBpbnRlcm5hbCBk
bWFfcmVzdiBjaGFuZ2VzIGZyb20gdGhpcyBwYXRjaCwgYXZvaWRzIHRvDQogICAgZGlzYWJsZSB3
YXJuaW5nIHRlbXBvcmFyeSwgcmViYXNlIG9uIHVwc3RyZWFtIGNoYW5nZXMNCnY3OiBmaXggbWlz
c2VkIGNhc2UgaW4gbGltYSBkcml2ZXIsIG1pbmltaXplIGNoYW5nZXMgdG8gaTkxNV9nZW1fYnVz
eV9pb2N0bA0KDQpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29l
bmlnQGFtZC5jb20+DQotLS0NCiBkcml2ZXJzL2RtYS1idWYvZG1hLXJlc3YuYyAgICAgICAgICAg
ICAgICAgICAgfCAgNDggKysrKysrKy0tDQogZHJpdmVycy9kbWEtYnVmL3N0LWRtYS1yZXN2LmMg
ICAgICAgICAgICAgICAgIHwgMTAxICsrKysrLS0tLS0tLS0tLS0tLQ0KIC4uLi9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5jICB8ICAgMiArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jICAgICAgICB8ICAgNCArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYyAgICB8ICAgNiArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jICB8ICAxMCArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9idXN5LmMgICAgICB8ICAgNiArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9jbGZsdXNoLmMgICB8ICAgMyArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV90dG1fbW92ZS5jICB8ICAgNSArLQ0KIC4uLi9kcm0vaTkxNS9n
ZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21pZ3JhdGUuYyB8ICAgNCArLQ0KIC4uLi9kcm0vaTkxNS9n
ZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX21tYW4uYyAgICB8ICAgMyArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2k5MTVfdm1hLmMgICAgICAgICAgICAgICB8ICAgOCArLQ0KIC4uLi9kcm0vaTkxNS9z
ZWxmdGVzdHMvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jICB8ICAgMyArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9saW1hL2xpbWFfZ2VtLmMgICAgICAgICAgICAgICB8ICAgNyArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9tc20vbXNtX2dlbV9zdWJtaXQuYyAgICAgICAgICB8ICAgNiArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfYm8uYyAgICAgICAgICB8ICAgOSArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfZmVuY2UuYyAgICAgICB8ICAgNCArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9wYW5mcm9zdC9wYW5mcm9zdF9qb2IuYyAgICAgICB8ICAgMiArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9xeGwvcXhsX3JlbGVhc2UuYyAgICAgICAgICAgICB8ICAgMyArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9yYWRlb24vcmFkZW9uX29iamVjdC5jICAgICAgICB8ICAgNiArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2JvLmMgICAgICAgICAgICAgICAgICB8ICAgMiArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2JvX3V0aWwuYyAgICAgICAgICAgICB8ICAgNSArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2V4ZWNidWZfdXRpbC5jICAgICAgICB8ICAgNiArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS92M2QvdjNkX2dlbS5jICAgICAgICAgICAgICAgICB8ICAgNCArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS92YzQvdmM0X2dlbS5jICAgICAgICAgICAgICAgICB8ICAgMiArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS92Z2VtL3ZnZW1fZmVuY2UuYyAgICAgICAgICAgICB8ICAgOSArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS92aXJ0aW8vdmlydGdwdV9nZW0uYyAgICAgICAgICB8ICAgMyArLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS92bXdnZngvdm13Z2Z4X2JvLmMgICAgICAgICAgICB8ICAgMyArLQ0KIGluY2x1ZGUvbGludXgv
ZG1hLWJ1Zi5oICAgICAgICAgICAgICAgICAgICAgICB8ICAxNiArLS0NCiBpbmNsdWRlL2xpbnV4
L2RtYS1yZXN2LmggICAgICAgICAgICAgICAgICAgICAgfCAgMjUgKysrLS0NCiAzMCBmaWxlcyBj
aGFuZ2VkLCAxNDkgaW5zZXJ0aW9ucygrKSwgMTY2IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLXJlc3Yu
Yw0KaW5kZXggMTcyMzdlNmVlMzBjLi41NDNkYWU2NTY2ZDIgMTAwNjQ0DQotLS0gYS9kcml2ZXJz
L2RtYS1idWYvZG1hLXJlc3YuYw0KKysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMNCkBA
IC0yMzQsMTQgKzIzNCwxNCBAQCBFWFBPUlRfU1lNQk9MKGRtYV9yZXN2X3Jlc2VydmVfZmVuY2Vz
KTsNCiANCiAjaWZkZWYgQ09ORklHX0RFQlVHX01VVEVYRVMNCiAvKioNCi0gKiBkbWFfcmVzdl9y
ZXNldF9zaGFyZWRfbWF4IC0gcmVzZXQgc2hhcmVkIGZlbmNlcyBmb3IgZGVidWdnaW5nDQorICog
ZG1hX3Jlc3ZfcmVzZXRfbWF4X2ZlbmNlcyAtIHJlc2V0IHNoYXJlZCBmZW5jZXMgZm9yIGRlYnVn
Z2luZw0KICAqIEBvYmo6IHRoZSBkbWFfcmVzdiBvYmplY3QgdG8gcmVzZXQNCiAgKg0KICAqIFJl
c2V0IHRoZSBudW1iZXIgb2YgcHJlLXJlc2VydmVkIHNoYXJlZCBzbG90cyB0byB0ZXN0IHRoYXQg
ZHJpdmVycyBkbw0KICAqIGNvcnJlY3Qgc2xvdCBhbGxvY2F0aW9uIHVzaW5nIGRtYV9yZXN2X3Jl
c2VydmVfZmVuY2VzKCkuIFNlZSBhbHNvDQogICogJmRtYV9yZXN2X2xpc3Quc2hhcmVkX21heC4N
CiAgKi8NCi12b2lkIGRtYV9yZXN2X3Jlc2V0X3NoYXJlZF9tYXgoc3RydWN0IGRtYV9yZXN2ICpv
YmopDQordm9pZCBkbWFfcmVzdl9yZXNldF9tYXhfZmVuY2VzKHN0cnVjdCBkbWFfcmVzdiAqb2Jq
KQ0KIHsNCiAJc3RydWN0IGRtYV9yZXN2X2xpc3QgKmZlbmNlcyA9IGRtYV9yZXN2X3NoYXJlZF9s
aXN0KG9iaik7DQogDQpAQCAtMjUxLDcgKzI1MSw3IEBAIHZvaWQgZG1hX3Jlc3ZfcmVzZXRfc2hh
cmVkX21heChzdHJ1Y3QgZG1hX3Jlc3YgKm9iaikNCiAJaWYgKGZlbmNlcykNCiAJCWZlbmNlcy0+
c2hhcmVkX21heCA9IGZlbmNlcy0+c2hhcmVkX2NvdW50Ow0KIH0NCi1FWFBPUlRfU1lNQk9MKGRt
YV9yZXN2X3Jlc2V0X3NoYXJlZF9tYXgpOw0KK0VYUE9SVF9TWU1CT0woZG1hX3Jlc3ZfcmVzZXRf
bWF4X2ZlbmNlcyk7DQogI2VuZGlmDQogDQogLyoqDQpAQCAtMjY0LDcgKzI2NCw4IEBAIEVYUE9S
VF9TWU1CT0woZG1hX3Jlc3ZfcmVzZXRfc2hhcmVkX21heCk7DQogICoNCiAgKiBTZWUgYWxzbyAm
ZG1hX3Jlc3YuZmVuY2UgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGUgc2VtYW50aWNzLg0KICAqLw0K
LXZvaWQgZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZShzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgc3Ry
dWN0IGRtYV9mZW5jZSAqZmVuY2UpDQorc3RhdGljIHZvaWQgZG1hX3Jlc3ZfYWRkX3NoYXJlZF9m
ZW5jZShzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwNCisJCQkJICAgICAgc3RydWN0IGRtYV9mZW5jZSAq
ZmVuY2UpDQogew0KIAlzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqZm9iajsNCiAJc3RydWN0IGRtYV9m
ZW5jZSAqb2xkOw0KQEAgLTMwNSwxMyArMzA2LDEzIEBAIHZvaWQgZG1hX3Jlc3ZfYWRkX3NoYXJl
ZF9mZW5jZShzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpDQog
CXdyaXRlX3NlcWNvdW50X2VuZCgmb2JqLT5zZXEpOw0KIAlkbWFfZmVuY2VfcHV0KG9sZCk7DQog
fQ0KLUVYUE9SVF9TWU1CT0woZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZSk7DQogDQogLyoqDQog
ICogZG1hX3Jlc3ZfcmVwbGFjZV9mZW5jZXMgLSByZXBsYWNlIGZlbmNlcyBpbiB0aGUgZG1hX3Jl
c3Ygb2JqDQogICogQG9iajogdGhlIHJlc2VydmF0aW9uIG9iamVjdA0KICAqIEBjb250ZXh0OiB0
aGUgY29udGV4dCBvZiB0aGUgZmVuY2VzIHRvIHJlcGxhY2UNCiAgKiBAcmVwbGFjZW1lbnQ6IHRo
ZSBuZXcgZmVuY2UgdG8gdXNlIGluc3RlYWQNCisgKiBAdXNhZ2U6IGhvdyB0aGUgbmV3IGZlbmNl
IGlzIHVzZWQsIHNlZSBlbnVtIGRtYV9yZXN2X3VzYWdlDQogICoNCiAgKiBSZXBsYWNlIGZlbmNl
cyB3aXRoIGEgc3BlY2lmaWVkIGNvbnRleHQgd2l0aCBhIG5ldyBmZW5jZS4gT25seSB2YWxpZCBp
ZiB0aGUNCiAgKiBvcGVyYXRpb24gcmVwcmVzZW50ZWQgYnkgdGhlIG9yaWdpbmFsIGZlbmNlIGhh
cyBubyBsb25nZXIgYWNjZXNzIHRvIHRoZQ0KQEAgLTMyMSwxMiArMzIyLDE2IEBAIEVYUE9SVF9T
WU1CT0woZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZSk7DQogICogdXBkYXRlIGZlbmNlIHdoaWNo
IG1ha2VzIHRoZSByZXNvdXJjZSBpbmFjY2Vzc2libGUuDQogICovDQogdm9pZCBkbWFfcmVzdl9y
ZXBsYWNlX2ZlbmNlcyhzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgdWludDY0X3QgY29udGV4dCwNCi0J
CQkgICAgIHN0cnVjdCBkbWFfZmVuY2UgKnJlcGxhY2VtZW50KQ0KKwkJCSAgICAgc3RydWN0IGRt
YV9mZW5jZSAqcmVwbGFjZW1lbnQsDQorCQkJICAgICBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdl
KQ0KIHsNCiAJc3RydWN0IGRtYV9yZXN2X2xpc3QgKmxpc3Q7DQogCXN0cnVjdCBkbWFfZmVuY2Ug
Km9sZDsNCiAJdW5zaWduZWQgaW50IGk7DQogDQorCS8qIE9ubHkgcmVhZGVycyBzdXBwb3J0ZWQg
Zm9yIG5vdyAqLw0KKwlXQVJOX09OKHVzYWdlICE9IERNQV9SRVNWX1VTQUdFX1JFQUQpOw0KKw0K
IAlkbWFfcmVzdl9hc3NlcnRfaGVsZChvYmopOw0KIA0KIAl3cml0ZV9zZXFjb3VudF9iZWdpbigm
b2JqLT5zZXEpOw0KQEAgLTM2MCw3ICszNjUsOCBAQCBFWFBPUlRfU1lNQk9MKGRtYV9yZXN2X3Jl
cGxhY2VfZmVuY2VzKTsNCiAgKiBBZGQgYSBmZW5jZSB0byB0aGUgZXhjbHVzaXZlIHNsb3QuIEBv
YmogbXVzdCBiZSBsb2NrZWQgd2l0aCBkbWFfcmVzdl9sb2NrKCkuDQogICogU2VlIGFsc28gJmRt
YV9yZXN2LmZlbmNlX2V4Y2wgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGUgc2VtYW50aWNzLg0KICAq
Lw0KLXZvaWQgZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2Uoc3RydWN0IGRtYV9yZXN2ICpvYmosIHN0
cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQ0KK3N0YXRpYyB2b2lkIGRtYV9yZXN2X2FkZF9leGNsX2Zl
bmNlKHN0cnVjdCBkbWFfcmVzdiAqb2JqLA0KKwkJCQkgICAgc3RydWN0IGRtYV9mZW5jZSAqZmVu
Y2UpDQogew0KIAlzdHJ1Y3QgZG1hX2ZlbmNlICpvbGRfZmVuY2UgPSBkbWFfcmVzdl9leGNsX2Zl
bmNlKG9iaik7DQogDQpAQCAtMzc1LDcgKzM4MSwyNyBAQCB2b2lkIGRtYV9yZXN2X2FkZF9leGNs
X2ZlbmNlKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkNCiAN
CiAJZG1hX2ZlbmNlX3B1dChvbGRfZmVuY2UpOw0KIH0NCi1FWFBPUlRfU1lNQk9MKGRtYV9yZXN2
X2FkZF9leGNsX2ZlbmNlKTsNCisNCisvKioNCisgKiBkbWFfcmVzdl9hZGRfZmVuY2UgLSBBZGQg
YSBmZW5jZSB0byB0aGUgZG1hX3Jlc3Ygb2JqDQorICogQG9iajogdGhlIHJlc2VydmF0aW9uIG9i
amVjdA0KKyAqIEBmZW5jZTogdGhlIGZlbmNlIHRvIGFkZA0KKyAqIEB1c2FnZTogaG93IHRoZSBm
ZW5jZSBpcyB1c2VkLCBzZWUgZW51bSBkbWFfcmVzdl91c2FnZQ0KKyAqDQorICogQWRkIGEgZmVu
Y2UgdG8gYSBzbG90LCBAb2JqIG11c3QgYmUgbG9ja2VkIHdpdGggZG1hX3Jlc3ZfbG9jaygpLCBh
bmQNCisgKiBkbWFfcmVzdl9yZXNlcnZlX2ZlbmNlcygpIGhhcyBiZWVuIGNhbGxlZC4NCisgKg0K
KyAqIFNlZSBhbHNvICZkbWFfcmVzdi5mZW5jZSBmb3IgYSBkaXNjdXNzaW9uIG9mIHRoZSBzZW1h
bnRpY3MuDQorICovDQordm9pZCBkbWFfcmVzdl9hZGRfZmVuY2Uoc3RydWN0IGRtYV9yZXN2ICpv
YmosIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLA0KKwkJCWVudW0gZG1hX3Jlc3ZfdXNhZ2UgdXNh
Z2UpDQorew0KKwlpZiAodXNhZ2UgPT0gRE1BX1JFU1ZfVVNBR0VfV1JJVEUpDQorCQlkbWFfcmVz
dl9hZGRfZXhjbF9mZW5jZShvYmosIGZlbmNlKTsNCisJZWxzZQ0KKwkJZG1hX3Jlc3ZfYWRkX3No
YXJlZF9mZW5jZShvYmosIGZlbmNlKTsNCit9DQorRVhQT1JUX1NZTUJPTChkbWFfcmVzdl9hZGRf
ZmVuY2UpOw0KIA0KIC8qIFJlc3RhcnQgdGhlIGl0ZXJhdG9yIGJ5IGluaXRpYWxpemluZyBhbGwg
dGhlIG5lY2Vzc2FyeSBmaWVsZHMsIGJ1dCBub3QgdGhlDQogICogcmVsYXRpb24gdG8gdGhlIGRt
YV9yZXN2IG9iamVjdC4gKi8NCkBAIC01NzQsNyArNjAwLDcgQEAgaW50IGRtYV9yZXN2X2NvcHlf
ZmVuY2VzKHN0cnVjdCBkbWFfcmVzdiAqZHN0LCBzdHJ1Y3QgZG1hX3Jlc3YgKnNyYykNCiAJCX0N
CiANCiAJCWRtYV9mZW5jZV9nZXQoZik7DQotCQlpZiAoZG1hX3Jlc3ZfaXRlcl9pc19leGNsdXNp
dmUoJmN1cnNvcikpDQorCQlpZiAoZG1hX3Jlc3ZfaXRlcl91c2FnZSgmY3Vyc29yKSA9PSBETUFf
UkVTVl9VU0FHRV9XUklURSkNCiAJCQlleGNsID0gZjsNCiAJCWVsc2UNCiAJCQlSQ1VfSU5JVF9Q
T0lOVEVSKGxpc3QtPnNoYXJlZFtsaXN0LT5zaGFyZWRfY291bnQrK10sIGYpOw0KQEAgLTc3MSwx
MyArNzk3LDEzIEBAIEVYUE9SVF9TWU1CT0xfR1BMKGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWQpOw0K
ICAqLw0KIHZvaWQgZG1hX3Jlc3ZfZGVzY3JpYmUoc3RydWN0IGRtYV9yZXN2ICpvYmosIHN0cnVj
dCBzZXFfZmlsZSAqc2VxKQ0KIHsNCisJc3RhdGljIGNvbnN0IGNoYXIgKnVzYWdlW10gPSB7ICJ3
cml0ZSIsICJyZWFkIiB9Ow0KIAlzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBjdXJzb3I7DQogCXN0cnVj
dCBkbWFfZmVuY2UgKmZlbmNlOw0KIA0KIAlkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29y
LCBvYmosIERNQV9SRVNWX1VTQUdFX1JFQUQsIGZlbmNlKSB7DQogCQlzZXFfcHJpbnRmKHNlcSwg
Ilx0JXMgZmVuY2U6IiwNCi0JCQkgICBkbWFfcmVzdl9pdGVyX2lzX2V4Y2x1c2l2ZSgmY3Vyc29y
KSA/DQotCQkJCSJFeGNsdXNpdmUiIDogIlNoYXJlZCIpOw0KKwkJCSAgIHVzYWdlW2RtYV9yZXN2
X2l0ZXJfdXNhZ2UoJmN1cnNvcildKTsNCiAJCWRtYV9mZW5jZV9kZXNjcmliZShmZW5jZSwgc2Vx
KTsNCiAJfQ0KIH0NCmRpZmYgLS1naXQgYS9kcml2ZXJzL2RtYS1idWYvc3QtZG1hLXJlc3YuYyBi
L2RyaXZlcnMvZG1hLWJ1Zi9zdC1kbWEtcmVzdi5jDQppbmRleCBkMDk3OTgxMDYxYjEuLmQwZjdj
MmJmZDRmMCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9zdC1kbWEtcmVzdi5jDQorKysg
Yi9kcml2ZXJzL2RtYS1idWYvc3QtZG1hLXJlc3YuYw0KQEAgLTU4LDggKzU4LDkgQEAgc3RhdGlj
IGludCBzYW5pdHljaGVjayh2b2lkICphcmcpDQogCXJldHVybiByOw0KIH0NCiANCi1zdGF0aWMg
aW50IHRlc3Rfc2lnbmFsaW5nKHZvaWQgKmFyZywgZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSkN
CitzdGF0aWMgaW50IHRlc3Rfc2lnbmFsaW5nKHZvaWQgKmFyZykNCiB7DQorCWVudW0gZG1hX3Jl
c3ZfdXNhZ2UgdXNhZ2UgPSAodW5zaWduZWQgbG9uZylhcmc7DQogCXN0cnVjdCBkbWFfcmVzdiBy
ZXN2Ow0KIAlzdHJ1Y3QgZG1hX2ZlbmNlICpmOw0KIAlpbnQgcjsNCkBAIC04MSwxMSArODIsNyBA
QCBzdGF0aWMgaW50IHRlc3Rfc2lnbmFsaW5nKHZvaWQgKmFyZywgZW51bSBkbWFfcmVzdl91c2Fn
ZSB1c2FnZSkNCiAJCWdvdG8gZXJyX3VubG9jazsNCiAJfQ0KIA0KLQlpZiAodXNhZ2UgPj0gRE1B
X1JFU1ZfVVNBR0VfUkVBRCkNCi0JCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UoJnJlc3YsIGYp
Ow0KLQllbHNlDQotCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZSgmcmVzdiwgZik7DQotDQorCWRt
YV9yZXN2X2FkZF9mZW5jZSgmcmVzdiwgZiwgdXNhZ2UpOw0KIAlpZiAoZG1hX3Jlc3ZfdGVzdF9z
aWduYWxlZCgmcmVzdiwgdXNhZ2UpKSB7DQogCQlwcl9lcnIoIlJlc3YgdW5leHBlY3RlZGx5IHNp
Z25hbGVkXG4iKTsNCiAJCXIgPSAtRUlOVkFMOw0KQEAgLTEwNSwxOCArMTAyLDkgQEAgc3RhdGlj
IGludCB0ZXN0X3NpZ25hbGluZyh2b2lkICphcmcsIGVudW0gZG1hX3Jlc3ZfdXNhZ2UgdXNhZ2Up
DQogCXJldHVybiByOw0KIH0NCiANCi1zdGF0aWMgaW50IHRlc3RfZXhjbF9zaWduYWxpbmcodm9p
ZCAqYXJnKQ0KLXsNCi0JcmV0dXJuIHRlc3Rfc2lnbmFsaW5nKGFyZywgRE1BX1JFU1ZfVVNBR0Vf
V1JJVEUpOw0KLX0NCi0NCi1zdGF0aWMgaW50IHRlc3Rfc2hhcmVkX3NpZ25hbGluZyh2b2lkICph
cmcpDQotew0KLQlyZXR1cm4gdGVzdF9zaWduYWxpbmcoYXJnLCBETUFfUkVTVl9VU0FHRV9SRUFE
KTsNCi19DQotDQotc3RhdGljIGludCB0ZXN0X2Zvcl9lYWNoKHZvaWQgKmFyZywgZW51bSBkbWFf
cmVzdl91c2FnZSB1c2FnZSkNCitzdGF0aWMgaW50IHRlc3RfZm9yX2VhY2godm9pZCAqYXJnKQ0K
IHsNCisJZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSA9ICh1bnNpZ25lZCBsb25nKWFyZzsNCiAJ
c3RydWN0IGRtYV9yZXN2X2l0ZXIgY3Vyc29yOw0KIAlzdHJ1Y3QgZG1hX2ZlbmNlICpmLCAqZmVu
Y2U7DQogCXN0cnVjdCBkbWFfcmVzdiByZXN2Ow0KQEAgLTEzOSwxMCArMTI3LDcgQEAgc3RhdGlj
IGludCB0ZXN0X2Zvcl9lYWNoKHZvaWQgKmFyZywgZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSkN
CiAJCWdvdG8gZXJyX3VubG9jazsNCiAJfQ0KIA0KLQlpZiAodXNhZ2UgPj0gRE1BX1JFU1ZfVVNB
R0VfUkVBRCkNCi0JCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UoJnJlc3YsIGYpOw0KLQllbHNl
DQotCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZSgmcmVzdiwgZik7DQorCWRtYV9yZXN2X2FkZF9m
ZW5jZSgmcmVzdiwgZiwgdXNhZ2UpOw0KIA0KIAlyID0gLUVOT0VOVDsNCiAJZG1hX3Jlc3ZfZm9y
X2VhY2hfZmVuY2UoJmN1cnNvciwgJnJlc3YsIHVzYWdlLCBmZW5jZSkgew0KQEAgLTE1Niw4ICsx
NDEsNyBAQCBzdGF0aWMgaW50IHRlc3RfZm9yX2VhY2godm9pZCAqYXJnLCBlbnVtIGRtYV9yZXN2
X3VzYWdlIHVzYWdlKQ0KIAkJCXIgPSAtRUlOVkFMOw0KIAkJCWdvdG8gZXJyX3VubG9jazsNCiAJ
CX0NCi0JCWlmIChkbWFfcmVzdl9pdGVyX2lzX2V4Y2x1c2l2ZSgmY3Vyc29yKSAhPQ0KLQkJICAg
ICh1c2FnZSA+PSBETUFfUkVTVl9VU0FHRV9SRUFEKSkgew0KKwkJaWYgKGRtYV9yZXN2X2l0ZXJf
dXNhZ2UoJmN1cnNvcikgIT0gdXNhZ2UpIHsNCiAJCQlwcl9lcnIoIlVuZXhwZWN0ZWQgZmVuY2Ug
dXNhZ2VcbiIpOw0KIAkJCXIgPSAtRUlOVkFMOw0KIAkJCWdvdG8gZXJyX3VubG9jazsNCkBAIC0x
NzcsMTggKzE2MSw5IEBAIHN0YXRpYyBpbnQgdGVzdF9mb3JfZWFjaCh2b2lkICphcmcsIGVudW0g
ZG1hX3Jlc3ZfdXNhZ2UgdXNhZ2UpDQogCXJldHVybiByOw0KIH0NCiANCi1zdGF0aWMgaW50IHRl
c3RfZXhjbF9mb3JfZWFjaCh2b2lkICphcmcpDQotew0KLQlyZXR1cm4gdGVzdF9mb3JfZWFjaChh
cmcsIERNQV9SRVNWX1VTQUdFX1dSSVRFKTsNCi19DQotDQotc3RhdGljIGludCB0ZXN0X3NoYXJl
ZF9mb3JfZWFjaCh2b2lkICphcmcpDQotew0KLQlyZXR1cm4gdGVzdF9mb3JfZWFjaChhcmcsIERN
QV9SRVNWX1VTQUdFX1JFQUQpOw0KLX0NCi0NCi1zdGF0aWMgaW50IHRlc3RfZm9yX2VhY2hfdW5s
b2NrZWQodm9pZCAqYXJnLCBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlKQ0KK3N0YXRpYyBpbnQg
dGVzdF9mb3JfZWFjaF91bmxvY2tlZCh2b2lkICphcmcpDQogew0KKwllbnVtIGRtYV9yZXN2X3Vz
YWdlIHVzYWdlID0gKHVuc2lnbmVkIGxvbmcpYXJnOw0KIAlzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBj
dXJzb3I7DQogCXN0cnVjdCBkbWFfZmVuY2UgKmYsICpmZW5jZTsNCiAJc3RydWN0IGRtYV9yZXN2
IHJlc3Y7DQpAQCAtMjEyLDEwICsxODcsNyBAQCBzdGF0aWMgaW50IHRlc3RfZm9yX2VhY2hfdW5s
b2NrZWQodm9pZCAqYXJnLCBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlKQ0KIAkJZ290byBlcnJf
ZnJlZTsNCiAJfQ0KIA0KLQlpZiAodXNhZ2UgPj0gRE1BX1JFU1ZfVVNBR0VfUkVBRCkNCi0JCWRt
YV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UoJnJlc3YsIGYpOw0KLQllbHNlDQotCQlkbWFfcmVzdl9h
ZGRfZXhjbF9mZW5jZSgmcmVzdiwgZik7DQorCWRtYV9yZXN2X2FkZF9mZW5jZSgmcmVzdiwgZiwg
dXNhZ2UpOw0KIAlkbWFfcmVzdl91bmxvY2soJnJlc3YpOw0KIA0KIAlyID0gLUVOT0VOVDsNCkBA
IC0yMzUsOCArMjA3LDcgQEAgc3RhdGljIGludCB0ZXN0X2Zvcl9lYWNoX3VubG9ja2VkKHZvaWQg
KmFyZywgZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSkNCiAJCQlyID0gLUVJTlZBTDsNCiAJCQln
b3RvIGVycl9pdGVyX2VuZDsNCiAJCX0NCi0JCWlmIChkbWFfcmVzdl9pdGVyX2lzX2V4Y2x1c2l2
ZSgmY3Vyc29yKSAhPQ0KLQkJICAgICh1c2FnZSA+PSBETUFfUkVTVl9VU0FHRV9SRUFEKSkgew0K
KwkJaWYgKGRtYV9yZXN2X2l0ZXJfdXNhZ2UoJmN1cnNvcikgIT0gdXNhZ2UpIHsNCiAJCQlwcl9l
cnIoIlVuZXhwZWN0ZWQgZmVuY2UgdXNhZ2VcbiIpOw0KIAkJCXIgPSAtRUlOVkFMOw0KIAkJCWdv
dG8gZXJyX2l0ZXJfZW5kOw0KQEAgLTI2MiwxOCArMjMzLDkgQEAgc3RhdGljIGludCB0ZXN0X2Zv
cl9lYWNoX3VubG9ja2VkKHZvaWQgKmFyZywgZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSkNCiAJ
cmV0dXJuIHI7DQogfQ0KIA0KLXN0YXRpYyBpbnQgdGVzdF9leGNsX2Zvcl9lYWNoX3VubG9ja2Vk
KHZvaWQgKmFyZykNCi17DQotCXJldHVybiB0ZXN0X2Zvcl9lYWNoX3VubG9ja2VkKGFyZywgRE1B
X1JFU1ZfVVNBR0VfV1JJVEUpOw0KLX0NCi0NCi1zdGF0aWMgaW50IHRlc3Rfc2hhcmVkX2Zvcl9l
YWNoX3VubG9ja2VkKHZvaWQgKmFyZykNCi17DQotCXJldHVybiB0ZXN0X2Zvcl9lYWNoX3VubG9j
a2VkKGFyZywgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7DQotfQ0KLQ0KLXN0YXRpYyBpbnQgdGVzdF9n
ZXRfZmVuY2VzKHZvaWQgKmFyZywgZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSkNCitzdGF0aWMg
aW50IHRlc3RfZ2V0X2ZlbmNlcyh2b2lkICphcmcpDQogew0KKwllbnVtIGRtYV9yZXN2X3VzYWdl
IHVzYWdlID0gKHVuc2lnbmVkIGxvbmcpYXJnOw0KIAlzdHJ1Y3QgZG1hX2ZlbmNlICpmLCAqKmZl
bmNlcyA9IE5VTEw7DQogCXN0cnVjdCBkbWFfcmVzdiByZXN2Ow0KIAlpbnQgciwgaTsNCkBAIC0y
OTYsMTAgKzI1OCw3IEBAIHN0YXRpYyBpbnQgdGVzdF9nZXRfZmVuY2VzKHZvaWQgKmFyZywgZW51
bSBkbWFfcmVzdl91c2FnZSB1c2FnZSkNCiAJCWdvdG8gZXJyX3Jlc3Y7DQogCX0NCiANCi0JaWYg
KHVzYWdlID49IERNQV9SRVNWX1VTQUdFX1JFQUQpDQotCQlkbWFfcmVzdl9hZGRfc2hhcmVkX2Zl
bmNlKCZyZXN2LCBmKTsNCi0JZWxzZQ0KLQkJZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2UoJnJlc3Ys
IGYpOw0KKwlkbWFfcmVzdl9hZGRfZmVuY2UoJnJlc3YsIGYsIHVzYWdlKTsNCiAJZG1hX3Jlc3Zf
dW5sb2NrKCZyZXN2KTsNCiANCiAJciA9IGRtYV9yZXN2X2dldF9mZW5jZXMoJnJlc3YsIHVzYWdl
LCAmaSwgJmZlbmNlcyk7DQpAQCAtMzI0LDMwICsyODMsMjQgQEAgc3RhdGljIGludCB0ZXN0X2dl
dF9mZW5jZXModm9pZCAqYXJnLCBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlKQ0KIAlyZXR1cm4g
cjsNCiB9DQogDQotc3RhdGljIGludCB0ZXN0X2V4Y2xfZ2V0X2ZlbmNlcyh2b2lkICphcmcpDQot
ew0KLQlyZXR1cm4gdGVzdF9nZXRfZmVuY2VzKGFyZywgRE1BX1JFU1ZfVVNBR0VfV1JJVEUpOw0K
LX0NCi0NCi1zdGF0aWMgaW50IHRlc3Rfc2hhcmVkX2dldF9mZW5jZXModm9pZCAqYXJnKQ0KLXsN
Ci0JcmV0dXJuIHRlc3RfZ2V0X2ZlbmNlcyhhcmcsIERNQV9SRVNWX1VTQUdFX1JFQUQpOw0KLX0N
Ci0NCiBpbnQgZG1hX3Jlc3Yodm9pZCkNCiB7DQogCXN0YXRpYyBjb25zdCBzdHJ1Y3Qgc3VidGVz
dCB0ZXN0c1tdID0gew0KIAkJU1VCVEVTVChzYW5pdHljaGVjayksDQotCQlTVUJURVNUKHRlc3Rf
ZXhjbF9zaWduYWxpbmcpLA0KLQkJU1VCVEVTVCh0ZXN0X3NoYXJlZF9zaWduYWxpbmcpLA0KLQkJ
U1VCVEVTVCh0ZXN0X2V4Y2xfZm9yX2VhY2gpLA0KLQkJU1VCVEVTVCh0ZXN0X3NoYXJlZF9mb3Jf
ZWFjaCksDQotCQlTVUJURVNUKHRlc3RfZXhjbF9mb3JfZWFjaF91bmxvY2tlZCksDQotCQlTVUJU
RVNUKHRlc3Rfc2hhcmVkX2Zvcl9lYWNoX3VubG9ja2VkKSwNCi0JCVNVQlRFU1QodGVzdF9leGNs
X2dldF9mZW5jZXMpLA0KLQkJU1VCVEVTVCh0ZXN0X3NoYXJlZF9nZXRfZmVuY2VzKSwNCisJCVNV
QlRFU1QodGVzdF9zaWduYWxpbmcpLA0KKwkJU1VCVEVTVCh0ZXN0X2Zvcl9lYWNoKSwNCisJCVNV
QlRFU1QodGVzdF9mb3JfZWFjaF91bmxvY2tlZCksDQorCQlTVUJURVNUKHRlc3RfZ2V0X2ZlbmNl
cyksDQogCX07DQorCWVudW0gZG1hX3Jlc3ZfdXNhZ2UgdXNhZ2U7DQorCWludCByOw0KIA0KIAlz
cGluX2xvY2tfaW5pdCgmZmVuY2VfbG9jayk7DQotCXJldHVybiBzdWJ0ZXN0cyh0ZXN0cywgTlVM
TCk7DQorCWZvciAodXNhZ2UgPSBETUFfUkVTVl9VU0FHRV9XUklURTsgdXNhZ2UgPD0gRE1BX1JF
U1ZfVVNBR0VfUkVBRDsNCisJICAgICArK3VzYWdlKSB7DQorCQlyID0gc3VidGVzdHModGVzdHMs
ICh2b2lkICopKHVuc2lnbmVkIGxvbmcpdXNhZ2UpOw0KKwkJaWYgKHIpDQorCQkJcmV0dXJuIHI7
DQorCX0NCisJcmV0dXJuIDA7DQogfQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYw0KaW5kZXggOThiMTczNmJiMjIxLi41MDMxZTI2ZTY3MTYg
MTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dw
dXZtLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1
dm0uYw0KQEAgLTI2Myw3ICsyNjMsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV9hbWRrZmRfcmVtb3Zl
X2V2aWN0aW9uX2ZlbmNlKHN0cnVjdCBhbWRncHVfYm8gKmJvLA0KIAkgKi8NCiAJcmVwbGFjZW1l
bnQgPSBkbWFfZmVuY2VfZ2V0X3N0dWIoKTsNCiAJZG1hX3Jlc3ZfcmVwbGFjZV9mZW5jZXMoYm8t
PnRiby5iYXNlLnJlc3YsIGVmLT5iYXNlLmNvbnRleHQsDQotCQkJCXJlcGxhY2VtZW50KTsNCisJ
CQkJcmVwbGFjZW1lbnQsIERNQV9SRVNWX1VTQUdFX1JFQUQpOw0KIAlkbWFfZmVuY2VfcHV0KHJl
cGxhY2VtZW50KTsNCiAJcmV0dXJuIDA7DQogfQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2NzLmMNCmluZGV4IDQxM2YzMmMzZmQ2My4uNzZmZDkxNjQyNGQ2IDEwMDY0NA0KLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzLmMNCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9jcy5jDQpAQCAtNTUsOCArNTUsOCBAQCBzdGF0aWMgaW50
IGFtZGdwdV9jc191c2VyX2ZlbmNlX2NodW5rKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLA0K
IAlibyA9IGFtZGdwdV9ib19yZWYoZ2VtX3RvX2FtZGdwdV9ibyhnb2JqKSk7DQogCXAtPnVmX2Vu
dHJ5LnByaW9yaXR5ID0gMDsNCiAJcC0+dWZfZW50cnkudHYuYm8gPSAmYm8tPnRibzsNCi0JLyog
T25lIGZvciBUVE0gYW5kIG9uZSBmb3IgdGhlIENTIGpvYiAqLw0KLQlwLT51Zl9lbnRyeS50di5u
dW1fc2hhcmVkID0gMjsNCisJLyogT25lIGZvciBUVE0gYW5kIHR3byBmb3IgdGhlIENTIGpvYiAq
Lw0KKwlwLT51Zl9lbnRyeS50di5udW1fc2hhcmVkID0gMzsNCiANCiAJZHJtX2dlbV9vYmplY3Rf
cHV0KGdvYmopOw0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9vYmplY3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3Qu
Yw0KaW5kZXggYTdmMzlmOGFiN2JlLi5hM2NkZjhhMjQzNzcgMTAwNjQ0DQotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMNCisrKyBiL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYw0KQEAgLTEzOTcsMTAgKzEzOTcsOCBAQCB2b2lk
IGFtZGdwdV9ib19mZW5jZShzdHJ1Y3QgYW1kZ3B1X2JvICpibywgc3RydWN0IGRtYV9mZW5jZSAq
ZmVuY2UsDQogCQlyZXR1cm47DQogCX0NCiANCi0JaWYgKHNoYXJlZCkNCi0JCWRtYV9yZXN2X2Fk
ZF9zaGFyZWRfZmVuY2UocmVzdiwgZmVuY2UpOw0KLQllbHNlDQotCQlkbWFfcmVzdl9hZGRfZXhj
bF9mZW5jZShyZXN2LCBmZW5jZSk7DQorCWRtYV9yZXN2X2FkZF9mZW5jZShyZXN2LCBmZW5jZSwg
c2hhcmVkID8gRE1BX1JFU1ZfVVNBR0VfUkVBRCA6DQorCQkJICAgRE1BX1JFU1ZfVVNBR0VfV1JJ
VEUpOw0KIH0NCiANCiAvKioNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9l
dG5hdml2X2dlbV9zdWJtaXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2Vt
X3N1Ym1pdC5jDQppbmRleCA1M2Y3Yzc4NjI4YTQuLjk4YmI1YzkyMzlkZSAxMDA2NDQNCi0tLSBh
L2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jDQorKysgYi9kcml2
ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9zdWJtaXQuYw0KQEAgLTIwMiwxNCArMjAy
LDEwIEBAIHN0YXRpYyB2b2lkIHN1Ym1pdF9hdHRhY2hfb2JqZWN0X2ZlbmNlcyhzdHJ1Y3QgZXRu
YXZpdl9nZW1fc3VibWl0ICpzdWJtaXQpDQogDQogCWZvciAoaSA9IDA7IGkgPCBzdWJtaXQtPm5y
X2JvczsgaSsrKSB7DQogCQlzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiA9ICZzdWJtaXQtPmJv
c1tpXS5vYmotPmJhc2U7DQorCQlib29sIHdyaXRlID0gc3VibWl0LT5ib3NbaV0uZmxhZ3MgJiBF
VE5BX1NVQk1JVF9CT19XUklURTsNCiANCi0JCWlmIChzdWJtaXQtPmJvc1tpXS5mbGFncyAmIEVU
TkFfU1VCTUlUX0JPX1dSSVRFKQ0KLQkJCWRtYV9yZXN2X2FkZF9leGNsX2ZlbmNlKG9iai0+cmVz
diwNCi0JCQkJCQkJICBzdWJtaXQtPm91dF9mZW5jZSk7DQotCQllbHNlDQotCQkJZG1hX3Jlc3Zf
YWRkX3NoYXJlZF9mZW5jZShvYmotPnJlc3YsDQotCQkJCQkJCSAgICBzdWJtaXQtPm91dF9mZW5j
ZSk7DQotDQorCQlkbWFfcmVzdl9hZGRfZmVuY2Uob2JqLT5yZXN2LCBzdWJtaXQtPm91dF9mZW5j
ZSwgd3JpdGUgPw0KKwkJCQkgICBETUFfUkVTVl9VU0FHRV9XUklURSA6IERNQV9SRVNWX1VTQUdF
X1JFQUQpOw0KIAkJc3VibWl0X3VubG9ja19vYmplY3Qoc3VibWl0LCBpKTsNCiAJfQ0KIH0NCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fYnVzeS5jIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2J1c3kuYw0KaW5kZXggMTRhMWMwYWQ4YzNj
Li5kZGRhNDY4MjQxZWYgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkx
NV9nZW1fYnVzeS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fYnVz
eS5jDQpAQCAtMTQ4LDExICsxNDgsMTEgQEAgaTkxNV9nZW1fYnVzeV9pb2N0bChzdHJ1Y3QgZHJt
X2RldmljZSAqZGV2LCB2b2lkICpkYXRhLA0KIAkJaWYgKGRtYV9yZXN2X2l0ZXJfaXNfcmVzdGFy
dGVkKCZjdXJzb3IpKQ0KIAkJCWFyZ3MtPmJ1c3kgPSAwOw0KIA0KLQkJaWYgKGRtYV9yZXN2X2l0
ZXJfaXNfZXhjbHVzaXZlKCZjdXJzb3IpKQ0KLQkJCS8qIFRyYW5zbGF0ZSB0aGUgZXhjbHVzaXZl
IGZlbmNlIHRvIHRoZSBSRUFEICphbmQqIFdSSVRFIGVuZ2luZSAqLw0KKwkJaWYgKGRtYV9yZXN2
X2l0ZXJfdXNhZ2UoJmN1cnNvcikgPD0gRE1BX1JFU1ZfVVNBR0VfV1JJVEUpDQorCQkJLyogVHJh
bnNsYXRlIHRoZSB3cml0ZSBmZW5jZXMgdG8gdGhlIFJFQUQgKmFuZCogV1JJVEUgZW5naW5lICov
DQogCQkJYXJncy0+YnVzeSB8PSBidXN5X2NoZWNrX3dyaXRlcihmZW5jZSk7DQogCQllbHNlDQot
CQkJLyogVHJhbnNsYXRlIHNoYXJlZCBmZW5jZXMgdG8gUkVBRCBzZXQgb2YgZW5naW5lcyAqLw0K
KwkJCS8qIFRyYW5zbGF0ZSByZWFkIGZlbmNlcyB0byBSRUFEIHNldCBvZiBlbmdpbmVzICovDQog
CQkJYXJncy0+YnVzeSB8PSBidXN5X2NoZWNrX3JlYWRlcihmZW5jZSk7DQogCX0NCiAJZG1hX3Jl
c3ZfaXRlcl9lbmQoJmN1cnNvcik7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL2k5MTVfZ2VtX2NsZmx1c2guYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9jbGZsdXNoLmMNCmluZGV4IDFmZDBjYzljYTIxMy4uZjVmMmI4YjExNWVhIDEwMDY0NA0KLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NsZmx1c2guYw0KKysrIGIvZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2NsZmx1c2guYw0KQEAgLTExNiw3ICsxMTYs
OCBAQCBib29sIGk5MTVfZ2VtX2NsZmx1c2hfb2JqZWN0KHN0cnVjdCBkcm1faTkxNV9nZW1fb2Jq
ZWN0ICpvYmosDQogCQkJCQkJb2JqLT5iYXNlLnJlc3YsIE5VTEwsIHRydWUsDQogCQkJCQkJaTkx
NV9mZW5jZV90aW1lb3V0KGk5MTUpLA0KIAkJCQkJCUk5MTVfRkVOQ0VfR0ZQKTsNCi0JCWRtYV9y
ZXN2X2FkZF9leGNsX2ZlbmNlKG9iai0+YmFzZS5yZXN2LCAmY2xmbHVzaC0+YmFzZS5kbWEpOw0K
KwkJZG1hX3Jlc3ZfYWRkX2ZlbmNlKG9iai0+YmFzZS5yZXN2LCAmY2xmbHVzaC0+YmFzZS5kbWEs
DQorCQkJCSAgIERNQV9SRVNWX1VTQUdFX1dSSVRFKTsNCiAJCWRtYV9mZW5jZV93b3JrX2NvbW1p
dCgmY2xmbHVzaC0+YmFzZSk7DQogCQkvKg0KIAkJICogV2UgbXVzdCBoYXZlIHN1Y2Nlc3NmdWxs
eSBwb3B1bGF0ZWQgdGhlIHBhZ2VzKHNpbmNlIHdlIGFyZQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90dG1fbW92ZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX3R0bV9tb3ZlLmMNCmluZGV4IDQzMmFjNzRmZjIyNS4uNDM4YjhhOTVi
M2QxIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3R0bV9t
b3ZlLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV90dG1fbW92ZS5j
DQpAQCAtNjM3LDkgKzYzNyw4IEBAIGludCBpOTE1X2dlbV9vYmpfY29weV90dG0oc3RydWN0IGRy
bV9pOTE1X2dlbV9vYmplY3QgKmRzdCwNCiAJaWYgKElTX0VSUl9PUl9OVUxMKGNvcHlfZmVuY2Up
KQ0KIAkJcmV0dXJuIFBUUl9FUlJfT1JfWkVSTyhjb3B5X2ZlbmNlKTsNCiANCi0JZG1hX3Jlc3Zf
YWRkX2V4Y2xfZmVuY2UoZHN0X2JvLT5iYXNlLnJlc3YsIGNvcHlfZmVuY2UpOw0KLQlkbWFfcmVz
dl9hZGRfc2hhcmVkX2ZlbmNlKHNyY19iby0+YmFzZS5yZXN2LCBjb3B5X2ZlbmNlKTsNCi0NCisJ
ZG1hX3Jlc3ZfYWRkX2ZlbmNlKGRzdF9iby0+YmFzZS5yZXN2LCBjb3B5X2ZlbmNlLCBETUFfUkVT
Vl9VU0FHRV9XUklURSk7DQorCWRtYV9yZXN2X2FkZF9mZW5jZShzcmNfYm8tPmJhc2UucmVzdiwg
Y29weV9mZW5jZSwgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7DQogCWRtYV9mZW5jZV9wdXQoY29weV9m
ZW5jZSk7DQogDQogCXJldHVybiAwOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbWlncmF0ZS5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUv
Z2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9taWdyYXRlLmMNCmluZGV4IDBlNTJlYjg3Y2Q1NS4uNDk5
N2VkMThiNmU0IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0
cy9pOTE1X2dlbV9taWdyYXRlLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxm
dGVzdHMvaTkxNV9nZW1fbWlncmF0ZS5jDQpAQCAtMjE4LDggKzIxOCw4IEBAIHN0YXRpYyBpbnQg
X19pZ3RfbG1lbV9wYWdlc19taWdyYXRlKHN0cnVjdCBpbnRlbF9ndCAqZ3QsDQogCQlpZiAocnEp
IHsNCiAJCQllcnIgPSBkbWFfcmVzdl9yZXNlcnZlX2ZlbmNlcyhvYmotPmJhc2UucmVzdiwgMSk7
DQogCQkJaWYgKCFlcnIpDQotCQkJCWRtYV9yZXN2X2FkZF9leGNsX2ZlbmNlKG9iai0+YmFzZS5y
ZXN2LA0KLQkJCQkJCQkmcnEtPmZlbmNlKTsNCisJCQkJZG1hX3Jlc3ZfYWRkX2ZlbmNlKG9iai0+
YmFzZS5yZXN2LCAmcnEtPmZlbmNlLA0KKwkJCQkJCSAgIERNQV9SRVNWX1VTQUdFX1dSSVRFKTsN
CiAJCQlpOTE1X2dlbV9vYmplY3Rfc2V0X21vdmluZ19mZW5jZShvYmosICZycS0+ZmVuY2UpOw0K
IAkJCWk5MTVfcmVxdWVzdF9wdXQocnEpOw0KIAkJfQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fbW1hbi5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9tbWFuLmMNCmluZGV4IGExMzJlMjQxYzNlZS4u
M2E2ZTNmNmQyMzlmIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0
ZXN0cy9pOTE1X2dlbV9tbWFuLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxm
dGVzdHMvaTkxNV9nZW1fbW1hbi5jDQpAQCAtMTIyMCw3ICsxMjIwLDggQEAgc3RhdGljIGludCBf
X2lndF9tbWFwX21pZ3JhdGUoc3RydWN0IGludGVsX21lbW9yeV9yZWdpb24gKipwbGFjZW1lbnRz
LA0KIAkJCQkJICBleHBhbmQzMihQT0lTT05fSU5VU0UpLCAmcnEpOw0KIAlpOTE1X2dlbV9vYmpl
Y3RfdW5waW5fcGFnZXMob2JqKTsNCiAJaWYgKHJxKSB7DQotCQlkbWFfcmVzdl9hZGRfZXhjbF9m
ZW5jZShvYmotPmJhc2UucmVzdiwgJnJxLT5mZW5jZSk7DQorCQlkbWFfcmVzdl9hZGRfZmVuY2Uo
b2JqLT5iYXNlLnJlc3YsICZycS0+ZmVuY2UsDQorCQkJCSAgIERNQV9SRVNWX1VTQUdFX1dSSVRF
KTsNCiAJCWk5MTVfZ2VtX29iamVjdF9zZXRfbW92aW5nX2ZlbmNlKG9iaiwgJnJxLT5mZW5jZSk7
DQogCQlpOTE1X3JlcXVlc3RfcHV0KHJxKTsNCiAJfQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfdm1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jDQpp
bmRleCBiYWUzNDIzZjU4ZTguLjUyNDQ3N2Q4OTM5ZSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2k5MTVfdm1hLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1h
LmMNCkBAIC0xODI2LDcgKzE4MjYsOCBAQCBpbnQgX2k5MTVfdm1hX21vdmVfdG9fYWN0aXZlKHN0
cnVjdCBpOTE1X3ZtYSAqdm1hLA0KIAkJfQ0KIA0KIAkJaWYgKGZlbmNlKSB7DQotCQkJZG1hX3Jl
c3ZfYWRkX2V4Y2xfZmVuY2Uodm1hLT5vYmotPmJhc2UucmVzdiwgZmVuY2UpOw0KKwkJCWRtYV9y
ZXN2X2FkZF9mZW5jZSh2bWEtPm9iai0+YmFzZS5yZXN2LCBmZW5jZSwNCisJCQkJCSAgIERNQV9S
RVNWX1VTQUdFX1dSSVRFKTsNCiAJCQlvYmotPndyaXRlX2RvbWFpbiA9IEk5MTVfR0VNX0RPTUFJ
Tl9SRU5ERVI7DQogCQkJb2JqLT5yZWFkX2RvbWFpbnMgPSAwOw0KIAkJfQ0KQEAgLTE4MzgsNyAr
MTgzOSw4IEBAIGludCBfaTkxNV92bWFfbW92ZV90b19hY3RpdmUoc3RydWN0IGk5MTVfdm1hICp2
bWEsDQogCQl9DQogDQogCQlpZiAoZmVuY2UpIHsNCi0JCQlkbWFfcmVzdl9hZGRfc2hhcmVkX2Zl
bmNlKHZtYS0+b2JqLT5iYXNlLnJlc3YsIGZlbmNlKTsNCisJCQlkbWFfcmVzdl9hZGRfZmVuY2Uo
dm1hLT5vYmotPmJhc2UucmVzdiwgZmVuY2UsDQorCQkJCQkgICBETUFfUkVTVl9VU0FHRV9SRUFE
KTsNCiAJCQlvYmotPndyaXRlX2RvbWFpbiA9IDA7DQogCQl9DQogCX0NCkBAIC0yMDc4LDcgKzIw
ODAsNyBAQCBpbnQgaTkxNV92bWFfdW5iaW5kX2FzeW5jKHN0cnVjdCBpOTE1X3ZtYSAqdm1hLCBi
b29sIHRyeWxvY2tfdm0pDQogCQlnb3RvIG91dF9ycG07DQogCX0NCiANCi0JZG1hX3Jlc3ZfYWRk
X3NoYXJlZF9mZW5jZShvYmotPmJhc2UucmVzdiwgZmVuY2UpOw0KKwlkbWFfcmVzdl9hZGRfZmVu
Y2Uob2JqLT5iYXNlLnJlc3YsIGZlbmNlLCBETUFfUkVTVl9VU0FHRV9SRUFEKTsNCiAJZG1hX2Zl
bmNlX3B1dChmZW5jZSk7DQogDQogb3V0X3JwbToNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9zZWxmdGVzdHMvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jIGIvZHJpdmVycy9ncHUvZHJt
L2k5MTUvc2VsZnRlc3RzL2ludGVsX21lbW9yeV9yZWdpb24uYw0KaW5kZXggNjExNGUwMTMwOTJi
Li43M2ViNTNlZGI4ZGUgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxmdGVz
dHMvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9zZWxm
dGVzdHMvaW50ZWxfbWVtb3J5X3JlZ2lvbi5jDQpAQCAtMTA1Niw3ICsxMDU2LDggQEAgc3RhdGlj
IGludCBpZ3RfbG1lbV93cml0ZV9jcHUodm9pZCAqYXJnKQ0KIAkJCQkJICBvYmotPm1tLnBhZ2Vz
LT5zZ2wsIEk5MTVfQ0FDSEVfTk9ORSwNCiAJCQkJCSAgdHJ1ZSwgMHhkZWFkYmVhZiwgJnJxKTsN
CiAJaWYgKHJxKSB7DQotCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShvYmotPmJhc2UucmVzdiwg
JnJxLT5mZW5jZSk7DQorCQlkbWFfcmVzdl9hZGRfZmVuY2Uob2JqLT5iYXNlLnJlc3YsICZycS0+
ZmVuY2UsDQorCQkJCSAgIERNQV9SRVNWX1VTQUdFX1dSSVRFKTsNCiAJCWk5MTVfcmVxdWVzdF9w
dXQocnEpOw0KIAl9DQogDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2xpbWEvbGltYV9n
ZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9saW1hL2xpbWFfZ2VtLmMNCmluZGV4IGUwYTExZWUwZTg2
ZC4uMGYxY2EwYjBkYjQ5IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2xpbWEvbGltYV9n
ZW0uYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2xpbWEvbGltYV9nZW0uYw0KQEAgLTM2NCwxMCAr
MzY0LDkgQEAgaW50IGxpbWFfZ2VtX3N1Ym1pdChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsIHN0cnVj
dCBsaW1hX3N1Ym1pdCAqc3VibWl0KQ0KIAlmZW5jZSA9IGxpbWFfc2NoZWRfY29udGV4dF9xdWV1
ZV90YXNrKHN1Ym1pdC0+dGFzayk7DQogDQogCWZvciAoaSA9IDA7IGkgPCBzdWJtaXQtPm5yX2Jv
czsgaSsrKSB7DQotCQlpZiAoc3VibWl0LT5ib3NbaV0uZmxhZ3MgJiBMSU1BX1NVQk1JVF9CT19X
UklURSkNCi0JCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShsaW1hX2JvX3Jlc3YoYm9zW2ldKSwg
ZmVuY2UpOw0KLQkJZWxzZQ0KLQkJCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UobGltYV9ib19y
ZXN2KGJvc1tpXSksIGZlbmNlKTsNCisJCWRtYV9yZXN2X2FkZF9mZW5jZShsaW1hX2JvX3Jlc3Yo
Ym9zW2ldKSwgZmVuY2UsDQorCQkJCSAgIHN1Ym1pdC0+Ym9zW2ldLmZsYWdzICYgTElNQV9TVUJN
SVRfQk9fV1JJVEUgPw0KKwkJCQkgICBETUFfUkVTVl9VU0FHRV9XUklURSA6IERNQV9SRVNWX1VT
QUdFX1JFQUQpOw0KIAl9DQogDQogCWRybV9nZW1fdW5sb2NrX3Jlc2VydmF0aW9ucygoc3RydWN0
IGRybV9nZW1fb2JqZWN0ICoqKWJvcywNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vbXNt
L21zbV9nZW1fc3VibWl0LmMgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9nZW1fc3VibWl0LmMN
CmluZGV4IDMxNjRkYjhiZTg5My4uOGQxZWVmOTE0YmE4IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9n
cHUvZHJtL21zbS9tc21fZ2VtX3N1Ym1pdC5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vbXNtL21z
bV9nZW1fc3VibWl0LmMNCkBAIC0zOTUsOSArMzk1LDExIEBAIHN0YXRpYyB2b2lkIHN1Ym1pdF9h
dHRhY2hfb2JqZWN0X2ZlbmNlcyhzdHJ1Y3QgbXNtX2dlbV9zdWJtaXQgKnN1Ym1pdCkNCiAJCXN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqID0gJnN1Ym1pdC0+Ym9zW2ldLm9iai0+YmFzZTsNCiAN
CiAJCWlmIChzdWJtaXQtPmJvc1tpXS5mbGFncyAmIE1TTV9TVUJNSVRfQk9fV1JJVEUpDQotCQkJ
ZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2Uob2JqLT5yZXN2LCBzdWJtaXQtPnVzZXJfZmVuY2UpOw0K
KwkJCWRtYV9yZXN2X2FkZF9mZW5jZShvYmotPnJlc3YsIHN1Ym1pdC0+dXNlcl9mZW5jZSwNCisJ
CQkJCSAgIERNQV9SRVNWX1VTQUdFX1dSSVRFKTsNCiAJCWVsc2UgaWYgKHN1Ym1pdC0+Ym9zW2ld
LmZsYWdzICYgTVNNX1NVQk1JVF9CT19SRUFEKQ0KLQkJCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVu
Y2Uob2JqLT5yZXN2LCBzdWJtaXQtPnVzZXJfZmVuY2UpOw0KKwkJCWRtYV9yZXN2X2FkZF9mZW5j
ZShvYmotPnJlc3YsIHN1Ym1pdC0+dXNlcl9mZW5jZSwNCisJCQkJCSAgIERNQV9SRVNWX1VTQUdF
X1JFQUQpOw0KIAl9DQogfQ0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1
L25vdXZlYXVfYm8uYyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYw0KaW5k
ZXggYzZiYjRkYmNkNzM1Li4wNTA3NmU1MzBlN2QgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25v
dXZlYXVfYm8uYw0KQEAgLTEzMDgsMTAgKzEzMDgsMTEgQEAgbm91dmVhdV9ib19mZW5jZShzdHJ1
Y3Qgbm91dmVhdV9ibyAqbnZibywgc3RydWN0IG5vdXZlYXVfZmVuY2UgKmZlbmNlLCBib29sIGV4
Y2wNCiB7DQogCXN0cnVjdCBkbWFfcmVzdiAqcmVzdiA9IG52Ym8tPmJvLmJhc2UucmVzdjsNCiAN
Ci0JaWYgKGV4Y2x1c2l2ZSkNCi0JCWRtYV9yZXN2X2FkZF9leGNsX2ZlbmNlKHJlc3YsICZmZW5j
ZS0+YmFzZSk7DQotCWVsc2UgaWYgKGZlbmNlKQ0KLQkJZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5j
ZShyZXN2LCAmZmVuY2UtPmJhc2UpOw0KKwlpZiAoIWZlbmNlKQ0KKwkJcmV0dXJuOw0KKw0KKwlk
bWFfcmVzdl9hZGRfZmVuY2UocmVzdiwgJmZlbmNlLT5iYXNlLCBleGNsdXNpdmUgPw0KKwkJCSAg
IERNQV9SRVNWX1VTQUdFX1dSSVRFIDogRE1BX1JFU1ZfVVNBR0VfUkVBRCk7DQogfQ0KIA0KIHN0
YXRpYyB2b2lkDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9m
ZW5jZS5jIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9mZW5jZS5jDQppbmRleCBk
NWU4MWNjZWUwMWMuLjdmMDFkY2Y4MWZhYiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9u
b3V2ZWF1L25vdXZlYXVfZmVuY2UuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL25vdXZlYXUvbm91
dmVhdV9mZW5jZS5jDQpAQCAtMzYwLDkgKzM2MCwxMSBAQCBub3V2ZWF1X2ZlbmNlX3N5bmMoc3Ry
dWN0IG5vdXZlYXVfYm8gKm52Ym8sIHN0cnVjdCBub3V2ZWF1X2NoYW5uZWwgKmNoYW4sDQogCQlk
bWFfcmVzdl9mb3JfZWFjaF9mZW5jZSgmY3Vyc29yLCByZXN2LA0KIAkJCQkJZG1hX3Jlc3ZfdXNh
Z2VfcncoZXhjbHVzaXZlKSwNCiAJCQkJCWZlbmNlKSB7DQorCQkJZW51bSBkbWFfcmVzdl91c2Fn
ZSB1c2FnZTsNCiAJCQlzdHJ1Y3Qgbm91dmVhdV9mZW5jZSAqZjsNCiANCi0JCQlpZiAoaSA9PSAw
ICYmIGRtYV9yZXN2X2l0ZXJfaXNfZXhjbHVzaXZlKCZjdXJzb3IpKQ0KKwkJCXVzYWdlID0gZG1h
X3Jlc3ZfaXRlcl91c2FnZSgmY3Vyc29yKTsNCisJCQlpZiAoaSA9PSAwICYmIHVzYWdlID09IERN
QV9SRVNWX1VTQUdFX1dSSVRFKQ0KIAkJCQljb250aW51ZTsNCiANCiAJCQlmID0gbm91dmVhdV9s
b2NhbF9mZW5jZShmZW5jZSwgY2hhbi0+ZHJtKTsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMgYi9kcml2ZXJzL2dwdS9kcm0vcGFuZnJvc3QvcGFu
ZnJvc3Rfam9iLmMNCmluZGV4IGMzNDExNDU2MGU0OS4uZmRhNTg3MWFlYmUzIDEwMDY0NA0KLS0t
IGEvZHJpdmVycy9ncHUvZHJtL3BhbmZyb3N0L3BhbmZyb3N0X2pvYi5jDQorKysgYi9kcml2ZXJz
L2dwdS9kcm0vcGFuZnJvc3QvcGFuZnJvc3Rfam9iLmMNCkBAIC0yNjgsNyArMjY4LDcgQEAgc3Rh
dGljIHZvaWQgcGFuZnJvc3RfYXR0YWNoX29iamVjdF9mZW5jZXMoc3RydWN0IGRybV9nZW1fb2Jq
ZWN0ICoqYm9zLA0KIAlpbnQgaTsNCiANCiAJZm9yIChpID0gMDsgaSA8IGJvX2NvdW50OyBpKysp
DQotCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShib3NbaV0tPnJlc3YsIGZlbmNlKTsNCisJCWRt
YV9yZXN2X2FkZF9mZW5jZShib3NbaV0tPnJlc3YsIGZlbmNlLCBETUFfUkVTVl9VU0FHRV9XUklU
RSk7DQogfQ0KIA0KIGludCBwYW5mcm9zdF9qb2JfcHVzaChzdHJ1Y3QgcGFuZnJvc3Rfam9iICpq
b2IpDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfcmVsZWFzZS5jIGIvZHJp
dmVycy9ncHUvZHJtL3F4bC9xeGxfcmVsZWFzZS5jDQppbmRleCBjZGUxZThkZGFlYWEuLjM2OGQy
NmRhMGQ2YSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX3JlbGVhc2UuYw0K
KysrIGIvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfcmVsZWFzZS5jDQpAQCAtNDI5LDcgKzQyOSw4
IEBAIHZvaWQgcXhsX3JlbGVhc2VfZmVuY2VfYnVmZmVyX29iamVjdHMoc3RydWN0IHF4bF9yZWxl
YXNlICpyZWxlYXNlKQ0KIAlsaXN0X2Zvcl9lYWNoX2VudHJ5KGVudHJ5LCAmcmVsZWFzZS0+Ym9z
LCBoZWFkKSB7DQogCQlibyA9IGVudHJ5LT5ibzsNCiANCi0JCWRtYV9yZXN2X2FkZF9zaGFyZWRf
ZmVuY2UoYm8tPmJhc2UucmVzdiwgJnJlbGVhc2UtPmJhc2UpOw0KKwkJZG1hX3Jlc3ZfYWRkX2Zl
bmNlKGJvLT5iYXNlLnJlc3YsICZyZWxlYXNlLT5iYXNlLA0KKwkJCQkgICBETUFfUkVTVl9VU0FH
RV9SRUFEKTsNCiAJCXR0bV9ib19tb3ZlX3RvX2xydV90YWlsX3VubG9ja2VkKGJvKTsNCiAJCWRt
YV9yZXN2X3VubG9jayhiby0+YmFzZS5yZXN2KTsNCiAJfQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS9yYWRlb24vcmFkZW9uX29iamVjdC5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9y
YWRlb25fb2JqZWN0LmMNCmluZGV4IDdmZmQyZTkwZjMyNS4uY2I1YzRhYTQ1Y2VmIDEwMDY0NA0K
LS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmMNCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX29iamVjdC5jDQpAQCAtNzkxLDggKzc5MSw2IEBAIHZv
aWQgcmFkZW9uX2JvX2ZlbmNlKHN0cnVjdCByYWRlb25fYm8gKmJvLCBzdHJ1Y3QgcmFkZW9uX2Zl
bmNlICpmZW5jZSwNCiAJCXJldHVybjsNCiAJfQ0KIA0KLQlpZiAoc2hhcmVkKQ0KLQkJZG1hX3Jl
c3ZfYWRkX3NoYXJlZF9mZW5jZShyZXN2LCAmZmVuY2UtPmJhc2UpOw0KLQllbHNlDQotCQlkbWFf
cmVzdl9hZGRfZXhjbF9mZW5jZShyZXN2LCAmZmVuY2UtPmJhc2UpOw0KKwlkbWFfcmVzdl9hZGRf
ZmVuY2UocmVzdiwgJmZlbmNlLT5iYXNlLCBzaGFyZWQgPw0KKwkJCSAgIERNQV9SRVNWX1VTQUdF
X1JFQUQgOiBETUFfUkVTVl9VU0FHRV9XUklURSk7DQogfQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS90dG0vdHRtX2JvLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jDQppbmRl
eCBjZmYwNWI2MmYzZjcuLmQ3NGY5ZWVhODU1ZSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2JvLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMNCkBAIC03
MzksNyArNzM5LDcgQEAgc3RhdGljIGludCB0dG1fYm9fYWRkX21vdmVfZmVuY2Uoc3RydWN0IHR0
bV9idWZmZXJfb2JqZWN0ICpibywNCiAJCXJldHVybiByZXQ7DQogCX0NCiANCi0JZG1hX3Jlc3Zf
YWRkX3NoYXJlZF9mZW5jZShiby0+YmFzZS5yZXN2LCBmZW5jZSk7DQorCWRtYV9yZXN2X2FkZF9m
ZW5jZShiby0+YmFzZS5yZXN2LCBmZW5jZSwgRE1BX1JFU1ZfVVNBR0VfV1JJVEUpOw0KIA0KIAly
ZXQgPSBkbWFfcmVzdl9yZXNlcnZlX2ZlbmNlcyhiby0+YmFzZS5yZXN2LCAxKTsNCiAJaWYgKHVu
bGlrZWx5KHJldCkpIHsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191
dGlsLmMgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMNCmluZGV4IDFiOTZiOTFi
ZjgxYi4uN2E5NmExZGIxM2E3IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1f
Ym9fdXRpbC5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMNCkBAIC01
MDcsNyArNTA3LDggQEAgc3RhdGljIGludCB0dG1fYm9fbW92ZV90b19naG9zdChzdHJ1Y3QgdHRt
X2J1ZmZlcl9vYmplY3QgKmJvLA0KIAlpZiAocmV0KQ0KIAkJcmV0dXJuIHJldDsNCiANCi0JZG1h
X3Jlc3ZfYWRkX2V4Y2xfZmVuY2UoJmdob3N0X29iai0+YmFzZS5fcmVzdiwgZmVuY2UpOw0KKwlk
bWFfcmVzdl9hZGRfZmVuY2UoJmdob3N0X29iai0+YmFzZS5fcmVzdiwgZmVuY2UsDQorCQkJICAg
RE1BX1JFU1ZfVVNBR0VfV1JJVEUpOw0KIA0KIAkvKioNCiAJICogSWYgd2UncmUgbm90IG1vdmlu
ZyB0byBmaXhlZCBtZW1vcnksIHRoZSBUVE0gb2JqZWN0DQpAQCAtNTYxLDcgKzU2Miw3IEBAIGlu
dCB0dG1fYm9fbW92ZV9hY2NlbF9jbGVhbnVwKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8s
DQogCXN0cnVjdCB0dG1fcmVzb3VyY2VfbWFuYWdlciAqbWFuID0gdHRtX21hbmFnZXJfdHlwZShi
ZGV2LCBuZXdfbWVtLT5tZW1fdHlwZSk7DQogCWludCByZXQgPSAwOw0KIA0KLQlkbWFfcmVzdl9h
ZGRfZXhjbF9mZW5jZShiby0+YmFzZS5yZXN2LCBmZW5jZSk7DQorCWRtYV9yZXN2X2FkZF9mZW5j
ZShiby0+YmFzZS5yZXN2LCBmZW5jZSwgRE1BX1JFU1ZfVVNBR0VfV1JJVEUpOw0KIAlpZiAoIWV2
aWN0KQ0KIAkJcmV0ID0gdHRtX2JvX21vdmVfdG9fZ2hvc3QoYm8sIGZlbmNlLCBtYW4tPnVzZV90
dCk7DQogCWVsc2UgaWYgKCFmcm9tLT51c2VfdHQgJiYgcGlwZWxpbmUpDQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZXhlY2J1Zl91dGlsLmMgYi9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9leGVjYnVmX3V0aWwuYw0KaW5kZXggNzg5YzY0NWYwMDRlLi4wZWI5OTVkMjVkZjEg
MTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9leGVjYnVmX3V0aWwuYw0KKysr
IGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZXhlY2J1Zl91dGlsLmMNCkBAIC0xNTQsMTAgKzE1
NCw4IEBAIHZvaWQgdHRtX2V1X2ZlbmNlX2J1ZmZlcl9vYmplY3RzKHN0cnVjdCB3d19hY3F1aXJl
X2N0eCAqdGlja2V0LA0KIAlsaXN0X2Zvcl9lYWNoX2VudHJ5KGVudHJ5LCBsaXN0LCBoZWFkKSB7
DQogCQlzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvID0gZW50cnktPmJvOw0KIA0KLQkJaWYg
KGVudHJ5LT5udW1fc2hhcmVkKQ0KLQkJCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UoYm8tPmJh
c2UucmVzdiwgZmVuY2UpOw0KLQkJZWxzZQ0KLQkJCWRtYV9yZXN2X2FkZF9leGNsX2ZlbmNlKGJv
LT5iYXNlLnJlc3YsIGZlbmNlKTsNCisJCWRtYV9yZXN2X2FkZF9mZW5jZShiby0+YmFzZS5yZXN2
LCBmZW5jZSwgZW50cnktPm51bV9zaGFyZWQgPw0KKwkJCQkgICBETUFfUkVTVl9VU0FHRV9SRUFE
IDogRE1BX1JFU1ZfVVNBR0VfV1JJVEUpOw0KIAkJdHRtX2JvX21vdmVfdG9fbHJ1X3RhaWxfdW5s
b2NrZWQoYm8pOw0KIAkJZG1hX3Jlc3ZfdW5sb2NrKGJvLT5iYXNlLnJlc3YpOw0KIAl9DQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3YzZC92M2RfZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0v
djNkL3YzZF9nZW0uYw0KaW5kZXggOTYxODEyZDMzODI3Li4yMzUyZTk2NDA5MjIgMTAwNjQ0DQot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vdjNkL3YzZF9nZW0uYw0KKysrIGIvZHJpdmVycy9ncHUvZHJt
L3YzZC92M2RfZ2VtLmMNCkBAIC01NTAsOCArNTUwLDggQEAgdjNkX2F0dGFjaF9mZW5jZXNfYW5k
X3VubG9ja19yZXNlcnZhdGlvbihzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJpdiwNCiANCiAJZm9y
IChpID0gMDsgaSA8IGpvYi0+Ym9fY291bnQ7IGkrKykgew0KIAkJLyogWFhYOiBVc2Ugc2hhcmVk
IGZlbmNlcyBmb3IgcmVhZC1vbmx5IG9iamVjdHMuICovDQotCQlkbWFfcmVzdl9hZGRfZXhjbF9m
ZW5jZShqb2ItPmJvW2ldLT5yZXN2LA0KLQkJCQkJam9iLT5kb25lX2ZlbmNlKTsNCisJCWRtYV9y
ZXN2X2FkZF9mZW5jZShqb2ItPmJvW2ldLT5yZXN2LCBqb2ItPmRvbmVfZmVuY2UsDQorCQkJCSAg
IERNQV9SRVNWX1VTQUdFX1dSSVRFKTsNCiAJfQ0KIA0KIAlkcm1fZ2VtX3VubG9ja19yZXNlcnZh
dGlvbnMoam9iLT5ibywgam9iLT5ib19jb3VudCwgYWNxdWlyZV9jdHgpOw0KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL3ZjNC92YzRf
Z2VtLmMNCmluZGV4IDU5NGJkNmJiMDBkMi4uMzg1NTAzMTdlMDI1IDEwMDY0NA0KLS0tIGEvZHJp
dmVycy9ncHUvZHJtL3ZjNC92YzRfZ2VtLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0
X2dlbS5jDQpAQCAtNTQ2LDcgKzU0Niw3IEBAIHZjNF91cGRhdGVfYm9fc2Vxbm9zKHN0cnVjdCB2
YzRfZXhlY19pbmZvICpleGVjLCB1aW50NjRfdCBzZXFubykNCiAJCWJvID0gdG9fdmM0X2JvKCZl
eGVjLT5ib1tpXS0+YmFzZSk7DQogCQliby0+c2Vxbm8gPSBzZXFubzsNCiANCi0JCWRtYV9yZXN2
X2FkZF9zaGFyZWRfZmVuY2UoYm8tPmJhc2UuYmFzZS5yZXN2LCBleGVjLT5mZW5jZSk7DQorCQlk
bWFfcmVzdl9hZGRfZmVuY2UoYm8tPmJhc2UuYmFzZS5yZXN2LCBleGVjLT5mZW5jZSk7DQogCX0N
CiANCiAJbGlzdF9mb3JfZWFjaF9lbnRyeShibywgJmV4ZWMtPnVucmVmX2xpc3QsIHVucmVmX2hl
YWQpIHsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdmdlbS92Z2VtX2ZlbmNlLmMgYi9k
cml2ZXJzL2dwdS9kcm0vdmdlbS92Z2VtX2ZlbmNlLmMNCmluZGV4IDkxZmM0OTQwYzY1YS4uYzJh
ODc5NzM0ZDQwIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3ZnZW0vdmdlbV9mZW5jZS5j
DQorKysgYi9kcml2ZXJzL2dwdS9kcm0vdmdlbS92Z2VtX2ZlbmNlLmMNCkBAIC0xNjEsMTIgKzE2
MSw5IEBAIGludCB2Z2VtX2ZlbmNlX2F0dGFjaF9pb2N0bChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LA0KIAkvKiBFeHBvc2UgdGhlIGZlbmNlIHZpYSB0aGUgZG1hLWJ1ZiAqLw0KIAlkbWFfcmVzdl9s
b2NrKHJlc3YsIE5VTEwpOw0KIAlyZXQgPSBkbWFfcmVzdl9yZXNlcnZlX2ZlbmNlcyhyZXN2LCAx
KTsNCi0JaWYgKCFyZXQpIHsNCi0JCWlmIChhcmctPmZsYWdzICYgVkdFTV9GRU5DRV9XUklURSkN
Ci0JCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShyZXN2LCBmZW5jZSk7DQotCQllbHNlDQotCQkJ
ZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZShyZXN2LCBmZW5jZSk7DQotCX0NCisJaWYgKCFyZXQp
DQorCQlkbWFfcmVzdl9hZGRfZmVuY2UocmVzdiwgZmVuY2UsIGFyZy0+ZmxhZ3MgJiBWR0VNX0ZF
TkNFX1dSSVRFID8NCisJCQkJICAgRE1BX1JFU1ZfVVNBR0VfV1JJVEUgOiBETUFfUkVTVl9VU0FH
RV9SRUFEKTsNCiAJZG1hX3Jlc3ZfdW5sb2NrKHJlc3YpOw0KIA0KIAkvKiBSZWNvcmQgdGhlIGZl
bmNlIGluIG91ciBpZHIgZm9yIGxhdGVyIHNpZ25hbGluZyAqLw0KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS92aXJ0aW8vdmlydGdwdV9nZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS92aXJ0aW8v
dmlydGdwdV9nZW0uYw0KaW5kZXggMTgyMGNhNmNmNjczLi41ODBhNzg4MDk4MzYgMTAwNjQ0DQot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vdmlydGlvL3ZpcnRncHVfZ2VtLmMNCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS92aXJ0aW8vdmlydGdwdV9nZW0uYw0KQEAgLTI1MCw3ICsyNTAsOCBAQCB2b2lkIHZp
cnRpb19ncHVfYXJyYXlfYWRkX2ZlbmNlKHN0cnVjdCB2aXJ0aW9fZ3B1X29iamVjdF9hcnJheSAq
b2JqcywNCiAJaW50IGk7DQogDQogCWZvciAoaSA9IDA7IGkgPCBvYmpzLT5uZW50czsgaSsrKQ0K
LQkJZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2Uob2Jqcy0+b2Jqc1tpXS0+cmVzdiwgZmVuY2UpOw0K
KwkJZG1hX3Jlc3ZfYWRkX2ZlbmNlKG9ianMtPm9ianNbaV0tPnJlc3YsIGZlbmNlLA0KKwkJCQkg
ICBETUFfUkVTVl9VU0FHRV9XUklURSk7DQogfQ0KIA0KIHZvaWQgdmlydGlvX2dwdV9hcnJheV9w
dXRfZnJlZShzdHJ1Y3QgdmlydGlvX2dwdV9vYmplY3RfYXJyYXkgKm9ianMpDQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYm8uYyBiL2RyaXZlcnMvZ3B1L2RybS92
bXdnZngvdm13Z2Z4X2JvLmMNCmluZGV4IGI5Njg4NGY3ZDAzZC4uYmVjNTAyMjNlZmU1IDEwMDY0
NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYm8uYw0KKysrIGIvZHJpdmVy
cy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYm8uYw0KQEAgLTc1OCw3ICs3NTgsOCBAQCB2b2lkIHZt
d19ib19mZW5jZV9zaW5nbGUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywNCiANCiAJcmV0
ID0gZG1hX3Jlc3ZfcmVzZXJ2ZV9mZW5jZXMoYm8tPmJhc2UucmVzdiwgMSk7DQogCWlmICghcmV0
KQ0KLQkJZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2UoYm8tPmJhc2UucmVzdiwgJmZlbmNlLT5iYXNl
KTsNCisJCWRtYV9yZXN2X2FkZF9mZW5jZShiby0+YmFzZS5yZXN2LCAmZmVuY2UtPmJhc2UsDQor
CQkJCSAgIERNQV9SRVNWX1VTQUdFX1dSSVRFKTsNCiAJZWxzZQ0KIAkJLyogTGFzdCByZXNvcnQg
ZmFsbGJhY2sgd2hlbiB3ZSBhcmUgT09NICovDQogCQlkbWFfZmVuY2Vfd2FpdCgmZmVuY2UtPmJh
c2UsIGZhbHNlKTsNCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1idWYuaCBiL2luY2x1
ZGUvbGludXgvZG1hLWJ1Zi5oDQppbmRleCBhMjk3Mzk3NzQzYTIuLjcxNzMxNzk2YzhjMyAxMDA2
NDQNCi0tLSBhL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oDQorKysgYi9pbmNsdWRlL2xpbnV4L2Rt
YS1idWYuaA0KQEAgLTM5MywxNSArMzkzLDE1IEBAIHN0cnVjdCBkbWFfYnVmIHsNCiAJICogZS5n
LiBleHBvc2VkIGluIGBJbXBsaWNpdCBGZW5jZSBQb2xsIFN1cHBvcnRgXyBtdXN0IGZvbGxvdyB0
aGUNCiAJICogYmVsb3cgcnVsZXMuDQogCSAqDQotCSAqIC0gRHJpdmVycyBtdXN0IGFkZCBhIHNo
YXJlZCBmZW5jZSB0aHJvdWdoIGRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UoKQ0KLQkgKiAgIGZv
ciBhbnl0aGluZyB0aGUgdXNlcnNwYWNlIEFQSSBjb25zaWRlcnMgYSByZWFkIGFjY2Vzcy4gVGhp
cyBoaWdobHkNCi0JICogICBkZXBlbmRzIHVwb24gdGhlIEFQSSBhbmQgd2luZG93IHN5c3RlbS4N
CisJICogLSBEcml2ZXJzIG11c3QgYWRkIGEgcmVhZCBmZW5jZSB0aHJvdWdoIGRtYV9yZXN2X2Fk
ZF9mZW5jZSgpIHdpdGggdGhlDQorCSAqICAgRE1BX1JFU1ZfVVNBR0VfUkVBRCBmbGFnIGZvciBh
bnl0aGluZyB0aGUgdXNlcnNwYWNlIEFQSSBjb25zaWRlcnMgYQ0KKwkgKiAgIHJlYWQgYWNjZXNz
LiBUaGlzIGhpZ2hseSBkZXBlbmRzIHVwb24gdGhlIEFQSSBhbmQgd2luZG93IHN5c3RlbS4NCiAJ
ICoNCi0JICogLSBTaW1pbGFybHkgZHJpdmVycyBtdXN0IHNldCB0aGUgZXhjbHVzaXZlIGZlbmNl
IHRocm91Z2gNCi0JICogICBkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZSgpIGZvciBhbnl0aGluZyB0
aGUgdXNlcnNwYWNlIEFQSSBjb25zaWRlcnMNCi0JICogICB3cml0ZSBhY2Nlc3MuDQorCSAqIC0g
U2ltaWxhcmx5IGRyaXZlcnMgbXVzdCBhZGQgYSB3cml0ZSBmZW5jZSB0aHJvdWdoDQorCSAqICAg
ZG1hX3Jlc3ZfYWRkX2ZlbmNlKCkgd2l0aCB0aGUgRE1BX1JFU1ZfVVNBR0VfV1JJVEUgZmxhZyBm
b3INCisJICogICBhbnl0aGluZyB0aGUgdXNlcnNwYWNlIEFQSSBjb25zaWRlcnMgd3JpdGUgYWNj
ZXNzLg0KIAkgKg0KLQkgKiAtIERyaXZlcnMgbWF5IGp1c3QgYWx3YXlzIHNldCB0aGUgZXhjbHVz
aXZlIGZlbmNlLCBzaW5jZSB0aGF0IG9ubHkNCisJICogLSBEcml2ZXJzIG1heSBqdXN0IGFsd2F5
cyBhZGQgYSB3cml0ZSBmZW5jZSwgc2luY2UgdGhhdCBvbmx5DQogCSAqICAgY2F1c2VzIHVuZWNl
c3NhcmlseSBzeW5jaHJvbml6YXRpb24sIGJ1dCBubyBjb3JyZWN0bmVzcyBpc3N1ZXMuDQogCSAq
DQogCSAqIC0gU29tZSBkcml2ZXJzIG9ubHkgZXhwb3NlIGEgc3luY2hyb25vdXMgdXNlcnNwYWNl
IEFQSSB3aXRoIG5vDQpAQCAtNDE2LDcgKzQxNiw3IEBAIHN0cnVjdCBkbWFfYnVmIHsNCiAJICog
RHluYW1pYyBpbXBvcnRlcnMsIHNlZSBkbWFfYnVmX2F0dGFjaG1lbnRfaXNfZHluYW1pYygpLCBo
YXZlDQogCSAqIGFkZGl0aW9uYWwgY29uc3RyYWludHMgb24gaG93IHRoZXkgc2V0IHVwIGZlbmNl
czoNCiAJICoNCi0JICogLSBEeW5hbWljIGltcG9ydGVycyBtdXN0IG9iZXkgdGhlIGV4Y2x1c2l2
ZSBmZW5jZSBhbmQgd2FpdCBmb3IgaXQgdG8NCisJICogLSBEeW5hbWljIGltcG9ydGVycyBtdXN0
IG9iZXkgdGhlIHdyaXRlIGZlbmNlcyBhbmQgd2FpdCBmb3IgdGhlbSB0bw0KIAkgKiAgIHNpZ25h
bCBiZWZvcmUgYWxsb3dpbmcgYWNjZXNzIHRvIHRoZSBidWZmZXIncyB1bmRlcmx5aW5nIHN0b3Jh
Z2UNCiAJICogICB0aHJvdWdoIHRoZSBkZXZpY2UuDQogCSAqDQpkaWZmIC0tZ2l0IGEvaW5jbHVk
ZS9saW51eC9kbWEtcmVzdi5oIGIvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oDQppbmRleCA5MmNk
ODAyMzk4MGYuLjk4ZGM1MjM0YjQ4NyAxMDA2NDQNCi0tLSBhL2luY2x1ZGUvbGludXgvZG1hLXJl
c3YuaA0KKysrIGIvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oDQpAQCAtMTk1LDYgKzE5NSw5IEBA
IHN0cnVjdCBkbWFfcmVzdl9pdGVyIHsNCiAJLyoqIEBmZW5jZTogdGhlIGN1cnJlbnRseSBoYW5k
bGVkIGZlbmNlICovDQogCXN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlOw0KIA0KKwkvKiogQGZlbmNl
X3VzYWdlOiB0aGUgdXNhZ2Ugb2YgdGhlIGN1cnJlbnQgZmVuY2UgKi8NCisJZW51bSBkbWFfcmVz
dl91c2FnZSBmZW5jZV91c2FnZTsNCisNCiAJLyoqIEBzZXE6IHNlcXVlbmNlIG51bWJlciB0byBj
aGVjayBmb3IgbW9kaWZpY2F0aW9ucyAqLw0KIAl1bnNpZ25lZCBpbnQgc2VxOw0KIA0KQEAgLTI0
NCwxNCArMjQ3LDE1IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBkbWFfcmVzdl9pdGVyX2VuZChzdHJ1
Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vyc29yKQ0KIH0NCiANCiAvKioNCi0gKiBkbWFfcmVzdl9pdGVy
X2lzX2V4Y2x1c2l2ZSAtIHRlc3QgaWYgdGhlIGN1cnJlbnQgZmVuY2UgaXMgdGhlIGV4Y2x1c2l2
ZSBvbmUNCisgKiBkbWFfcmVzdl9pdGVyX3VzYWdlIC0gUmV0dXJuIHRoZSB1c2FnZSBvZiB0aGUg
Y3VycmVudCBmZW5jZQ0KICAqIEBjdXJzb3I6IHRoZSBjdXJzb3Igb2YgdGhlIGN1cnJlbnQgcG9z
aXRpb24NCiAgKg0KLSAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudGx5IHJldHVybmVkIGZl
bmNlIGlzIHRoZSBleGNsdXNpdmUgb25lLg0KKyAqIFJldHVybnMgdGhlIHVzYWdlIG9mIHRoZSBj
dXJyZW50bHkgcHJvY2Vzc2VkIGZlbmNlLg0KICAqLw0KLXN0YXRpYyBpbmxpbmUgYm9vbCBkbWFf
cmVzdl9pdGVyX2lzX2V4Y2x1c2l2ZShzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vyc29yKQ0KK3N0
YXRpYyBpbmxpbmUgZW51bSBkbWFfcmVzdl91c2FnZQ0KK2RtYV9yZXN2X2l0ZXJfdXNhZ2Uoc3Ry
dWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcikNCiB7DQotCXJldHVybiBjdXJzb3ItPmluZGV4ID09
IDA7DQorCXJldHVybiBjdXJzb3ItPmZlbmNlX3VzYWdlOw0KIH0NCiANCiAvKioNCkBAIC0zMDYs
OSArMzEwLDkgQEAgc3RhdGljIGlubGluZSBib29sIGRtYV9yZXN2X2l0ZXJfaXNfcmVzdGFydGVk
KHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IpDQogI2RlZmluZSBkbWFfcmVzdl9hc3NlcnRf
aGVsZChvYmopIGxvY2tkZXBfYXNzZXJ0X2hlbGQoJihvYmopLT5sb2NrLmJhc2UpDQogDQogI2lm
ZGVmIENPTkZJR19ERUJVR19NVVRFWEVTDQotdm9pZCBkbWFfcmVzdl9yZXNldF9zaGFyZWRfbWF4
KHN0cnVjdCBkbWFfcmVzdiAqb2JqKTsNCit2b2lkIGRtYV9yZXN2X3Jlc2V0X21heF9mZW5jZXMo
c3RydWN0IGRtYV9yZXN2ICpvYmopOw0KICNlbHNlDQotc3RhdGljIGlubGluZSB2b2lkIGRtYV9y
ZXN2X3Jlc2V0X3NoYXJlZF9tYXgoc3RydWN0IGRtYV9yZXN2ICpvYmopIHt9DQorc3RhdGljIGlu
bGluZSB2b2lkIGRtYV9yZXN2X3Jlc2V0X21heF9mZW5jZXMoc3RydWN0IGRtYV9yZXN2ICpvYmop
IHt9DQogI2VuZGlmDQogDQogLyoqDQpAQCAtNDU0LDE3ICs0NTgsMTggQEAgc3RhdGljIGlubGlu
ZSBzdHJ1Y3Qgd3dfYWNxdWlyZV9jdHggKmRtYV9yZXN2X2xvY2tpbmdfY3R4KHN0cnVjdCBkbWFf
cmVzdiAqb2JqKQ0KICAqLw0KIHN0YXRpYyBpbmxpbmUgdm9pZCBkbWFfcmVzdl91bmxvY2soc3Ry
dWN0IGRtYV9yZXN2ICpvYmopDQogew0KLQlkbWFfcmVzdl9yZXNldF9zaGFyZWRfbWF4KG9iaik7
DQorCWRtYV9yZXN2X3Jlc2V0X21heF9mZW5jZXMob2JqKTsNCiAJd3dfbXV0ZXhfdW5sb2NrKCZv
YmotPmxvY2spOw0KIH0NCiANCiB2b2lkIGRtYV9yZXN2X2luaXQoc3RydWN0IGRtYV9yZXN2ICpv
YmopOw0KIHZvaWQgZG1hX3Jlc3ZfZmluaShzdHJ1Y3QgZG1hX3Jlc3YgKm9iaik7DQogaW50IGRt
YV9yZXN2X3Jlc2VydmVfZmVuY2VzKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCB1bnNpZ25lZCBpbnQg
bnVtX2ZlbmNlcyk7DQotdm9pZCBkbWFfcmVzdl9hZGRfc2hhcmVkX2ZlbmNlKHN0cnVjdCBkbWFf
cmVzdiAqb2JqLCBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSk7DQordm9pZCBkbWFfcmVzdl9hZGRf
ZmVuY2Uoc3RydWN0IGRtYV9yZXN2ICpvYmosIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLA0KKwkJ
CWVudW0gZG1hX3Jlc3ZfdXNhZ2UgdXNhZ2UpOw0KIHZvaWQgZG1hX3Jlc3ZfcmVwbGFjZV9mZW5j
ZXMoc3RydWN0IGRtYV9yZXN2ICpvYmosIHVpbnQ2NF90IGNvbnRleHQsDQotCQkJICAgICBzdHJ1
Y3QgZG1hX2ZlbmNlICpmZW5jZSk7DQotdm9pZCBkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShzdHJ1
Y3QgZG1hX3Jlc3YgKm9iaiwgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpOw0KKwkJCSAgICAgc3Ry
dWN0IGRtYV9mZW5jZSAqZmVuY2UsDQorCQkJICAgICBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdl
KTsNCiBpbnQgZG1hX3Jlc3ZfZ2V0X2ZlbmNlcyhzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgZW51bSBk
bWFfcmVzdl91c2FnZSB1c2FnZSwNCiAJCQl1bnNpZ25lZCBpbnQgKm51bV9mZW5jZXMsIHN0cnVj
dCBkbWFfZmVuY2UgKioqZmVuY2VzKTsNCiBpbnQgZG1hX3Jlc3ZfZ2V0X3NpbmdsZXRvbihzdHJ1
Y3QgZG1hX3Jlc3YgKm9iaiwgZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSwNCi0tIA0KMi4yNS4x
DQoNCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbmFy
by1tbS1zaWcgbWFpbGluZyBsaXN0IC0tIGxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZwpU
byB1bnN1YnNjcmliZSBzZW5kIGFuIGVtYWlsIHRvIGxpbmFyby1tbS1zaWctbGVhdmVAbGlzdHMu
bGluYXJvLm9yZwo=
