Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id D168D3D04A9
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 21 Jul 2021 00:32:16 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 6B7FB61A46
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 20 Jul 2021 22:32:15 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 3E4FB619CF; Tue, 20 Jul 2021 22:32:14 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 1B2C6617D8;
	Tue, 20 Jul 2021 22:32:12 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id CC91A61433
 for <linaro-mm-sig@lists.linaro.org>; Tue, 20 Jul 2021 22:32:09 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id BF395617D8; Tue, 20 Jul 2021 22:32:09 +0000 (UTC)
Received: from mail-wr1-f44.google.com (mail-wr1-f44.google.com
 [209.85.221.44])
 by lists.linaro.org (Postfix) with ESMTPS id B481F61433
 for <linaro-mm-sig@lists.linaro.org>; Tue, 20 Jul 2021 22:32:07 +0000 (UTC)
Received: by mail-wr1-f44.google.com with SMTP id f17so67486wrt.6
 for <linaro-mm-sig@lists.linaro.org>; Tue, 20 Jul 2021 15:32:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=AUq62xTOdEE9yZyZ9SmyAw/53N8FF+p9iTgcqqLGQAc=;
 b=Xjb45xC/ATHW+Ja5+SAtaovYI7YvU3BVBREZpvHqi2Yr36Ug5CxT2Jh9jHTQ+rO4Wk
 a1dEGmIcFSKewgblnu3ieGcW5eAdwzbnQEyK5YiC5xoDqz9Y2kQTOFpYSEKDj39l9oHb
 qsxvHJI/jTpQ1do86Tv8jXattuEFUhdgiLT7Zuaodl9GhsCb/rlxyTLnC4t6AItH06D4
 Cv6/rUqLqW7oUYjUoNPccMLs+AqQwXB/FBK3SPaymFuYwEWimmJ/0001IEd277kUFi1W
 derIw/mOzJQhUQhR/TNjaRsNAK+DxgHfEAmqtfIPWjlk4Pfj7fh9g+shZ2+cfPL1McEG
 aa9A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=AUq62xTOdEE9yZyZ9SmyAw/53N8FF+p9iTgcqqLGQAc=;
 b=R3Ma9PJt4/jdF9lH7837QAdH8U4bwPmAM8XrUDBH6DHLO8HNHCPN3/1AGKvp4fe1oT
 a5kkQDpoKNiDZgGovZHC460CPduq/MKs4Zyr3nE9tvU3GFCtEXb4cXPh38wfBvoHvDCV
 igAwwdnKZC4KaAyCZ2PTgZ+/J9JBGle2LAg3KVZtHgLDndgATGl7nBCI+9ZHwSUjvwFT
 bz8Wi7EOIi/iata0iBNYshDSxzj+MdR88BKOFCI4T9OAd7yxL4ApMNkv/p0e4rFr7fAy
 1WOsL5h/Y0SMBJ7v3NQjvrD0+GzIfRPEjm9XWa2XJHRTIgoafrkY8/ABQUcIHKEnDCj7
 HGCQ==
X-Gm-Message-State: AOAM533814gCSgSddiQnwwnRVfHppDs+thU5Gr67f5QK51yxDjv/47Py
 QdAuEmvXLnUCDDSUdDFntF7LAkX/TdDUL5G/GDA=
X-Google-Smtp-Source: ABdhPJxRCaU0mgbRBKXCUtmzHce0yeXRyivNRpNTgJgdzNX98VwZiuLceogME2jUho6sOGR5XAEUBw+FRtjqHARE+DE=
X-Received: by 2002:a5d:4e43:: with SMTP id r3mr38668459wrt.132.1626820326738; 
 Tue, 20 Jul 2021 15:32:06 -0700 (PDT)
MIME-Version: 1.0
References: <20210720150716.1213775-1-robdclark@gmail.com>
 <60ffb6f3-e932-d9af-3b90-81adf0c15250@gmail.com>
 <CAF6AEGtOW3EjZWo36ij8U1om=gAqvg8CSkJJq2GkyHFGWUH4kQ@mail.gmail.com>
 <CAKMK7uF1=Y6_9znGoWG8GrteXBBRmyW8C3bFE+eJQqOj0A1buA@mail.gmail.com>
In-Reply-To: <CAKMK7uF1=Y6_9znGoWG8GrteXBBRmyW8C3bFE+eJQqOj0A1buA@mail.gmail.com>
From: Rob Clark <robdclark@gmail.com>
Date: Tue, 20 Jul 2021 15:36:14 -0700
Message-ID: <CAF6AEGsOVPdMkXwU9C+nDfQpPThveJ2A0jbXi43RRkkJKtnz3w@mail.gmail.com>
To: Daniel Vetter <daniel@ffwll.ch>
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: Re: [Linaro-mm-sig] [PATCH] drm/msm: Add fence->wait() op
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: Rob Clark <robdclark@chromium.org>, David Airlie <airlied@linux.ie>,
 open list <linux-kernel@vger.kernel.org>,
 dri-devel <dri-devel@lists.freedesktop.org>,
 "moderated list:DMA BUFFER SHARING FRAMEWORK" <linaro-mm-sig@lists.linaro.org>,
 Sean Paul <sean@poorly.run>,
 "open list:DRM DRIVER FOR MSM ADRENO GPU" <linux-arm-msm@vger.kernel.org>,
 "open list:DRM DRIVER FOR MSM ADRENO GPU" <freedreno@lists.freedesktop.org>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>,
 "open list:DMA BUFFER SHARING FRAMEWORK" <linux-media@vger.kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

T24gVHVlLCBKdWwgMjAsIDIwMjEgYXQgMTo1NSBQTSBEYW5pZWwgVmV0dGVyIDxkYW5pZWxAZmZ3
bGwuY2g+IHdyb3RlOgo+Cj4gT24gVHVlLCBKdWwgMjAsIDIwMjEgYXQgODoyNiBQTSBSb2IgQ2xh
cmsgPHJvYmRjbGFya0BnbWFpbC5jb20+IHdyb3RlOgo+ID4KPiA+IE9uIFR1ZSwgSnVsIDIwLCAy
MDIxIGF0IDExOjAzIEFNIENocmlzdGlhbiBLw7ZuaWcKPiA+IDxja29lbmlnLmxlaWNodHp1bWVy
a2VuQGdtYWlsLmNvbT4gd3JvdGU6Cj4gPiA+Cj4gPiA+IEhpIFJvYiwKPiA+ID4KPiA+ID4gQW0g
MjAuMDcuMjEgdW0gMTc6MDcgc2NocmllYiBSb2IgQ2xhcms6Cj4gPiA+ID4gRnJvbTogUm9iIENs
YXJrIDxyb2JkY2xhcmtAY2hyb21pdW0ub3JnPgo+ID4gPiA+Cj4gPiA+ID4gU29tZWhvdyB3ZSBo
YWQgbmVpdGhlciAtPndhaXQoKSBub3IgZG1hX2ZlbmNlX3NpZ25hbCgpIGNhbGxzLCBhbmQgbm8K
PiA+ID4gPiBvbmUgbm90aWNlZC4gIE9vcHMuCj4gPiA+Cj4gPiA+Cj4gPiA+IEknbSBub3Qgc3Vy
ZSBpZiB0aGF0IGlzIGEgZ29vZCBpZGVhLgo+ID4gPgo+ID4gPiBUaGUgZG1hX2ZlbmNlLT53YWl0
KCkgY2FsbGJhY2sgaXMgcHJldHR5IG11Y2ggZGVwcmVjYXRlZCBhbmQgc2hvdWxkIG5vdAo+ID4g
PiBiZSB1c2VkIGFueSBtb3JlLgo+ID4gPgo+ID4gPiBXaGF0IGV4YWN0bHkgZG8geW91IG5lZWQg
dGhhdCBmb3I/Cj4gPgo+ID4gV2VsbCwgdGhlIGFsdGVybmF0aXZlIGlzIHRvIHRyYWNrIHRoZSBz
ZXQgb2YgZmVuY2VzIHdoaWNoIGhhdmUKPiA+IHNpZ25hbGxpbmcgZW5hYmxlZCwgYW5kIHRoZW4g
ZmlndXJlIG91dCB3aGljaCBvbmVzIHRvIHNpZ25hbCwgd2hpY2gKPiA+IHNlZW1zIGxpa2UgYSBs
b3QgbW9yZSB3b3JrLCB2cyBqdXN0IHJlLXB1cnBvc2luZyB0aGUgd2FpdAo+ID4gaW1wbGVtZW50
YXRpb24gd2UgYWxyZWFkeSBoYXZlIGZvciBub24tZG1hX2ZlbmNlIGNhc2VzIDstKQo+ID4KPiA+
IFdoeSBpcyB0aGUgLT53YWl0KCkgY2FsbGJhY2sgKHByZXR0eSBtdWNoKSBkZXByZWNhdGVkPwo+
Cj4gQmVjYXVzZSBpZiB5b3UgbmVlZCBpdCB0aGF0IG1lYW5zIGZvciB5b3VyIGRyaXZlciBkbWFf
ZmVuY2VfYWRkX2NiIGlzCj4gYnJva2VuLCB3aGljaCBtZWFucyBhIF9sb3RfIG9mIHRoaW5ncyBk
b24ndCB3b3JrLiBMaWtlIGRtYV9idWYgcG9sbAo+IChjb21wb3NpdG9ycyBoYXZlIHBhdGNoZXMg
dG8gc3RhcnQgdXNpbmcgdGhhdCksIGFuZCBJIHRoaW5rCj4gZHJtL3NjaGVkdWxlciBhbHNvIGJl
Y29tZXMgcmF0aGVyIHVuaGFwcHkuCgpJJ20gc3RhcnRpbmcgdG8gcGFnZSBiYWNrIGluIGhvdyB0
aGlzIHdvcmtzLi4gZmVuY2UgY2IncyBhcmVuJ3QgYnJva2VuCih3aGljaCBpcyBhbHNvIHdoeSBk
bWFfZmVuY2Vfd2FpdCgpIHdhcyBub3QgY29tcGxldGVseSBicm9rZW4pLApiZWNhdXNlIGluIHJl
dGlyZV9zdWJtaXRzKCkgd2UgY2FsbApkbWFfZmVuY2VfaXNfc2lnbmFsZWQoc3VibWl0LT5od19m
ZW5jZSkuCgpCdXQgdGhlIHJlYXNvbiB0aGF0IHRoZSBjdXN0b20gd2FpdCBmdW5jdGlvbiBjbGVh
bnMgdXAgYSB0aW55IGJpdCBvZgpqYW5rIGlzIHRoYXQgdGhlIHdhaXRfcXVldWVfaGVhZF90IGdl
dHMgc2lnbmFsZWQgZWFybGllciwgYmVmb3JlIHdlCnN0YXJ0IGl0ZXJhdGluZyB0aGUgc3VibWl0
cyBhbmQgZG9pbmcgYWxsIHRoYXQgcmV0aXJlX3N1Ym1pdCgpIHN0dWZmCih1bnBpbi91bnJlZiBi
bydzLCBldGMpLiAgSSBzdXBwb3NlIEkgY291bGQganVzdCBzcGxpdCB0aGluZ3MgdXAgdG8KY2Fs
bCBkbWFfZmVuY2Vfc2lnbmFsKCkgZWFybGllciwgYW5kICp0aGVuKiBkbyB0aGUgcmV0aXJlX3N1
Ym1pdHMoKQpzdHVmZi4KCkJSLAotUgoKPiBJdCBlc3NlbnRpYWxseSBleGlzdHMgb25seSBmb3Ig
b2xkIGRyaXZlcnMgd2hlcmUgLT5lbmFibGVfc2lnbmFsbGluZwo+IGlzIHVucmVsaWFibGUgYW5k
IHdlIHBhcGVyIG92ZXIgdGhhdCB3aXRoIGEgcmV0cnkgbG9vcCBpbiAtPndhaXQgYW5kCj4gcHJh
eSBubyBvbmUgbm90aWNlcyB0aGF0IGl0J3MgdG9vIGJ1dGNoZXJlZC4gVGhlIHByb3BlciBmaXgg
aXMgdG8gaGF2ZQo+IGEgZHJpdmVyIHRocmVhZCB0byBndWFyYW50ZWUgdGhhdCAtPmVuYWJsZV9z
aWduYWxsaW5nIHdvcmtzIHJlbGlhYmxlLAo+IHNvIHlvdSBkb24ndCBuZWVkIGEgLT53YWl0Lgo+
Cj4gQ2FuIHlvdSB0eXBlIHVwIGEga2VybmVsZG9jIHBhdGNoIGZvciBkbWFfZmVuY2Vfb3BzLT53
YWl0IHRvIGhhbW1lcgo+IHRoaXMgaW4gcGxlYXNlPwo+IC1EYW5pZWwKPgo+ID4KPiA+IEJSLAo+
ID4gLVIKPiA+Cj4gPiA+IFJlZ2FyZHMsCj4gPiA+IENocmlzdGlhbi4KPiA+ID4KPiA+ID4gPgo+
ID4gPiA+IE5vdGUgdGhhdCB0aGlzIHJlbW92ZXMgdGhlICF0aW1lb3V0IGNhc2UsIHdoaWNoIGhh
cyBub3QgYmVlbiB1c2VkIGluCj4gPiA+ID4gYSBsb25nIHRpbWUuCj4gPiA+Cj4gPiA+Cj4gPiA+
ID4KPiA+ID4gPiBTaWduZWQtb2ZmLWJ5OiBSb2IgQ2xhcmsgPHJvYmRjbGFya0BjaHJvbWl1bS5v
cmc+Cj4gPiA+ID4gLS0tCj4gPiA+ID4gICBkcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9mZW5jZS5j
IHwgNTkgKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tCj4gPiA+ID4gICAxIGZpbGUg
Y2hhbmdlZCwgMzQgaW5zZXJ0aW9ucygrKSwgMjUgZGVsZXRpb25zKC0pCj4gPiA+ID4KPiA+ID4g
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZmVuY2UuYyBiL2RyaXZlcnMv
Z3B1L2RybS9tc20vbXNtX2ZlbmNlLmMKPiA+ID4gPiBpbmRleCBjZDU5YTU5MTgwMzguLjhlZTk2
YjkwZGVkNiAxMDA2NDQKPiA+ID4gPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vbXNtL21zbV9mZW5j
ZS5jCj4gPiA+ID4gKysrIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZmVuY2UuYwo+ID4gPiA+
IEBAIC0zOCwxMSArMzgsMTAgQEAgc3RhdGljIGlubGluZSBib29sIGZlbmNlX2NvbXBsZXRlZChz
dHJ1Y3QgbXNtX2ZlbmNlX2NvbnRleHQgKmZjdHgsIHVpbnQzMl90IGZlbmMKPiA+ID4gPiAgICAg
ICByZXR1cm4gKGludDMyX3QpKGZjdHgtPmNvbXBsZXRlZF9mZW5jZSAtIGZlbmNlKSA+PSAwOwo+
ID4gPiA+ICAgfQo+ID4gPiA+Cj4gPiA+ID4gLS8qIGxlZ2FjeSBwYXRoIGZvciBXQUlUX0ZFTkNF
IGlvY3RsOiAqLwo+ID4gPiA+IC1pbnQgbXNtX3dhaXRfZmVuY2Uoc3RydWN0IG1zbV9mZW5jZV9j
b250ZXh0ICpmY3R4LCB1aW50MzJfdCBmZW5jZSwKPiA+ID4gPiAtICAgICAgICAgICAgIGt0aW1l
X3QgKnRpbWVvdXQsIGJvb2wgaW50ZXJydXB0aWJsZSkKPiA+ID4gPiArc3RhdGljIHNpZ25lZCBs
b25nIHdhaXRfZmVuY2Uoc3RydWN0IG1zbV9mZW5jZV9jb250ZXh0ICpmY3R4LCB1aW50MzJfdCBm
ZW5jZSwKPiA+ID4gPiArICAgICAgICAgICAgIHNpZ25lZCBsb25nIHJlbWFpbmluZ19qaWZmaWVz
LCBib29sIGludGVycnVwdGlibGUpCj4gPiA+ID4gICB7Cj4gPiA+ID4gLSAgICAgaW50IHJldDsK
PiA+ID4gPiArICAgICBzaWduZWQgbG9uZyByZXQ7Cj4gPiA+ID4KPiA+ID4gPiAgICAgICBpZiAo
ZmVuY2UgPiBmY3R4LT5sYXN0X2ZlbmNlKSB7Cj4gPiA+ID4gICAgICAgICAgICAgICBEUk1fRVJS
T1JfUkFURUxJTUlURUQoIiVzOiB3YWl0aW5nIG9uIGludmFsaWQgZmVuY2U6ICV1IChvZiAldSlc
biIsCj4gPiA+ID4gQEAgLTUwLDMzICs0OSwzNCBAQCBpbnQgbXNtX3dhaXRfZmVuY2Uoc3RydWN0
IG1zbV9mZW5jZV9jb250ZXh0ICpmY3R4LCB1aW50MzJfdCBmZW5jZSwKPiA+ID4gPiAgICAgICAg
ICAgICAgIHJldHVybiAtRUlOVkFMOwo+ID4gPiA+ICAgICAgIH0KPiA+ID4gPgo+ID4gPiA+IC0g
ICAgIGlmICghdGltZW91dCkgewo+ID4gPiA+IC0gICAgICAgICAgICAgLyogbm8td2FpdDogKi8K
PiA+ID4gPiAtICAgICAgICAgICAgIHJldCA9IGZlbmNlX2NvbXBsZXRlZChmY3R4LCBmZW5jZSkg
PyAwIDogLUVCVVNZOwo+ID4gPiA+ICsgICAgIGlmIChpbnRlcnJ1cHRpYmxlKSB7Cj4gPiA+ID4g
KyAgICAgICAgICAgICByZXQgPSB3YWl0X2V2ZW50X2ludGVycnVwdGlibGVfdGltZW91dChmY3R4
LT5ldmVudCwKPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgZmVuY2VfY29tcGxldGVkKGZj
dHgsIGZlbmNlKSwKPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nX2ppZmZp
ZXMpOwo+ID4gPiA+ICAgICAgIH0gZWxzZSB7Cj4gPiA+ID4gLSAgICAgICAgICAgICB1bnNpZ25l
ZCBsb25nIHJlbWFpbmluZ19qaWZmaWVzID0gdGltZW91dF90b19qaWZmaWVzKHRpbWVvdXQpOwo+
ID4gPiA+IC0KPiA+ID4gPiAtICAgICAgICAgICAgIGlmIChpbnRlcnJ1cHRpYmxlKQo+ID4gPiA+
IC0gICAgICAgICAgICAgICAgICAgICByZXQgPSB3YWl0X2V2ZW50X2ludGVycnVwdGlibGVfdGlt
ZW91dChmY3R4LT5ldmVudCwKPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICBm
ZW5jZV9jb21wbGV0ZWQoZmN0eCwgZmVuY2UpLAo+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHJlbWFpbmluZ19qaWZmaWVzKTsKPiA+ID4gPiAtICAgICAgICAgICAgIGVsc2UK
PiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgcmV0ID0gd2FpdF9ldmVudF90aW1lb3V0KGZj
dHgtPmV2ZW50LAo+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlbmNlX2Nv
bXBsZXRlZChmY3R4LCBmZW5jZSksCj4gPiA+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcmVtYWluaW5nX2ppZmZpZXMpOwo+ID4gPiA+IC0KPiA+ID4gPiAtICAgICAgICAgICAgIGlm
IChyZXQgPT0gMCkgewo+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICBEQkcoInRpbWVvdXQg
d2FpdGluZyBmb3IgZmVuY2U6ICV1IChjb21wbGV0ZWQ6ICV1KSIsCj4gPiA+ID4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZW5jZSwgZmN0eC0+Y29tcGxldGVkX2ZlbmNl
KTsKPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgcmV0ID0gLUVUSU1FRE9VVDsKPiA+ID4g
PiAtICAgICAgICAgICAgIH0gZWxzZSBpZiAocmV0ICE9IC1FUkVTVEFSVFNZUykgewo+ID4gPiA+
IC0gICAgICAgICAgICAgICAgICAgICByZXQgPSAwOwo+ID4gPiA+IC0gICAgICAgICAgICAgfQo+
ID4gPiA+ICsgICAgICAgICAgICAgcmV0ID0gd2FpdF9ldmVudF90aW1lb3V0KGZjdHgtPmV2ZW50
LAo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICBmZW5jZV9jb21wbGV0ZWQoZmN0eCwgZmVu
Y2UpLAo+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdfamlmZmllcyk7Cj4g
PiA+ID4gKyAgICAgfQo+ID4gPiA+ICsKPiA+ID4gPiArICAgICBpZiAocmV0ID09IDApIHsKPiA+
ID4gPiArICAgICAgICAgICAgIERCRygidGltZW91dCB3YWl0aW5nIGZvciBmZW5jZTogJXUgKGNv
bXBsZXRlZDogJXUpIiwKPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZW5j
ZSwgZmN0eC0+Y29tcGxldGVkX2ZlbmNlKTsKPiA+ID4gPiArICAgICAgICAgICAgIHJldCA9IC1F
VElNRURPVVQ7Cj4gPiA+ID4gKyAgICAgfSBlbHNlIGlmIChyZXQgIT0gLUVSRVNUQVJUU1lTKSB7
Cj4gPiA+ID4gKyAgICAgICAgICAgICByZXQgPSAwOwo+ID4gPiA+ICAgICAgIH0KPiA+ID4gPgo+
ID4gPiA+ICAgICAgIHJldHVybiByZXQ7Cj4gPiA+ID4gICB9Cj4gPiA+ID4KPiA+ID4gPiArLyog
bGVnYWN5IHBhdGggZm9yIFdBSVRfRkVOQ0UgaW9jdGw6ICovCj4gPiA+ID4gK2ludCBtc21fd2Fp
dF9mZW5jZShzdHJ1Y3QgbXNtX2ZlbmNlX2NvbnRleHQgKmZjdHgsIHVpbnQzMl90IGZlbmNlLAo+
ID4gPiA+ICsgICAgICAgICAgICAga3RpbWVfdCAqdGltZW91dCwgYm9vbCBpbnRlcnJ1cHRpYmxl
KQo+ID4gPiA+ICt7Cj4gPiA+ID4gKyAgICAgcmV0dXJuIHdhaXRfZmVuY2UoZmN0eCwgZmVuY2Us
IHRpbWVvdXRfdG9famlmZmllcyh0aW1lb3V0KSwgaW50ZXJydXB0aWJsZSk7Cj4gPiA+ID4gK30K
PiA+ID4gPiArCj4gPiA+ID4gICAvKiBjYWxsZWQgZnJvbSB3b3JrcXVldWUgKi8KPiA+ID4gPiAg
IHZvaWQgbXNtX3VwZGF0ZV9mZW5jZShzdHJ1Y3QgbXNtX2ZlbmNlX2NvbnRleHQgKmZjdHgsIHVp
bnQzMl90IGZlbmNlKQo+ID4gPiA+ICAgewo+ID4gPiA+IEBAIC0xMTQsMTAgKzExNCwxOSBAQCBz
dGF0aWMgYm9vbCBtc21fZmVuY2Vfc2lnbmFsZWQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCj4g
PiA+ID4gICAgICAgcmV0dXJuIGZlbmNlX2NvbXBsZXRlZChmLT5mY3R4LCBmLT5iYXNlLnNlcW5v
KTsKPiA+ID4gPiAgIH0KPiA+ID4gPgo+ID4gPiA+ICtzdGF0aWMgc2lnbmVkIGxvbmcgbXNtX2Zl
bmNlX3dhaXQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsIGJvb2wgaW50ciwKPiA+ID4gPiArICAg
ICAgICAgICAgIHNpZ25lZCBsb25nIHRpbWVvdXQpCj4gPiA+ID4gK3sKPiA+ID4gPiArICAgICBz
dHJ1Y3QgbXNtX2ZlbmNlICpmID0gdG9fbXNtX2ZlbmNlKGZlbmNlKTsKPiA+ID4gPiArCj4gPiA+
ID4gKyAgICAgcmV0dXJuIHdhaXRfZmVuY2UoZi0+ZmN0eCwgZmVuY2UtPnNlcW5vLCB0aW1lb3V0
LCBpbnRyKTsKPiA+ID4gPiArfQo+ID4gPiA+ICsKPiA+ID4gPiAgIHN0YXRpYyBjb25zdCBzdHJ1
Y3QgZG1hX2ZlbmNlX29wcyBtc21fZmVuY2Vfb3BzID0gewo+ID4gPiA+ICAgICAgIC5nZXRfZHJp
dmVyX25hbWUgPSBtc21fZmVuY2VfZ2V0X2RyaXZlcl9uYW1lLAo+ID4gPiA+ICAgICAgIC5nZXRf
dGltZWxpbmVfbmFtZSA9IG1zbV9mZW5jZV9nZXRfdGltZWxpbmVfbmFtZSwKPiA+ID4gPiAgICAg
ICAuc2lnbmFsZWQgPSBtc21fZmVuY2Vfc2lnbmFsZWQsCj4gPiA+ID4gKyAgICAgLndhaXQgPSBt
c21fZmVuY2Vfd2FpdCwKPiA+ID4gPiAgIH07Cj4gPiA+ID4KPiA+ID4gPiAgIHN0cnVjdCBkbWFf
ZmVuY2UgKgo+ID4gPgo+Cj4KPgo+IC0tCj4gRGFuaWVsIFZldHRlcgo+IFNvZnR3YXJlIEVuZ2lu
ZWVyLCBJbnRlbCBDb3Jwb3JhdGlvbgo+IGh0dHA6Ly9ibG9nLmZmd2xsLmNoCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbmFyby1tbS1zaWcgbWFpbGlu
ZyBsaXN0CkxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZwpodHRwczovL2xpc3RzLmxpbmFy
by5vcmcvbWFpbG1hbi9saXN0aW5mby9saW5hcm8tbW0tc2lnCg==
