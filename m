Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 5C7A34EABE5
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 29 Mar 2022 13:06:09 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 93D483EC0C
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 29 Mar 2022 11:06:08 +0000 (UTC)
Received: from mail-oi1-f176.google.com (mail-oi1-f176.google.com [209.85.167.176])
	by lists.linaro.org (Postfix) with ESMTPS id 48DA63ED20
	for <linaro-mm-sig@lists.linaro.org>; Thu, 17 Feb 2022 10:13:36 +0000 (UTC)
Received: by mail-oi1-f176.google.com with SMTP id 4so5281978oil.11
        for <linaro-mm-sig@lists.linaro.org>; Thu, 17 Feb 2022 02:13:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20210112;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to
         :cc:content-transfer-encoding;
        bh=FVhqmkH6yc31MloKbV/NsodtEi0k7Jmsk5XVPv0CBzk=;
        b=Vo1V1cH5WWS/Rldjvk0N7Q8JDm1Uad2uP3jDgcyuHEOXedhkZOMxejMfFjVa5Cubt6
         U1eBSItErjVYqgOt+h5Ex6pdRJmYl6mwABclufO9w77bbSXcv1ch6UedDg+UfoILGENR
         /wA8hirqYV8zYA5gIzAFDxnyLgIGQHU5/udM7vJdiZR2hDD2m01ZriCiVIL2ue8Y8CmN
         IEpbJKv1zIPQFlEeojUtE9DgQS3+MVv3KBlfUeYL0aD4fY7hEWpsndcf3c6YwG3ZxclH
         +kjUZ+ZbS7cJ/qSu9Id7eNbbIkmTSllXAlEFqsrcI4n8ztcNfSrqwKee74Re5hskuQ6a
         76hA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to:cc:content-transfer-encoding;
        bh=FVhqmkH6yc31MloKbV/NsodtEi0k7Jmsk5XVPv0CBzk=;
        b=yJ/JvGY0Kg7ATT+lFr7DJNlih3HXFexMsinR7jv37665PC+C351aS3vyYPSUTinWHd
         MlP3Demw83lwFcmfn/uR39aWJSCbSia2T1NBj2aSRdAp37Vk5jOX2Td5RNVOUyLhD0gV
         n83ZgmKPr4upfqKwLf2yd2KxSh5tfdV8aOkhvhXn6/ixSoymC4GqN08NZuExAEYrTmNi
         lZlv0ohO+31Be7QS2j8rwmpwyoxxQbg+VIbolguQsL45jKggX24dhnbwpdfW+bTjt13t
         3Vgs+QR3ND2L1RcjA0e1pui8W70qmZc7Q8lirlcXfNnzOiolG+MlCJPHnuZjo5QXf/Cd
         mYQA==
X-Gm-Message-State: AOAM5321XbZQlIqzqY7toQY9aJ5tjnalSGLJ8r914txxsg0ywmj/SY3V
	PGVHlETCXRhL0SOJmILMrZ3TyhOr1oSW9hxJwSw=
X-Google-Smtp-Source: ABdhPJyaOqfQDKcFfPHx4hBWWA9Y6opcSZuE49en9BS0Q2xUMsYy9e0p9OD+i2zArzALhou6jM77HogzK9E0aRQETYk=
X-Received: by 2002:a05:6808:188b:b0:2d4:70f2:3cfa with SMTP id
 bi11-20020a056808188b00b002d470f23cfamr824941oib.168.1645092815615; Thu, 17
 Feb 2022 02:13:35 -0800 (PST)
MIME-Version: 1.0
References: <20220217090440.4468-1-qiang.yu@amd.com> <5d3fdd2c-e74a-49f4-2b28-32c06483236f@amd.com>
 <CAKGbVbtLTBJPF5eTu4rABUTBa8eqjQvqjo1AEUrzgPgYgCREuA@mail.gmail.com> <dac70c05-e712-d2e3-2267-278380895f1e@amd.com>
In-Reply-To: <dac70c05-e712-d2e3-2267-278380895f1e@amd.com>
From: Qiang Yu <yuq825@gmail.com>
Date: Thu, 17 Feb 2022 18:13:24 +0800
Message-ID: <CAKGbVbvtLbDiKrX80-dMnipdLkTE+FP=g_mx37e12fuMtA1Y4Q@mail.gmail.com>
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
X-MailFrom: yuq825@gmail.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
Message-ID-Hash: 5BWKXUD4PRFB22QYSQI6335K4JY5T6EG
X-Message-ID-Hash: 5BWKXUD4PRFB22QYSQI6335K4JY5T6EG
X-Mailman-Approved-At: Tue, 29 Mar 2022 11:05:55 +0000
CC: Qiang Yu <qiang.yu@amd.com>, Alex Deucher <alexander.deucher@amd.com>, "Pan, Xinhui" <Xinhui.Pan@amd.com>, David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>, linaro-mm-sig@lists.linaro.org, linux-media@vger.kernel.org, dri-devel <dri-devel@lists.freedesktop.org>, amd-gfx@lists.freedesktop.org, Linux Kernel Mailing List <linux-kernel@vger.kernel.org>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] Re: [PATCH] drm/amdgpu: check vm bo eviction valuable at last
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/5BWKXUD4PRFB22QYSQI6335K4JY5T6EG/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

T24gVGh1LCBGZWIgMTcsIDIwMjIgYXQgNTo0NiBQTSBDaHJpc3RpYW4gS8O2bmlnDQo8Y2hyaXN0
aWFuLmtvZW5pZ0BhbWQuY29tPiB3cm90ZToNCj4NCj4gQW0gMTcuMDIuMjIgdW0gMTA6NDAgc2No
cmllYiBRaWFuZyBZdToNCj4gPiBPbiBUaHUsIEZlYiAxNywgMjAyMiBhdCA1OjE1IFBNIENocmlz
dGlhbiBLw7ZuaWcNCj4gPiA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPiB3cm90ZToNCj4gPj4g
QW0gMTcuMDIuMjIgdW0gMTA6MDQgc2NocmllYiBRaWFuZyBZdToNCj4gPj4+IFdvcmtzdGF0aW9u
IGFwcGxpY2F0aW9uIEFOU0EvTUVUQSBnZXQgdGhpcyBlcnJvciBkbWVzZzoNCj4gPj4+IFtkcm06
YW1kZ3B1X2dlbV92YV9pb2N0bCBbYW1kZ3B1XV0gKkVSUk9SKiBDb3VsZG4ndCB1cGRhdGUgQk9f
VkEgKC0xNikNCj4gPj4+DQo+ID4+PiBUaGlzIGlzIGNhdXNlZCBieToNCj4gPj4+IDEuIGNyZWF0
ZSBhIDI1Nk1CIGJ1ZmZlciBpbiBpbnZpc2libGUgVlJBTQ0KPiA+Pj4gMi4gQ1BVIG1hcCB0aGUg
YnVmZmVyIGFuZCBhY2Nlc3MgaXQgY2F1c2VzIHZtX2ZhdWx0IGFuZCB0cnkgdG8gbW92ZQ0KPiA+
Pj4gICAgICBpdCB0byB2aXNpYmxlIFZSQU0NCj4gPj4+IDMuIGZvcmNlIHZpc2libGUgVlJBTSBz
cGFjZSBhbmQgdHJhdmVyc2UgYWxsIFZSQU0gYm9zIHRvIGNoZWNrIGlmDQo+ID4+PiAgICAgIGV2
aWN0aW5nIHRoaXMgYm8gaXMgdmFsdWFibGUNCj4gPj4+IDQuIHdoZW4gY2hlY2tpbmcgYSBWTSBi
byAoaW4gaW52aXNpYmxlIFZSQU0pLCBhbWRncHVfdm1fZXZpY3RhYmxlKCkNCj4gPj4+ICAgICAg
d2lsbCBzZXQgYW1kZ3B1X3ZtLT5ldmljdGluZywgYnV0IGxhdHRlciBkdWUgdG8gbm90IGluIHZp
c2libGUNCj4gPj4+ICAgICAgVlJBTSwgd29uJ3QgcmVhbGx5IGV2aWN0IGl0IHNvIG5vdCBhZGQg
aXQgdG8gYW1kZ3B1X3ZtLT5ldmljdGVkDQo+ID4+PiA1LiBiZWZvcmUgbmV4dCBDUyB0byBjbGVh
ciB0aGUgYW1kZ3B1X3ZtLT5ldmljdGluZywgdXNlciBWTSBvcHMNCj4gPj4+ICAgICAgaW9jdGwg
d2lsbCBwYXNzIGFtZGdwdV92bV9yZWFkeSgpIChjaGVjayBhbWRncHVfdm0tPmV2aWN0ZWQpDQo+
ID4+PiAgICAgIGJ1dCBmYWlsIGluIGFtZGdwdV92bV9ib191cGRhdGVfbWFwcGluZygpIChjaGVj
aw0KPiA+Pj4gICAgICBhbWRncHVfdm0tPmV2aWN0aW5nKSBhbmQgZ2V0IHRoaXMgZXJyb3IgbG9n
DQo+ID4+Pg0KPiA+Pj4gVGhpcyBlcnJvciB3b24ndCBhZmZlY3QgZnVuY3Rpb25hbGl0eSBhcyBu
ZXh0IENTIHdpbGwgZmluaXNoIHRoZQ0KPiA+Pj4gd2FpdGluZyBWTSBvcHMuIEJ1dCB3ZSdkIGJl
dHRlciBtYWtlIHRoZSBhbWRncHVfdm0tPmV2aWN0aW5nDQo+ID4+PiBjb3JyZWN0bHkgcmVmbGFj
dCB0aGUgdm0gc3RhdHVzIGFuZCBjbGVhciB0aGUgZXJyb3IgbG9nLg0KPiA+PiBXZWxsIE5BSywg
dGhhdCBpcyBpbnRlbnRpb25hbCBiZWhhdmlvci4NCj4gPj4NCj4gPj4gVGhlIFZNIHBhZ2UgdGFi
bGVzIHdoZXJlIGNvbnNpZGVyZWQgZm9yIGV2aWN0aW9uLCBzbyBzZXR0aW5nIHRoZSBmbGFnIGlz
DQo+ID4+IGNvcnJlY3QgZXZlbiB3aGVuIHRoZSBwYWdlIHRhYmxlcyBsYXRlciBvbiBhcmUgbm90
IGFjdHVhbGx5IGV2aWN0ZWQuDQo+ID4+DQo+ID4gQnV0IHRoaXMgd2lsbCB1bm5lY2Vzc2FyaWx5
IHN0b3AgbGF0dGVyIHVzZXIgVk0gb3BzIGluIGlvY3RsIGJlZm9yZSBDUw0KPiA+IGV2ZW4gd2hl
biB0aGUgVk0gYm9zIGFyZSBub3QgZXZpY3RlZC4NCj4gPiBXb24ndCB0aGlzIGhhdmUgYW55IG5l
Z2F0aXZlIGVmZmVjdCB3aGVuIGNvdWxkIGRvIGJldHRlcj8NCj4NCj4gTm8sIHRoaXMgd2lsbCBo
YXZlIGEgcG9zaXRpdmUgZWZmZWN0LiBTZWUgdGhlIFZNIHdhcyBhbHJlYWR5IGNvbnNpZGVyZWQN
Cj4gZm9yIGV2aWN0aW9uIGJlY2F1c2UgaXQgaXMgaWRsZS4NCj4NCj4gVXBkYXRpbmcgaXQgaW1t
ZWRpYXRlbHkgZG9lc24ndCBuZWNlc3NhcmlseSBtYWtlIHNlbnNlLCB3ZSBzaG91bGQgd2FpdA0K
PiB3aXRoIHRoYXQgdW50aWwgaXRzIG5leHQgdXNhZ2UuDQo+DQo+IEFkZGl0aW9uYWwgdG8gdGhh
dCB0aGlzIHBhdGNoIGRvZXNuJ3QgcmVhbGx5IGZpeCB0aGUgcHJvYmxlbSwgaXQganVzdA0KPiBt
aXRpZ2F0ZXMgaXQuDQo+DQo+IEV2aWN0aW9uIGNhbiBmYWlsIGxhdGVyIG9uIGZvciBhIGNvdXBs
ZSBvZiByZWFzb25zIGFuZCB3ZSBhYnNvbHV0ZWx5DQo+IG5lZWQgdG8gY2hlY2sgdGhlIGZsYWcg
aW5zdGVhZCBvZiB0aGUgbGlzdCBpbiBhbWRncHVfdm1fcmVhZHkoKS4NClRoZSBmbGFnIG9ubHkg
Zm9yIGJvdGggZmxhZyBhbmQgbGlzdD8gTG9va3MgbGlrZSBzaG91bGQgYmUgYm90aCBhcw0KdGhl
IGxpc3QgaW5kaWNhdGUgc29tZSB2bSBwYWdlIHRhYmxlIG5lZWQgdG8gYmUgdXBkYXRlZCBhbmQg
Y291bGQNCmRlbGF5IHRoZSB1c2VyIHVwZGF0ZSB3aXRoIHRoZSBzYW1lIGxvZ2ljIGFzIHlvdSBk
ZXNjcmliZWQgYWJvdmUuDQoNClJlZ2FyZHMsDQpRaWFuZw0KDQo+DQo+IFJlZ2FyZHMsDQo+IENo
cmlzdGlhbi4NCj4NCj4gPg0KPiA+IFJlZ2FyZHMsDQo+ID4gUWlhbmcNCj4gPg0KPiA+PiBXaGF0
IHdlIHNob3VsZCByYXRoZXIgZG8gaXMgdG8gZml4IGFtZGdwdV92bV9yZWFkeSgpIHRvIHRha2Ug
YSBsb29rIGF0DQo+ID4+IHRoZSBmbGFnIGluc3RlYWQgb2YgdGhlIGxpbmtlZCBsaXN0Lg0KPiA+
Pg0KPiA+PiBSZWdhcmRzLA0KPiA+PiBDaHJpc3RpYW4uDQo+ID4+DQo+ID4+PiBTaWduZWQtb2Zm
LWJ5OiBRaWFuZyBZdSA8cWlhbmcueXVAYW1kLmNvbT4NCj4gPj4+IC0tLQ0KPiA+Pj4gICAgZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIHwgODUgKysrKysrKysrKysrKyst
LS0tLS0tLS0tLQ0KPiA+Pj4gICAgMSBmaWxlIGNoYW5nZWQsIDQ3IGluc2VydGlvbnMoKyksIDM4
IGRlbGV0aW9ucygtKQ0KPiA+Pj4NCj4gPj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdHRtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRn
cHVfdHRtLmMNCj4gPj4+IGluZGV4IDVhMzJlZTY2ZDhjOC4uODhhMjc5MTEwNTRmIDEwMDY0NA0K
PiA+Pj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jDQo+ID4+
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMNCj4gPj4+IEBA
IC0xMzA2LDQ1ICsxMzA2LDExIEBAIHVpbnQ2NF90IGFtZGdwdV90dG1fdHRfcHRlX2ZsYWdzKHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3QgdHRtX3R0ICp0dG0sDQo+ID4+PiAgICAg
ICAgcmV0dXJuIGZsYWdzOw0KPiA+Pj4gICAgfQ0KPiA+Pj4NCj4gPj4+IC0vKg0KPiA+Pj4gLSAq
IGFtZGdwdV90dG1fYm9fZXZpY3Rpb25fdmFsdWFibGUgLSBDaGVjayB0byBzZWUgaWYgd2UgY2Fu
IGV2aWN0IGEgYnVmZmVyDQo+ID4+PiAtICogb2JqZWN0Lg0KPiA+Pj4gLSAqDQo+ID4+PiAtICog
UmV0dXJuIHRydWUgaWYgZXZpY3Rpb24gaXMgc2Vuc2libGUuIENhbGxlZCBieSB0dG1fbWVtX2V2
aWN0X2ZpcnN0KCkgb24NCj4gPj4+IC0gKiBiZWhhbGYgb2YgdHRtX2JvX21lbV9mb3JjZV9zcGFj
ZSgpIHdoaWNoIHRyaWVzIHRvIGV2aWN0IGJ1ZmZlciBvYmplY3RzIHVudGlsDQo+ID4+PiAtICog
aXQgY2FuIGZpbmQgc3BhY2UgZm9yIGEgbmV3IG9iamVjdCBhbmQgYnkgdHRtX2JvX2ZvcmNlX2xp
c3RfY2xlYW4oKSB3aGljaCBpcw0KPiA+Pj4gLSAqIHVzZWQgdG8gY2xlYW4gb3V0IGEgbWVtb3J5
IHNwYWNlLg0KPiA+Pj4gLSAqLw0KPiA+Pj4gLXN0YXRpYyBib29sIGFtZGdwdV90dG1fYm9fZXZp
Y3Rpb25fdmFsdWFibGUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywNCj4gPj4+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCB0dG1fcGxh
Y2UgKnBsYWNlKQ0KPiA+Pj4gK3N0YXRpYyBib29sIGFtZGdwdV90dG1fbWVtX2V2aWN0aW9uX3Zh
bHVhYmxlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sDQo+ID4+PiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IHR0bV9wbGFjZSAqcGxh
Y2UpDQo+ID4+PiAgICB7DQo+ID4+PiAgICAgICAgdW5zaWduZWQgbG9uZyBudW1fcGFnZXMgPSBi
by0+cmVzb3VyY2UtPm51bV9wYWdlczsNCj4gPj4+ICAgICAgICBzdHJ1Y3QgYW1kZ3B1X3Jlc19j
dXJzb3IgY3Vyc29yOw0KPiA+Pj4gLSAgICAgc3RydWN0IGRtYV9yZXN2X2xpc3QgKmZsaXN0Ow0K
PiA+Pj4gLSAgICAgc3RydWN0IGRtYV9mZW5jZSAqZjsNCj4gPj4+IC0gICAgIGludCBpOw0KPiA+
Pj4gLQ0KPiA+Pj4gLSAgICAgLyogU3dhcG91dD8gKi8NCj4gPj4+IC0gICAgIGlmIChiby0+cmVz
b3VyY2UtPm1lbV90eXBlID09IFRUTV9QTF9TWVNURU0pDQo+ID4+PiAtICAgICAgICAgICAgIHJl
dHVybiB0cnVlOw0KPiA+Pj4gLQ0KPiA+Pj4gLSAgICAgaWYgKGJvLT50eXBlID09IHR0bV9ib190
eXBlX2tlcm5lbCAmJg0KPiA+Pj4gLSAgICAgICAgICFhbWRncHVfdm1fZXZpY3RhYmxlKHR0bV90
b19hbWRncHVfYm8oYm8pKSkNCj4gPj4+IC0gICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KPiA+
Pj4gLQ0KPiA+Pj4gLSAgICAgLyogSWYgYm8gaXMgYSBLRkQgQk8sIGNoZWNrIGlmIHRoZSBibyBi
ZWxvbmdzIHRvIHRoZSBjdXJyZW50IHByb2Nlc3MuDQo+ID4+PiAtICAgICAgKiBJZiB0cnVlLCB0
aGVuIHJldHVybiBmYWxzZSBhcyBhbnkgS0ZEIHByb2Nlc3MgbmVlZHMgYWxsIGl0cyBCT3MgdG8N
Cj4gPj4+IC0gICAgICAqIGJlIHJlc2lkZW50IHRvIHJ1biBzdWNjZXNzZnVsbHkNCj4gPj4+IC0g
ICAgICAqLw0KPiA+Pj4gLSAgICAgZmxpc3QgPSBkbWFfcmVzdl9zaGFyZWRfbGlzdChiby0+YmFz
ZS5yZXN2KTsNCj4gPj4+IC0gICAgIGlmIChmbGlzdCkgew0KPiA+Pj4gLSAgICAgICAgICAgICBm
b3IgKGkgPSAwOyBpIDwgZmxpc3QtPnNoYXJlZF9jb3VudDsgKytpKSB7DQo+ID4+PiAtICAgICAg
ICAgICAgICAgICAgICAgZiA9IHJjdV9kZXJlZmVyZW5jZV9wcm90ZWN0ZWQoZmxpc3QtPnNoYXJl
ZFtpXSwNCj4gPj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRtYV9yZXN2X2hlbGQo
Ym8tPmJhc2UucmVzdikpOw0KPiA+Pj4gLSAgICAgICAgICAgICAgICAgICAgIGlmIChhbWRrZmRf
ZmVuY2VfY2hlY2tfbW0oZiwgY3VycmVudC0+bW0pKQ0KPiA+Pj4gLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KPiA+Pj4gLSAgICAgICAgICAgICB9DQo+ID4+PiAt
ICAgICB9DQo+ID4+Pg0KPiA+Pj4gICAgICAgIHN3aXRjaCAoYm8tPnJlc291cmNlLT5tZW1fdHlw
ZSkgew0KPiA+Pj4gICAgICAgIGNhc2UgQU1ER1BVX1BMX1BSRUVNUFQ6DQo+ID4+PiBAQCAtMTM3
NywxMCArMTM0Myw1MyBAQCBzdGF0aWMgYm9vbCBhbWRncHVfdHRtX2JvX2V2aWN0aW9uX3ZhbHVh
YmxlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sDQo+ID4+PiAgICAgICAgICAgICAgICBy
ZXR1cm4gZmFsc2U7DQo+ID4+Pg0KPiA+Pj4gICAgICAgIGRlZmF1bHQ6DQo+ID4+PiAtICAgICAg
ICAgICAgIGJyZWFrOw0KPiA+Pj4gKyAgICAgICAgICAgICByZXR1cm4gdHRtX2JvX2V2aWN0aW9u
X3ZhbHVhYmxlKGJvLCBwbGFjZSk7DQo+ID4+PiAgICAgICAgfQ0KPiA+Pj4gK30NCj4gPj4+DQo+
ID4+PiAtICAgICByZXR1cm4gdHRtX2JvX2V2aWN0aW9uX3ZhbHVhYmxlKGJvLCBwbGFjZSk7DQo+
ID4+PiArLyoNCj4gPj4+ICsgKiBhbWRncHVfdHRtX2JvX2V2aWN0aW9uX3ZhbHVhYmxlIC0gQ2hl
Y2sgdG8gc2VlIGlmIHdlIGNhbiBldmljdCBhIGJ1ZmZlcg0KPiA+Pj4gKyAqIG9iamVjdC4NCj4g
Pj4+ICsgKg0KPiA+Pj4gKyAqIFJldHVybiB0cnVlIGlmIGV2aWN0aW9uIGlzIHNlbnNpYmxlLiBD
YWxsZWQgYnkgdHRtX21lbV9ldmljdF9maXJzdCgpIG9uDQo+ID4+PiArICogYmVoYWxmIG9mIHR0
bV9ib19tZW1fZm9yY2Vfc3BhY2UoKSB3aGljaCB0cmllcyB0byBldmljdCBidWZmZXIgb2JqZWN0
cyB1bnRpbA0KPiA+Pj4gKyAqIGl0IGNhbiBmaW5kIHNwYWNlIGZvciBhIG5ldyBvYmplY3QgYW5k
IGJ5IHR0bV9ib19mb3JjZV9saXN0X2NsZWFuKCkgd2hpY2ggaXMNCj4gPj4+ICsgKiB1c2VkIHRv
IGNsZWFuIG91dCBhIG1lbW9yeSBzcGFjZS4NCj4gPj4+ICsgKi8NCj4gPj4+ICtzdGF0aWMgYm9v
bCBhbWRncHVfdHRtX2JvX2V2aWN0aW9uX3ZhbHVhYmxlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVj
dCAqYm8sDQo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
b25zdCBzdHJ1Y3QgdHRtX3BsYWNlICpwbGFjZSkNCj4gPj4+ICt7DQo+ID4+PiArICAgICBzdHJ1
Y3QgZG1hX3Jlc3ZfbGlzdCAqZmxpc3Q7DQo+ID4+PiArICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICpm
Ow0KPiA+Pj4gKyAgICAgaW50IGk7DQo+ID4+PiArDQo+ID4+PiArICAgICAvKiBTd2Fwb3V0PyAq
Lw0KPiA+Pj4gKyAgICAgaWYgKGJvLT5yZXNvdXJjZS0+bWVtX3R5cGUgPT0gVFRNX1BMX1NZU1RF
TSkNCj4gPj4+ICsgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQo+ID4+PiArDQo+ID4+PiArICAg
ICAvKiBJZiBibyBpcyBhIEtGRCBCTywgY2hlY2sgaWYgdGhlIGJvIGJlbG9uZ3MgdG8gdGhlIGN1
cnJlbnQgcHJvY2Vzcy4NCj4gPj4+ICsgICAgICAqIElmIHRydWUsIHRoZW4gcmV0dXJuIGZhbHNl
IGFzIGFueSBLRkQgcHJvY2VzcyBuZWVkcyBhbGwgaXRzIEJPcyB0bw0KPiA+Pj4gKyAgICAgICog
YmUgcmVzaWRlbnQgdG8gcnVuIHN1Y2Nlc3NmdWxseQ0KPiA+Pj4gKyAgICAgICovDQo+ID4+PiAr
ICAgICBmbGlzdCA9IGRtYV9yZXN2X3NoYXJlZF9saXN0KGJvLT5iYXNlLnJlc3YpOw0KPiA+Pj4g
KyAgICAgaWYgKGZsaXN0KSB7DQo+ID4+PiArICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBm
bGlzdC0+c2hhcmVkX2NvdW50OyArK2kpIHsNCj4gPj4+ICsgICAgICAgICAgICAgICAgICAgICBm
ID0gcmN1X2RlcmVmZXJlbmNlX3Byb3RlY3RlZChmbGlzdC0+c2hhcmVkW2ldLA0KPiA+Pj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZG1hX3Jlc3ZfaGVsZChiby0+YmFzZS5yZXN2KSk7
DQo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgaWYgKGFtZGtmZF9mZW5jZV9jaGVja19tbShm
LCBjdXJyZW50LT5tbSkpDQo+ID4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1
cm4gZmFsc2U7DQo+ID4+PiArICAgICAgICAgICAgIH0NCj4gPj4+ICsgICAgIH0NCj4gPj4+ICsN
Cj4gPj4+ICsgICAgIC8qIENoZWNrIGJ5IGRpZmZlcmVudCBtZW0gdHlwZS4gKi8NCj4gPj4+ICsg
ICAgIGlmICghYW1kZ3B1X3R0bV9tZW1fZXZpY3Rpb25fdmFsdWFibGUoYm8sIHBsYWNlKSkNCj4g
Pj4+ICsgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KPiA+Pj4gKw0KPiA+Pj4gKyAgICAgLyog
Vk0gYm8gc2hvdWxkIGJlIGNoZWNrZWQgYXQgbGFzdCBiZWNhdXNlIGl0IHdpbGwgbWFyayBWTSBl
dmljdGluZy4gKi8NCj4gPj4+ICsgICAgIGlmIChiby0+dHlwZSA9PSB0dG1fYm9fdHlwZV9rZXJu
ZWwpDQo+ID4+PiArICAgICAgICAgICAgIHJldHVybiBhbWRncHVfdm1fZXZpY3RhYmxlKHR0bV90
b19hbWRncHVfYm8oYm8pKTsNCj4gPj4+ICsNCj4gPj4+ICsgICAgIHJldHVybiB0cnVlOw0KPiA+
Pj4gICAgfQ0KPiA+Pj4NCj4gPj4+ICAgIHN0YXRpYyB2b2lkIGFtZGdwdV90dG1fdnJhbV9tbV9h
Y2Nlc3Moc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIGxvZmZfdCBwb3MsDQo+DQpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1h
aWxpbmcgbGlzdCAtLSBsaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKVG8gdW5zdWJzY3Jp
YmUgc2VuZCBhbiBlbWFpbCB0byBsaW5hcm8tbW0tc2lnLWxlYXZlQGxpc3RzLmxpbmFyby5vcmcK
