Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 83D041782D7
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  3 Mar 2020 20:08:30 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id A7605619CD
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  3 Mar 2020 19:08:29 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 94A77619D9; Tue,  3 Mar 2020 19:08:29 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	MISSING_HEADERS,RCVD_IN_DNSWL_BLOCKED,RCVD_IN_MSPIKE_H2,SPF_HELO_NONE
	autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 45533619B5;
	Tue,  3 Mar 2020 19:07:31 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id DEBDD6180F
 for <linaro-mm-sig@lists.linaro.org>; Tue,  3 Mar 2020 19:07:19 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id D2007619B5; Tue,  3 Mar 2020 19:07:19 +0000 (UTC)
Received: from mail-ed1-f67.google.com (mail-ed1-f67.google.com
 [209.85.208.67])
 by lists.linaro.org (Postfix) with ESMTPS id 9FBFD6180F
 for <linaro-mm-sig@lists.linaro.org>; Tue,  3 Mar 2020 19:05:40 +0000 (UTC)
Received: by mail-ed1-f67.google.com with SMTP id m25so5761820edq.8
 for <linaro-mm-sig@lists.linaro.org>; Tue, 03 Mar 2020 11:05:40 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:cc;
 bh=OjClmc/+gQuJ6ZLgRTF82QLR/kaFfwhtLhApUK8evZU=;
 b=FafYTJ57vtWiswjE4uFelpy1XrD5OpqU55Rn7+N9IZ0KnwEm4JyjzytFBX5RX1srup
 QF2/remJ+beWymIFJCWKA4Jl2dwX6DiwEj1uKlooYvS9YiBun7dRijrFdNu60sPcZeio
 tcbbNiwajk1wfCGonvQ5RDnVDOrGBjEXS6Oz7VYOuhd9SmSpkGmeh5a/BvBK6p8AdLAH
 LCUd1QZ75ywwp89t8CaJE31hbnjjdbuJ5VJ0VQYOU0y5y+YbJTsncqOYp5ymwx8A8mLE
 QCaQJh+3PENj0iBxeC9Syabl0T7Q9In2jBa1mgC7cUzt6NIMEPq0oqJzok5TvaoMc/O7
 tM9w==
X-Gm-Message-State: ANhLgQ09MtyLH/WLZnVI7cp7FF8/vubc/8tRx9l+NovHiCgo/dOIJX09
 FwdF9Pg5BmfAfVcrio8rDG14AHIbVuRx+HR/hQGglw==
X-Received: by 2002:aa7:c983:: with SMTP id c3mt5067706edt.98.1583262339396;
 Tue, 03 Mar 2020 11:05:39 -0800 (PST)
MIME-Version: 1.0
References: <20200226180937.106875-1-jason@jlekstrand.net>
 <20200303190318.522103-1-jason@jlekstrand.net>
In-Reply-To: <20200303190318.522103-1-jason@jlekstrand.net>
From: Jason Ekstrand <jason@jlekstrand.net>
Date: Tue, 3 Mar 2020 13:05:27 -0600
Message-ID: <CAOFGe97suifkJ4shncrjb0vUE+gaO2T7Db-PNcYMdUogUUyi=Q@mail.gmail.com>
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: Chenbo Feng <fengc@google.com>, Daniel Stone <daniels@collabora.com>,
 James Jones <jajones@nvidia.com>, Bas Nieuwenhuizen <bas@basnieuwenhuizen.nl>,
 LKML <linux-kernel@vger.kernel.org>, Greg Hackmann <ghackmann@google.com>,
 linaro-mm-sig@lists.linaro.org,
 =?UTF-8?Q?Kristian_H=C3=B8gsberg?= <hoegsberg@google.com>,
 Maling list - DRI developers <dri-devel@lists.freedesktop.org>,
 Jesse Hall <jessehall@google.com>, Dave Airlie <airlied@redhat.com>,
 =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>,
 linux-media@vger.kernel.org
Subject: Re: [Linaro-mm-sig] [PATCH] RFC: dma-buf: Add an API for importing
 and exporting sync files (v3)
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

VnVsa2FuIFdTSSB1c2VyIG9mIHRoZSBuZXcgQVBJOgoKaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0
b3Aub3JnL21lc2EvbWVzYS8tL21lcmdlX3JlcXVlc3RzLzQwMzcKCk9uIFR1ZSwgTWFyIDMsIDIw
MjAgYXQgMTowMyBQTSBKYXNvbiBFa3N0cmFuZCA8amFzb25Aamxla3N0cmFuZC5uZXQ+IHdyb3Rl
Ogo+Cj4gRXhwbGljaXQgc3luY2hyb25pemF0aW9uIGlzIHRoZSBmdXR1cmUuICBBdCBsZWFzdCwg
dGhhdCBzZWVtcyB0byBiZSB3aGF0Cj4gbW9zdCB1c2Vyc3BhY2UgQVBJcyBhcmUgYWdyZWVpbmcg
b24gYXQgdGhpcyBwb2ludC4gIEhvd2V2ZXIsIG1vc3Qgb2Ygb3VyCj4gTGludXggQVBJcyAoYm90
aCB1c2Vyc3BhY2UgYW5kIGtlcm5lbCBVQVBJKSBhcmUgY3VycmVudGx5IGJ1aWx0IGFyb3VuZAo+
IGltcGxpY2l0IHN5bmNocm9uaXphdGlvbiB3aXRoIGRtYS1idWYuICBXaGlsZSB3b3JrIGlzIG9u
Z29pbmcgdG8gY2hhbmdlCj4gbWFueSBvZiB0aGUgdXNlcnNwYWNlIEFQSXMgYW5kIHByb3RvY29s
cyB0byBhbiBleHBsaWNpdCBzeW5jaHJvbml6YXRpb24KPiBtb2RlbCwgc3dpdGNoaW5nIG92ZXIg
cGllY2VtZWFsIGlzIGRpZmZpY3VsdCBkdWUgdG8gdGhlIG51bWJlciBvZgo+IHBvdGVudGlhbCBj
b21wb25lbnRzIGludm9sdmVkLiAgT24gdGhlIGtlcm5lbCBzaWRlLCBtYW55IGRyaXZlcnMgdXNl
Cj4gZG1hLWJ1ZiBpbmNsdWRpbmcgR1BVICgzRC9jb21wdXRlKSwgZGlzcGxheSwgdjRsLCBhbmQg
b3RoZXJzLiAgSW4KPiB1c2Vyc3BhY2UsIHdlIGhhdmUgWDExLCBzZXZlcmFsIFdheWxhbmQgY29t
cG9zaXRvcnMsIDNEIGRyaXZlcnMsIGNvbXB1dGUKPiBkcml2ZXJzIChPcGVuQ0wgZXRjLiksIG1l
ZGlhIGVuY29kZS9kZWNvZGUsIGFuZCB0aGUgbGlzdCBnb2VzIG9uLgo+Cj4gVGhpcyBwYXRjaCBw
cm92aWRlcyBhIHBhdGggZm9yd2FyZCBieSBhbGxvd2luZyB1c2Vyc3BhY2UgdG8gbWFudWFsbHkK
PiBtYW5hZ2UgdGhlIGZlbmNlcyBhdHRhY2hlZCB0byBhIGRtYS1idWYuICBBbHRlcm5hdGl2ZWx5
LCBvbmUgY2FuIHRoaW5rCj4gb2YgdGhpcyBhcyBtYWtpbmcgZG1hLWJ1ZidzIGltcGxpY2l0IHN5
bmNocm9uaXphdGlvbiBzaW1wbHkgYSBjYXJyaWVyCj4gZm9yIGFuIGV4cGxpY2l0IGZlbmNlLiAg
VGhpcyBpcyBhY2NvbXBsaXNoZWQgYnkgYWRkaW5nIHR3byBJT0NUTHMgdG8KPiBkbWEtYnVmIGZv
ciBpbXBvcnRpbmcgYW5kIGV4cG9ydGluZyBhIHN5bmMgZmlsZSB0by9mcm9tIHRoZSBkbWEtYnVm
Lgo+IFRoaXMgd2F5IGEgdXNlcnNwYWNlIGNvbXBvbmVudCB3aGljaCBpcyB1c2VzIGV4cGxpY2l0
IHN5bmNocm9uaXphdGlvbiwKPiBzdWNoIGFzIGEgVnVsa2FuIGRyaXZlciwgY2FuIG1hbnVhbGx5
IHNldCB0aGUgd3JpdGUgZmVuY2Ugb24gYSBidWZmZXIKPiBiZWZvcmUgaGFuZGluZyBpdCBvZmYg
dG8gYW4gaW1wbGljaXRseSBzeW5jaHJvbml6ZWQgY29tcG9uZW50IHN1Y2ggYXMgYQo+IFdheWxh
bmQgY29tcG9zaXRvciBvciB2aWRlbyBlbmNvZGVyLiAgSW4gdGhpcyB3YXksIGVhY2ggb2YgdGhl
IGRpZmZlcmVudAo+IGNvbXBvbmVudHMgY2FuIGJlIHVwZ3JhZGVkIHRvIGFuIGV4cGxpY2l0IHN5
bmNocm9uaXphdGlvbiBtb2RlbCBvbmUgYXQgYQo+IHRpbWUgYXMgbG9uZyBhcyB0aGUgdXNlcnNw
YWNlIHBpZWNlcyBjb25uZWN0aW5nIHRoZW0gYXJlIGF3YXJlIG9mIGl0IGFuZAo+IGltcG9ydC9l
eHBvcnQgZmVuY2VzIGF0IHRoZSByaWdodCB0aW1lcy4KPgo+IFRoZXJlIGlzIGEgcG90ZW50aWFs
IHJhY2UgY29uZGl0aW9uIHdpdGggdGhpcyBBUEkgaWYgdXNlcnNwYWNlIGlzIG5vdAo+IGNhcmVm
dWwuICBBIHR5cGljYWwgdXNlIGNhc2UgZm9yIGltcGxpY2l0IHN5bmNocm9uaXphdGlvbiBpcyB0
byB3YWl0IGZvcgo+IHRoZSBkbWEtYnVmIHRvIGJlIHJlYWR5LCB1c2UgaXQsIGFuZCB0aGVuIHNp
Z25hbCBpdCBmb3Igc29tZSBvdGhlcgo+IGNvbXBvbmVudC4gIEJlY2F1c2UgYSBzeW5jX2ZpbGUg
Y2Fubm90IGJlIGNyZWF0ZWQgdW50aWwgaXQgaXMgZ3VhcmFudGVlZAo+IHRvIGNvbXBsZXRlIGlu
IGZpbml0ZSB0aW1lLCB1c2Vyc3BhY2UgY2FuIG9ubHkgc2lnbmFsIHRoZSBkbWEtYnVmIGFmdGVy
Cj4gaXQgaGFzIGFscmVhZHkgc3VibWl0dGVkIHRoZSB3b3JrIHdoaWNoIHVzZXMgaXQgdG8gdGhl
IGtlcm5lbCBhbmQgaGFzCj4gcmVjZWl2ZWQgYSBzeW5jX2ZpbGUgYmFjay4gIFRoZXJlIGlzIG5v
IHdheSB0byBhdG9taWNhbGx5IHN1Ym1pdCBhCj4gd2FpdC11c2Utc2lnbmFsIG9wZXJhdGlvbi4g
IFRoaXMgaXMgbm90LCBob3dldmVyLCByZWFsbHkgYSBwcm9ibGVtIHdpdGgKPiB0aGlzIEFQSSBz
byBtdWNoIGFzIGl0IGlzIGEgcHJvYmxlbSB3aXRoIGV4cGxpY2l0IHN5bmNocm9uaXphdGlvbgo+
IGl0c2VsZi4gIFRoZSB3YXkgdGhpcyBpcyB0eXBpY2FsbHkgaGFuZGxlZCBpcyB0byBoYXZlIHZl
cnkgZXhwbGljaXQKPiBvd25lcnNoaXAgdHJhbnNmZXIgcG9pbnRzIGluIHRoZSBBUEkgb3IgcHJv
dG9jb2wgd2hpY2ggZW5zdXJlIHRoYXQgb25seQo+IG9uZSBjb21wb25lbnQgaXMgdXNpbmcgaXQg
YXQgYW55IGdpdmVuIHRpbWUuICBCb3RoIFgxMSAodmlhIHRoZSBQUkVTRU5UCj4gZXh0ZW5zaW9u
KSBhbmQgV2F5bGFuZCBwcm92aWRlIHN1Y2ggb3duZXJzaGlwIHRyYW5zZmVyIHBvaW50cyB2aWEK
PiBleHBsaWNpdCBwcmVzZW50IGFuZCBpZGxlIG1lc3NhZ2VzLgo+Cj4gVGhlIGRlY2lzaW9uIHdh
cyBpbnRlbnRpb25hbGx5IG1hZGUgaW4gdGhpcyBwYXRjaCB0byBtYWtlIHRoZSBpbXBvcnQgYW5k
Cj4gZXhwb3J0IG9wZXJhdGlvbnMgSU9DVExzIG9uIHRoZSBkbWEtYnVmIGl0c2VsZiByYXRoZXIg
dGhhbiBhcyBhIERSTQo+IElPQ1RMLiAgVGhpcyBtYWtlcyBpdCB0aGUgaW1wb3J0L2V4cG9ydCBv
cGVyYXRpb24gdW5pdmVyc2FsIGFjcm9zcyBhbGwKPiBjb21wb25lbnRzIHdoaWNoIHVzZSBkbWEt
YnVmIGluY2x1ZGluZyBHUFUsIGRpc3BsYXksIHY0bCwgYW5kIG90aGVycy4KPiBJdCBhbHNvIG1l
YW5zIHRoYXQgYSB1c2Vyc3BhY2UgY29tcG9uZW50IGNhbiBkbyB0aGUgaW1wb3J0L2V4cG9ydAo+
IHdpdGhvdXQgYWNjZXNzIHRvIHRoZSBEUk0gZmQgd2hpY2ggbWF5IGJlIHRyaWNreSB0byBnZXQg
aW4gY2FzZXMgd2hlcmUKPiB0aGUgY2xpZW50IGNvbW11bmljYXRlcyB3aXRoIERSTSB2aWEgYSB1
c2Vyc3BhY2UgQVBJIHN1Y2ggYXMgT3BlbkdMIG9yCj4gVnVsa2FuLiAgQXQgYSBmdXR1cmUgZGF0
ZSB3ZSBtYXkgY2hvb3NlIHRvIGFkZCBkaXJlY3QgaW1wb3J0L2V4cG9ydCBBUElzCj4gdG8gY29t
cG9uZW50cyBzdWNoIGFzIGRybV9zeW5jb2JqIHRvIGF2b2lkIGFsbG9jYXRpbmcgYSBmaWxlIGRl
c2NyaXB0b3IKPiBhbmQgZ29pbmcgdGhyb3VnaCB0d28gaW9jdGxzLiAgSG93ZXZlciwgdGhhdCBz
ZWVtcyB0byBiZSBzb21ldGhpbmcgb2YgYQo+IG1pY3JvLW9wdGltaXphdGlvbiBhcyBpbXBvcnQv
ZXhwb3J0IG9wZXJhdGlvbnMgYXJlIGxpa2VseSB0byBoYXBwZW4gYXQgYQo+IHJhdGUgb2YgYSBm
ZXcgcGVyIGZyYW1lIG9mIHJlbmRlcmVkIG9yIGRlY29kZWQgdmlkZW8uCj4KPiB2MiAoSmFzb24g
RWtzdHJhbmQpOgo+ICAtIFVzZSBhIHdyYXBwZXIgZG1hX2ZlbmNlX2FycmF5IG9mIGFsbCBmZW5j
ZXMgaW5jbHVkaW5nIHRoZSBuZXcgb25lCj4gICAgd2hlbiBpbXBvcnRpbmcgYW4gZXhjbHVzaXZl
IGZlbmNlLgo+Cj4gdjMgKEphc29uIEVrc3RyYW5kKToKPiAgLSBMb2NrIGFyb3VuZCBzZXR0aW5n
IHNoYXJlZCBmZW5jZXMgYXMgd2VsbCBhcyBleGNsdXNpdmUKPiAgLSBNYXJrIFNJR05BTF9TWU5D
X0ZJTEUgYXMgYSByZWFkLXdyaXRlIGlvY3RsLgo+ICAtIEluaXRpYWxpemUgcmV0IHRvIDAgaW4g
ZG1hX2J1Zl93YWl0X3N5bmNfZmlsZQo+Cj4gU2lnbmVkLW9mZi1ieTogSmFzb24gRWtzdHJhbmQg
PGphc29uQGpsZWtzdHJhbmQubmV0Pgo+IC0tLQo+ICBkcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5j
ICAgIHwgMTY0ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCj4gIGluY2x1ZGUv
dWFwaS9saW51eC9kbWEtYnVmLmggfCAgMTMgKystCj4gIDIgZmlsZXMgY2hhbmdlZCwgMTc1IGlu
c2VydGlvbnMoKyksIDIgZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEt
YnVmL2RtYS1idWYuYyBiL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMKPiBpbmRleCBkNDA5Nzg1
NmM4NmIuLjJjNDYwOGJhZTNjMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1
Zi5jCj4gKysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYwo+IEBAIC0yMCw2ICsyMCw3IEBA
Cj4gICNpbmNsdWRlIDxsaW51eC9kZWJ1Z2ZzLmg+Cj4gICNpbmNsdWRlIDxsaW51eC9tb2R1bGUu
aD4KPiAgI2luY2x1ZGUgPGxpbnV4L3NlcV9maWxlLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9zeW5j
X2ZpbGUuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L3BvbGwuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L2Rt
YS1yZXN2Lmg+Cj4gICNpbmNsdWRlIDxsaW51eC9tbS5oPgo+IEBAIC0zNDgsNiArMzQ5LDE2MyBA
QCBzdGF0aWMgbG9uZyBkbWFfYnVmX3NldF9uYW1lKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIGNv
bnN0IGNoYXIgX191c2VyICpidWYpCj4gICAgICAgICByZXR1cm4gcmV0Owo+ICB9Cj4KPiArLyog
VGhpcyBmdW5jdGlvbiB0YWtlcyBhIHJlZiB0byBhZGRfZmVuY2Ugb24gc3VjY2Vzcy4gIFRoZSBj
YWxsZXIgc3RpbGwKPiArICogb3ducyBpdHMgcmVmIGFuZCBoYXMgdG8gZG1hX2ZlbmNlX3B1dCBp
dC4KPiArICovCj4gK3N0YXRpYyBzdHJ1Y3QgZG1hX2ZlbmNlICpkbWFfYnVmX2dldF91bmlmaWVk
X2ZlbmNlKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IGRtYV9mZW5jZSAqYWRkX2ZlbmNlKQo+
ICt7Cj4gKyAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICoqZmVuY2VzID0gTlVMTDsKPiArICAgICAg
IHN0cnVjdCBkbWFfZmVuY2VfYXJyYXkgKmFycmF5Owo+ICsgICAgICAgdW5zaWduZWQgaSwgbnVt
X2ZlbmNlcyA9IDA7Cj4gKyAgICAgICBpbnQgcmV0Owo+ICsKPiArICAgICAgIHJldCA9IGRtYV9y
ZXN2X2dldF9mZW5jZXNfcmN1KGRtYWJ1Zi0+cmVzdiwgTlVMTCwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZudW1fZmVuY2VzLCAmZmVuY2VzKTsKPiArICAgICAgIGlm
IChyZXQpCj4gKyAgICAgICAgICAgICAgIHJldHVybiBOVUxMOyAvKiByZXQgY2FuIG9ubHkgYmUg
MCBvciAtRU5PTUVNICovCj4gKwo+ICsgICAgICAgaWYgKG51bV9mZW5jZXMgPT0gMCkgewo+ICsg
ICAgICAgICAgICAgICBpZiAoYWRkX2ZlbmNlKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAg
cmV0dXJuIGFkZF9mZW5jZTsKPiArICAgICAgICAgICAgICAgfSBlbHNlIHsKPiArICAgICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gZG1hX2ZlbmNlX2dldF9zdHViKCk7Cj4gKyAgICAgICAgICAg
ICAgIH0KPiArICAgICAgIH0gZWxzZSBpZiAobnVtX2ZlbmNlcyA9PSAxICYmICghYWRkX2ZlbmNl
IHx8IGFkZF9mZW5jZSA9PSBmZW5jZXNbMF0pKSB7Cj4gKyAgICAgICAgICAgICAgIHN0cnVjdCBk
bWFfZmVuY2UgKmZlbmNlID0gZmVuY2VzWzBdOwo+ICsgICAgICAgICAgICAgICBrZnJlZShmZW5j
ZXMpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gZmVuY2U7Cj4gKyAgICAgICB9Cj4gKwo+ICsg
ICAgICAgaWYgKGFkZF9mZW5jZSkgewo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgZG1hX2ZlbmNl
ICoqbmZlbmNlczsKPiArICAgICAgICAgICAgICAgc2l6ZV90IHN6Owo+ICsKPiArICAgICAgICAg
ICAgICAgLyogR2V0IGEgcmVmIHRvIGFkZF9mZW5jZSBzbyB0aGF0IHdlIGhhdmUgYSByZWYgdG8g
ZXZlcnkKPiArICAgICAgICAgICAgICAgICogZmVuY2Ugd2UgYXJlIGdvaW5nIHRvIHB1dCBpbiB0
aGUgYXJyYXkuCj4gKyAgICAgICAgICAgICAgICAqLwo+ICsgICAgICAgICAgICAgICBkbWFfZmVu
Y2VfZ2V0KGFkZF9mZW5jZSk7Cj4gKwo+ICsgICAgICAgICAgICAgICBzeiA9IChudW1fZmVuY2Vz
ICsgMSkgKiBzaXplb2YoKmZlbmNlcyk7Cj4gKyAgICAgICAgICAgICAgIG5mZW5jZXMgPSBrcmVh
bGxvYyhmZW5jZXMsIHN6LCBHRlBfTk9XQUlUIHwgX19HRlBfTk9XQVJOKTsKPiArICAgICAgICAg
ICAgICAgaWYgKCFuZmVuY2VzKQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyX3B1
dF9mZW5jZXM7Cj4gKwo+ICsgICAgICAgICAgICAgICBuZmVuY2VzW251bV9mZW5jZXMrK10gPSBh
ZGRfZmVuY2U7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgYXJyYXkgPSBkbWFfZmVuY2VfYXJy
YXlfY3JlYXRlKG51bV9mZW5jZXMsIGZlbmNlcywKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBkbWFfZmVuY2VfY29udGV4dF9hbGxvYygxKSwKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAxLCBmYWxzZSk7Cj4gKyAgICAgICBpZiAoIWFycmF5
KQo+ICsgICAgICAgICAgICAgICBnb3RvIGVycl9wdXRfZmVuY2VzOwo+ICsKPiArICAgICAgIC8q
IFRoZSBmZW5jZSBhcnJheSBub3cgb3ducyBmZW5jZXNfYXJyIGFuZCBvdXIgcmVmZXJlbmNlcyB0
byBlYWNoCj4gKyAgICAgICAgKiBvZiB0aGUgaW5kaXZpZHVhbCBmZW5jZXMuICBXZSBvbmx5IG93
biBhIHJlZmVyZW5jZSB0byB0aGUgb25lCj4gKyAgICAgICAgKiBhcnJheSBmZW5jZS4KPiArICAg
ICAgICAqLwo+ICsKPiArICAgICAgIHJldHVybiAmYXJyYXktPmJhc2U7Cj4gKwo+ICtlcnJfcHV0
X2ZlbmNlczoKPiArICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1fZmVuY2VzOyBpKyspCj4gKyAg
ICAgICAgICAgICAgIGRtYV9mZW5jZV9wdXQoZmVuY2VzWzBdKTsKPiArICAgICAgIGRtYV9mZW5j
ZV9wdXQoYWRkX2ZlbmNlKTsKPiArICAgICAgIGtmcmVlKGZlbmNlcyk7Cj4gKyAgICAgICByZXR1
cm4gTlVMTDsKPiArfQo+ICsKPiArc3RhdGljIGxvbmcgZG1hX2J1Zl93YWl0X3N5bmNfZmlsZShz
dHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgY29uc3Qgdm9pZCBfX3VzZXIgKnVzZXJfZGF0YSkKPiArewo+ICsgICAgICAgc3RydWN0IGRt
YV9idWZfc3luY19maWxlIGFyZzsKPiArICAgICAgIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLCAq
dW5pZmllZF9mZW5jZTsKPiArICAgICAgIGludCByZXQgPSAwOwo+ICsKPiArICAgICAgIGlmIChj
b3B5X2Zyb21fdXNlcigmYXJnLCB1c2VyX2RhdGEsIHNpemVvZihhcmcpKSkKPiArICAgICAgICAg
ICAgICAgcmV0dXJuIC1FRkFVTFQ7Cj4gKwo+ICsgICAgICAgaWYgKGFyZy5mbGFncyAhPSAwICYm
IGFyZy5mbGFncyAhPSBETUFfQlVGX1NZTkNfRklMRV9TWU5DX1dSSVRFKQo+ICsgICAgICAgICAg
ICAgICByZXR1cm4gLUVJTlZBTDsKPiArCj4gKyAgICAgICBmZW5jZSA9IHN5bmNfZmlsZV9nZXRf
ZmVuY2UoYXJnLmZkKTsKPiArICAgICAgIGlmICghZmVuY2UpCj4gKyAgICAgICAgICAgICAgIHJl
dHVybiAtRUlOVkFMOwo+ICsKPiArICAgICAgIGRtYV9yZXN2X2xvY2soZG1hYnVmLT5yZXN2LCBO
VUxMKTsKPiArCj4gKyAgICAgICBpZiAoYXJnLmZsYWdzICYgRE1BX0JVRl9TWU5DX0ZJTEVfU1lO
Q19XUklURSkgewo+ICsgICAgICAgICAgICAgICB1bmlmaWVkX2ZlbmNlID0gZG1hX2J1Zl9nZXRf
dW5pZmllZF9mZW5jZShkbWFidWYsIGZlbmNlKTsKPiArICAgICAgICAgICAgICAgaWYgKHVuaWZp
ZWRfZmVuY2UpCj4gKyAgICAgICAgICAgICAgICAgICAgICAgZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVu
Y2UoZG1hYnVmLT5yZXN2LCBmZW5jZSk7Cj4gKyAgICAgICAgICAgICAgIGVsc2UKPiArICAgICAg
ICAgICAgICAgICAgICAgICByZXQgPSAtRU5PTUVNOwo+ICsgICAgICAgfSBlbHNlIHsKPiArICAg
ICAgICAgICAgICAgZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZShkbWFidWYtPnJlc3YsIGZlbmNl
KTsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBkbWFfcmVzdl91bmxvY2soZG1hYnVmLT5yZXN2
KTsKPiArCj4gKyAgICAgICBkbWFfZmVuY2VfcHV0KGZlbmNlKTsKPiArCj4gKyAgICAgICByZXR1
cm4gcmV0Owo+ICt9Cj4gKwo+ICtzdGF0aWMgbG9uZyBkbWFfYnVmX3NpZ25hbF9zeW5jX2ZpbGUo
c3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdm9pZCBfX3VzZXIgKnVzZXJfZGF0YSkKPiArewo+ICsgICAgICAgc3RydWN0IGRtYV9i
dWZfc3luY19maWxlIGFyZzsKPiArICAgICAgIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlID0gTlVM
TDsKPiArICAgICAgIHN0cnVjdCBzeW5jX2ZpbGUgKnN5bmNfZmlsZTsKPiArICAgICAgIGludCBm
ZCwgcmV0Owo+ICsKPiArICAgICAgIGlmIChjb3B5X2Zyb21fdXNlcigmYXJnLCB1c2VyX2RhdGEs
IHNpemVvZihhcmcpKSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FRkFVTFQ7Cj4gKwo+ICsg
ICAgICAgaWYgKGFyZy5mbGFncyAhPSAwICYmIGFyZy5mbGFncyAhPSBETUFfQlVGX1NZTkNfRklM
RV9TWU5DX1dSSVRFKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiArCj4gKyAg
ICAgICBmZCA9IGdldF91bnVzZWRfZmRfZmxhZ3MoT19DTE9FWEVDKTsKPiArICAgICAgIGlmIChm
ZCA8IDApCj4gKyAgICAgICAgICAgICAgIHJldHVybiBmZDsKPiArCj4gKyAgICAgICBpZiAoYXJn
LmZsYWdzICYgRE1BX0JVRl9TWU5DX0ZJTEVfU1lOQ19XUklURSkgewo+ICsgICAgICAgICAgICAg
ICAvKiBXZSBuZWVkIHRvIGluY2x1ZGUgYm90aCB0aGUgZXhjbHVzaXZlIGZlbmNlIGFuZCBhbGwg
b2YKPiArICAgICAgICAgICAgICAgICogdGhlIHNoYXJlZCBmZW5jZXMgaW4gb3VyIGZlbmNlLgo+
ICsgICAgICAgICAgICAgICAgKi8KPiArICAgICAgICAgICAgICAgZmVuY2UgPSBkbWFfYnVmX2dl
dF91bmlmaWVkX2ZlbmNlKGRtYWJ1ZiwgTlVMTCk7Cj4gKyAgICAgICAgICAgICAgIGlmICghZmVu
Y2UpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICByZXQgPSAtRU5PTUVNOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGdvdG8gZXJyX3B1dF9mZDsKPiArICAgICAgICAgICAgICAgfQo+ICsg
ICAgICAgfSBlbHNlIHsKPiArICAgICAgICAgICAgICAgZmVuY2UgPSBkbWFfcmVzdl9nZXRfZXhj
bF9yY3UoZG1hYnVmLT5yZXN2KTsKPiArICAgICAgICAgICAgICAgaWYgKCFmZW5jZSkKPiArICAg
ICAgICAgICAgICAgICAgICAgICBmZW5jZSA9IGRtYV9mZW5jZV9nZXRfc3R1YigpOwo+ICsgICAg
ICAgfQo+ICsKPiArICAgICAgIHN5bmNfZmlsZSA9IHN5bmNfZmlsZV9jcmVhdGUoZmVuY2UpOwo+
ICsKPiArICAgICAgIGRtYV9mZW5jZV9wdXQoZmVuY2UpOwo+ICsKPiArICAgICAgIGlmICghc3lu
Y19maWxlKSB7Cj4gKyAgICAgICAgICAgICAgIHJldCA9IC1FSU5WQUw7Cj4gKyAgICAgICAgICAg
ICAgIGdvdG8gZXJyX3B1dF9mZDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBmZF9pbnN0YWxs
KGZkLCBzeW5jX2ZpbGUtPmZpbGUpOwo+ICsKPiArICAgICAgIGFyZy5mZCA9IGZkOwo+ICsgICAg
ICAgaWYgKGNvcHlfdG9fdXNlcih1c2VyX2RhdGEsICZhcmcsIHNpemVvZihhcmcpKSkKPiArICAg
ICAgICAgICAgICAgcmV0dXJuIC1FRkFVTFQ7Cj4gKwo+ICsgICAgICAgcmV0dXJuIDA7Cj4gKwo+
ICtlcnJfcHV0X2ZkOgo+ICsgICAgICAgcHV0X3VudXNlZF9mZChmZCk7Cj4gKyAgICAgICByZXR1
cm4gcmV0Owo+ICt9Cj4gKwo+ICBzdGF0aWMgbG9uZyBkbWFfYnVmX2lvY3RsKHN0cnVjdCBmaWxl
ICpmaWxlLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGNtZCwgdW5z
aWduZWQgbG9uZyBhcmcpCj4gIHsKPiBAQCAtMzkwLDYgKzU0OCwxMiBAQCBzdGF0aWMgbG9uZyBk
bWFfYnVmX2lvY3RsKHN0cnVjdCBmaWxlICpmaWxlLAo+ICAgICAgICAgY2FzZSBETUFfQlVGX1NF
VF9OQU1FOgo+ICAgICAgICAgICAgICAgICByZXR1cm4gZG1hX2J1Zl9zZXRfbmFtZShkbWFidWYs
IChjb25zdCBjaGFyIF9fdXNlciAqKWFyZyk7Cj4KPiArICAgICAgIGNhc2UgRE1BX0JVRl9JT0NU
TF9XQUlUX1NZTkNfRklMRToKPiArICAgICAgICAgICAgICAgcmV0dXJuIGRtYV9idWZfd2FpdF9z
eW5jX2ZpbGUoZG1hYnVmLCAoY29uc3Qgdm9pZCBfX3VzZXIgKilhcmcpOwo+ICsKPiArICAgICAg
IGNhc2UgRE1BX0JVRl9JT0NUTF9TSUdOQUxfU1lOQ19GSUxFOgo+ICsgICAgICAgICAgICAgICBy
ZXR1cm4gZG1hX2J1Zl9zaWduYWxfc3luY19maWxlKGRtYWJ1ZiwgKHZvaWQgX191c2VyICopYXJn
KTsKPiArCj4gICAgICAgICBkZWZhdWx0Ogo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVOT1RU
WTsKPiAgICAgICAgIH0KPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS91YXBpL2xpbnV4L2RtYS1idWYu
aCBiL2luY2x1ZGUvdWFwaS9saW51eC9kbWEtYnVmLmgKPiBpbmRleCBkYmM3MDkyZTA0YjUuLjg2
ZTA3YWNjYTkwYyAxMDA2NDQKPiAtLS0gYS9pbmNsdWRlL3VhcGkvbGludXgvZG1hLWJ1Zi5oCj4g
KysrIGIvaW5jbHVkZS91YXBpL2xpbnV4L2RtYS1idWYuaAo+IEBAIC0zNyw4ICszNywxNyBAQCBz
dHJ1Y3QgZG1hX2J1Zl9zeW5jIHsKPgo+ICAjZGVmaW5lIERNQV9CVUZfTkFNRV9MRU4gICAgICAg
MzIKPgo+ICtzdHJ1Y3QgZG1hX2J1Zl9zeW5jX2ZpbGUgewo+ICsgICAgICAgX191MzIgZmxhZ3M7
Cj4gKyAgICAgICBfX3MzMiBmZDsKPiArfTsKPiArCj4gKyNkZWZpbmUgRE1BX0JVRl9TWU5DX0ZJ
TEVfU1lOQ19XUklURSAgICgxIDw8IDApCj4gKwo+ICAjZGVmaW5lIERNQV9CVUZfQkFTRSAgICAg
ICAgICAgJ2InCj4gLSNkZWZpbmUgRE1BX0JVRl9JT0NUTF9TWU5DICAgICBfSU9XKERNQV9CVUZf
QkFTRSwgMCwgc3RydWN0IGRtYV9idWZfc3luYykKPiAtI2RlZmluZSBETUFfQlVGX1NFVF9OQU1F
ICAgICAgIF9JT1coRE1BX0JVRl9CQVNFLCAxLCBjb25zdCBjaGFyICopCj4gKyNkZWZpbmUgRE1B
X0JVRl9JT0NUTF9TWU5DICAgICAgICAgX0lPVyhETUFfQlVGX0JBU0UsIDAsIHN0cnVjdCBkbWFf
YnVmX3N5bmMpCj4gKyNkZWZpbmUgRE1BX0JVRl9TRVRfTkFNRSAgICAgICAgICAgX0lPVyhETUFf
QlVGX0JBU0UsIDEsIGNvbnN0IGNoYXIgKikKPiArI2RlZmluZSBETUFfQlVGX0lPQ1RMX1dBSVRf
U1lOQ19GSUxFICAgX0lPVyhETUFfQlVGX0JBU0UsIDIsIHN0cnVjdCBkbWFfYnVmX3N5bmMpCj4g
KyNkZWZpbmUgRE1BX0JVRl9JT0NUTF9TSUdOQUxfU1lOQ19GSUxFIF9JT1dSKERNQV9CVUZfQkFT
RSwgMywgc3RydWN0IGRtYV9idWZfc3luYykKPgo+ICAjZW5kaWYKPiAtLQo+IDIuMjQuMQo+Cl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbmFyby1tbS1z
aWcgbWFpbGluZyBsaXN0CkxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZwpodHRwczovL2xp
c3RzLmxpbmFyby5vcmcvbWFpbG1hbi9saXN0aW5mby9saW5hcm8tbW0tc2lnCg==
