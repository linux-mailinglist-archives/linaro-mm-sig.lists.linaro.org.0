Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 7CCD53C6909
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 13 Jul 2021 06:07:59 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 53A4166969
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 13 Jul 2021 04:07:57 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 0356C66922; Tue, 13 Jul 2021 04:07:56 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id DFCA76691F;
	Tue, 13 Jul 2021 04:07:53 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id B1472666D7
 for <linaro-mm-sig@lists.linaro.org>; Tue, 13 Jul 2021 04:07:51 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id AEED26691F; Tue, 13 Jul 2021 04:07:51 +0000 (UTC)
Received: from mail-yb1-f202.google.com (mail-yb1-f202.google.com
 [209.85.219.202])
 by lists.linaro.org (Postfix) with ESMTPS id A6922666D7
 for <linaro-mm-sig@lists.linaro.org>; Tue, 13 Jul 2021 04:07:49 +0000 (UTC)
Received: by mail-yb1-f202.google.com with SMTP id
 q10-20020a056902150ab02905592911c932so25511760ybu.15
 for <linaro-mm-sig@lists.linaro.org>; Mon, 12 Jul 2021 21:07:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=20161025;
 h=date:message-id:mime-version:subject:from:to:cc
 :content-transfer-encoding;
 bh=lsRQcYOnLNGeZNFv9ZqabeUiQqK2KSkzul/BCImYOGQ=;
 b=gPSXuiokMiiFcRSzhrt4fHhIbGRoeQi7Eq4XA3gKVm2B6yAWrkdk1rCOxk5ky642fW
 8EHwZOyTerEb18XV86OudV9UyVF5PNC3+cN/Owf5gp3iAAtyiQpPC5juqs2nfmbNcZNp
 G9iSIfJn0IcLbJvo+qX+4b97x+ytRKUmB707yHZX0a4Ugkbu3BPyzJYBscBtOIlr+9PZ
 4s9qPHYX8K2TTwoSRiEs7/l7fbu7mjOlJKvImJQMMIhMInUcVqAKkbHhqySlvBw1V/Aw
 MnhDQH+dkssXHH6sEZFKpPcBmVs1Td2epMkxH7yfPTDg8blpTOoYfNx8z26aFc+hNMe5
 iBHg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:message-id:mime-version:subject:from:to:cc
 :content-transfer-encoding;
 bh=lsRQcYOnLNGeZNFv9ZqabeUiQqK2KSkzul/BCImYOGQ=;
 b=GorxTyIf2SdegemX7AC8MfHi/GaWL2wKBQkDCgzVzv2UE3IinJcIs6LY0/nCXHCoZz
 zwKLQ/qTQZi7pYE3tY90obpSkpezKIkvMhZt3aFwNdrc/rUTsg++BlTLIJ7of5qP0vP8
 gaR7jW064mGWDeQBhKXRgbjG8/dIy4Kk0LPNOap5Mjg0aNZtD9Cnq1IvIoc/b3pXtaui
 upBCAi4JZ0OdEH6A7gRgXbObMKkzoPihvienG04qgc82P5rog6b/Of7wXpNEZiVl7ZXg
 QRVH82cianwAXlMZFiCR1v/TWenWDgqSMD/Nglwb4FSDnagsWnesNNvqmJePk1z22Vnv
 Vm2g==
X-Gm-Message-State: AOAM533QnCbw0d/aAwVcJOD11rinAHEM3uJxGnfXd8jKgbm9dQYUEi6k
 mxdWgP+OrjpT43KK1EGZml6Ze254BCY=
X-Google-Smtp-Source: ABdhPJxZMjSGTD6Q9sj/OJwUJwZToli5AFricGI0zhixsoa2+/EbM8Q8aIAn6TH/hNqolerSh4FEQ1DfqVs=
X-Received: from hridya.mtv.corp.google.com
 ([2620:15c:211:200:2156:3303:4d7a:cc35])
 (user=hridya job=sendgmr) by 2002:a5b:c0a:: with SMTP id
 f10mr3006444ybq.9.1626149269053; 
 Mon, 12 Jul 2021 21:07:49 -0700 (PDT)
Date: Mon, 12 Jul 2021 21:07:38 -0700
Message-Id: <20210713040742.2680135-1-hridya@google.com>
Mime-Version: 1.0
X-Mailer: git-send-email 2.32.0.93.g670b81a890-goog
From: Hridya Valsaraju <hridya@google.com>
To: christian.koenig@amd.com, Sumit Semwal <sumit.semwal@linaro.org>, 
 Hridya Valsaraju <hridya@google.com>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>, 
 Daniel Vetter <daniel.vetter@ffwll.ch>, linux-kernel@vger.kernel.org, 
 linux-media@vger.kernel.org, dri-devel@lists.freedesktop.org, 
 linaro-mm-sig@lists.linaro.org
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: [Linaro-mm-sig] [PATCH v2] dma-buf: Delete the DMA-BUF attachment
 sysfs statistics
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: surenb@google.com, john.stultz@linaro.org, kernel-team@android.com,
 daniel@ffwll.ch
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

VGhlIERNQS1CVUYgYXR0YWNobWVudCBzdGF0aXN0aWNzIGZvcm0gYSBzdWJzZXQgb2YgdGhlIERN
QS1CVUYKc3lzZnMgc3RhdGlzdGljcyB0aGF0IHJlY2VudGx5IG1lcmdlZCB0byB0aGUgZHJtLW1p
c2MgdHJlZS4gVGhleSBhcmUgbm90ClVBQkkgeWV0IHNpbmNlIHRoZXkgaGF2ZSBub3QgbWVyZ2Vk
IHRvIHRoZSB1cHN0cmVhbSBMaW51eCBrZXJuZWwuCgpTaW5jZSB0aGVyZSBoYXMgYmVlbiBhIHJl
cG9ydGVkIGEgcGVyZm9ybWFuY2UgcmVncmVzc2lvbiBkdWUgdG8gdGhlCm92ZXJoZWFkIG9mIHN5
c2ZzIGRpcmVjdG9yeSBjcmVhdGlvbi90ZWFyZG93biBkdXJpbmcKZG1hX2J1Zl9hdHRhY2goKS9k
bWFfYnVmX2RldGFjaCgpLCB0aGlzIHBhdGNoIGRlbGV0ZXMgdGhlIERNQS1CVUYKYXR0YWNobWVu
dCBzdGF0aXN0aWNzIGZyb20gc3lzZnMuCgpGaXhlczogYmRiOGQwNmRmZWZkIChkbWFidWY6IEFk
ZCB0aGUgY2FwYWJpbGl0eSB0byBleHBvc2UgRE1BLUJVRiBzdGF0cwppbiBzeXNmcykKU2lnbmVk
LW9mZi1ieTogSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlhQGdvb2dsZS5jb20+ClJldmlld2VkLWJ5
OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+ClJldmlld2VkLWJ5
OiBHcmVnIEtyb2FoLUhhcnRtYW4gPGdyZWdraEBsaW51eGZvdW5kYXRpb24ub3JnPgotLS0KCkNo
YW5nZXMgaW4gdjI6ClVwZGF0ZWQgY29tbWl0IG1lc3NhZ2UgdG8gY2xhcmlmeSB0aGF0IHRoZSBz
eXNmcyBmaWxlcyBiZWluZyByZW1vdmVkCmhhdmUgbm90IHlldCBtZXJnZWQgdG8gdXBzdHJlYW0g
TGludXggYW5kIGFyZSBoZW5jZSBub3QgQUJJLgoKSGkgQ2hyaXN0aWFuLAoKSSBoYXZlIHVwZGF0
ZWQgdGhlIGNvbW1pdCBtZXNzYWdlIGFzIHBlciB5b3VyIHN1Z2dlc3Rpb24uIFBsZWFzZSBkbyB0
YWtlCmFub3RoZXIgbG9vayB3aGVuIHlvdSBnZXQgYSBjaGFuY2UuCgpUaGFua3MsCkhyaWR5YQoK
IC4uLi9BQkkvdGVzdGluZy9zeXNmcy1rZXJuZWwtZG1hYnVmLWJ1ZmZlcnMgICB8ICAyOCAtLS0t
CiBkcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi1zeXNmcy1zdGF0cy5jICAgICAgICAgfCAxNDAgKy0t
LS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi1zeXNmcy1zdGF0cy5oICAg
ICAgICAgfCAgMjcgLS0tLQogZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYyAgICAgICAgICAgICAg
ICAgICAgIHwgIDE2IC0tCiBpbmNsdWRlL2xpbnV4L2RtYS1idWYuaCAgICAgICAgICAgICAgICAg
ICAgICAgfCAgMTcgLS0tCiA1IGZpbGVzIGNoYW5nZWQsIDQgaW5zZXJ0aW9ucygrKSwgMjI0IGRl
bGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL0RvY3VtZW50YXRpb24vQUJJL3Rlc3Rpbmcvc3lzZnMt
a2VybmVsLWRtYWJ1Zi1idWZmZXJzIGIvRG9jdW1lbnRhdGlvbi9BQkkvdGVzdGluZy9zeXNmcy1r
ZXJuZWwtZG1hYnVmLWJ1ZmZlcnMKaW5kZXggYTI0Mzk4NGVkNDIwLi41ZDNiYzk5N2RjNjQgMTAw
NjQ0Ci0tLSBhL0RvY3VtZW50YXRpb24vQUJJL3Rlc3Rpbmcvc3lzZnMta2VybmVsLWRtYWJ1Zi1i
dWZmZXJzCisrKyBiL0RvY3VtZW50YXRpb24vQUJJL3Rlc3Rpbmcvc3lzZnMta2VybmVsLWRtYWJ1
Zi1idWZmZXJzCkBAIC0yMiwzMSArMjIsMyBAQCBLZXJuZWxWZXJzaW9uOgl2NS4xMwogQ29udGFj
dDoJSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlhQGdvb2dsZS5jb20+CiBEZXNjcmlwdGlvbjoJVGhp
cyBmaWxlIGlzIHJlYWQtb25seSBhbmQgc3BlY2lmaWVzIHRoZSBzaXplIG9mIHRoZSBETUEtQlVG
IGluCiAJCWJ5dGVzLgotCi1XaGF0OgkJL3N5cy9rZXJuZWwvZG1hYnVmL2J1ZmZlcnMvPGlub2Rl
X251bWJlcj4vYXR0YWNobWVudHMKLURhdGU6CQlNYXkgMjAyMQotS2VybmVsVmVyc2lvbjoJdjUu
MTMKLUNvbnRhY3Q6CUhyaWR5YSBWYWxzYXJhanUgPGhyaWR5YUBnb29nbGUuY29tPgotRGVzY3Jp
cHRpb246CVRoaXMgZGlyZWN0b3J5IHdpbGwgY29udGFpbiBzdWJkaXJlY3RvcmllcyByZXByZXNl
bnRpbmcgZXZlcnkKLQkJYXR0YWNobWVudCBvZiB0aGUgRE1BLUJVRi4KLQotV2hhdDoJCS9zeXMv
a2VybmVsL2RtYWJ1Zi9idWZmZXJzLzxpbm9kZV9udW1iZXI+L2F0dGFjaG1lbnRzLzxhdHRhY2ht
ZW50X3VpZD4KLURhdGU6CQlNYXkgMjAyMQotS2VybmVsVmVyc2lvbjoJdjUuMTMKLUNvbnRhY3Q6
CUhyaWR5YSBWYWxzYXJhanUgPGhyaWR5YUBnb29nbGUuY29tPgotRGVzY3JpcHRpb246CVRoaXMg
ZGlyZWN0b3J5IHdpbGwgY29udGFpbiBpbmZvcm1hdGlvbiBvbiB0aGUgYXR0YWNoZWQgZGV2aWNl
Ci0JCWFuZCB0aGUgbnVtYmVyIG9mIGN1cnJlbnQgZGlzdGluY3QgZGV2aWNlIG1hcHBpbmdzLgot
Ci1XaGF0OgkJL3N5cy9rZXJuZWwvZG1hYnVmL2J1ZmZlcnMvPGlub2RlX251bWJlcj4vYXR0YWNo
bWVudHMvPGF0dGFjaG1lbnRfdWlkPi9kZXZpY2UKLURhdGU6CQlNYXkgMjAyMQotS2VybmVsVmVy
c2lvbjoJdjUuMTMKLUNvbnRhY3Q6CUhyaWR5YSBWYWxzYXJhanUgPGhyaWR5YUBnb29nbGUuY29t
PgotRGVzY3JpcHRpb246CVRoaXMgZmlsZSBpcyByZWFkLW9ubHkgYW5kIGlzIGEgc3ltbGluayB0
byB0aGUgYXR0YWNoZWQgZGV2aWNlJ3MKLQkJc3lzZnMgZW50cnkuCi0KLVdoYXQ6CQkvc3lzL2tl
cm5lbC9kbWFidWYvYnVmZmVycy88aW5vZGVfbnVtYmVyPi9hdHRhY2htZW50cy88YXR0YWNobWVu
dF91aWQ+L21hcF9jb3VudGVyCi1EYXRlOgkJTWF5IDIwMjEKLUtlcm5lbFZlcnNpb246CXY1LjEz
Ci1Db250YWN0OglIcmlkeWEgVmFsc2FyYWp1IDxocmlkeWFAZ29vZ2xlLmNvbT4KLURlc2NyaXB0
aW9uOglUaGlzIGZpbGUgaXMgcmVhZC1vbmx5IGFuZCBjb250YWlucyBhIG1hcF9jb3VudGVyIGlu
ZGljYXRpbmcgdGhlCi0JCW51bWJlciBvZiBkaXN0aW5jdCBkZXZpY2UgbWFwcGluZ3Mgb2YgdGhl
IGF0dGFjaG1lbnQuCmRpZmYgLS1naXQgYS9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi1zeXNmcy1z
dGF0cy5jIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYtc3lzZnMtc3RhdHMuYwppbmRleCBhMjYz
OGU4NDE5OWMuLjA1M2JhYWRjYWRhOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL2RtYS1i
dWYtc3lzZnMtc3RhdHMuYworKysgYi9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi1zeXNmcy1zdGF0
cy5jCkBAIC00MCwxNCArNDAsMTEgQEAKICAqCiAgKiAqIGBgL3N5cy9rZXJuZWwvZG1hYnVmL2J1
ZmZlcnMvPGlub2RlX251bWJlcj4vZXhwb3J0ZXJfbmFtZWBgCiAgKiAqIGBgL3N5cy9rZXJuZWwv
ZG1hYnVmL2J1ZmZlcnMvPGlub2RlX251bWJlcj4vc2l6ZWBgCi0gKiAqIGBgL3N5cy9rZXJuZWwv
ZG1hYnVmL2J1ZmZlcnMvPGlub2RlX251bWJlcj4vYXR0YWNobWVudHMvPGF0dGFjaF91aWQ+L2Rl
dmljZWBgCi0gKiAqIGBgL3N5cy9rZXJuZWwvZG1hYnVmL2J1ZmZlcnMvPGlub2RlX251bWJlcj4v
YXR0YWNobWVudHMvPGF0dGFjaF91aWQ+L21hcF9jb3VudGVyYGAKICAqCi0gKiBUaGUgaW5mb3Jt
YXRpb24gaW4gdGhlIGludGVyZmFjZSBjYW4gYWxzbyBiZSB1c2VkIHRvIGRlcml2ZSBwZXItZXhw
b3J0ZXIgYW5kCi0gKiBwZXItZGV2aWNlIHVzYWdlIHN0YXRpc3RpY3MuIFRoZSBkYXRhIGZyb20g
dGhlIGludGVyZmFjZSBjYW4gYmUgZ2F0aGVyZWQKLSAqIG9uIGVycm9yIGNvbmRpdGlvbnMgb3Ig
b3RoZXIgaW1wb3J0YW50IGV2ZW50cyB0byBwcm92aWRlIGEgc25hcHNob3Qgb2YKLSAqIERNQS1C
VUYgdXNhZ2UuIEl0IGNhbiBhbHNvIGJlIGNvbGxlY3RlZCBwZXJpb2RpY2FsbHkgYnkgdGVsZW1l
dHJ5IHRvIG1vbml0b3IKLSAqIHZhcmlvdXMgbWV0cmljcy4KKyAqIFRoZSBpbmZvcm1hdGlvbiBp
biB0aGUgaW50ZXJmYWNlIGNhbiBhbHNvIGJlIHVzZWQgdG8gZGVyaXZlIHBlci1leHBvcnRlcgor
ICogc3RhdGlzdGljcy4gVGhlIGRhdGEgZnJvbSB0aGUgaW50ZXJmYWNlIGNhbiBiZSBnYXRoZXJl
ZCBvbiBlcnJvciBjb25kaXRpb25zCisgKiBvciBvdGhlciBpbXBvcnRhbnQgZXZlbnRzIHRvIHBy
b3ZpZGUgYSBzbmFwc2hvdCBvZiBETUEtQlVGIHVzYWdlLgorICogSXQgY2FuIGFsc28gYmUgY29s
bGVjdGVkIHBlcmlvZGljYWxseSBieSB0ZWxlbWV0cnkgdG8gbW9uaXRvciB2YXJpb3VzIG1ldHJp
Y3MuCiAgKgogICogRGV0YWlsZWQgZG9jdW1lbnRhdGlvbiBhYm91dCB0aGUgaW50ZXJmYWNlIGlz
IHByZXNlbnQgaW4KICAqIERvY3VtZW50YXRpb24vQUJJL3Rlc3Rpbmcvc3lzZnMta2VybmVsLWRt
YWJ1Zi1idWZmZXJzLgpAQCAtMTIxLDEyMCArMTE4LDYgQEAgc3RhdGljIHN0cnVjdCBrb2JqX3R5
cGUgZG1hX2J1Zl9rdHlwZSA9IHsKIAkuZGVmYXVsdF9ncm91cHMgPSBkbWFfYnVmX3N0YXRzX2Rl
ZmF1bHRfZ3JvdXBzLAogfTsKIAotI2RlZmluZSB0b19kbWFfYnVmX2F0dGFjaF9lbnRyeV9mcm9t
X2tvYmooeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBkbWFfYnVmX2F0dGFjaF9zeXNmc19lbnRy
eSwga29iaikKLQotc3RydWN0IGRtYV9idWZfYXR0YWNoX3N0YXRzX2F0dHJpYnV0ZSB7Ci0Jc3Ry
dWN0IGF0dHJpYnV0ZSBhdHRyOwotCXNzaXplX3QgKCpzaG93KShzdHJ1Y3QgZG1hX2J1Zl9hdHRh
Y2hfc3lzZnNfZW50cnkgKnN5c2ZzX2VudHJ5LAotCQkJc3RydWN0IGRtYV9idWZfYXR0YWNoX3N0
YXRzX2F0dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVmKTsKLX07Ci0jZGVmaW5lIHRvX2RtYV9idWZf
YXR0YWNoX3N0YXRzX2F0dHIoeCkgY29udGFpbmVyX29mKHgsIHN0cnVjdCBkbWFfYnVmX2F0dGFj
aF9zdGF0c19hdHRyaWJ1dGUsIGF0dHIpCi0KLXN0YXRpYyBzc2l6ZV90IGRtYV9idWZfYXR0YWNo
X3N0YXRzX2F0dHJpYnV0ZV9zaG93KHN0cnVjdCBrb2JqZWN0ICprb2JqLAotCQkJCQkJICAgc3Ry
dWN0IGF0dHJpYnV0ZSAqYXR0ciwKLQkJCQkJCSAgIGNoYXIgKmJ1ZikKLXsKLQlzdHJ1Y3QgZG1h
X2J1Zl9hdHRhY2hfc3RhdHNfYXR0cmlidXRlICphdHRyaWJ1dGU7Ci0Jc3RydWN0IGRtYV9idWZf
YXR0YWNoX3N5c2ZzX2VudHJ5ICpzeXNmc19lbnRyeTsKLQotCWF0dHJpYnV0ZSA9IHRvX2RtYV9i
dWZfYXR0YWNoX3N0YXRzX2F0dHIoYXR0cik7Ci0Jc3lzZnNfZW50cnkgPSB0b19kbWFfYnVmX2F0
dGFjaF9lbnRyeV9mcm9tX2tvYmooa29iaik7Ci0KLQlpZiAoIWF0dHJpYnV0ZS0+c2hvdykKLQkJ
cmV0dXJuIC1FSU87Ci0KLQlyZXR1cm4gYXR0cmlidXRlLT5zaG93KHN5c2ZzX2VudHJ5LCBhdHRy
aWJ1dGUsIGJ1Zik7Ci19Ci0KLXN0YXRpYyBjb25zdCBzdHJ1Y3Qgc3lzZnNfb3BzIGRtYV9idWZf
YXR0YWNoX3N0YXRzX3N5c2ZzX29wcyA9IHsKLQkuc2hvdyA9IGRtYV9idWZfYXR0YWNoX3N0YXRz
X2F0dHJpYnV0ZV9zaG93LAotfTsKLQotc3RhdGljIHNzaXplX3QgbWFwX2NvdW50ZXJfc2hvdyhz
dHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfc3lzZnNfZW50cnkgKnN5c2ZzX2VudHJ5LAotCQkJCXN0cnVj
dCBkbWFfYnVmX2F0dGFjaF9zdGF0c19hdHRyaWJ1dGUgKmF0dHIsCi0JCQkJY2hhciAqYnVmKQot
ewotCXJldHVybiBzeXNmc19lbWl0KGJ1ZiwgIiV1XG4iLCBzeXNmc19lbnRyeS0+bWFwX2NvdW50
ZXIpOwotfQotCi1zdGF0aWMgc3RydWN0IGRtYV9idWZfYXR0YWNoX3N0YXRzX2F0dHJpYnV0ZSBt
YXBfY291bnRlcl9hdHRyaWJ1dGUgPQotCV9fQVRUUl9STyhtYXBfY291bnRlcik7Ci0KLXN0YXRp
YyBzdHJ1Y3QgYXR0cmlidXRlICpkbWFfYnVmX2F0dGFjaF9zdGF0c19kZWZhdWx0X2F0dHJzW10g
PSB7Ci0JJm1hcF9jb3VudGVyX2F0dHJpYnV0ZS5hdHRyLAotCU5VTEwsCi19OwotQVRUUklCVVRF
X0dST1VQUyhkbWFfYnVmX2F0dGFjaF9zdGF0c19kZWZhdWx0KTsKLQotc3RhdGljIHZvaWQgZG1h
X2J1Zl9hdHRhY2hfc3lzZnNfcmVsZWFzZShzdHJ1Y3Qga29iamVjdCAqa29iaikKLXsKLQlzdHJ1
Y3QgZG1hX2J1Zl9hdHRhY2hfc3lzZnNfZW50cnkgKnN5c2ZzX2VudHJ5OwotCi0Jc3lzZnNfZW50
cnkgPSB0b19kbWFfYnVmX2F0dGFjaF9lbnRyeV9mcm9tX2tvYmooa29iaik7Ci0Ja2ZyZWUoc3lz
ZnNfZW50cnkpOwotfQotCi1zdGF0aWMgc3RydWN0IGtvYmpfdHlwZSBkbWFfYnVmX2F0dGFjaF9r
dHlwZSA9IHsKLQkuc3lzZnNfb3BzID0gJmRtYV9idWZfYXR0YWNoX3N0YXRzX3N5c2ZzX29wcywK
LQkucmVsZWFzZSA9IGRtYV9idWZfYXR0YWNoX3N5c2ZzX3JlbGVhc2UsCi0JLmRlZmF1bHRfZ3Jv
dXBzID0gZG1hX2J1Zl9hdHRhY2hfc3RhdHNfZGVmYXVsdF9ncm91cHMsCi19OwotCi12b2lkIGRt
YV9idWZfYXR0YWNoX3N0YXRzX3RlYXJkb3duKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0
dGFjaCkKLXsKLQlzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfc3lzZnNfZW50cnkgKnN5c2ZzX2VudHJ5
OwotCi0Jc3lzZnNfZW50cnkgPSBhdHRhY2gtPnN5c2ZzX2VudHJ5OwotCWlmICghc3lzZnNfZW50
cnkpCi0JCXJldHVybjsKLQotCXN5c2ZzX2RlbGV0ZV9saW5rKCZzeXNmc19lbnRyeS0+a29iaiwg
JmF0dGFjaC0+ZGV2LT5rb2JqLCAiZGV2aWNlIik7Ci0KLQlrb2JqZWN0X2RlbCgmc3lzZnNfZW50
cnktPmtvYmopOwotCWtvYmplY3RfcHV0KCZzeXNmc19lbnRyeS0+a29iaik7Ci19Ci0KLWludCBk
bWFfYnVmX2F0dGFjaF9zdGF0c19zZXR1cChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRh
Y2gsCi0JCQkgICAgICAgdW5zaWduZWQgaW50IHVpZCkKLXsKLQlzdHJ1Y3QgZG1hX2J1Zl9hdHRh
Y2hfc3lzZnNfZW50cnkgKnN5c2ZzX2VudHJ5OwotCWludCByZXQ7Ci0Jc3RydWN0IGRtYV9idWYg
KmRtYWJ1ZjsKLQotCWlmICghYXR0YWNoKQotCQlyZXR1cm4gLUVJTlZBTDsKLQotCWRtYWJ1ZiA9
IGF0dGFjaC0+ZG1hYnVmOwotCi0Jc3lzZnNfZW50cnkgPSBremFsbG9jKHNpemVvZihzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2hfc3lzZnNfZW50cnkpLAotCQkJICAgICAgR0ZQX0tFUk5FTCk7Ci0JaWYg
KCFzeXNmc19lbnRyeSkKLQkJcmV0dXJuIC1FTk9NRU07Ci0KLQlzeXNmc19lbnRyeS0+a29iai5r
c2V0ID0gZG1hYnVmLT5zeXNmc19lbnRyeS0+YXR0YWNoX3N0YXRzX2tzZXQ7Ci0KLQlhdHRhY2gt
PnN5c2ZzX2VudHJ5ID0gc3lzZnNfZW50cnk7Ci0KLQlyZXQgPSBrb2JqZWN0X2luaXRfYW5kX2Fk
ZCgmc3lzZnNfZW50cnktPmtvYmosICZkbWFfYnVmX2F0dGFjaF9rdHlwZSwKLQkJCQkgICBOVUxM
LCAiJXUiLCB1aWQpOwotCWlmIChyZXQpCi0JCWdvdG8ga29ial9lcnI7Ci0KLQlyZXQgPSBzeXNm
c19jcmVhdGVfbGluaygmc3lzZnNfZW50cnktPmtvYmosICZhdHRhY2gtPmRldi0+a29iaiwKLQkJ
CQkiZGV2aWNlIik7Ci0JaWYgKHJldCkKLQkJZ290byBsaW5rX2VycjsKLQotCXJldHVybiAwOwot
Ci1saW5rX2VycjoKLQlrb2JqZWN0X2RlbCgmc3lzZnNfZW50cnktPmtvYmopOwota29ial9lcnI6
Ci0Ja29iamVjdF9wdXQoJnN5c2ZzX2VudHJ5LT5rb2JqKTsKLQlhdHRhY2gtPnN5c2ZzX2VudHJ5
ID0gTlVMTDsKLQotCXJldHVybiByZXQ7Ci19CiB2b2lkIGRtYV9idWZfc3RhdHNfdGVhcmRvd24o
c3RydWN0IGRtYV9idWYgKmRtYWJ1ZikKIHsKIAlzdHJ1Y3QgZG1hX2J1Zl9zeXNmc19lbnRyeSAq
c3lzZnNfZW50cnk7CkBAIC0yNDMsNyArMTI2LDYgQEAgdm9pZCBkbWFfYnVmX3N0YXRzX3RlYXJk
b3duKHN0cnVjdCBkbWFfYnVmICpkbWFidWYpCiAJaWYgKCFzeXNmc19lbnRyeSkKIAkJcmV0dXJu
OwogCi0Ja3NldF91bnJlZ2lzdGVyKHN5c2ZzX2VudHJ5LT5hdHRhY2hfc3RhdHNfa3NldCk7CiAJ
a29iamVjdF9kZWwoJnN5c2ZzX2VudHJ5LT5rb2JqKTsKIAlrb2JqZWN0X3B1dCgmc3lzZnNfZW50
cnktPmtvYmopOwogfQpAQCAtMjkwLDcgKzE3Miw2IEBAIGludCBkbWFfYnVmX3N0YXRzX3NldHVw
KHN0cnVjdCBkbWFfYnVmICpkbWFidWYpCiB7CiAJc3RydWN0IGRtYV9idWZfc3lzZnNfZW50cnkg
KnN5c2ZzX2VudHJ5OwogCWludCByZXQ7Ci0Jc3RydWN0IGtzZXQgKmF0dGFjaF9zdGF0c19rc2V0
OwogCiAJaWYgKCFkbWFidWYgfHwgIWRtYWJ1Zi0+ZmlsZSkKIAkJcmV0dXJuIC1FSU5WQUw7CkBA
IC0zMTUsMjEgKzE5Niw4IEBAIGludCBkbWFfYnVmX3N0YXRzX3NldHVwKHN0cnVjdCBkbWFfYnVm
ICpkbWFidWYpCiAJaWYgKHJldCkKIAkJZ290byBlcnJfc3lzZnNfZG1hYnVmOwogCi0JLyogY3Jl
YXRlIHRoZSBkaXJlY3RvcnkgZm9yIGF0dGFjaG1lbnQgc3RhdHMgKi8KLQlhdHRhY2hfc3RhdHNf
a3NldCA9IGtzZXRfY3JlYXRlX2FuZF9hZGQoImF0dGFjaG1lbnRzIiwKLQkJCQkJCSZkbWFidWZf
c3lzZnNfbm9fdWV2ZW50X29wcywKLQkJCQkJCSZzeXNmc19lbnRyeS0+a29iaik7Ci0JaWYgKCFh
dHRhY2hfc3RhdHNfa3NldCkgewotCQlyZXQgPSAtRU5PTUVNOwotCQlnb3RvIGVycl9zeXNmc19h
dHRhY2g7Ci0JfQotCi0Jc3lzZnNfZW50cnktPmF0dGFjaF9zdGF0c19rc2V0ID0gYXR0YWNoX3N0
YXRzX2tzZXQ7Ci0KIAlyZXR1cm4gMDsKIAotZXJyX3N5c2ZzX2F0dGFjaDoKLQlrb2JqZWN0X2Rl
bCgmc3lzZnNfZW50cnktPmtvYmopOwogZXJyX3N5c2ZzX2RtYWJ1ZjoKIAlrb2JqZWN0X3B1dCgm
c3lzZnNfZW50cnktPmtvYmopOwogCWRtYWJ1Zi0+c3lzZnNfZW50cnkgPSBOVUxMOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYtc3lzZnMtc3RhdHMuaCBiL2RyaXZlcnMvZG1h
LWJ1Zi9kbWEtYnVmLXN5c2ZzLXN0YXRzLmgKaW5kZXggNWY0NzAzMjQ5MTE3Li5hNDljNmUyNjUw
Y2MgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLXN5c2ZzLXN0YXRzLmgKKysr
IGIvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYtc3lzZnMtc3RhdHMuaApAQCAtMTQsMjMgKzE0LDgg
QEAgaW50IGRtYV9idWZfaW5pdF9zeXNmc19zdGF0aXN0aWNzKHZvaWQpOwogdm9pZCBkbWFfYnVm
X3VuaW5pdF9zeXNmc19zdGF0aXN0aWNzKHZvaWQpOwogCiBpbnQgZG1hX2J1Zl9zdGF0c19zZXR1
cChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmKTsKLWludCBkbWFfYnVmX2F0dGFjaF9zdGF0c19zZXR1
cChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsCi0JCQkgICAgICAgdW5zaWduZWQg
aW50IHVpZCk7Ci1zdGF0aWMgaW5saW5lIHZvaWQgZG1hX2J1Zl91cGRhdGVfYXR0YWNobWVudF9t
YXBfY291bnQoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoLAotCQkJCQkJICAgICAg
IGludCBkZWx0YSkKLXsKLQlzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfc3lzZnNfZW50cnkgKmVudHJ5
ID0gYXR0YWNoLT5zeXNmc19lbnRyeTsKIAotCWVudHJ5LT5tYXBfY291bnRlciArPSBkZWx0YTsK
LX0KIHZvaWQgZG1hX2J1Zl9zdGF0c190ZWFyZG93bihzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmKTsK
LXZvaWQgZG1hX2J1Zl9hdHRhY2hfc3RhdHNfdGVhcmRvd24oc3RydWN0IGRtYV9idWZfYXR0YWNo
bWVudCAqYXR0YWNoKTsKLXN0YXRpYyBpbmxpbmUgdW5zaWduZWQgaW50IGRtYV9idWZfdXBkYXRl
X2F0dGFjaF91aWQoc3RydWN0IGRtYV9idWYgKmRtYWJ1ZikKLXsKLQlzdHJ1Y3QgZG1hX2J1Zl9z
eXNmc19lbnRyeSAqZW50cnkgPSBkbWFidWYtPnN5c2ZzX2VudHJ5OwotCi0JcmV0dXJuIGVudHJ5
LT5hdHRhY2htZW50X3VpZCsrOwotfQogI2Vsc2UKIAogc3RhdGljIGlubGluZSBpbnQgZG1hX2J1
Zl9pbml0X3N5c2ZzX3N0YXRpc3RpY3Modm9pZCkKQEAgLTQ0LDE5ICsyOSw3IEBAIHN0YXRpYyBp
bmxpbmUgaW50IGRtYV9idWZfc3RhdHNfc2V0dXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1ZikKIHsK
IAlyZXR1cm4gMDsKIH0KLXN0YXRpYyBpbmxpbmUgaW50IGRtYV9idWZfYXR0YWNoX3N0YXRzX3Nl
dHVwKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKLQkJCQkJICAgICB1bnNpZ25l
ZCBpbnQgdWlkKQotewotCXJldHVybiAwOwotfQogCiBzdGF0aWMgaW5saW5lIHZvaWQgZG1hX2J1
Zl9zdGF0c190ZWFyZG93bihzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmKSB7fQotc3RhdGljIGlubGlu
ZSB2b2lkIGRtYV9idWZfYXR0YWNoX3N0YXRzX3RlYXJkb3duKHN0cnVjdCBkbWFfYnVmX2F0dGFj
aG1lbnQgKmF0dGFjaCkge30KLXN0YXRpYyBpbmxpbmUgdm9pZCBkbWFfYnVmX3VwZGF0ZV9hdHRh
Y2htZW50X21hcF9jb3VudChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsCi0JCQkJ
CQkgICAgICAgaW50IGRlbHRhKSB7fQotc3RhdGljIGlubGluZSB1bnNpZ25lZCBpbnQgZG1hX2J1
Zl91cGRhdGVfYXR0YWNoX3VpZChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmKQotewotCXJldHVybiAw
OwotfQogI2VuZGlmCiAjZW5kaWYgLy8gX0RNQV9CVUZfU1lTRlNfU1RBVFNfSApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYyBiL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMK
aW5kZXggNTEwYjQyNzcxOTc0Li5iMWE2ZGI3MWM2NTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZG1h
LWJ1Zi9kbWEtYnVmLmMKKysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYwpAQCAtNzM4LDcg
KzczOCw2IEBAIGRtYV9idWZfZHluYW1pY19hdHRhY2goc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwg
c3RydWN0IGRldmljZSAqZGV2LAogewogCXN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFj
aDsKIAlpbnQgcmV0OwotCXVuc2lnbmVkIGludCBhdHRhY2hfdWlkOwogCiAJaWYgKFdBUk5fT04o
IWRtYWJ1ZiB8fCAhZGV2KSkKIAkJcmV0dXJuIEVSUl9QVFIoLUVJTlZBTCk7CkBAIC03NjQsMTMg
Kzc2Myw4IEBAIGRtYV9idWZfZHluYW1pY19hdHRhY2goc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwg
c3RydWN0IGRldmljZSAqZGV2LAogCX0KIAlkbWFfcmVzdl9sb2NrKGRtYWJ1Zi0+cmVzdiwgTlVM
TCk7CiAJbGlzdF9hZGQoJmF0dGFjaC0+bm9kZSwgJmRtYWJ1Zi0+YXR0YWNobWVudHMpOwotCWF0
dGFjaF91aWQgPSBkbWFfYnVmX3VwZGF0ZV9hdHRhY2hfdWlkKGRtYWJ1Zik7CiAJZG1hX3Jlc3Zf
dW5sb2NrKGRtYWJ1Zi0+cmVzdik7CiAKLQlyZXQgPSBkbWFfYnVmX2F0dGFjaF9zdGF0c19zZXR1
cChhdHRhY2gsIGF0dGFjaF91aWQpOwotCWlmIChyZXQpCi0JCWdvdG8gZXJyX3N5c2ZzOwotCiAJ
LyogV2hlbiBlaXRoZXIgdGhlIGltcG9ydGVyIG9yIHRoZSBleHBvcnRlciBjYW4ndCBoYW5kbGUg
ZHluYW1pYwogCSAqIG1hcHBpbmdzIHdlIGNhY2hlIHRoZSBtYXBwaW5nIGhlcmUgdG8gYXZvaWQg
aXNzdWVzIHdpdGggdGhlCiAJICogcmVzZXJ2YXRpb24gb2JqZWN0IGxvY2suCkBAIC03OTcsNyAr
NzkxLDYgQEAgZG1hX2J1Zl9keW5hbWljX2F0dGFjaChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBz
dHJ1Y3QgZGV2aWNlICpkZXYsCiAJCQlkbWFfcmVzdl91bmxvY2soYXR0YWNoLT5kbWFidWYtPnJl
c3YpOwogCQlhdHRhY2gtPnNndCA9IHNndDsKIAkJYXR0YWNoLT5kaXIgPSBETUFfQklESVJFQ1RJ
T05BTDsKLQkJZG1hX2J1Zl91cGRhdGVfYXR0YWNobWVudF9tYXBfY291bnQoYXR0YWNoLCAxIC8q
IGRlbHRhICovKTsKIAl9CiAKIAlyZXR1cm4gYXR0YWNoOwpAQCAtODE0LDcgKzgwNyw2IEBAIGRt
YV9idWZfZHluYW1pY19hdHRhY2goc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGRldmlj
ZSAqZGV2LAogCWlmIChkbWFfYnVmX2lzX2R5bmFtaWMoYXR0YWNoLT5kbWFidWYpKQogCQlkbWFf
cmVzdl91bmxvY2soYXR0YWNoLT5kbWFidWYtPnJlc3YpOwogCi1lcnJfc3lzZnM6CiAJZG1hX2J1
Zl9kZXRhY2goZG1hYnVmLCBhdHRhY2gpOwogCXJldHVybiBFUlJfUFRSKHJldCk7CiB9CkBAIC04
NjQsNyArODU2LDYgQEAgdm9pZCBkbWFfYnVmX2RldGFjaChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVm
LCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpCiAJCQlkbWFfcmVzdl9sb2NrKGF0
dGFjaC0+ZG1hYnVmLT5yZXN2LCBOVUxMKTsKIAogCQlfX3VubWFwX2RtYV9idWYoYXR0YWNoLCBh
dHRhY2gtPnNndCwgYXR0YWNoLT5kaXIpOwotCQlkbWFfYnVmX3VwZGF0ZV9hdHRhY2htZW50X21h
cF9jb3VudChhdHRhY2gsIC0xIC8qIGRlbHRhICovKTsKIAogCQlpZiAoZG1hX2J1Zl9pc19keW5h
bWljKGF0dGFjaC0+ZG1hYnVmKSkgewogCQkJZG1hYnVmLT5vcHMtPnVucGluKGF0dGFjaCk7CkBA
IC04NzgsNyArODY5LDYgQEAgdm9pZCBkbWFfYnVmX2RldGFjaChzdHJ1Y3QgZG1hX2J1ZiAqZG1h
YnVmLCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpCiAJaWYgKGRtYWJ1Zi0+b3Bz
LT5kZXRhY2gpCiAJCWRtYWJ1Zi0+b3BzLT5kZXRhY2goZG1hYnVmLCBhdHRhY2gpOwogCi0JZG1h
X2J1Zl9hdHRhY2hfc3RhdHNfdGVhcmRvd24oYXR0YWNoKTsKIAlrZnJlZShhdHRhY2gpOwogfQog
RVhQT1JUX1NZTUJPTF9HUEwoZG1hX2J1Zl9kZXRhY2gpOwpAQCAtMTAyMCwxMCArMTAxMCw2IEBA
IHN0cnVjdCBzZ190YWJsZSAqZG1hX2J1Zl9tYXBfYXR0YWNobWVudChzdHJ1Y3QgZG1hX2J1Zl9h
dHRhY2htZW50ICphdHRhY2gsCiAJCX0KIAl9CiAjZW5kaWYgLyogQ09ORklHX0RNQV9BUElfREVC
VUcgKi8KLQotCWlmICghSVNfRVJSKHNnX3RhYmxlKSkKLQkJZG1hX2J1Zl91cGRhdGVfYXR0YWNo
bWVudF9tYXBfY291bnQoYXR0YWNoLCAxIC8qIGRlbHRhICovKTsKLQogCXJldHVybiBzZ190YWJs
ZTsKIH0KIEVYUE9SVF9TWU1CT0xfR1BMKGRtYV9idWZfbWFwX2F0dGFjaG1lbnQpOwpAQCAtMTA2
MSw4ICsxMDQ3LDYgQEAgdm9pZCBkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoc3RydWN0IGRtYV9i
dWZfYXR0YWNobWVudCAqYXR0YWNoLAogCWlmIChkbWFfYnVmX2lzX2R5bmFtaWMoYXR0YWNoLT5k
bWFidWYpICYmCiAJICAgICFJU19FTkFCTEVEKENPTkZJR19ETUFCVUZfTU9WRV9OT1RJRlkpKQog
CQlkbWFfYnVmX3VucGluKGF0dGFjaCk7Ci0KLQlkbWFfYnVmX3VwZGF0ZV9hdHRhY2htZW50X21h
cF9jb3VudChhdHRhY2gsIC0xIC8qIGRlbHRhICovKTsKIH0KIEVYUE9SVF9TWU1CT0xfR1BMKGRt
YV9idWZfdW5tYXBfYXR0YWNobWVudCk7CiAKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvZG1h
LWJ1Zi5oIGIvaW5jbHVkZS9saW51eC9kbWEtYnVmLmgKaW5kZXggMmI4MTRmZGUwZDExLi42Nzhi
MjAwNmJlNzggMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oCisrKyBiL2luY2x1
ZGUvbGludXgvZG1hLWJ1Zi5oCkBAIC00NDQsMTUgKzQ0NCw2IEBAIHN0cnVjdCBkbWFfYnVmIHsK
IAlzdHJ1Y3QgZG1hX2J1Zl9zeXNmc19lbnRyeSB7CiAJCXN0cnVjdCBrb2JqZWN0IGtvYmo7CiAJ
CXN0cnVjdCBkbWFfYnVmICpkbWFidWY7Ci0KLQkJLyoqCi0JCSAqIEBzeXNmc19lbnRyeS5hdHRh
Y2htZW50X3VpZDoKLQkJICoKLQkJICogVGhpcyBpcyBwcm90ZWN0ZWQgYnkgdGhlIGRtYV9yZXN2
X2xvY2soKSBvbiBAcmVzdiBhbmQgaXMKLQkJICogaW5jcmVtZW50ZWQgb24gZWFjaCBhdHRhY2gu
Ci0JCSAqLwotCQl1bnNpZ25lZCBpbnQgYXR0YWNobWVudF91aWQ7Ci0JCXN0cnVjdCBrc2V0ICph
dHRhY2hfc3RhdHNfa3NldDsKIAl9ICpzeXNmc19lbnRyeTsKICNlbmRpZgogfTsKQEAgLTUwNCw3
ICs0OTUsNiBAQCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfb3BzIHsKICAqIEBpbXBvcnRlcl9vcHM6
IGltcG9ydGVyIG9wZXJhdGlvbnMgZm9yIHRoaXMgYXR0YWNobWVudCwgaWYgcHJvdmlkZWQKICAq
IGRtYV9idWZfbWFwL3VubWFwX2F0dGFjaG1lbnQoKSBtdXN0IGJlIGNhbGxlZCB3aXRoIHRoZSBk
bWFfcmVzdiBsb2NrIGhlbGQuCiAgKiBAaW1wb3J0ZXJfcHJpdjogaW1wb3J0ZXIgc3BlY2lmaWMg
YXR0YWNobWVudCBkYXRhLgotICogQHN5c2ZzX2VudHJ5OiBGb3IgZXhwb3NpbmcgaW5mb3JtYXRp
b24gYWJvdXQgdGhpcyBhdHRhY2htZW50IGluIHN5c2ZzLgogICoKICAqIFRoaXMgc3RydWN0dXJl
IGhvbGRzIHRoZSBhdHRhY2htZW50IGluZm9ybWF0aW9uIGJldHdlZW4gdGhlIGRtYV9idWYgYnVm
ZmVyCiAgKiBhbmQgaXRzIHVzZXIgZGV2aWNlKHMpLiBUaGUgbGlzdCBjb250YWlucyBvbmUgYXR0
YWNobWVudCBzdHJ1Y3QgcGVyIGRldmljZQpAQCAtNTI1LDEzICs1MTUsNiBAQCBzdHJ1Y3QgZG1h
X2J1Zl9hdHRhY2htZW50IHsKIAljb25zdCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfb3BzICppbXBv
cnRlcl9vcHM7CiAJdm9pZCAqaW1wb3J0ZXJfcHJpdjsKIAl2b2lkICpwcml2OwotI2lmZGVmIENP
TkZJR19ETUFCVUZfU1lTRlNfU1RBVFMKLQkvKiBmb3Igc3lzZnMgc3RhdHMgKi8KLQlzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2hfc3lzZnNfZW50cnkgewotCQlzdHJ1Y3Qga29iamVjdCBrb2JqOwotCQl1
bnNpZ25lZCBpbnQgbWFwX2NvdW50ZXI7Ci0JfSAqc3lzZnNfZW50cnk7Ci0jZW5kaWYKIH07CiAK
IC8qKgotLSAKMi4zMi4wLjkzLmc2NzBiODFhODkwLWdvb2cKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbmFyby1tbS1zaWcgbWFpbGluZyBsaXN0Ckxp
bmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZwpodHRwczovL2xpc3RzLmxpbmFyby5vcmcvbWFp
bG1hbi9saXN0aW5mby9saW5hcm8tbW0tc2lnCg==
