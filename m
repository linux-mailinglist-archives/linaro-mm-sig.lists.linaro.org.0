Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 670C25227ED
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 11 May 2022 01:57:15 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 995B247FAF
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 10 May 2022 23:57:14 +0000 (UTC)
Received: from mail-yb1-f201.google.com (mail-yb1-f201.google.com [209.85.219.201])
	by lists.linaro.org (Postfix) with ESMTPS id E695248078
	for <linaro-mm-sig@lists.linaro.org>; Tue, 10 May 2022 23:57:07 +0000 (UTC)
Received: by mail-yb1-f201.google.com with SMTP id g26-20020a25b11a000000b0064984a4ffb7so418891ybj.7
        for <linaro-mm-sig@lists.linaro.org>; Tue, 10 May 2022 16:57:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20210112;
        h=date:in-reply-to:message-id:mime-version:references:subject:from:to
         :cc:content-transfer-encoding;
        bh=v8gt6xjWudwEV2qln2N7SwuUJc9JxxsnlnvbLCYxUc0=;
        b=loPY8BnZXxZrmNCWwTUfS3qnOnH67SZdt82uLV668C+yIIJpUM1rapWhZgScGIl9UE
         JFdoQvmgq7+PYtQoNo7Xt49JaVYYmqeh2y94j0P91OEseICBN/VZcZdJ3lAn7XpCBFZ3
         ZAVIHeyQUE+wezChaUS94nW2/UcpI4NzobrLV1STkXosAruMEI00Fa/sE0BRXri67Gz2
         q05IqbfZP5GchqKe/UA5reCqq9DB1Z8ctk9/fnRwNjkinW13EkBWelw/KRjhayVVXg4q
         Q+RrUAtEcwIKZeShieINdDTV4tIt2WaYR50DZuhNAsEvXdGj1OBBCwLDh1FP0SxBPBN8
         7Qmw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:date:in-reply-to:message-id:mime-version
         :references:subject:from:to:cc:content-transfer-encoding;
        bh=v8gt6xjWudwEV2qln2N7SwuUJc9JxxsnlnvbLCYxUc0=;
        b=BnURDBU/oReEuN7SaIFU9JB+tBsGxVtomC7QL3hrnYgzBr1Py7HhxCYejcY+FHAAeK
         Nqc3er7MHzTLSGKd2HvlpNWnDWFYQnRhmklfRTv88uwPHSnamz9ZkSIYIXJU8OINU4P9
         lFlRTbUXCf1LYQ6vugV11K6bxmVuvDx2NZ4gHyEIQX4y/apEF8iPlwOhO0Hi65NZNYBq
         glFKiCIlASb33yAjPmdbKy02YEvuyu8Eng/4BqJ7TOFUwEIe2UAmiIunx9Eh3XjEb5FW
         +oyQwGYJekqdGWUHvZNy41oJ8kU98+BduM3H4MQKqzeLjtg5gD9YOCN5WpBdpbaPDGyU
         0qng==
X-Gm-Message-State: AOAM531QlQX+INnLgtn0eBXAgvDNblRn97NmmmJS3CVqZZrgwblEjGfS
	VRElYNS82N0kbUKXWvS4ivAeiXXG9LU59G8=
X-Google-Smtp-Source: ABdhPJxuMd23Slzk/nX5zXAwKMfpsaSnwA9y71fBu5xFnMi06zJ5/oaDRiKKaGgRjX9ctDMnyPrityYdWY9YepQ=
X-Received: from tj.c.googlers.com ([fda3:e722:ac3:cc00:20:ed76:c0a8:53a])
 (user=tjmercier job=sendgmr) by 2002:a5b:8cb:0:b0:645:d65f:dcdd with SMTP id
 w11-20020a5b08cb000000b00645d65fdcddmr19840185ybq.233.1652227027524; Tue, 10
 May 2022 16:57:07 -0700 (PDT)
Date: Tue, 10 May 2022 23:56:48 +0000
In-Reply-To: <20220510235653.933868-1-tjmercier@google.com>
Message-Id: <20220510235653.933868-5-tjmercier@google.com>
Mime-Version: 1.0
References: <20220510235653.933868-1-tjmercier@google.com>
X-Mailer: git-send-email 2.36.0.512.ge40c2bad7a-goog
From: "T.J. Mercier" <tjmercier@google.com>
To: tjmercier@google.com, Sumit Semwal <sumit.semwal@linaro.org>,
	"=?UTF-8?q?Christian=20K=C3=B6nig?=" <christian.koenig@amd.com>, Tejun Heo <tj@kernel.org>,
	Zefan Li <lizefan.x@bytedance.com>, Johannes Weiner <hannes@cmpxchg.org>
Message-ID-Hash: XMELKAFWFSXF3PJYE6WPFIEWDQVYYQR4
X-Message-ID-Hash: XMELKAFWFSXF3PJYE6WPFIEWDQVYYQR4
X-MailFrom: 30_t6YgkKDdAF580Dy40D2AA270.yA8749wDA-88-E4274EFE.749wDA.AD2@flex--tjmercier.bounces.google.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
CC: daniel@ffwll.ch, hridya@google.com, jstultz@google.com, tkjos@android.com, cmllamas@google.com, surenb@google.com, kaleshsingh@google.com, Kenny.Ho@amd.com, mkoutny@suse.com, skhan@linuxfoundation.org, kernel-team@android.com, linux-media@vger.kernel.org, dri-devel@lists.freedesktop.org, linaro-mm-sig@lists.linaro.org, linux-kernel@vger.kernel.org, cgroups@vger.kernel.org
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH v7 4/6] dmabuf: Add gpu cgroup charge transfer function
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/XMELKAFWFSXF3PJYE6WPFIEWDQVYYQR4/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

VGhlIGRtYV9idWZfdHJhbnNmZXJfY2hhcmdlIGZ1bmN0aW9uIHByb3ZpZGVzIGEgd2F5IGZvciBw
cm9jZXNzZXMgdG8NCnRyYW5zZmVyIGNoYXJnZSBvZiBhIGJ1ZmZlciB0byBhIGRpZmZlcmVudCBw
cm9jZXNzLiBUaGlzIGlzIGVzc2VudGlhbA0KZm9yIHRoZSBjYXNlcyB3aGVyZSBhIGNlbnRyYWwg
YWxsb2NhdG9yIHByb2Nlc3MgZG9lcyBhbGxvY2F0aW9ucyBmb3INCnZhcmlvdXMgc3Vic3lzdGVt
cywgaGFuZHMgb3ZlciB0aGUgZmQgdG8gdGhlIGNsaWVudCB3aG8gcmVxdWVzdGVkIHRoZQ0KbWVt
b3J5IGFuZCBkcm9wcyBhbGwgcmVmZXJlbmNlcyB0byB0aGUgYWxsb2NhdGVkIG1lbW9yeS4NCg0K
T3JpZ2luYWxseS1ieTogSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlhQGdvb2dsZS5jb20+DQpTaWdu
ZWQtb2ZmLWJ5OiBULkouIE1lcmNpZXIgPHRqbWVyY2llckBnb29nbGUuY29tPg0KDQotLS0NCnY1
IGNoYW5nZXMNCkZpeCBjb21taXQgbWVzc2FnZSB3aGljaCBzdGlsbCBjb250YWluZWQgdGhlIG9s
ZCBuYW1lIGZvcg0KZG1hX2J1Zl90cmFuc2Zlcl9jaGFyZ2UgcGVyIE1pY2hhbCBLb3V0bsO9Lg0K
DQpNb2RpZnkgdGhlIGRtYV9idWZfdHJhbnNmZXJfY2hhcmdlIEFQSSB0byBhY2NlcHQgYSB0YXNr
X3N0cnVjdCBpbnN0ZWFkDQpvZiBhIGdwdWNnLiBUaGlzIGF2b2lkcyByZXF1aXJpbmcgdGhlIGNh
bGxlciB0byBtYW5hZ2UgdGhlIHJlZmNvdW50DQpvZiB0aGUgZ3B1Y2cgdXBvbiBmYWlsdXJlIGFu
ZCBjb25mdXNpbmcgb3duZXJzaGlwIHRyYW5zZmVyIGxvZ2ljLg0KDQp2NCBjaGFuZ2VzDQpBZGp1
c3Qgb3JkZXJpbmcgb2YgY2hhcmdlL3VuY2hhcmdlIGR1cmluZyB0cmFuc2ZlciB0byBhdm9pZCBw
b3RlbnRpYWxseQ0KaGl0dGluZyBjZ3JvdXAgbGltaXQgcGVyIE1pY2hhbCBLb3V0bsO9Lg0KDQp2
MyBjaGFuZ2VzDQpVc2UgbW9yZSBjb21tb24gZHVhbCBhdXRob3IgY29tbWl0IG1lc3NhZ2UgZm9y
bWF0IHBlciBKb2huIFN0dWx0ei4NCg0KdjIgY2hhbmdlcw0KTW92ZSBkbWEtYnVmIGNncm91cCBj
aGFyZ2UgdHJhbnNmZXIgZnJvbSBhIGRtYV9idWZfb3AgZGVmaW5lZCBieSBldmVyeQ0KaGVhcCB0
byBhIHNpbmdsZSBkbWEtYnVmIGZ1bmN0aW9uIGZvciBhbGwgaGVhcHMgcGVyIERhbmllbCBWZXR0
ZXIgYW5kDQpDaHJpc3RpYW4gS8O2bmlnLg0KLS0tDQogZHJpdmVycy9kbWEtYnVmL2RtYS1idWYu
YyAgfCA1NyArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKw0KIGluY2x1ZGUv
bGludXgvY2dyb3VwX2dwdS5oIHwgMjQgKysrKysrKysrKysrKysrKw0KIGluY2x1ZGUvbGludXgv
ZG1hLWJ1Zi5oICAgIHwgIDYgKysrKw0KIGtlcm5lbC9jZ3JvdXAvZ3B1LmMgICAgICAgIHwgNTEg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKw0KIDQgZmlsZXMgY2hhbmdlZCwgMTM4
IGluc2VydGlvbnMoKykNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMg
Yi9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jDQppbmRleCBiYzg5YzQ0YmQ5YjkuLmYzZmI4NDQ5
MjVlMiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMNCisrKyBiL2RyaXZl
cnMvZG1hLWJ1Zi9kbWEtYnVmLmMNCkBAIC0xMzQxLDYgKzEzNDEsNjMgQEAgdm9pZCBkbWFfYnVm
X3Z1bm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgaW9zeXNfbWFwICptYXApDQog
fQ0KIEVYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfdnVubWFwLCBETUFfQlVGKTsNCiANCisv
KioNCisgKiBkbWFfYnVmX3RyYW5zZmVyX2NoYXJnZSAtIENoYW5nZSB0aGUgR1BVIGNncm91cCB0
byB3aGljaCB0aGUgcHJvdmlkZWQgZG1hX2J1ZiBpcyBjaGFyZ2VkLg0KKyAqIEBkbWFidWY6CVtp
bl0JYnVmZmVyIHdob3NlIGNoYXJnZSB3aWxsIGJlIG1pZ3JhdGVkIHRvIGEgZGlmZmVyZW50IEdQ
VSBjZ3JvdXANCisgKiBAdGFyZ2V0OglbaW5dCXRoZSB0YXNrX3N0cnVjdCBvZiB0aGUgZGVzdGlu
YXRpb24gcHJvY2VzcyBmb3IgdGhlIEdQVSBjZ3JvdXAgY2hhcmdlDQorICoNCisgKiBPbmx5IHRh
c2tzIHRoYXQgYmVsb25nIHRvIHRoZSBzYW1lIGNncm91cCB0aGUgYnVmZmVyIGlzIGN1cnJlbnRs
eSBjaGFyZ2VkIHRvDQorICogbWF5IGNhbGwgdGhpcyBmdW5jdGlvbiwgb3RoZXJ3aXNlIGl0IHdp
bGwgcmV0dXJuIC1FUEVSTS4NCisgKg0KKyAqIFJldHVybnMgMCBvbiBzdWNjZXNzLCBvciBhIG5l
Z2F0aXZlIGVycm5vIGNvZGUgb3RoZXJ3aXNlLg0KKyAqLw0KK2ludCBkbWFfYnVmX3RyYW5zZmVy
X2NoYXJnZShzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgdGFza19zdHJ1Y3QgKnRhcmdl
dCkNCit7DQorCXN0cnVjdCBncHVjZyAqY3VycmVudF9ncHVjZywgKnRhcmdldF9ncHVjZywgKnRv
X3JlbGVhc2U7DQorCWludCByZXQ7DQorDQorCWlmICghZG1hYnVmLT5ncHVjZyB8fCAhZG1hYnVm
LT5ncHVjZ19idWNrZXQpIHsNCisJCS8qIFRoaXMgZG1hYnVmIGlzIG5vdCB0cmFja2VkIHVuZGVy
IEdQVSBjZ3JvdXAgYWNjb3VudGluZyAqLw0KKwkJcmV0dXJuIDA7DQorCX0NCisNCisJY3VycmVu
dF9ncHVjZyA9IGdwdWNnX2dldChjdXJyZW50KTsNCisJdGFyZ2V0X2dwdWNnID0gZ3B1Y2dfZ2V0
KHRhcmdldCk7DQorCXRvX3JlbGVhc2UgPSB0YXJnZXRfZ3B1Y2c7DQorDQorCS8qIElmIHRoZSBz
b3VyY2UgYW5kIGRlc3RpbmF0aW9uIGNncm91cHMgYXJlIHRoZSBzYW1lLCBkb24ndCBkbyBhbnl0
aGluZy4gKi8NCisJaWYgKGN1cnJlbnRfZ3B1Y2cgPT0gdGFyZ2V0X2dwdWNnKSB7DQorCQlyZXQg
PSAwOw0KKwkJZ290byBza2lwX3RyYW5zZmVyOw0KKwl9DQorDQorCS8qDQorCSAqIFZlcmlmeSB0
aGF0IHRoZSBjZ3JvdXAgb2YgdGhlIHByb2Nlc3MgcmVxdWVzdGluZyB0aGUgdHJhbnNmZXINCisJ
ICogaXMgdGhlIHNhbWUgYXMgdGhlIG9uZSB0aGUgYnVmZmVyIGlzIGN1cnJlbnRseSBjaGFyZ2Vk
IHRvLg0KKwkgKi8NCisJbXV0ZXhfbG9jaygmZG1hYnVmLT5sb2NrKTsNCisJaWYgKGN1cnJlbnRf
Z3B1Y2cgIT0gZG1hYnVmLT5ncHVjZykgew0KKwkJcmV0ID0gLUVQRVJNOw0KKwkJZ290byBlcnI7
DQorCX0NCisNCisJcmV0ID0gZ3B1Y2dfdHJhbnNmZXJfY2hhcmdlKA0KKwkJZG1hYnVmLT5ncHVj
ZywgdGFyZ2V0X2dwdWNnLCBkbWFidWYtPmdwdWNnX2J1Y2tldCwgZG1hYnVmLT5zaXplKTsNCisJ
aWYgKHJldCkNCisJCWdvdG8gZXJyOw0KKw0KKwl0b19yZWxlYXNlID0gZG1hYnVmLT5ncHVjZzsN
CisJZG1hYnVmLT5ncHVjZyA9IHRhcmdldF9ncHVjZzsNCisNCitlcnI6DQorCW11dGV4X3VubG9j
aygmZG1hYnVmLT5sb2NrKTsNCitza2lwX3RyYW5zZmVyOg0KKwlncHVjZ19wdXQoY3VycmVudF9n
cHVjZyk7DQorCWdwdWNnX3B1dCh0b19yZWxlYXNlKTsNCisJcmV0dXJuIHJldDsNCit9DQorRVhQ
T1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl90cmFuc2Zlcl9jaGFyZ2UsIERNQV9CVUYpOw0KKw0K
ICNpZmRlZiBDT05GSUdfREVCVUdfRlMNCiBzdGF0aWMgaW50IGRtYV9idWZfZGVidWdfc2hvdyhz
dHJ1Y3Qgc2VxX2ZpbGUgKnMsIHZvaWQgKnVudXNlZCkNCiB7DQpkaWZmIC0tZ2l0IGEvaW5jbHVk
ZS9saW51eC9jZ3JvdXBfZ3B1LmggYi9pbmNsdWRlL2xpbnV4L2Nncm91cF9ncHUuaA0KaW5kZXgg
Y2IyMjhhMTZhYTFmLi43ZWI2OGYxNTA3ZmIgMTAwNjQ0DQotLS0gYS9pbmNsdWRlL2xpbnV4L2Nn
cm91cF9ncHUuaA0KKysrIGIvaW5jbHVkZS9saW51eC9jZ3JvdXBfZ3B1LmgNCkBAIC03NSw2ICs3
NSwyMiBAQCBpbnQgZ3B1Y2dfY2hhcmdlKHN0cnVjdCBncHVjZyAqZ3B1Y2csIHN0cnVjdCBncHVj
Z19idWNrZXQgKmJ1Y2tldCwgdTY0IHNpemUpOw0KICAqLw0KIHZvaWQgZ3B1Y2dfdW5jaGFyZ2Uo
c3RydWN0IGdwdWNnICpncHVjZywgc3RydWN0IGdwdWNnX2J1Y2tldCAqYnVja2V0LCB1NjQgc2l6
ZSk7DQogDQorLyoqDQorICogZ3B1Y2dfdHJhbnNmZXJfY2hhcmdlIC0gVHJhbnNmZXIgYSBHUFUg
Y2hhcmdlIGZyb20gb25lIGNncm91cCB0byBhbm90aGVyLg0KKyAqDQorICogQHNvdXJjZToJW2lu
XQlUaGUgR1BVIGNncm91cCB0aGUgY2hhcmdlIHdpbGwgYmUgdHJhbnNmZXJyZWQgZnJvbS4NCisg
KiBAZGVzdDoJW2luXQlUaGUgR1BVIGNncm91cCB0aGUgY2hhcmdlIHdpbGwgYmUgdHJhbnNmZXJy
ZWQgdG8uDQorICogQGJ1Y2tldDoJW2luXQlUaGUgR1BVIGNncm91cCBidWNrZXQgY29ycmVzcG9u
ZGluZyB0byB0aGUgY2hhcmdlLg0KKyAqIEBzaXplOglbaW5dCVRoZSBzaXplIG9mIHRoZSBtZW1v
cnkgaW4gYnl0ZXMuDQorICogICAgICAgICAgICAgICAgICAgICAgVGhpcyBzaXplIHdpbGwgYmUg
cm91bmRlZCB1cCB0byB0aGUgbmVhcmVzdCBwYWdlIHNpemUuDQorICoNCisgKiBSZXR1cm5zIDAg
b24gc3VjY2Vzcywgb3IgYSBuZWdhdGl2ZSBlcnJubyBjb2RlIG90aGVyd2lzZS4NCisgKi8NCitp
bnQgZ3B1Y2dfdHJhbnNmZXJfY2hhcmdlKHN0cnVjdCBncHVjZyAqc291cmNlLA0KKwkJCSAgc3Ry
dWN0IGdwdWNnICpkZXN0LA0KKwkJCSAgc3RydWN0IGdwdWNnX2J1Y2tldCAqYnVja2V0LA0KKwkJ
CSAgdTY0IHNpemUpOw0KKw0KIC8qKg0KICAqIGdwdWNnX3JlZ2lzdGVyX2J1Y2tldCAtIFJlZ2lz
dGVycyBhIGJ1Y2tldCBmb3IgbWVtb3J5IGFjY291bnRpbmcgdXNpbmcgdGhlIEdQVSBjZ3JvdXAg
Y29udHJvbGxlci4NCiAgKg0KQEAgLTExNyw2ICsxMzMsMTQgQEAgc3RhdGljIGlubGluZSB2b2lk
IGdwdWNnX3VuY2hhcmdlKHN0cnVjdCBncHVjZyAqZ3B1Y2csDQogCQkJCSAgc3RydWN0IGdwdWNn
X2J1Y2tldCAqYnVja2V0LA0KIAkJCQkgIHU2NCBzaXplKSB7fQ0KIA0KK3N0YXRpYyBpbmxpbmUg
aW50IGdwdWNnX3RyYW5zZmVyX2NoYXJnZShzdHJ1Y3QgZ3B1Y2cgKnNvdXJjZSwNCisJCQkJCXN0
cnVjdCBncHVjZyAqZGVzdCwNCisJCQkJCXN0cnVjdCBncHVjZ19idWNrZXQgKmJ1Y2tldCwNCisJ
CQkJCXU2NCBzaXplKQ0KK3sNCisJcmV0dXJuIDA7DQorfQ0KKw0KIHN0YXRpYyBpbmxpbmUgc3Ry
dWN0IGdwdWNnX2J1Y2tldCAqZ3B1Y2dfcmVnaXN0ZXJfYnVja2V0KGNvbnN0IGNoYXIgKm5hbWUp
IHt9DQogI2VuZGlmIC8qIENPTkZJR19DR1JPVVBfR1BVICovDQogI2VuZGlmIC8qIF9DR1JPVVBf
R1BVX0ggKi8NCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1idWYuaCBiL2luY2x1ZGUv
bGludXgvZG1hLWJ1Zi5oDQppbmRleCA4ZTdjNTVjODMwYjMuLjQzOGFkODU3N2I3NiAxMDA2NDQN
Ci0tLSBhL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oDQorKysgYi9pbmNsdWRlL2xpbnV4L2RtYS1i
dWYuaA0KQEAgLTE4LDYgKzE4LDcgQEANCiAjaW5jbHVkZSA8bGludXgvZmlsZS5oPg0KICNpbmNs
dWRlIDxsaW51eC9lcnIuaD4NCiAjaW5jbHVkZSA8bGludXgvc2NhdHRlcmxpc3QuaD4NCisjaW5j
bHVkZSA8bGludXgvc2NoZWQuaD4NCiAjaW5jbHVkZSA8bGludXgvbGlzdC5oPg0KICNpbmNsdWRl
IDxsaW51eC9kbWEtbWFwcGluZy5oPg0KICNpbmNsdWRlIDxsaW51eC9mcy5oPg0KQEAgLTY1MCw5
ICs2NTEsMTQgQEAgdm9pZCBkbWFfYnVmX3Z1bm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBz
dHJ1Y3QgaW9zeXNfbWFwICptYXApOw0KIHZvaWQgZG1hX2J1Zl9leHBfaW5mb19zZXRfZ3B1Y2co
c3RydWN0IGRtYV9idWZfZXhwb3J0X2luZm8gKmV4cF9pbmZvLA0KIAkJCQlzdHJ1Y3QgZ3B1Y2cg
KmdwdWNnLA0KIAkJCQlzdHJ1Y3QgZ3B1Y2dfYnVja2V0ICpncHVjZ19idWNrZXQpOw0KKw0KK2lu
dCBkbWFfYnVmX3RyYW5zZmVyX2NoYXJnZShzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3Qg
dGFza19zdHJ1Y3QgKnRhcmdldCk7DQogI2Vsc2UvKiBDT05GSUdfQ0dST1VQX0dQVSAqLw0KIHN0
YXRpYyBpbmxpbmUgdm9pZCBkbWFfYnVmX2V4cF9pbmZvX3NldF9ncHVjZyhzdHJ1Y3QgZG1hX2J1
Zl9leHBvcnRfaW5mbyAqZXhwX2luZm8sDQogCQkJCQkgICAgICBzdHJ1Y3QgZ3B1Y2cgKmdwdWNn
LA0KIAkJCQkJICAgICAgc3RydWN0IGdwdWNnX2J1Y2tldCAqZ3B1Y2dfYnVja2V0KSB7fQ0KKw0K
K3N0YXRpYyBpbmxpbmUgaW50IGRtYV9idWZfdHJhbnNmZXJfY2hhcmdlKHN0cnVjdCBkbWFfYnVm
ICpkbWFidWYsIHN0cnVjdCB0YXNrX3N0cnVjdCAqdGFyZ2V0KQ0KK3sgcmV0dXJuIDA7IH0NCiAj
ZW5kaWYgLyogQ09ORklHX0NHUk9VUF9HUFUgKi8NCiAjZW5kaWYgLyogX19ETUFfQlVGX0hfXyAq
Lw0KZGlmZiAtLWdpdCBhL2tlcm5lbC9jZ3JvdXAvZ3B1LmMgYi9rZXJuZWwvY2dyb3VwL2dwdS5j
DQppbmRleCBhZDE2ZWExNWQ0MjcuLjAzOGVhODczYTlkMyAxMDA2NDQNCi0tLSBhL2tlcm5lbC9j
Z3JvdXAvZ3B1LmMNCisrKyBiL2tlcm5lbC9jZ3JvdXAvZ3B1LmMNCkBAIC0yNzQsNiArMjc0LDU3
IEBAIHZvaWQgZ3B1Y2dfdW5jaGFyZ2Uoc3RydWN0IGdwdWNnICpncHVjZywgc3RydWN0IGdwdWNn
X2J1Y2tldCAqYnVja2V0LCB1NjQgc2l6ZSkNCiAJY3NzX3B1dCgmZ3B1Y2ctPmNzcyk7DQogfQ0K
IA0KK2ludCBncHVjZ190cmFuc2Zlcl9jaGFyZ2Uoc3RydWN0IGdwdWNnICpzb3VyY2UsDQorCQkJ
ICBzdHJ1Y3QgZ3B1Y2cgKmRlc3QsDQorCQkJICBzdHJ1Y3QgZ3B1Y2dfYnVja2V0ICpidWNrZXQs
DQorCQkJICB1NjQgc2l6ZSkNCit7DQorCXN0cnVjdCBwYWdlX2NvdW50ZXIgKmNvdW50ZXI7DQor
CXU2NCBucl9wYWdlczsNCisJc3RydWN0IGdwdWNnX3Jlc291cmNlX3Bvb2wgKnJwX3NvdXJjZSwg
KnJwX2Rlc3Q7DQorCWludCByZXQgPSAwOw0KKw0KKwlucl9wYWdlcyA9IFBBR0VfQUxJR04oc2l6
ZSkgPj4gUEFHRV9TSElGVDsNCisNCisJbXV0ZXhfbG9jaygmZ3B1Y2dfbXV0ZXgpOw0KKwlycF9z
b3VyY2UgPSBjZ19ycG9vbF9maW5kX2xvY2tlZChzb3VyY2UsIGJ1Y2tldCk7DQorCWlmICh1bmxp
a2VseSghcnBfc291cmNlKSkgew0KKwkJcmV0ID0gLUVOT0VOVDsNCisJCWdvdG8gZXhpdF9lYXJs
eTsNCisJfQ0KKw0KKwlycF9kZXN0ID0gY2dfcnBvb2xfZ2V0X2xvY2tlZChkZXN0LCBidWNrZXQp
Ow0KKwlpZiAoSVNfRVJSKHJwX2Rlc3QpKSB7DQorCQlyZXQgPSBQVFJfRVJSKHJwX2Rlc3QpOw0K
KwkJZ290byBleGl0X2Vhcmx5Ow0KKwl9DQorDQorCS8qDQorCSAqIEZpcnN0IHVuY2hhcmdlIGZy
b20gdGhlIHBvb2wgaXQncyBjdXJyZW50bHkgY2hhcmdlZCB0by4gVGhpcyBvcmRlcmluZyBhdm9p
ZHMgZG91YmxlDQorCSAqIGNoYXJnaW5nIHdoaWxlIHRoZSB0cmFuc2ZlciBpcyBpbiBwcm9ncmVz
cywgd2hpY2ggY291bGQgY2F1c2UgdXMgdG8gaGl0IGEgbGltaXQuDQorCSAqIElmIHRoZSB0cnlf
Y2hhcmdlIGZhaWxzIGZvciB0aGlzIHRyYW5zZmVyLCB3ZSBuZWVkIHRvIGJlIGFibGUgdG8gcmV2
ZXJzZSB0aGlzIHVuY2hhcmdlLA0KKwkgKiBzbyB3ZSBjb250aW51ZSB0byBob2xkIHRoZSBncHVj
Z19tdXRleCBoZXJlLg0KKwkgKi8NCisJcGFnZV9jb3VudGVyX3VuY2hhcmdlKCZycF9zb3VyY2Ut
PnRvdGFsLCBucl9wYWdlcyk7DQorCWNzc19wdXQoJnNvdXJjZS0+Y3NzKTsNCisNCisJLyogTm93
IGF0dGVtcHQgdGhlIG5ldyBjaGFyZ2UgKi8NCisJaWYgKHBhZ2VfY291bnRlcl90cnlfY2hhcmdl
KCZycF9kZXN0LT50b3RhbCwgbnJfcGFnZXMsICZjb3VudGVyKSkgew0KKwkJY3NzX2dldCgmZGVz
dC0+Y3NzKTsNCisJfSBlbHNlIHsNCisJCS8qDQorCQkgKiBUaGUgbmV3IGNoYXJnZSBmYWlsZWQs
IHNvIHJldmVyc2UgdGhlIHVuY2hhcmdlIGZyb20gYWJvdmUuIFRoaXMgc2hvdWxkIGFsd2F5cw0K
KwkJICogc3VjY2VlZCBzaW5jZSBjaGFyZ2VzIG9uIHNvdXJjZSBhcmUgYmxvY2tlZCBieSBncHVj
Z19tdXRleC4NCisJCSAqLw0KKwkJV0FSTl9PTighcGFnZV9jb3VudGVyX3RyeV9jaGFyZ2UoJnJw
X3NvdXJjZS0+dG90YWwsIG5yX3BhZ2VzLCAmY291bnRlcikpOw0KKwkJY3NzX2dldCgmc291cmNl
LT5jc3MpOw0KKwkJcmV0ID0gLUVOT01FTTsNCisJfQ0KK2V4aXRfZWFybHk6DQorCW11dGV4X3Vu
bG9jaygmZ3B1Y2dfbXV0ZXgpOw0KKwlyZXR1cm4gcmV0Ow0KK30NCisNCiBzdHJ1Y3QgZ3B1Y2df
YnVja2V0ICpncHVjZ19yZWdpc3Rlcl9idWNrZXQoY29uc3QgY2hhciAqbmFtZSkNCiB7DQogCXN0
cnVjdCBncHVjZ19idWNrZXQgKmJ1Y2tldCwgKmI7DQotLSANCjIuMzYuMC41MTIuZ2U0MGMyYmFk
N2EtZ29vZw0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdCAtLSBsaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFy
by5vcmcKVG8gdW5zdWJzY3JpYmUgc2VuZCBhbiBlbWFpbCB0byBsaW5hcm8tbW0tc2lnLWxlYXZl
QGxpc3RzLmxpbmFyby5vcmcK
