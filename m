Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 2250B517AA6
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  3 May 2022 01:20:33 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 38D1848049
	for <lists+linaro-mm-sig@lfdr.de>; Mon,  2 May 2022 23:20:32 +0000 (UTC)
Received: from mail-yw1-f202.google.com (mail-yw1-f202.google.com [209.85.128.202])
	by lists.linaro.org (Postfix) with ESMTPS id 79BF74804C
	for <linaro-mm-sig@lists.linaro.org>; Mon,  2 May 2022 23:20:24 +0000 (UTC)
Received: by mail-yw1-f202.google.com with SMTP id 00721157ae682-2dc7bdd666fso147287767b3.7
        for <linaro-mm-sig@lists.linaro.org>; Mon, 02 May 2022 16:20:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20210112;
        h=date:in-reply-to:message-id:mime-version:references:subject:from:to
         :cc:content-transfer-encoding;
        bh=0TAk0nmCubnIEtozmQWacfwQLEk6ByxDGz3r/lPj7cw=;
        b=lOWN9rzefUZ0edT8p5y5ADSerTjzqQHH9B8Nx9+g/DzybZnZQFIPC1y1vylXUAhzfb
         48EacZnRhJFPXZQnt/XiOyLfjrQio+ZgDr5kxqEy2Z8uSsjG6bAXhCcwX0FCFwXnLLK1
         zfZiHsSyWXuf4f0sxVZoQgNabkLSRI9n0GtF0YXaDPKpPrkkcifa0we7kaGwCNKAFgfM
         mYUJ0njkyRtiW5Uuwbij4ddqTS4Fg9nbKBRaO4bqn2W8tXmtovV2++Q87iR0d3N0RqzA
         Xz+T3RXQ3HfD8rg4u/fWinrkS2DnsuMDBlKjgdMo6p7C3PsDTRRKcxZRElpEqI3ZmrlX
         1Gbg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:date:in-reply-to:message-id:mime-version
         :references:subject:from:to:cc:content-transfer-encoding;
        bh=0TAk0nmCubnIEtozmQWacfwQLEk6ByxDGz3r/lPj7cw=;
        b=mzGwE+k1LAna/ZlUVEMd1la+Rbff9xQnANmfXLo6p/3FYOvrJjP9hIVCiu5vvpNsuf
         GmrzNHC6vyTBf4cm+4muQoV+hxbIUKeQGGeRr+4z0i7gIO/JZXoTEkYDqlnw428OcrC3
         eGRW0yj1T02HTCn5fFrMrWiJwJtty3UQrYZ011DzJ7WWQTB2yE5Fdf9e9/C+Fv4lpFHM
         GAW6NU0AyeENVwjHiyQM3kYJ/ZQZ96dKgaYtF/4hhuJFdYKy+Y69EHnNFjDEWcp9tmdl
         O/sTAxdLXn+5J0+tv9OEdTZFkY6xstbyUVKlVmJaGds2Dqax9XWhJchXVR5dLJNi8+pQ
         l/2A==
X-Gm-Message-State: AOAM533RoRmkw0DPQVMIBESLFQOdFfSCADvTLFWswDUwJjjwYGvH7NsW
	BNsWfUZB6wpu/KjyraHhxaUNYZ+XxNvqi3o=
X-Google-Smtp-Source: ABdhPJyZJbG0ZG2PPgW/AhQlPJhLbqn/wtOk6UM6bU5+W9xCurl8VcjAduCdRLPhG2ZDDa9ZHojEC5JktltKEOI=
X-Received: from tj.c.googlers.com ([fda3:e722:ac3:cc00:20:ed76:c0a8:53a])
 (user=tjmercier job=sendgmr) by 2002:a05:6902:52:b0:645:bd1:970e with SMTP id
 m18-20020a056902005200b006450bd1970emr11802500ybh.413.1651533624083; Mon, 02
 May 2022 16:20:24 -0700 (PDT)
Date: Mon,  2 May 2022 23:19:39 +0000
In-Reply-To: <20220502231944.3891435-1-tjmercier@google.com>
Message-Id: <20220502231944.3891435-6-tjmercier@google.com>
Mime-Version: 1.0
References: <20220502231944.3891435-1-tjmercier@google.com>
X-Mailer: git-send-email 2.36.0.464.gb9c8b46e94-goog
From: "T.J. Mercier" <tjmercier@google.com>
To: tjmercier@google.com, Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
	"=?UTF-8?q?Arve=20Hj=C3=B8nnev=C3=A5g?=" <arve@android.com>, Todd Kjos <tkjos@android.com>, Martijn Coenen <maco@android.com>,
	Joel Fernandes <joel@joelfernandes.org>, Christian Brauner <brauner@kernel.org>,
	Hridya Valsaraju <hridya@google.com>, Suren Baghdasaryan <surenb@google.com>,
	Sumit Semwal <sumit.semwal@linaro.org>,
	"=?UTF-8?q?Christian=20K=C3=B6nig?=" <christian.koenig@amd.com>
Message-ID-Hash: XZQWNI5OFNOSOGIFRWUINOCIQY57YJQJ
X-Message-ID-Hash: XZQWNI5OFNOSOGIFRWUINOCIQY57YJQJ
X-MailFrom: 3OGdwYgkKDeEWMPHUFLHUJRRJOH.FRPOLQDUR-PP-VLJOLVWV.OLQDUR.RUJ@flex--tjmercier.bounces.google.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
CC: daniel@ffwll.ch, tj@kernel.org, jstultz@google.com, cmllamas@google.com, kaleshsingh@google.com, Kenny.Ho@amd.com, mkoutny@suse.com, skhan@linuxfoundation.org, kernel-team@android.com, linux-kernel@vger.kernel.org, linux-media@vger.kernel.org, dri-devel@lists.freedesktop.org, linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH v6 5/6] binder: Add flags to relinquish ownership of fds
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/XZQWNI5OFNOSOGIFRWUINOCIQY57YJQJ/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

RnJvbTogSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlhQGdvb2dsZS5jb20+DQoNClRoaXMgcGF0Y2gg
aW50cm9kdWNlcyBmbGFncyBCSU5ERVJfRkRfRkxBR19YRkVSX0NIQVJHRSwgYW5kDQpCSU5ERVJf
RkRfRkxBR19YRkVSX0NIQVJHRSB0aGF0IGEgcHJvY2VzcyBzZW5kaW5nIGFuIGluZGl2aWR1YWwg
ZmQgb3INCmZkIGFycmF5IHRvIGFub3RoZXIgcHJvY2VzcyBvdmVyIGJpbmRlciBJUEMgY2FuIHNl
dCB0byByZWxpbnF1aXNoDQpvd25lcnNoaXAgb2YgdGhlIGZkcyBiZWluZyBzZW50IGZvciBtZW1v
cnkgYWNjb3VudGluZyBwdXJwb3Nlcy4gSWYgdGhlDQpmbGFnIGlzIGZvdW5kIHRvIGJlIHNldCBk
dXJpbmcgdGhlIGZkIG9yIGZkIGFycmF5IHRyYW5zbGF0aW9uIGFuZCB0aGUNCmZkIGlzIGZvciBh
IERNQS1CVUYsIHRoZSBidWZmZXIgaXMgdW5jaGFyZ2VkIGZyb20gdGhlIHNlbmRlcidzIGNncm91
cA0KYW5kIGNoYXJnZWQgdG8gdGhlIHJlY2VpdmluZyBwcm9jZXNzJ3MgY2dyb3VwIGluc3RlYWQu
DQoNCkl0IGlzIHVwIHRvIHRoZSBzZW5kaW5nIHByb2Nlc3MgdG8gZW5zdXJlIHRoYXQgaXQgY2xv
c2VzIHRoZSBmZHMNCnJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGUgdHJhbnNmZXIgZmFpbGVkIG9y
IHN1Y2NlZWRlZC4NCg0KTW9zdCBncmFwaGljcyBzaGFyZWQgbWVtb3J5IGFsbG9jYXRpb25zIGlu
IEFuZHJvaWQgYXJlIGRvbmUgYnkgdGhlDQpncmFwaGljcyBhbGxvY2F0b3IgSEFMIHByb2Nlc3Mu
IE9uIHJlcXVlc3RzIGZyb20gY2xpZW50cywgdGhlIEhBTCBwcm9jZXNzDQphbGxvY2F0ZXMgbWVt
b3J5IGFuZCBzZW5kcyB0aGUgZmRzIHRvIHRoZSBjbGllbnRzIG92ZXIgYmluZGVyIElQQy4NClRo
ZSBncmFwaGljcyBhbGxvY2F0b3IgSEFMIHdpbGwgbm90IHJldGFpbiBhbnkgcmVmZXJlbmNlcyB0
byB0aGUNCmJ1ZmZlcnMuIFdoZW4gdGhlIEhBTCBzZXRzICpfRkxBR19YRkVSX0NIQVJHRSBmb3Ig
ZmQgYXJyYXlzIGhvbGRpbmcNCkRNQS1CVUYgZmRzLCBvciBpbmRpdmlkdWFsIGZkIG9iamVjdHMs
IHRoZSBncHUgY2dyb3VwIGNvbnRyb2xsZXIgd2lsbA0KYmUgYWJsZSB0byBjb3JyZWN0bHkgY2hh
cmdlIHRoZSBidWZmZXJzIHRvIHRoZSBjbGllbnQgcHJvY2Vzc2VzIGluc3RlYWQNCm9mIHRoZSBn
cmFwaGljcyBhbGxvY2F0b3IgSEFMLg0KDQpTaW5jZSB0aGlzIGlzIGEgbmV3IGZlYXR1cmUgZXhw
b3NlZCB0byB1c2Vyc3BhY2UsIHRoZSBrZXJuZWwgYW5kIHVzZXJzcGFjZQ0KbXVzdCBiZSBjb21w
YXRpYmxlIGZvciB0aGUgYWNjb3VudGluZyB0byB3b3JrIGZvciB0cmFuc2ZlcnMuIEluIGFsbCBj
YXNlcw0KdGhlIGFsbG9jYXRpb24gYW5kIHRyYW5zcG9ydCBvZiBETUEgYnVmZmVycyB2aWEgYmlu
ZGVyIHdpbGwgc3VjY2VlZCwgYnV0DQpvbmx5IHdoZW4gYm90aCB0aGUga2VybmVsIHN1cHBvcnRz
LCBhbmQgdXNlcnNwYWNlIGRlcGVuZHMgb24gdGhpcyBmZWF0dXJlDQp3aWxsIHRoZSB0cmFuc2Zl
ciBhY2NvdW50aW5nIHdvcmsuIFRoZSBwb3NzaWJsZSBzY2VuYXJpb3MgYXJlIGRldGFpbGVkDQpi
ZWxvdzoNCg0KMS4gbmV3IGtlcm5lbCArIG9sZCB1c2Vyc3BhY2UNClRoZSBrZXJuZWwgc3VwcG9y
dHMgdGhlIGZlYXR1cmUgYnV0IHVzZXJzcGFjZSBkb2VzIG5vdCB1c2UgaXQuIFRoZSBvbGQNCnVz
ZXJzcGFjZSB3b24ndCBtb3VudCB0aGUgbmV3IGNncm91cCBjb250cm9sbGVyLCBhY2NvdW50aW5n
IGlzIG5vdA0KcGVyZm9ybWVkLCBjaGFyZ2UgaXMgbm90IHRyYW5zZmVycmVkLg0KDQoyLiBvbGQg
a2VybmVsICsgbmV3IHVzZXJzcGFjZQ0KVGhlIG5ldyBjZ3JvdXAgY29udHJvbGxlciBpcyBub3Qg
c3VwcG9ydGVkIGJ5IHRoZSBrZXJuZWwsIGFjY291bnRpbmcgaXMNCm5vdCBwZXJmb3JtZWQsIGNo
YXJnZSBpcyBub3QgdHJhbnNmZXJyZWQuDQoNCjMuIG9sZCBrZXJuZWwgKyBvbGQgdXNlcnNwYWNl
DQpTYW1lIGFzICMyDQoNCjQuIG5ldyBrZXJuZWwgKyBuZXcgdXNlcnNwYWNlDQpDZ3JvdXAgaXMg
bW91bnRlZCwgZmVhdHVyZSBpcyBzdXBwb3J0ZWQgYW5kIHVzZWQuDQoNClNpZ25lZC1vZmYtYnk6
IEhyaWR5YSBWYWxzYXJhanUgPGhyaWR5YUBnb29nbGUuY29tPg0KU2lnbmVkLW9mZi1ieTogVC5K
LiBNZXJjaWVyIDx0am1lcmNpZXJAZ29vZ2xlLmNvbT4NCg0KLS0tDQp2NiBjaGFuZ2VzDQpSZW5h
bWUgQklOREVSX0ZEe0F9X0ZMQUdfU0VOREVSX05PX05FRUQgLT4NCkJJTkRFUl9GRHtBfV9GTEFH
X1hGRVJfQ0hBUkdFIHBlciBDYXJsb3MgTGxhbWFzLg0KDQpSZXR1cm4gZXJyb3Igb24gdHJhbnNm
ZXIgZmFpbHVyZSBwZXIgQ2FybG9zIExsYW1hcy4NCg0KdjUgY2hhbmdlcw0KU3VwcG9ydCBib3Ro
IGJpbmRlcl9mZF9hcnJheV9vYmplY3QgYW5kIGJpbmRlcl9mZF9vYmplY3QuIFRoaXMgaXMNCm5l
Y2Vzc2FyeSBiZWNhdXNlIG5ldyB2ZXJzaW9ucyBvZiBBbmRyb2lkIHdpbGwgdXNlIGJpbmRlcl9m
ZF9vYmplY3QNCmluc3RlYWQgb2YgYmluZGVyX2ZkX2FycmF5X29iamVjdCwgYW5kIHdlIG5lZWQg
dG8gc3VwcG9ydCBib3RoLg0KDQpVc2UgdGhlIG5ldywgc2ltcGxlciBkbWFfYnVmX3RyYW5zZmVy
X2NoYXJnZSBBUEkuDQoNCnYzIGNoYW5nZXMNClJlbW92ZSBhbmRyb2lkIGZyb20gdGl0bGUgcGVy
IFRvZGQgS2pvcy4NCg0KVXNlIG1vcmUgY29tbW9uIGR1YWwgYXV0aG9yIGNvbW1pdCBtZXNzYWdl
IGZvcm1hdCBwZXIgSm9obiBTdHVsdHouDQoNCkluY2x1ZGUgZGV0YWlscyBvbiBiZWhhdmlvciBm
b3IgYWxsIGNvbWJpbmF0aW9ucyBvZiBrZXJuZWwvdXNlcnNwYWNlDQp2ZXJzaW9ucyBpbiBjaGFu
Z2Vsb2cgKHRoYW5rcyBTdXJlbiBCYWdoZGFzYXJ5YW4pIHBlciBHcmVnIEtyb2FoLUhhcnRtYW4u
DQoNCnYyIGNoYW5nZXMNCk1vdmUgZG1hLWJ1ZiBjZ3JvdXAgY2hhcmdlIHRyYW5zZmVyIGZyb20g
YSBkbWFfYnVmX29wIGRlZmluZWQgYnkgZXZlcnkNCmhlYXAgdG8gYSBzaW5nbGUgZG1hLWJ1ZiBm
dW5jdGlvbiBmb3IgYWxsIGhlYXBzIHBlciBEYW5pZWwgVmV0dGVyIGFuZA0KQ2hyaXN0aWFuIEvD
tm5pZy4NCi0tLQ0KIGRyaXZlcnMvYW5kcm9pZC9iaW5kZXIuYyAgICAgICAgICAgIHwgMzEgKysr
KysrKysrKysrKysrKysrKysrKysrKy0tLS0NCiBkcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jICAg
ICAgICAgICB8ICA0ICsrLS0NCiBpbmNsdWRlL2xpbnV4L2RtYS1idWYuaCAgICAgICAgICAgICB8
ICAyICstDQogaW5jbHVkZS91YXBpL2xpbnV4L2FuZHJvaWQvYmluZGVyLmggfCAyMyArKysrKysr
KysrKysrKysrKy0tLS0NCiA0IGZpbGVzIGNoYW5nZWQsIDQ5IGluc2VydGlvbnMoKyksIDExIGRl
bGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9hbmRyb2lkL2JpbmRlci5jIGIvZHJp
dmVycy9hbmRyb2lkL2JpbmRlci5jDQppbmRleCA4MzUxYzU2Mzg4ODAuLjFmMzliMjQ0OThmMSAx
MDA2NDQNCi0tLSBhL2RyaXZlcnMvYW5kcm9pZC9iaW5kZXIuYw0KKysrIGIvZHJpdmVycy9hbmRy
b2lkL2JpbmRlci5jDQpAQCAtNDIsNiArNDIsNyBAQA0KIA0KICNkZWZpbmUgcHJfZm10KGZtdCkg
S0JVSUxEX01PRE5BTUUgIjogIiBmbXQNCiANCisjaW5jbHVkZSA8bGludXgvZG1hLWJ1Zi5oPg0K
ICNpbmNsdWRlIDxsaW51eC9mZHRhYmxlLmg+DQogI2luY2x1ZGUgPGxpbnV4L2ZpbGUuaD4NCiAj
aW5jbHVkZSA8bGludXgvZnJlZXplci5oPg0KQEAgLTIxNzAsNyArMjE3MSw3IEBAIHN0YXRpYyBp
bnQgYmluZGVyX3RyYW5zbGF0ZV9oYW5kbGUoc3RydWN0IGZsYXRfYmluZGVyX29iamVjdCAqZnAs
DQogCXJldHVybiByZXQ7DQogfQ0KIA0KLXN0YXRpYyBpbnQgYmluZGVyX3RyYW5zbGF0ZV9mZCh1
MzIgZmQsIGJpbmRlcl9zaXplX3QgZmRfb2Zmc2V0LA0KK3N0YXRpYyBpbnQgYmluZGVyX3RyYW5z
bGF0ZV9mZCh1MzIgZmQsIGJpbmRlcl9zaXplX3QgZmRfb2Zmc2V0LCBfX3UzMiBmbGFncywNCiAJ
CQkgICAgICAgc3RydWN0IGJpbmRlcl90cmFuc2FjdGlvbiAqdCwNCiAJCQkgICAgICAgc3RydWN0
IGJpbmRlcl90aHJlYWQgKnRocmVhZCwNCiAJCQkgICAgICAgc3RydWN0IGJpbmRlcl90cmFuc2Fj
dGlvbiAqaW5fcmVwbHlfdG8pDQpAQCAtMjIwOCw2ICsyMjA5LDI2IEBAIHN0YXRpYyBpbnQgYmlu
ZGVyX3RyYW5zbGF0ZV9mZCh1MzIgZmQsIGJpbmRlcl9zaXplX3QgZmRfb2Zmc2V0LA0KIAkJZ290
byBlcnJfc2VjdXJpdHk7DQogCX0NCiANCisJaWYgKElTX0VOQUJMRUQoQ09ORklHX0NHUk9VUF9H
UFUpICYmIChmbGFncyAmIEJJTkRFUl9GRF9GTEFHX1hGRVJfQ0hBUkdFKSkgew0KKwkJc3RydWN0
IGRtYV9idWYgKmRtYWJ1ZjsNCisNCisJCWlmICghaXNfZG1hX2J1Zl9maWxlKGZpbGUpKSB7DQor
CQkJYmluZGVyX3VzZXJfZXJyb3IoDQorCQkJCSIlZDolZCBnb3QgdHJhbnNhY3Rpb24gd2l0aCBY
RkVSX0NIQVJHRSBmb3Igbm9uLWRtYWJ1ZiBmZCwgJWRcbiIsDQorCQkJCXByb2MtPnBpZCwgdGhy
ZWFkLT5waWQsIGZkKTsNCisJCQlyZXQgPSAtRUlOVkFMOw0KKwkJCWdvdG8gZXJyX2RtYWJ1ZjsN
CisJCX0NCisNCisJCWRtYWJ1ZiA9IGZpbGUtPnByaXZhdGVfZGF0YTsNCisJCXJldCA9IGRtYV9i
dWZfdHJhbnNmZXJfY2hhcmdlKGRtYWJ1ZiwgdGFyZ2V0X3Byb2MtPnRzayk7DQorCQlpZiAocmV0
KSB7DQorCQkJcHJfd2FybigiJWQ6JWQgVW5hYmxlIHRvIHRyYW5zZmVyIERNQS1CVUYgZmQgY2hh
cmdlIHRvICVkXG4iLA0KKwkJCQlwcm9jLT5waWQsIHRocmVhZC0+cGlkLCB0YXJnZXRfcHJvYy0+
cGlkKTsNCisJCQlnb3RvIGVycl94ZmVyOw0KKwkJfQ0KKwl9DQorDQogCS8qDQogCSAqIEFkZCBm
aXh1cCByZWNvcmQgZm9yIHRoaXMgdHJhbnNhY3Rpb24uIFRoZSBhbGxvY2F0aW9uDQogCSAqIG9m
IHRoZSBmZCBpbiB0aGUgdGFyZ2V0IG5lZWRzIHRvIGJlIGRvbmUgZnJvbSBhDQpAQCAtMjIyNiw2
ICsyMjQ3LDggQEAgc3RhdGljIGludCBiaW5kZXJfdHJhbnNsYXRlX2ZkKHUzMiBmZCwgYmluZGVy
X3NpemVfdCBmZF9vZmZzZXQsDQogCXJldHVybiByZXQ7DQogDQogZXJyX2FsbG9jOg0KK2Vycl94
ZmVyOg0KK2Vycl9kbWFidWY6DQogZXJyX3NlY3VyaXR5Og0KIAlmcHV0KGZpbGUpOw0KIGVycl9m
Z2V0Og0KQEAgLTI1MjgsNyArMjU1MSw3IEBAIHN0YXRpYyBpbnQgYmluZGVyX3RyYW5zbGF0ZV9m
ZF9hcnJheShzdHJ1Y3QgbGlzdF9oZWFkICpwZl9oZWFkLA0KIA0KIAkJcmV0ID0gY29weV9mcm9t
X3VzZXIoJmZkLCBzZW5kZXJfdWZkYV9iYXNlICsgc2VuZGVyX3VvZmZzZXQsIHNpemVvZihmZCkp
Ow0KIAkJaWYgKCFyZXQpDQotCQkJcmV0ID0gYmluZGVyX3RyYW5zbGF0ZV9mZChmZCwgb2Zmc2V0
LCB0LCB0aHJlYWQsDQorCQkJcmV0ID0gYmluZGVyX3RyYW5zbGF0ZV9mZChmZCwgb2Zmc2V0LCBm
ZGEtPmZsYWdzLCB0LCB0aHJlYWQsDQogCQkJCQkJICBpbl9yZXBseV90byk7DQogCQlpZiAocmV0
KQ0KIAkJCXJldHVybiByZXQgPiAwID8gLUVJTlZBTCA6IHJldDsNCkBAIC0zMTc5LDggKzMyMDIs
OCBAQCBzdGF0aWMgdm9pZCBiaW5kZXJfdHJhbnNhY3Rpb24oc3RydWN0IGJpbmRlcl9wcm9jICpw
cm9jLA0KIAkJCXN0cnVjdCBiaW5kZXJfZmRfb2JqZWN0ICpmcCA9IHRvX2JpbmRlcl9mZF9vYmpl
Y3QoaGRyKTsNCiAJCQliaW5kZXJfc2l6ZV90IGZkX29mZnNldCA9IG9iamVjdF9vZmZzZXQgKw0K
IAkJCQkodWludHB0cl90KSZmcC0+ZmQgLSAodWludHB0cl90KWZwOw0KLQkJCWludCByZXQgPSBi
aW5kZXJfdHJhbnNsYXRlX2ZkKGZwLT5mZCwgZmRfb2Zmc2V0LCB0LA0KLQkJCQkJCSAgICAgIHRo
cmVhZCwgaW5fcmVwbHlfdG8pOw0KKwkJCWludCByZXQgPSBiaW5kZXJfdHJhbnNsYXRlX2ZkKGZw
LT5mZCwgZmRfb2Zmc2V0LCBmcC0+ZmxhZ3MsDQorCQkJCQkJICAgICAgdCwgdGhyZWFkLCBpbl9y
ZXBseV90byk7DQogDQogCQkJZnAtPnBhZF9iaW5kZXIgPSAwOw0KIAkJCWlmIChyZXQgPCAwIHx8
DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYyBiL2RyaXZlcnMvZG1hLWJ1
Zi9kbWEtYnVmLmMNCmluZGV4IGYzZmI4NDQ5MjVlMi4uMzZlZDZjZDRkZGNjIDEwMDY0NA0KLS0t
IGEvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYw0KKysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1i
dWYuYw0KQEAgLTMxLDcgKzMxLDYgQEANCiANCiAjaW5jbHVkZSAiZG1hLWJ1Zi1zeXNmcy1zdGF0
cy5oIg0KIA0KLXN0YXRpYyBpbmxpbmUgaW50IGlzX2RtYV9idWZfZmlsZShzdHJ1Y3QgZmlsZSAq
KTsNCiANCiBzdHJ1Y3QgZG1hX2J1Zl9saXN0IHsNCiAJc3RydWN0IGxpc3RfaGVhZCBoZWFkOw0K
QEAgLTQwMCwxMCArMzk5LDExIEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25z
IGRtYV9idWZfZm9wcyA9IHsNCiAvKg0KICAqIGlzX2RtYV9idWZfZmlsZSAtIENoZWNrIGlmIHN0
cnVjdCBmaWxlKiBpcyBhc3NvY2lhdGVkIHdpdGggZG1hX2J1Zg0KICAqLw0KLXN0YXRpYyBpbmxp
bmUgaW50IGlzX2RtYV9idWZfZmlsZShzdHJ1Y3QgZmlsZSAqZmlsZSkNCitpbnQgaXNfZG1hX2J1
Zl9maWxlKHN0cnVjdCBmaWxlICpmaWxlKQ0KIHsNCiAJcmV0dXJuIGZpbGUtPmZfb3AgPT0gJmRt
YV9idWZfZm9wczsNCiB9DQorRVhQT1JUX1NZTUJPTF9OU19HUEwoaXNfZG1hX2J1Zl9maWxlLCBE
TUFfQlVGKTsNCiANCiBzdGF0aWMgc3RydWN0IGZpbGUgKmRtYV9idWZfZ2V0ZmlsZShzdHJ1Y3Qg
ZG1hX2J1ZiAqZG1hYnVmLCBpbnQgZmxhZ3MpDQogew0KZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGlu
dXgvZG1hLWJ1Zi5oIGIvaW5jbHVkZS9saW51eC9kbWEtYnVmLmgNCmluZGV4IDQzOGFkODU3N2I3
Ni4uMmI5ODEyNzU4ZmVlIDEwMDY0NA0KLS0tIGEvaW5jbHVkZS9saW51eC9kbWEtYnVmLmgNCisr
KyBiL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oDQpAQCAtNjE0LDcgKzYxNCw3IEBAIGRtYV9idWZf
YXR0YWNobWVudF9pc19keW5hbWljKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCkN
CiB7DQogCXJldHVybiAhIWF0dGFjaC0+aW1wb3J0ZXJfb3BzOw0KIH0NCi0NCitpbnQgaXNfZG1h
X2J1Zl9maWxlKHN0cnVjdCBmaWxlICpmaWxlKTsNCiBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50
ICpkbWFfYnVmX2F0dGFjaChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLA0KIAkJCQkJICBzdHJ1Y3Qg
ZGV2aWNlICpkZXYpOw0KIHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKg0KZGlmZiAtLWdpdCBh
L2luY2x1ZGUvdWFwaS9saW51eC9hbmRyb2lkL2JpbmRlci5oIGIvaW5jbHVkZS91YXBpL2xpbnV4
L2FuZHJvaWQvYmluZGVyLmgNCmluZGV4IDExMTU3ZmFlOGE4ZS4uZDE3ZTc5MWIzOGFiIDEwMDY0
NA0KLS0tIGEvaW5jbHVkZS91YXBpL2xpbnV4L2FuZHJvaWQvYmluZGVyLmgNCisrKyBiL2luY2x1
ZGUvdWFwaS9saW51eC9hbmRyb2lkL2JpbmRlci5oDQpAQCAtOTEsMTQgKzkxLDE0IEBAIHN0cnVj
dCBmbGF0X2JpbmRlcl9vYmplY3Qgew0KIC8qKg0KICAqIHN0cnVjdCBiaW5kZXJfZmRfb2JqZWN0
IC0gZGVzY3JpYmVzIGEgZmlsZWRlc2NyaXB0b3IgdG8gYmUgZml4ZWQgdXAuDQogICogQGhkcjoJ
Y29tbW9uIGhlYWRlciBzdHJ1Y3R1cmUNCi0gKiBAcGFkX2ZsYWdzOglwYWRkaW5nIHRvIHJlbWFp
biBjb21wYXRpYmxlIHdpdGggb2xkIHVzZXJzcGFjZSBjb2RlDQorICogQGZsYWdzOglPbmUgb3Ig
bW9yZSBCSU5ERVJfRkRfRkxBR18qIGZsYWdzDQogICogQHBhZF9iaW5kZXI6CXBhZGRpbmcgdG8g
cmVtYWluIGNvbXBhdGlibGUgd2l0aCBvbGQgdXNlcnNwYWNlIGNvZGUNCiAgKiBAZmQ6CQlmaWxl
IGRlc2NyaXB0b3INCiAgKiBAY29va2llOglvcGFxdWUgZGF0YSwgdXNlZCBieSB1c2VyLXNwYWNl
DQogICovDQogc3RydWN0IGJpbmRlcl9mZF9vYmplY3Qgew0KIAlzdHJ1Y3QgYmluZGVyX29iamVj
dF9oZWFkZXIJaGRyOw0KLQlfX3UzMgkJCQlwYWRfZmxhZ3M7DQorCV9fdTMyCQkJCWZsYWdzOw0K
IAl1bmlvbiB7DQogCQliaW5kZXJfdWludHB0cl90CXBhZF9iaW5kZXI7DQogCQlfX3UzMgkJCWZk
Ow0KQEAgLTEwNyw2ICsxMDcsMTcgQEAgc3RydWN0IGJpbmRlcl9mZF9vYmplY3Qgew0KIAliaW5k
ZXJfdWludHB0cl90CQljb29raWU7DQogfTsNCiANCitlbnVtIHsNCisJLyoqDQorCSAqIEBCSU5E
RVJfRkRfRkxBR19YRkVSX0NIQVJHRQ0KKwkgKg0KKwkgKiBXaGVuIHNldCwgdGhlIHNlbmRlciBv
ZiBhIGJpbmRlcl9mZF9vYmplY3Qgd2lzaGVzIHRvIHJlbGlucXVpc2ggb3duZXJzaGlwIG9mIHRo
ZSBmZCBmb3INCisJICogbWVtb3J5IGFjY291bnRpbmcgcHVycG9zZXMuIElmIHRoZSBmZCBpcyBm
b3IgYSBETUEtQlVGLCB0aGUgYnVmZmVyIGlzIHVuY2hhcmdlZCBmcm9tIHRoZQ0KKwkgKiBzZW5k
ZXIncyBjZ3JvdXAgYW5kIGNoYXJnZWQgdG8gdGhlIHJlY2VpdmluZyBwcm9jZXNzJ3MgY2dyb3Vw
IGluc3RlYWQuDQorCSAqLw0KKwlCSU5ERVJfRkRfRkxBR19YRkVSX0NIQVJHRSA9IDB4MjAwMCwN
Cit9Ow0KKw0KIC8qIHN0cnVjdCBiaW5kZXJfYnVmZmVyX29iamVjdCAtIG9iamVjdCBkZXNjcmli
aW5nIGEgdXNlcnNwYWNlIGJ1ZmZlcg0KICAqIEBoZHI6CQljb21tb24gaGVhZGVyIHN0cnVjdHVy
ZQ0KICAqIEBmbGFnczoJCW9uZSBvciBtb3JlIEJJTkRFUl9CVUZGRVJfKiBmbGFncw0KQEAgLTE0
MSw3ICsxNTIsNyBAQCBlbnVtIHsNCiANCiAvKiBzdHJ1Y3QgYmluZGVyX2ZkX2FycmF5X29iamVj
dCAtIG9iamVjdCBkZXNjcmliaW5nIGFuIGFycmF5IG9mIGZkcyBpbiBhIGJ1ZmZlcg0KICAqIEBo
ZHI6CQljb21tb24gaGVhZGVyIHN0cnVjdHVyZQ0KLSAqIEBwYWQ6CQlwYWRkaW5nIHRvIGVuc3Vy
ZSBjb3JyZWN0IGFsaWdubWVudA0KKyAqIEBmbGFnczoJCU9uZSBvciBtb3JlIEJJTkRFUl9GREFf
RkxBR18qIGZsYWdzDQogICogQG51bV9mZHM6CQludW1iZXIgb2YgZmlsZSBkZXNjcmlwdG9ycyBp
biB0aGUgYnVmZmVyDQogICogQHBhcmVudDoJCWluZGV4IGluIG9mZnNldCBhcnJheSB0byBidWZm
ZXIgaG9sZGluZyB0aGUgZmQgYXJyYXkNCiAgKiBAcGFyZW50X29mZnNldDoJc3RhcnQgb2Zmc2V0
IG9mIGZkIGFycmF5IGluIHRoZSBidWZmZXINCkBAIC0xNjIsMTIgKzE3MywxNiBAQCBlbnVtIHsN
CiAgKi8NCiBzdHJ1Y3QgYmluZGVyX2ZkX2FycmF5X29iamVjdCB7DQogCXN0cnVjdCBiaW5kZXJf
b2JqZWN0X2hlYWRlcgloZHI7DQotCV9fdTMyCQkJCXBhZDsNCisJX191MzIJCQkJZmxhZ3M7DQog
CWJpbmRlcl9zaXplX3QJCQludW1fZmRzOw0KIAliaW5kZXJfc2l6ZV90CQkJcGFyZW50Ow0KIAli
aW5kZXJfc2l6ZV90CQkJcGFyZW50X29mZnNldDsNCiB9Ow0KIA0KK2VudW0gew0KKwlCSU5ERVJf
RkRBX0ZMQUdfWEZFUl9DSEFSR0UgPSBCSU5ERVJfRkRfRkxBR19YRkVSX0NIQVJHRSwNCit9Ow0K
Kw0KIC8qDQogICogT24gNjQtYml0IHBsYXRmb3JtcyB3aGVyZSB1c2VyIGNvZGUgbWF5IHJ1biBp
biAzMi1iaXRzIHRoZSBkcml2ZXIgbXVzdA0KICAqIHRyYW5zbGF0ZSB0aGUgYnVmZmVyIChhbmQg
bG9jYWwgYmluZGVyKSBhZGRyZXNzZXMgYXBwcm9wcmlhdGVseS4NCi0tIA0KMi4zNi4wLjQ2NC5n
YjljOGI0NmU5NC1nb29nDQoNCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fCkxpbmFyby1tbS1zaWcgbWFpbGluZyBsaXN0IC0tIGxpbmFyby1tbS1zaWdAbGlz
dHMubGluYXJvLm9yZwpUbyB1bnN1YnNjcmliZSBzZW5kIGFuIGVtYWlsIHRvIGxpbmFyby1tbS1z
aWctbGVhdmVAbGlzdHMubGluYXJvLm9yZwo=
