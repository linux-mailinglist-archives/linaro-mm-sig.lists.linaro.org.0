Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id C33B041779B
	for <lists+linaro-mm-sig@lfdr.de>; Fri, 24 Sep 2021 17:31:34 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 189FC61C4A
	for <lists+linaro-mm-sig@lfdr.de>; Fri, 24 Sep 2021 15:31:31 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 5124862630; Fri, 24 Sep 2021 15:31:25 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id B3EAA61B00;
	Fri, 24 Sep 2021 15:31:21 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 9C9F8603BB
 for <linaro-mm-sig@lists.linaro.org>; Fri, 24 Sep 2021 15:31:19 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 9452F61A4B; Fri, 24 Sep 2021 15:31:19 +0000 (UTC)
Received: from mail-wr1-f43.google.com (mail-wr1-f43.google.com
 [209.85.221.43])
 by lists.linaro.org (Postfix) with ESMTPS id 7BB3B603BB
 for <linaro-mm-sig@lists.linaro.org>; Fri, 24 Sep 2021 15:31:17 +0000 (UTC)
Received: by mail-wr1-f43.google.com with SMTP id u18so28722795wrg.5
 for <linaro-mm-sig@lists.linaro.org>; Fri, 24 Sep 2021 08:31:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=RovzGMzaSWHakypBGZN+u1EWd1sJLcm0NSLX1BEno7c=;
 b=p7DMYUsrQJJ4SN/3hwH0DzYdCYyYV69CbmZdqTnBdBAa06bA+vsPE46VFuU24lujhY
 iICFQJ23Tmj2r4HTkdhXgFUPZzHuPG7cJGW86pQe1O9kyxO6GcCgEd0dQlx2LaYqUv4l
 oCrWlKPRiXtTRlSUEpFCs7IUzaw9fCDvb2moxgq1RSqx2O7RNm6Ao18fHR+fzsyJEq84
 YNmORb2A7j9fQGG4pKVmNisNLFe1Oj9pj34j1ourxzliwxPl/jztzsVA+Ft+6E3m337E
 qOA/A98NXpZNede9vjuwJ6VEpQHV355ElMAUHXNzVSssAYY2EertkG6J6VCEQCfnoU0E
 w7Ig==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=RovzGMzaSWHakypBGZN+u1EWd1sJLcm0NSLX1BEno7c=;
 b=FdOV97LKCuN0MoaMRtKU2ku/mLTcngx6M7nYZRE+nUnfr7IaJqE+NDRoEMQuiG7p19
 YgRdQUYH5vzKlFZ9nY9j3uVgLVcwkWD0+qNWmYY2TbalD1UXPQ+x1GT0tWf1x2DAs3pJ
 TBoee9n6892Nji6NLJbDiYWDlFqRI14vzgfaiSXOUEEC29VcGASM+TzOnzNyrzIAYh6t
 t53kQQVT6FhY+ZZvyQ39obtAhdPvs6TDkrhAWQFH8BoCKJQFHZh55h7yOzAdB158HRcT
 jvRGS1maxVZwswFavqjT2JiduFVpPWjB8FsuluXmFR9t4DNQzReBfKtP8xDnBHs0k7dy
 Vllg==
X-Gm-Message-State: AOAM5314NwZxmGHNYPpLqNuK8qjWEmuvYiuxxxbjk5yvX4vz9KnQS8Ue
 y1joARuncNSQmOC1pg/0TpAA0+vUXO8=
X-Google-Smtp-Source: ABdhPJwppQmf+3VAG5tgB7vYH8MaPbrtS4Nh0Pu9ikOK5z3zat2U0nfTe3efiAOhymy9xQXPlPZrmg==
X-Received: by 2002:a7b:c0c5:: with SMTP id s5mr2865131wmh.126.1632497476421; 
 Fri, 24 Sep 2021 08:31:16 -0700 (PDT)
Received: from abel.fritz.box (p5b0ea1b5.dip0.t-ipconnect.de. [91.14.161.181])
 by smtp.gmail.com with ESMTPSA id
 u25sm9902248wmm.5.2021.09.24.08.31.14
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 24 Sep 2021 08:31:15 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: linaro-mm-sig@lists.linaro.org, dri-devel@lists.freedesktop.org,
 linux-media@vger.kernel.org, intel-gfx@lists.freedesktop.org
Date: Fri, 24 Sep 2021 17:30:47 +0200
Message-Id: <20210924153113.2159-1-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: [Linaro-mm-sig] [PATCH 01/27] dma-buf: add
 dma_resv_for_each_fence_unlocked v6
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: tvrtko.ursulin@linux.intel.com, daniel@ffwll.ch
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

QWJzdHJhY3QgdGhlIGNvbXBsZXhpdHkgb2YgaXRlcmF0aW5nIG92ZXIgYWxsIHRoZSBmZW5jZXMK
aW4gYSBkbWFfcmVzdiBvYmplY3QuCgpUaGUgbmV3IGxvb3AgaGFuZGxlcyB0aGUgd2hvbGUgUkNV
IGFuZCByZXRyeSBkYW5jZSBhbmQKcmV0dXJucyBvbmx5IGZlbmNlcyB3aGVyZSB3ZSBjYW4gYmUg
c3VyZSB3ZSBncmFiYmVkIHRoZQpyaWdodCBvbmUuCgp2MjogZml4IGFjY2Vzc2luZyB0aGUgc2hh
cmVkIGZlbmNlcyB3aGlsZSB0aGV5IG1pZ2h0IGJlIGZyZWVkLAogICAgaW1wcm92ZSBrZXJuZWxk
b2MsIHJlbmFtZSBfY3Vyc29yIHRvIF9pdGVyLCBhZGQKICAgIGRtYV9yZXN2X2l0ZXJfaXNfZXhj
bHVzaXZlLCBhZGQgZG1hX3Jlc3ZfaXRlcl9iZWdpbi9lbmQKCnYzOiByZXN0cnVjdG9yIHRoZSBj
b2RlLCBtb3ZlIHJjdV9yZWFkX2xvY2soKS91bmxvY2soKSBpbnRvIHRoZQogICAgaXRlcmF0b3Is
IGFkZCBkbWFfcmVzdl9pdGVyX2lzX3Jlc3RhcnRlZCgpCgp2NDogZml4IE5VTEwgZGVyZWYgd2hl
biBubyBleHBsaWNpdCBmZW5jZSBleGlzdHMsIGRyb3Agc3VwZXJmbG91cwogICAgcmN1X3JlYWRf
bG9jaygpL3VubG9jaygpIGNhbGxzLgoKdjU6IGZpeCB0eXBvcyBpbiB0aGUgZG9jdW1lbnRhdGlv
bgoKdjY6IGZpeCBjb2RpbmcgZXJyb3Igd2hlbiBleGNsIGZlbmNlIGlzIE5VTEwKClNpZ25lZC1v
ZmYtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4KLS0tCiBk
cml2ZXJzL2RtYS1idWYvZG1hLXJlc3YuYyB8IDk4ICsrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrCiBpbmNsdWRlL2xpbnV4L2RtYS1yZXN2LmggICB8IDk1ICsrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKwogMiBmaWxlcyBjaGFuZ2VkLCAxOTMgaW5zZXJ0aW9u
cygrKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtcmVzdi5jIGIvZHJpdmVycy9k
bWEtYnVmL2RtYS1yZXN2LmMKaW5kZXggODRmYmU2MDYyOWUzLi45N2FmMzk3MzA0ZjMgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtcmVzdi5jCisrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9k
bWEtcmVzdi5jCkBAIC0zMjMsNiArMzIzLDEwNCBAQCB2b2lkIGRtYV9yZXN2X2FkZF9leGNsX2Zl
bmNlKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkKIH0KIEVY
UE9SVF9TWU1CT0woZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2UpOwogCisvKioKKyAqIGRtYV9yZXN2
X2l0ZXJfcmVzdGFydF91bmxvY2tlZCAtIHJlc3RhcnQgdGhlIHVubG9ja2VkIGl0ZXJhdG9yCisg
KiBAY3Vyc29yOiBUaGUgZG1hX3Jlc3ZfaXRlciBvYmplY3QgdG8gcmVzdGFydAorICoKKyAqIFJl
c3RhcnQgdGhlIHVubG9ja2VkIGl0ZXJhdGlvbiBieSBpbml0aWFsaXppbmcgdGhlIGN1cnNvciBv
YmplY3QuCisgKi8KK3N0YXRpYyB2b2lkIGRtYV9yZXN2X2l0ZXJfcmVzdGFydF91bmxvY2tlZChz
dHJ1Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vyc29yKQoreworCWN1cnNvci0+c2VxID0gcmVhZF9zZXFj
b3VudF9iZWdpbigmY3Vyc29yLT5vYmotPnNlcSk7CisJY3Vyc29yLT5pbmRleCA9IC0xOworCWlm
IChjdXJzb3ItPmFsbF9mZW5jZXMpCisJCWN1cnNvci0+ZmVuY2VzID0gZG1hX3Jlc3Zfc2hhcmVk
X2xpc3QoY3Vyc29yLT5vYmopOworCWVsc2UKKwkJY3Vyc29yLT5mZW5jZXMgPSBOVUxMOworCWN1
cnNvci0+aXNfcmVzdGFydGVkID0gdHJ1ZTsKK30KKworLyoqCisgKiBkbWFfcmVzdl9pdGVyX3dh
bGtfdW5sb2NrZWQgLSB3YWxrIG92ZXIgZmVuY2VzIGluIGEgZG1hX3Jlc3Ygb2JqCisgKiBAY3Vy
c29yOiBjdXJzb3IgdG8gcmVjb3JkIHRoZSBjdXJyZW50IHBvc2l0aW9uCisgKgorICogUmV0dXJu
IGFsbCB0aGUgZmVuY2VzIGluIHRoZSBkbWFfcmVzdiBvYmplY3Qgd2hpY2ggYXJlIG5vdCB5ZXQg
c2lnbmFsZWQuCisgKiBUaGUgcmV0dXJuZWQgZmVuY2UgaGFzIGFuIGV4dHJhIGxvY2FsIHJlZmVy
ZW5jZSBzbyB3aWxsIHN0YXkgYWxpdmUuCisgKiBJZiBhIGNvbmN1cnJlbnQgbW9kaWZ5IGlzIGRl
dGVjdGVkIHRoZSB3aG9sZSBpdGVyYXRpb24gaXMgc3RhcnRlZCBvdmVyIGFnYWluLgorICovCitz
dGF0aWMgdm9pZCBkbWFfcmVzdl9pdGVyX3dhbGtfdW5sb2NrZWQoc3RydWN0IGRtYV9yZXN2X2l0
ZXIgKmN1cnNvcikKK3sKKwlzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiA9IGN1cnNvci0+b2JqOworCisJ
ZG8geworCQkvKiBEcm9wIHRoZSByZWZlcmVuY2UgZnJvbSB0aGUgcHJldmlvdXMgcm91bmQgKi8K
KwkJZG1hX2ZlbmNlX3B1dChjdXJzb3ItPmZlbmNlKTsKKworCQlpZiAoY3Vyc29yLT5pbmRleCA9
PSAtMSkgeworCQkJY3Vyc29yLT5mZW5jZSA9IGRtYV9yZXN2X2V4Y2xfZmVuY2Uob2JqKTsKKwkJ
CWN1cnNvci0+aW5kZXgrKzsKKwkJCWlmICghY3Vyc29yLT5mZW5jZSkKKwkJCQljb250aW51ZTsK
KworCQl9IGVsc2UgaWYgKCFjdXJzb3ItPmZlbmNlcyB8fAorCQkJICAgY3Vyc29yLT5pbmRleCA+
PSBjdXJzb3ItPmZlbmNlcy0+c2hhcmVkX2NvdW50KSB7CisJCQljdXJzb3ItPmZlbmNlID0gTlVM
TDsKKwkJCWJyZWFrOworCisJCX0gZWxzZSB7CisJCQlzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqZmVu
Y2VzID0gY3Vyc29yLT5mZW5jZXM7CisJCQl1bnNpZ25lZCBpbnQgaWR4ID0gY3Vyc29yLT5pbmRl
eCsrOworCisJCQljdXJzb3ItPmZlbmNlID0gcmN1X2RlcmVmZXJlbmNlKGZlbmNlcy0+c2hhcmVk
W2lkeF0pOworCQl9CisJCWN1cnNvci0+ZmVuY2UgPSBkbWFfZmVuY2VfZ2V0X3JjdShjdXJzb3It
PmZlbmNlKTsKKwl9IHdoaWxlIChjdXJzb3ItPmZlbmNlICYmIGRtYV9mZW5jZV9pc19zaWduYWxl
ZChjdXJzb3ItPmZlbmNlKSk7Cit9CisKKy8qKgorICogZG1hX3Jlc3ZfaXRlcl9maXJzdF91bmxv
Y2tlZCAtIGZpcnN0IGZlbmNlIGluIGFuIHVubG9ja2VkIGRtYV9yZXN2IG9iai4KKyAqIEBjdXJz
b3I6IHRoZSBjdXJzb3Igd2l0aCB0aGUgY3VycmVudCBwb3NpdGlvbgorICoKKyAqIFJldHVybnMg
dGhlIGZpcnN0IGZlbmNlIGZyb20gYW4gdW5sb2NrZWQgZG1hX3Jlc3Ygb2JqLgorICovCitzdHJ1
Y3QgZG1hX2ZlbmNlICpkbWFfcmVzdl9pdGVyX2ZpcnN0X3VubG9ja2VkKHN0cnVjdCBkbWFfcmVz
dl9pdGVyICpjdXJzb3IpCit7CisJcmN1X3JlYWRfbG9jaygpOworCWRvIHsKKwkJZG1hX3Jlc3Zf
aXRlcl9yZXN0YXJ0X3VubG9ja2VkKGN1cnNvcik7CisJCWRtYV9yZXN2X2l0ZXJfd2Fsa191bmxv
Y2tlZChjdXJzb3IpOworCX0gd2hpbGUgKHJlYWRfc2VxY291bnRfcmV0cnkoJmN1cnNvci0+b2Jq
LT5zZXEsIGN1cnNvci0+c2VxKSk7CisJcmN1X3JlYWRfdW5sb2NrKCk7CisKKwlyZXR1cm4gY3Vy
c29yLT5mZW5jZTsKK30KK0VYUE9SVF9TWU1CT0woZG1hX3Jlc3ZfaXRlcl9maXJzdF91bmxvY2tl
ZCk7CisKKy8qKgorICogZG1hX3Jlc3ZfaXRlcl9uZXh0X3VubG9ja2VkIC0gbmV4dCBmZW5jZSBp
biBhbiB1bmxvY2tlZCBkbWFfcmVzdiBvYmouCisgKiBAY3Vyc29yOiB0aGUgY3Vyc29yIHdpdGgg
dGhlIGN1cnJlbnQgcG9zaXRpb24KKyAqCisgKiBSZXR1cm5zIHRoZSBuZXh0IGZlbmNlIGZyb20g
YW4gdW5sb2NrZWQgZG1hX3Jlc3Ygb2JqLgorICovCitzdHJ1Y3QgZG1hX2ZlbmNlICpkbWFfcmVz
dl9pdGVyX25leHRfdW5sb2NrZWQoc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcikKK3sKKwli
b29sIHJlc3RhcnQ7CisKKwlyY3VfcmVhZF9sb2NrKCk7CisJY3Vyc29yLT5pc19yZXN0YXJ0ZWQg
PSBmYWxzZTsKKwlyZXN0YXJ0ID0gcmVhZF9zZXFjb3VudF9yZXRyeSgmY3Vyc29yLT5vYmotPnNl
cSwgY3Vyc29yLT5zZXEpOworCWRvIHsKKwkJaWYgKHJlc3RhcnQpCisJCQlkbWFfcmVzdl9pdGVy
X3Jlc3RhcnRfdW5sb2NrZWQoY3Vyc29yKTsKKwkJZG1hX3Jlc3ZfaXRlcl93YWxrX3VubG9ja2Vk
KGN1cnNvcik7CisJCXJlc3RhcnQgPSB0cnVlOworCX0gd2hpbGUgKHJlYWRfc2VxY291bnRfcmV0
cnkoJmN1cnNvci0+b2JqLT5zZXEsIGN1cnNvci0+c2VxKSk7CisJcmN1X3JlYWRfdW5sb2NrKCk7
CisKKwlyZXR1cm4gY3Vyc29yLT5mZW5jZTsKK30KK0VYUE9SVF9TWU1CT0woZG1hX3Jlc3ZfaXRl
cl9uZXh0X3VubG9ja2VkKTsKKwogLyoqCiAgKiBkbWFfcmVzdl9jb3B5X2ZlbmNlcyAtIENvcHkg
YWxsIGZlbmNlcyBmcm9tIHNyYyB0byBkc3QuCiAgKiBAZHN0OiB0aGUgZGVzdGluYXRpb24gcmVz
ZXJ2YXRpb24gb2JqZWN0CmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1yZXN2LmggYi9p
bmNsdWRlL2xpbnV4L2RtYS1yZXN2LmgKaW5kZXggOTEwMGRkM2RjMjFmLi41ZDdkMjhjYjkwMDgg
MTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvZG1hLXJlc3YuaAorKysgYi9pbmNsdWRlL2xpbnV4
L2RtYS1yZXN2LmgKQEAgLTE0OSw2ICsxNDksMTAxIEBAIHN0cnVjdCBkbWFfcmVzdiB7CiAJc3Ry
dWN0IGRtYV9yZXN2X2xpc3QgX19yY3UgKmZlbmNlOwogfTsKIAorLyoqCisgKiBzdHJ1Y3QgZG1h
X3Jlc3ZfaXRlciAtIGN1cnJlbnQgcG9zaXRpb24gaW50byB0aGUgZG1hX3Jlc3YgZmVuY2VzCisg
KgorICogRG9uJ3QgdG91Y2ggdGhpcyBkaXJlY3RseSBpbiB0aGUgZHJpdmVyLCB1c2UgdGhlIGFj
Y2Vzc29yIGZ1bmN0aW9uIGluc3RlYWQuCisgKi8KK3N0cnVjdCBkbWFfcmVzdl9pdGVyIHsKKwkv
KiogQG9iajogVGhlIGRtYV9yZXN2IG9iamVjdCB3ZSBpdGVyYXRlIG92ZXIgKi8KKwlzdHJ1Y3Qg
ZG1hX3Jlc3YgKm9iajsKKworCS8qKiBAYWxsX2ZlbmNlczogSWYgYWxsIGZlbmNlcyBzaG91bGQg
YmUgcmV0dXJuZWQgKi8KKwlib29sIGFsbF9mZW5jZXM7CisKKwkvKiogQGZlbmNlOiB0aGUgY3Vy
cmVudGx5IGhhbmRsZWQgZmVuY2UgKi8KKwlzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZTsKKworCS8q
KiBAc2VxOiBzZXF1ZW5jZSBudW1iZXIgdG8gY2hlY2sgZm9yIG1vZGlmaWNhdGlvbnMgKi8KKwl1
bnNpZ25lZCBpbnQgc2VxOworCisJLyoqIEBpbmRleDogaW5kZXggaW50byB0aGUgc2hhcmVkIGZl
bmNlcyAqLworCXVuc2lnbmVkIGludCBpbmRleDsKKworCS8qKiBAZmVuY2VzOiB0aGUgc2hhcmVk
IGZlbmNlcyAqLworCXN0cnVjdCBkbWFfcmVzdl9saXN0ICpmZW5jZXM7CisKKwkvKiogQGlzX3Jl
c3RhcnRlZDogdHJ1ZSBpZiB0aGlzIGlzIHRoZSBmaXJzdCByZXR1cm5lZCBmZW5jZSAqLworCWJv
b2wgaXNfcmVzdGFydGVkOworfTsKKworc3RydWN0IGRtYV9mZW5jZSAqZG1hX3Jlc3ZfaXRlcl9m
aXJzdF91bmxvY2tlZChzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vyc29yKTsKK3N0cnVjdCBkbWFf
ZmVuY2UgKmRtYV9yZXN2X2l0ZXJfbmV4dF91bmxvY2tlZChzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAq
Y3Vyc29yKTsKKworLyoqCisgKiBkbWFfcmVzdl9pdGVyX2JlZ2luIC0gaW5pdGlhbGl6ZSBhIGRt
YV9yZXN2X2l0ZXIgb2JqZWN0CisgKiBAY3Vyc29yOiBUaGUgZG1hX3Jlc3ZfaXRlciBvYmplY3Qg
dG8gaW5pdGlhbGl6ZQorICogQG9iajogVGhlIGRtYV9yZXN2IG9iamVjdCB3aGljaCB3ZSB3YW50
IHRvIGl0ZXJhdGUgb3ZlcgorICogQGFsbF9mZW5jZXM6IElmIGFsbCBmZW5jZXMgc2hvdWxkIGJl
IHJldHVybmVkIG9yIGp1c3QgdGhlIGV4Y2x1c2l2ZSBvbmUKKyAqLworc3RhdGljIGlubGluZSB2
b2lkIGRtYV9yZXN2X2l0ZXJfYmVnaW4oc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvciwKKwkJ
CQkgICAgICAgc3RydWN0IGRtYV9yZXN2ICpvYmosCisJCQkJICAgICAgIGJvb2wgYWxsX2ZlbmNl
cykKK3sKKwljdXJzb3ItPm9iaiA9IG9iajsKKwljdXJzb3ItPmFsbF9mZW5jZXMgPSBhbGxfZmVu
Y2VzOworCWN1cnNvci0+ZmVuY2UgPSBOVUxMOworfQorCisvKioKKyAqIGRtYV9yZXN2X2l0ZXJf
ZW5kIC0gY2xlYW51cCBhIGRtYV9yZXN2X2l0ZXIgb2JqZWN0CisgKiBAY3Vyc29yOiB0aGUgZG1h
X3Jlc3ZfaXRlciBvYmplY3Qgd2hpY2ggc2hvdWxkIGJlIGNsZWFuZWQgdXAKKyAqCisgKiBNYWtl
IHN1cmUgdGhhdCB0aGUgcmVmZXJlbmNlIHRvIHRoZSBmZW5jZSBpbiB0aGUgY3Vyc29yIGlzIHBy
b3Blcmx5CisgKiBkcm9wcGVkLgorICovCitzdGF0aWMgaW5saW5lIHZvaWQgZG1hX3Jlc3ZfaXRl
cl9lbmQoc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcikKK3sKKwlkbWFfZmVuY2VfcHV0KGN1
cnNvci0+ZmVuY2UpOworfQorCisvKioKKyAqIGRtYV9yZXN2X2l0ZXJfaXNfZXhjbHVzaXZlIC0g
dGVzdCBpZiB0aGUgY3VycmVudCBmZW5jZSBpcyB0aGUgZXhjbHVzaXZlIG9uZQorICogQGN1cnNv
cjogdGhlIGN1cnNvciBvZiB0aGUgY3VycmVudCBwb3NpdGlvbgorICoKKyAqIFJldHVybnMgdHJ1
ZSBpZiB0aGUgY3VycmVudGx5IHJldHVybmVkIGZlbmNlIGlzIHRoZSBleGNsdXNpdmUgb25lLgor
ICovCitzdGF0aWMgaW5saW5lIGJvb2wgZG1hX3Jlc3ZfaXRlcl9pc19leGNsdXNpdmUoc3RydWN0
IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcikKK3sKKwlyZXR1cm4gY3Vyc29yLT5pbmRleCA9PSAtMTsK
K30KKworLyoqCisgKiBkbWFfcmVzdl9pdGVyX2lzX3Jlc3RhcnRlZCAtIHRlc3QgaWYgdGhpcyBp
cyB0aGUgZmlyc3QgZmVuY2UgYWZ0ZXIgYSByZXN0YXJ0CisgKiBAY3Vyc29yOiB0aGUgY3Vyc29y
IHdpdGggdGhlIGN1cnJlbnQgcG9zaXRpb24KKyAqCisgKiBSZXR1cm4gdHJ1ZSBpZiB0aGlzIGlz
IHRoZSBmaXJzdCBmZW5jZSBpbiBhbiBpdGVyYXRpb24gYWZ0ZXIgYSByZXN0YXJ0LgorICovCitz
dGF0aWMgaW5saW5lIGJvb2wgZG1hX3Jlc3ZfaXRlcl9pc19yZXN0YXJ0ZWQoc3RydWN0IGRtYV9y
ZXN2X2l0ZXIgKmN1cnNvcikKK3sKKwlyZXR1cm4gY3Vyc29yLT5pc19yZXN0YXJ0ZWQ7Cit9CisK
Ky8qKgorICogZG1hX3Jlc3ZfZm9yX2VhY2hfZmVuY2VfdW5sb2NrZWQgLSB1bmxvY2tlZCBmZW5j
ZSBpdGVyYXRvcgorICogQGN1cnNvcjogYSBzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBwb2ludGVyCisg
KiBAZmVuY2U6IHRoZSBjdXJyZW50IGZlbmNlCisgKgorICogSXRlcmF0ZSBvdmVyIHRoZSBmZW5j
ZXMgaW4gYSBzdHJ1Y3QgZG1hX3Jlc3Ygb2JqZWN0IHdpdGhvdXQgaG9sZGluZyB0aGUKKyAqICZk
bWFfcmVzdi5sb2NrIGFuZCB1c2luZyBSQ1UgaW5zdGVhZC4gVGhlIGN1cnNvciBuZWVkcyB0byBi
ZSBpbml0aWFsaXplZAorICogd2l0aCBkbWFfcmVzdl9pdGVyX2JlZ2luKCkgYW5kIGNsZWFuZWQg
dXAgd2l0aCBkbWFfcmVzdl9pdGVyX2VuZCgpLiBJbnNpZGUKKyAqIHRoZSBpdGVyYXRvciBhIHJl
ZmVyZW5jZSB0byB0aGUgZG1hX2ZlbmNlIGlzIGhlbGQgYW5kIHRoZSBSQ1UgbG9jayBkcm9wcGVk
LgorICogV2hlbiB0aGUgZG1hX3Jlc3YgaXMgbW9kaWZpZWQgdGhlIGl0ZXJhdGlvbiBzdGFydHMg
b3ZlciBhZ2Fpbi4KKyAqLworI2RlZmluZSBkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZV91bmxvY2tl
ZChjdXJzb3IsIGZlbmNlKQkJCVwKKwlmb3IgKGZlbmNlID0gZG1hX3Jlc3ZfaXRlcl9maXJzdF91
bmxvY2tlZChjdXJzb3IpOwkJXAorCSAgICAgZmVuY2U7IGZlbmNlID0gZG1hX3Jlc3ZfaXRlcl9u
ZXh0X3VubG9ja2VkKGN1cnNvcikpCisKICNkZWZpbmUgZG1hX3Jlc3ZfaGVsZChvYmopIGxvY2tk
ZXBfaXNfaGVsZCgmKG9iaiktPmxvY2suYmFzZSkKICNkZWZpbmUgZG1hX3Jlc3ZfYXNzZXJ0X2hl
bGQob2JqKSBsb2NrZGVwX2Fzc2VydF9oZWxkKCYob2JqKS0+bG9jay5iYXNlKQogCi0tIAoyLjI1
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbmFy
by1tbS1zaWcgbWFpbGluZyBsaXN0CkxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZwpodHRw
czovL2xpc3RzLmxpbmFyby5vcmcvbWFpbG1hbi9saXN0aW5mby9saW5hcm8tbW0tc2lnCg==
