Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id B23676489EB
	for <lists+linaro-mm-sig@lfdr.de>; Fri,  9 Dec 2022 22:13:58 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 62A873E988
	for <lists+linaro-mm-sig@lfdr.de>; Fri,  9 Dec 2022 21:13:57 +0000 (UTC)
Received: from mail-yb1-f177.google.com (mail-yb1-f177.google.com [209.85.219.177])
	by lists.linaro.org (Postfix) with ESMTPS id A7BC13E980
	for <linaro-mm-sig@lists.linaro.org>; Fri,  9 Dec 2022 21:13:45 +0000 (UTC)
Authentication-Results: lists.linaro.org;
	dkim=pass header.d=google.com header.s=20210112 header.b=Mwa7elAr;
	spf=pass (lists.linaro.org: domain of tjmercier@google.com designates 209.85.219.177 as permitted sender) smtp.mailfrom=tjmercier@google.com;
	dmarc=pass (policy=reject) header.from=google.com
Received: by mail-yb1-f177.google.com with SMTP id s11so6993763ybe.2
        for <linaro-mm-sig@lists.linaro.org>; Fri, 09 Dec 2022 13:13:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20210112;
        h=content-transfer-encoding:cc:to:subject:message-id:date:from
         :in-reply-to:references:mime-version:from:to:cc:subject:date
         :message-id:reply-to;
        bh=iSiH6HRdDUeVAuI0WzuhZJh9igUQQgwfyPidBw4a2Vg=;
        b=Mwa7elArPImxnYPsUZCYj96TWyVAaAX30iuWM/Iu2Fu3zb8X+9R2nSZyMPXj5s8V+G
         3PIecc+k1zezXrt5WXzYvQMEiJ166MWmvdJSmAJcK5zh0d42zIjt3FYj2dKZwGd7uX22
         KFl7yCSjznUx04rm3RNuHKa9e+4hkZHSWxHuJNPnZNy+knRQbkSMrdzc8w4qe01Z0b6O
         4WmqZ4Q114XfQS8Cy3RH9Yqlhnz1WOWWPlRXyHYqt1nlc+rSkTF7BTKe5AdgLac8hchx
         yKDcn+EiOLEiCkiqSTWx7fR2aj0IZ44PDEvA0vByk6aTFbH+IhxeUB4TyphI4fJCDvd1
         m/ig==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=content-transfer-encoding:cc:to:subject:message-id:date:from
         :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
         :subject:date:message-id:reply-to;
        bh=iSiH6HRdDUeVAuI0WzuhZJh9igUQQgwfyPidBw4a2Vg=;
        b=p6zwL6SnhIAh6OuvrrVwVLtao/R5jBoBtpHkb6eD36zr2Qs8McacbpxSlW/HlwbqOh
         IRx2d57On8qM6jCxuNQkwlwMqNZ/C6LVNikwLe2LAxXPkj2r7OwWpWzl+dNNeA8GhHr4
         UDs5vjbWKMFpXS0Gj19eX3JFK5K19iCUtu0Z/HB9ASXoiAM8IerF6s67bCBygjju/21B
         CXLDDN5TK8a//89OE2MIypMYZV+eGoj5oyCDSN6GpFwn6GbmEb3dpis3Cins9+yjTH+2
         7ZAlscdnpoLW2lW9pstInuicMGUvh+Dk2IRUL2KpfH6uympP4HMUeF7rinTFpiw7haH0
         erYQ==
X-Gm-Message-State: ANoB5pnqYHeoYQe7qUu6DdmZau07H/zZOjaLl+9sPfoP+i6DsI5xIVDG
	IMfHKajK60/f0ylwmgCJoXmsIkyfkJmIDk6WEuVLXg==
X-Google-Smtp-Source: AA0mqf5JEHn9D4QUf6Bh0UqbTHaG2er5y1TJVpZaW6C4XY0ZSgrubYgKr6ssyFdWTrhWs/PkUqHs1MDkVqZpWNdJb5U=
X-Received: by 2002:a25:abd0:0:b0:700:ffd9:ee82 with SMTP id
 v74-20020a25abd0000000b00700ffd9ee82mr17971476ybi.117.1670620425085; Fri, 09
 Dec 2022 13:13:45 -0800 (PST)
MIME-Version: 1.0
References: <20221209071535.933698-1-christian.koenig@amd.com> <DM5PR11MB1324800C9F9755A0DA45023FC11C9@DM5PR11MB1324.namprd11.prod.outlook.com>
In-Reply-To: <DM5PR11MB1324800C9F9755A0DA45023FC11C9@DM5PR11MB1324.namprd11.prod.outlook.com>
From: "T.J. Mercier" <tjmercier@google.com>
Date: Fri, 9 Dec 2022 13:13:34 -0800
Message-ID: <CABdmKX0TU5nMPwv-jAQFbbeohaUL5KMznuEPkEn+x23g65feyw@mail.gmail.com>
To: "Ruhl, Michael J" <michael.j.ruhl@intel.com>
X-Rspamd-Queue-Id: A7BC13E980
X-Spamd-Bar: --------
X-Spamd-Result: default: False [-8.00 / 15.00];
	REPLY(-4.00)[];
	BAYES_HAM(-3.00)[100.00%];
	SUSPICIOUS_RECIPS(1.50)[];
	RCVD_DKIM_ARC_DNSWL_HI(-1.00)[];
	DMARC_POLICY_ALLOW(-0.50)[google.com,reject];
	RCVD_IN_DNSWL_HI(-0.50)[209.85.219.177:from];
	R_SPF_ALLOW(-0.20)[+ip4:209.85.128.0/17];
	R_DKIM_ALLOW(-0.20)[google.com:s=20210112];
	MIME_GOOD(-0.10)[text/plain];
	TO_DN_EQ_ADDR_SOME(0.00)[];
	PREVIOUSLY_DELIVERED(0.00)[linaro-mm-sig@lists.linaro.org];
	NEURAL_HAM(-0.00)[-1.000];
	RWL_MAILSPIKE_POSSIBLE(0.00)[209.85.219.177:from];
	TO_MATCH_ENVRCPT_SOME(0.00)[];
	FREEMAIL_CC(0.00)[gmail.com,quicinc.com,huawei.com,linaro.org,lists.linaro.org,lists.freedesktop.org,vger.kernel.org];
	TAGGED_RCPT(0.00)[];
	ARC_NA(0.00)[];
	ASN(0.00)[asn:15169, ipnet:209.85.128.0/17, country:US];
	DKIM_TRACE(0.00)[google.com:+];
	TO_DN_SOME(0.00)[];
	FROM_HAS_DN(0.00)[];
	RCPT_COUNT_SEVEN(0.00)[8];
	MIME_TRACE(0.00)[0:+];
	FROM_EQ_ENVFROM(0.00)[];
	RCVD_TLS_LAST(0.00)[];
	RCVD_COUNT_TWO(0.00)[2]
X-Rspamd-Action: no action
X-Rspamd-Server: lists.linaro.org
Message-ID-Hash: EPHZAIAA2MHRQBBGCO6S7PGZ6ZP5LG4Y
X-Message-ID-Hash: EPHZAIAA2MHRQBBGCO6S7PGZ6ZP5LG4Y
X-MailFrom: tjmercier@google.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
CC: "quic_charante@quicinc.com" <quic_charante@quicinc.com>, "cuigaosheng1@huawei.com" <cuigaosheng1@huawei.com>, "sumit.semwal@linaro.org" <sumit.semwal@linaro.org>, "linaro-mm-sig@lists.linaro.org" <linaro-mm-sig@lists.linaro.org>, "dri-devel@lists.freedesktop.org" <dri-devel@lists.freedesktop.org>, "linux-media@vger.kernel.org" <linux-media@vger.kernel.org>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] Re: [PATCH] dma-buf: fix dma_buf_export init order v2
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/EPHZAIAA2MHRQBBGCO6S7PGZ6ZP5LG4Y/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

T24gRnJpLCBEZWMgOSwgMjAyMiBhdCA4OjI5IEFNIFJ1aGwsIE1pY2hhZWwgSiA8bWljaGFlbC5q
LnJ1aGxAaW50ZWwuY29tPiB3cm90ZToNCj4NCj4gPi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0t
DQo+ID5Gcm9tOiBkcmktZGV2ZWwgPGRyaS1kZXZlbC1ib3VuY2VzQGxpc3RzLmZyZWVkZXNrdG9w
Lm9yZz4gT24gQmVoYWxmIE9mDQo+ID5DaHJpc3RpYW4gS8O2bmlnDQo+ID5TZW50OiBGcmlkYXks
IERlY2VtYmVyIDksIDIwMjIgMjoxNiBBTQ0KPiA+VG86IHF1aWNfY2hhcmFudGVAcXVpY2luYy5j
b207IGN1aWdhb3NoZW5nMUBodWF3ZWkuY29tOw0KPiA+c3VtaXQuc2Vtd2FsQGxpbmFyby5vcmcN
Cj4gPkNjOiBsaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmc7IGRyaS1kZXZlbEBsaXN0cy5m
cmVlZGVza3RvcC5vcmc7IGxpbnV4LQ0KPiA+bWVkaWFAdmdlci5rZXJuZWwub3JnDQo+ID5TdWJq
ZWN0OiBbUEFUQ0hdIGRtYS1idWY6IGZpeCBkbWFfYnVmX2V4cG9ydCBpbml0IG9yZGVyIHYyDQo+
ID4NCj4gPlRoZSBpbml0IG9yZGVyIGFuZCByZXN1bHRpbmcgZXJyb3IgaGFuZGxpbmcgaW4gZG1h
X2J1Zl9leHBvcnQNCj4gPndhcyBwcmV0dHkgbWVzc3kuDQo+ID4NCj4gPlN1Ym9yZGluYXRlIG9i
amVjdHMgbGlrZSB0aGUgZmlsZSBhbmQgdGhlIHN5c2ZzIGtlcm5lbCBvYmplY3RzDQo+ID53ZXJl
IGluaXRpYWxpemluZyBhbmQgd2lyaW5nIGl0c2VsZiB1cCB3aXRoIHRoZSBvYmplY3QgaW4gdGhl
DQo+ID53cm9uZyBvcmRlciByZXN1bHRpbmcgbm90IG9ubHkgaW4gY29tcGxpY2F0aW5nIGFuZCBw
YXJ0aWFsbHkNCj4gPmluY29ycmVjdCBlcnJvciBoYW5kbGluZywgYnV0IGFsc28gaW4gcHVibGlz
aGluZyBvbmx5IGhhbHZlDQo+ID5pbml0aWFsaXplZCBETUEtYnVmIG9iamVjdHMuDQo+ID4NCj4g
PkNsZWFuIHRoaXMgdXAgdGhvdWdodGZ1bGx5IGJ5IGFsbG9jYXRpbmcgdGhlIGZpbGUgaW5kZXBl
bmRlbnQNCj4gPm9mIHRoZSBETUEtYnVmIG9iamVjdC4gVGhlbiBhbGxvY2F0ZSBhbmQgaW5pdGlh
bGl6ZSB0aGUgRE1BLWJ1Zg0KPiA+b2JqZWN0IGl0c2VsZiwgYmVmb3JlIHB1Ymxpc2hpbmcgaXQg
dGhyb3VnaCBzeXNmcy4gSWYgZXZlcnl0aGluZw0KPiA+d29ya3MgYXMgZXhwZWN0ZWQgdGhlIGZp
bGUgaXMgdGhlbiBjb25uZWN0ZWQgd2l0aCB0aGUgRE1BLWJ1Zg0KPiA+b2JqZWN0IGFuZCBwdWJs
aXNoIGl0IHRocm91Z2ggZGVidWdmcy4NCj4gPg0KPiA+QWxzbyBhZGRzIHRoZSBtaXNzaW5nIGRt
YV9yZXN2X2ZpbmkoKSBpbnRvIHRoZSBlcnJvciBoYW5kbGluZy4NCj4gPg0KPiA+djI6IGFkZCBz
b21lIG1pc3NpbmcgY2hhbmdlcyB0byBkbWFfYnVnX2dldGZpbGUoKSBhbmQgYSBtaXNzaW5nIE5V
TEwNCj4gPiAgICBjaGVjayBpbiBkbWFfYnVmX2ZpbGVfcmVsZWFzZSgpDQo+DQo+IExvb2tzIGdv
b2QuDQo+DQo+IFJldmlld2VkLWJ5OiBNaWNoYWVsIEouIFJ1aGwgPG1pY2hhZWwuai5ydWhsQGlu
dGVsLmNvbT4NCj4NCj4gTWlrZQ0KPg0KKzENCg0KUmV2aWV3ZWQtYnk6IFQuSi4gTWVyY2llciA8
dGptZXJjaWVyQGdvb2dsZS5jb20+DQoNCj4gPlNpZ25lZC1vZmYtYnk6IENocmlzdGlhbiBLw7Zu
aWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4NCj4gPi0tLQ0KPiA+IGRyaXZlcnMvZG1hLWJ1
Zi9kbWEtYnVmLXN5c2ZzLXN0YXRzLmMgfCAgNyArLS0NCj4gPiBkcml2ZXJzL2RtYS1idWYvZG1h
LWJ1Zi1zeXNmcy1zdGF0cy5oIHwgIDQgKy0NCj4gPiBkcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5j
ICAgICAgICAgICAgIHwgODQgKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tDQo+ID4gMyBmaWxl
cyBjaGFuZ2VkLCA0MyBpbnNlcnRpb25zKCspLCA1MiBkZWxldGlvbnMoLSkNCj4gPg0KPiA+ZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLXN5c2ZzLXN0YXRzLmMgYi9kcml2ZXJz
L2RtYS1idWYvZG1hLQ0KPiA+YnVmLXN5c2ZzLXN0YXRzLmMNCj4gPmluZGV4IDJiYmEwYmFiY2I2
Mi4uNGI2ODBlMTBjMTVhIDEwMDY0NA0KPiA+LS0tIGEvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYt
c3lzZnMtc3RhdHMuYw0KPiA+KysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYtc3lzZnMtc3Rh
dHMuYw0KPiA+QEAgLTE2OCwxNCArMTY4LDExIEBAIHZvaWQgZG1hX2J1Zl91bmluaXRfc3lzZnNf
c3RhdGlzdGljcyh2b2lkKQ0KPiA+ICAgICAgIGtzZXRfdW5yZWdpc3RlcihkbWFfYnVmX3N0YXRz
X2tzZXQpOw0KPiA+IH0NCj4gPg0KPiA+LWludCBkbWFfYnVmX3N0YXRzX3NldHVwKHN0cnVjdCBk
bWFfYnVmICpkbWFidWYpDQo+ID4raW50IGRtYV9idWZfc3RhdHNfc2V0dXAoc3RydWN0IGRtYV9i
dWYgKmRtYWJ1Ziwgc3RydWN0IGZpbGUgKmZpbGUpDQo+ID4gew0KPiA+ICAgICAgIHN0cnVjdCBk
bWFfYnVmX3N5c2ZzX2VudHJ5ICpzeXNmc19lbnRyeTsNCj4gPiAgICAgICBpbnQgcmV0Ow0KPiA+
DQo+ID4tICAgICAgaWYgKCFkbWFidWYgfHwgIWRtYWJ1Zi0+ZmlsZSkNCj4gPi0gICAgICAgICAg
ICAgIHJldHVybiAtRUlOVkFMOw0KPiA+LQ0KPiA+ICAgICAgIGlmICghZG1hYnVmLT5leHBfbmFt
ZSkgew0KPiA+ICAgICAgICAgICAgICAgcHJfZXJyKCJleHBvcnRlciBuYW1lIG11c3Qgbm90IGJl
IGVtcHR5IGlmIHN0YXRzDQo+ID5uZWVkZWRcbiIpOw0KPiA+ICAgICAgICAgICAgICAgcmV0dXJu
IC1FSU5WQUw7DQo+ID5AQCAtMTkyLDcgKzE4OSw3IEBAIGludCBkbWFfYnVmX3N0YXRzX3NldHVw
KHN0cnVjdCBkbWFfYnVmICpkbWFidWYpDQo+ID4NCj4gPiAgICAgICAvKiBjcmVhdGUgdGhlIGRp
cmVjdG9yeSBmb3IgYnVmZmVyIHN0YXRzICovDQo+ID4gICAgICAgcmV0ID0ga29iamVjdF9pbml0
X2FuZF9hZGQoJnN5c2ZzX2VudHJ5LT5rb2JqLCAmZG1hX2J1Zl9rdHlwZSwNCj4gPk5VTEwsDQo+
ID4tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiVsdSIsIGZpbGVfaW5vZGUoZG1h
YnVmLT5maWxlKS0+aV9pbm8pOw0KPiA+KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICIlbHUiLCBmaWxlX2lub2RlKGZpbGUpLT5pX2lubyk7DQo+ID4gICAgICAgaWYgKHJldCkNCj4g
PiAgICAgICAgICAgICAgIGdvdG8gZXJyX3N5c2ZzX2RtYWJ1ZjsNCj4gPg0KPiA+ZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLXN5c2ZzLXN0YXRzLmggYi9kcml2ZXJzL2RtYS1i
dWYvZG1hLQ0KPiA+YnVmLXN5c2ZzLXN0YXRzLmgNCj4gPmluZGV4IGE0OWM2ZTI2NTBjYy4uN2E4
YTk5NWI3NWJhIDEwMDY0NA0KPiA+LS0tIGEvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYtc3lzZnMt
c3RhdHMuaA0KPiA+KysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYtc3lzZnMtc3RhdHMuaA0K
PiA+QEAgLTEzLDcgKzEzLDcgQEANCj4gPiBpbnQgZG1hX2J1Zl9pbml0X3N5c2ZzX3N0YXRpc3Rp
Y3Modm9pZCk7DQo+ID4gdm9pZCBkbWFfYnVmX3VuaW5pdF9zeXNmc19zdGF0aXN0aWNzKHZvaWQp
Ow0KPiA+DQo+ID4taW50IGRtYV9idWZfc3RhdHNfc2V0dXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1
Zik7DQo+ID4raW50IGRtYV9idWZfc3RhdHNfc2V0dXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwg
c3RydWN0IGZpbGUgKmZpbGUpOw0KPiA+DQo+ID4gdm9pZCBkbWFfYnVmX3N0YXRzX3RlYXJkb3du
KHN0cnVjdCBkbWFfYnVmICpkbWFidWYpOw0KPiA+ICNlbHNlDQo+ID5AQCAtMjUsNyArMjUsNyBA
QCBzdGF0aWMgaW5saW5lIGludCBkbWFfYnVmX2luaXRfc3lzZnNfc3RhdGlzdGljcyh2b2lkKQ0K
PiA+DQo+ID4gc3RhdGljIGlubGluZSB2b2lkIGRtYV9idWZfdW5pbml0X3N5c2ZzX3N0YXRpc3Rp
Y3Modm9pZCkge30NCj4gPg0KPiA+LXN0YXRpYyBpbmxpbmUgaW50IGRtYV9idWZfc3RhdHNfc2V0
dXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1ZikNCj4gPitzdGF0aWMgaW5saW5lIGludCBkbWFfYnVm
X3N0YXRzX3NldHVwKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCBmaWxlDQo+ID4qZmls
ZSkNCj4gPiB7DQo+ID4gICAgICAgcmV0dXJuIDA7DQo+ID4gfQ0KPiA+ZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jDQo+ID5p
bmRleCBlNmYzNmMwMTRjNGMuLmViNmI1OTM2M2M0ZiAxMDA2NDQNCj4gPi0tLSBhL2RyaXZlcnMv
ZG1hLWJ1Zi9kbWEtYnVmLmMNCj4gPisrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMNCj4g
PkBAIC05NSwxMCArOTUsMTEgQEAgc3RhdGljIGludCBkbWFfYnVmX2ZpbGVfcmVsZWFzZShzdHJ1
Y3QgaW5vZGUgKmlub2RlLA0KPiA+c3RydWN0IGZpbGUgKmZpbGUpDQo+ID4gICAgICAgICAgICAg
ICByZXR1cm4gLUVJTlZBTDsNCj4gPg0KPiA+ICAgICAgIGRtYWJ1ZiA9IGZpbGUtPnByaXZhdGVf
ZGF0YTsNCj4gPi0NCj4gPi0gICAgICBtdXRleF9sb2NrKCZkYl9saXN0LmxvY2spOw0KPiA+LSAg
ICAgIGxpc3RfZGVsKCZkbWFidWYtPmxpc3Rfbm9kZSk7DQo+ID4tICAgICAgbXV0ZXhfdW5sb2Nr
KCZkYl9saXN0LmxvY2spOw0KPiA+KyAgICAgIGlmIChkbWFidWYpIHsNCj4gPisgICAgICAgICAg
ICAgIG11dGV4X2xvY2soJmRiX2xpc3QubG9jayk7DQo+ID4rICAgICAgICAgICAgICBsaXN0X2Rl
bCgmZG1hYnVmLT5saXN0X25vZGUpOw0KPiA+KyAgICAgICAgICAgICAgbXV0ZXhfdW5sb2NrKCZk
Yl9saXN0LmxvY2spOw0KPiA+KyAgICAgIH0NCj4gPg0KPiA+ICAgICAgIHJldHVybiAwOw0KPiA+
IH0NCj4gPkBAIC01MjMsMTcgKzUyNCwxNyBAQCBzdGF0aWMgaW5saW5lIGludCBpc19kbWFfYnVm
X2ZpbGUoc3RydWN0IGZpbGUgKmZpbGUpDQo+ID4gICAgICAgcmV0dXJuIGZpbGUtPmZfb3AgPT0g
JmRtYV9idWZfZm9wczsNCj4gPiB9DQo+ID4NCj4gPi1zdGF0aWMgc3RydWN0IGZpbGUgKmRtYV9i
dWZfZ2V0ZmlsZShzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBpbnQgZmxhZ3MpDQo+ID4rc3RhdGlj
IHN0cnVjdCBmaWxlICpkbWFfYnVmX2dldGZpbGUoc2l6ZV90IHNpemUsIGludCBmbGFncykNCj4g
PiB7DQo+ID4gICAgICAgc3RhdGljIGF0b21pYzY0X3QgZG1hYnVmX2lub2RlID0gQVRPTUlDNjRf
SU5JVCgwKTsNCj4gPi0gICAgICBzdHJ1Y3QgZmlsZSAqZmlsZTsNCj4gPiAgICAgICBzdHJ1Y3Qg
aW5vZGUgKmlub2RlID0gYWxsb2NfYW5vbl9pbm9kZShkbWFfYnVmX21udC0+bW50X3NiKTsNCj4g
PisgICAgICBzdHJ1Y3QgZmlsZSAqZmlsZTsNCj4gPg0KPiA+ICAgICAgIGlmIChJU19FUlIoaW5v
ZGUpKQ0KPiA+ICAgICAgICAgICAgICAgcmV0dXJuIEVSUl9DQVNUKGlub2RlKTsNCj4gPg0KPiA+
LSAgICAgIGlub2RlLT5pX3NpemUgPSBkbWFidWYtPnNpemU7DQo+ID4tICAgICAgaW5vZGVfc2V0
X2J5dGVzKGlub2RlLCBkbWFidWYtPnNpemUpOw0KPiA+KyAgICAgIGlub2RlLT5pX3NpemUgPSBz
aXplOw0KPiA+KyAgICAgIGlub2RlX3NldF9ieXRlcyhpbm9kZSwgc2l6ZSk7DQo+ID4NCj4gPiAg
ICAgICAvKg0KPiA+ICAgICAgICAqIFRoZSAtPmlfaW5vIGFjcXVpcmVkIGZyb20gZ2V0X25leHRf
aW5vKCkgaXMgbm90IHVuaXF1ZSB0aHVzDQo+ID5AQCAtNTQ3LDggKzU0OCw2IEBAIHN0YXRpYyBz
dHJ1Y3QgZmlsZSAqZG1hX2J1Zl9nZXRmaWxlKHN0cnVjdCBkbWFfYnVmDQo+ID4qZG1hYnVmLCBp
bnQgZmxhZ3MpDQo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLCAmZG1h
X2J1Zl9mb3BzKTsNCj4gPiAgICAgICBpZiAoSVNfRVJSKGZpbGUpKQ0KPiA+ICAgICAgICAgICAg
ICAgZ290byBlcnJfYWxsb2NfZmlsZTsNCj4gPi0gICAgICBmaWxlLT5wcml2YXRlX2RhdGEgPSBk
bWFidWY7DQo+ID4tICAgICAgZmlsZS0+Zl9wYXRoLmRlbnRyeS0+ZF9mc2RhdGEgPSBkbWFidWY7
DQo+ID4NCj4gPiAgICAgICByZXR1cm4gZmlsZTsNCj4gPg0KPiA+QEAgLTYxNCwxOSArNjEzLDEx
IEBAIHN0cnVjdCBkbWFfYnVmICpkbWFfYnVmX2V4cG9ydChjb25zdCBzdHJ1Y3QNCj4gPmRtYV9i
dWZfZXhwb3J0X2luZm8gKmV4cF9pbmZvKQ0KPiA+ICAgICAgIHNpemVfdCBhbGxvY19zaXplID0g
c2l6ZW9mKHN0cnVjdCBkbWFfYnVmKTsNCj4gPiAgICAgICBpbnQgcmV0Ow0KPiA+DQo+ID4tICAg
ICAgaWYgKCFleHBfaW5mby0+cmVzdikNCj4gPi0gICAgICAgICAgICAgIGFsbG9jX3NpemUgKz0g
c2l6ZW9mKHN0cnVjdCBkbWFfcmVzdik7DQo+ID4tICAgICAgZWxzZQ0KPiA+LSAgICAgICAgICAg
ICAgLyogcHJldmVudCAmZG1hX2J1ZlsxXSA9PSBkbWFfYnVmLT5yZXN2ICovDQo+ID4tICAgICAg
ICAgICAgICBhbGxvY19zaXplICs9IDE7DQo+ID4tDQo+ID4tICAgICAgaWYgKFdBUk5fT04oIWV4
cF9pbmZvLT5wcml2DQo+ID4tICAgICAgICAgICAgICAgICAgICAgICAgfHwgIWV4cF9pbmZvLT5v
cHMNCj4gPi0gICAgICAgICAgICAgICAgICAgICAgICB8fCAhZXhwX2luZm8tPm9wcy0+bWFwX2Rt
YV9idWYNCj4gPi0gICAgICAgICAgICAgICAgICAgICAgICB8fCAhZXhwX2luZm8tPm9wcy0+dW5t
YXBfZG1hX2J1Zg0KPiA+LSAgICAgICAgICAgICAgICAgICAgICAgIHx8ICFleHBfaW5mby0+b3Bz
LT5yZWxlYXNlKSkgew0KPiA+KyAgICAgIGlmIChXQVJOX09OKCFleHBfaW5mby0+cHJpdiB8fCAh
ZXhwX2luZm8tPm9wcw0KPiA+KyAgICAgICAgICAgICAgICAgIHx8ICFleHBfaW5mby0+b3BzLT5t
YXBfZG1hX2J1Zg0KPiA+KyAgICAgICAgICAgICAgICAgIHx8ICFleHBfaW5mby0+b3BzLT51bm1h
cF9kbWFfYnVmDQo+ID4rICAgICAgICAgICAgICAgICAgfHwgIWV4cF9pbmZvLT5vcHMtPnJlbGVh
c2UpKQ0KPiA+ICAgICAgICAgICAgICAgcmV0dXJuIEVSUl9QVFIoLUVJTlZBTCk7DQo+ID4tICAg
ICAgfQ0KPiA+DQo+ID4gICAgICAgaWYgKFdBUk5fT04oZXhwX2luZm8tPm9wcy0+Y2FjaGVfc2d0
X21hcHBpbmcgJiYNCj4gPiAgICAgICAgICAgICAgICAgICAoZXhwX2luZm8tPm9wcy0+cGluIHx8
IGV4cF9pbmZvLT5vcHMtPnVucGluKSkpDQo+ID5AQCAtNjM4LDEwICs2MjksMjEgQEAgc3RydWN0
IGRtYV9idWYgKmRtYV9idWZfZXhwb3J0KGNvbnN0IHN0cnVjdA0KPiA+ZG1hX2J1Zl9leHBvcnRf
aW5mbyAqZXhwX2luZm8pDQo+ID4gICAgICAgaWYgKCF0cnlfbW9kdWxlX2dldChleHBfaW5mby0+
b3duZXIpKQ0KPiA+ICAgICAgICAgICAgICAgcmV0dXJuIEVSUl9QVFIoLUVOT0VOVCk7DQo+ID4N
Cj4gPisgICAgICBmaWxlID0gZG1hX2J1Zl9nZXRmaWxlKGV4cF9pbmZvLT5zaXplLCBleHBfaW5m
by0+ZmxhZ3MpOw0KPiA+KyAgICAgIGlmIChJU19FUlIoZmlsZSkpIHsNCj4gPisgICAgICAgICAg
ICAgIHJldCA9IFBUUl9FUlIoZmlsZSk7DQo+ID4rICAgICAgICAgICAgICBnb3RvIGVycl9tb2R1
bGU7DQo+ID4rICAgICAgfQ0KPiA+Kw0KPiA+KyAgICAgIGlmICghZXhwX2luZm8tPnJlc3YpDQo+
ID4rICAgICAgICAgICAgICBhbGxvY19zaXplICs9IHNpemVvZihzdHJ1Y3QgZG1hX3Jlc3YpOw0K
PiA+KyAgICAgIGVsc2UNCj4gPisgICAgICAgICAgICAgIC8qIHByZXZlbnQgJmRtYV9idWZbMV0g
PT0gZG1hX2J1Zi0+cmVzdiAqLw0KPiA+KyAgICAgICAgICAgICAgYWxsb2Nfc2l6ZSArPSAxOw0K
PiA+ICAgICAgIGRtYWJ1ZiA9IGt6YWxsb2MoYWxsb2Nfc2l6ZSwgR0ZQX0tFUk5FTCk7DQo+ID4g
ICAgICAgaWYgKCFkbWFidWYpIHsNCj4gPiAgICAgICAgICAgICAgIHJldCA9IC1FTk9NRU07DQo+
ID4tICAgICAgICAgICAgICBnb3RvIGVycl9tb2R1bGU7DQo+ID4rICAgICAgICAgICAgICBnb3Rv
IGVycl9maWxlOw0KPiA+ICAgICAgIH0NCj4gPg0KPiA+ICAgICAgIGRtYWJ1Zi0+cHJpdiA9IGV4
cF9pbmZvLT5wcml2Ow0KPiA+QEAgLTY1Myw0NCArNjU1LDM2IEBAIHN0cnVjdCBkbWFfYnVmICpk
bWFfYnVmX2V4cG9ydChjb25zdCBzdHJ1Y3QNCj4gPmRtYV9idWZfZXhwb3J0X2luZm8gKmV4cF9p
bmZvKQ0KPiA+ICAgICAgIGluaXRfd2FpdHF1ZXVlX2hlYWQoJmRtYWJ1Zi0+cG9sbCk7DQo+ID4g
ICAgICAgZG1hYnVmLT5jYl9pbi5wb2xsID0gZG1hYnVmLT5jYl9vdXQucG9sbCA9ICZkbWFidWYt
PnBvbGw7DQo+ID4gICAgICAgZG1hYnVmLT5jYl9pbi5hY3RpdmUgPSBkbWFidWYtPmNiX291dC5h
Y3RpdmUgPSAwOw0KPiA+KyAgICAgIG11dGV4X2luaXQoJmRtYWJ1Zi0+bG9jayk7DQo+ID4rICAg
ICAgSU5JVF9MSVNUX0hFQUQoJmRtYWJ1Zi0+YXR0YWNobWVudHMpOw0KPiA+DQo+ID4gICAgICAg
aWYgKCFyZXN2KSB7DQo+ID4tICAgICAgICAgICAgICByZXN2ID0gKHN0cnVjdCBkbWFfcmVzdiAq
KSZkbWFidWZbMV07DQo+ID4tICAgICAgICAgICAgICBkbWFfcmVzdl9pbml0KHJlc3YpOw0KPiA+
KyAgICAgICAgICAgICAgZG1hYnVmLT5yZXN2ID0gKHN0cnVjdCBkbWFfcmVzdiAqKSZkbWFidWZb
MV07DQo+ID4rICAgICAgICAgICAgICBkbWFfcmVzdl9pbml0KGRtYWJ1Zi0+cmVzdik7DQo+ID4r
ICAgICAgfSBlbHNlIHsNCj4gPisgICAgICAgICAgICAgIGRtYWJ1Zi0+cmVzdiA9IHJlc3Y7DQo+
ID4gICAgICAgfQ0KPiA+LSAgICAgIGRtYWJ1Zi0+cmVzdiA9IHJlc3Y7DQo+ID4NCj4gPi0gICAg
ICBmaWxlID0gZG1hX2J1Zl9nZXRmaWxlKGRtYWJ1ZiwgZXhwX2luZm8tPmZsYWdzKTsNCj4gPi0g
ICAgICBpZiAoSVNfRVJSKGZpbGUpKSB7DQo+ID4tICAgICAgICAgICAgICByZXQgPSBQVFJfRVJS
KGZpbGUpOw0KPiA+KyAgICAgIHJldCA9IGRtYV9idWZfc3RhdHNfc2V0dXAoZG1hYnVmLCBmaWxl
KTsNCj4gPisgICAgICBpZiAocmV0KQ0KPiA+ICAgICAgICAgICAgICAgZ290byBlcnJfZG1hYnVm
Ow0KPiA+LSAgICAgIH0NCj4gPg0KPiA+KyAgICAgIGZpbGUtPnByaXZhdGVfZGF0YSA9IGRtYWJ1
ZjsNCj4gPisgICAgICBmaWxlLT5mX3BhdGguZGVudHJ5LT5kX2ZzZGF0YSA9IGRtYWJ1ZjsNCj4g
PiAgICAgICBkbWFidWYtPmZpbGUgPSBmaWxlOw0KPiA+DQo+ID4tICAgICAgbXV0ZXhfaW5pdCgm
ZG1hYnVmLT5sb2NrKTsNCj4gPi0gICAgICBJTklUX0xJU1RfSEVBRCgmZG1hYnVmLT5hdHRhY2ht
ZW50cyk7DQo+ID4tDQo+ID4gICAgICAgbXV0ZXhfbG9jaygmZGJfbGlzdC5sb2NrKTsNCj4gPiAg
ICAgICBsaXN0X2FkZCgmZG1hYnVmLT5saXN0X25vZGUsICZkYl9saXN0LmhlYWQpOw0KPiA+ICAg
ICAgIG11dGV4X3VubG9jaygmZGJfbGlzdC5sb2NrKTsNCj4gPg0KPiA+LSAgICAgIHJldCA9IGRt
YV9idWZfc3RhdHNfc2V0dXAoZG1hYnVmKTsNCj4gPi0gICAgICBpZiAocmV0KQ0KPiA+LSAgICAg
ICAgICAgICAgZ290byBlcnJfc3lzZnM7DQo+ID4tDQo+ID4gICAgICAgcmV0dXJuIGRtYWJ1ZjsN
Cj4gPg0KPiA+LWVycl9zeXNmczoNCj4gPi0gICAgICAvKg0KPiA+LSAgICAgICAqIFNldCBmaWxl
LT5mX3BhdGguZGVudHJ5LT5kX2ZzZGF0YSB0byBOVUxMIHNvIHRoYXQgd2hlbg0KPiA+LSAgICAg
ICAqIGRtYV9idWZfcmVsZWFzZSgpIGdldHMgaW52b2tlZCBieSBkZW50cnlfb3BzLCBpdCBleGl0
cw0KPiA+LSAgICAgICAqIGVhcmx5IGJlZm9yZSBjYWxsaW5nIHRoZSByZWxlYXNlKCkgZG1hX2J1
ZiBvcC4NCj4gPi0gICAgICAgKi8NCj4gPi0gICAgICBmaWxlLT5mX3BhdGguZGVudHJ5LT5kX2Zz
ZGF0YSA9IE5VTEw7DQo+ID4tICAgICAgZnB1dChmaWxlKTsNCj4gPiBlcnJfZG1hYnVmOg0KPiA+
KyAgICAgIGlmICghcmVzdikNCj4gPisgICAgICAgICAgICAgIGRtYV9yZXN2X2ZpbmkoZG1hYnVm
LT5yZXN2KTsNCj4gPiAgICAgICBrZnJlZShkbWFidWYpOw0KPiA+K2Vycl9maWxlOg0KPiA+KyAg
ICAgIGZwdXQoZmlsZSk7DQo+ID4gZXJyX21vZHVsZToNCj4gPiAgICAgICBtb2R1bGVfcHV0KGV4
cF9pbmZvLT5vd25lcik7DQo+ID4gICAgICAgcmV0dXJuIEVSUl9QVFIocmV0KTsNCj4gPi0tDQo+
ID4yLjM0LjENCj4NCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCkxpbmFyby1tbS1zaWcgbWFpbGluZyBsaXN0IC0tIGxpbmFyby1tbS1zaWdAbGlzdHMubGlu
YXJvLm9yZwpUbyB1bnN1YnNjcmliZSBzZW5kIGFuIGVtYWlsIHRvIGxpbmFyby1tbS1zaWctbGVh
dmVAbGlzdHMubGluYXJvLm9yZwo=
