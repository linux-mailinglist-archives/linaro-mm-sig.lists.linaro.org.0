Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 2BE6341387F
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 21 Sep 2021 19:37:20 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 93156623A8
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 21 Sep 2021 17:37:17 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id B9552619CD; Tue, 21 Sep 2021 17:37:11 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id C4FFC6129E;
	Tue, 21 Sep 2021 17:37:06 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 8C51B611B2
 for <linaro-mm-sig@lists.linaro.org>; Tue, 21 Sep 2021 17:37:04 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 89D2361298; Tue, 21 Sep 2021 17:37:04 +0000 (UTC)
Received: from mail-wr1-f42.google.com (mail-wr1-f42.google.com
 [209.85.221.42])
 by lists.linaro.org (Postfix) with ESMTPS id 7CA89611B2
 for <linaro-mm-sig@lists.linaro.org>; Tue, 21 Sep 2021 17:37:02 +0000 (UTC)
Received: by mail-wr1-f42.google.com with SMTP id t7so8353827wrw.13
 for <linaro-mm-sig@lists.linaro.org>; Tue, 21 Sep 2021 10:37:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=Uf9+jpJeEgCFnOIPRcwH4Xus10PdccW5sZ8+5fRgjtI=;
 b=Hx6CmGIL3yNe3WSoedSEgQ5EPn07dSWNkriSXIoqUcit8q0uTucUwBc+mz+51bXr9w
 SVprnbu/mXoLd1o/vQKzVbDQSNQhIIV78cGQahRuitiyXx6Hkx5+TPpyohaqdiOQ4kw7
 Q1FWh5GaLgKSZ9NwBXzzSV8r3blpbWLScsd+uziOYzeZCvcaBap6tuuoytExP7Pxnsba
 FpY0PCfLlk5L27PJAbBKYOM9II1UDmEVa4uykUeu8bWpt681bu3fJkqQ1YjrwDwY5Xqx
 m2FhiAakai/B3bJZ0vScDYlR8wIsEDdWKZzYOa9lNj/vpHGQ8dr9Bparg3wF6zs93dXP
 XnuQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=Uf9+jpJeEgCFnOIPRcwH4Xus10PdccW5sZ8+5fRgjtI=;
 b=QScelfWTb2mfiQl3qFJzZEND3cijSWE1zy7T/FbiosnyKMGcuy2X9b1ZpE9ZrFLqzo
 W795xcYnA+8472QO695toUvEKiRGvjcAYYo11xG1lI+zl4eatGOdo+gfJQXE5NI2Onuw
 185tnwa4zl0bWXQ5Zx/ObZj2qY+1KYVivb0CcNwqw0saY+3QTvCPZ5oQ3HMk7cxeqd39
 SiFy9Wdl/la/hH87vanceLZapRF6nli8y3yPEvNrJ7cBj0H9iOhj7gFV5Dckhcm8E+hz
 CSTzLDo6tQae0wK5CVIMJfKbBwxWpJiKeP+lsOVlaW1TE0k7/As7YFSdpnDdWUMDkUK4
 8oYA==
X-Gm-Message-State: AOAM5315k//oVkrocW53P3ghcQq9Tbk/nN4+MN/DKfJTmZa+FP7/kW3V
 eKCL81QaPaxZr6xpVkoi9RVH41R6ybs=
X-Google-Smtp-Source: ABdhPJzrUCurtyeGxjMbFgwgCWmKyQY6dPJ2HueooXFdqbs6snAaHkPoiDnHbg92FkEoyUsZ3ANj2Q==
X-Received: by 2002:adf:fc0e:: with SMTP id i14mr36346897wrr.173.1632245821522; 
 Tue, 21 Sep 2021 10:37:01 -0700 (PDT)
Received: from abel.fritz.box (p5b0ea1b5.dip0.t-ipconnect.de. [91.14.161.181])
 by smtp.gmail.com with ESMTPSA id
 z13sm23310477wrs.90.2021.09.21.10.37.00
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 21 Sep 2021 10:37:01 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: ckoenig.leichtzumerken@gmail.com, linaro-mm-sig@lists.linaro.org,
 dri-devel@lists.freedesktop.org, linux-media@vger.kernel.org,
 intel-gfx@lists.freedesktop.org
Date: Tue, 21 Sep 2021 19:36:34 +0200
Message-Id: <20210921173659.246165-1-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: [Linaro-mm-sig] [PATCH 01/26] dma-buf: add
 dma_resv_for_each_fence_unlocked v3
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: tvrtko.ursulin@linux.intel.com, daniel@ffwll.ch
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

QWJzdHJhY3QgdGhlIGNvbXBsZXhpdHkgb2YgaXRlcmF0aW5nIG92ZXIgYWxsIHRoZSBmZW5jZXMK
aW4gYSBkbWFfcmVzdiBvYmplY3QuCgpUaGUgbmV3IGxvb3AgaGFuZGxlcyB0aGUgd2hvbGUgUkNV
IGFuZCByZXRyeSBkYW5jZSBhbmQKcmV0dXJucyBvbmx5IGZlbmNlcyB3aGVyZSB3ZSBjYW4gYmUg
c3VyZSB3ZSBncmFiYmVkIHRoZQpyaWdodCBvbmUuCgp2MjogZml4IGFjY2Vzc2luZyB0aGUgc2hh
cmVkIGZlbmNlcyB3aGlsZSB0aGV5IG1pZ2h0IGJlIGZyZWVkLAogICAgaW1wcm92ZSBrZXJuZWxk
b2MsIHJlbmFtZSBfY3Vyc29yIHRvIF9pdGVyLCBhZGQKICAgIGRtYV9yZXN2X2l0ZXJfaXNfZXhj
bHVzaXZlLCBhZGQgZG1hX3Jlc3ZfaXRlcl9iZWdpbi9lbmQKCnYzOiByZXN0cnVjdG9yIHRoZSBj
b2RlLCBtb3ZlIHJjdV9yZWFkX2xvY2soKS91bmxvY2soKSBpbnRvIHRoZQogICAgaXRlcmF0b3Is
IGFkZCBkbWFfcmVzdl9pdGVyX2lzX3Jlc3RhcnRlZCgpCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3Rp
YW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9kbWEtYnVm
L2RtYS1yZXN2LmMgfCA5OCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwog
aW5jbHVkZS9saW51eC9kbWEtcmVzdi5oICAgfCA5NSArKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysKIDIgZmlsZXMgY2hhbmdlZCwgMTkzIGluc2VydGlvbnMoKykKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2RtYS1idWYvZG1hLXJlc3YuYyBiL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtcmVz
di5jCmluZGV4IDg0ZmJlNjA2MjllMy4uMTFiNTM5OWY0YmQzIDEwMDY0NAotLS0gYS9kcml2ZXJz
L2RtYS1idWYvZG1hLXJlc3YuYworKysgYi9kcml2ZXJzL2RtYS1idWYvZG1hLXJlc3YuYwpAQCAt
MzIzLDYgKzMyMywxMDQgQEAgdm9pZCBkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShzdHJ1Y3QgZG1h
X3Jlc3YgKm9iaiwgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCiB9CiBFWFBPUlRfU1lNQk9MKGRt
YV9yZXN2X2FkZF9leGNsX2ZlbmNlKTsKIAorLyoqCisgKiBkbWFfcmVzdl9pdGVyX3Jlc3RhcnRf
dW5sb2NrZWQgLSByZXN0YXJ0IHRoZSB1bmxvY2tlZCBpdGVyYXRvcgorICogQGN1cnNvcjogVGhl
IGRtYV9yZXN2X2l0ZXIgb2JqZWN0IHRvIHJlc3RhcnQKKyAqCisgKiBSZXN0YXJ0IHRoZSB1bmxv
Y2tlZCBpdGVyYXRpb24gYnkgaW5pdGlhbGl6aW5nIHRoZSBjdXJzb3Igb2JqZWN0LgorICovCitz
dGF0aWMgdm9pZCBkbWFfcmVzdl9pdGVyX3Jlc3RhcnRfdW5sb2NrZWQoc3RydWN0IGRtYV9yZXN2
X2l0ZXIgKmN1cnNvcikKK3sKKwljdXJzb3ItPnNlcSA9IHJlYWRfc2VxY291bnRfYmVnaW4oJmN1
cnNvci0+b2JqLT5zZXEpOworCWN1cnNvci0+aW5kZXggPSAtMTsKKwlpZiAoY3Vyc29yLT5hbGxf
ZmVuY2VzKSB7CisJCXJjdV9yZWFkX2xvY2soKTsKKwkJY3Vyc29yLT5mZW5jZXMgPSBkbWFfcmVz
dl9zaGFyZWRfbGlzdChjdXJzb3ItPm9iaik7CisJCXJjdV9yZWFkX3VubG9jaygpOworCX0gZWxz
ZSB7CisJCWN1cnNvci0+ZmVuY2VzID0gTlVMTDsKKwl9CisJY3Vyc29yLT5pc19yZXN0YXJ0ZWQg
PSB0cnVlOworfQorCisvKioKKyAqIGRtYV9yZXN2X2l0ZXJfd2Fsa191bmxvY2tlZCAtIHdhbGsg
b3ZlciBmZW5jZXMgaW4gYSBkbWFfcmVzdiBvYmoKKyAqIEBjdXJzb3I6IGN1cnNvciB0byByZWNv
cmQgdGhlIGN1cnJlbnQgcG9zaXRpb24KKyAqCisgKiBSZXR1cm4gYWxsIHRoZSBmZW5jZXMgaW4g
dGhlIGRtYV9yZXN2IG9iamVjdCB3aGljaCBhcmUgbm90IHlldCBzaWduYWxlZC4KKyAqIFRoZSBy
ZXR1cm5lZCBmZW5jZSBoYXMgYW4gZXh0cmEgbG9jYWwgcmVmZXJlbmNlIHNvIHdpbGwgc3RheSBh
bGl2ZS4KKyAqIElmIGEgY29uY3VycmVudCBtb2RpZnkgaXMgZGV0ZWN0ZWQgdGhlIHdob2xlIGl0
ZXJyYXRpb24gaXMgc3RhcnRlZCBvdmVyIGFnYWluLgorICovCitzdGF0aWMgdm9pZCBkbWFfcmVz
dl9pdGVyX3dhbGtfdW5sb2NrZWQoc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcikKK3sKKwlz
dHJ1Y3QgZG1hX3Jlc3YgKm9iaiA9IGN1cnNvci0+b2JqOworCisJZG8geworCQkvKiBEcm9wIHRo
ZSByZWZlcmVuY2UgZnJvbSB0aGUgcHJldmlvdXMgcm91bmQgKi8KKwkJZG1hX2ZlbmNlX3B1dChj
dXJzb3ItPmZlbmNlKTsKKworCQlpZiAoY3Vyc29yLT5pbmRleCsrID09IC0xKSB7CisJCQljdXJz
b3ItPmZlbmNlID0gZG1hX3Jlc3ZfZXhjbF9mZW5jZShvYmopOworCQkJY3Vyc29yLT5mZW5jZSA9
IGRtYV9mZW5jZV9nZXRfcmN1KGN1cnNvci0+ZmVuY2UpOworCisJCX0gZWxzZSBpZiAoIWN1cnNv
ci0+ZmVuY2VzIHx8CisJCQkgICBjdXJzb3ItPmluZGV4ID49IGN1cnNvci0+ZmVuY2VzLT5zaGFy
ZWRfY291bnQpIHsKKwkJCWN1cnNvci0+ZmVuY2UgPSBOVUxMOworCisJCX0gZWxzZSB7CisJCQlz
dHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqZmVuY2VzID0gY3Vyc29yLT5mZW5jZXM7CisJCQl1bnNpZ25l
ZCBpbnQgaWR4ID0gY3Vyc29yLT5pbmRleDsKKworCQkJY3Vyc29yLT5mZW5jZSA9IHJjdV9kZXJl
ZmVyZW5jZShmZW5jZXMtPnNoYXJlZFtpZHhdKTsKKwkJCWN1cnNvci0+ZmVuY2UgPSBkbWFfZmVu
Y2VfZ2V0X3JjdShjdXJzb3ItPmZlbmNlKTsKKwkJfQorCX0gd2hpbGUgKGN1cnNvci0+ZmVuY2Ug
JiYgZG1hX2ZlbmNlX2lzX3NpZ25hbGVkKGN1cnNvci0+ZmVuY2UpKTsKK30KKworLyoqCisgKiBk
bWFfcmVzdl9pdGVyX2ZpcnN0X3VubG9ja2VkIC0gZmlyc3QgZmVuY2UgaW4gYW4gdW5sb2NrZWQg
ZG1hX3Jlc3Ygb2JqLgorICogQGN1cnNvcjogdGhlIGN1cnNvciB3aXRoIHRoZSBjdXJyZW50IHBv
c2l0aW9uCisgKgorICogUmV0dXJucyB0aGUgZmlyc3QgZmVuY2UgZnJvbSBhbiB1bmxvY2tlZCBk
bWFfcmVzdiBvYmouCisgKi8KK3N0cnVjdCBkbWFfZmVuY2UgKmRtYV9yZXN2X2l0ZXJfZmlyc3Rf
dW5sb2NrZWQoc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcikKK3sKKwlyY3VfcmVhZF9sb2Nr
KCk7CisJZG8geworCQlkbWFfcmVzdl9pdGVyX3Jlc3RhcnRfdW5sb2NrZWQoY3Vyc29yKTsKKwkJ
ZG1hX3Jlc3ZfaXRlcl93YWxrX3VubG9ja2VkKGN1cnNvcik7CisJfSB3aGlsZSAocmVhZF9zZXFj
b3VudF9yZXRyeSgmY3Vyc29yLT5vYmotPnNlcSwgY3Vyc29yLT5zZXEpKTsKKwlyY3VfcmVhZF91
bmxvY2soKTsKKworCXJldHVybiBjdXJzb3ItPmZlbmNlOworfQorRVhQT1JUX1NZTUJPTChkbWFf
cmVzdl9pdGVyX2ZpcnN0X3VubG9ja2VkKTsKKworLyoqCisgKiBkbWFfcmVzdl9pdGVyX25leHRf
dW5sb2NrZWQgLSBuZXh0IGZlbmNlIGluIGFuIHVubG9ja2VkIGRtYV9yZXN2IG9iai4KKyAqIEBj
dXJzb3I6IHRoZSBjdXJzb3Igd2l0aCB0aGUgY3VycmVudCBwb3NpdGlvbgorICoKKyAqIFJldHVy
bnMgdGhlIG5leHQgZmVuY2UgZnJvbSBhbiB1bmxvY2tlZCBkbWFfcmVzdiBvYmouCisgKi8KK3N0
cnVjdCBkbWFfZmVuY2UgKmRtYV9yZXN2X2l0ZXJfbmV4dF91bmxvY2tlZChzdHJ1Y3QgZG1hX3Jl
c3ZfaXRlciAqY3Vyc29yKQoreworCWJvb2wgcmVzdGFydDsKKworCXJjdV9yZWFkX2xvY2soKTsK
KwljdXJzb3ItPmlzX3Jlc3RhcnRlZCA9IGZhbHNlOworCXJlc3RhcnQgPSByZWFkX3NlcWNvdW50
X3JldHJ5KCZjdXJzb3ItPm9iai0+c2VxLCBjdXJzb3ItPnNlcSk7CisJZG8geworCQlpZiAocmVz
dGFydCkKKwkJCWRtYV9yZXN2X2l0ZXJfcmVzdGFydF91bmxvY2tlZChjdXJzb3IpOworCQlkbWFf
cmVzdl9pdGVyX3dhbGtfdW5sb2NrZWQoY3Vyc29yKTsKKwkJcmVzdGFydCA9IHRydWU7CisJfSB3
aGlsZSAocmVhZF9zZXFjb3VudF9yZXRyeSgmY3Vyc29yLT5vYmotPnNlcSwgY3Vyc29yLT5zZXEp
KTsKKwlyY3VfcmVhZF91bmxvY2soKTsKKworCXJldHVybiBjdXJzb3ItPmZlbmNlOworfQorRVhQ
T1JUX1NZTUJPTChkbWFfcmVzdl9pdGVyX25leHRfdW5sb2NrZWQpOworCiAvKioKICAqIGRtYV9y
ZXN2X2NvcHlfZmVuY2VzIC0gQ29weSBhbGwgZmVuY2VzIGZyb20gc3JjIHRvIGRzdC4KICAqIEBk
c3Q6IHRoZSBkZXN0aW5hdGlvbiByZXNlcnZhdGlvbiBvYmplY3QKZGlmZiAtLWdpdCBhL2luY2x1
ZGUvbGludXgvZG1hLXJlc3YuaCBiL2luY2x1ZGUvbGludXgvZG1hLXJlc3YuaAppbmRleCA5MTAw
ZGQzZGMyMWYuLmJhZjc3YTU0MjM5MiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saW51eC9kbWEtcmVz
di5oCisrKyBiL2luY2x1ZGUvbGludXgvZG1hLXJlc3YuaApAQCAtMTQ5LDYgKzE0OSwxMDEgQEAg
c3RydWN0IGRtYV9yZXN2IHsKIAlzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdCBfX3JjdSAqZmVuY2U7CiB9
OwogCisvKioKKyAqIHN0cnVjdCBkbWFfcmVzdl9pdGVyIC0gY3VycmVudCBwb3NpdGlvbiBpbnRv
IHRoZSBkbWFfcmVzdiBmZW5jZXMKKyAqCisgKiBEb24ndCB0b3VjaCB0aGlzIGRpcmVjdGx5IGlu
IHRoZSBkcml2ZXIsIHVzZSB0aGUgYWNjZXNzb3IgZnVuY3Rpb24gaW5zdGVhZC4KKyAqLworc3Ry
dWN0IGRtYV9yZXN2X2l0ZXIgeworCS8qKiBAb2JqOiBUaGUgZG1hX3Jlc3Ygb2JqZWN0IHdlIGl0
ZXJhdGUgb3ZlciAqLworCXN0cnVjdCBkbWFfcmVzdiAqb2JqOworCisJLyoqIEBhbGxfZmVuY2Vz
OiBJZiBhbGwgZmVuY2VzIHNob3VsZCBiZSByZXR1cm5lZCAqLworCWJvb2wgYWxsX2ZlbmNlczsK
KworCS8qKiBAZmVuY2U6IHRoZSBjdXJyZW50bHkgaGFuZGxlZCBmZW5jZSAqLworCXN0cnVjdCBk
bWFfZmVuY2UgKmZlbmNlOworCisJLyoqIEBzZXE6IHNlcXVlbmNlIG51bWJlciB0byBjaGVjayBm
b3IgbW9kaWZpY2F0aW9ucyAqLworCXVuc2lnbmVkIGludCBzZXE7CisKKwkvKiogQGluZGV4OiBp
bmRleCBpbnRvIHRoZSBzaGFyZWQgZmVuY2VzICovCisJdW5zaWduZWQgaW50IGluZGV4OworCisJ
LyoqIEBmZW5jZXM6IHRoZSBzaGFyZWQgZmVuY2VzICovCisJc3RydWN0IGRtYV9yZXN2X2xpc3Qg
KmZlbmNlczsKKworCS8qKiBAaXNfcmVzdGFydGVkOiB0cnVlIGlmIHRoaXMgaXMgdGhlIGZpcnN0
IHJldHVybmVkIGZlbmNlICovCisJYm9vbCBpc19yZXN0YXJ0ZWQ7Cit9OworCitzdHJ1Y3QgZG1h
X2ZlbmNlICpkbWFfcmVzdl9pdGVyX2ZpcnN0X3VubG9ja2VkKHN0cnVjdCBkbWFfcmVzdl9pdGVy
ICpjdXJzb3IpOworc3RydWN0IGRtYV9mZW5jZSAqZG1hX3Jlc3ZfaXRlcl9uZXh0X3VubG9ja2Vk
KHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IpOworCisvKioKKyAqIGRtYV9yZXN2X2l0ZXJf
YmVnaW4gLSBpbml0aWFsaXplIGEgZG1hX3Jlc3ZfaXRlciBvYmplY3QKKyAqIEBjdXJzb3I6IFRo
ZSBkbWFfcmVzdl9pdGVyIG9iamVjdCB0byBpbml0aWFsaXplCisgKiBAb2JqOiBUaGUgZG1hX3Jl
c3Ygb2JqZWN0IHdoaWNoIHdlIHdhbnQgdG8gaXRlcmF0b3Igb3ZlcgorICogQGFsbF9mZW5jZXM6
IElmIGFsbCBmZW5jZXMgc2hvdWxkIGJlIHJldHVybmVkIG9yIGp1c3QgdGhlIGV4Y2x1c2l2ZSBv
bmUKKyAqLworc3RhdGljIGlubGluZSB2b2lkIGRtYV9yZXN2X2l0ZXJfYmVnaW4oc3RydWN0IGRt
YV9yZXN2X2l0ZXIgKmN1cnNvciwKKwkJCQkgICAgICAgc3RydWN0IGRtYV9yZXN2ICpvYmosCisJ
CQkJICAgICAgIGJvb2wgYWxsX2ZlbmNlcykKK3sKKwljdXJzb3ItPm9iaiA9IG9iajsKKwljdXJz
b3ItPmFsbF9mZW5jZXMgPSBhbGxfZmVuY2VzOworCWN1cnNvci0+ZmVuY2UgPSBOVUxMOworfQor
CisvKioKKyAqIGRtYV9yZXN2X2l0ZXJfZW5kIC0gY2xlYW51cCBhIGRtYV9yZXN2X2l0ZXIgb2Jq
ZWN0CisgKiBAY3Vyc29yOiB0aGUgZG1hX3Jlc3ZfaXRlciBvYmplY3Qgd2hpY2ggc2hvdWxkIGJl
IGNsZWFuZWQgdXAKKyAqCisgKiBNYWtlIHN1cmUgdGhhdCB0aGUgcmVmZXJlbmNlIHRvIHRoZSBm
ZW5jZSBpbiB0aGUgY3Vyc29yIGlzIHByb3Blcmx5CisgKiBkcm9wcGVkLgorICovCitzdGF0aWMg
aW5saW5lIHZvaWQgZG1hX3Jlc3ZfaXRlcl9lbmQoc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNv
cikKK3sKKwlkbWFfZmVuY2VfcHV0KGN1cnNvci0+ZmVuY2UpOworfQorCisvKioKKyAqIGRtYV9y
ZXN2X2l0ZXJfaXNfZXhjbHVzaXZlIC0gdGVzdCBpZiB0aGUgY3VycmVudCBmZW5jZSBpcyB0aGUg
ZXhjbHVzaXZlIG9uZQorICogQGN1cnNvcjogdGhlIGN1cnNvciBvZiB0aGUgY3VycmVudCBwb3Np
dGlvbgorICoKKyAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudGx5IHJldHVybmVkIGZlbmNl
IGlzIHRoZSBleGNsdXNpdmUgb25lLgorICovCitzdGF0aWMgaW5saW5lIGJvb2wgZG1hX3Jlc3Zf
aXRlcl9pc19leGNsdXNpdmUoc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcikKK3sKKwlyZXR1
cm4gY3Vyc29yLT5pbmRleCA9PSAtMTsKK30KKworLyoqCisgKiBkbWFfcmVzdl9pdGVyX2lzX3Jl
c3RhcnRlZCAtIHRlc3QgaWYgdGhpcyBpcyB0aGUgZmlyc3QgZmVuY2UgYWZ0ZXIgYSByZXN0YXJ0
CisgKiBAY3Vyc29yOiB0aGUgY3Vyc29yIHdpdGggdGhlIGN1cnJlbnQgcG9zaXRpb24KKyAqCisg
KiBSZXR1cm4gdHJ1ZSBpZiB0aGlzIGlzIHRoZSBmaXJzdCBmZW5jZSBpbiBhbiBpbnRlcmF0aW9u
IGFmdGVyIGEgcmVzdGFydC4KKyAqLworc3RhdGljIGlubGluZSBib29sIGRtYV9yZXN2X2l0ZXJf
aXNfcmVzdGFydGVkKHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IpCit7CisJcmV0dXJuIGN1
cnNvci0+aXNfcmVzdGFydGVkOworfQorCisvKioKKyAqIGRtYV9yZXN2X2Zvcl9lYWNoX2ZlbmNl
X3VubG9ja2VkIC0gdW5sb2NrZWQgZmVuY2UgaXRlcmF0b3IKKyAqIEBjdXJzb3I6IGEgc3RydWN0
IGRtYV9yZXN2X2l0ZXIgcG9pbnRlcgorICogQGZlbmNlOiB0aGUgY3VycmVudCBmZW5jZQorICoK
KyAqIEl0ZXJhdGUgb3ZlciB0aGUgZmVuY2VzIGluIGEgc3RydWN0IGRtYV9yZXN2IG9iamVjdCB3
aXRob3V0IGhvbGRpbmcgdGhlCisgKiAmZG1hX3Jlc3YubG9jayBhbmQgdXNpbmcgUkNVIGluc3Rl
YWQuIFRoZSBjdXJzb3IgbmVlZHMgdG8gYmUgaW5pdGlhbGl6ZWQKKyAqIHdpdGggZG1hX3Jlc3Zf
aXRlcl9iZWdpbigpIGFuZCBjbGVhbmVkIHVwIHdpdGggZG1hX3Jlc3ZfaXRlcl9lbmQoKS4gSW5z
aWRlCisgKiB0aGUgaXRlcmF0b3IgYSByZWZlcmVuY2UgdG8gdGhlIGRtYV9mZW5jZSBpcyBob2xk
IGFuZCB0aGUgUkNVIGxvY2sgZHJvcHBlZC4KKyAqIFdoZW4gdGhlIGRtYV9yZXN2IGlzIG1vZGlm
aWVkIHRoZSBpdGVyYXRpb24gc3RhcnRzIG92ZXIgYWdhaW4uCisgKi8KKyNkZWZpbmUgZG1hX3Jl
c3ZfZm9yX2VhY2hfZmVuY2VfdW5sb2NrZWQoY3Vyc29yLCBmZW5jZSkJCQlcCisJZm9yIChmZW5j
ZSA9IGRtYV9yZXN2X2l0ZXJfZmlyc3RfdW5sb2NrZWQoY3Vyc29yKTsJCVwKKwkgICAgIGZlbmNl
OyBmZW5jZSA9IGRtYV9yZXN2X2l0ZXJfbmV4dF91bmxvY2tlZChjdXJzb3IpKQorCiAjZGVmaW5l
IGRtYV9yZXN2X2hlbGQob2JqKSBsb2NrZGVwX2lzX2hlbGQoJihvYmopLT5sb2NrLmJhc2UpCiAj
ZGVmaW5lIGRtYV9yZXN2X2Fzc2VydF9oZWxkKG9iaikgbG9ja2RlcF9hc3NlcnRfaGVsZCgmKG9i
aiktPmxvY2suYmFzZSkKIAotLSAKMi4yNS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdApMaW5hcm8tbW0t
c2lnQGxpc3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5hcm8ub3JnL21haWxtYW4vbGlz
dGluZm8vbGluYXJvLW1tLXNpZwo=
