Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 2352746BB61
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  7 Dec 2021 13:35:46 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 027D862D2A
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  7 Dec 2021 12:35:44 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id EE91262DC2; Tue,  7 Dec 2021 12:35:37 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id C411762079;
	Tue,  7 Dec 2021 12:35:32 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id B32E462D51
 for <linaro-mm-sig@lists.linaro.org>; Tue,  7 Dec 2021 12:34:54 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 51E0B62D3A; Tue,  7 Dec 2021 12:34:43 +0000 (UTC)
Received: from mail-wm1-f49.google.com (mail-wm1-f49.google.com
 [209.85.128.49])
 by lists.linaro.org (Postfix) with ESMTPS id DAFEB60C02
 for <linaro-mm-sig@lists.linaro.org>; Tue,  7 Dec 2021 12:34:39 +0000 (UTC)
Received: by mail-wm1-f49.google.com with SMTP id 133so10649860wme.0
 for <linaro-mm-sig@lists.linaro.org>; Tue, 07 Dec 2021 04:34:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=+4HXC95y/d0j7sepYGRx+5Mc5uOBoY08wOs9UrZMne0=;
 b=cRk+8Sczl131qUGv+2RcYAPOmDlgxpsGJ5WlMd008CoqkRStxnVrKwF27sgIJfmyHP
 b9+yU7T2f/pnh2sJmAvlVtp8WBtW5X2qBD9Fy6lq6/Q9zaO1/YeRVlMTbNQYg4mfjPp7
 KXwSnk63ysTCsRC/9PRpOUceDmBKjimYgGUzcl3dLu6uEyYADls098yGH/C0S4JXRf+h
 gJMEdCjeY7gI3DXB4nGmZNxTZHVQCpvfULovSFVUnLALaUvKeg7odiG63GeZXi76wvuk
 CNqc27IrdIs5DaT/k/LPccMZiNwwZwHRCXGV6eHDkTFLYFBnSqlQwKDT8l+JbotxOoS3
 ntRQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=+4HXC95y/d0j7sepYGRx+5Mc5uOBoY08wOs9UrZMne0=;
 b=b1VlNJ9WlFRMfPfXwUL99+ZEdpAfXBm9uoWO05KijFmuGrfbMAYjsN++MV/+47dOJ7
 VH4C1chrEb1HP5xYwN5rtutQUnnITTcpAtq2Qqd3eVhCo6AxUxsbevVvrrlG7lkS4jZe
 08pLq/7oVvhxVngn6/qXwCfl3L97x2Wh4F9SqtUrSYT8lLYSDVXoMxshWeLmD36x4BYf
 PwJ4AfveoXOUYYqHVDs2fvbyqar5E+QgAiRgEoaBdFwvq6tH4c5UPAhokS+CnXvVfJMF
 zz8O5wLge9I9vg3QAQQ3VSIRn0znuMH2+3OX4p96Aqc6/0R1ZdypucX7XgCMdb6P2PDA
 Eqvg==
X-Gm-Message-State: AOAM531EjmJMKqZySbujNwxxzZdKYEvaz54oaWME2eVKSID6ymoAAv42
 DOqgX0u0U6zuyQcAUlM5b43NL0/6JIN/Gg==
X-Google-Smtp-Source: ABdhPJziRGTqN+tn2ljVhaHUDiBG1+onDlzsEMetEN5GlgEDbwZg92ALeB4Ul15gdPTj+M3ZZhYyRQ==
X-Received: by 2002:a05:600c:4e8f:: with SMTP id
 f15mr6816431wmq.76.1638880478842; 
 Tue, 07 Dec 2021 04:34:38 -0800 (PST)
Received: from abel.fritz.box (p57b0bff8.dip0.t-ipconnect.de. [87.176.191.248])
 by smtp.gmail.com with ESMTPSA id f19sm2802203wmq.34.2021.12.07.04.34.37
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 07 Dec 2021 04:34:38 -0800 (PST)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: daniel@ffwll.ch, dri-devel@lists.freedesktop.org,
 linux-media@vger.kernel.org, linaro-mm-sig@lists.linaro.org
Date: Tue,  7 Dec 2021 13:34:07 +0100
Message-Id: <20211207123411.167006-21-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20211207123411.167006-1-christian.koenig@amd.com>
References: <20211207123411.167006-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: [Linaro-mm-sig] [PATCH 20/24] dma-buf: add DMA_RESV_USAGE_KERNEL
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

QWRkIGFuIHVzYWdlIGZvciBrZXJuZWwgc3VibWlzc2lvbnMuIFdhaXRpbmcgZm9yIHRob3NlCmFy
ZSBtYW5kYXRvcnkgZm9yIGR5bmFtaWMgRE1BLWJ1ZnMuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3Rp
YW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9kbWEtYnVm
L3N0LWRtYS1yZXN2LmMgICAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X29iamVjdC5jICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3V2ZC5jICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYv
ZXRuYXZpdl9nZW1fc3VibWl0LmMgfCAgNiArKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9jbGZsdXNoLmMgIHwgIDIgKy0KIGRyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25v
dXZlYXVfYm8uYyAgICAgICAgIHwgIDQgKystLQogZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRl
b25fdXZkLmMgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYyAg
ICAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5j
ICAgICAgICAgICAgfCAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9iby5j
ICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9yZXNvdXJj
ZS5jICAgICB8ICAyICstCiBkcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtX2RtYWJ1Zi5jICAg
ICAgICB8ICAyICstCiBpbmNsdWRlL2xpbnV4L2RtYS1yZXN2LmggICAgICAgICAgICAgICAgICAg
ICB8IDIyICsrKysrKysrKysrKysrKysrKysrCiAxMyBmaWxlcyBjaGFuZ2VkLCAzOSBpbnNlcnRp
b25zKCspLCAxNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2RtYS1idWYvc3Qt
ZG1hLXJlc3YuYyBiL2RyaXZlcnMvZG1hLWJ1Zi9zdC1kbWEtcmVzdi5jCmluZGV4IGQwZjdjMmJm
ZDRmMC4uMDYyYjU3ZDYzZmE2IDEwMDY0NAotLS0gYS9kcml2ZXJzL2RtYS1idWYvc3QtZG1hLXJl
c3YuYworKysgYi9kcml2ZXJzL2RtYS1idWYvc3QtZG1hLXJlc3YuYwpAQCAtMjk2LDcgKzI5Niw3
IEBAIGludCBkbWFfcmVzdih2b2lkKQogCWludCByOwogCiAJc3Bpbl9sb2NrX2luaXQoJmZlbmNl
X2xvY2spOwotCWZvciAodXNhZ2UgPSBETUFfUkVTVl9VU0FHRV9XUklURTsgdXNhZ2UgPD0gRE1B
X1JFU1ZfVVNBR0VfUkVBRDsKKwlmb3IgKHVzYWdlID0gRE1BX1JFU1ZfVVNBR0VfS0VSTkVMOyB1
c2FnZSA8PSBETUFfUkVTVl9VU0FHRV9SRUFEOwogCSAgICAgKyt1c2FnZSkgewogCQlyID0gc3Vi
dGVzdHModGVzdHMsICh2b2lkICopKHVuc2lnbmVkIGxvbmcpdXNhZ2UpOwogCQlpZiAocikKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYyBiL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYwppbmRleCBlYWExOTE1NDU1
MWMuLmE0MGVkZTliY2NkMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X29iamVjdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9v
YmplY3QuYwpAQCAtNzY0LDcgKzc2NCw3IEBAIGludCBhbWRncHVfYm9fa21hcChzdHJ1Y3QgYW1k
Z3B1X2JvICpibywgdm9pZCAqKnB0cikKIAkJcmV0dXJuIDA7CiAJfQogCi0JciA9IGRtYV9yZXN2
X3dhaXRfdGltZW91dChiby0+dGJvLmJhc2UucmVzdiwgRE1BX1JFU1ZfVVNBR0VfV1JJVEUsCisJ
ciA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChiby0+dGJvLmJhc2UucmVzdiwgRE1BX1JFU1ZfVVNB
R0VfS0VSTkVMLAogCQkJCSAgZmFsc2UsIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsKIAlpZiAociA8
IDApCiAJCXJldHVybiByOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3V2ZC5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3V2ZC5jCmlu
ZGV4IDMzZGViMGRmNjJmZC4uOWUxMDIwODBkYWQ5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfdXZkLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3V2ZC5jCkBAIC0xMTYzLDcgKzExNjMsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV91
dmRfc2VuZF9tc2coc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nLCBzdHJ1Y3QgYW1kZ3B1X2JvICpi
bywKIAogCWlmIChkaXJlY3QpIHsKIAkJciA9IGRtYV9yZXN2X3dhaXRfdGltZW91dChiby0+dGJv
LmJhc2UucmVzdiwKLQkJCQkJICBETUFfUkVTVl9VU0FHRV9XUklURSwgZmFsc2UsCisJCQkJCSAg
RE1BX1JFU1ZfVVNBR0VfS0VSTkVMLCBmYWxzZSwKIAkJCQkJICBtc2Vjc190b19qaWZmaWVzKDEw
KSk7CiAJCWlmIChyID09IDApCiAJCQlyID0gLUVUSU1FRE9VVDsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jIGIvZHJpdmVycy9ncHUvZHJt
L2V0bmF2aXYvZXRuYXZpdl9nZW1fc3VibWl0LmMKaW5kZXggMmQ3N2U0NjllZjNjLi5hMmY2Mjdh
ZjNjZTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1
Ym1pdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5j
CkBAIC0xODUsOSArMTg1LDExIEBAIHN0YXRpYyBpbnQgc3VibWl0X2ZlbmNlX3N5bmMoc3RydWN0
IGV0bmF2aXZfZ2VtX3N1Ym1pdCAqc3VibWl0KQogCQkJcmV0dXJuIHJldDsKIAogCQlpZiAoc3Vi
bWl0LT5mbGFncyAmIEVUTkFfU1VCTUlUX05PX0lNUExJQ0lUKQotCQkJY29udGludWU7CisJCQl1
c2FnZSA9IERNQV9SRVNWX1VTQUdFX0tFUk5FTDsKKwkJZWxzZQorCQkJdXNhZ2UgPSBkbWFfcmVz
dl91c2FnZV9ydyhiby0+ZmxhZ3MgJgorCQkJCQkJICBFVE5BX1NVQk1JVF9CT19XUklURSk7CiAK
LQkJdXNhZ2UgPSBkbWFfcmVzdl91c2FnZV9ydyhiby0+ZmxhZ3MgJiBFVE5BX1NVQk1JVF9CT19X
UklURSk7CiAJCXJldCA9IGRtYV9yZXN2X2dldF9mZW5jZXMocm9iaiwgdXNhZ2UsICZiby0+bnJf
c2hhcmVkLAogCQkJCQkgICZiby0+c2hhcmVkKTsKIAkJaWYgKHJldCkKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jbGZsdXNoLmMgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1fY2xmbHVzaC5jCmluZGV4IGU3MGZiNjViYjU0Zi4uYjkyODFj
YTk2ZWNlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fY2xm
bHVzaC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9jbGZsdXNoLmMK
QEAgLTEwOSw3ICsxMDksNyBAQCBib29sIGk5MTVfZ2VtX2NsZmx1c2hfb2JqZWN0KHN0cnVjdCBk
cm1faTkxNV9nZW1fb2JqZWN0ICpvYmosCiAJCQkJCQlpOTE1X2ZlbmNlX3RpbWVvdXQodG9faTkx
NShvYmotPmJhc2UuZGV2KSksCiAJCQkJCQlJOTE1X0ZFTkNFX0dGUCk7CiAJCWRtYV9yZXN2X2Fk
ZF9mZW5jZShvYmotPmJhc2UucmVzdiwgJmNsZmx1c2gtPmJhc2UuZG1hLAotCQkJCSAgIERNQV9S
RVNWX1VTQUdFX1dSSVRFKTsKKwkJCQkgICBETUFfUkVTVl9VU0FHRV9LRVJORUwpOwogCQlkbWFf
ZmVuY2Vfd29ya19jb21taXQoJmNsZmx1c2gtPmJhc2UpOwogCX0gZWxzZSBpZiAob2JqLT5tbS5w
YWdlcykgewogCQlfX2RvX2NsZmx1c2gob2JqKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2Ry
bS9ub3V2ZWF1L25vdXZlYXVfYm8uYyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVf
Ym8uYwppbmRleCAwNTA3NmU1MzBlN2QuLjEzZGViNmM3MGJhNiAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9ub3V2
ZWF1L25vdXZlYXVfYm8uYwpAQCAtOTYyLDEwICs5NjIsMTAgQEAgbm91dmVhdV9ib192bV9jbGVh
bnVwKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJc3RydWN0IGRtYV9mZW5jZSAqZmVu
Y2U7CiAJaW50IHJldDsKIAotCXJldCA9IGRtYV9yZXN2X2dldF9zaW5nbGV0b24oYm8tPmJhc2Uu
cmVzdiwgRE1BX1JFU1ZfVVNBR0VfV1JJVEUsCisJcmV0ID0gZG1hX3Jlc3ZfZ2V0X3NpbmdsZXRv
bihiby0+YmFzZS5yZXN2LCBETUFfUkVTVl9VU0FHRV9LRVJORUwsCiAJCQkJICAgICAmZmVuY2Up
OwogCWlmIChyZXQpCi0JCWRtYV9yZXN2X3dhaXRfdGltZW91dChiby0+YmFzZS5yZXN2LCBETUFf
UkVTVl9VU0FHRV9XUklURSwKKwkJZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGJvLT5iYXNlLnJlc3Ys
IERNQV9SRVNWX1VTQUdFX0tFUk5FTCwKIAkJCQkgICAgICBmYWxzZSwgTUFYX1NDSEVEVUxFX1RJ
TUVPVVQpOwogCiAJbnYxMF9ib19wdXRfdGlsZV9yZWdpb24oZGV2LCAqb2xkX3RpbGUsIGZlbmNl
KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3V2ZC5jIGIvZHJp
dmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fdXZkLmMKaW5kZXggNDAwMGFkMmYzOWJhLi40ODhl
Nzg4ODlkZDYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3V2ZC5j
CisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX3V2ZC5jCkBAIC00NzgsNyArNDc4
LDcgQEAgc3RhdGljIGludCByYWRlb25fdXZkX2NzX21zZyhzdHJ1Y3QgcmFkZW9uX2NzX3BhcnNl
ciAqcCwgc3RydWN0IHJhZGVvbl9ibyAqYm8sCiAJCXJldHVybiAtRUlOVkFMOwogCX0KIAotCXIg
PSBkbWFfcmVzdl93YWl0X3RpbWVvdXQoYm8tPnRiby5iYXNlLnJlc3YsIERNQV9SRVNWX1VTQUdF
X1dSSVRFLAorCXIgPSBkbWFfcmVzdl93YWl0X3RpbWVvdXQoYm8tPnRiby5iYXNlLnJlc3YsIERN
QV9SRVNWX1VTQUdFX0tFUk5FTCwKIAkJCQkgIGZhbHNlLCBNQVhfU0NIRURVTEVfVElNRU9VVCk7
CiAJaWYgKHIgPD0gMCkgewogCQlEUk1fRVJST1IoIkZhaWxlZCB3YWl0aW5nIGZvciBVVkQgbWVz
c2FnZSAoJWQpIVxuIiwgcik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9i
by5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYwppbmRleCBmNTJiNDUxZTI2ZGMuLmFk
ODNmNDJmYzllZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jCkBAIC03NjIsNyArNzYyLDcgQEAgc3RhdGlj
IGludCB0dG1fYm9fYWRkX21vdmVfZmVuY2Uoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywK
IAkJcmV0dXJuIHJldDsKIAl9CiAKLQlkbWFfcmVzdl9hZGRfZmVuY2UoYm8tPmJhc2UucmVzdiwg
ZmVuY2UsIERNQV9SRVNWX1VTQUdFX1dSSVRFKTsKKwlkbWFfcmVzdl9hZGRfZmVuY2UoYm8tPmJh
c2UucmVzdiwgZmVuY2UsIERNQV9SRVNWX1VTQUdFX0tFUk5FTCk7CiAKIAlyZXQgPSBkbWFfcmVz
dl9yZXNlcnZlX2ZlbmNlcyhiby0+YmFzZS5yZXN2LCAxKTsKIAlpZiAodW5saWtlbHkocmV0KSkg
ewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5jIGIvZHJpdmVy
cy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5jCmluZGV4IGU1NmUxNmE3Zjg4Ni4uYjljZmI2MmM0
YjZlIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGlsLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm9fdXRpbC5jCkBAIC01MDQsNyArNTA0LDcgQEAgc3Rh
dGljIGludCB0dG1fYm9fbW92ZV90b19naG9zdChzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJv
LAogCQlyZXR1cm4gcmV0OwogCiAJZG1hX3Jlc3ZfYWRkX2ZlbmNlKCZnaG9zdF9vYmotPmJhc2Uu
X3Jlc3YsIGZlbmNlLAotCQkJICAgRE1BX1JFU1ZfVVNBR0VfV1JJVEUpOworCQkJICAgRE1BX1JF
U1ZfVVNBR0VfS0VSTkVMKTsKIAogCS8qKgogCSAqIElmIHdlJ3JlIG5vdCBtb3ZpbmcgdG8gZml4
ZWQgbWVtb3J5LCB0aGUgVFRNIG9iamVjdApAQCAtNTU5LDcgKzU1OSw3IEBAIGludCB0dG1fYm9f
bW92ZV9hY2NlbF9jbGVhbnVwKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJc3RydWN0
IHR0bV9yZXNvdXJjZV9tYW5hZ2VyICptYW4gPSB0dG1fbWFuYWdlcl90eXBlKGJkZXYsIG5ld19t
ZW0tPm1lbV90eXBlKTsKIAlpbnQgcmV0ID0gMDsKIAotCWRtYV9yZXN2X2FkZF9mZW5jZShiby0+
YmFzZS5yZXN2LCBmZW5jZSwgRE1BX1JFU1ZfVVNBR0VfV1JJVEUpOworCWRtYV9yZXN2X2FkZF9m
ZW5jZShiby0+YmFzZS5yZXN2LCBmZW5jZSwgRE1BX1JFU1ZfVVNBR0VfS0VSTkVMKTsKIAlpZiAo
IWV2aWN0KQogCQlyZXQgPSB0dG1fYm9fbW92ZV90b19naG9zdChibywgZmVuY2UsIG1hbi0+dXNl
X3R0KTsKIAllbHNlIGlmICghZnJvbS0+dXNlX3R0ICYmIHBpcGVsaW5lKQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfYm8uYyBiL2RyaXZlcnMvZ3B1L2RybS92bXdn
Zngvdm13Z2Z4X2JvLmMKaW5kZXggYTc3OTIxYTQ0YTcyLi5mODcxZGRiNjI2MDYgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X2JvLmMKKysrIGIvZHJpdmVycy9ncHUv
ZHJtL3Ztd2dmeC92bXdnZnhfYm8uYwpAQCAtMTA2NSw3ICsxMDY1LDcgQEAgdm9pZCB2bXdfYm9f
ZmVuY2Vfc2luZ2xlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJcmV0ID0gZG1hX3Jl
c3ZfcmVzZXJ2ZV9mZW5jZXMoYm8tPmJhc2UucmVzdiwgMSk7CiAJaWYgKCFyZXQpCiAJCWRtYV9y
ZXN2X2FkZF9mZW5jZShiby0+YmFzZS5yZXN2LCAmZmVuY2UtPmJhc2UsCi0JCQkJICAgRE1BX1JF
U1ZfVVNBR0VfV1JJVEUpOworCQkJCSAgIERNQV9SRVNWX1VTQUdFX0tFUk5FTCk7CiAJZWxzZQog
CQkvKiBMYXN0IHJlc29ydCBmYWxsYmFjayB3aGVuIHdlIGFyZSBPT00gKi8KIAkJZG1hX2ZlbmNl
X3dhaXQoJmZlbmNlLT5iYXNlLCBmYWxzZSk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
dm13Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jIGIvZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhf
cmVzb3VyY2UuYwppbmRleCAyOTQ1MmUxNTA0MjQuLjllM2RjYmI1NzNlNyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3Ztd2dmeC92bXdnZnhfcmVzb3VyY2UuYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vdm13Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jCkBAIC0xMTcwLDcgKzExNzAsNyBAQCBpbnQg
dm13X3Jlc291cmNlc19jbGVhbihzdHJ1Y3Qgdm13X2J1ZmZlcl9vYmplY3QgKnZibywgcGdvZmZf
dCBzdGFydCwKIAkJCWRtYV9mZW5jZV9wdXQoYm8tPm1vdmluZyk7CiAKIAkJcmV0dXJuIGRtYV9y
ZXN2X2dldF9zaW5nbGV0b24oYm8tPmJhc2UucmVzdiwKLQkJCQkJICAgICAgRE1BX1JFU1ZfVVNB
R0VfV1JJVEUsCisJCQkJCSAgICAgIERNQV9SRVNWX1VTQUdFX0tFUk5FTCwKIAkJCQkJICAgICAg
JmJvLT5tb3ZpbmcpOwogCX0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9pbmZpbmliYW5kL2NvcmUv
dW1lbV9kbWFidWYuYyBiL2RyaXZlcnMvaW5maW5pYmFuZC9jb3JlL3VtZW1fZG1hYnVmLmMKaW5k
ZXggZjk5MDFkMjczYjhlLi5mY2U4MGE0YTUxNDcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvaW5maW5p
YmFuZC9jb3JlL3VtZW1fZG1hYnVmLmMKKysrIGIvZHJpdmVycy9pbmZpbmliYW5kL2NvcmUvdW1l
bV9kbWFidWYuYwpAQCAtNjgsNyArNjgsNyBAQCBpbnQgaWJfdW1lbV9kbWFidWZfbWFwX3BhZ2Vz
KHN0cnVjdCBpYl91bWVtX2RtYWJ1ZiAqdW1lbV9kbWFidWYpCiAJICogdGhlIG1pZ3JhdGlvbi4K
IAkgKi8KIAlyZXR1cm4gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KHVtZW1fZG1hYnVmLT5hdHRhY2gt
PmRtYWJ1Zi0+cmVzdiwKLQkJCQkgICAgIERNQV9SRVNWX1VTQUdFX1dSSVRFLAorCQkJCSAgICAg
RE1BX1JFU1ZfVVNBR0VfS0VSTkVMLAogCQkJCSAgICAgZmFsc2UsIE1BWF9TQ0hFRFVMRV9USU1F
T1VUKTsKIH0KIEVYUE9SVF9TWU1CT0woaWJfdW1lbV9kbWFidWZfbWFwX3BhZ2VzKTsKZGlmZiAt
LWdpdCBhL2luY2x1ZGUvbGludXgvZG1hLXJlc3YuaCBiL2luY2x1ZGUvbGludXgvZG1hLXJlc3Yu
aAppbmRleCA0ZjNhNmFiZjQzYzQuLjI5ZDc5OTk5MTQ5NiAxMDA2NDQKLS0tIGEvaW5jbHVkZS9s
aW51eC9kbWEtcmVzdi5oCisrKyBiL2luY2x1ZGUvbGludXgvZG1hLXJlc3YuaApAQCAtNTQsOCAr
NTQsMzAgQEAgc3RydWN0IGRtYV9yZXN2X2xpc3Q7CiAgKgogICogVGhpcyBlbnVtIGRlc2NyaWJl
cyB0aGUgZGlmZmVyZW50IHVzZSBjYXNlcyBmb3IgYSBkbWFfcmVzdiBvYmplY3QgYW5kCiAgKiBj
b250cm9scyB3aGljaCBmZW5jZXMgYXJlIHJldHVybmVkIHdoZW4gcXVlcmllZC4KKyAqCisgKiBB
biBpbXBvcnRhbnQgZmFjdCBpcyB0aGF0IHRoZXJlIGlzIHRoZSBvcmRlciBLRVJORUw8V1JJVEU8
UkVBRCBhbmQKKyAqIHdoZW4gdGhlIGRtYV9yZXN2IG9iamVjdCBpcyBhc2tlZCBmb3IgZmVuY2Vz
IGZvciBvbmUgdXNlIGNhc2UgdGhlIGZlbmNlcworICogZm9yIHRoZSBsb3dlciB1c2UgY2FzZSBh
cmUgcmV0dXJuZWQgYXMgd2VsbC4KKyAqCisgKiBGb3IgZXhhbXBsZSB3aGVuIGFza2luZyBmb3Ig
V1JJVEUgZmVuY2VzIHRoZW4gdGhlIEtFUk5FTCBmZW5jZXMgYXJlIHJldHVybmVkCisgKiBhcyB3
ZWxsLiBTaW1pbGFyIHdoZW4gYXNrZWQgZm9yIFJFQUQgZmVuY2VzIHRoZW4gYm90aCBXUklURSBh
bmQgS0VSTkVMCisgKiBmZW5jZXMgYXJlIHJldHVybmVkIGFzIHdlbGwuCiAgKi8KIGVudW0gZG1h
X3Jlc3ZfdXNhZ2UgeworCS8qKgorCSAqIEBETUFfUkVTVl9VU0FHRV9LRVJORUw6IEZvciBpbiBr
ZXJuZWwgbWVtb3J5IG1hbmFnZW1lbnQgb25seS4KKwkgKgorCSAqIFRoaXMgc2hvdWxkIG9ubHkg
YmUgdXNlZCBmb3IgdGhpbmdzIGxpa2UgY29weWluZyBvciBjbGVhcmluZyBtZW1vcnkKKwkgKiB3
aXRoIGEgRE1BIGhhcmR3YXJlIGVuZ2luZSBmb3IgdGhlIHB1cnBvc2Ugb2Yga2VybmVsIG1lbW9y
eQorCSAqIG1hbmFnZW1lbnQuCisJICoKKyAgICAgICAgICogRHJpdmVycyAqYWx3YXlzKiBuZWVk
IHRvIHdhaXQgZm9yIHRob3NlIGZlbmNlcyBiZWZvcmUgYWNjZXNzaW5nIHRoZQorCSAqIHJlc291
cmNlIHByb3RlY3RlZCBieSB0aGUgZG1hX3Jlc3Ygb2JqZWN0LiBUaGUgb25seSBleGNlcHRpb24g
Zm9yCisJICogdGhhdCBpcyB3aGVuIHRoZSByZXNvdXJjZSBpcyBrbm93biB0byBiZSBsb2NrZWQg
ZG93biBpbiBwbGFjZSBieQorCSAqIHBpbm5pbmcgaXQgcHJldmlvdXNseS4KKwkgKi8KKwlETUFf
UkVTVl9VU0FHRV9LRVJORUwsCisKIAkvKioKIAkgKiBARE1BX1JFU1ZfVVNBR0VfV1JJVEU6IElt
cGxpY2l0IHdyaXRlIHN5bmNocm9uaXphdGlvbi4KIAkgKgotLSAKMi4yNS4xCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxp
bmcgbGlzdApMaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5h
cm8ub3JnL21haWxtYW4vbGlzdGluZm8vbGluYXJvLW1tLXNpZwo=
