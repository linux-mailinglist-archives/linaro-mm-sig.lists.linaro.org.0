Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 11170382F44
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 17 May 2021 16:14:15 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id C2ACF61117
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 17 May 2021 14:14:11 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 6BFDA6114E; Mon, 17 May 2021 14:14:05 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 578FD60B8C;
	Mon, 17 May 2021 14:14:00 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 412FB608ED
 for <linaro-mm-sig@lists.linaro.org>; Mon, 17 May 2021 14:11:42 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 378E660B99; Mon, 17 May 2021 14:11:42 +0000 (UTC)
Received: from mail-ed1-f48.google.com (mail-ed1-f48.google.com
 [209.85.208.48])
 by lists.linaro.org (Postfix) with ESMTPS id 1168D60B57
 for <linaro-mm-sig@lists.linaro.org>; Mon, 17 May 2021 14:11:40 +0000 (UTC)
Received: by mail-ed1-f48.google.com with SMTP id a25so7056700edr.12
 for <linaro-mm-sig@lists.linaro.org>; Mon, 17 May 2021 07:11:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=xVnzq+FG4lVKbHQyai4fpjeHfi8rUlFsLnhntMGqNTg=;
 b=TVJ+Y/LLAgQRSjyvXPA06vHtOkAFz+Oora9V9SRD8F8nAVFQpuW92b1CwaZiLum9Vu
 gF1krQ4O+Ns6dcVlk98m/SMeFguZEM/wQUM+5CwHaZFO6jExs6AwF/b5gaN0q89dtagz
 iPWERTjyPxFwfiNsQIPhFP42cE51eJuVyI0nA1D9t1U4mtjp9PpHn0qE618gdsLH3n68
 6UosDIqS5Fwrk/mVdvlEHThliKM16aj7usZG6mveKP9n3LYsnzv7SrKguZOEQOoRZDe3
 3xdQK6d6bi5bE/t1Bt5sJXlvyELSL9SpaXvFsPza9LTtTK6vBESvmEshJkgiuauPU59B
 sovA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=xVnzq+FG4lVKbHQyai4fpjeHfi8rUlFsLnhntMGqNTg=;
 b=tvQOABNA5UNedbvnBtPH0IVvCAn9I9TiwqamMDrJnJ2QJmuAUiYyCQSoO3fmnwab13
 1NqzWOM6y74JdefqZ3Y3DWbFi19bCNh35dIfFrt0pxvTLfQg6BcqMkm6sbBdT9iUh78j
 GCJuaEGHFxFUbqNuPz2mu8R+dPWKJmlMe2Zmv5j91Zd36YYUddpYsFrbaWj3iXkR3yPB
 183aZgItfi+zvBt+VP86XCGfkfRekxDPjRPg8IxVRRWoYyO6k7jQGD17lHe1u0hW+Ntr
 sTkM/vcQHBWyoVUhsJUZTR8WffA6XsN7f6BGVF8L1IUZpe3ezD7SLMeNUiM6/DlxcV9W
 DxiA==
X-Gm-Message-State: AOAM530/o7iRaBorBqc3kyFQoQf0LtrlwFfVKL8JOf4te72a6j0zrXo9
 kisYLAUz3fBdzf6vou4AFCk=
X-Google-Smtp-Source: ABdhPJyDCudam7RMS26MMQxWkIEqI5Hq6SHj9DhD+eXpK/JpYhqXZiOf3nPutVEWGlFEFh5Kp9GfEA==
X-Received: by 2002:aa7:d853:: with SMTP id f19mr204034eds.371.1621260699169; 
 Mon, 17 May 2021 07:11:39 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:1df4:c5b6:b8fd:3c4b])
 by smtp.gmail.com with ESMTPSA id b9sm2419624edt.71.2021.05.17.07.11.38
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 17 May 2021 07:11:38 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org,
	linaro-mm-sig@lists.linaro.org
Date: Mon, 17 May 2021 16:11:27 +0200
Message-Id: <20210517141129.2225-10-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20210517141129.2225-1-christian.koenig@amd.com>
References: <20210517141129.2225-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: [Linaro-mm-sig] [PATCH 09/11] dma-buf: add shared fence usage flags
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: daniel@ffwll.ch
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

QWRkIHVzYWdlIGZsYWdzIGZvciBzaGFyZWQgZmVuY2VzIGFuZCBpbXByb3ZlIHRoZSBkb2N1bWVu
dGF0aW9uLgoKVGhpcyBhbGxvd3MgZHJpdmVyIHRvIGJldHRlciBzcGVjaWZ5IHdoYXQgc2hhcmVk
IGZlbmNlcwphcmUgZG9pbmcgd2l0aCB0aGUgcmVzb3VyY2UuCgpTaWduZWQtb2ZmLWJ5OiBDaHJp
c3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9kbWEt
YnVmL2RtYS1yZXN2LmMgICAgICAgICAgICAgICAgICAgIHwgMTMyICsrKysrKysrKysrKystLS0t
LQogLi4uL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMgIHwgICAyICst
CiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMgICAgfCAgIDIgKy0K
IGRyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jICB8ICAgNCArLQog
Li4uL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jICAgIHwgICAzICstCiBk
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jICAgICAgICAgICAgICAgfCAgIDIgKy0KIGRy
aXZlcnMvZ3B1L2RybS9tc20vbXNtX2dwdS5jICAgICAgICAgICAgICAgICB8ICAgMyArLQogZHJp
dmVycy9ncHUvZHJtL25vdXZlYXUvbm91dmVhdV9iby5jICAgICAgICAgIHwgICAyICstCiBkcml2
ZXJzL2dwdS9kcm0vcXhsL3F4bF9yZWxlYXNlLmMgICAgICAgICAgICAgfCAgIDMgKy0KIGRyaXZl
cnMvZ3B1L2RybS9yYWRlb24vcmFkZW9uX29iamVjdC5jICAgICAgICB8ICAgMiArLQogZHJpdmVy
cy9ncHUvZHJtL3R0bS90dG1fYm8uYyAgICAgICAgICAgICAgICAgIHwgICAyICstCiBkcml2ZXJz
L2dwdS9kcm0vdHRtL3R0bV9leGVjYnVmX3V0aWwuYyAgICAgICAgfCAgIDMgKy0KIGRyaXZlcnMv
Z3B1L2RybS92YzQvdmM0X2dlbS5jICAgICAgICAgICAgICAgICB8ICAgMyArLQogZHJpdmVycy9n
cHUvZHJtL3ZnZW0vdmdlbV9mZW5jZS5jICAgICAgICAgICAgIHwgICAyICstCiBpbmNsdWRlL2xp
bnV4L2RtYS1yZXN2LmggICAgICAgICAgICAgICAgICAgICAgfCAgMjEgKystCiAxNSBmaWxlcyBj
aGFuZ2VkLCAxMzUgaW5zZXJ0aW9ucygrKSwgNTEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLXJlc3YuYwpp
bmRleCBlZjdlMDQ2NGUwOGQuLmJmNzJjMTYyZmQ3MCAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEt
YnVmL2RtYS1yZXN2LmMKKysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMKQEAgLTQ5LDE3
ICs0OSwzNSBAQAogc3RydWN0IGRtYV9yZXN2X2xpc3QgewogCXN0cnVjdCByY3VfaGVhZCByY3U7
CiAJdTMyIHNoYXJlZF9jb3VudCwgc2hhcmVkX21heDsKLQlzdHJ1Y3QgZG1hX2ZlbmNlIF9fcmN1
ICpzaGFyZWRbXTsKKwl1bnNpZ25lZCBsb25nIHNoYXJlZFtdOwogfTsKIAogLyoqCiAgKiBET0M6
IFJlc2VydmF0aW9uIE9iamVjdCBPdmVydmlldwogICoKLSAqIFRoZSByZXNlcnZhdGlvbiBvYmpl
Y3QgcHJvdmlkZXMgYSBtZWNoYW5pc20gdG8gbWFuYWdlIHNoYXJlZCBhbmQKLSAqIGV4Y2x1c2l2
ZSBmZW5jZXMgYXNzb2NpYXRlZCB3aXRoIGEgYnVmZmVyLiAgQSByZXNlcnZhdGlvbiBvYmplY3QK
LSAqIGNhbiBoYXZlIGF0dGFjaGVkIG9uZSBleGNsdXNpdmUgZmVuY2UgKG5vcm1hbGx5IGFzc29j
aWF0ZWQgd2l0aAotICogd3JpdGUgb3BlcmF0aW9ucykgb3IgTiBzaGFyZWQgZmVuY2VzIChyZWFk
IG9wZXJhdGlvbnMpLiAgVGhlIFJDVQotICogbWVjaGFuaXNtIGlzIHVzZWQgdG8gcHJvdGVjdCBy
ZWFkIGFjY2VzcyB0byBmZW5jZXMgZnJvbSBsb2NrZWQKKyAqIFRoZSByZXNlcnZhdGlvbiBvYmpl
Y3QgcHJvdmlkZXMgYSBtZWNoYW5pc20gdG8gbWFuYWdlIHNoYXJlZCBhbmQgZXhjbHVzaXZlCisg
KiBmZW5jZXMgYXNzb2NpYXRlZCB3aXRoIGEgYnVmZmVyLiBBIHJlc2VydmF0aW9uIG9iamVjdCBj
YW4gaGF2ZSBhdHRhY2hlZCBvbmUKKyAqIGV4Y2x1c2l2ZSBmZW5jZSBvciBtdWx0aXBsZSBzaGFy
ZWQgZmVuY2VzLiBVc2luZyB0aGUgZXhjbHVzaXZlIGZlbmNlCisgKiBlZmZlY3RpdmVseSBzZXJp
YWxpemVzIGFsbCBhY2Nlc3NlcyB0byB0aGUgcmVzb3VyY2Ugd2hpbGUgdXNpbmcgdGhlIHNoYXJl
ZAorICogZmVuY2Ugc2xvdHMgYWxsb3dzIGZvciBjb25jdXJyZW50IGFjY2Vzcy4KKyAqCisgKiBC
ZWNhdXNlIG9mIHRoaXMgbmV3bHkgYWRkZWQgRE1BIG9wZXJhdGlvbnMgd2hpY2ggd2FudCB0byB1
c2UgYSByZXNvdXJjZQorICogYWx3YXlzIG5lZWRzIHRvIHdhaXQgZm9yIHRoZSBleGlzdGluZyBl
eGNsdXNpdmUgZmVuY2UgYmVmb3JlIHRoZXkgc3RhcnQsCisgKiBubyBtYXR0ZXIgaWYgdGhleSBh
cmUgYWRkZWQgYXMgc2hhcmVkIG9yIGV4Y2x1c2l2ZSBvbmUuCisgKgorICogVG8gYWlkIGRyaXZl
cnMgaW4gZGV0ZXJtaW5pbmcgaWYgdGhleSBuZWVkIHRvIHdhaXQgZm9yIGEgc2hhcmVkIHJlc291
cmNlCisgKiB1c2FnZSBmbGFncyBzaG91bGQgYmUgZ2l2ZW4gd2l0aCBlYWNoIHNoYXJlZCBmZW5j
ZSBhZGRlZCB0byB0aGUgcmVzb3VyY2UuCisgKgorICogQERNQV9SRVNWX1VTQUdFX05PTkUgaXMg
dXNlZCBmb3Igc3BlY2lhbCBjYXNlcyB3aGVyZSBubyB3YWl0aW5nIGlzIGRlc2lyZWQuCisgKiBA
RE1BX1JFU1ZfVVNBR0VfUkVBRCBpcyB1c2VkIHRvIG5vdGUgdGhhdCB0aGUgcmVzb3VyY2UgaXMg
cmVhZCBieSB0aGlzCisgKiBvcGVyYXRpb24gYW5kIHdyaXRlcnMgc2hvdWxkIHdhaXQgZm9yIGl0
LgorICogQERNQV9SRVNWX1VTQUdFX1dSSVRFIGlzIHVzZWQgdG8gbm90ZSB0aGF0IHRoZSByZXNv
dXJjZSBpcyB3cml0dGVuIGJ5IHRoaXMKKyAqIG9wZXJhdGlvbiBhbmQgcmVhZGVycyBzaG91bGQg
d2FpdCBmb3IgaXQuCisgKiBARE1BX1JFU1ZfVVNBR0VfUlcgaXMgdXNlZCB0byBub3RlIHRoYXQg
dGhlIHJlc291cmNlIGlzIGJvdGggcmVhZCBhbmQKKyAqIHdyaXR0ZW4uCisgKgorICogV2hlbiBk
cml2ZXJzIGFjY2VzcyB0aGUgZmVuY2VzIGNvbnRhaW5lZCBpbnNpZGUgdGhlIGRtYV9yZXN2IG9i
amVjdCB0aGUgUkNVCisgKiBtZWNoYW5pc20gY2FuIGJlIHVzZWQgdG8gcHJvdGVjdCByZWFkIGFj
Y2VzcyB0byBmZW5jZXMgZnJvbSBsb2NrZWQKICAqIHdyaXRlLXNpZGUgdXBkYXRlcy4KICAqLwog
CkBAIC0xMDAsOCArMTE4LDEyIEBAIHN0YXRpYyB2b2lkIGRtYV9yZXN2X2xpc3RfZnJlZShzdHJ1
Y3QgZG1hX3Jlc3ZfbGlzdCAqbGlzdCkKIAlpZiAoIWxpc3QpCiAJCXJldHVybjsKIAotCWZvciAo
aSA9IDA7IGkgPCBsaXN0LT5zaGFyZWRfY291bnQ7ICsraSkKLQkJZG1hX2ZlbmNlX3B1dChyY3Vf
ZGVyZWZlcmVuY2VfcHJvdGVjdGVkKGxpc3QtPnNoYXJlZFtpXSwgdHJ1ZSkpOworCWZvciAoaSA9
IDA7IGkgPCBsaXN0LT5zaGFyZWRfY291bnQ7ICsraSkgeworCQlzdHJ1Y3QgZG1hX2ZlbmNlIF9f
cmN1ICpmZW5jZTsKKworCQlmZW5jZSA9ICh2b2lkIF9fcmN1ICopKGxpc3QtPnNoYXJlZFtpXSAm
IH5ETUFfUkVTVl9VU0FHRV9SVyk7CisJCWRtYV9mZW5jZV9wdXQocmN1X2RlcmVmZXJlbmNlX3By
b3RlY3RlZChmZW5jZSwgdHJ1ZSkpOworCX0KIAogCWtmcmVlX3JjdShsaXN0LCByY3UpOwogfQpA
QCAtMTExLDE1ICsxMzMsNDQgQEAgc3RhdGljIHZvaWQgZG1hX3Jlc3ZfbGlzdF9mcmVlKHN0cnVj
dCBkbWFfcmVzdl9saXN0ICpsaXN0KQogICogQG9iajogdGhlIHJlc2VydmF0aW9uIG9iamVjdAog
ICogQGxpc3Q6IGxpc3QgdG8gZ2V0IHRoZSBmZW5jZSBmcm9tCiAgKiBAaWR4OiBpbmRleCBpbnRv
IHRoZSBmZW5jZSBhcnJheQorICogQHZhbDogb3B0aW9uYWwgb3JpZ2luYWwgdmFsdWUKICAqCiAg
KiBSZXR1cm4gdGhlIGZlbmNlIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXggZG91YmxlIGNoZWNraW5n
IHRoYXQgZWl0aGVyIHRoZSByY3UKICAqIHJlYWQgc2lkZSBvciB0aGUgZG1hX3Jlc3Ygb2JqZWN0
IGlzIGhlbGQuCiAgKi8KLXN0YXRpYyBzdHJ1Y3QgZG1hX2ZlbmNlICpkbWFfcmVzdl9saXN0X2Zl
bmNlKHN0cnVjdCBkbWFfcmVzdiAqb2JqLAotCQkJCQkgICAgIHN0cnVjdCBkbWFfcmVzdl9saXN0
ICpsaXN0LAotCQkJCQkgICAgIHVuc2lnbmVkIGludCBpZHgpCitzdGF0aWMgaW5saW5lIHN0cnVj
dCBkbWFfZmVuY2UgKmRtYV9yZXN2X2xpc3RfZmVuY2Uoc3RydWN0IGRtYV9yZXN2ICpvYmosCisJ
CQkJCQkgICAgc3RydWN0IGRtYV9yZXN2X2xpc3QgKmxpc3QsCisJCQkJCQkgICAgdW5zaWduZWQg
aW50IGlkeCwKKwkJCQkJCSAgICB1bnNpZ25lZCBsb25nICp2YWwpCiB7Ci0JcmV0dXJuIHJjdV9k
ZXJlZmVyZW5jZV9jaGVjayhsaXN0LT5zaGFyZWRbaWR4XSwgZG1hX3Jlc3ZfaGVsZChvYmopKTsK
KwlzdHJ1Y3QgZG1hX2ZlbmNlIF9fcmN1ICpmZW5jZTsKKwl1bnNpZ25lZCBsb25nIHRtcCA9IFJF
QURfT05DRShsaXN0LT5zaGFyZWRbaWR4XSk7CisKKwlpZiAodmFsKQorCQkqdmFsID0gdG1wOwor
CisJZmVuY2UgPSAodm9pZCBfX3JjdSAqKSh0bXAgJiB+RE1BX1JFU1ZfVVNBR0VfUlcpOworCXJl
dHVybiByY3VfZGVyZWZlcmVuY2VfY2hlY2soZmVuY2UsIGRtYV9yZXN2X2hlbGQob2JqKSk7Cit9
CisKKy8qKgorICogZG1hX3Jlc3ZfbGlzdF9hc3NpZ24gLSBhc3NpZ24gZmVuY2UgYW5kIHVzYWdl
CisgKiBAbGlzdDogbGlzdCB0byBhc3NpZ24gdGhlIGZlbmNlIHRvCisgKiBAaWR4OiBpbmRleCB3
aGVyZSB0byBhc3NpZ24gdGhlIGZlbmNlCisgKiBAZjogdGhlIGZlbmNlIHRvIGFzc2lnbgorICog
QHVzYWdlOiB0aGUgdXNhZ2UgdG8gdXNlCisgKgorICogQXNzaWduIHRoZSBmZW5jZSBhbmQgdXNh
Z2UgdG8gdGhlIHNsb3QgYXQgcG9zaXRpb24gaWR4LgorICovCitzdGF0aWMgdm9pZCBkbWFfcmVz
dl9saXN0X2Fzc2lnbihzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqbGlzdCwKKwkJCQkgdW5zaWduZWQg
aW50IGlkeCwKKwkJCQkgc3RydWN0IGRtYV9mZW5jZSAqZiwKKwkJCQkgdWludDMyX3QgdXNhZ2Up
Cit7CisJc3RydWN0IGRtYV9mZW5jZSBfX3JjdSAqZmVuY2U7CisKKwlyY3VfYXNzaWduX3BvaW50
ZXIoZmVuY2UsIGYpOworCVdSSVRFX09OQ0UobGlzdC0+c2hhcmVkW2lkeF0sICgodW5zaWduZWQg
bG9uZyBfX2ZvcmNlKWZlbmNlKSB8IHVzYWdlKTsKIH0KIAogLyoqCkBAIC0yMDAsMTAgKzI1MSwx
NyBAQCBFWFBPUlRfU1lNQk9MKGRtYV9yZXN2X2ZpcnN0X3NoYXJlZCk7CiBzdHJ1Y3QgZG1hX2Zl
bmNlICpkbWFfcmVzdl9uZXh0X3NoYXJlZChzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwKIAkJCQkgICAg
ICAgc3RydWN0IGRtYV9yZXN2X2N1cnNvciAqY3Vyc29yKQogeworCXN0cnVjdCBkbWFfZmVuY2Ug
KmZlbmNlOworCXVuc2lnbmVkIGxvbmcgdmFsOworCWludCBpZHg7CisKIAlpZiAoY3Vyc29yLT5p
ID49IGN1cnNvci0+ZmVuY2VzLT5zaGFyZWRfY291bnQpCiAJCXJldHVybiBOVUxMOwogCi0JcmV0
dXJuIGRtYV9yZXN2X2xpc3RfZmVuY2Uob2JqLCBjdXJzb3ItPmZlbmNlcywgY3Vyc29yLT5pKysp
OworCWlkeCA9IGN1cnNvci0+aSsrOworCWZlbmNlID0gZG1hX3Jlc3ZfbGlzdF9mZW5jZShvYmos
IGN1cnNvci0+ZmVuY2VzLCBpZHgsICZ2YWwpOworCWN1cnNvci0+dXNhZ2UgPSB2YWwgJiBETUFf
UkVTVl9VU0FHRV9SVzsKKwlyZXR1cm4gZmVuY2U7CiB9CiBFWFBPUlRfU1lNQk9MKGRtYV9yZXN2
X25leHRfc2hhcmVkKTsKIApAQCAtMjQ2LDEzICszMDQsMTQgQEAgaW50IGRtYV9yZXN2X3Jlc2Vy
dmVfc2hhcmVkKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCB1bnNpZ25lZCBpbnQgbnVtX2ZlbmNlcykK
IAkgKiB0aGUgbmV3LgogCSAqLwogCWZvciAoaSA9IDAsIGogPSAwLCBrID0gbWF4OyBpIDwgKG9s
ZCA/IG9sZC0+c2hhcmVkX2NvdW50IDogMCk7ICsraSkgewotCQlzdHJ1Y3QgZG1hX2ZlbmNlICpm
ZW5jZTsKKwkJc3RydWN0IGRtYV9mZW5jZSAqIGZlbmNlOworCQl1bnNpZ25lZCBsb25nIHZhbDsK
IAotCQlmZW5jZSA9IGRtYV9yZXN2X2xpc3RfZmVuY2Uob2JqLCBvbGQsIGkpOworCQlmZW5jZSA9
IGRtYV9yZXN2X2xpc3RfZmVuY2Uob2JqLCBvbGQsIGksICZ2YWwpOwogCQlpZiAoZG1hX2ZlbmNl
X2lzX3NpZ25hbGVkKGZlbmNlKSkKLQkJCVJDVV9JTklUX1BPSU5URVIobmV3LT5zaGFyZWRbLS1r
XSwgZmVuY2UpOworCQkJbmV3LT5zaGFyZWRbLS1rXSA9IHZhbDsKIAkJZWxzZQotCQkJUkNVX0lO
SVRfUE9JTlRFUihuZXctPnNoYXJlZFtqKytdLCBmZW5jZSk7CisJCQluZXctPnNoYXJlZFtqKytd
ID0gdmFsOwogCX0KIAluZXctPnNoYXJlZF9jb3VudCA9IGo7CiAKQEAgLTI3MSw3ICszMzAsNyBA
QCBpbnQgZG1hX3Jlc3ZfcmVzZXJ2ZV9zaGFyZWQoc3RydWN0IGRtYV9yZXN2ICpvYmosIHVuc2ln
bmVkIGludCBudW1fZmVuY2VzKQogCiAJLyogRHJvcCB0aGUgcmVmZXJlbmNlcyB0byB0aGUgc2ln
bmFsZWQgZmVuY2VzICovCiAJZm9yIChpID0gazsgaSA8IG1heDsgKytpKQotCQlkbWFfZmVuY2Vf
cHV0KGRtYV9yZXN2X2xpc3RfZmVuY2Uob2JqLCBuZXcsIGkpKTsKKwkJZG1hX2ZlbmNlX3B1dChk
bWFfcmVzdl9saXN0X2ZlbmNlKG9iaiwgbmV3LCBpLCBOVUxMKSk7CiAJa2ZyZWVfcmN1KG9sZCwg
cmN1KTsKIAogCXJldHVybiAwOwpAQCAtMjk4LDE0ICszNTcsMTYgQEAgdm9pZCBkbWFfcmVzdl9y
ZXNldF9zaGFyZWRfbWF4KHN0cnVjdCBkbWFfcmVzdiAqb2JqKQogI2VuZGlmCiAKIC8qKgotICog
ZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZSAtIEFkZCBhIGZlbmNlIHRvIGEgc2hhcmVkIHNsb3QK
KyAqIGRtYV9yZXN2X2FkZF9zaGFyZWQgLSBBZGQgYSBmZW5jZSB0byBhIHNoYXJlZCBzbG90CiAg
KiBAb2JqOiB0aGUgcmVzZXJ2YXRpb24gb2JqZWN0CiAgKiBAZmVuY2U6IHRoZSBzaGFyZWQgZmVu
Y2UgdG8gYWRkCisgKiBAdXNhZ2U6IGhvdyB0aGUgZmVuY2UgaXMgdXNpbmcgdGhlIHJlc291cmNl
CiAgKgogICogQWRkIGEgZmVuY2UgdG8gYSBzaGFyZWQgc2xvdCwgb2JqLT5sb2NrIG11c3QgYmUg
aGVsZCwgYW5kCiAgKiBkbWFfcmVzdl9yZXNlcnZlX3NoYXJlZCgpIGhhcyBiZWVuIGNhbGxlZC4K
ICAqLwotdm9pZCBkbWFfcmVzdl9hZGRfc2hhcmVkX2ZlbmNlKHN0cnVjdCBkbWFfcmVzdiAqb2Jq
LCBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkKK3ZvaWQgZG1hX3Jlc3ZfYWRkX3NoYXJlZChzdHJ1
Y3QgZG1hX3Jlc3YgKm9iaiwgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsCisJCQkgZW51bSBkbWFf
cmVzdl91c2FnZSB1c2FnZSkKIHsKIAlzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqZm9iajsKIAlzdHJ1
Y3QgZG1hX2ZlbmNlICpvbGQ7CkBAIC0zMjEsOCArMzgyLDcgQEAgdm9pZCBkbWFfcmVzdl9hZGRf
c2hhcmVkX2ZlbmNlKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5j
ZSkKIAl3cml0ZV9zZXFjb3VudF9iZWdpbigmb2JqLT5zZXEpOwogCiAJZm9yIChpID0gMDsgaSA8
IGNvdW50OyArK2kpIHsKLQotCQlvbGQgPSBkbWFfcmVzdl9saXN0X2ZlbmNlKG9iaiwgZm9iaiwg
aSk7CisJCW9sZCA9IGRtYV9yZXN2X2xpc3RfZmVuY2Uob2JqLCBmb2JqLCBpLCBOVUxMKTsKIAkJ
aWYgKG9sZC0+Y29udGV4dCA9PSBmZW5jZS0+Y29udGV4dCB8fAogCQkgICAgZG1hX2ZlbmNlX2lz
X3NpZ25hbGVkKG9sZCkpCiAJCQlnb3RvIHJlcGxhY2U7CkBAIC0zMzMsMjAgKzM5MywyMSBAQCB2
b2lkIGRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2Uoc3RydWN0IGRtYV9yZXN2ICpvYmosIHN0cnVj
dCBkbWFfZmVuY2UgKmZlbmNlKQogCWNvdW50Kys7CiAKIHJlcGxhY2U6Ci0JUkNVX0lOSVRfUE9J
TlRFUihmb2JqLT5zaGFyZWRbaV0sIGZlbmNlKTsKKwlkbWFfcmVzdl9saXN0X2Fzc2lnbihmb2Jq
LCBpLCBmZW5jZSwgdXNhZ2UpOwogCS8qIHBvaW50ZXIgdXBkYXRlIG11c3QgYmUgdmlzaWJsZSBi
ZWZvcmUgd2UgZXh0ZW5kIHRoZSBzaGFyZWRfY291bnQgKi8KIAlzbXBfc3RvcmVfbWIoZm9iai0+
c2hhcmVkX2NvdW50LCBjb3VudCk7CiAKIAl3cml0ZV9zZXFjb3VudF9lbmQoJm9iai0+c2VxKTsK
IAlkbWFfZmVuY2VfcHV0KG9sZCk7CiB9Ci1FWFBPUlRfU1lNQk9MKGRtYV9yZXN2X2FkZF9zaGFy
ZWRfZmVuY2UpOworRVhQT1JUX1NZTUJPTChkbWFfcmVzdl9hZGRfc2hhcmVkKTsKIAogLyoqCiAg
KiBkbWFfcmVzdl9yZXBsYWNlX3NoYXJlZCAtIHJlcGxhY2Ugc2hhcmVkIGZlbmNlcwogICogQG9i
ajogdGhlIHJlc2VydmF0aW9uIG9iamVjdAogICogQGNvbnRleHQ6IHRoZSBjb250ZXh0IG9mIHRo
ZSBmZW5jZXMgdG8gcmVwbGFjZQogICogQGZlbmNlOiB0aGUgbmV3IGZlbmNlIHRvIHVzZSBpbnN0
ZWFkCisgKiBAdXNhZ2U6IGhvdyB0aGUgZmVuY2UgaXMgdXNpbmcgdGhlIHJlc291cmNlCiAgKgog
ICogUmVwbGFjZSBmZW5jZXMgd2l0aCBhIHNwZWNpZmllZCBjb250ZXh0IHdpdGggYSBuZXcgZmVu
Y2UuIE9ubHkgdmFsaWQgaWYgdGhlCiAgKiBvcGVyYXRpb24gcmVwcmVzZW50ZWQgYnkgdGhlIG9y
aWdpbmFsIGZlbmNlcyBpcyBjb21wbGV0ZWQgb3IgaGFzIG5vIGxvbmdlcgpAQCAtMzU0LDcgKzQx
NSw3IEBAIEVYUE9SVF9TWU1CT0woZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZSk7CiAgKiBjb21w
bGV0ZXMuIFRha2VzIHRoZSByZWZlcmVuY2UgdG8gdGhlIG5ldyBmZW5jZS4KICAqLwogdm9pZCBk
bWFfcmVzdl9yZXBsYWNlX3NoYXJlZChzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgdWludDY0X3QgY29u
dGV4dCwKLQkJCSAgICAgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpCisJCQkgICAgIHN0cnVjdCBk
bWFfZmVuY2UgKmZlbmNlLCBlbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlKQogewogCXN0cnVjdCBk
bWFfcmVzdl9saXN0ICpsaXN0OwogCXVuc2lnbmVkIGludCBpOwpAQCAtMzY3LDEyICs0MjgsMTMg
QEAgdm9pZCBkbWFfcmVzdl9yZXBsYWNlX3NoYXJlZChzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgdWlu
dDY0X3QgY29udGV4dCwKIAogCXdyaXRlX3NlcWNvdW50X2JlZ2luKCZvYmotPnNlcSk7CiAJZm9y
IChpID0gMDsgaSA8IGxpc3QtPnNoYXJlZF9jb3VudDsgKytpKSB7Ci0JCXN0cnVjdCBkbWFfZmVu
Y2UgKm9sZCA9IGRtYV9yZXN2X2xpc3RfZmVuY2Uob2JqLCBsaXN0LCBpKTsKKwkJc3RydWN0IGRt
YV9mZW5jZSAqb2xkOwogCisJCW9sZCA9IGRtYV9yZXN2X2xpc3RfZmVuY2Uob2JqLCBsaXN0LCBp
LCBOVUxMKTsKIAkJaWYgKG9sZC0+Y29udGV4dCAhPSBjb250ZXh0KQogCQkJY29udGludWU7CiAK
LQkJcmN1X2Fzc2lnbl9wb2ludGVyKGxpc3QtPnNoYXJlZFtpXSwgZG1hX2ZlbmNlX2dldChmZW5j
ZSkpOworCQlkbWFfcmVzdl9saXN0X2Fzc2lnbihsaXN0LCBpLCBmZW5jZSwgdXNhZ2UpOwogCQlk
bWFfZmVuY2VfcHV0KG9sZCk7CiAJfQogCXdyaXRlX3NlcWNvdW50X2VuZCgmb2JqLT5zZXEpOwpA
QCAtNDExLDcgKzQ3Myw3IEBAIHZvaWQgZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2Uoc3RydWN0IGRt
YV9yZXN2ICpvYmosIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQogCiAJLyogaW5wbGFjZSB1cGRh
dGUsIG5vIHNoYXJlZCBmZW5jZXMgKi8KIAl3aGlsZSAoaS0tKQotCQlkbWFfZmVuY2VfcHV0KGRt
YV9yZXN2X2xpc3RfZmVuY2Uob2JqLCBvbGQsIGkpKTsKKwkJZG1hX2ZlbmNlX3B1dChkbWFfcmVz
dl9saXN0X2ZlbmNlKG9iaiwgb2xkLCBpLCBOVUxMKSk7CiAKIAlkbWFfZmVuY2VfcHV0KG9sZF9m
ZW5jZSk7CiB9CkBAIC00NTQsMTAgKzUxNiwxMCBAQCBpbnQgZG1hX3Jlc3ZfY29weV9mZW5jZXMo
c3RydWN0IGRtYV9yZXN2ICpkc3QsIHN0cnVjdCBkbWFfcmVzdiAqc3JjKQogCiAJCWRzdF9saXN0
LT5zaGFyZWRfY291bnQgPSAwOwogCQlmb3IgKGkgPSAwOyBpIDwgc3JjX2xpc3QtPnNoYXJlZF9j
b3VudDsgKytpKSB7Ci0JCQlzdHJ1Y3QgZG1hX2ZlbmNlIF9fcmN1ICoqZHN0OwogCQkJc3RydWN0
IGRtYV9mZW5jZSAqZmVuY2U7CisJCQl1bnNpZ25lZCBsb25nIHZhbDsKIAotCQkJZmVuY2UgPSBk
bWFfcmVzdl9saXN0X2ZlbmNlKHNyYywgc3JjX2xpc3QsIGkpOworCQkJZmVuY2UgPSBkbWFfcmVz
dl9saXN0X2ZlbmNlKHNyYywgc3JjX2xpc3QsIGksICZ2YWwpOwogCQkJaWYgKHRlc3RfYml0KERN
QV9GRU5DRV9GTEFHX1NJR05BTEVEX0JJVCwKIAkJCQkgICAgICZmZW5jZS0+ZmxhZ3MpKQogCQkJ
CWNvbnRpbnVlOwpAQCAtNDczLDggKzUzNSw3IEBAIGludCBkbWFfcmVzdl9jb3B5X2ZlbmNlcyhz
dHJ1Y3QgZG1hX3Jlc3YgKmRzdCwgc3RydWN0IGRtYV9yZXN2ICpzcmMpCiAJCQkJY29udGludWU7
CiAJCQl9CiAKLQkJCWRzdCA9ICZkc3RfbGlzdC0+c2hhcmVkW2RzdF9saXN0LT5zaGFyZWRfY291
bnQrK107Ci0JCQlyY3VfYXNzaWduX3BvaW50ZXIoKmRzdCwgZmVuY2UpOworCQkJZHN0X2xpc3Qt
PnNoYXJlZFtkc3RfbGlzdC0+c2hhcmVkX2NvdW50KytdID0gdmFsOwogCQl9CiAJfSBlbHNlIHsK
IAkJZHN0X2xpc3QgPSBOVUxMOwpAQCAtNTY2LDcgKzYyNyw4IEBAIGludCBkbWFfcmVzdl9nZXRf
ZmVuY2VzX3JjdShzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwKIAkJCXNoYXJlZCA9IG5zaGFyZWQ7CiAJ
CQlzaGFyZWRfY291bnQgPSBmb2JqID8gZm9iai0+c2hhcmVkX2NvdW50IDogMDsKIAkJCWZvciAo
aSA9IDA7IGkgPCBzaGFyZWRfY291bnQ7ICsraSkgewotCQkJCXNoYXJlZFtpXSA9IGRtYV9yZXN2
X2xpc3RfZmVuY2Uob2JqLCBmb2JqLCBpKTsKKwkJCQlzaGFyZWRbaV0gPSBkbWFfcmVzdl9saXN0
X2ZlbmNlKG9iaiwgZm9iaiwKKwkJCQkJCQkJaSwgTlVMTCk7CiAJCQkJaWYgKCFkbWFfZmVuY2Vf
Z2V0X3JjdShzaGFyZWRbaV0pKQogCQkJCQlicmVhazsKIAkJCX0KQEAgLTY1MCw3ICs3MTIsNyBA
QCBsb25nIGRtYV9yZXN2X3dhaXRfdGltZW91dF9yY3Uoc3RydWN0IGRtYV9yZXN2ICpvYmosCiAJ
CWZvciAoaSA9IDA7ICFmZW5jZSAmJiBpIDwgc2hhcmVkX2NvdW50OyArK2kpIHsKIAkJCXN0cnVj
dCBkbWFfZmVuY2UgKmxmZW5jZTsKIAotCQkJbGZlbmNlID0gZG1hX3Jlc3ZfbGlzdF9mZW5jZShv
YmosIGZvYmosIGkpOworCQkJbGZlbmNlID0gZG1hX3Jlc3ZfbGlzdF9mZW5jZShvYmosIGZvYmos
IGksIE5VTEwpOwogCQkJaWYgKHRlc3RfYml0KERNQV9GRU5DRV9GTEFHX1NJR05BTEVEX0JJVCwK
IAkJCQkgICAgICZsZmVuY2UtPmZsYWdzKSkKIAkJCQljb250aW51ZTsKQEAgLTczNiw3ICs3OTgs
NyBAQCBib29sIGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWRfcmN1KHN0cnVjdCBkbWFfcmVzdiAqb2Jq
LCBib29sIHRlc3RfYWxsKQogCQlmb3IgKGkgPSAwOyBpIDwgc2hhcmVkX2NvdW50OyArK2kpIHsK
IAkJCXN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlOwogCi0JCQlmZW5jZSA9IGRtYV9yZXN2X2xpc3Rf
ZmVuY2Uob2JqLCBmb2JqLCBpKTsKKwkJCWZlbmNlID0gZG1hX3Jlc3ZfbGlzdF9mZW5jZShvYmos
IGZvYmosIGksIE5VTEwpOwogCQkJcmV0ID0gZG1hX3Jlc3ZfdGVzdF9zaWduYWxlZF9zaW5nbGUo
ZmVuY2UpOwogCQkJaWYgKHJldCA8IDApCiAJCQkJZ290byByZXRyeTsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYwppbmRleCAzZTVhNjgxYTU0
ODIuLjUwYmRmOWJmZDAzMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X2FtZGtmZF9ncHV2bS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9hbWRrZmRfZ3B1dm0uYwpAQCAtMjQ1LDcgKzI0NSw3IEBAIHN0YXRpYyBpbnQgYW1kZ3B1
X2FtZGtmZF9yZW1vdmVfZXZpY3Rpb25fZmVuY2Uoc3RydWN0IGFtZGdwdV9ibyAqYm8sCiAJICog
dGFibGUgdXBkYXRlIGFuZCBUTEIgZmx1c2ggaGVyZSBkaXJlY3RseS4KIAkgKi8KIAlkbWFfcmVz
dl9yZXBsYWNlX3NoYXJlZChiby0+dGJvLmJhc2UucmVzdiwgZWYtPmJhc2UuY29udGV4dCwKLQkJ
CQlkbWFfZmVuY2VfZ2V0X3N0dWIoKSk7CisJCQkJZG1hX2ZlbmNlX2dldF9zdHViKCksIERNQV9S
RVNWX1VTQUdFX05PTkUpOwogCXJldHVybiAwOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfb2JqZWN0LmMKaW5kZXggMGFkZmZjYWNlMzI2Li4xMTkwNzgxY2VmY2IgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYworKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMKQEAgLTE0MjIsNyAr
MTQyMiw3IEBAIHZvaWQgYW1kZ3B1X2JvX2ZlbmNlKHN0cnVjdCBhbWRncHVfYm8gKmJvLCBzdHJ1
Y3QgZG1hX2ZlbmNlICpmZW5jZSwKIAlzdHJ1Y3QgZG1hX3Jlc3YgKnJlc3YgPSBiby0+dGJvLmJh
c2UucmVzdjsKIAogCWlmIChzaGFyZWQpCi0JCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UocmVz
diwgZmVuY2UpOworCQlkbWFfcmVzdl9hZGRfc2hhcmVkKHJlc3YsIGZlbmNlLCBETUFfUkVTVl9V
U0FHRV9SVyk7CiAJZWxzZQogCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShyZXN2LCBmZW5jZSk7
CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9zdWJt
aXQuYyBiL2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3N1Ym1pdC5jCmluZGV4
IGQwNWMzNTk5NDU3OS4uZjBlNjljNTE0Mjc1IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
ZXRuYXZpdi9ldG5hdml2X2dlbV9zdWJtaXQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZp
di9ldG5hdml2X2dlbV9zdWJtaXQuYwpAQCAtMjE0LDggKzIxNCw4IEBAIHN0YXRpYyB2b2lkIHN1
Ym1pdF9hdHRhY2hfb2JqZWN0X2ZlbmNlcyhzdHJ1Y3QgZXRuYXZpdl9nZW1fc3VibWl0ICpzdWJt
aXQpCiAJCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShvYmotPnJlc3YsCiAJCQkJCQkJICBzdWJt
aXQtPm91dF9mZW5jZSk7CiAJCWVsc2UKLQkJCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2Uob2Jq
LT5yZXN2LAotCQkJCQkJCSAgICBzdWJtaXQtPm91dF9mZW5jZSk7CisJCQlkbWFfcmVzdl9hZGRf
c2hhcmVkKG9iai0+cmVzdiwgc3VibWl0LT5vdXRfZmVuY2UsCisJCQkJCSAgICBETUFfUkVTVl9V
U0FHRV9SRUFEKTsKIAogCQlzdWJtaXRfdW5sb2NrX29iamVjdChzdWJtaXQsIGkpOwogCX0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9leGVjYnVmZmVyLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCmluZGV4IDU5
NjRlNjdjN2QzNi4uMTYxMzhiYzJkYmU0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkx
NS9nZW0vaTkxNV9nZW1fZXhlY2J1ZmZlci5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9leGVjYnVmZmVyLmMKQEAgLTI1NTEsNyArMjU1MSw4IEBAIHN0YXRpYyBpbnQg
ZWJfcGFyc2VfcGlwZWxpbmUoc3RydWN0IGk5MTVfZXhlY2J1ZmZlciAqZWIsCiAJCWdvdG8gZXJy
X2NvbW1pdDsKIAogCS8qIEtlZXAgdGhlIGJhdGNoIGFsaXZlIGFuZCB1bndyaXR0ZW4gYXMgd2Ug
cGFyc2UgKi8KLQlkbWFfcmVzdl9hZGRfc2hhcmVkX2ZlbmNlKHB3LT5iYXRjaC0+cmVzdiwgJnB3
LT5iYXNlLmRtYSk7CisJZG1hX3Jlc3ZfYWRkX3NoYXJlZChwdy0+YmF0Y2gtPnJlc3YsICZwdy0+
YmFzZS5kbWEsCisJCQkgICAgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7CiAKIAkvKiBGb3JjZSBleGVj
dXRpb24gdG8gd2FpdCBmb3IgY29tcGxldGlvbiBvZiB0aGUgcGFyc2VyICovCiAJZG1hX3Jlc3Zf
YWRkX2V4Y2xfZmVuY2Uoc2hhZG93LT5yZXN2LCAmcHctPmJhc2UuZG1hKTsKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfdm1hLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9p
OTE1X3ZtYS5jCmluZGV4IDA3NDkwZGI1MWNkYy4uMGQxNzdhNzY4N2NiIDEwMDY0NAotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3ZtYS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1
L2k5MTVfdm1hLmMKQEAgLTEyNTYsNyArMTI1Niw3IEBAIGludCBpOTE1X3ZtYV9tb3ZlX3RvX2Fj
dGl2ZShzdHJ1Y3QgaTkxNV92bWEgKnZtYSwKIAkJCQlyZXR1cm4gZXJyOwogCQl9CiAKLQkJZG1h
X3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZSh2bWEtPnJlc3YsICZycS0+ZmVuY2UpOworCQlkbWFfcmVz
dl9hZGRfc2hhcmVkKHZtYS0+cmVzdiwgJnJxLT5mZW5jZSwgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7
CiAJCW9iai0+d3JpdGVfZG9tYWluID0gMDsKIAl9CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9tc20vbXNtX2dwdS5jIGIvZHJpdmVycy9ncHUvZHJtL21zbS9tc21fZ3B1LmMKaW5kZXgg
OWRkMWM1ODQzMGFiLi44MmY5OGE0MjI0ZjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9t
c20vbXNtX2dwdS5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tc20vbXNtX2dwdS5jCkBAIC04MjAs
NyArODIwLDggQEAgdm9pZCBtc21fZ3B1X3N1Ym1pdChzdHJ1Y3QgbXNtX2dwdSAqZ3B1LCBzdHJ1
Y3QgbXNtX2dlbV9zdWJtaXQgKnN1Ym1pdCkKIAkJaWYgKHN1Ym1pdC0+Ym9zW2ldLmZsYWdzICYg
TVNNX1NVQk1JVF9CT19XUklURSkKIAkJCWRtYV9yZXN2X2FkZF9leGNsX2ZlbmNlKGRybV9vYmot
PnJlc3YsIHN1Ym1pdC0+ZmVuY2UpOwogCQllbHNlIGlmIChzdWJtaXQtPmJvc1tpXS5mbGFncyAm
IE1TTV9TVUJNSVRfQk9fUkVBRCkKLQkJCWRtYV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UoZHJtX29i
ai0+cmVzdiwgc3VibWl0LT5mZW5jZSk7CisJCQlkbWFfcmVzdl9hZGRfc2hhcmVkKGRybV9vYmot
PnJlc3YsIHN1Ym1pdC0+ZmVuY2UsCisJCQkJCSAgICBETUFfUkVTVl9VU0FHRV9SRUFEKTsKIAog
CQltc21fZ2VtX2FjdGl2ZV9nZXQoZHJtX29iaiwgZ3B1KTsKIAl9CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMgYi9kcml2ZXJzL2dwdS9kcm0vbm91dmVh
dS9ub3V2ZWF1X2JvLmMKaW5kZXggYWQzMGE2YTEwMGI5Li5iMmMxM2M2M2Y5M2MgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9ub3V2ZWF1L25vdXZlYXVfYm8uYworKysgYi9kcml2ZXJzL2dw
dS9kcm0vbm91dmVhdS9ub3V2ZWF1X2JvLmMKQEAgLTEzMTMsNyArMTMxMyw3IEBAIG5vdXZlYXVf
Ym9fZmVuY2Uoc3RydWN0IG5vdXZlYXVfYm8gKm52Ym8sIHN0cnVjdCBub3V2ZWF1X2ZlbmNlICpm
ZW5jZSwgYm9vbCBleGNsCiAJaWYgKGV4Y2x1c2l2ZSkKIAkJZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVu
Y2UocmVzdiwgJmZlbmNlLT5iYXNlKTsKIAllbHNlIGlmIChmZW5jZSkKLQkJZG1hX3Jlc3ZfYWRk
X3NoYXJlZF9mZW5jZShyZXN2LCAmZmVuY2UtPmJhc2UpOworCQlkbWFfcmVzdl9hZGRfc2hhcmVk
KHJlc3YsICZmZW5jZS0+YmFzZSwgRE1BX1JFU1ZfVVNBR0VfUlcpOwogfQogCiBzdGF0aWMgdm9p
ZApkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfcmVsZWFzZS5jIGIvZHJpdmVy
cy9ncHUvZHJtL3F4bC9xeGxfcmVsZWFzZS5jCmluZGV4IGIxOWYyZjAwYjIxNS4uYjcyNWUzZmJi
YjQ5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9yZWxlYXNlLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfcmVsZWFzZS5jCkBAIC00MjksNyArNDI5LDggQEAgdm9p
ZCBxeGxfcmVsZWFzZV9mZW5jZV9idWZmZXJfb2JqZWN0cyhzdHJ1Y3QgcXhsX3JlbGVhc2UgKnJl
bGVhc2UpCiAJbGlzdF9mb3JfZWFjaF9lbnRyeShlbnRyeSwgJnJlbGVhc2UtPmJvcywgaGVhZCkg
ewogCQlibyA9IGVudHJ5LT5ibzsKIAotCQlkbWFfcmVzdl9hZGRfc2hhcmVkX2ZlbmNlKGJvLT5i
YXNlLnJlc3YsICZyZWxlYXNlLT5iYXNlKTsKKwkJZG1hX3Jlc3ZfYWRkX3NoYXJlZChiby0+YmFz
ZS5yZXN2LCAmcmVsZWFzZS0+YmFzZSwKKwkJCQkgICAgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7CiAJ
CXR0bV9ib19tb3ZlX3RvX2xydV90YWlsX3VubG9ja2VkKGJvKTsKIAkJZG1hX3Jlc3ZfdW5sb2Nr
KGJvLT5iYXNlLnJlc3YpOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24v
cmFkZW9uX29iamVjdC5jIGIvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fb2JqZWN0LmMK
aW5kZXggY2VlMTFjNTVmZDE1Li5iNzQ0Y2Q3NjZiYjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9yYWRlb24vcmFkZW9uX29iamVjdC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9yYWRlb24v
cmFkZW9uX29iamVjdC5jCkBAIC04MTUsNyArODE1LDcgQEAgdm9pZCByYWRlb25fYm9fZmVuY2Uo
c3RydWN0IHJhZGVvbl9ibyAqYm8sIHN0cnVjdCByYWRlb25fZmVuY2UgKmZlbmNlLAogCXN0cnVj
dCBkbWFfcmVzdiAqcmVzdiA9IGJvLT50Ym8uYmFzZS5yZXN2OwogCiAJaWYgKHNoYXJlZCkKLQkJ
ZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZShyZXN2LCAmZmVuY2UtPmJhc2UpOworCQlkbWFfcmVz
dl9hZGRfc2hhcmVkKHJlc3YsICZmZW5jZS0+YmFzZSwgRE1BX1JFU1ZfVVNBR0VfUkVBRCk7CiAJ
ZWxzZQogCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShyZXN2LCAmZmVuY2UtPmJhc2UpOwogfQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fYm8uYyBiL2RyaXZlcnMvZ3B1L2Ry
bS90dG0vdHRtX2JvLmMKaW5kZXggMTZiODY5ZDliMWQ2Li5jOWJiYzQ2MzBhZmMgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvLmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL3R0
bS90dG1fYm8uYwpAQCAtNzAwLDcgKzcwMCw3IEBAIHN0YXRpYyBpbnQgdHRtX2JvX2FkZF9tb3Zl
X2ZlbmNlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sCiAJCXJldHVybiByZXQ7CiAJfQog
Ci0JZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZShiby0+YmFzZS5yZXN2LCBmZW5jZSk7CisJZG1h
X3Jlc3ZfYWRkX3NoYXJlZChiby0+YmFzZS5yZXN2LCBmZW5jZSwgRE1BX1JFU1ZfVVNBR0VfUlcp
OwogCiAJcmV0ID0gZG1hX3Jlc3ZfcmVzZXJ2ZV9zaGFyZWQoYm8tPmJhc2UucmVzdiwgMSk7CiAJ
aWYgKHVubGlrZWx5KHJldCkpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRt
X2V4ZWNidWZfdXRpbC5jIGIvZHJpdmVycy9ncHUvZHJtL3R0bS90dG1fZXhlY2J1Zl91dGlsLmMK
aW5kZXggMDcxYzQ4ZDY3MmM2Li44ZWQxZDg5Y2ZlZWIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS90dG0vdHRtX2V4ZWNidWZfdXRpbC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRt
X2V4ZWNidWZfdXRpbC5jCkBAIC0xNTYsNyArMTU2LDggQEAgdm9pZCB0dG1fZXVfZmVuY2VfYnVm
ZmVyX29iamVjdHMoc3RydWN0IHd3X2FjcXVpcmVfY3R4ICp0aWNrZXQsCiAJCXN0cnVjdCB0dG1f
YnVmZmVyX29iamVjdCAqYm8gPSBlbnRyeS0+Ym87CiAKIAkJaWYgKGVudHJ5LT5udW1fc2hhcmVk
KQotCQkJZG1hX3Jlc3ZfYWRkX3NoYXJlZF9mZW5jZShiby0+YmFzZS5yZXN2LCBmZW5jZSk7CisJ
CQlkbWFfcmVzdl9hZGRfc2hhcmVkKGJvLT5iYXNlLnJlc3YsIGZlbmNlLAorCQkJCQkgICAgRE1B
X1JFU1ZfVVNBR0VfUlcpOwogCQllbHNlCiAJCQlkbWFfcmVzdl9hZGRfZXhjbF9mZW5jZShiby0+
YmFzZS5yZXN2LCBmZW5jZSk7CiAJCXR0bV9ib19tb3ZlX3RvX2xydV90YWlsX3VubG9ja2VkKGJv
KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2dlbS5jIGIvZHJpdmVycy9n
cHUvZHJtL3ZjNC92YzRfZ2VtLmMKaW5kZXggNDQ1ZDNiYWI4OWUwLi4yYWI1OWFiY2VhMWEgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS92YzQvdmM0X2dlbS5jCisrKyBiL2RyaXZlcnMvZ3B1
L2RybS92YzQvdmM0X2dlbS5jCkBAIC01NDMsNyArNTQzLDggQEAgdmM0X3VwZGF0ZV9ib19zZXFu
b3Moc3RydWN0IHZjNF9leGVjX2luZm8gKmV4ZWMsIHVpbnQ2NF90IHNlcW5vKQogCQlibyA9IHRv
X3ZjNF9ibygmZXhlYy0+Ym9baV0tPmJhc2UpOwogCQliby0+c2Vxbm8gPSBzZXFubzsKIAotCQlk
bWFfcmVzdl9hZGRfc2hhcmVkX2ZlbmNlKGJvLT5iYXNlLmJhc2UucmVzdiwgZXhlYy0+ZmVuY2Up
OworCQlkbWFfcmVzdl9hZGRfc2hhcmVkKGJvLT5iYXNlLmJhc2UucmVzdiwgZXhlYy0+ZmVuY2Us
CisJCQkJICAgIERNQV9SRVNWX1VTQUdFX1JFQUQpOwogCX0KIAogCWxpc3RfZm9yX2VhY2hfZW50
cnkoYm8sICZleGVjLT51bnJlZl9saXN0LCB1bnJlZl9oZWFkKSB7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vdmdlbS92Z2VtX2ZlbmNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vdmdlbS92Z2Vt
X2ZlbmNlLmMKaW5kZXggMjkwMmRjNmU2NGZhLi5jYjVlNzMxZDA3YWYgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS92Z2VtL3ZnZW1fZmVuY2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vdmdl
bS92Z2VtX2ZlbmNlLmMKQEAgLTE2Myw3ICsxNjMsNyBAQCBpbnQgdmdlbV9mZW5jZV9hdHRhY2hf
aW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwKIAlpZiAoYXJnLT5mbGFncyAmIFZHRU1fRkVO
Q0VfV1JJVEUpCiAJCWRtYV9yZXN2X2FkZF9leGNsX2ZlbmNlKHJlc3YsIGZlbmNlKTsKIAllbHNl
IGlmICgocmV0ID0gZG1hX3Jlc3ZfcmVzZXJ2ZV9zaGFyZWQocmVzdiwgMSkpID09IDApCi0JCWRt
YV9yZXN2X2FkZF9zaGFyZWRfZmVuY2UocmVzdiwgZmVuY2UpOworCQlkbWFfcmVzdl9hZGRfc2hh
cmVkKHJlc3YsIGZlbmNlLCBETUFfUkVTVl9VU0FHRV9SRUFEKTsKIAlkbWFfcmVzdl91bmxvY2so
cmVzdik7CiAKIAkvKiBSZWNvcmQgdGhlIGZlbmNlIGluIG91ciBpZHIgZm9yIGxhdGVyIHNpZ25h
bGluZyAqLwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oIGIvaW5jbHVkZS9s
aW51eC9kbWEtcmVzdi5oCmluZGV4IGJiNjkxMWJhYWMzZC4uZTVhZmZmYWVjNTc5IDEwMDY0NAot
LS0gYS9pbmNsdWRlL2xpbnV4L2RtYS1yZXN2LmgKKysrIGIvaW5jbHVkZS9saW51eC9kbWEtcmVz
di5oCkBAIC00OSw2ICs0OSwyMCBAQCBzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdDsKIAogZXh0ZXJuIHN0
cnVjdCB3d19jbGFzcyByZXNlcnZhdGlvbl93d19jbGFzczsKIAorLyoqCisgKiBlbnVtIGRtYV9y
ZXN2X3VzYWdlIC0gaG93IGEgRE1BIHJlc291cmNlIGlzIHVzZWQgZm9yIGltcGxpY2l0IHN5bmMK
KyAqIEBETUFfUkVTVl9VU0FHRV9OT05FOiBPbmx5IGZvciBtZW1vcnkgbWFuYWdlbWVudAorICog
QERNQV9SRVNWX1VTQUdFX1JFQUQ6IFJlYWQgb25seSBhY2Nlc3MKKyAqIEBETUFfUkVTVl9VU0FH
RV9XUklURTogV3JpdGUgb25seSBhY2Nlc3MKKyAqIEBETUFfUkVTVl9VU0FHRV9SVzogQm90aCBy
ZWFkIGFuZCB3cml0ZSBhY2Nlc3MKKyAqLworZW51bSBkbWFfcmVzdl91c2FnZSB7CisJRE1BX1JF
U1ZfVVNBR0VfTk9ORQk9IDAsCisJRE1BX1JFU1ZfVVNBR0VfUkVBRAk9IDEgPDwgMCwKKwlETUFf
UkVTVl9VU0FHRV9XUklURQk9IDEgPDwgMSwKKwlETUFfUkVTVl9VU0FHRV9SVwk9IChETUFfUkVT
Vl9VU0FHRV9SRUFEIHwgRE1BX1JFU1ZfVVNBR0VfV1JJVEUpCit9OworCiAvKioKICAqIHN0cnVj
dCBkbWFfcmVzdiAtIGEgcmVzZXJ2YXRpb24gb2JqZWN0IG1hbmFnZXMgZmVuY2VzIGZvciBhIGJ1
ZmZlcgogICogQGxvY2s6IHVwZGF0ZSBzaWRlIGxvY2sKQEAgLTY2LDYgKzgwLDcgQEAgc3RydWN0
IGRtYV9yZXN2IHsKIAogc3RydWN0IGRtYV9yZXN2X2N1cnNvciB7CiAJc3RydWN0IGRtYV9yZXN2
X2xpc3QgKmZlbmNlczsKKwllbnVtIGRtYV9yZXN2X3VzYWdlIHVzYWdlOwogCXVuc2lnbmVkIGlu
dCBpOwogfTsKIApAQCAtMjU5LDkgKzI3NCwxMSBAQCBkbWFfcmVzdl9nZXRfZXhjbF9yY3Uoc3Ry
dWN0IGRtYV9yZXN2ICpvYmopCiB2b2lkIGRtYV9yZXN2X2luaXQoc3RydWN0IGRtYV9yZXN2ICpv
YmopOwogdm9pZCBkbWFfcmVzdl9maW5pKHN0cnVjdCBkbWFfcmVzdiAqb2JqKTsKIGludCBkbWFf
cmVzdl9yZXNlcnZlX3NoYXJlZChzdHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgdW5zaWduZWQgaW50IG51
bV9mZW5jZXMpOwotdm9pZCBkbWFfcmVzdl9hZGRfc2hhcmVkX2ZlbmNlKHN0cnVjdCBkbWFfcmVz
diAqb2JqLCBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSk7Cit2b2lkIGRtYV9yZXN2X2FkZF9zaGFy
ZWQoc3RydWN0IGRtYV9yZXN2ICpvYmosIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLAorCQkJIGVu
dW0gZG1hX3Jlc3ZfdXNhZ2UgdXNhZ2UpOwogdm9pZCBkbWFfcmVzdl9yZXBsYWNlX3NoYXJlZChz
dHJ1Y3QgZG1hX3Jlc3YgKm9iaiwgdWludDY0X3QgY29udGV4dCwKLQkJCSAgICAgc3RydWN0IGRt
YV9mZW5jZSAqZmVuY2UpOworCQkJICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwKKwkJCSAg
ICAgZW51bSBkbWFfcmVzdl91c2FnZSB1c2FnZSk7CiAKIHZvaWQgZG1hX3Jlc3ZfYWRkX2V4Y2xf
ZmVuY2Uoc3RydWN0IGRtYV9yZXN2ICpvYmosIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKTsKIAot
LSAKMi4yNS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdApMaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5v
cmcKaHR0cHM6Ly9saXN0cy5saW5hcm8ub3JnL21haWxtYW4vbGlzdGluZm8vbGluYXJvLW1tLXNp
Zwo=
