Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id B92912FF29D
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 21 Jan 2021 18:59:29 +0100 (CET)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id D4BB76093B
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 21 Jan 2021 17:59:28 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id C5FD86673C; Thu, 21 Jan 2021 17:59:28 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_NONE,RCVD_IN_MSPIKE_H3,RCVD_IN_MSPIKE_WL,SPF_HELO_NONE
	autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 4CD0C66738;
	Thu, 21 Jan 2021 17:56:25 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 1A62A6093B
 for <linaro-mm-sig@lists.linaro.org>; Thu, 21 Jan 2021 17:56:10 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 03F146674B; Thu, 21 Jan 2021 17:56:10 +0000 (UTC)
Received: from mail-pj1-f41.google.com (mail-pj1-f41.google.com
 [209.85.216.41])
 by lists.linaro.org (Postfix) with ESMTPS id 64DA06093B
 for <linaro-mm-sig@lists.linaro.org>; Thu, 21 Jan 2021 17:55:18 +0000 (UTC)
Received: by mail-pj1-f41.google.com with SMTP id cq1so2122250pjb.4
 for <linaro-mm-sig@lists.linaro.org>; Thu, 21 Jan 2021 09:55:18 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:from:to:cc:subject:date:message-id
 :in-reply-to:references:mime-version:content-transfer-encoding;
 bh=sqZNw/T1J/E/9UGmlJLcTnXPapVNbINXggtl16AjclU=;
 b=BG8lckhV2UvcTZHg53RNCsq8jQ0P3jFpgnHmkIWsAiE/WVvzrEokWBzJEWpgDgPC2P
 H9lD1VjXy0HWiO1o4nkTYuo7PqS8nwu+27ftcSMJ/AvKSzMGndJY/04qsXii1Gl7Ubs+
 w4+HH82S5tbzMoTXBk6oJGW6xY429IFF72Qj4M6dpzh8c60Y6lp3Y3u/AN6MnaVKqtSs
 UsGWCPLtp8CiXBslxkKAtdXDvrP1sutsFrvgfhs1DA4Lx6BfOLL0kQvlkuNb8CK/aNH/
 jnah5k/VgQMrmByq+qdvkNtCY9h0QTRtptSfTITBO2qZ/3ovIXZmi9lZDhsGQIDslx8s
 GjLw==
X-Gm-Message-State: AOAM532emIA6zRZX9UnQ5KpA2vdIeW0zJi/+1hyM3+J6ZJGNBEiobKAe
 0LR0IOruDaIvYc44JEF29xA=
X-Google-Smtp-Source: ABdhPJwcvbV7XJT44syWS5zibxqABA1MBF0Lh0RXbsqV2BWzbyFvIg56cOzQqhIvYUwdVeRTy/K02g==
X-Received: by 2002:a17:90a:fc6:: with SMTP id 64mr576038pjz.79.1611251717456; 
 Thu, 21 Jan 2021 09:55:17 -0800 (PST)
Received: from bbox-1.mtv.corp.google.com
 ([2620:15c:211:201:74d0:bb24:e25e:dc4d])
 by smtp.gmail.com with ESMTPSA id t2sm6897317pju.19.2021.01.21.09.55.15
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 21 Jan 2021 09:55:16 -0800 (PST)
From: Minchan Kim <minchan@kernel.org>
To: Andrew Morton <akpm@linux-foundation.org>
Date: Thu, 21 Jan 2021 09:55:02 -0800
Message-Id: <20210121175502.274391-5-minchan@kernel.org>
X-Mailer: git-send-email 2.30.0.296.g2bfb1c46d8-goog
In-Reply-To: <20210121175502.274391-1-minchan@kernel.org>
References: <20210121175502.274391-1-minchan@kernel.org>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: devicetree@vger.kernel.org, mhocko@suse.com, linux-media@vger.kernel.org,
 david@redhat.com, Minchan Kim <minchan@kernel.org>,
 LKML <linux-kernel@vger.kernel.org>, hch@infradead.org,
 linux-mm <linux-mm@kvack.org>, robh+dt@kernel.org, john.stultz@linaro.org,
 joaodias@google.com, hridya@google.com, pullip.cho@samsung.com,
 surenb@google.com, linaro-mm-sig@lists.linaro.org, hyesoo.yu@samsung.com
Subject: [Linaro-mm-sig] [PATCH v4 4/4] dma-buf: heaps: add chunk heap to
	dmabuf heaps
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

RnJvbTogSHllc29vIFl1IDxoeWVzb28ueXVAc2Ftc3VuZy5jb20+CgpUaGlzIHBhdGNoIHN1cHBv
cnRzIGNodW5rIGhlYXAgdGhhdCBhbGxvY2F0ZXMgdGhlIGJ1ZmZlcnMgdGhhdAphcnJhbmdlZCBp
bnRvIGEgbGlzdCBhIGZpeGVkIHNpemUgY2h1bmtzIHRha2VuIGZyb20gQ01BLgoKVGhlIGNodW5r
IGhlYXAgZHJpdmVyIGlzIGJvdW5kIGRpcmVjdGx5IHRvIGEgcmVzZXJ2ZWRfbWVtb3J5Cm5vZGUg
YnkgZm9sbG93aW5nIFJvYiBIZXJyaW5nJ3Mgc3VnZ2VzdGlvbiBpbiBbMV0uCgpbMV0gaHR0cHM6
Ly9sb3JlLmtlcm5lbC5vcmcvbGttbC8yMDE5MTAyNTIyNTAwOS41MDMwNS0yLWpvaG4uc3R1bHR6
QGxpbmFyby5vcmcvVC8jbTNkYzYzYWNkMzNmZWEyNjlhNTg0ZjQzYmI3OTlhODc2ZjBiMmI0NWQK
ClJldmlld2VkLWJ5OiBTdXJlbiBCYWdoZGFzYXJ5YW4gPHN1cmVuYkBnb29nbGUuY29tPgpTaWdu
ZWQtb2ZmLWJ5OiBIeWVzb28gWXUgPGh5ZXNvby55dUBzYW1zdW5nLmNvbT4KU2lnbmVkLW9mZi1i
eTogSHJpZHlhIFZhbHNhcmFqdSA8aHJpZHlhQGdvb2dsZS5jb20+ClNpZ25lZC1vZmYtYnk6IE1p
bmNoYW4gS2ltIDxtaW5jaGFuQGtlcm5lbC5vcmc+Ci0tLQogZHJpdmVycy9kbWEtYnVmL2hlYXBz
L0tjb25maWcgICAgICB8ICAgOCArCiBkcml2ZXJzL2RtYS1idWYvaGVhcHMvTWFrZWZpbGUgICAg
IHwgICAxICsKIGRyaXZlcnMvZG1hLWJ1Zi9oZWFwcy9jaHVua19oZWFwLmMgfCA0OTIgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwgNTAxIGluc2VydGlvbnMo
KykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL2RtYS1idWYvaGVhcHMvY2h1bmtfaGVhcC5j
CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVmL2hlYXBzL0tjb25maWcgYi9kcml2ZXJzL2Rt
YS1idWYvaGVhcHMvS2NvbmZpZwppbmRleCBhNWVlZjA2YzQyMjYuLmU5NTk1ZTI2ZjgzMSAxMDA2
NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL2hlYXBzL0tjb25maWcKKysrIGIvZHJpdmVycy9kbWEt
YnVmL2hlYXBzL0tjb25maWcKQEAgLTEyLDMgKzEyLDExIEBAIGNvbmZpZyBETUFCVUZfSEVBUFNf
Q01BCiAJICBDaG9vc2UgdGhpcyBvcHRpb24gdG8gZW5hYmxlIGRtYS1idWYgQ01BIGhlYXAuIFRo
aXMgaGVhcCBpcyBiYWNrZWQKIAkgIGJ5IHRoZSBDb250aWd1b3VzIE1lbW9yeSBBbGxvY2F0b3Ig
KENNQSkuIElmIHlvdXIgc3lzdGVtIGhhcyB0aGVzZQogCSAgcmVnaW9ucywgeW91IHNob3VsZCBz
YXkgWSBoZXJlLgorCitjb25maWcgRE1BQlVGX0hFQVBTX0NIVU5LCisJYm9vbCAiRE1BLUJVRiBD
SFVOSyBIZWFwIgorCWRlcGVuZHMgb24gRE1BQlVGX0hFQVBTICYmIERNQV9DTUEKKwloZWxwCisJ
ICBDaG9vc2UgdGhpcyBvcHRpb24gdG8gZW5hYmxlIGRtYS1idWYgQ0hVTksgaGVhcC4gVGhpcyBo
ZWFwIGlzIGJhY2tlZAorCSAgYnkgdGhlIENvbnRpZ3VvdXMgTWVtb3J5IEFsbG9jYXRvciAoQ01B
KSBhbmQgYWxsb2NhdGVzIHRoZSBidWZmZXJzIHRoYXQKKwkgIGFyZSBhcnJhbmdlZCBpbnRvIGEg
bGlzdCBvZiBmaXhlZCBzaXplIGNodW5rcyB0YWtlbiBmcm9tIENNQS4KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZG1hLWJ1Zi9oZWFwcy9NYWtlZmlsZSBiL2RyaXZlcnMvZG1hLWJ1Zi9oZWFwcy9NYWtl
ZmlsZQppbmRleCA5NzQ0Njc3OTEwMzIuLjhmYWE2Y2ZkYzBjNSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9kbWEtYnVmL2hlYXBzL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9oZWFwcy9NYWtl
ZmlsZQpAQCAtMSwzICsxLDQgQEAKICMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAK
IG9iai0kKENPTkZJR19ETUFCVUZfSEVBUFNfU1lTVEVNKQkrPSBzeXN0ZW1faGVhcC5vCiBvYmot
JChDT05GSUdfRE1BQlVGX0hFQVBTX0NNQSkJCSs9IGNtYV9oZWFwLm8KK29iai0kKENPTkZJR19E
TUFCVUZfSEVBUFNfQ0hVTkspCSs9IGNodW5rX2hlYXAubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9k
bWEtYnVmL2hlYXBzL2NodW5rX2hlYXAuYyBiL2RyaXZlcnMvZG1hLWJ1Zi9oZWFwcy9jaHVua19o
ZWFwLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4xNWRmNDJhY2Vl
NGIKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2RtYS1idWYvaGVhcHMvY2h1bmtfaGVhcC5j
CkBAIC0wLDAgKzEsNDkyIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMAor
LyoKKyAqIERNQS1CVUYgY2h1bmsgaGVhcCBleHBvcnRlcgorICoKKyAqIENvcHlyaWdodCAoYykg
MjAyMCBTYW1zdW5nIEVsZWN0cm9uaWNzIENvLiwgTHRkLgorICogQXV0aG9yOiA8aHllc29vLnl1
QHNhbXN1bmcuY29tPiBmb3IgU2Ftc3VuZyBFbGVjdHJvbmljcy4KKyAqLworCisjaW5jbHVkZSA8
bGludXgvY21hLmg+CisjaW5jbHVkZSA8bGludXgvZGV2aWNlLmg+CisjaW5jbHVkZSA8bGludXgv
ZG1hLWJ1Zi5oPgorI2luY2x1ZGUgPGxpbnV4L2RtYS1oZWFwLmg+CisjaW5jbHVkZSA8bGludXgv
ZG1hLW1hcHBpbmcuaD4KKyNpbmNsdWRlIDxsaW51eC9kbWEtbWFwLW9wcy5oPgorI2luY2x1ZGUg
PGxpbnV4L2Vyci5oPgorI2luY2x1ZGUgPGxpbnV4L2Vycm5vLmg+CisjaW5jbHVkZSA8bGludXgv
aGlnaG1lbS5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L29m
Lmg+CisjaW5jbHVkZSA8bGludXgvb2ZfZmR0Lmg+CisjaW5jbHVkZSA8bGludXgvb2ZfcmVzZXJ2
ZWRfbWVtLmg+CisjaW5jbHVkZSA8bGludXgvc2NhdHRlcmxpc3QuaD4KKyNpbmNsdWRlIDxsaW51
eC9zY2hlZC9zaWduYWwuaD4KKyNpbmNsdWRlIDxsaW51eC9zbGFiLmg+CisjaW5jbHVkZSA8bGlu
dXgvdm1hbGxvYy5oPgorCitzdHJ1Y3QgY2h1bmtfaGVhcCB7CisJc3RydWN0IGRtYV9oZWFwICpo
ZWFwOworCXVpbnQzMl90IG9yZGVyOworCXN0cnVjdCBjbWEgKmNtYTsKK307CisKK3N0cnVjdCBj
aHVua19oZWFwX2J1ZmZlciB7CisJc3RydWN0IGNodW5rX2hlYXAgKmhlYXA7CisJc3RydWN0IGxp
c3RfaGVhZCBhdHRhY2htZW50czsKKwlzdHJ1Y3QgbXV0ZXggbG9jazsKKwlzdHJ1Y3Qgc2dfdGFi
bGUgc2dfdGFibGU7CisJdW5zaWduZWQgbG9uZyBsZW47CisJaW50IHZtYXBfY250OworCXZvaWQg
KnZhZGRyOworfTsKKworc3RydWN0IGNodW5rX2hlYXBfYXR0YWNobWVudCB7CisJc3RydWN0IGRl
dmljZSAqZGV2OworCXN0cnVjdCBzZ190YWJsZSAqdGFibGU7CisJc3RydWN0IGxpc3RfaGVhZCBs
aXN0OworCWJvb2wgbWFwcGVkOworfTsKKworc3RydWN0IGNodW5rX2hlYXAgY2h1bmtfaGVhcHNb
TUFYX0NNQV9BUkVBU107Cit1bnNpZ25lZCBpbnQgY2h1bmtfaGVhcF9jb3VudDsKKworc3RhdGlj
IHN0cnVjdCBzZ190YWJsZSAqZHVwX3NnX3RhYmxlKHN0cnVjdCBzZ190YWJsZSAqdGFibGUpCit7
CisJc3RydWN0IHNnX3RhYmxlICpuZXdfdGFibGU7CisJaW50IHJldCwgaTsKKwlzdHJ1Y3Qgc2Nh
dHRlcmxpc3QgKnNnLCAqbmV3X3NnOworCisJbmV3X3RhYmxlID0ga3phbGxvYyhzaXplb2YoKm5l
d190YWJsZSksIEdGUF9LRVJORUwpOworCWlmICghbmV3X3RhYmxlKQorCQlyZXR1cm4gRVJSX1BU
UigtRU5PTUVNKTsKKworCXJldCA9IHNnX2FsbG9jX3RhYmxlKG5ld190YWJsZSwgdGFibGUtPm9y
aWdfbmVudHMsIEdGUF9LRVJORUwpOworCWlmIChyZXQpIHsKKwkJa2ZyZWUobmV3X3RhYmxlKTsK
KwkJcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7CisJfQorCisJbmV3X3NnID0gbmV3X3RhYmxlLT5z
Z2w7CisJZm9yX2VhY2hfc2d0YWJsZV9zZyh0YWJsZSwgc2csIGkpIHsKKwkJc2dfc2V0X3BhZ2Uo
bmV3X3NnLCBzZ19wYWdlKHNnKSwgc2ctPmxlbmd0aCwgc2ctPm9mZnNldCk7CisJCW5ld19zZyA9
IHNnX25leHQobmV3X3NnKTsKKwl9CisKKwlyZXR1cm4gbmV3X3RhYmxlOworfQorCitzdGF0aWMg
aW50IGNodW5rX2hlYXBfYXR0YWNoKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCBkbWFf
YnVmX2F0dGFjaG1lbnQgKmF0dGFjaG1lbnQpCit7CisJc3RydWN0IGNodW5rX2hlYXBfYnVmZmVy
ICpidWZmZXIgPSBkbWFidWYtPnByaXY7CisJc3RydWN0IGNodW5rX2hlYXBfYXR0YWNobWVudCAq
YTsKKwlzdHJ1Y3Qgc2dfdGFibGUgKnRhYmxlOworCisJYSA9IGt6YWxsb2Moc2l6ZW9mKCphKSwg
R0ZQX0tFUk5FTCk7CisJaWYgKCFhKQorCQlyZXR1cm4gLUVOT01FTTsKKworCXRhYmxlID0gZHVw
X3NnX3RhYmxlKCZidWZmZXItPnNnX3RhYmxlKTsKKwlpZiAoSVNfRVJSKHRhYmxlKSkgeworCQlr
ZnJlZShhKTsKKwkJcmV0dXJuIC1FTk9NRU07CisJfQorCisJYS0+dGFibGUgPSB0YWJsZTsKKwlh
LT5kZXYgPSBhdHRhY2htZW50LT5kZXY7CisKKwlhdHRhY2htZW50LT5wcml2ID0gYTsKKworCW11
dGV4X2xvY2soJmJ1ZmZlci0+bG9jayk7CisJbGlzdF9hZGQoJmEtPmxpc3QsICZidWZmZXItPmF0
dGFjaG1lbnRzKTsKKwltdXRleF91bmxvY2soJmJ1ZmZlci0+bG9jayk7CisKKwlyZXR1cm4gMDsK
K30KKworc3RhdGljIHZvaWQgY2h1bmtfaGVhcF9kZXRhY2goc3RydWN0IGRtYV9idWYgKmRtYWJ1
Ziwgc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNobWVudCkKK3sKKwlzdHJ1Y3QgY2h1
bmtfaGVhcF9idWZmZXIgKmJ1ZmZlciA9IGRtYWJ1Zi0+cHJpdjsKKwlzdHJ1Y3QgY2h1bmtfaGVh
cF9hdHRhY2htZW50ICphID0gYXR0YWNobWVudC0+cHJpdjsKKworCW11dGV4X2xvY2soJmJ1ZmZl
ci0+bG9jayk7CisJbGlzdF9kZWwoJmEtPmxpc3QpOworCW11dGV4X3VubG9jaygmYnVmZmVyLT5s
b2NrKTsKKworCXNnX2ZyZWVfdGFibGUoYS0+dGFibGUpOworCWtmcmVlKGEtPnRhYmxlKTsKKwlr
ZnJlZShhKTsKK30KKworc3RhdGljIHN0cnVjdCBzZ190YWJsZSAqY2h1bmtfaGVhcF9tYXBfZG1h
X2J1ZihzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2htZW50LAorCQkJCQkgICAgICAg
ZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyZWN0aW9uKQoreworCXN0cnVjdCBjaHVua19oZWFw
X2F0dGFjaG1lbnQgKmEgPSBhdHRhY2htZW50LT5wcml2OworCXN0cnVjdCBzZ190YWJsZSAqdGFi
bGUgPSBhLT50YWJsZTsKKwlpbnQgcmV0OworCisJaWYgKGEtPm1hcHBlZCkKKwkJcmV0dXJuIHRh
YmxlOworCisJcmV0ID0gZG1hX21hcF9zZ3RhYmxlKGF0dGFjaG1lbnQtPmRldiwgdGFibGUsIGRp
cmVjdGlvbiwgMCk7CisJaWYgKHJldCkKKwkJcmV0dXJuIEVSUl9QVFIocmV0KTsKKworCWEtPm1h
cHBlZCA9IHRydWU7CisJcmV0dXJuIHRhYmxlOworfQorCitzdGF0aWMgdm9pZCBjaHVua19oZWFw
X3VubWFwX2RtYV9idWYoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNobWVudCwKKwkJ
CQkgICAgIHN0cnVjdCBzZ190YWJsZSAqdGFibGUsCisJCQkJICAgICBlbnVtIGRtYV9kYXRhX2Rp
cmVjdGlvbiBkaXJlY3Rpb24pCit7CisJc3RydWN0IGNodW5rX2hlYXBfYXR0YWNobWVudCAqYSA9
IGF0dGFjaG1lbnQtPnByaXY7CisKKwlhLT5tYXBwZWQgPSBmYWxzZTsKKwlkbWFfdW5tYXBfc2d0
YWJsZShhdHRhY2htZW50LT5kZXYsIHRhYmxlLCBkaXJlY3Rpb24sIDApOworfQorCitzdGF0aWMg
aW50IGNodW5rX2hlYXBfZG1hX2J1Zl9iZWdpbl9jcHVfYWNjZXNzKHN0cnVjdCBkbWFfYnVmICpk
bWFidWYsCisJCQkJCQllbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXJlY3Rpb24pCit7CisJc3Ry
dWN0IGNodW5rX2hlYXBfYnVmZmVyICpidWZmZXIgPSBkbWFidWYtPnByaXY7CisJc3RydWN0IGNo
dW5rX2hlYXBfYXR0YWNobWVudCAqYTsKKworCW11dGV4X2xvY2soJmJ1ZmZlci0+bG9jayk7CisK
KwlpZiAoYnVmZmVyLT52bWFwX2NudCkKKwkJaW52YWxpZGF0ZV9rZXJuZWxfdm1hcF9yYW5nZShi
dWZmZXItPnZhZGRyLCBidWZmZXItPmxlbik7CisKKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KGEsICZi
dWZmZXItPmF0dGFjaG1lbnRzLCBsaXN0KSB7CisJCWlmICghYS0+bWFwcGVkKQorCQkJY29udGlu
dWU7CisJCWRtYV9zeW5jX3NndGFibGVfZm9yX2NwdShhLT5kZXYsIGEtPnRhYmxlLCBkaXJlY3Rp
b24pOworCX0KKwltdXRleF91bmxvY2soJmJ1ZmZlci0+bG9jayk7CisKKwlyZXR1cm4gMDsKK30K
Kworc3RhdGljIGludCBjaHVua19oZWFwX2RtYV9idWZfZW5kX2NwdV9hY2Nlc3Moc3RydWN0IGRt
YV9idWYgKmRtYWJ1ZiwKKwkJCQkJICAgICAgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyZWN0
aW9uKQoreworCXN0cnVjdCBjaHVua19oZWFwX2J1ZmZlciAqYnVmZmVyID0gZG1hYnVmLT5wcml2
OworCXN0cnVjdCBjaHVua19oZWFwX2F0dGFjaG1lbnQgKmE7CisKKwltdXRleF9sb2NrKCZidWZm
ZXItPmxvY2spOworCisJaWYgKGJ1ZmZlci0+dm1hcF9jbnQpCisJCWZsdXNoX2tlcm5lbF92bWFw
X3JhbmdlKGJ1ZmZlci0+dmFkZHIsIGJ1ZmZlci0+bGVuKTsKKworCWxpc3RfZm9yX2VhY2hfZW50
cnkoYSwgJmJ1ZmZlci0+YXR0YWNobWVudHMsIGxpc3QpIHsKKwkJaWYgKCFhLT5tYXBwZWQpCisJ
CQljb250aW51ZTsKKwkJZG1hX3N5bmNfc2d0YWJsZV9mb3JfZGV2aWNlKGEtPmRldiwgYS0+dGFi
bGUsIGRpcmVjdGlvbik7CisJfQorCW11dGV4X3VubG9jaygmYnVmZmVyLT5sb2NrKTsKKworCXJl
dHVybiAwOworfQorCitzdGF0aWMgaW50IGNodW5rX2hlYXBfbW1hcChzdHJ1Y3QgZG1hX2J1ZiAq
ZG1hYnVmLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSkKK3sKKwlzdHJ1Y3QgY2h1bmtfaGVh
cF9idWZmZXIgKmJ1ZmZlciA9IGRtYWJ1Zi0+cHJpdjsKKwlzdHJ1Y3Qgc2dfdGFibGUgKnRhYmxl
ID0gJmJ1ZmZlci0+c2dfdGFibGU7CisJdW5zaWduZWQgbG9uZyBhZGRyID0gdm1hLT52bV9zdGFy
dDsKKwlzdHJ1Y3Qgc2dfcGFnZV9pdGVyIHBpdGVyOworCWludCByZXQ7CisKKwlmb3JfZWFjaF9z
Z3RhYmxlX3BhZ2UodGFibGUsICZwaXRlciwgdm1hLT52bV9wZ29mZikgeworCQlzdHJ1Y3QgcGFn
ZSAqcGFnZSA9IHNnX3BhZ2VfaXRlcl9wYWdlKCZwaXRlcik7CisKKwkJcmV0ID0gcmVtYXBfcGZu
X3JhbmdlKHZtYSwgYWRkciwgcGFnZV90b19wZm4ocGFnZSksIFBBR0VfU0laRSwKKwkJCQkgICAg
ICB2bWEtPnZtX3BhZ2VfcHJvdCk7CisJCWlmIChyZXQpCisJCQlyZXR1cm4gcmV0OworCQlhZGRy
ICs9IFBBR0VfU0laRTsKKwkJaWYgKGFkZHIgPj0gdm1hLT52bV9lbmQpCisJCQlyZXR1cm4gMDsK
Kwl9CisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkICpjaHVua19oZWFwX2RvX3ZtYXAoc3Ry
dWN0IGNodW5rX2hlYXBfYnVmZmVyICpidWZmZXIpCit7CisJc3RydWN0IHNnX3RhYmxlICp0YWJs
ZSA9ICZidWZmZXItPnNnX3RhYmxlOworCWludCBucGFnZXMgPSBQQUdFX0FMSUdOKGJ1ZmZlci0+
bGVuKSAvIFBBR0VfU0laRTsKKwlzdHJ1Y3QgcGFnZSAqKnBhZ2VzID0gdm1hbGxvYyhzaXplb2Yo
c3RydWN0IHBhZ2UgKikgKiBucGFnZXMpOworCXN0cnVjdCBwYWdlICoqdG1wID0gcGFnZXM7CisJ
c3RydWN0IHNnX3BhZ2VfaXRlciBwaXRlcjsKKwl2b2lkICp2YWRkcjsKKworCWlmICghcGFnZXMp
CisJCXJldHVybiBFUlJfUFRSKC1FTk9NRU0pOworCisJZm9yX2VhY2hfc2d0YWJsZV9wYWdlKHRh
YmxlLCAmcGl0ZXIsIDApIHsKKwkJV0FSTl9PTih0bXAgLSBwYWdlcyA+PSBucGFnZXMpOworCQkq
dG1wKysgPSBzZ19wYWdlX2l0ZXJfcGFnZSgmcGl0ZXIpOworCX0KKworCXZhZGRyID0gdm1hcChw
YWdlcywgbnBhZ2VzLCBWTV9NQVAsIFBBR0VfS0VSTkVMKTsKKwl2ZnJlZShwYWdlcyk7CisKKwlp
ZiAoIXZhZGRyKQorCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKKworCXJldHVybiB2YWRkcjsK
K30KKworc3RhdGljIGludCBjaHVua19oZWFwX3ZtYXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwg
c3RydWN0IGRtYV9idWZfbWFwICptYXApCit7CisJc3RydWN0IGNodW5rX2hlYXBfYnVmZmVyICpi
dWZmZXIgPSBkbWFidWYtPnByaXY7CisJdm9pZCAqdmFkZHI7CisKKwltdXRleF9sb2NrKCZidWZm
ZXItPmxvY2spOworCWlmIChidWZmZXItPnZtYXBfY250KSB7CisJCXZhZGRyID0gYnVmZmVyLT52
YWRkcjsKKwl9IGVsc2UgeworCQl2YWRkciA9IGNodW5rX2hlYXBfZG9fdm1hcChidWZmZXIpOwor
CQlpZiAoSVNfRVJSKHZhZGRyKSkgeworCQkJbXV0ZXhfdW5sb2NrKCZidWZmZXItPmxvY2spOwor
CisJCQlyZXR1cm4gUFRSX0VSUih2YWRkcik7CisJCX0KKwkJYnVmZmVyLT52YWRkciA9IHZhZGRy
OworCX0KKwlidWZmZXItPnZtYXBfY250Kys7CisJZG1hX2J1Zl9tYXBfc2V0X3ZhZGRyKG1hcCwg
dmFkZHIpOworCisJbXV0ZXhfdW5sb2NrKCZidWZmZXItPmxvY2spOworCisJcmV0dXJuIDA7Cit9
CisKK3N0YXRpYyB2b2lkIGNodW5rX2hlYXBfdnVubWFwKHN0cnVjdCBkbWFfYnVmICpkbWFidWYs
IHN0cnVjdCBkbWFfYnVmX21hcCAqbWFwKQoreworCXN0cnVjdCBjaHVua19oZWFwX2J1ZmZlciAq
YnVmZmVyID0gZG1hYnVmLT5wcml2OworCisJbXV0ZXhfbG9jaygmYnVmZmVyLT5sb2NrKTsKKwlp
ZiAoIS0tYnVmZmVyLT52bWFwX2NudCkgeworCQl2dW5tYXAoYnVmZmVyLT52YWRkcik7CisJCWJ1
ZmZlci0+dmFkZHIgPSBOVUxMOworCX0KKwltdXRleF91bmxvY2soJmJ1ZmZlci0+bG9jayk7Cit9
CisKK3N0YXRpYyB2b2lkIGNodW5rX2hlYXBfZG1hX2J1Zl9yZWxlYXNlKHN0cnVjdCBkbWFfYnVm
ICpkbWFidWYpCit7CisJc3RydWN0IGNodW5rX2hlYXBfYnVmZmVyICpidWZmZXIgPSBkbWFidWYt
PnByaXY7CisJc3RydWN0IGNodW5rX2hlYXAgKmNodW5rX2hlYXAgPSBidWZmZXItPmhlYXA7CisJ
c3RydWN0IHNnX3RhYmxlICp0YWJsZTsKKwlzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnOworCWludCBp
OworCisJdGFibGUgPSAmYnVmZmVyLT5zZ190YWJsZTsKKwlmb3JfZWFjaF9zZ3RhYmxlX3NnKHRh
YmxlLCBzZywgaSkKKwkJY21hX3JlbGVhc2UoY2h1bmtfaGVhcC0+Y21hLCBzZ19wYWdlKHNnKSwg
MSA8PCBjaHVua19oZWFwLT5vcmRlcik7CisJc2dfZnJlZV90YWJsZSh0YWJsZSk7CisJa2ZyZWUo
YnVmZmVyKTsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBkbWFfYnVmX29wcyBjaHVua19oZWFw
X2J1Zl9vcHMgPSB7CisJLmF0dGFjaCA9IGNodW5rX2hlYXBfYXR0YWNoLAorCS5kZXRhY2ggPSBj
aHVua19oZWFwX2RldGFjaCwKKwkubWFwX2RtYV9idWYgPSBjaHVua19oZWFwX21hcF9kbWFfYnVm
LAorCS51bm1hcF9kbWFfYnVmID0gY2h1bmtfaGVhcF91bm1hcF9kbWFfYnVmLAorCS5iZWdpbl9j
cHVfYWNjZXNzID0gY2h1bmtfaGVhcF9kbWFfYnVmX2JlZ2luX2NwdV9hY2Nlc3MsCisJLmVuZF9j
cHVfYWNjZXNzID0gY2h1bmtfaGVhcF9kbWFfYnVmX2VuZF9jcHVfYWNjZXNzLAorCS5tbWFwID0g
Y2h1bmtfaGVhcF9tbWFwLAorCS52bWFwID0gY2h1bmtfaGVhcF92bWFwLAorCS52dW5tYXAgPSBj
aHVua19oZWFwX3Z1bm1hcCwKKwkucmVsZWFzZSA9IGNodW5rX2hlYXBfZG1hX2J1Zl9yZWxlYXNl
LAorfTsKKworc3RhdGljIGludCBjaHVua19oZWFwX2FsbG9jYXRlKHN0cnVjdCBkbWFfaGVhcCAq
aGVhcCwgdW5zaWduZWQgbG9uZyBsZW4sCisJCQkgICAgICAgdW5zaWduZWQgbG9uZyBmZF9mbGFn
cywgdW5zaWduZWQgbG9uZyBoZWFwX2ZsYWdzKQoreworCXN0cnVjdCBjaHVua19oZWFwICpjaHVu
a19oZWFwID0gZG1hX2hlYXBfZ2V0X2RydmRhdGEoaGVhcCk7CisJc3RydWN0IGNodW5rX2hlYXBf
YnVmZmVyICpidWZmZXI7CisJREVGSU5FX0RNQV9CVUZfRVhQT1JUX0lORk8oZXhwX2luZm8pOwor
CXN0cnVjdCBkbWFfYnVmICpkbWFidWY7CisJc3RydWN0IHNnX3RhYmxlICp0YWJsZTsKKwlzdHJ1
Y3Qgc2NhdHRlcmxpc3QgKnNnOworCXN0cnVjdCBwYWdlICoqcGFnZXM7CisJdW5zaWduZWQgaW50
IGNodW5rX3NpemUgPSBQQUdFX1NJWkUgPDwgY2h1bmtfaGVhcC0+b3JkZXI7CisJdW5zaWduZWQg
aW50IGNvdW50LCBhbGxvY2VkID0gMDsKKwl1bnNpZ25lZCBpbnQgYWxsb2Nfb3JkZXIgPSBtYXhf
dCh1bnNpZ25lZCBpbnQsIHBhZ2VibG9ja19vcmRlciwgY2h1bmtfaGVhcC0+b3JkZXIpOworCXVu
c2lnbmVkIGludCBucl9jaHVua3NfcGVyX2FsbG9jID0gMSA8PCAoYWxsb2Nfb3JkZXIgLSBjaHVu
a19oZWFwLT5vcmRlcik7CisJZ2ZwX3QgZ2ZwX2ZsYWdzID0gR0ZQX0tFUk5FTHxfX0dGUF9OT1JF
VFJZOworCWludCByZXQgPSAtRU5PTUVNOworCXBnb2ZmX3QgcGc7CisKKwlidWZmZXIgPSBremFs
bG9jKHNpemVvZigqYnVmZmVyKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFidWZmZXIpCisJCXJldHVy
biByZXQ7CisKKwlJTklUX0xJU1RfSEVBRCgmYnVmZmVyLT5hdHRhY2htZW50cyk7CisJbXV0ZXhf
aW5pdCgmYnVmZmVyLT5sb2NrKTsKKwlidWZmZXItPmhlYXAgPSBjaHVua19oZWFwOworCWJ1ZmZl
ci0+bGVuID0gQUxJR04obGVuLCBjaHVua19zaXplKTsKKwljb3VudCA9IGJ1ZmZlci0+bGVuIC8g
Y2h1bmtfc2l6ZTsKKworCXBhZ2VzID0ga3ZtYWxsb2NfYXJyYXkoY291bnQsIHNpemVvZigqcGFn
ZXMpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIXBhZ2VzKQorCQlnb3RvIGVycl9wYWdlczsKKworCXdo
aWxlIChhbGxvY2VkIDwgY291bnQpIHsKKwkJc3RydWN0IHBhZ2UgKnBhZ2U7CisJCWludCBpOwor
CisJCXdoaWxlIChjb3VudCAtIGFsbG9jZWQgPCBucl9jaHVua3NfcGVyX2FsbG9jKSB7CisJCQlh
bGxvY19vcmRlci0tOworCQkJbnJfY2h1bmtzX3Blcl9hbGxvYyA+Pj0gMTsKKwkJfQorCisJCXBh
Z2UgPSBjbWFfYWxsb2MoY2h1bmtfaGVhcC0+Y21hLCAxIDw8IGFsbG9jX29yZGVyLAorCQkJCQlh
bGxvY19vcmRlciwgZ2ZwX2ZsYWdzKTsKKwkJaWYgKCFwYWdlKSB7CisJCQlpZiAoZ2ZwX2ZsYWdz
ICYgX19HRlBfTk9SRVRSWSkgeworCQkJCWdmcF9mbGFncyAmPSB+X19HRlBfTk9SRVRSWTsKKwkJ
CQljb250aW51ZTsKKwkJCX0KKwkJCWJyZWFrOworCQl9CisKKwkJZm9yIChpID0gMDsgaSA8IG5y
X2NodW5rc19wZXJfYWxsb2M7IGkrKywgYWxsb2NlZCsrKSB7CisJCQlwYWdlc1thbGxvY2VkXSA9
IHBhZ2U7CisJCQlwYWdlICs9IDEgPDwgY2h1bmtfaGVhcC0+b3JkZXI7CisJCX0KKwl9CisKKwlp
ZiAoYWxsb2NlZCA8IGNvdW50KQorCQlnb3RvIGVycl9hbGxvYzsKKworCXRhYmxlID0gJmJ1ZmZl
ci0+c2dfdGFibGU7CisJaWYgKHNnX2FsbG9jX3RhYmxlKHRhYmxlLCBjb3VudCwgR0ZQX0tFUk5F
TCkpCisJCWdvdG8gZXJyX2FsbG9jOworCisJc2cgPSB0YWJsZS0+c2dsOworCWZvciAocGcgPSAw
OyBwZyA8IGNvdW50OyBwZysrKSB7CisJCXNnX3NldF9wYWdlKHNnLCBwYWdlc1twZ10sIGNodW5r
X3NpemUsIDApOworCQlzZyA9IHNnX25leHQoc2cpOworCX0KKworCWV4cF9pbmZvLm9wcyA9ICZj
aHVua19oZWFwX2J1Zl9vcHM7CisJZXhwX2luZm8uc2l6ZSA9IGJ1ZmZlci0+bGVuOworCWV4cF9p
bmZvLmZsYWdzID0gZmRfZmxhZ3M7CisJZXhwX2luZm8ucHJpdiA9IGJ1ZmZlcjsKKwlkbWFidWYg
PSBkbWFfYnVmX2V4cG9ydCgmZXhwX2luZm8pOworCWlmIChJU19FUlIoZG1hYnVmKSkgeworCQly
ZXQgPSBQVFJfRVJSKGRtYWJ1Zik7CisJCWdvdG8gZXJyX2V4cG9ydDsKKwl9CisJa3ZmcmVlKHBh
Z2VzKTsKKworCXJldCA9IGRtYV9idWZfZmQoZG1hYnVmLCBmZF9mbGFncyk7CisJaWYgKHJldCA8
IDApIHsKKwkJZG1hX2J1Zl9wdXQoZG1hYnVmKTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlyZXR1
cm4gMDsKK2Vycl9leHBvcnQ6CisJc2dfZnJlZV90YWJsZSh0YWJsZSk7CitlcnJfYWxsb2M6CisJ
Zm9yIChwZyA9IDA7IHBnIDwgYWxsb2NlZDsgcGcrKykKKwkJY21hX3JlbGVhc2UoY2h1bmtfaGVh
cC0+Y21hLCBwYWdlc1twZ10sIDEgPDwgY2h1bmtfaGVhcC0+b3JkZXIpOworCWt2ZnJlZShwYWdl
cyk7CitlcnJfcGFnZXM6CisJa2ZyZWUoYnVmZmVyKTsKKworCXJldHVybiByZXQ7Cit9CisKK3N0
YXRpYyBjb25zdCBzdHJ1Y3QgZG1hX2hlYXBfb3BzIGNodW5rX2hlYXBfb3BzID0geworCS5hbGxv
Y2F0ZSA9IGNodW5rX2hlYXBfYWxsb2NhdGUsCit9OworCisjZGVmaW5lIENIVU5LX1BSRUZJWCAi
Y2h1bmstIgorCitzdGF0aWMgaW50IHJlZ2lzdGVyX2NodW5rX2hlYXAoc3RydWN0IGNodW5rX2hl
YXAgKmNodW5rX2hlYXBfaW5mbykKK3sKKwlzdHJ1Y3QgZG1hX2hlYXBfZXhwb3J0X2luZm8gZXhw
X2luZm87CisJY29uc3QgY2hhciAqbmFtZSA9IGNtYV9nZXRfbmFtZShjaHVua19oZWFwX2luZm8t
PmNtYSk7CisJc2l6ZV90IGxlbiA9IHN0cmxlbihDSFVOS19QUkVGSVgpICsgc3RybGVuKG5hbWUp
ICsgMTsKKwljaGFyICpidWYgPSBrbWFsbG9jKGxlbiwgR0ZQX0tFUk5FTCk7CisKKwlpZiAoIWJ1
ZikKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlzcHJpbnRmKGJ1ZiwgQ0hVTktfUFJFRklYIiVzIiwg
Y21hX2dldF9uYW1lKGNodW5rX2hlYXBfaW5mby0+Y21hKSk7CisJYnVmW2xlbl0gPSAnXDAnOwor
CisJZXhwX2luZm8ubmFtZSA9IGJ1ZjsKKwlleHBfaW5mby5uYW1lID0gY21hX2dldF9uYW1lKGNo
dW5rX2hlYXBfaW5mby0+Y21hKTsKKwlleHBfaW5mby5vcHMgPSAmY2h1bmtfaGVhcF9vcHM7CisJ
ZXhwX2luZm8ucHJpdiA9IGNodW5rX2hlYXBfaW5mbzsKKworCWNodW5rX2hlYXBfaW5mby0+aGVh
cCA9IGRtYV9oZWFwX2FkZCgmZXhwX2luZm8pOworCWlmIChJU19FUlIoY2h1bmtfaGVhcF9pbmZv
LT5oZWFwKSkgeworCQlrZnJlZShidWYpOworCQlyZXR1cm4gUFRSX0VSUihjaHVua19oZWFwX2lu
Zm8tPmhlYXApOworCX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IF9faW5pdCBjaHVu
a19oZWFwX2luaXQodm9pZCkKK3sKKwl1bnNpZ25lZCBpbnQgaTsKKworCWZvciAoaSA9IDA7IGkg
PCBjaHVua19oZWFwX2NvdW50OyBpKyspCisJCXJlZ2lzdGVyX2NodW5rX2hlYXAoJmNodW5rX2hl
YXBzW2ldKTsKKworCXJldHVybiAwOworfQorbW9kdWxlX2luaXQoY2h1bmtfaGVhcF9pbml0KTsK
KworI2lmZGVmIENPTkZJR19PRl9FQVJMWV9GTEFUVFJFRQorCitzdGF0aWMgaW50IF9faW5pdCBk
bWFidWZfY2h1bmtfaGVhcF9hcmVhX2luaXQoc3RydWN0IHJlc2VydmVkX21lbSAqcm1lbSkKK3sK
KwlpbnQgcmV0OworCXN0cnVjdCBjbWEgKmNtYTsKKwlzdHJ1Y3QgY2h1bmtfaGVhcCAqY2h1bmtf
aGVhcF9pbmZvOworCWNvbnN0IF9fYmUzMiAqY2h1bmtfb3JkZXI7CisKKwlwaHlzX2FkZHJfdCBh
bGlnbiA9IFBBR0VfU0laRSA8PCBtYXgoTUFYX09SREVSIC0gMSwgcGFnZWJsb2NrX29yZGVyKTsK
KwlwaHlzX2FkZHJfdCBtYXNrID0gYWxpZ24gLSAxOworCisJaWYgKChybWVtLT5iYXNlICYgbWFz
aykgfHwgKHJtZW0tPnNpemUgJiBtYXNrKSkgeworCQlwcl9lcnIoIkluY29ycmVjdCBhbGlnbm1l
bnQgZm9yIENNQSByZWdpb25cbiIpOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwlyZXQgPSBj
bWFfaW5pdF9yZXNlcnZlZF9tZW0ocm1lbS0+YmFzZSwgcm1lbS0+c2l6ZSwgMCwgcm1lbS0+bmFt
ZSwgJmNtYSk7CisJaWYgKHJldCkgeworCQlwcl9lcnIoIlJlc2VydmVkIG1lbW9yeTogdW5hYmxl
IHRvIHNldHVwIENNQSByZWdpb25cbiIpOworCQlyZXR1cm4gcmV0OworCX0KKworCS8qIEFyY2hp
dGVjdHVyZSBzcGVjaWZpYyBjb250aWd1b3VzIG1lbW9yeSBmaXh1cC4gKi8KKwlkbWFfY29udGln
dW91c19lYXJseV9maXh1cChybWVtLT5iYXNlLCBybWVtLT5zaXplKTsKKworCWNodW5rX2hlYXBf
aW5mbyA9ICZjaHVua19oZWFwc1tjaHVua19oZWFwX2NvdW50XTsKKwljaHVua19oZWFwX2luZm8t
PmNtYSA9IGNtYTsKKworCWNodW5rX29yZGVyID0gb2ZfZ2V0X2ZsYXRfZHRfcHJvcChybWVtLT5m
ZHRfbm9kZSwgImNodW5rLW9yZGVyIiwgTlVMTCk7CisKKwlpZiAoY2h1bmtfb3JkZXIpCisJCWNo
dW5rX2hlYXBfaW5mby0+b3JkZXIgPSBiZTMyX3RvX2NwdSgqY2h1bmtfb3JkZXIpOworCWVsc2UK
KwkJY2h1bmtfaGVhcF9pbmZvLT5vcmRlciA9IDQ7CisKKwljaHVua19oZWFwX2NvdW50Kys7CisK
KwlyZXR1cm4gMDsKK30KK1JFU0VSVkVETUVNX09GX0RFQ0xBUkUoZG1hYnVmX2NodW5rX2hlYXAs
ICJkbWFfaGVhcCxjaHVuayIsCisJCSAgICAgICBkbWFidWZfY2h1bmtfaGVhcF9hcmVhX2luaXQp
OworI2VuZGlmCisKK01PRFVMRV9ERVNDUklQVElPTigiRE1BLUJVRiBDaHVuayBIZWFwIik7CitN
T0RVTEVfTElDRU5TRSgiR1BMIHYyIik7Ci0tIAoyLjMwLjAuMjk2LmcyYmZiMWM0NmQ4LWdvb2cK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbmFyby1t
bS1zaWcgbWFpbGluZyBsaXN0CkxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZwpodHRwczov
L2xpc3RzLmxpbmFyby5vcmcvbWFpbG1hbi9saXN0aW5mby9saW5hcm8tbW0tc2lnCg==
