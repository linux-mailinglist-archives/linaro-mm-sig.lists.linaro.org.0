Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id BD73858D8B3
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  9 Aug 2022 14:22:52 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id AE5783F23A
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  9 Aug 2022 12:22:51 +0000 (UTC)
Received: from mail-ed1-f53.google.com (mail-ed1-f53.google.com [209.85.208.53])
	by lists.linaro.org (Postfix) with ESMTPS id 526D13EC14
	for <linaro-mm-sig@lists.linaro.org>; Tue,  9 Aug 2022 12:22:49 +0000 (UTC)
Received: by mail-ed1-f53.google.com with SMTP id z20so12954144edb.9
        for <linaro-mm-sig@lists.linaro.org>; Tue, 09 Aug 2022 05:22:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20210112;
        h=content-transfer-encoding:in-reply-to:from:references:cc:to
         :content-language:subject:user-agent:mime-version:date:message-id
         :from:to:cc;
        bh=ENuHlbjz1pAGwfnMCHPOCMjJ7lm1GDfyKj1z+dAIomI=;
        b=LMIaO6KtyGfCMjyVolJLKx6pqbNHzm3nbsNhqOHQndZno2haGHemi3OKK32fd8ySvw
         xgI+8JOLck1XBBmrsobUtHo8q+Yy6RQKem2rama65pGIowkD9JGg5hjeTSBzjNg8Wj/B
         HdmJ9PE9f4BtDpOV6+oT7BpKQhoyjSh6tyWfkSG/3QPKHXBRT9jQ9V1sNlzkmTabTQ6J
         V+NbP+XPgk6LB4GuLotNzXDERUjM0BaxjTyt5nDUg5ZIA0ZaG3PfCxpJINWR0Tq5/HRZ
         M524vztuqbClD1dkMf4OHIXJDQTbdzqDEltcfto09QtOkUPWJUdWc3eSn0glyWzhzcTp
         n6ig==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=content-transfer-encoding:in-reply-to:from:references:cc:to
         :content-language:subject:user-agent:mime-version:date:message-id
         :x-gm-message-state:from:to:cc;
        bh=ENuHlbjz1pAGwfnMCHPOCMjJ7lm1GDfyKj1z+dAIomI=;
        b=4XXArH3LqCXfcnZ62c+wGDQZlRR2BfdAIh6VkZiLdbTxzgtTTRguTFQfEW1gNNXVmA
         OMrSRmf1Ua6gGYcDNTRSqq8GDzAnKbyMvz7v4ayqyvvxqOBnmX9MHgEbD1eOUViskfxk
         isnamuOUP8TxvYWcYSXUz9+IGZp7CdRBW8itKa6BX7EcbfY+GKZPJSerxjMmZQ4Ggex3
         tLBKXHUc3wg4Rla7VNt79KjKfyBK00se8fA9MmzfQmxpH3RffeKS36/9iUs4o8/ceNpy
         iZ4EEtMGhXdWyfMqEVuMVuWWcjBkesc0RM5OEx/RrkEOZY1a9fz7K7WcbOb1wCAMnVuO
         m/WA==
X-Gm-Message-State: ACgBeo3Dai7Gsl6IYKnHQ5EYpN1AJWe1AW7TTVkBNmKHHxfC/gbsQdpS
	PLuN0vYxMBYo0sSdtNqPaDI=
X-Google-Smtp-Source: AA6agR6pH7ES5csxKm46AMTJYImmVr1iiIFX65pwfW8why81zsLtDKWioSrAedC4PXxv1rnvVNUAUg==
X-Received: by 2002:a05:6402:538a:b0:43a:298e:bc2b with SMTP id ew10-20020a056402538a00b0043a298ebc2bmr21686576edb.125.1660047768338;
        Tue, 09 Aug 2022 05:22:48 -0700 (PDT)
Received: from [192.168.178.21] (p57b0bd9f.dip0.t-ipconnect.de. [87.176.189.159])
        by smtp.gmail.com with ESMTPSA id cn15-20020a0564020caf00b0043ba0cf5dbasm5886236edb.2.2022.08.09.05.22.45
        (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
        Tue, 09 Aug 2022 05:22:47 -0700 (PDT)
Message-ID: <a08c001f-b0e8-4e7c-6d63-16b2a0e7a505@gmail.com>
Date: Tue, 9 Aug 2022 14:22:39 +0200
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101
 Thunderbird/91.11.0
Content-Language: en-US
To: Dmitry Osipenko <dmitry.osipenko@collabora.com>,
 David Airlie <airlied@linux.ie>, Gerd Hoffmann <kraxel@redhat.com>,
 Gurchetan Singh <gurchetansingh@chromium.org>, Chia-I Wu
 <olvaffe@gmail.com>, Daniel Vetter <daniel@ffwll.ch>,
 Daniel Almeida <daniel.almeida@collabora.com>,
 Gert Wollny <gert.wollny@collabora.com>,
 Gustavo Padovan <gustavo.padovan@collabora.com>,
 Daniel Stone <daniel@fooishbar.org>,
 Tomeu Vizoso <tomeu.vizoso@collabora.com>,
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 Maxime Ripard <mripard@kernel.org>, Thomas Zimmermann <tzimmermann@suse.de>,
 Rob Clark <robdclark@gmail.com>, Sumit Semwal <sumit.semwal@linaro.org>,
 =?UTF-8?Q?Christian_K=c3=b6nig?= <christian.koenig@amd.com>,
 "Pan, Xinhui" <Xinhui.Pan@amd.com>, Thierry Reding
 <thierry.reding@gmail.com>, Tomasz Figa <tfiga@chromium.org>,
 Marek Szyprowski <m.szyprowski@samsung.com>,
 Mauro Carvalho Chehab <mchehab@kernel.org>,
 Alex Deucher <alexander.deucher@amd.com>,
 Jani Nikula <jani.nikula@linux.intel.com>,
 Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
 Rodrigo Vivi <rodrigo.vivi@intel.com>,
 Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
 =?UTF-8?Q?Thomas_Hellstr=c3=b6m?= <thomas_os@shipmail.org>
References: <20220725151839.31622-1-dmitry.osipenko@collabora.com>
 <20220725151839.31622-3-dmitry.osipenko@collabora.com>
From: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>
In-Reply-To: <20220725151839.31622-3-dmitry.osipenko@collabora.com>
Message-ID-Hash: S3FP6NUQ4IQAIGQBCXYSVN5ACAXWAPLI
X-Message-ID-Hash: S3FP6NUQ4IQAIGQBCXYSVN5ACAXWAPLI
X-MailFrom: ckoenig.leichtzumerken@gmail.com
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
CC: dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org, Dmitry Osipenko <digetx@gmail.com>, linux-media@vger.kernel.org, linaro-mm-sig@lists.linaro.org, amd-gfx@lists.freedesktop.org, intel-gfx@lists.freedesktop.org, kernel@collabora.com, virtualization@lists.linux-foundation.org, spice-devel@lists.freedesktop.org, linux-rdma@vger.kernel.org, linux-arm-msm@vger.kernel.org
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] Re: [PATCH v2 2/5] drm/gem: Take reservation lock for vmap/vunmap operations
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/S3FP6NUQ4IQAIGQBCXYSVN5ACAXWAPLI/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"; format="flowed"
Content-Transfer-Encoding: base64

QW0gMjUuMDcuMjIgdW0gMTc6MTggc2NocmllYiBEbWl0cnkgT3NpcGVua286DQo+IFRoZSBuZXcg
Y29tbW9uIGRtYS1idWYgbG9ja2luZyBjb252ZW50aW9uIHdpbGwgcmVxdWlyZSBidWZmZXIgaW1w
b3J0ZXJzDQo+IHRvIGhvbGQgdGhlIHJlc2VydmF0aW9uIGxvY2sgYXJvdW5kIG1hcHBpbmcgb3Bl
cmF0aW9ucy4gTWFrZSBEUk0gR0VNIGNvcmUNCj4gdG8gdGFrZSB0aGUgbG9jayBhcm91bmQgdGhl
IHZtYXBwaW5nIG9wZXJhdGlvbnMgYW5kIHVwZGF0ZSBRWEwgYW5kIGk5MTUNCj4gZHJpdmVycyB0
byB1c2UgdGhlIGxvY2tlZCBmdW5jdGlvbnMgZm9yIHRoZSBjYXNlIHdoZXJlIERSTSBjb3JlIG5v
dyBob2xkcw0KPiB0aGUgbG9jay4gVGhpcyBwYXRjaCBwcmVwYXJlcyBEUk0gY29yZSBhbmQgZHJp
dmVycyB0byB0cmFuc2l0aW9uIHRvIHRoZQ0KPiBjb21tb24gZG1hLWJ1ZiBsb2NraW5nIGNvbnZl
bnRpb24gd2hlcmUgdm1hcHBpbmcgb2YgZXhwb3J0ZWQgR0VNcyB3aWxsDQo+IGJlIGRvbmUgdW5k
ZXIgdGhlIGhlbGQgcmVzZXJ2YXRpb24gbG9jay4NCj4NCj4gU2lnbmVkLW9mZi1ieTogRG1pdHJ5
IE9zaXBlbmtvIDxkbWl0cnkub3NpcGVua29AY29sbGFib3JhLmNvbT4NCg0KUmV2aWV3ZWQtYnk6
IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4NCg0KPiAtLS0NCj4g
ICBkcml2ZXJzL2dwdS9kcm0vZHJtX2NsaWVudC5jICAgICAgICAgICAgICAgICB8ICA0ICsrLS0N
Cj4gICBkcml2ZXJzL2dwdS9kcm0vZHJtX2dlbS5jICAgICAgICAgICAgICAgICAgICB8IDI0ICsr
KysrKysrKysrKysrKysrKysrDQo+ICAgZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fZnJhbWVidWZm
ZXJfaGVscGVyLmMgfCAgNiArKy0tLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9kcm1fcHJpbWUuYyAg
ICAgICAgICAgICAgICAgIHwgIDQgKystLQ0KPiAgIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9p
OTE1X2dlbV9kbWFidWYuYyAgIHwgIDIgKy0NCj4gICBkcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9v
YmplY3QuYyAgICAgICAgICAgICB8IDE3ICsrKysrKystLS0tLS0tDQo+ICAgZHJpdmVycy9ncHUv
ZHJtL3F4bC9xeGxfcHJpbWUuYyAgICAgICAgICAgICAgfCAgNCArKy0tDQo+ICAgaW5jbHVkZS9k
cm0vZHJtX2dlbS5oICAgICAgICAgICAgICAgICAgICAgICAgfCAgMyArKysNCj4gICA4IGZpbGVz
IGNoYW5nZWQsIDQ2IGluc2VydGlvbnMoKyksIDE4IGRlbGV0aW9ucygtKQ0KPg0KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9jbGllbnQuYyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1f
Y2xpZW50LmMNCj4gaW5kZXggYWYzYjczOTViZjY5Li5lOWExY2QzMTAzNTIgMTAwNjQ0DQo+IC0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fY2xpZW50LmMNCj4gKysrIGIvZHJpdmVycy9ncHUvZHJt
L2RybV9jbGllbnQuYw0KPiBAQCAtMzIzLDcgKzMyMyw3IEBAIGRybV9jbGllbnRfYnVmZmVyX3Zt
YXAoc3RydWN0IGRybV9jbGllbnRfYnVmZmVyICpidWZmZXIsDQo+ICAgCSAqIGZkX2luc3RhbGwg
c3RlcCBvdXQgb2YgdGhlIGRyaXZlciBiYWNrZW5kIGhvb2tzLCB0byBtYWtlIHRoYXQNCj4gICAJ
ICogZmluYWwgc3RlcCBvcHRpb25hbCBmb3IgaW50ZXJuYWwgdXNlcnMuDQo+ICAgCSAqLw0KPiAt
CXJldCA9IGRybV9nZW1fdm1hcChidWZmZXItPmdlbSwgbWFwKTsNCj4gKwlyZXQgPSBkcm1fZ2Vt
X3ZtYXBfdW5sb2NrZWQoYnVmZmVyLT5nZW0sIG1hcCk7DQo+ICAgCWlmIChyZXQpDQo+ICAgCQly
ZXR1cm4gcmV0Ow0KPiAgIA0KPiBAQCAtMzQ1LDcgKzM0NSw3IEBAIHZvaWQgZHJtX2NsaWVudF9i
dWZmZXJfdnVubWFwKHN0cnVjdCBkcm1fY2xpZW50X2J1ZmZlciAqYnVmZmVyKQ0KPiAgIHsNCj4g
ICAJc3RydWN0IGlvc3lzX21hcCAqbWFwID0gJmJ1ZmZlci0+bWFwOw0KPiAgIA0KPiAtCWRybV9n
ZW1fdnVubWFwKGJ1ZmZlci0+Z2VtLCBtYXApOw0KPiArCWRybV9nZW1fdnVubWFwX3VubG9ja2Vk
KGJ1ZmZlci0+Z2VtLCBtYXApOw0KPiAgIH0NCj4gICBFWFBPUlRfU1lNQk9MKGRybV9jbGllbnRf
YnVmZmVyX3Z1bm1hcCk7DQo+ICAgDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZHJt
X2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9nZW0uYw0KPiBpbmRleCBlYjBjMmQwNDFmMTMu
LjhiOTI4NDYxMTJlZiAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW0uYw0K
PiArKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbS5jDQo+IEBAIC0xMTcxLDYgKzExNzEsOCBA
QCBpbnQgZHJtX2dlbV92bWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgaW9z
eXNfbWFwICptYXApDQo+ICAgew0KPiAgIAlpbnQgcmV0Ow0KPiAgIA0KPiArCWRtYV9yZXN2X2Fz
c2VydF9oZWxkKG9iai0+cmVzdik7DQo+ICsNCj4gICAJaWYgKCFvYmotPmZ1bmNzLT52bWFwKQ0K
PiAgIAkJcmV0dXJuIC1FT1BOT1RTVVBQOw0KPiAgIA0KPiBAQCAtMTE4Niw2ICsxMTg4LDggQEAg
RVhQT1JUX1NZTUJPTChkcm1fZ2VtX3ZtYXApOw0KPiAgIA0KPiAgIHZvaWQgZHJtX2dlbV92dW5t
YXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBpb3N5c19tYXAgKm1hcCkNCj4g
ICB7DQo+ICsJZG1hX3Jlc3ZfYXNzZXJ0X2hlbGQob2JqLT5yZXN2KTsNCj4gKw0KPiAgIAlpZiAo
aW9zeXNfbWFwX2lzX251bGwobWFwKSkNCj4gICAJCXJldHVybjsNCj4gICANCj4gQEAgLTExOTcs
NiArMTIwMSwyNiBAQCB2b2lkIGRybV9nZW1fdnVubWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAq
b2JqLCBzdHJ1Y3QgaW9zeXNfbWFwICptYXApDQo+ICAgfQ0KPiAgIEVYUE9SVF9TWU1CT0woZHJt
X2dlbV92dW5tYXApOw0KPiAgIA0KPiAraW50IGRybV9nZW1fdm1hcF91bmxvY2tlZChzdHJ1Y3Qg
ZHJtX2dlbV9vYmplY3QgKm9iaiwgc3RydWN0IGlvc3lzX21hcCAqbWFwKQ0KPiArew0KPiArCWlu
dCByZXQ7DQo+ICsNCj4gKwlkbWFfcmVzdl9sb2NrKG9iai0+cmVzdiwgTlVMTCk7DQo+ICsJcmV0
ID0gZHJtX2dlbV92bWFwKG9iaiwgbWFwKTsNCj4gKwlkbWFfcmVzdl91bmxvY2sob2JqLT5yZXN2
KTsNCj4gKw0KPiArCXJldHVybiByZXQ7DQo+ICt9DQo+ICtFWFBPUlRfU1lNQk9MKGRybV9nZW1f
dm1hcF91bmxvY2tlZCk7DQo+ICsNCj4gK3ZvaWQgZHJtX2dlbV92dW5tYXBfdW5sb2NrZWQoc3Ry
dWN0IGRybV9nZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBpb3N5c19tYXAgKm1hcCkNCj4gK3sNCj4g
KwlkbWFfcmVzdl9sb2NrKG9iai0+cmVzdiwgTlVMTCk7DQo+ICsJZHJtX2dlbV92dW5tYXAob2Jq
LCBtYXApOw0KPiArCWRtYV9yZXN2X3VubG9jayhvYmotPnJlc3YpOw0KPiArfQ0KPiArRVhQT1JU
X1NZTUJPTChkcm1fZ2VtX3Z1bm1hcF91bmxvY2tlZCk7DQo+ICsNCj4gICAvKioNCj4gICAgKiBk
cm1fZ2VtX2xvY2tfcmVzZXJ2YXRpb25zIC0gU2V0cyB1cCB0aGUgd3cgY29udGV4dCBhbmQgYWNx
dWlyZXMNCj4gICAgKiB0aGUgbG9jayBvbiBhbiBhcnJheSBvZiBHRU0gb2JqZWN0cy4NCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX2ZyYW1lYnVmZmVyX2hlbHBlci5jIGIv
ZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fZnJhbWVidWZmZXJfaGVscGVyLmMNCj4gaW5kZXggNjEz
MzlhOWNkMDEwLi4xMzVjZDRhOTZlYTkgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvZ3B1L2RybS9k
cm1fZ2VtX2ZyYW1lYnVmZmVyX2hlbHBlci5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1f
Z2VtX2ZyYW1lYnVmZmVyX2hlbHBlci5jDQo+IEBAIC0zNTQsNyArMzU0LDcgQEAgaW50IGRybV9n
ZW1fZmJfdm1hcChzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpmYiwgc3RydWN0IGlvc3lzX21hcCAq
bWFwLA0KPiAgIAkJCXJldCA9IC1FSU5WQUw7DQo+ICAgCQkJZ290byBlcnJfZHJtX2dlbV92dW5t
YXA7DQo+ICAgCQl9DQo+IC0JCXJldCA9IGRybV9nZW1fdm1hcChvYmosICZtYXBbaV0pOw0KPiAr
CQlyZXQgPSBkcm1fZ2VtX3ZtYXBfdW5sb2NrZWQob2JqLCAmbWFwW2ldKTsNCj4gICAJCWlmIChy
ZXQpDQo+ICAgCQkJZ290byBlcnJfZHJtX2dlbV92dW5tYXA7DQo+ICAgCX0NCj4gQEAgLTM3Niw3
ICszNzYsNyBAQCBpbnQgZHJtX2dlbV9mYl92bWFwKHN0cnVjdCBkcm1fZnJhbWVidWZmZXIgKmZi
LCBzdHJ1Y3QgaW9zeXNfbWFwICptYXAsDQo+ICAgCQlvYmogPSBkcm1fZ2VtX2ZiX2dldF9vYmoo
ZmIsIGkpOw0KPiAgIAkJaWYgKCFvYmopDQo+ICAgCQkJY29udGludWU7DQo+IC0JCWRybV9nZW1f
dnVubWFwKG9iaiwgJm1hcFtpXSk7DQo+ICsJCWRybV9nZW1fdnVubWFwX3VubG9ja2VkKG9iaiwg
Jm1hcFtpXSk7DQo+ICAgCX0NCj4gICAJcmV0dXJuIHJldDsNCj4gICB9DQo+IEBAIC00MDMsNyAr
NDAzLDcgQEAgdm9pZCBkcm1fZ2VtX2ZiX3Z1bm1hcChzdHJ1Y3QgZHJtX2ZyYW1lYnVmZmVyICpm
Yiwgc3RydWN0IGlvc3lzX21hcCAqbWFwKQ0KPiAgIAkJCWNvbnRpbnVlOw0KPiAgIAkJaWYgKGlv
c3lzX21hcF9pc19udWxsKCZtYXBbaV0pKQ0KPiAgIAkJCWNvbnRpbnVlOw0KPiAtCQlkcm1fZ2Vt
X3Z1bm1hcChvYmosICZtYXBbaV0pOw0KPiArCQlkcm1fZ2VtX3Z1bm1hcF91bmxvY2tlZChvYmos
ICZtYXBbaV0pOw0KPiAgIAl9DQo+ICAgfQ0KPiAgIEVYUE9SVF9TWU1CT0woZHJtX2dlbV9mYl92
dW5tYXApOw0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2RybV9wcmltZS5jIGIvZHJp
dmVycy9ncHUvZHJtL2RybV9wcmltZS5jDQo+IGluZGV4IGI3NWVmMTc1Njg3My4uMWJkMjM0ZmQy
MWE1IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW1lLmMNCj4gKysrIGIv
ZHJpdmVycy9ncHUvZHJtL2RybV9wcmltZS5jDQo+IEBAIC02NzgsNyArNjc4LDcgQEAgaW50IGRy
bV9nZW1fZG1hYnVmX3ZtYXAoc3RydWN0IGRtYV9idWYgKmRtYV9idWYsIHN0cnVjdCBpb3N5c19t
YXAgKm1hcCkNCj4gICB7DQo+ICAgCXN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqID0gZG1hX2J1
Zi0+cHJpdjsNCj4gICANCj4gLQlyZXR1cm4gZHJtX2dlbV92bWFwKG9iaiwgbWFwKTsNCj4gKwly
ZXR1cm4gZHJtX2dlbV92bWFwX3VubG9ja2VkKG9iaiwgbWFwKTsNCj4gICB9DQo+ICAgRVhQT1JU
X1NZTUJPTChkcm1fZ2VtX2RtYWJ1Zl92bWFwKTsNCj4gICANCj4gQEAgLTY5NCw3ICs2OTQsNyBA
QCB2b2lkIGRybV9nZW1fZG1hYnVmX3Z1bm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1Ziwgc3Ry
dWN0IGlvc3lzX21hcCAqbWFwKQ0KPiAgIHsNCj4gICAJc3RydWN0IGRybV9nZW1fb2JqZWN0ICpv
YmogPSBkbWFfYnVmLT5wcml2Ow0KPiAgIA0KPiAtCWRybV9nZW1fdnVubWFwKG9iaiwgbWFwKTsN
Cj4gKwlkcm1fZ2VtX3Z1bm1hcF91bmxvY2tlZChvYmosIG1hcCk7DQo+ICAgfQ0KPiAgIEVYUE9S
VF9TWU1CT0woZHJtX2dlbV9kbWFidWZfdnVubWFwKTsNCj4gICANCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYyBiL2RyaXZlcnMvZ3B1L2Ry
bS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYw0KPiBpbmRleCA1ZWNlYTdkZjk4YjEuLmNjNTRh
NWIxZDZhZSAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X2RtYWJ1Zi5jDQo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFi
dWYuYw0KPiBAQCAtNzIsNyArNzIsNyBAQCBzdGF0aWMgaW50IGk5MTVfZ2VtX2RtYWJ1Zl92bWFw
KHN0cnVjdCBkbWFfYnVmICpkbWFfYnVmLA0KPiAgIAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVj
dCAqb2JqID0gZG1hX2J1Zl90b19vYmooZG1hX2J1Zik7DQo+ICAgCXZvaWQgKnZhZGRyOw0KPiAg
IA0KPiAtCXZhZGRyID0gaTkxNV9nZW1fb2JqZWN0X3Bpbl9tYXBfdW5sb2NrZWQob2JqLCBJOTE1
X01BUF9XQik7DQo+ICsJdmFkZHIgPSBpOTE1X2dlbV9vYmplY3RfcGluX21hcChvYmosIEk5MTVf
TUFQX1dCKTsNCj4gICAJaWYgKElTX0VSUih2YWRkcikpDQo+ICAgCQlyZXR1cm4gUFRSX0VSUih2
YWRkcik7DQo+ICAgDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9vYmpl
Y3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9xeGwvcXhsX29iamVjdC5jDQo+IGluZGV4IGI0MmE2NTdl
NGMyZi4uYTY0Y2Q2MzVmYmMwIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4
bF9vYmplY3QuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9vYmplY3QuYw0KPiBA
QCAtMTY4LDkgKzE2OCwxNiBAQCBpbnQgcXhsX2JvX3ZtYXBfbG9ja2VkKHN0cnVjdCBxeGxfYm8g
KmJvLCBzdHJ1Y3QgaW9zeXNfbWFwICptYXApDQo+ICAgCQliby0+bWFwX2NvdW50Kys7DQo+ICAg
CQlnb3RvIG91dDsNCj4gICAJfQ0KPiAtCXIgPSB0dG1fYm9fdm1hcCgmYm8tPnRibywgJmJvLT5t
YXApOw0KPiArDQo+ICsJciA9IF9fcXhsX2JvX3Bpbihibyk7DQo+ICAgCWlmIChyKQ0KPiAgIAkJ
cmV0dXJuIHI7DQo+ICsNCj4gKwlyID0gdHRtX2JvX3ZtYXAoJmJvLT50Ym8sICZiby0+bWFwKTsN
Cj4gKwlpZiAocikgew0KPiArCQlfX3F4bF9ib191bnBpbihibyk7DQo+ICsJCXJldHVybiByOw0K
PiArCX0NCj4gICAJYm8tPm1hcF9jb3VudCA9IDE7DQo+ICAgDQo+ICAgCS8qIFRPRE86IFJlbW92
ZSBrcHRyIGluIGZhdm9yIG9mIG1hcCBldmVyeXdoZXJlLiAqLw0KPiBAQCAtMTkyLDEyICsxOTks
NiBAQCBpbnQgcXhsX2JvX3ZtYXAoc3RydWN0IHF4bF9ibyAqYm8sIHN0cnVjdCBpb3N5c19tYXAg
Km1hcCkNCj4gICAJaWYgKHIpDQo+ICAgCQlyZXR1cm4gcjsNCj4gICANCj4gLQlyID0gX19xeGxf
Ym9fcGluKGJvKTsNCj4gLQlpZiAocikgew0KPiAtCQlxeGxfYm9fdW5yZXNlcnZlKGJvKTsNCj4g
LQkJcmV0dXJuIHI7DQo+IC0JfQ0KPiAtDQo+ICAgCXIgPSBxeGxfYm9fdm1hcF9sb2NrZWQoYm8s
IG1hcCk7DQo+ICAgCXF4bF9ib191bnJlc2VydmUoYm8pOw0KPiAgIAlyZXR1cm4gcjsNCj4gQEAg
LTI0Nyw2ICsyNDgsNyBAQCB2b2lkIHF4bF9ib192dW5tYXBfbG9ja2VkKHN0cnVjdCBxeGxfYm8g
KmJvKQ0KPiAgIAkJcmV0dXJuOw0KPiAgIAliby0+a3B0ciA9IE5VTEw7DQo+ICAgCXR0bV9ib192
dW5tYXAoJmJvLT50Ym8sICZiby0+bWFwKTsNCj4gKwlfX3F4bF9ib191bnBpbihibyk7DQo+ICAg
fQ0KPiAgIA0KPiAgIGludCBxeGxfYm9fdnVubWFwKHN0cnVjdCBxeGxfYm8gKmJvKQ0KPiBAQCAt
MjU4LDcgKzI2MCw2IEBAIGludCBxeGxfYm9fdnVubWFwKHN0cnVjdCBxeGxfYm8gKmJvKQ0KPiAg
IAkJcmV0dXJuIHI7DQo+ICAgDQo+ICAgCXF4bF9ib192dW5tYXBfbG9ja2VkKGJvKTsNCj4gLQlf
X3F4bF9ib191bnBpbihibyk7DQo+ICAgCXF4bF9ib191bnJlc2VydmUoYm8pOw0KPiAgIAlyZXR1
cm4gMDsNCj4gICB9DQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9wcmlt
ZS5jIGIvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxfcHJpbWUuYw0KPiBpbmRleCAxNDJkMDE0MTVh
Y2IuLjkxNjljMjYzNTdkMyAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3F4bC9xeGxf
cHJpbWUuYw0KPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vcXhsL3F4bF9wcmltZS5jDQo+IEBAIC01
OSw3ICs1OSw3IEBAIGludCBxeGxfZ2VtX3ByaW1lX3ZtYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0
ICpvYmosIHN0cnVjdCBpb3N5c19tYXAgKm1hcCkNCj4gICAJc3RydWN0IHF4bF9ibyAqYm8gPSBn
ZW1fdG9fcXhsX2JvKG9iaik7DQo+ICAgCWludCByZXQ7DQo+ICAgDQo+IC0JcmV0ID0gcXhsX2Jv
X3ZtYXAoYm8sIG1hcCk7DQo+ICsJcmV0ID0gcXhsX2JvX3ZtYXBfbG9ja2VkKGJvLCBtYXApOw0K
PiAgIAlpZiAocmV0IDwgMCkNCj4gICAJCXJldHVybiByZXQ7DQo+ICAgDQo+IEBAIC03MSw1ICs3
MSw1IEBAIHZvaWQgcXhsX2dlbV9wcmltZV92dW5tYXAoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpv
YmosDQo+ICAgew0KPiAgIAlzdHJ1Y3QgcXhsX2JvICpibyA9IGdlbV90b19xeGxfYm8ob2JqKTsN
Cj4gICANCj4gLQlxeGxfYm9fdnVubWFwKGJvKTsNCj4gKwlxeGxfYm9fdnVubWFwX2xvY2tlZChi
byk7DQo+ICAgfQ0KPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9kcm0vZHJtX2dlbS5oIGIvaW5jbHVk
ZS9kcm0vZHJtX2dlbS5oDQo+IGluZGV4IDg3Y2ZmYzllZmE4NS4uYmYzNzAwNDE1MjI5IDEwMDY0
NA0KPiAtLS0gYS9pbmNsdWRlL2RybS9kcm1fZ2VtLmgNCj4gKysrIGIvaW5jbHVkZS9kcm0vZHJt
X2dlbS5oDQo+IEBAIC00MjAsNCArNDIwLDcgQEAgdm9pZCBkcm1fZ2VtX3VubG9ja19yZXNlcnZh
dGlvbnMoc3RydWN0IGRybV9nZW1fb2JqZWN0ICoqb2JqcywgaW50IGNvdW50LA0KPiAgIGludCBk
cm1fZ2VtX2R1bWJfbWFwX29mZnNldChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGUsIHN0cnVjdCBkcm1f
ZGV2aWNlICpkZXYsDQo+ICAgCQkJICAgIHUzMiBoYW5kbGUsIHU2NCAqb2Zmc2V0KTsNCj4gICAN
Cj4gK2ludCBkcm1fZ2VtX3ZtYXBfdW5sb2NrZWQoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmos
IHN0cnVjdCBpb3N5c19tYXAgKm1hcCk7DQo+ICt2b2lkIGRybV9nZW1fdnVubWFwX3VubG9ja2Vk
KHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3QgaW9zeXNfbWFwICptYXApOw0KPiAr
DQo+ICAgI2VuZGlmIC8qIF9fRFJNX0dFTV9IX18gKi8NCg0KX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KTGluYXJvLW1tLXNpZyBtYWlsaW5nIGxpc3QgLS0g
bGluYXJvLW1tLXNpZ0BsaXN0cy5saW5hcm8ub3JnClRvIHVuc3Vic2NyaWJlIHNlbmQgYW4gZW1h
aWwgdG8gbGluYXJvLW1tLXNpZy1sZWF2ZUBsaXN0cy5saW5hcm8ub3JnCg==
