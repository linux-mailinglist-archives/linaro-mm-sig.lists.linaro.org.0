Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id DC7265758BC
	for <lists+linaro-mm-sig@lfdr.de>; Fri, 15 Jul 2022 02:53:29 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 16EF7402FB
	for <lists+linaro-mm-sig@lfdr.de>; Fri, 15 Jul 2022 00:53:29 +0000 (UTC)
Received: from madras.collabora.co.uk (madras.collabora.co.uk [46.235.227.172])
	by lists.linaro.org (Postfix) with ESMTPS id 4B9B03F04B
	for <linaro-mm-sig@lists.linaro.org>; Fri, 15 Jul 2022 00:53:21 +0000 (UTC)
Received: from dimapc.. (109-252-119-232.nat.spd-mgts.ru [109.252.119.232])
	(using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
	 key-exchange X25519 server-signature RSA-PSS (4096 bits) server-digest SHA256)
	(No client certificate requested)
	(Authenticated sender: dmitry.osipenko)
	by madras.collabora.co.uk (Postfix) with ESMTPSA id 13AF86601A45;
	Fri, 15 Jul 2022 01:53:18 +0100 (BST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=collabora.com;
	s=mail; t=1657846400;
	bh=iFd2qLfgIyQksbqCz2AfkjQoTQmt2rCZPOb/4XmpRoE=;
	h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
	b=K72ghsdMWfPkt48VfWXy4BgTAAjLCyssP4P6p96paIqtW5xszbkQpqLkJLJUSRurO
	 mqfkhqHLSsAVg5wv0ehN0Z9gBBp0FL9RC7nTW2SWUdm3YoN3YF6geB68Pj5hQ06KFE
	 BTHO9wXFw/Zjg5ssiDkJ2eY7Iirx+FPGSkn+MCu5LPjl+AsML3W4u5KI2rYwx4RJ6O
	 7pknQeGtEY6UC9vVxAJJYg5TzWiQz5agmCqrwfv51tqk/l2UgkFbbclSHCQYm8RK5t
	 2azHhW6HzfLg0jNHxG6jjD0jmRkph3pnjoUyxJ2Cw69MvCYIfb7d9LVULkFrN9XR1L
	 rNeIShvJbw5lw==
From: Dmitry Osipenko <dmitry.osipenko@collabora.com>
To: David Airlie <airlied@linux.ie>,
	Gerd Hoffmann <kraxel@redhat.com>,
	Gurchetan Singh <gurchetansingh@chromium.org>,
	Chia-I Wu <olvaffe@gmail.com>,
	Daniel Vetter <daniel@ffwll.ch>,
	Daniel Almeida <daniel.almeida@collabora.com>,
	Gert Wollny <gert.wollny@collabora.com>,
	Gustavo Padovan <gustavo.padovan@collabora.com>,
	Daniel Stone <daniel@fooishbar.org>,
	Tomeu Vizoso <tomeu.vizoso@collabora.com>,
	Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
	Maxime Ripard <mripard@kernel.org>,
	Thomas Zimmermann <tzimmermann@suse.de>,
	Rob Clark <robdclark@gmail.com>,
	Sumit Semwal <sumit.semwal@linaro.org>,
	=?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
	"Pan, Xinhui" <Xinhui.Pan@amd.com>,
	Thierry Reding <thierry.reding@gmail.com>,
	Tomasz Figa <tfiga@chromium.org>,
	Marek Szyprowski <m.szyprowski@samsung.com>,
	Mauro Carvalho Chehab <mchehab@kernel.org>,
	Alex Deucher <alexander.deucher@amd.com>,
	Jani Nikula <jani.nikula@linux.intel.com>,
	Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
	Rodrigo Vivi <rodrigo.vivi@intel.com>,
	Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
	=?UTF-8?q?Thomas=20Hellstr=C3=B6m?= <thomas_os@shipmail.org>
Date: Fri, 15 Jul 2022 03:52:39 +0300
Message-Id: <20220715005244.42198-2-dmitry.osipenko@collabora.com>
X-Mailer: git-send-email 2.36.1
In-Reply-To: <20220715005244.42198-1-dmitry.osipenko@collabora.com>
References: <20220715005244.42198-1-dmitry.osipenko@collabora.com>
MIME-Version: 1.0
Message-ID-Hash: 2VG5HRQRIY434BFT63DC24EOAMNPXR7I
X-Message-ID-Hash: 2VG5HRQRIY434BFT63DC24EOAMNPXR7I
X-MailFrom: dmitry.osipenko@collabora.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
CC: dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org, Dmitry Osipenko <digetx@gmail.com>, linux-media@vger.kernel.org, linaro-mm-sig@lists.linaro.org, amd-gfx@lists.freedesktop.org, intel-gfx@lists.freedesktop.org, kernel@collabora.com, virtualization@lists.linux-foundation.org, spice-devel@lists.freedesktop.org, linux-rdma@vger.kernel.org, linux-arm-msm@vger.kernel.org
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH v1 1/6] dma-buf: Add _unlocked postfix to function names
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/2VG5HRQRIY434BFT63DC24EOAMNPXR7I/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

QWRkIF91bmxvY2tlZCBwb3N0Zml4IHRvIHRoZSBkbWEtYnVmIEFQSSBmdW5jdGlvbiBuYW1lcyBp
biBhIHByZXBhcmF0aW9uDQp0byBtb3ZlIGFsbCBub24tZHluYW1pYyBkbWEtYnVmIHVzZXJzIG92
ZXIgdG8gdGhlIGR5bmFtaWMgbG9ja2luZw0Kc3BlY2lmaWNhdGlvbi4gVGhpcyBwYXRjaCBvbmx5
IHJlbmFtZXMgQVBJIGZ1bmN0aW9ucywgcHJlcGFyaW5nIGRyaXZlcnMNCnRvIHRoZSBjb21tb24g
bG9ja2luZyBjb252ZW50aW9uLiBMYXRlciBvbiB3ZSB3aWxsIG1ha2UgdGhlICJ1bmxvY2tlZCIN
CmZ1bmN0aW9ucyB0byB0YWtlIHRoZSByZXNlcnZhdGlvbiBsb2NrLg0KDQpTdWdnZXN0ZWQtYnk6
IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4NClNpZ25lZC1vZmYt
Ynk6IERtaXRyeSBPc2lwZW5rbyA8ZG1pdHJ5Lm9zaXBlbmtvQGNvbGxhYm9yYS5jb20+DQotLS0N
CiBkcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jICAgICAgICAgICAgICAgICAgICAgfCA3NiArKysr
KysrKysrLS0tLS0tLS0tDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9i
dWYuYyAgIHwgIDQgKy0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMg
ICAgICAgfCAgNCArLQ0KIGRyaXZlcnMvZ3B1L2RybS9hcm1hZGEvYXJtYWRhX2dlbS5jICAgICAg
ICAgICB8IDE0ICsrLS0NCiBkcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9jbWFfaGVscGVyLmMgICAg
ICAgICAgfCAgNiArLQ0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jICAg
ICAgICB8ICA2ICstDQogZHJpdmVycy9ncHUvZHJtL2RybV9wcmltZS5jICAgICAgICAgICAgICAg
ICAgIHwgMTIgKy0tDQogZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW1fcHJpbWUu
YyAgIHwgIDYgKy0NCiBkcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4eW5vc19kcm1fZ2VtLmMgICAg
ICAgfCAgMiArLQ0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYyAg
ICB8IDEyICstLQ0KIC4uLi9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2k5MTVfZ2VtX2RtYWJ1Zi5j
ICB8IDIwICsrLS0tDQogZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9nZW1fZG1hYnVmLmMg
ICAgIHwgIDggKy0NCiBkcml2ZXJzL2dwdS9kcm0vdGVncmEvZ2VtLmMgICAgICAgICAgICAgICAg
ICAgfCAyNyArKystLS0tDQogZHJpdmVycy9pbmZpbmliYW5kL2NvcmUvdW1lbV9kbWFidWYuYyAg
ICAgICAgIHwgMTEgKy0tDQogLi4uL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLWRtYS1jb250
aWcuYyAgIHwgMTUgKystLQ0KIC4uLi9tZWRpYS9jb21tb24vdmlkZW9idWYyL3ZpZGVvYnVmMi1k
bWEtc2cuYyB8IDEyICstLQ0KIC4uLi9jb21tb24vdmlkZW9idWYyL3ZpZGVvYnVmMi12bWFsbG9j
LmMgICAgICB8ICA2ICstDQogLi4uL3BsYXRmb3JtL252aWRpYS90ZWdyYS12ZGUvZG1hYnVmLWNh
Y2hlLmMgIHwgMTIgKy0tDQogZHJpdmVycy9taXNjL2Zhc3RycGMuYyAgICAgICAgICAgICAgICAg
ICAgICAgIHwgMTIgKy0tDQogZHJpdmVycy94ZW4vZ250ZGV2LWRtYWJ1Zi5jICAgICAgICAgICAg
ICAgICAgIHwgMTQgKystLQ0KIGluY2x1ZGUvbGludXgvZG1hLWJ1Zi5oICAgICAgICAgICAgICAg
ICAgICAgICB8IDM0ICsrKysrLS0tLQ0KIDIxIGZpbGVzIGNoYW5nZWQsIDE2MSBpbnNlcnRpb25z
KCspLCAxNTIgZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2RtYS1idWYvZG1h
LWJ1Zi5jIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1idWYuYw0KaW5kZXggNDQ1NzRmYmU3NDgyLi5k
MTYyMzdhNmZmYWEgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jDQorKysg
Yi9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jDQpAQCAtNzk1LDcgKzc5NSw3IEBAIHN0YXRpYyBz
dHJ1Y3Qgc2dfdGFibGUgKiBfX21hcF9kbWFfYnVmKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQg
KmF0dGFjaCwNCiB9DQogDQogLyoqDQotICogZG1hX2J1Zl9keW5hbWljX2F0dGFjaCAtIEFkZCB0
aGUgZGV2aWNlIHRvIGRtYV9idWYncyBhdHRhY2htZW50cyBsaXN0DQorICogZG1hX2J1Zl9keW5h
bWljX2F0dGFjaF91bmxvY2tlZCAtIEFkZCB0aGUgZGV2aWNlIHRvIGRtYV9idWYncyBhdHRhY2ht
ZW50cyBsaXN0DQogICogQGRtYWJ1ZjoJCVtpbl0JYnVmZmVyIHRvIGF0dGFjaCBkZXZpY2UgdG8u
DQogICogQGRldjoJCVtpbl0JZGV2aWNlIHRvIGJlIGF0dGFjaGVkLg0KICAqIEBpbXBvcnRlcl9v
cHM6CVtpbl0JaW1wb3J0ZXIgb3BlcmF0aW9ucyBmb3IgdGhlIGF0dGFjaG1lbnQNCkBAIC04MTcs
OSArODE3LDkgQEAgc3RhdGljIHN0cnVjdCBzZ190YWJsZSAqIF9fbWFwX2RtYV9idWYoc3RydWN0
IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoLA0KICAqIGluZGljYXRlZCB3aXRoIHRoZSBlcnJv
ciBjb2RlIC1FQlVTWS4NCiAgKi8NCiBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICoNCi1kbWFf
YnVmX2R5bmFtaWNfYXR0YWNoKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCBkZXZpY2Ug
KmRldiwNCi0JCSAgICAgICBjb25zdCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfb3BzICppbXBvcnRl
cl9vcHMsDQotCQkgICAgICAgdm9pZCAqaW1wb3J0ZXJfcHJpdikNCitkbWFfYnVmX2R5bmFtaWNf
YXR0YWNoX3VubG9ja2VkKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCBkZXZpY2UgKmRl
diwNCisJCQkJY29uc3Qgc3RydWN0IGRtYV9idWZfYXR0YWNoX29wcyAqaW1wb3J0ZXJfb3BzLA0K
KwkJCQl2b2lkICppbXBvcnRlcl9wcml2KQ0KIHsNCiAJc3RydWN0IGRtYV9idWZfYXR0YWNobWVu
dCAqYXR0YWNoOw0KIAlpbnQgcmV0Ow0KQEAgLTg5MiwyNSArODkyLDI1IEBAIGRtYV9idWZfZHlu
YW1pY19hdHRhY2goc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGRldmljZSAqZGV2LA0K
IAlpZiAoZG1hX2J1Zl9pc19keW5hbWljKGF0dGFjaC0+ZG1hYnVmKSkNCiAJCWRtYV9yZXN2X3Vu
bG9jayhhdHRhY2gtPmRtYWJ1Zi0+cmVzdik7DQogDQotCWRtYV9idWZfZGV0YWNoKGRtYWJ1Ziwg
YXR0YWNoKTsNCisJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoZG1hYnVmLCBhdHRhY2gpOw0KIAly
ZXR1cm4gRVJSX1BUUihyZXQpOw0KIH0NCi1FWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX2R5
bmFtaWNfYXR0YWNoLCBETUFfQlVGKTsNCitFWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX2R5
bmFtaWNfYXR0YWNoX3VubG9ja2VkLCBETUFfQlVGKTsNCiANCiAvKioNCi0gKiBkbWFfYnVmX2F0
dGFjaCAtIFdyYXBwZXIgZm9yIGRtYV9idWZfZHluYW1pY19hdHRhY2gNCisgKiBkbWFfYnVmX2F0
dGFjaF91bmxvY2tlZCAtIFdyYXBwZXIgZm9yIGRtYV9idWZfZHluYW1pY19hdHRhY2gNCiAgKiBA
ZG1hYnVmOglbaW5dCWJ1ZmZlciB0byBhdHRhY2ggZGV2aWNlIHRvLg0KICAqIEBkZXY6CVtpbl0J
ZGV2aWNlIHRvIGJlIGF0dGFjaGVkLg0KICAqDQotICogV3JhcHBlciB0byBjYWxsIGRtYV9idWZf
ZHluYW1pY19hdHRhY2goKSBmb3IgZHJpdmVycyB3aGljaCBzdGlsbCB1c2UgYSBzdGF0aWMNCi0g
KiBtYXBwaW5nLg0KKyAqIFdyYXBwZXIgdG8gY2FsbCBkbWFfYnVmX2R5bmFtaWNfYXR0YWNoX3Vu
bG9ja2VkKCkgZm9yIGRyaXZlcnMgd2hpY2ggc3RpbGwNCisgKiB1c2UgYSBzdGF0aWMgbWFwcGlu
Zy4NCiAgKi8NCi1zdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICpkbWFfYnVmX2F0dGFjaChzdHJ1
Y3QgZG1hX2J1ZiAqZG1hYnVmLA0KLQkJCQkJICBzdHJ1Y3QgZGV2aWNlICpkZXYpDQorc3RydWN0
IGRtYV9idWZfYXR0YWNobWVudCAqZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQoc3RydWN0IGRtYV9i
dWYgKmRtYWJ1ZiwNCisJCQkJCQkgICBzdHJ1Y3QgZGV2aWNlICpkZXYpDQogew0KLQlyZXR1cm4g
ZG1hX2J1Zl9keW5hbWljX2F0dGFjaChkbWFidWYsIGRldiwgTlVMTCwgTlVMTCk7DQorCXJldHVy
biBkbWFfYnVmX2R5bmFtaWNfYXR0YWNoX3VubG9ja2VkKGRtYWJ1ZiwgZGV2LCBOVUxMLCBOVUxM
KTsNCiB9DQotRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl9hdHRhY2gsIERNQV9CVUYpOw0K
K0VYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfYXR0YWNoX3VubG9ja2VkLCBETUFfQlVGKTsN
CiANCiBzdGF0aWMgdm9pZCBfX3VubWFwX2RtYV9idWYoc3RydWN0IGRtYV9idWZfYXR0YWNobWVu
dCAqYXR0YWNoLA0KIAkJCSAgICBzdHJ1Y3Qgc2dfdGFibGUgKnNnX3RhYmxlLA0KQEAgLTkyMyw3
ICs5MjMsNyBAQCBzdGF0aWMgdm9pZCBfX3VubWFwX2RtYV9idWYoc3RydWN0IGRtYV9idWZfYXR0
YWNobWVudCAqYXR0YWNoLA0KIH0NCiANCiAvKioNCi0gKiBkbWFfYnVmX2RldGFjaCAtIFJlbW92
ZSB0aGUgZ2l2ZW4gYXR0YWNobWVudCBmcm9tIGRtYWJ1ZidzIGF0dGFjaG1lbnRzIGxpc3QNCisg
KiBkbWFfYnVmX2RldGFjaF91bmxvY2tlZCAtIFJlbW92ZSB0aGUgZ2l2ZW4gYXR0YWNobWVudCBm
cm9tIGRtYWJ1ZidzIGF0dGFjaG1lbnRzIGxpc3QNCiAgKiBAZG1hYnVmOglbaW5dCWJ1ZmZlciB0
byBkZXRhY2ggZnJvbS4NCiAgKiBAYXR0YWNoOglbaW5dCWF0dGFjaG1lbnQgdG8gYmUgZGV0YWNo
ZWQ7IGlzIGZyZWUnZCBhZnRlciB0aGlzIGNhbGwuDQogICoNCkBAIC05MzEsNyArOTMxLDggQEAg
c3RhdGljIHZvaWQgX191bm1hcF9kbWFfYnVmKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0
dGFjaCwNCiAgKg0KICAqIE9wdGlvbmFsbHkgdGhpcyBjYWxscyAmZG1hX2J1Zl9vcHMuZGV0YWNo
IGZvciBkZXZpY2Utc3BlY2lmaWMgZGV0YWNoLg0KICAqLw0KLXZvaWQgZG1hX2J1Zl9kZXRhY2go
c3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNo
KQ0KK3ZvaWQgZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoc3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwN
CisJCQkgICAgIHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCkNCiB7DQogCWlmIChX
QVJOX09OKCFkbWFidWYgfHwgIWF0dGFjaCkpDQogCQlyZXR1cm47DQpAQCAtOTU2LDE0ICs5NTcs
MTQgQEAgdm9pZCBkbWFfYnVmX2RldGFjaChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpDQogDQogCWtmcmVlKGF0dGFjaCk7DQogfQ0KLUVY
UE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfZGV0YWNoLCBETUFfQlVGKTsNCitFWFBPUlRfU1lN
Qk9MX05TX0dQTChkbWFfYnVmX2RldGFjaF91bmxvY2tlZCwgRE1BX0JVRik7DQogDQogLyoqDQog
ICogZG1hX2J1Zl9waW4gLSBMb2NrIGRvd24gdGhlIERNQS1idWYNCiAgKiBAYXR0YWNoOglbaW5d
CWF0dGFjaG1lbnQgd2hpY2ggc2hvdWxkIGJlIHBpbm5lZA0KICAqDQotICogT25seSBkeW5hbWlj
IGltcG9ydGVycyAod2hvIHNldCB1cCBAYXR0YWNoIHdpdGggZG1hX2J1Zl9keW5hbWljX2F0dGFj
aCgpKSBtYXkNCi0gKiBjYWxsIHRoaXMsIGFuZCBvbmx5IGZvciBsaW1pdGVkIHVzZSBjYXNlcyBs
aWtlIHNjYW5vdXQgYW5kIG5vdCBmb3IgdGVtcG9yYXJ5DQorICogT25seSBkeW5hbWljIGltcG9y
dGVycyAod2hvIHNldCB1cCBAYXR0YWNoIHdpdGggZG1hX2J1Zl9keW5hbWljX2F0dGFjaF91bmxv
Y2tlZCgpKQ0KKyAqIG1heSBjYWxsIHRoaXMsIGFuZCBvbmx5IGZvciBsaW1pdGVkIHVzZSBjYXNl
cyBsaWtlIHNjYW5vdXQgYW5kIG5vdCBmb3IgdGVtcG9yYXJ5DQogICogcGluIG9wZXJhdGlvbnMu
IEl0IGlzIG5vdCBwZXJtaXR0ZWQgdG8gYWxsb3cgdXNlcnNwYWNlIHRvIHBpbiBhcmJpdHJhcnkN
CiAgKiBhbW91bnRzIG9mIGJ1ZmZlcnMgdGhyb3VnaCB0aGlzIGludGVyZmFjZS4NCiAgKg0KQEAg
LTEwMTAsNyArMTAxMSw3IEBAIHZvaWQgZG1hX2J1Zl91bnBpbihzdHJ1Y3QgZG1hX2J1Zl9hdHRh
Y2htZW50ICphdHRhY2gpDQogRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl91bnBpbiwgRE1B
X0JVRik7DQogDQogLyoqDQotICogZG1hX2J1Zl9tYXBfYXR0YWNobWVudCAtIFJldHVybnMgdGhl
IHNjYXR0ZXJsaXN0IHRhYmxlIG9mIHRoZSBhdHRhY2htZW50Ow0KKyAqIGRtYV9idWZfbWFwX2F0
dGFjaG1lbnRfbG9ja2VkIC0gUmV0dXJucyB0aGUgc2NhdHRlcmxpc3QgdGFibGUgb2YgdGhlIGF0
dGFjaG1lbnQ7DQogICogbWFwcGVkIGludG8gX2RldmljZV8gYWRkcmVzcyBzcGFjZS4gSXMgYSB3
cmFwcGVyIGZvciBtYXBfZG1hX2J1ZigpIG9mIHRoZQ0KICAqIGRtYV9idWZfb3BzLg0KICAqIEBh
dHRhY2g6CVtpbl0JYXR0YWNobWVudCB3aG9zZSBzY2F0dGVybGlzdCBpcyB0byBiZSByZXR1cm5l
ZA0KQEAgLTEwMzAsOCArMTAzMSw5IEBAIEVYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfdW5w
aW4sIERNQV9CVUYpOw0KICAqIEltcG9ydGFudDogRHluYW1pYyBpbXBvcnRlcnMgbXVzdCB3YWl0
IGZvciB0aGUgZXhjbHVzaXZlIGZlbmNlIG9mIHRoZSBzdHJ1Y3QNCiAgKiBkbWFfcmVzdiBhdHRh
Y2hlZCB0byB0aGUgRE1BLUJVRiBmaXJzdC4NCiAgKi8NCi1zdHJ1Y3Qgc2dfdGFibGUgKmRtYV9i
dWZfbWFwX2F0dGFjaG1lbnQoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoLA0KLQkJ
CQkJZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyZWN0aW9uKQ0KK3N0cnVjdCBzZ190YWJsZSAq
DQorZG1hX2J1Zl9tYXBfYXR0YWNobWVudF91bmxvY2tlZChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2ht
ZW50ICphdHRhY2gsDQorCQkJCWVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcmVjdGlvbikNCiB7
DQogCXN0cnVjdCBzZ190YWJsZSAqc2dfdGFibGU7DQogCWludCByOw0KQEAgLTEwOTcsMTAgKzEw
OTksMTAgQEAgc3RydWN0IHNnX3RhYmxlICpkbWFfYnVmX21hcF9hdHRhY2htZW50KHN0cnVjdCBk
bWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwNCiAjZW5kaWYgLyogQ09ORklHX0RNQV9BUElfREVC
VUcgKi8NCiAJcmV0dXJuIHNnX3RhYmxlOw0KIH0NCi1FWFBPUlRfU1lNQk9MX05TX0dQTChkbWFf
YnVmX21hcF9hdHRhY2htZW50LCBETUFfQlVGKTsNCitFWFBPUlRfU1lNQk9MX05TX0dQTChkbWFf
YnVmX21hcF9hdHRhY2htZW50X3VubG9ja2VkLCBETUFfQlVGKTsNCiANCiAvKioNCi0gKiBkbWFf
YnVmX3VubWFwX2F0dGFjaG1lbnQgLSB1bm1hcHMgYW5kIGRlY3JlYXNlcyB1c2Vjb3VudCBvZiB0
aGUgYnVmZmVyO21pZ2h0DQorICogZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkIC0g
dW5tYXBzIGFuZCBkZWNyZWFzZXMgdXNlY291bnQgb2YgdGhlIGJ1ZmZlcjttaWdodA0KICAqIGRl
YWxsb2NhdGUgdGhlIHNjYXR0ZXJsaXN0IGFzc29jaWF0ZWQuIElzIGEgd3JhcHBlciBmb3IgdW5t
YXBfZG1hX2J1ZigpIG9mDQogICogZG1hX2J1Zl9vcHMuDQogICogQGF0dGFjaDoJW2luXQlhdHRh
Y2htZW50IHRvIHVubWFwIGJ1ZmZlciBmcm9tDQpAQCAtMTEwOSw5ICsxMTExLDkgQEAgRVhQT1JU
X1NZTUJPTF9OU19HUEwoZG1hX2J1Zl9tYXBfYXR0YWNobWVudCwgRE1BX0JVRik7DQogICoNCiAg
KiBUaGlzIHVubWFwcyBhIERNQSBtYXBwaW5nIGZvciBAYXR0YWNoZWQgb2J0YWluZWQgYnkgZG1h
X2J1Zl9tYXBfYXR0YWNobWVudCgpLg0KICAqLw0KLXZvaWQgZG1hX2J1Zl91bm1hcF9hdHRhY2ht
ZW50KHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwNCi0JCQkJc3RydWN0IHNnX3Rh
YmxlICpzZ190YWJsZSwNCi0JCQkJZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyZWN0aW9uKQ0K
K3ZvaWQgZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkKHN0cnVjdCBkbWFfYnVmX2F0
dGFjaG1lbnQgKmF0dGFjaCwNCisJCQkJICAgICAgIHN0cnVjdCBzZ190YWJsZSAqc2dfdGFibGUs
DQorCQkJCSAgICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXJlY3Rpb24pDQogew0KIAlt
aWdodF9zbGVlcCgpOw0KIA0KQEAgLTExMzMsNyArMTEzNSw3IEBAIHZvaWQgZG1hX2J1Zl91bm1h
cF9hdHRhY2htZW50KHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwNCiAJICAgICFJ
U19FTkFCTEVEKENPTkZJR19ETUFCVUZfTU9WRV9OT1RJRlkpKQ0KIAkJZG1hX2J1Zl91bnBpbihh
dHRhY2gpOw0KIH0NCi1FWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX3VubWFwX2F0dGFjaG1l
bnQsIERNQV9CVUYpOw0KK0VYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfdW5tYXBfYXR0YWNo
bWVudF91bmxvY2tlZCwgRE1BX0JVRik7DQogDQogLyoqDQogICogZG1hX2J1Zl9tb3ZlX25vdGlm
eSAtIG5vdGlmeSBhdHRhY2htZW50cyB0aGF0IERNQS1idWYgaXMgbW92aW5nDQpAQCAtMTMzMCw3
ICsxMzMyLDcgQEAgRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl9lbmRfY3B1X2FjY2Vzcywg
RE1BX0JVRik7DQogDQogDQogLyoqDQotICogZG1hX2J1Zl9tbWFwIC0gU2V0dXAgdXAgYSB1c2Vy
c3BhY2UgbW1hcCB3aXRoIHRoZSBnaXZlbiB2bWENCisgKiBkbWFfYnVmX21tYXBfdW5sb2NrZWQg
LSBTZXR1cCB1cCBhIHVzZXJzcGFjZSBtbWFwIHdpdGggdGhlIGdpdmVuIHZtYQ0KICAqIEBkbWFi
dWY6CVtpbl0JYnVmZmVyIHRoYXQgc2hvdWxkIGJhY2sgdGhlIHZtYQ0KICAqIEB2bWE6CVtpbl0J
dm1hIGZvciB0aGUgbW1hcA0KICAqIEBwZ29mZjoJW2luXQlvZmZzZXQgaW4gcGFnZXMgd2hlcmUg
dGhpcyBtbWFwIHNob3VsZCBzdGFydCB3aXRoaW4gdGhlDQpAQCAtMTM0Myw4ICsxMzQ1LDggQEAg
RVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl9lbmRfY3B1X2FjY2VzcywgRE1BX0JVRik7DQog
ICoNCiAgKiBDYW4gcmV0dXJuIG5lZ2F0aXZlIGVycm9yIHZhbHVlcywgcmV0dXJucyAwIG9uIHN1
Y2Nlc3MuDQogICovDQotaW50IGRtYV9idWZfbW1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBz
dHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSwNCi0JCSB1bnNpZ25lZCBsb25nIHBnb2ZmKQ0KK2lu
dCBkbWFfYnVmX21tYXBfdW5sb2NrZWQoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IHZt
X2FyZWFfc3RydWN0ICp2bWEsDQorCQkJICB1bnNpZ25lZCBsb25nIHBnb2ZmKQ0KIHsNCiAJaWYg
KFdBUk5fT04oIWRtYWJ1ZiB8fCAhdm1hKSkNCiAJCXJldHVybiAtRUlOVkFMOw0KQEAgLTEzNjgs
MTAgKzEzNzAsMTAgQEAgaW50IGRtYV9idWZfbW1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBz
dHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZtYSwNCiANCiAJcmV0dXJuIGRtYWJ1Zi0+b3BzLT5tbWFw
KGRtYWJ1Ziwgdm1hKTsNCiB9DQotRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl9tbWFwLCBE
TUFfQlVGKTsNCitFWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX21tYXBfdW5sb2NrZWQsIERN
QV9CVUYpOw0KIA0KIC8qKg0KLSAqIGRtYV9idWZfdm1hcCAtIENyZWF0ZSB2aXJ0dWFsIG1hcHBp
bmcgZm9yIHRoZSBidWZmZXIgb2JqZWN0IGludG8ga2VybmVsDQorICogZG1hX2J1Zl92bWFwX3Vu
bG9ja2VkIC0gQ3JlYXRlIHZpcnR1YWwgbWFwcGluZyBmb3IgdGhlIGJ1ZmZlciBvYmplY3QgaW50
byBrZXJuZWwNCiAgKiBhZGRyZXNzIHNwYWNlLiBTYW1lIHJlc3RyaWN0aW9ucyBhcyBmb3Igdm1h
cCBhbmQgZnJpZW5kcyBhcHBseS4NCiAgKiBAZG1hYnVmOglbaW5dCWJ1ZmZlciB0byB2bWFwDQog
ICogQG1hcDoJW291dF0JcmV0dXJucyB0aGUgdm1hcCBwb2ludGVyDQpAQCAtMTM4Niw3ICsxMzg4
LDcgQEAgRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl9tbWFwLCBETUFfQlVGKTsNCiAgKg0K
ICAqIFJldHVybnMgMCBvbiBzdWNjZXNzLCBvciBhIG5lZ2F0aXZlIGVycm5vIGNvZGUgb3RoZXJ3
aXNlLg0KICAqLw0KLWludCBkbWFfYnVmX3ZtYXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3Ry
dWN0IGlvc3lzX21hcCAqbWFwKQ0KK2ludCBkbWFfYnVmX3ZtYXBfdW5sb2NrZWQoc3RydWN0IGRt
YV9idWYgKmRtYWJ1Ziwgc3RydWN0IGlvc3lzX21hcCAqbWFwKQ0KIHsNCiAJc3RydWN0IGlvc3lz
X21hcCBwdHI7DQogCWludCByZXQgPSAwOw0KQEAgLTE0MjIsMTQgKzE0MjQsMTQgQEAgaW50IGRt
YV9idWZfdm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgaW9zeXNfbWFwICptYXAp
DQogCW11dGV4X3VubG9jaygmZG1hYnVmLT5sb2NrKTsNCiAJcmV0dXJuIHJldDsNCiB9DQotRVhQ
T1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl92bWFwLCBETUFfQlVGKTsNCitFWFBPUlRfU1lNQk9M
X05TX0dQTChkbWFfYnVmX3ZtYXBfdW5sb2NrZWQsIERNQV9CVUYpOw0KIA0KIC8qKg0KLSAqIGRt
YV9idWZfdnVubWFwIC0gVW5tYXAgYSB2bWFwIG9idGFpbmVkIGJ5IGRtYV9idWZfdm1hcC4NCisg
KiBkbWFfYnVmX3Z1bm1hcF91bmxvY2tlZCAtIFVubWFwIGEgdm1hcCBvYnRhaW5lZCBieSBkbWFf
YnVmX3ZtYXAuDQogICogQGRtYWJ1ZjoJW2luXQlidWZmZXIgdG8gdnVubWFwDQogICogQG1hcDoJ
W2luXQl2bWFwIHBvaW50ZXIgdG8gdnVubWFwDQogICovDQotdm9pZCBkbWFfYnVmX3Z1bm1hcChz
dHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgaW9zeXNfbWFwICptYXApDQordm9pZCBkbWFf
YnVmX3Z1bm1hcF91bmxvY2tlZChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgaW9zeXNf
bWFwICptYXApDQogew0KIAlpZiAoV0FSTl9PTighZG1hYnVmKSkNCiAJCXJldHVybjsNCkBAIC0x
NDQ2LDcgKzE0NDgsNyBAQCB2b2lkIGRtYV9idWZfdnVubWFwKHN0cnVjdCBkbWFfYnVmICpkbWFi
dWYsIHN0cnVjdCBpb3N5c19tYXAgKm1hcCkNCiAJfQ0KIAltdXRleF91bmxvY2soJmRtYWJ1Zi0+
bG9jayk7DQogfQ0KLUVYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfdnVubWFwLCBETUFfQlVG
KTsNCitFWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX3Z1bm1hcF91bmxvY2tlZCwgRE1BX0JV
Rik7DQogDQogI2lmZGVmIENPTkZJR19ERUJVR19GUw0KIHN0YXRpYyBpbnQgZG1hX2J1Zl9kZWJ1
Z19zaG93KHN0cnVjdCBzZXFfZmlsZSAqcywgdm9pZCAqdW51c2VkKQ0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVmLmMgYi9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jDQppbmRleCA3ODJjYmNhMzc1MzguLmQ5ZWQ1
YTRmYmM2ZiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9k
bWFfYnVmLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9kbWFfYnVm
LmMNCkBAIC00NDksOCArNDQ5LDggQEAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICphbWRncHVfZ2Vt
X3ByaW1lX2ltcG9ydChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LA0KIAlpZiAoSVNfRVJSKG9iaikp
DQogCQlyZXR1cm4gb2JqOw0KIA0KLQlhdHRhY2ggPSBkbWFfYnVmX2R5bmFtaWNfYXR0YWNoKGRt
YV9idWYsIGRldi0+ZGV2LA0KLQkJCQkJJmFtZGdwdV9kbWFfYnVmX2F0dGFjaF9vcHMsIG9iaik7
DQorCWF0dGFjaCA9IGRtYV9idWZfZHluYW1pY19hdHRhY2hfdW5sb2NrZWQoZG1hX2J1ZiwgZGV2
LT5kZXYsDQorCQkJCQkJICZhbWRncHVfZG1hX2J1Zl9hdHRhY2hfb3BzLCBvYmopOw0KIAlpZiAo
SVNfRVJSKGF0dGFjaCkpIHsNCiAJCWRybV9nZW1fb2JqZWN0X3B1dChvYmopOw0KIAkJcmV0dXJu
IEVSUl9DQVNUKGF0dGFjaCk7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3R0bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5j
DQppbmRleCAxNzA5MzVjMjk0ZjUuLmUzNTRhZDE0MGEwYSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3R0bS5jDQpAQCAtODgzLDcgKzg4Myw3IEBAIHN0YXRpYyBpbnQgYW1k
Z3B1X3R0bV9iYWNrZW5kX2JpbmQoc3RydWN0IHR0bV9kZXZpY2UgKmJkZXYsDQogCQkJc3RydWN0
IHNnX3RhYmxlICpzZ3Q7DQogDQogCQkJYXR0YWNoID0gZ3R0LT5nb2JqLT5pbXBvcnRfYXR0YWNo
Ow0KLQkJCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnQoYXR0YWNoLCBETUFfQklESVJFQ1RJ
T05BTCk7DQorCQkJc2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudF91bmxvY2tlZChhdHRhY2gs
IERNQV9CSURJUkVDVElPTkFMKTsNCiAJCQlpZiAoSVNfRVJSKHNndCkpDQogCQkJCXJldHVybiBQ
VFJfRVJSKHNndCk7DQogDQpAQCAtMTAwOCw3ICsxMDA4LDcgQEAgc3RhdGljIHZvaWQgYW1kZ3B1
X3R0bV9iYWNrZW5kX3VuYmluZChzdHJ1Y3QgdHRtX2RldmljZSAqYmRldiwNCiAJCXN0cnVjdCBk
bWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaDsNCiANCiAJCWF0dGFjaCA9IGd0dC0+Z29iai0+aW1w
b3J0X2F0dGFjaDsNCi0JCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudChhdHRhY2gsIHR0bS0+c2cs
IERNQV9CSURJUkVDVElPTkFMKTsNCisJCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tl
ZChhdHRhY2gsIHR0bS0+c2csIERNQV9CSURJUkVDVElPTkFMKTsNCiAJCXR0bS0+c2cgPSBOVUxM
Ow0KIAl9DQogDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FybWFkYS9hcm1hZGFfZ2Vt
LmMgYi9kcml2ZXJzL2dwdS9kcm0vYXJtYWRhL2FybWFkYV9nZW0uYw0KaW5kZXggMTQ3YWJmMWEz
OTY4Li5mNzFmM2IyZDIwZTMgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYXJtYWRhL2Fy
bWFkYV9nZW0uYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FybWFkYS9hcm1hZGFfZ2VtLmMNCkBA
IC02Niw4ICs2Niw4IEBAIHZvaWQgYXJtYWRhX2dlbV9mcmVlX29iamVjdChzdHJ1Y3QgZHJtX2dl
bV9vYmplY3QgKm9iaikNCiAJaWYgKGRvYmotPm9iai5pbXBvcnRfYXR0YWNoKSB7DQogCQkvKiBX
ZSBvbmx5IGV2ZXIgZGlzcGxheSBpbXBvcnRlZCBkYXRhICovDQogCQlpZiAoZG9iai0+c2d0KQ0K
LQkJCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudChkb2JqLT5vYmouaW1wb3J0X2F0dGFjaCwNCi0J
CQkJCQkgZG9iai0+c2d0LCBETUFfVE9fREVWSUNFKTsNCisJCQlkbWFfYnVmX3VubWFwX2F0dGFj
aG1lbnRfdW5sb2NrZWQoZG9iai0+b2JqLmltcG9ydF9hdHRhY2gsDQorCQkJCQkJCSAgZG9iai0+
c2d0LCBETUFfVE9fREVWSUNFKTsNCiAJCWRybV9wcmltZV9nZW1fZGVzdHJveSgmZG9iai0+b2Jq
LCBOVUxMKTsNCiAJfQ0KIA0KQEAgLTM2NCw3ICszNjQsNyBAQCBpbnQgYXJtYWRhX2dlbV9wd3Jp
dGVfaW9jdGwoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgdm9pZCAqZGF0YSwNCiANCiAJaWYgKGFy
Z3MtPm9mZnNldCA+IGRvYmotPm9iai5zaXplIHx8DQogCSAgICBhcmdzLT5zaXplID4gZG9iai0+
b2JqLnNpemUgLSBhcmdzLT5vZmZzZXQpIHsNCi0JCURSTV9FUlJPUigiaW52YWxpZCBzaXplOiBv
YmplY3Qgc2l6ZSAldVxuIiwgZG9iai0+b2JqLnNpemUpOw0KKwkJRFJNX0VSUk9SKCJpbnZhbGlk
IHNpemU6IG9iamVjdCBzaXplICV6dVxuIiwgZG9iai0+b2JqLnNpemUpOw0KIAkJcmV0ID0gLUVJ
TlZBTDsNCiAJCWdvdG8gdW5yZWY7DQogCX0NCkBAIC01MTQsMTMgKzUxNCwxMyBAQCBhcm1hZGFf
Z2VtX3ByaW1lX2ltcG9ydChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LCBzdHJ1Y3QgZG1hX2J1ZiAq
YnVmKQ0KIAkJfQ0KIAl9DQogDQotCWF0dGFjaCA9IGRtYV9idWZfYXR0YWNoKGJ1ZiwgZGV2LT5k
ZXYpOw0KKwlhdHRhY2ggPSBkbWFfYnVmX2F0dGFjaF91bmxvY2tlZChidWYsIGRldi0+ZGV2KTsN
CiAJaWYgKElTX0VSUihhdHRhY2gpKQ0KIAkJcmV0dXJuIEVSUl9DQVNUKGF0dGFjaCk7DQogDQog
CWRvYmogPSBhcm1hZGFfZ2VtX2FsbG9jX3ByaXZhdGVfb2JqZWN0KGRldiwgYnVmLT5zaXplKTsN
CiAJaWYgKCFkb2JqKSB7DQotCQlkbWFfYnVmX2RldGFjaChidWYsIGF0dGFjaCk7DQorCQlkbWFf
YnVmX2RldGFjaF91bmxvY2tlZChidWYsIGF0dGFjaCk7DQogCQlyZXR1cm4gRVJSX1BUUigtRU5P
TUVNKTsNCiAJfQ0KIA0KQEAgLTUzOSw4ICs1MzksOCBAQCBpbnQgYXJtYWRhX2dlbV9tYXBfaW1w
b3J0KHN0cnVjdCBhcm1hZGFfZ2VtX29iamVjdCAqZG9iaikNCiB7DQogCWludCByZXQ7DQogDQot
CWRvYmotPnNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnQoZG9iai0+b2JqLmltcG9ydF9hdHRh
Y2gsDQotCQkJCQkgICBETUFfVE9fREVWSUNFKTsNCisJZG9iai0+c2d0ID0gZG1hX2J1Zl9tYXBf
YXR0YWNobWVudF91bmxvY2tlZChkb2JqLT5vYmouaW1wb3J0X2F0dGFjaCwNCisJCQkJCQkgICAg
RE1BX1RPX0RFVklDRSk7DQogCWlmIChJU19FUlIoZG9iai0+c2d0KSkgew0KIAkJcmV0ID0gUFRS
X0VSUihkb2JqLT5zZ3QpOw0KIAkJZG9iai0+c2d0ID0gTlVMTDsNCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vZHJtX2dlbV9jbWFfaGVscGVyLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dl
bV9jbWFfaGVscGVyLmMNCmluZGV4IDQyYWJlZTlhMGY0Zi4uZWUzMzMzZjM0NmI3IDEwMDY0NA0K
LS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fY21hX2hlbHBlci5jDQorKysgYi9kcml2ZXJz
L2dwdS9kcm0vZHJtX2dlbV9jbWFfaGVscGVyLmMNCkBAIC0yMzIsNyArMjMyLDcgQEAgdm9pZCBk
cm1fZ2VtX2NtYV9mcmVlKHN0cnVjdCBkcm1fZ2VtX2NtYV9vYmplY3QgKmNtYV9vYmopDQogDQog
CWlmIChnZW1fb2JqLT5pbXBvcnRfYXR0YWNoKSB7DQogCQlpZiAoY21hX29iai0+dmFkZHIpDQot
CQkJZG1hX2J1Zl92dW5tYXAoZ2VtX29iai0+aW1wb3J0X2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsN
CisJCQlkbWFfYnVmX3Z1bm1hcF91bmxvY2tlZChnZW1fb2JqLT5pbXBvcnRfYXR0YWNoLT5kbWFi
dWYsICZtYXApOw0KIAkJZHJtX3ByaW1lX2dlbV9kZXN0cm95KGdlbV9vYmosIGNtYV9vYmotPnNn
dCk7DQogCX0gZWxzZSBpZiAoY21hX29iai0+dmFkZHIpIHsNCiAJCWlmIChjbWFfb2JqLT5tYXBf
bm9uY29oZXJlbnQpDQpAQCAtNTgxLDcgKzU4MSw3IEBAIGRybV9nZW1fY21hX3ByaW1lX2ltcG9y
dF9zZ190YWJsZV92bWFwKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsDQogCXN0cnVjdCBpb3N5c19t
YXAgbWFwOw0KIAlpbnQgcmV0Ow0KIA0KLQlyZXQgPSBkbWFfYnVmX3ZtYXAoYXR0YWNoLT5kbWFi
dWYsICZtYXApOw0KKwlyZXQgPSBkbWFfYnVmX3ZtYXBfdW5sb2NrZWQoYXR0YWNoLT5kbWFidWYs
ICZtYXApOw0KIAlpZiAocmV0KSB7DQogCQlEUk1fRVJST1IoIkZhaWxlZCB0byB2bWFwIFBSSU1F
IGJ1ZmZlclxuIik7DQogCQlyZXR1cm4gRVJSX1BUUihyZXQpOw0KQEAgLTU4OSw3ICs1ODksNyBA
QCBkcm1fZ2VtX2NtYV9wcmltZV9pbXBvcnRfc2dfdGFibGVfdm1hcChzdHJ1Y3QgZHJtX2Rldmlj
ZSAqZGV2LA0KIA0KIAlvYmogPSBkcm1fZ2VtX2NtYV9wcmltZV9pbXBvcnRfc2dfdGFibGUoZGV2
LCBhdHRhY2gsIHNndCk7DQogCWlmIChJU19FUlIob2JqKSkgew0KLQkJZG1hX2J1Zl92dW5tYXAo
YXR0YWNoLT5kbWFidWYsICZtYXApOw0KKwkJZG1hX2J1Zl92dW5tYXBfdW5sb2NrZWQoYXR0YWNo
LT5kbWFidWYsICZtYXApOw0KIAkJcmV0dXJuIG9iajsNCiAJfQ0KIA0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2Ry
bV9nZW1fc2htZW1faGVscGVyLmMNCmluZGV4IDhhZDBlMDI5OTFjYS4uYzVlN2E4NGVhZDA2IDEw
MDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmMNCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jDQpAQCAtMjk5LDcgKzI5OSw3
IEBAIHN0YXRpYyBpbnQgZHJtX2dlbV9zaG1lbV92bWFwX2xvY2tlZChzdHJ1Y3QgZHJtX2dlbV9z
aG1lbV9vYmplY3QgKnNobWVtLA0KIAl9DQogDQogCWlmIChvYmotPmltcG9ydF9hdHRhY2gpIHsN
Ci0JCXJldCA9IGRtYV9idWZfdm1hcChvYmotPmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgbWFwKTsN
CisJCXJldCA9IGRtYV9idWZfdm1hcF91bmxvY2tlZChvYmotPmltcG9ydF9hdHRhY2gtPmRtYWJ1
ZiwgbWFwKTsNCiAJCWlmICghcmV0KSB7DQogCQkJaWYgKFdBUk5fT04obWFwLT5pc19pb21lbSkp
IHsNCiAJCQkJcmV0ID0gLUVJTzsNCkBAIC0zODIsNyArMzgyLDcgQEAgc3RhdGljIHZvaWQgZHJt
X2dlbV9zaG1lbV92dW5tYXBfbG9ja2VkKHN0cnVjdCBkcm1fZ2VtX3NobWVtX29iamVjdCAqc2ht
ZW0sDQogCQlyZXR1cm47DQogDQogCWlmIChvYmotPmltcG9ydF9hdHRhY2gpIHsNCi0JCWRtYV9i
dWZfdnVubWFwKG9iai0+aW1wb3J0X2F0dGFjaC0+ZG1hYnVmLCBtYXApOw0KKwkJZG1hX2J1Zl92
dW5tYXBfdW5sb2NrZWQob2JqLT5pbXBvcnRfYXR0YWNoLT5kbWFidWYsIG1hcCk7DQogCX0gZWxz
ZSB7DQogCQl2dW5tYXAoc2htZW0tPnZhZGRyKTsNCiAJCWRybV9nZW1fc2htZW1fcHV0X3BhZ2Vz
KHNobWVtKTsNCkBAIC02MTcsNyArNjE3LDcgQEAgaW50IGRybV9nZW1fc2htZW1fbW1hcChzdHJ1
Y3QgZHJtX2dlbV9zaG1lbV9vYmplY3QgKnNobWVtLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QNCiAJ
CWRybV9nZW1fb2JqZWN0X3B1dChvYmopOw0KIAkJdm1hLT52bV9wcml2YXRlX2RhdGEgPSBOVUxM
Ow0KIA0KLQkJcmV0dXJuIGRtYV9idWZfbW1hcChvYmotPmRtYV9idWYsIHZtYSwgMCk7DQorCQly
ZXR1cm4gZG1hX2J1Zl9tbWFwX3VubG9ja2VkKG9iai0+ZG1hX2J1Ziwgdm1hLCAwKTsNCiAJfQ0K
IA0KIAlyZXQgPSBkcm1fZ2VtX3NobWVtX2dldF9wYWdlcyhzaG1lbSk7DQpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2RybV9wcmltZS5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9wcmltZS5j
DQppbmRleCBhM2YxODA2NTNiOGIuLmI3NWVmMTc1Njg3MyAxMDA2NDQNCi0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9kcm1fcHJpbWUuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9wcmltZS5jDQpA
QCAtOTMwLDEzICs5MzAsMTMgQEAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpkcm1fZ2VtX3ByaW1l
X2ltcG9ydF9kZXYoc3RydWN0IGRybV9kZXZpY2UgKmRldiwNCiAJaWYgKCFkZXYtPmRyaXZlci0+
Z2VtX3ByaW1lX2ltcG9ydF9zZ190YWJsZSkNCiAJCXJldHVybiBFUlJfUFRSKC1FSU5WQUwpOw0K
IA0KLQlhdHRhY2ggPSBkbWFfYnVmX2F0dGFjaChkbWFfYnVmLCBhdHRhY2hfZGV2KTsNCisJYXR0
YWNoID0gZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQoZG1hX2J1ZiwgYXR0YWNoX2Rldik7DQogCWlm
IChJU19FUlIoYXR0YWNoKSkNCiAJCXJldHVybiBFUlJfQ0FTVChhdHRhY2gpOw0KIA0KIAlnZXRf
ZG1hX2J1ZihkbWFfYnVmKTsNCiANCi0Jc2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudChhdHRh
Y2gsIERNQV9CSURJUkVDVElPTkFMKTsNCisJc2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudF91
bmxvY2tlZChhdHRhY2gsIERNQV9CSURJUkVDVElPTkFMKTsNCiAJaWYgKElTX0VSUihzZ3QpKSB7
DQogCQlyZXQgPSBQVFJfRVJSKHNndCk7DQogCQlnb3RvIGZhaWxfZGV0YWNoOw0KQEAgLTk1NCw5
ICs5NTQsOSBAQCBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmRybV9nZW1fcHJpbWVfaW1wb3J0X2Rl
dihzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LA0KIAlyZXR1cm4gb2JqOw0KIA0KIGZhaWxfdW5tYXA6
DQotCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudChhdHRhY2gsIHNndCwgRE1BX0JJRElSRUNUSU9O
QUwpOw0KKwlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnRfdW5sb2NrZWQoYXR0YWNoLCBzZ3QsIERN
QV9CSURJUkVDVElPTkFMKTsNCiBmYWlsX2RldGFjaDoNCi0JZG1hX2J1Zl9kZXRhY2goZG1hX2J1
ZiwgYXR0YWNoKTsNCisJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoZG1hX2J1ZiwgYXR0YWNoKTsN
CiAJZG1hX2J1Zl9wdXQoZG1hX2J1Zik7DQogDQogCXJldHVybiBFUlJfUFRSKHJldCk7DQpAQCAt
MTA1Miw5ICsxMDUyLDkgQEAgdm9pZCBkcm1fcHJpbWVfZ2VtX2Rlc3Ryb3koc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICpvYmosIHN0cnVjdCBzZ190YWJsZSAqc2cpDQogDQogCWF0dGFjaCA9IG9iai0+
aW1wb3J0X2F0dGFjaDsNCiAJaWYgKHNnKQ0KLQkJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KGF0
dGFjaCwgc2csIERNQV9CSURJUkVDVElPTkFMKTsNCisJCWRtYV9idWZfdW5tYXBfYXR0YWNobWVu
dF91bmxvY2tlZChhdHRhY2gsIHNnLCBETUFfQklESVJFQ1RJT05BTCk7DQogCWRtYV9idWYgPSBh
dHRhY2gtPmRtYWJ1ZjsNCi0JZG1hX2J1Zl9kZXRhY2goYXR0YWNoLT5kbWFidWYsIGF0dGFjaCk7
DQorCWRtYV9idWZfZGV0YWNoX3VubG9ja2VkKGF0dGFjaC0+ZG1hYnVmLCBhdHRhY2gpOw0KIAkv
KiByZW1vdmUgdGhlIHJlZmVyZW5jZSAqLw0KIAlkbWFfYnVmX3B1dChkbWFfYnVmKTsNCiB9DQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRuYXZpdl9nZW1fcHJpbWUuYyBi
L2RyaXZlcnMvZ3B1L2RybS9ldG5hdml2L2V0bmF2aXZfZ2VtX3ByaW1lLmMNCmluZGV4IDNmYTJk
YTE0OTYzOS4uYWU2YzFlZGEwYTcyIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2V0bmF2
aXYvZXRuYXZpdl9nZW1fcHJpbWUuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2V0bmF2aXYvZXRu
YXZpdl9nZW1fcHJpbWUuYw0KQEAgLTY1LDcgKzY1LDcgQEAgc3RhdGljIHZvaWQgZXRuYXZpdl9n
ZW1fcHJpbWVfcmVsZWFzZShzdHJ1Y3QgZXRuYXZpdl9nZW1fb2JqZWN0ICpldG5hdml2X29iaikN
CiAJc3RydWN0IGlvc3lzX21hcCBtYXAgPSBJT1NZU19NQVBfSU5JVF9WQUREUihldG5hdml2X29i
ai0+dmFkZHIpOw0KIA0KIAlpZiAoZXRuYXZpdl9vYmotPnZhZGRyKQ0KLQkJZG1hX2J1Zl92dW5t
YXAoZXRuYXZpdl9vYmotPmJhc2UuaW1wb3J0X2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCisJCWRt
YV9idWZfdnVubWFwX3VubG9ja2VkKGV0bmF2aXZfb2JqLT5iYXNlLmltcG9ydF9hdHRhY2gtPmRt
YWJ1ZiwgJm1hcCk7DQogDQogCS8qIERvbid0IGRyb3AgdGhlIHBhZ2VzIGZvciBpbXBvcnRlZCBk
bWFidWYsIGFzIHRoZXkgYXJlIG5vdA0KIAkgKiBvdXJzLCBqdXN0IGZyZWUgdGhlIGFycmF5IHdl
IGFsbG9jYXRlZDoNCkBAIC04Miw3ICs4Miw3IEBAIHN0YXRpYyB2b2lkICpldG5hdml2X2dlbV9w
cmltZV92bWFwX2ltcGwoc3RydWN0IGV0bmF2aXZfZ2VtX29iamVjdCAqZXRuYXZpdl9vYmopDQog
DQogCWxvY2tkZXBfYXNzZXJ0X2hlbGQoJmV0bmF2aXZfb2JqLT5sb2NrKTsNCiANCi0JcmV0ID0g
ZG1hX2J1Zl92bWFwKGV0bmF2aXZfb2JqLT5iYXNlLmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgJm1h
cCk7DQorCXJldCA9IGRtYV9idWZfdm1hcF91bmxvY2tlZChldG5hdml2X29iai0+YmFzZS5pbXBv
cnRfYXR0YWNoLT5kbWFidWYsICZtYXApOw0KIAlpZiAocmV0KQ0KIAkJcmV0dXJuIE5VTEw7DQog
CXJldHVybiBtYXAudmFkZHI7DQpAQCAtOTEsNyArOTEsNyBAQCBzdGF0aWMgdm9pZCAqZXRuYXZp
dl9nZW1fcHJpbWVfdm1hcF9pbXBsKHN0cnVjdCBldG5hdml2X2dlbV9vYmplY3QgKmV0bmF2aXZf
b2JqKQ0KIHN0YXRpYyBpbnQgZXRuYXZpdl9nZW1fcHJpbWVfbW1hcF9vYmooc3RydWN0IGV0bmF2
aXZfZ2VtX29iamVjdCAqZXRuYXZpdl9vYmosDQogCQlzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZt
YSkNCiB7DQotCXJldHVybiBkbWFfYnVmX21tYXAoZXRuYXZpdl9vYmotPmJhc2UuZG1hX2J1Ziwg
dm1hLCAwKTsNCisJcmV0dXJuIGRtYV9idWZfbW1hcF91bmxvY2tlZChldG5hdml2X29iai0+YmFz
ZS5kbWFfYnVmLCB2bWEsIDApOw0KIH0NCiANCiBzdGF0aWMgY29uc3Qgc3RydWN0IGV0bmF2aXZf
Z2VtX29wcyBldG5hdml2X2dlbV9wcmltZV9vcHMgPSB7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL2V4eW5vcy9leHlub3NfZHJtX2dlbS5jIGIvZHJpdmVycy9ncHUvZHJtL2V4eW5vcy9l
eHlub3NfZHJtX2dlbS5jDQppbmRleCAzZTQ5M2Y0OGUwZDQuLjhlOTVhM2M1Y2FmOCAxMDA2NDQN
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9nZW0uYw0KKysrIGIvZHJp
dmVycy9ncHUvZHJtL2V4eW5vcy9leHlub3NfZHJtX2dlbS5jDQpAQCAtMzY2LDcgKzM2Niw3IEBA
IHN0YXRpYyBpbnQgZXh5bm9zX2RybV9nZW1fbW1hcChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9i
aiwgc3RydWN0IHZtX2FyZWFfc3RydWN0DQogCWludCByZXQ7DQogDQogCWlmIChvYmotPmltcG9y
dF9hdHRhY2gpDQotCQlyZXR1cm4gZG1hX2J1Zl9tbWFwKG9iai0+ZG1hX2J1Ziwgdm1hLCAwKTsN
CisJCXJldHVybiBkbWFfYnVmX21tYXBfdW5sb2NrZWQob2JqLT5kbWFfYnVmLCB2bWEsIDApOw0K
IA0KIAl2bWEtPnZtX2ZsYWdzIHw9IFZNX0lPIHwgVk1fRE9OVEVYUEFORCB8IFZNX0RPTlREVU1Q
Ow0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFi
dWYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYw0KaW5kZXgg
ZjUwNjJkMGM2MzMzLi41ZWNlYTdkZjk4YjEgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9nZW0vaTkxNV9nZW1fZG1hYnVmLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9kbWFidWYuYw0KQEAgLTI0MSw4ICsyNDEsOCBAQCBzdGF0aWMgaW50IGk5MTVf
Z2VtX29iamVjdF9nZXRfcGFnZXNfZG1hYnVmKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpv
YmopDQogDQogCWFzc2VydF9vYmplY3RfaGVsZChvYmopOw0KIA0KLQlwYWdlcyA9IGRtYV9idWZf
bWFwX2F0dGFjaG1lbnQob2JqLT5iYXNlLmltcG9ydF9hdHRhY2gsDQotCQkJCSAgICAgICBETUFf
QklESVJFQ1RJT05BTCk7DQorCXBhZ2VzID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudF91bmxvY2tl
ZChvYmotPmJhc2UuaW1wb3J0X2F0dGFjaCwNCisJCQkJCQlETUFfQklESVJFQ1RJT05BTCk7DQog
CWlmIChJU19FUlIocGFnZXMpKQ0KIAkJcmV0dXJuIFBUUl9FUlIocGFnZXMpOw0KIA0KQEAgLTI3
MCw4ICsyNzAsOCBAQCBzdGF0aWMgaW50IGk5MTVfZ2VtX29iamVjdF9nZXRfcGFnZXNfZG1hYnVm
KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopDQogc3RhdGljIHZvaWQgaTkxNV9nZW1f
b2JqZWN0X3B1dF9wYWdlc19kbWFidWYoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaiwN
CiAJCQkJCSAgICAgc3RydWN0IHNnX3RhYmxlICpwYWdlcykNCiB7DQotCWRtYV9idWZfdW5tYXBf
YXR0YWNobWVudChvYmotPmJhc2UuaW1wb3J0X2F0dGFjaCwgcGFnZXMsDQotCQkJCSBETUFfQklE
SVJFQ1RJT05BTCk7DQorCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChvYmotPmJh
c2UuaW1wb3J0X2F0dGFjaCwgcGFnZXMsDQorCQkJCQkgIERNQV9CSURJUkVDVElPTkFMKTsNCiB9
DQogDQogc3RhdGljIGNvbnN0IHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0X29wcyBpOTE1X2dl
bV9vYmplY3RfZG1hYnVmX29wcyA9IHsNCkBAIC0zMDYsNyArMzA2LDcgQEAgc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICppOTE1X2dlbV9wcmltZV9pbXBvcnQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwN
CiAJCXJldHVybiBFUlJfUFRSKC1FMkJJRyk7DQogDQogCS8qIG5lZWQgdG8gYXR0YWNoICovDQot
CWF0dGFjaCA9IGRtYV9idWZfYXR0YWNoKGRtYV9idWYsIGRldi0+ZGV2KTsNCisJYXR0YWNoID0g
ZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQoZG1hX2J1ZiwgZGV2LT5kZXYpOw0KIAlpZiAoSVNfRVJS
KGF0dGFjaCkpDQogCQlyZXR1cm4gRVJSX0NBU1QoYXR0YWNoKTsNCiANCkBAIC0zMzcsNyArMzM3
LDcgQEAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICppOTE1X2dlbV9wcmltZV9pbXBvcnQoc3RydWN0
IGRybV9kZXZpY2UgKmRldiwNCiAJcmV0dXJuICZvYmotPmJhc2U7DQogDQogZmFpbF9kZXRhY2g6
DQotCWRtYV9idWZfZGV0YWNoKGRtYV9idWYsIGF0dGFjaCk7DQorCWRtYV9idWZfZGV0YWNoX3Vu
bG9ja2VkKGRtYV9idWYsIGF0dGFjaCk7DQogCWRtYV9idWZfcHV0KGRtYV9idWYpOw0KIA0KIAly
ZXR1cm4gRVJSX1BUUihyZXQpOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9zZWxmdGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
c2VsZnRlc3RzL2k5MTVfZ2VtX2RtYWJ1Zi5jDQppbmRleCA2MmM2MWFmNzdhNDIuLjYwNTNhZjky
MGEyMiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkx
NV9nZW1fZG1hYnVmLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMv
aTkxNV9nZW1fZG1hYnVmLmMNCkBAIC0yMDcsMTMgKzIwNywxMyBAQCBzdGF0aWMgaW50IGlndF9k
bWFidWZfaW1wb3J0X3NhbWVfZHJpdmVyKHN0cnVjdCBkcm1faTkxNV9wcml2YXRlICppOTE1LA0K
IAlpOTE1X2dlbV9vYmplY3RfdW5sb2NrKGltcG9ydF9vYmopOw0KIA0KIAkvKiBOb3cgdHJ5IGEg
ZmFrZSBhbiBpbXBvcnRlciAqLw0KLQlpbXBvcnRfYXR0YWNoID0gZG1hX2J1Zl9hdHRhY2goZG1h
YnVmLCBvYmotPmJhc2UuZGV2LT5kZXYpOw0KKwlpbXBvcnRfYXR0YWNoID0gZG1hX2J1Zl9hdHRh
Y2hfdW5sb2NrZWQoZG1hYnVmLCBvYmotPmJhc2UuZGV2LT5kZXYpOw0KIAlpZiAoSVNfRVJSKGlt
cG9ydF9hdHRhY2gpKSB7DQogCQllcnIgPSBQVFJfRVJSKGltcG9ydF9hdHRhY2gpOw0KIAkJZ290
byBvdXRfaW1wb3J0Ow0KIAl9DQogDQotCXN0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudChpbXBv
cnRfYXR0YWNoLCBETUFfQklESVJFQ1RJT05BTCk7DQorCXN0ID0gZG1hX2J1Zl9tYXBfYXR0YWNo
bWVudF91bmxvY2tlZChpbXBvcnRfYXR0YWNoLCBETUFfQklESVJFQ1RJT05BTCk7DQogCWlmIChJ
U19FUlIoc3QpKSB7DQogCQllcnIgPSBQVFJfRVJSKHN0KTsNCiAJCWdvdG8gb3V0X2RldGFjaDsN
CkBAIC0yMjYsOSArMjI2LDkgQEAgc3RhdGljIGludCBpZ3RfZG1hYnVmX2ltcG9ydF9zYW1lX2Ry
aXZlcihzdHJ1Y3QgZHJtX2k5MTVfcHJpdmF0ZSAqaTkxNSwNCiAJCXRpbWVvdXQgPSAtRVRJTUU7
DQogCX0NCiAJZXJyID0gdGltZW91dCA+IDAgPyAwIDogdGltZW91dDsNCi0JZG1hX2J1Zl91bm1h
cF9hdHRhY2htZW50KGltcG9ydF9hdHRhY2gsIHN0LCBETUFfQklESVJFQ1RJT05BTCk7DQorCWRt
YV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChpbXBvcnRfYXR0YWNoLCBzdCwgRE1BX0JJ
RElSRUNUSU9OQUwpOw0KIG91dF9kZXRhY2g6DQotCWRtYV9idWZfZGV0YWNoKGRtYWJ1ZiwgaW1w
b3J0X2F0dGFjaCk7DQorCWRtYV9idWZfZGV0YWNoX3VubG9ja2VkKGRtYWJ1ZiwgaW1wb3J0X2F0
dGFjaCk7DQogb3V0X2ltcG9ydDoNCiAJaTkxNV9nZW1fb2JqZWN0X3B1dChpbXBvcnRfb2JqKTsN
CiBvdXRfZG1hYnVmOg0KQEAgLTI5Niw3ICsyOTYsNyBAQCBzdGF0aWMgaW50IGlndF9kbWFidWZf
aW1wb3J0KHZvaWQgKmFyZykNCiAJCWdvdG8gb3V0X29iajsNCiAJfQ0KIA0KLQllcnIgPSBkbWFf
YnVmX3ZtYXAoZG1hYnVmLCAmbWFwKTsNCisJZXJyID0gZG1hX2J1Zl92bWFwX3VubG9ja2VkKGRt
YWJ1ZiwgJm1hcCk7DQogCWRtYV9tYXAgPSBlcnIgPyBOVUxMIDogbWFwLnZhZGRyOw0KIAlpZiAo
IWRtYV9tYXApIHsNCiAJCXByX2VycigiZG1hX2J1Zl92bWFwIGZhaWxlZFxuIik7DQpAQCAtMzM3
LDcgKzMzNyw3IEBAIHN0YXRpYyBpbnQgaWd0X2RtYWJ1Zl9pbXBvcnQodm9pZCAqYXJnKQ0KIA0K
IAllcnIgPSAwOw0KIG91dF9kbWFfbWFwOg0KLQlkbWFfYnVmX3Z1bm1hcChkbWFidWYsICZtYXAp
Ow0KKwlkbWFfYnVmX3Z1bm1hcF91bmxvY2tlZChkbWFidWYsICZtYXApOw0KIG91dF9vYmo6DQog
CWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsNCiBvdXRfZG1hYnVmOg0KQEAgLTM1OCw3ICszNTgs
NyBAQCBzdGF0aWMgaW50IGlndF9kbWFidWZfaW1wb3J0X293bmVyc2hpcCh2b2lkICphcmcpDQog
CWlmIChJU19FUlIoZG1hYnVmKSkNCiAJCXJldHVybiBQVFJfRVJSKGRtYWJ1Zik7DQogDQotCWVy
ciA9IGRtYV9idWZfdm1hcChkbWFidWYsICZtYXApOw0KKwllcnIgPSBkbWFfYnVmX3ZtYXBfdW5s
b2NrZWQoZG1hYnVmLCAmbWFwKTsNCiAJcHRyID0gZXJyID8gTlVMTCA6IG1hcC52YWRkcjsNCiAJ
aWYgKCFwdHIpIHsNCiAJCXByX2VycigiZG1hX2J1Zl92bWFwIGZhaWxlZFxuIik7DQpAQCAtMzY3
LDcgKzM2Nyw3IEBAIHN0YXRpYyBpbnQgaWd0X2RtYWJ1Zl9pbXBvcnRfb3duZXJzaGlwKHZvaWQg
KmFyZykNCiAJfQ0KIA0KIAltZW1zZXQocHRyLCAweGM1LCBQQUdFX1NJWkUpOw0KLQlkbWFfYnVm
X3Z1bm1hcChkbWFidWYsICZtYXApOw0KKwlkbWFfYnVmX3Z1bm1hcF91bmxvY2tlZChkbWFidWYs
ICZtYXApOw0KIA0KIAlvYmogPSB0b19pbnRlbF9ibyhpOTE1X2dlbV9wcmltZV9pbXBvcnQoJmk5
MTUtPmRybSwgZG1hYnVmKSk7DQogCWlmIChJU19FUlIob2JqKSkgew0KQEAgLTQxOCw3ICs0MTgs
NyBAQCBzdGF0aWMgaW50IGlndF9kbWFidWZfZXhwb3J0X3ZtYXAodm9pZCAqYXJnKQ0KIAl9DQog
CWk5MTVfZ2VtX29iamVjdF9wdXQob2JqKTsNCiANCi0JZXJyID0gZG1hX2J1Zl92bWFwKGRtYWJ1
ZiwgJm1hcCk7DQorCWVyciA9IGRtYV9idWZfdm1hcF91bmxvY2tlZChkbWFidWYsICZtYXApOw0K
IAlwdHIgPSBlcnIgPyBOVUxMIDogbWFwLnZhZGRyOw0KIAlpZiAoIXB0cikgew0KIAkJcHJfZXJy
KCJkbWFfYnVmX3ZtYXAgZmFpbGVkXG4iKTsNCkBAIC00MzUsNyArNDM1LDcgQEAgc3RhdGljIGlu
dCBpZ3RfZG1hYnVmX2V4cG9ydF92bWFwKHZvaWQgKmFyZykNCiAJbWVtc2V0KHB0ciwgMHhjNSwg
ZG1hYnVmLT5zaXplKTsNCiANCiAJZXJyID0gMDsNCi0JZG1hX2J1Zl92dW5tYXAoZG1hYnVmLCAm
bWFwKTsNCisJZG1hX2J1Zl92dW5tYXBfdW5sb2NrZWQoZG1hYnVmLCAmbWFwKTsNCiBvdXQ6DQog
CWRtYV9idWZfcHV0KGRtYWJ1Zik7DQogCXJldHVybiBlcnI7DQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL29tYXBkcm0vb21hcF9nZW1fZG1hYnVmLmMgYi9kcml2ZXJzL2dwdS9kcm0vb21h
cGRybS9vbWFwX2dlbV9kbWFidWYuYw0KaW5kZXggMzkzZjgyZTI2OTI3Li5hNzI1YTkxYzJmZjkg
MTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2dlbV9kbWFidWYuYw0K
KysrIGIvZHJpdmVycy9ncHUvZHJtL29tYXBkcm0vb21hcF9nZW1fZG1hYnVmLmMNCkBAIC0xMTks
MTMgKzExOSwxMyBAQCBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9tYXBfZ2VtX3ByaW1lX2ltcG9y
dChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LA0KIAkJfQ0KIAl9DQogDQotCWF0dGFjaCA9IGRtYV9i
dWZfYXR0YWNoKGRtYV9idWYsIGRldi0+ZGV2KTsNCisJYXR0YWNoID0gZG1hX2J1Zl9hdHRhY2hf
dW5sb2NrZWQoZG1hX2J1ZiwgZGV2LT5kZXYpOw0KIAlpZiAoSVNfRVJSKGF0dGFjaCkpDQogCQly
ZXR1cm4gRVJSX0NBU1QoYXR0YWNoKTsNCiANCiAJZ2V0X2RtYV9idWYoZG1hX2J1Zik7DQogDQot
CXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnQoYXR0YWNoLCBETUFfVE9fREVWSUNFKTsNCisJ
c2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudF91bmxvY2tlZChhdHRhY2gsIERNQV9UT19ERVZJ
Q0UpOw0KIAlpZiAoSVNfRVJSKHNndCkpIHsNCiAJCXJldCA9IFBUUl9FUlIoc2d0KTsNCiAJCWdv
dG8gZmFpbF9kZXRhY2g7DQpAQCAtMTQyLDkgKzE0Miw5IEBAIHN0cnVjdCBkcm1fZ2VtX29iamVj
dCAqb21hcF9nZW1fcHJpbWVfaW1wb3J0KHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsDQogCXJldHVy
biBvYmo7DQogDQogZmFpbF91bm1hcDoNCi0JZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KGF0dGFj
aCwgc2d0LCBETUFfVE9fREVWSUNFKTsNCisJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9j
a2VkKGF0dGFjaCwgc2d0LCBETUFfVE9fREVWSUNFKTsNCiBmYWlsX2RldGFjaDoNCi0JZG1hX2J1
Zl9kZXRhY2goZG1hX2J1ZiwgYXR0YWNoKTsNCisJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoZG1h
X2J1ZiwgYXR0YWNoKTsNCiAJZG1hX2J1Zl9wdXQoZG1hX2J1Zik7DQogDQogCXJldHVybiBFUlJf
UFRSKHJldCk7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2dlbS5jIGIvZHJp
dmVycy9ncHUvZHJtL3RlZ3JhL2dlbS5jDQppbmRleCA4MTk5MTA5MGFkY2MuLmJiZmUxOTZmZjZm
NiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9nZW0uYw0KKysrIGIvZHJpdmVy
cy9ncHUvZHJtL3RlZ3JhL2dlbS5jDQpAQCAtNzgsMTUgKzc4LDE1IEBAIHN0YXRpYyBzdHJ1Y3Qg
aG9zdDF4X2JvX21hcHBpbmcgKnRlZ3JhX2JvX3BpbihzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVj
dCBob3N0MXhfDQogCWlmIChnZW0tPmltcG9ydF9hdHRhY2gpIHsNCiAJCXN0cnVjdCBkbWFfYnVm
ICpidWYgPSBnZW0tPmltcG9ydF9hdHRhY2gtPmRtYWJ1ZjsNCiANCi0JCW1hcC0+YXR0YWNoID0g
ZG1hX2J1Zl9hdHRhY2goYnVmLCBkZXYpOw0KKwkJbWFwLT5hdHRhY2ggPSBkbWFfYnVmX2F0dGFj
aF91bmxvY2tlZChidWYsIGRldik7DQogCQlpZiAoSVNfRVJSKG1hcC0+YXR0YWNoKSkgew0KIAkJ
CWVyciA9IFBUUl9FUlIobWFwLT5hdHRhY2gpOw0KIAkJCWdvdG8gZnJlZTsNCiAJCX0NCiANCi0J
CW1hcC0+c2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudChtYXAtPmF0dGFjaCwgZGlyZWN0aW9u
KTsNCisJCW1hcC0+c2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudF91bmxvY2tlZChtYXAtPmF0
dGFjaCwgZGlyZWN0aW9uKTsNCiAJCWlmIChJU19FUlIobWFwLT5zZ3QpKSB7DQotCQkJZG1hX2J1
Zl9kZXRhY2goYnVmLCBtYXAtPmF0dGFjaCk7DQorCQkJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQo
YnVmLCBtYXAtPmF0dGFjaCk7DQogCQkJZXJyID0gUFRSX0VSUihtYXAtPnNndCk7DQogCQkJbWFw
LT5zZ3QgPSBOVUxMOw0KIAkJCWdvdG8gZnJlZTsNCkBAIC0xNjAsOCArMTYwLDkgQEAgc3RhdGlj
IHN0cnVjdCBob3N0MXhfYm9fbWFwcGluZyAqdGVncmFfYm9fcGluKHN0cnVjdCBkZXZpY2UgKmRl
diwgc3RydWN0IGhvc3QxeF8NCiBzdGF0aWMgdm9pZCB0ZWdyYV9ib191bnBpbihzdHJ1Y3QgaG9z
dDF4X2JvX21hcHBpbmcgKm1hcCkNCiB7DQogCWlmIChtYXAtPmF0dGFjaCkgew0KLQkJZG1hX2J1
Zl91bm1hcF9hdHRhY2htZW50KG1hcC0+YXR0YWNoLCBtYXAtPnNndCwgbWFwLT5kaXJlY3Rpb24p
Ow0KLQkJZG1hX2J1Zl9kZXRhY2gobWFwLT5hdHRhY2gtPmRtYWJ1ZiwgbWFwLT5hdHRhY2gpOw0K
KwkJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkKG1hcC0+YXR0YWNoLCBtYXAtPnNn
dCwNCisJCQkJCQkgIG1hcC0+ZGlyZWN0aW9uKTsNCisJCWRtYV9idWZfZGV0YWNoX3VubG9ja2Vk
KG1hcC0+YXR0YWNoLT5kbWFidWYsIG1hcC0+YXR0YWNoKTsNCiAJfSBlbHNlIHsNCiAJCWRtYV91
bm1hcF9zZ3RhYmxlKG1hcC0+ZGV2LCBtYXAtPnNndCwgbWFwLT5kaXJlY3Rpb24sIDApOw0KIAkJ
c2dfZnJlZV90YWJsZShtYXAtPnNndCk7DQpAQCAtMTgxLDcgKzE4Miw3IEBAIHN0YXRpYyB2b2lk
ICp0ZWdyYV9ib19tbWFwKHN0cnVjdCBob3N0MXhfYm8gKmJvKQ0KIAlpZiAob2JqLT52YWRkcikg
ew0KIAkJcmV0dXJuIG9iai0+dmFkZHI7DQogCX0gZWxzZSBpZiAob2JqLT5nZW0uaW1wb3J0X2F0
dGFjaCkgew0KLQkJcmV0ID0gZG1hX2J1Zl92bWFwKG9iai0+Z2VtLmltcG9ydF9hdHRhY2gtPmRt
YWJ1ZiwgJm1hcCk7DQorCQlyZXQgPSBkbWFfYnVmX3ZtYXBfdW5sb2NrZWQob2JqLT5nZW0uaW1w
b3J0X2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCiAJCXJldHVybiByZXQgPyBOVUxMIDogbWFwLnZh
ZGRyOw0KIAl9IGVsc2Ugew0KIAkJcmV0dXJuIHZtYXAob2JqLT5wYWdlcywgb2JqLT5udW1fcGFn
ZXMsIFZNX01BUCwNCkBAIC0xOTcsNyArMTk4LDcgQEAgc3RhdGljIHZvaWQgdGVncmFfYm9fbXVu
bWFwKHN0cnVjdCBob3N0MXhfYm8gKmJvLCB2b2lkICphZGRyKQ0KIAlpZiAob2JqLT52YWRkcikN
CiAJCXJldHVybjsNCiAJZWxzZSBpZiAob2JqLT5nZW0uaW1wb3J0X2F0dGFjaCkNCi0JCWRtYV9i
dWZfdnVubWFwKG9iai0+Z2VtLmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgJm1hcCk7DQorCQlkbWFf
YnVmX3Z1bm1hcF91bmxvY2tlZChvYmotPmdlbS5pbXBvcnRfYXR0YWNoLT5kbWFidWYsICZtYXAp
Ow0KIAllbHNlDQogCQl2dW5tYXAoYWRkcik7DQogfQ0KQEAgLTQ1Myw3ICs0NTQsNyBAQCBzdGF0
aWMgc3RydWN0IHRlZ3JhX2JvICp0ZWdyYV9ib19pbXBvcnQoc3RydWN0IGRybV9kZXZpY2UgKmRy
bSwNCiAJaWYgKElTX0VSUihibykpDQogCQlyZXR1cm4gYm87DQogDQotCWF0dGFjaCA9IGRtYV9i
dWZfYXR0YWNoKGJ1ZiwgZHJtLT5kZXYpOw0KKwlhdHRhY2ggPSBkbWFfYnVmX2F0dGFjaF91bmxv
Y2tlZChidWYsIGRybS0+ZGV2KTsNCiAJaWYgKElTX0VSUihhdHRhY2gpKSB7DQogCQllcnIgPSBQ
VFJfRVJSKGF0dGFjaCk7DQogCQlnb3RvIGZyZWU7DQpAQCAtNDYxLDcgKzQ2Miw3IEBAIHN0YXRp
YyBzdHJ1Y3QgdGVncmFfYm8gKnRlZ3JhX2JvX2ltcG9ydChzdHJ1Y3QgZHJtX2RldmljZSAqZHJt
LA0KIA0KIAlnZXRfZG1hX2J1ZihidWYpOw0KIA0KLQliby0+c2d0ID0gZG1hX2J1Zl9tYXBfYXR0
YWNobWVudChhdHRhY2gsIERNQV9UT19ERVZJQ0UpOw0KKwliby0+c2d0ID0gZG1hX2J1Zl9tYXBf
YXR0YWNobWVudF91bmxvY2tlZChhdHRhY2gsIERNQV9UT19ERVZJQ0UpOw0KIAlpZiAoSVNfRVJS
KGJvLT5zZ3QpKSB7DQogCQllcnIgPSBQVFJfRVJSKGJvLT5zZ3QpOw0KIAkJZ290byBkZXRhY2g7
DQpAQCAtNDc5LDkgKzQ4MCw5IEBAIHN0YXRpYyBzdHJ1Y3QgdGVncmFfYm8gKnRlZ3JhX2JvX2lt
cG9ydChzdHJ1Y3QgZHJtX2RldmljZSAqZHJtLA0KIA0KIGRldGFjaDoNCiAJaWYgKCFJU19FUlJf
T1JfTlVMTChiby0+c2d0KSkNCi0JCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudChhdHRhY2gsIGJv
LT5zZ3QsIERNQV9UT19ERVZJQ0UpOw0KKwkJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9j
a2VkKGF0dGFjaCwgYm8tPnNndCwgRE1BX1RPX0RFVklDRSk7DQogDQotCWRtYV9idWZfZGV0YWNo
KGJ1ZiwgYXR0YWNoKTsNCisJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoYnVmLCBhdHRhY2gpOw0K
IAlkbWFfYnVmX3B1dChidWYpOw0KIGZyZWU6DQogCWRybV9nZW1fb2JqZWN0X3JlbGVhc2UoJmJv
LT5nZW0pOw0KQEAgLTUwOCw4ICs1MDksOCBAQCB2b2lkIHRlZ3JhX2JvX2ZyZWVfb2JqZWN0KHN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqZ2VtKQ0KIAkJdGVncmFfYm9faW9tbXVfdW5tYXAodGVncmEs
IGJvKTsNCiANCiAJaWYgKGdlbS0+aW1wb3J0X2F0dGFjaCkgew0KLQkJZG1hX2J1Zl91bm1hcF9h
dHRhY2htZW50KGdlbS0+aW1wb3J0X2F0dGFjaCwgYm8tPnNndCwNCi0JCQkJCSBETUFfVE9fREVW
SUNFKTsNCisJCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChnZW0tPmltcG9ydF9h
dHRhY2gsIGJvLT5zZ3QsDQorCQkJCQkJICBETUFfVE9fREVWSUNFKTsNCiAJCWRybV9wcmltZV9n
ZW1fZGVzdHJveShnZW0sIE5VTEwpOw0KIAl9IGVsc2Ugew0KIAkJdGVncmFfYm9fZnJlZShnZW0t
PmRldiwgYm8pOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvaW5maW5pYmFuZC9jb3JlL3VtZW1fZG1h
YnVmLmMgYi9kcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtX2RtYWJ1Zi5jDQppbmRleCBmY2U4
MGE0YTUxNDcuLjEyYjczZTZhZDA1NCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvaW5maW5pYmFuZC9j
b3JlL3VtZW1fZG1hYnVmLmMNCisrKyBiL2RyaXZlcnMvaW5maW5pYmFuZC9jb3JlL3VtZW1fZG1h
YnVmLmMNCkBAIC0yNSw3ICsyNSw4IEBAIGludCBpYl91bWVtX2RtYWJ1Zl9tYXBfcGFnZXMoc3Ry
dWN0IGliX3VtZW1fZG1hYnVmICp1bWVtX2RtYWJ1ZikNCiAJaWYgKHVtZW1fZG1hYnVmLT5zZ3Qp
DQogCQlnb3RvIHdhaXRfZmVuY2U7DQogDQotCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnQo
dW1lbV9kbWFidWYtPmF0dGFjaCwgRE1BX0JJRElSRUNUSU9OQUwpOw0KKwlzZ3QgPSBkbWFfYnVm
X21hcF9hdHRhY2htZW50X3VubG9ja2VkKHVtZW1fZG1hYnVmLT5hdHRhY2gsDQorCQkJCQkgICAg
ICBETUFfQklESVJFQ1RJT05BTCk7DQogCWlmIChJU19FUlIoc2d0KSkNCiAJCXJldHVybiBQVFJf
RVJSKHNndCk7DQogDQpAQCAtOTYsOCArOTcsOCBAQCB2b2lkIGliX3VtZW1fZG1hYnVmX3VubWFw
X3BhZ2VzKHN0cnVjdCBpYl91bWVtX2RtYWJ1ZiAqdW1lbV9kbWFidWYpDQogCQl1bWVtX2RtYWJ1
Zi0+bGFzdF9zZ190cmltID0gMDsNCiAJfQ0KIA0KLQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQo
dW1lbV9kbWFidWYtPmF0dGFjaCwgdW1lbV9kbWFidWYtPnNndCwNCi0JCQkJIERNQV9CSURJUkVD
VElPTkFMKTsNCisJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkKHVtZW1fZG1hYnVm
LT5hdHRhY2gsIHVtZW1fZG1hYnVmLT5zZ3QsDQorCQkJCQkgIERNQV9CSURJUkVDVElPTkFMKTsN
CiANCiAJdW1lbV9kbWFidWYtPnNndCA9IE5VTEw7DQogfQ0KQEAgLTE0Myw3ICsxNDQsNyBAQCBz
dHJ1Y3QgaWJfdW1lbV9kbWFidWYgKmliX3VtZW1fZG1hYnVmX2dldChzdHJ1Y3QgaWJfZGV2aWNl
ICpkZXZpY2UsDQogCWlmICghaWJfdW1lbV9udW1fcGFnZXModW1lbSkpDQogCQlnb3RvIG91dF9m
cmVlX3VtZW07DQogDQotCXVtZW1fZG1hYnVmLT5hdHRhY2ggPSBkbWFfYnVmX2R5bmFtaWNfYXR0
YWNoKA0KKwl1bWVtX2RtYWJ1Zi0+YXR0YWNoID0gZG1hX2J1Zl9keW5hbWljX2F0dGFjaF91bmxv
Y2tlZCgNCiAJCQkJCWRtYWJ1ZiwNCiAJCQkJCWRldmljZS0+ZG1hX2RldmljZSwNCiAJCQkJCW9w
cywNCkBAIC0yMjIsNyArMjIzLDcgQEAgdm9pZCBpYl91bWVtX2RtYWJ1Zl9yZWxlYXNlKHN0cnVj
dCBpYl91bWVtX2RtYWJ1ZiAqdW1lbV9kbWFidWYpDQogCQlkbWFfYnVmX3VucGluKHVtZW1fZG1h
YnVmLT5hdHRhY2gpOw0KIAlkbWFfcmVzdl91bmxvY2soZG1hYnVmLT5yZXN2KTsNCiANCi0JZG1h
X2J1Zl9kZXRhY2goZG1hYnVmLCB1bWVtX2RtYWJ1Zi0+YXR0YWNoKTsNCisJZG1hX2J1Zl9kZXRh
Y2hfdW5sb2NrZWQoZG1hYnVmLCB1bWVtX2RtYWJ1Zi0+YXR0YWNoKTsNCiAJZG1hX2J1Zl9wdXQo
ZG1hYnVmKTsNCiAJa2ZyZWUodW1lbV9kbWFidWYpOw0KIH0NCmRpZmYgLS1naXQgYS9kcml2ZXJz
L21lZGlhL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLWRtYS1jb250aWcuYyBiL2RyaXZlcnMv
bWVkaWEvY29tbW9uL3ZpZGVvYnVmMi92aWRlb2J1ZjItZG1hLWNvbnRpZy5jDQppbmRleCA2Nzhi
MzU5NzE3YzQuLmRlNzYyZGJkYWY3OCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvbWVkaWEvY29tbW9u
L3ZpZGVvYnVmMi92aWRlb2J1ZjItZG1hLWNvbnRpZy5jDQorKysgYi9kcml2ZXJzL21lZGlhL2Nv
bW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLWRtYS1jb250aWcuYw0KQEAgLTEwMSw3ICsxMDEsNyBA
QCBzdGF0aWMgdm9pZCAqdmIyX2RjX3ZhZGRyKHN0cnVjdCB2YjJfYnVmZmVyICp2Yiwgdm9pZCAq
YnVmX3ByaXYpDQogCWlmIChidWYtPmRiX2F0dGFjaCkgew0KIAkJc3RydWN0IGlvc3lzX21hcCBt
YXA7DQogDQotCQlpZiAoIWRtYV9idWZfdm1hcChidWYtPmRiX2F0dGFjaC0+ZG1hYnVmLCAmbWFw
KSkNCisJCWlmICghZG1hX2J1Zl92bWFwX3VubG9ja2VkKGJ1Zi0+ZGJfYXR0YWNoLT5kbWFidWYs
ICZtYXApKQ0KIAkJCWJ1Zi0+dmFkZHIgPSBtYXAudmFkZHI7DQogDQogCQlyZXR1cm4gYnVmLT52
YWRkcjsNCkBAIC03MTEsNyArNzExLDcgQEAgc3RhdGljIGludCB2YjJfZGNfbWFwX2RtYWJ1Zih2
b2lkICptZW1fcHJpdikNCiAJfQ0KIA0KIAkvKiBnZXQgdGhlIGFzc29jaWF0ZWQgc2NhdHRlcmxp
c3QgZm9yIHRoaXMgYnVmZmVyICovDQotCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnQoYnVm
LT5kYl9hdHRhY2gsIGJ1Zi0+ZG1hX2Rpcik7DQorCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1l
bnRfdW5sb2NrZWQoYnVmLT5kYl9hdHRhY2gsIGJ1Zi0+ZG1hX2Rpcik7DQogCWlmIChJU19FUlIo
c2d0KSkgew0KIAkJcHJfZXJyKCJFcnJvciBnZXR0aW5nIGRtYWJ1ZiBzY2F0dGVybGlzdFxuIik7
DQogCQlyZXR1cm4gLUVJTlZBTDsNCkBAIC03MjIsNyArNzIyLDggQEAgc3RhdGljIGludCB2YjJf
ZGNfbWFwX2RtYWJ1Zih2b2lkICptZW1fcHJpdikNCiAJaWYgKGNvbnRpZ19zaXplIDwgYnVmLT5z
aXplKSB7DQogCQlwcl9lcnIoImNvbnRpZ3VvdXMgY2h1bmsgaXMgdG9vIHNtYWxsICVsdS8lbHVc
biIsDQogCQkgICAgICAgY29udGlnX3NpemUsIGJ1Zi0+c2l6ZSk7DQotCQlkbWFfYnVmX3VubWFw
X2F0dGFjaG1lbnQoYnVmLT5kYl9hdHRhY2gsIHNndCwgYnVmLT5kbWFfZGlyKTsNCisJCWRtYV9i
dWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChidWYtPmRiX2F0dGFjaCwgc2d0LA0KKwkJCQkJ
CSAgYnVmLT5kbWFfZGlyKTsNCiAJCXJldHVybiAtRUZBVUxUOw0KIAl9DQogDQpAQCAtNzUwLDEw
ICs3NTEsMTAgQEAgc3RhdGljIHZvaWQgdmIyX2RjX3VubWFwX2RtYWJ1Zih2b2lkICptZW1fcHJp
dikNCiAJfQ0KIA0KIAlpZiAoYnVmLT52YWRkcikgew0KLQkJZG1hX2J1Zl92dW5tYXAoYnVmLT5k
Yl9hdHRhY2gtPmRtYWJ1ZiwgJm1hcCk7DQorCQlkbWFfYnVmX3Z1bm1hcF91bmxvY2tlZChidWYt
PmRiX2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCiAJCWJ1Zi0+dmFkZHIgPSBOVUxMOw0KIAl9DQot
CWRtYV9idWZfdW5tYXBfYXR0YWNobWVudChidWYtPmRiX2F0dGFjaCwgc2d0LCBidWYtPmRtYV9k
aXIpOw0KKwlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnRfdW5sb2NrZWQoYnVmLT5kYl9hdHRhY2gs
IHNndCwgYnVmLT5kbWFfZGlyKTsNCiANCiAJYnVmLT5kbWFfYWRkciA9IDA7DQogCWJ1Zi0+ZG1h
X3NndCA9IE5VTEw7DQpAQCAtNzY4LDcgKzc2OSw3IEBAIHN0YXRpYyB2b2lkIHZiMl9kY19kZXRh
Y2hfZG1hYnVmKHZvaWQgKm1lbV9wcml2KQ0KIAkJdmIyX2RjX3VubWFwX2RtYWJ1ZihidWYpOw0K
IA0KIAkvKiBkZXRhY2ggdGhpcyBhdHRhY2htZW50ICovDQotCWRtYV9idWZfZGV0YWNoKGJ1Zi0+
ZGJfYXR0YWNoLT5kbWFidWYsIGJ1Zi0+ZGJfYXR0YWNoKTsNCisJZG1hX2J1Zl9kZXRhY2hfdW5s
b2NrZWQoYnVmLT5kYl9hdHRhY2gtPmRtYWJ1ZiwgYnVmLT5kYl9hdHRhY2gpOw0KIAlrZnJlZShi
dWYpOw0KIH0NCiANCkBAIC03OTIsNyArNzkzLDcgQEAgc3RhdGljIHZvaWQgKnZiMl9kY19hdHRh
Y2hfZG1hYnVmKHN0cnVjdCB2YjJfYnVmZmVyICp2Yiwgc3RydWN0IGRldmljZSAqZGV2LA0KIAli
dWYtPnZiID0gdmI7DQogDQogCS8qIGNyZWF0ZSBhdHRhY2htZW50IGZvciB0aGUgZG1hYnVmIHdp
dGggdGhlIHVzZXIgZGV2aWNlICovDQotCWRiYSA9IGRtYV9idWZfYXR0YWNoKGRidWYsIGJ1Zi0+
ZGV2KTsNCisJZGJhID0gZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQoZGJ1ZiwgYnVmLT5kZXYpOw0K
IAlpZiAoSVNfRVJSKGRiYSkpIHsNCiAJCXByX2VycigiZmFpbGVkIHRvIGF0dGFjaCBkbWFidWZc
biIpOw0KIAkJa2ZyZWUoYnVmKTsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL21lZGlhL2NvbW1vbi92
aWRlb2J1ZjIvdmlkZW9idWYyLWRtYS1zZy5jIGIvZHJpdmVycy9tZWRpYS9jb21tb24vdmlkZW9i
dWYyL3ZpZGVvYnVmMi1kbWEtc2cuYw0KaW5kZXggZmE2OTE1OGE2NWIxLi4zOWUxMTYwMDMwNGEg
MTAwNjQ0DQotLS0gYS9kcml2ZXJzL21lZGlhL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLWRt
YS1zZy5jDQorKysgYi9kcml2ZXJzL21lZGlhL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLWRt
YS1zZy5jDQpAQCAtMzA5LDcgKzMwOSw3IEBAIHN0YXRpYyB2b2lkICp2YjJfZG1hX3NnX3ZhZGRy
KHN0cnVjdCB2YjJfYnVmZmVyICp2Yiwgdm9pZCAqYnVmX3ByaXYpDQogDQogCWlmICghYnVmLT52
YWRkcikgew0KIAkJaWYgKGJ1Zi0+ZGJfYXR0YWNoKSB7DQotCQkJcmV0ID0gZG1hX2J1Zl92bWFw
KGJ1Zi0+ZGJfYXR0YWNoLT5kbWFidWYsICZtYXApOw0KKwkJCXJldCA9IGRtYV9idWZfdm1hcF91
bmxvY2tlZChidWYtPmRiX2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCiAJCQlidWYtPnZhZGRyID0g
cmV0ID8gTlVMTCA6IG1hcC52YWRkcjsNCiAJCX0gZWxzZSB7DQogCQkJYnVmLT52YWRkciA9IHZt
X21hcF9yYW0oYnVmLT5wYWdlcywgYnVmLT5udW1fcGFnZXMsIC0xKTsNCkBAIC01NjUsNyArNTY1
LDcgQEAgc3RhdGljIGludCB2YjJfZG1hX3NnX21hcF9kbWFidWYodm9pZCAqbWVtX3ByaXYpDQog
CX0NCiANCiAJLyogZ2V0IHRoZSBhc3NvY2lhdGVkIHNjYXR0ZXJsaXN0IGZvciB0aGlzIGJ1ZmZl
ciAqLw0KLQlzZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50KGJ1Zi0+ZGJfYXR0YWNoLCBidWYt
PmRtYV9kaXIpOw0KKwlzZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50X3VubG9ja2VkKGJ1Zi0+
ZGJfYXR0YWNoLCBidWYtPmRtYV9kaXIpOw0KIAlpZiAoSVNfRVJSKHNndCkpIHsNCiAJCXByX2Vy
cigiRXJyb3IgZ2V0dGluZyBkbWFidWYgc2NhdHRlcmxpc3RcbiIpOw0KIAkJcmV0dXJuIC1FSU5W
QUw7DQpAQCAtNTk0LDEwICs1OTQsMTAgQEAgc3RhdGljIHZvaWQgdmIyX2RtYV9zZ191bm1hcF9k
bWFidWYodm9pZCAqbWVtX3ByaXYpDQogCX0NCiANCiAJaWYgKGJ1Zi0+dmFkZHIpIHsNCi0JCWRt
YV9idWZfdnVubWFwKGJ1Zi0+ZGJfYXR0YWNoLT5kbWFidWYsICZtYXApOw0KKwkJZG1hX2J1Zl92
dW5tYXBfdW5sb2NrZWQoYnVmLT5kYl9hdHRhY2gtPmRtYWJ1ZiwgJm1hcCk7DQogCQlidWYtPnZh
ZGRyID0gTlVMTDsNCiAJfQ0KLQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoYnVmLT5kYl9hdHRh
Y2gsIHNndCwgYnVmLT5kbWFfZGlyKTsNCisJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9j
a2VkKGJ1Zi0+ZGJfYXR0YWNoLCBzZ3QsIGJ1Zi0+ZG1hX2Rpcik7DQogDQogCWJ1Zi0+ZG1hX3Nn
dCA9IE5VTEw7DQogfQ0KQEAgLTYxMSw3ICs2MTEsNyBAQCBzdGF0aWMgdm9pZCB2YjJfZG1hX3Nn
X2RldGFjaF9kbWFidWYodm9pZCAqbWVtX3ByaXYpDQogCQl2YjJfZG1hX3NnX3VubWFwX2RtYWJ1
ZihidWYpOw0KIA0KIAkvKiBkZXRhY2ggdGhpcyBhdHRhY2htZW50ICovDQotCWRtYV9idWZfZGV0
YWNoKGJ1Zi0+ZGJfYXR0YWNoLT5kbWFidWYsIGJ1Zi0+ZGJfYXR0YWNoKTsNCisJZG1hX2J1Zl9k
ZXRhY2hfdW5sb2NrZWQoYnVmLT5kYl9hdHRhY2gtPmRtYWJ1ZiwgYnVmLT5kYl9hdHRhY2gpOw0K
IAlrZnJlZShidWYpOw0KIH0NCiANCkBAIC02MzMsNyArNjMzLDcgQEAgc3RhdGljIHZvaWQgKnZi
Ml9kbWFfc2dfYXR0YWNoX2RtYWJ1ZihzdHJ1Y3QgdmIyX2J1ZmZlciAqdmIsIHN0cnVjdCBkZXZp
Y2UgKmRldiwNCiANCiAJYnVmLT5kZXYgPSBkZXY7DQogCS8qIGNyZWF0ZSBhdHRhY2htZW50IGZv
ciB0aGUgZG1hYnVmIHdpdGggdGhlIHVzZXIgZGV2aWNlICovDQotCWRiYSA9IGRtYV9idWZfYXR0
YWNoKGRidWYsIGJ1Zi0+ZGV2KTsNCisJZGJhID0gZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQoZGJ1
ZiwgYnVmLT5kZXYpOw0KIAlpZiAoSVNfRVJSKGRiYSkpIHsNCiAJCXByX2VycigiZmFpbGVkIHRv
IGF0dGFjaCBkbWFidWZcbiIpOw0KIAkJa2ZyZWUoYnVmKTsNCmRpZmYgLS1naXQgYS9kcml2ZXJz
L21lZGlhL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLXZtYWxsb2MuYyBiL2RyaXZlcnMvbWVk
aWEvY29tbW9uL3ZpZGVvYnVmMi92aWRlb2J1ZjItdm1hbGxvYy5jDQppbmRleCA5NDgxNTJmMTU5
NmIuLjc4MzFiZjU0NTg3NCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvbWVkaWEvY29tbW9uL3ZpZGVv
YnVmMi92aWRlb2J1ZjItdm1hbGxvYy5jDQorKysgYi9kcml2ZXJzL21lZGlhL2NvbW1vbi92aWRl
b2J1ZjIvdmlkZW9idWYyLXZtYWxsb2MuYw0KQEAgLTM3Niw3ICszNzYsNyBAQCBzdGF0aWMgaW50
IHZiMl92bWFsbG9jX21hcF9kbWFidWYodm9pZCAqbWVtX3ByaXYpDQogCXN0cnVjdCBpb3N5c19t
YXAgbWFwOw0KIAlpbnQgcmV0Ow0KIA0KLQlyZXQgPSBkbWFfYnVmX3ZtYXAoYnVmLT5kYnVmLCAm
bWFwKTsNCisJcmV0ID0gZG1hX2J1Zl92bWFwX3VubG9ja2VkKGJ1Zi0+ZGJ1ZiwgJm1hcCk7DQog
CWlmIChyZXQpDQogCQlyZXR1cm4gLUVGQVVMVDsNCiAJYnVmLT52YWRkciA9IG1hcC52YWRkcjsN
CkBAIC0zODksNyArMzg5LDcgQEAgc3RhdGljIHZvaWQgdmIyX3ZtYWxsb2NfdW5tYXBfZG1hYnVm
KHZvaWQgKm1lbV9wcml2KQ0KIAlzdHJ1Y3QgdmIyX3ZtYWxsb2NfYnVmICpidWYgPSBtZW1fcHJp
djsNCiAJc3RydWN0IGlvc3lzX21hcCBtYXAgPSBJT1NZU19NQVBfSU5JVF9WQUREUihidWYtPnZh
ZGRyKTsNCiANCi0JZG1hX2J1Zl92dW5tYXAoYnVmLT5kYnVmLCAmbWFwKTsNCisJZG1hX2J1Zl92
dW5tYXBfdW5sb2NrZWQoYnVmLT5kYnVmLCAmbWFwKTsNCiAJYnVmLT52YWRkciA9IE5VTEw7DQog
fQ0KIA0KQEAgLTM5OSw3ICszOTksNyBAQCBzdGF0aWMgdm9pZCB2YjJfdm1hbGxvY19kZXRhY2hf
ZG1hYnVmKHZvaWQgKm1lbV9wcml2KQ0KIAlzdHJ1Y3QgaW9zeXNfbWFwIG1hcCA9IElPU1lTX01B
UF9JTklUX1ZBRERSKGJ1Zi0+dmFkZHIpOw0KIA0KIAlpZiAoYnVmLT52YWRkcikNCi0JCWRtYV9i
dWZfdnVubWFwKGJ1Zi0+ZGJ1ZiwgJm1hcCk7DQorCQlkbWFfYnVmX3Z1bm1hcF91bmxvY2tlZChi
dWYtPmRidWYsICZtYXApOw0KIA0KIAlrZnJlZShidWYpOw0KIH0NCmRpZmYgLS1naXQgYS9kcml2
ZXJzL21lZGlhL3BsYXRmb3JtL252aWRpYS90ZWdyYS12ZGUvZG1hYnVmLWNhY2hlLmMgYi9kcml2
ZXJzL21lZGlhL3BsYXRmb3JtL252aWRpYS90ZWdyYS12ZGUvZG1hYnVmLWNhY2hlLmMNCmluZGV4
IDY5YzM0NjE0ODA3MC4uNThlNDU5NWYzYTEwIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9tZWRpYS9w
bGF0Zm9ybS9udmlkaWEvdGVncmEtdmRlL2RtYWJ1Zi1jYWNoZS5jDQorKysgYi9kcml2ZXJzL21l
ZGlhL3BsYXRmb3JtL252aWRpYS90ZWdyYS12ZGUvZG1hYnVmLWNhY2hlLmMNCkBAIC0zOCw4ICsz
OCw4IEBAIHN0YXRpYyB2b2lkIHRlZ3JhX3ZkZV9yZWxlYXNlX2VudHJ5KHN0cnVjdCB0ZWdyYV92
ZGVfY2FjaGVfZW50cnkgKmVudHJ5KQ0KIAlpZiAoZW50cnktPnZkZS0+ZG9tYWluKQ0KIAkJdGVn
cmFfdmRlX2lvbW11X3VubWFwKGVudHJ5LT52ZGUsIGVudHJ5LT5pb3ZhKTsNCiANCi0JZG1hX2J1
Zl91bm1hcF9hdHRhY2htZW50KGVudHJ5LT5hLCBlbnRyeS0+c2d0LCBlbnRyeS0+ZG1hX2Rpcik7
DQotCWRtYV9idWZfZGV0YWNoKGRtYWJ1ZiwgZW50cnktPmEpOw0KKwlkbWFfYnVmX3VubWFwX2F0
dGFjaG1lbnRfdW5sb2NrZWQoZW50cnktPmEsIGVudHJ5LT5zZ3QsIGVudHJ5LT5kbWFfZGlyKTsN
CisJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoZG1hYnVmLCBlbnRyeS0+YSk7DQogCWRtYV9idWZf
cHV0KGRtYWJ1Zik7DQogDQogCWxpc3RfZGVsKCZlbnRyeS0+bGlzdCk7DQpAQCAtOTUsMTQgKzk1
LDE0IEBAIGludCB0ZWdyYV92ZGVfZG1hYnVmX2NhY2hlX21hcChzdHJ1Y3QgdGVncmFfdmRlICp2
ZGUsDQogCQlnb3RvIHJlZjsNCiAJfQ0KIA0KLQlhdHRhY2htZW50ID0gZG1hX2J1Zl9hdHRhY2go
ZG1hYnVmLCBkZXYpOw0KKwlhdHRhY2htZW50ID0gZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQoZG1h
YnVmLCBkZXYpOw0KIAlpZiAoSVNfRVJSKGF0dGFjaG1lbnQpKSB7DQogCQlkZXZfZXJyKGRldiwg
IkZhaWxlZCB0byBhdHRhY2ggZG1hYnVmXG4iKTsNCiAJCWVyciA9IFBUUl9FUlIoYXR0YWNobWVu
dCk7DQogCQlnb3RvIGVycl91bmxvY2s7DQogCX0NCiANCi0Jc2d0ID0gZG1hX2J1Zl9tYXBfYXR0
YWNobWVudChhdHRhY2htZW50LCBkbWFfZGlyKTsNCisJc2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNo
bWVudF91bmxvY2tlZChhdHRhY2htZW50LCBkbWFfZGlyKTsNCiAJaWYgKElTX0VSUihzZ3QpKSB7
DQogCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBnZXQgZG1hYnVmcyBzZ190YWJsZVxuIik7DQog
CQllcnIgPSBQVFJfRVJSKHNndCk7DQpAQCAtMTUyLDkgKzE1Miw5IEBAIGludCB0ZWdyYV92ZGVf
ZG1hYnVmX2NhY2hlX21hcChzdHJ1Y3QgdGVncmFfdmRlICp2ZGUsDQogZXJyX2ZyZWU6DQogCWtm
cmVlKGVudHJ5KTsNCiBlcnJfdW5tYXA6DQotCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudChhdHRh
Y2htZW50LCBzZ3QsIGRtYV9kaXIpOw0KKwlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnRfdW5sb2Nr
ZWQoYXR0YWNobWVudCwgc2d0LCBkbWFfZGlyKTsNCiBlcnJfZGV0YWNoOg0KLQlkbWFfYnVmX2Rl
dGFjaChkbWFidWYsIGF0dGFjaG1lbnQpOw0KKwlkbWFfYnVmX2RldGFjaF91bmxvY2tlZChkbWFi
dWYsIGF0dGFjaG1lbnQpOw0KIGVycl91bmxvY2s6DQogCW11dGV4X3VubG9jaygmdmRlLT5tYXBf
bG9jayk7DQogDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9taXNjL2Zhc3RycGMuYyBiL2RyaXZlcnMv
bWlzYy9mYXN0cnBjLmMNCmluZGV4IDkzZWJkMTc0ZDg0OC4uNTU4ZTgwNTZlYjgwIDEwMDY0NA0K
LS0tIGEvZHJpdmVycy9taXNjL2Zhc3RycGMuYw0KKysrIGIvZHJpdmVycy9taXNjL2Zhc3RycGMu
Yw0KQEAgLTMxMCw5ICszMTAsOSBAQCBzdGF0aWMgdm9pZCBmYXN0cnBjX2ZyZWVfbWFwKHN0cnVj
dCBrcmVmICpyZWYpDQogCQkJCXJldHVybjsNCiAJCQl9DQogCQl9DQotCQlkbWFfYnVmX3VubWFw
X2F0dGFjaG1lbnQobWFwLT5hdHRhY2gsIG1hcC0+dGFibGUsDQotCQkJCQkgRE1BX0JJRElSRUNU
SU9OQUwpOw0KLQkJZG1hX2J1Zl9kZXRhY2gobWFwLT5idWYsIG1hcC0+YXR0YWNoKTsNCisJCWRt
YV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChtYXAtPmF0dGFjaCwgbWFwLT50YWJsZSwN
CisJCQkJCQkgIERNQV9CSURJUkVDVElPTkFMKTsNCisJCWRtYV9idWZfZGV0YWNoX3VubG9ja2Vk
KG1hcC0+YnVmLCBtYXAtPmF0dGFjaCk7DQogCQlkbWFfYnVmX3B1dChtYXAtPmJ1Zik7DQogCX0N
CiANCkBAIC03MTksMTQgKzcxOSwxNCBAQCBzdGF0aWMgaW50IGZhc3RycGNfbWFwX2NyZWF0ZShz
dHJ1Y3QgZmFzdHJwY191c2VyICpmbCwgaW50IGZkLA0KIAkJZ290byBnZXRfZXJyOw0KIAl9DQog
DQotCW1hcC0+YXR0YWNoID0gZG1hX2J1Zl9hdHRhY2gobWFwLT5idWYsIHNlc3MtPmRldik7DQor
CW1hcC0+YXR0YWNoID0gZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQobWFwLT5idWYsIHNlc3MtPmRl
dik7DQogCWlmIChJU19FUlIobWFwLT5hdHRhY2gpKSB7DQogCQlkZXZfZXJyKHNlc3MtPmRldiwg
IkZhaWxlZCB0byBhdHRhY2ggZG1hYnVmXG4iKTsNCiAJCWVyciA9IFBUUl9FUlIobWFwLT5hdHRh
Y2gpOw0KIAkJZ290byBhdHRhY2hfZXJyOw0KIAl9DQogDQotCW1hcC0+dGFibGUgPSBkbWFfYnVm
X21hcF9hdHRhY2htZW50KG1hcC0+YXR0YWNoLCBETUFfQklESVJFQ1RJT05BTCk7DQorCW1hcC0+
dGFibGUgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50X3VubG9ja2VkKG1hcC0+YXR0YWNoLCBETUFf
QklESVJFQ1RJT05BTCk7DQogCWlmIChJU19FUlIobWFwLT50YWJsZSkpIHsNCiAJCWVyciA9IFBU
Ul9FUlIobWFwLT50YWJsZSk7DQogCQlnb3RvIG1hcF9lcnI7DQpAQCAtNzYzLDcgKzc2Myw3IEBA
IHN0YXRpYyBpbnQgZmFzdHJwY19tYXBfY3JlYXRlKHN0cnVjdCBmYXN0cnBjX3VzZXIgKmZsLCBp
bnQgZmQsDQogCXJldHVybiAwOw0KIA0KIG1hcF9lcnI6DQotCWRtYV9idWZfZGV0YWNoKG1hcC0+
YnVmLCBtYXAtPmF0dGFjaCk7DQorCWRtYV9idWZfZGV0YWNoX3VubG9ja2VkKG1hcC0+YnVmLCBt
YXAtPmF0dGFjaCk7DQogYXR0YWNoX2VycjoNCiAJZG1hX2J1Zl9wdXQobWFwLT5idWYpOw0KIGdl
dF9lcnI6DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy94ZW4vZ250ZGV2LWRtYWJ1Zi5jIGIvZHJpdmVy
cy94ZW4vZ250ZGV2LWRtYWJ1Zi5jDQppbmRleCA5NDBlNWU5ZThhNTQuLjVhNTBlMjY5N2U5NSAx
MDA2NDQNCi0tLSBhL2RyaXZlcnMveGVuL2dudGRldi1kbWFidWYuYw0KKysrIGIvZHJpdmVycy94
ZW4vZ250ZGV2LWRtYWJ1Zi5jDQpAQCAtNTkyLDcgKzU5Miw3IEBAIGRtYWJ1Zl9pbXBfdG9fcmVm
cyhzdHJ1Y3QgZ250ZGV2X2RtYWJ1Zl9wcml2ICpwcml2LCBzdHJ1Y3QgZGV2aWNlICpkZXYsDQog
CWdudGRldl9kbWFidWYtPnByaXYgPSBwcml2Ow0KIAlnbnRkZXZfZG1hYnVmLT5mZCA9IGZkOw0K
IA0KLQlhdHRhY2ggPSBkbWFfYnVmX2F0dGFjaChkbWFfYnVmLCBkZXYpOw0KKwlhdHRhY2ggPSBk
bWFfYnVmX2F0dGFjaF91bmxvY2tlZChkbWFfYnVmLCBkZXYpOw0KIAlpZiAoSVNfRVJSKGF0dGFj
aCkpIHsNCiAJCXJldCA9IEVSUl9DQVNUKGF0dGFjaCk7DQogCQlnb3RvIGZhaWxfZnJlZV9vYmo7
DQpAQCAtNjAwLDcgKzYwMCw3IEBAIGRtYWJ1Zl9pbXBfdG9fcmVmcyhzdHJ1Y3QgZ250ZGV2X2Rt
YWJ1Zl9wcml2ICpwcml2LCBzdHJ1Y3QgZGV2aWNlICpkZXYsDQogDQogCWdudGRldl9kbWFidWYt
PnUuaW1wLmF0dGFjaCA9IGF0dGFjaDsNCiANCi0Jc2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVu
dChhdHRhY2gsIERNQV9CSURJUkVDVElPTkFMKTsNCisJc2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNo
bWVudF91bmxvY2tlZChhdHRhY2gsIERNQV9CSURJUkVDVElPTkFMKTsNCiAJaWYgKElTX0VSUihz
Z3QpKSB7DQogCQlyZXQgPSBFUlJfQ0FTVChzZ3QpOw0KIAkJZ290byBmYWlsX2RldGFjaDsNCkBA
IC02NTgsOSArNjU4LDkgQEAgZG1hYnVmX2ltcF90b19yZWZzKHN0cnVjdCBnbnRkZXZfZG1hYnVm
X3ByaXYgKnByaXYsIHN0cnVjdCBkZXZpY2UgKmRldiwNCiBmYWlsX2VuZF9hY2Nlc3M6DQogCWRt
YWJ1Zl9pbXBfZW5kX2ZvcmVpZ25fYWNjZXNzKGdudGRldl9kbWFidWYtPnUuaW1wLnJlZnMsIGNv
dW50KTsNCiBmYWlsX3VubWFwOg0KLQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoYXR0YWNoLCBz
Z3QsIERNQV9CSURJUkVDVElPTkFMKTsNCisJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9j
a2VkKGF0dGFjaCwgc2d0LCBETUFfQklESVJFQ1RJT05BTCk7DQogZmFpbF9kZXRhY2g6DQotCWRt
YV9idWZfZGV0YWNoKGRtYV9idWYsIGF0dGFjaCk7DQorCWRtYV9idWZfZGV0YWNoX3VubG9ja2Vk
KGRtYV9idWYsIGF0dGFjaCk7DQogZmFpbF9mcmVlX29iajoNCiAJZG1hYnVmX2ltcF9mcmVlX3N0
b3JhZ2UoZ250ZGV2X2RtYWJ1Zik7DQogZmFpbF9wdXQ6DQpAQCAtNzA4LDEwICs3MDgsMTAgQEAg
c3RhdGljIGludCBkbWFidWZfaW1wX3JlbGVhc2Uoc3RydWN0IGdudGRldl9kbWFidWZfcHJpdiAq
cHJpdiwgdTMyIGZkKQ0KIAlhdHRhY2ggPSBnbnRkZXZfZG1hYnVmLT51LmltcC5hdHRhY2g7DQog
DQogCWlmIChnbnRkZXZfZG1hYnVmLT51LmltcC5zZ3QpDQotCQlkbWFfYnVmX3VubWFwX2F0dGFj
aG1lbnQoYXR0YWNoLCBnbnRkZXZfZG1hYnVmLT51LmltcC5zZ3QsDQotCQkJCQkgRE1BX0JJRElS
RUNUSU9OQUwpOw0KKwkJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkKGF0dGFjaCwg
Z250ZGV2X2RtYWJ1Zi0+dS5pbXAuc2d0LA0KKwkJCQkJCSAgRE1BX0JJRElSRUNUSU9OQUwpOw0K
IAlkbWFfYnVmID0gYXR0YWNoLT5kbWFidWY7DQotCWRtYV9idWZfZGV0YWNoKGF0dGFjaC0+ZG1h
YnVmLCBhdHRhY2gpOw0KKwlkbWFfYnVmX2RldGFjaF91bmxvY2tlZChhdHRhY2gtPmRtYWJ1Ziwg
YXR0YWNoKTsNCiAJZG1hX2J1Zl9wdXQoZG1hX2J1Zik7DQogDQogCWRtYWJ1Zl9pbXBfZnJlZV9z
dG9yYWdlKGdudGRldl9kbWFidWYpOw0KZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvZG1hLWJ1
Zi5oIGIvaW5jbHVkZS9saW51eC9kbWEtYnVmLmgNCmluZGV4IDcxNzMxNzk2YzhjMy4uOWFiMDk1
NjlkZWMxIDEwMDY0NA0KLS0tIGEvaW5jbHVkZS9saW51eC9kbWEtYnVmLmgNCisrKyBiL2luY2x1
ZGUvbGludXgvZG1hLWJ1Zi5oDQpAQCAtNjAxLDE0ICs2MDEsMTYgQEAgZG1hX2J1Zl9hdHRhY2ht
ZW50X2lzX2R5bmFtaWMoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoKQ0KIAlyZXR1
cm4gISFhdHRhY2gtPmltcG9ydGVyX29wczsNCiB9DQogDQotc3RydWN0IGRtYV9idWZfYXR0YWNo
bWVudCAqZG1hX2J1Zl9hdHRhY2goc3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwNCi0JCQkJCSAgc3Ry
dWN0IGRldmljZSAqZGV2KTsNCitzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICpkbWFfYnVmX2F0
dGFjaF91bmxvY2tlZChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLA0KKwkJCQkJCSAgIHN0cnVjdCBk
ZXZpY2UgKmRldik7DQogc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqDQotZG1hX2J1Zl9keW5h
bWljX2F0dGFjaChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgZGV2aWNlICpkZXYsDQot
CQkgICAgICAgY29uc3Qgc3RydWN0IGRtYV9idWZfYXR0YWNoX29wcyAqaW1wb3J0ZXJfb3BzLA0K
LQkJICAgICAgIHZvaWQgKmltcG9ydGVyX3ByaXYpOw0KLXZvaWQgZG1hX2J1Zl9kZXRhY2goc3Ry
dWN0IGRtYV9idWYgKmRtYWJ1ZiwNCi0JCSAgICBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICph
dHRhY2gpOw0KK2RtYV9idWZfZHluYW1pY19hdHRhY2hfdW5sb2NrZWQoc3RydWN0IGRtYV9idWYg
KmRtYWJ1Ziwgc3RydWN0IGRldmljZSAqZGV2LA0KKwkJCQljb25zdCBzdHJ1Y3QgZG1hX2J1Zl9h
dHRhY2hfb3BzICppbXBvcnRlcl9vcHMsDQorCQkJCXZvaWQgKmltcG9ydGVyX3ByaXYpOw0KKw0K
K3ZvaWQgZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoc3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwNCisJ
CQkgICAgIHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCk7DQorDQogaW50IGRtYV9i
dWZfcGluKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCk7DQogdm9pZCBkbWFfYnVm
X3VucGluKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCk7DQogDQpAQCAtNjE4LDE4
ICs2MjAsMjAgQEAgaW50IGRtYV9idWZfZmQoc3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwgaW50IGZs
YWdzKTsNCiBzdHJ1Y3QgZG1hX2J1ZiAqZG1hX2J1Zl9nZXQoaW50IGZkKTsNCiB2b2lkIGRtYV9i
dWZfcHV0KHN0cnVjdCBkbWFfYnVmICpkbWFidWYpOw0KIA0KLXN0cnVjdCBzZ190YWJsZSAqZG1h
X2J1Zl9tYXBfYXR0YWNobWVudChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICosDQotCQkJCQll
bnVtIGRtYV9kYXRhX2RpcmVjdGlvbik7DQotdm9pZCBkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQo
c3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqLCBzdHJ1Y3Qgc2dfdGFibGUgKiwNCi0JCQkJZW51
bSBkbWFfZGF0YV9kaXJlY3Rpb24pOw0KK3N0cnVjdCBzZ190YWJsZSAqZG1hX2J1Zl9tYXBfYXR0
YWNobWVudF91bmxvY2tlZChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICosDQorCQkJCQkJIGVu
dW0gZG1hX2RhdGFfZGlyZWN0aW9uKTsNCit2b2lkIGRtYV9idWZfdW5tYXBfYXR0YWNobWVudF91
bmxvY2tlZChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICosDQorCQkJCSAgICAgICBzdHJ1Y3Qg
c2dfdGFibGUgKiwNCisJCQkJICAgICAgIGVudW0gZG1hX2RhdGFfZGlyZWN0aW9uKTsNCisNCiB2
b2lkIGRtYV9idWZfbW92ZV9ub3RpZnkoc3RydWN0IGRtYV9idWYgKmRtYV9idWYpOw0KIGludCBk
bWFfYnVmX2JlZ2luX2NwdV9hY2Nlc3Moc3RydWN0IGRtYV9idWYgKmRtYV9idWYsDQogCQkJICAg
ICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIpOw0KIGludCBkbWFfYnVmX2VuZF9jcHVfYWNj
ZXNzKHN0cnVjdCBkbWFfYnVmICpkbWFfYnVmLA0KIAkJCSAgIGVudW0gZG1hX2RhdGFfZGlyZWN0
aW9uIGRpcik7DQogDQotaW50IGRtYV9idWZfbW1hcChzdHJ1Y3QgZG1hX2J1ZiAqLCBzdHJ1Y3Qg
dm1fYXJlYV9zdHJ1Y3QgKiwNCi0JCSB1bnNpZ25lZCBsb25nKTsNCi1pbnQgZG1hX2J1Zl92bWFw
KHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCBpb3N5c19tYXAgKm1hcCk7DQotdm9pZCBk
bWFfYnVmX3Z1bm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgaW9zeXNfbWFwICpt
YXApOw0KK2ludCBkbWFfYnVmX21tYXBfdW5sb2NrZWQoc3RydWN0IGRtYV9idWYgKiwgc3RydWN0
IHZtX2FyZWFfc3RydWN0ICosDQorCQkJICB1bnNpZ25lZCBsb25nKTsNCitpbnQgZG1hX2J1Zl92
bWFwX3VubG9ja2VkKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCBpb3N5c19tYXAgKm1h
cCk7DQordm9pZCBkbWFfYnVmX3Z1bm1hcF91bmxvY2tlZChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVm
LCBzdHJ1Y3QgaW9zeXNfbWFwICptYXApOw0KICNlbmRpZiAvKiBfX0RNQV9CVUZfSF9fICovDQot
LSANCjIuMzYuMQ0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdCAtLSBsaW5hcm8tbW0tc2lnQGxpc3RzLmxp
bmFyby5vcmcKVG8gdW5zdWJzY3JpYmUgc2VuZCBhbiBlbWFpbCB0byBsaW5hcm8tbW0tc2lnLWxl
YXZlQGxpc3RzLmxpbmFyby5vcmcK
