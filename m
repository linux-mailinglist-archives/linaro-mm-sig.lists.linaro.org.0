Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id D10BE42253D
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  5 Oct 2021 13:38:20 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 521DB60A5F
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  5 Oct 2021 11:38:17 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 288B0618B8; Tue,  5 Oct 2021 11:38:06 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id ABEE1605E1;
	Tue,  5 Oct 2021 11:37:58 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 446F9604FD
 for <linaro-mm-sig@lists.linaro.org>; Tue,  5 Oct 2021 11:37:49 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 3FAE56056F; Tue,  5 Oct 2021 11:37:49 +0000 (UTC)
Received: from mail-wm1-f54.google.com (mail-wm1-f54.google.com
 [209.85.128.54])
 by lists.linaro.org (Postfix) with ESMTPS id 1A4F16051A
 for <linaro-mm-sig@lists.linaro.org>; Tue,  5 Oct 2021 11:37:47 +0000 (UTC)
Received: by mail-wm1-f54.google.com with SMTP id
 a131-20020a1c7f89000000b0030d4c90fa87so2653409wmd.2
 for <linaro-mm-sig@lists.linaro.org>; Tue, 05 Oct 2021 04:37:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=0qR8ytsO8A5OIqAtnZKG0+2Ub46mTCs7ofdCgcNc3nc=;
 b=n75po99Mx4LVrYa/SsDGZnON/o+TGEm15fSfhN9M5XT4dWIudQTGNQocKjZ3EFgeZ8
 AG4dPEtVMuw7kfg6cmPdBxpZ05DiNs0SpwynSbpc/FR/mUYtzUkjFutOEDpM7R+Cii8L
 NampeC8obTk6cDJ3r0UsbMLLsuMg8Hdy5i0U4wTepEP8v+6PrIhBwilQXPqS3bUb3yoc
 8SSi7v67QiFKSSetcnvldrGE3nXB2XRhGmVBgP41eZ+NEmXy7AAUrfZO4+7EeIfzmtIz
 Uza/hRwwXjkoQmR5fV0z5zwIFALoyXhW+NCWjzxz/9ataJKgXBsJEwV4XxjI/bCoSp9i
 PNRg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=0qR8ytsO8A5OIqAtnZKG0+2Ub46mTCs7ofdCgcNc3nc=;
 b=1kpzPTgPm8aOdFdrhjeYfUuqn+QNHinv8SnKxxCy6P5xrH2DBNzz4ko7WUBM1TBlYg
 zYFTFLfHu0jDYK9xEqp8RCp+43TDMi3Q4W2WhFf4jGFGxSvE8mLLVAA3L2N0SG05Exy3
 F4IbzREyy67kbEXEKJ1RXFPxUoyRh+kY5kxYclTloHCvnGYGz+2dvin5iYvZ4gR56lfv
 89h0cclCd+55GAkUQT5nPm9l4WJPZXOt0dm591uzFCeVzrXc58x9RH4j+cBLQManaGpU
 uY6e14+L3u70ltc0rLmS0+Xe5RoeZVRM+Z3bOHIX3/AUZbcz5w2J7pOJehNiuve7VtId
 Nx8g==
X-Gm-Message-State: AOAM531C2+7xJBLq0fR0zt/P2H7QO58t4wnffgljQTZflckNR7s6o7B8
 ugjiCA8jN83aKaucWNYocCVPMWogvSo=
X-Google-Smtp-Source: ABdhPJxUBjGdqoJRHNAZ4y8w2viumhA6rlVoET7zzfiSnV5TqNUZkXMYCZV2jsl98OVv1rxC89m09Q==
X-Received: by 2002:a1c:f01a:: with SMTP id a26mr2817815wmb.150.1633433866116; 
 Tue, 05 Oct 2021 04:37:46 -0700 (PDT)
Received: from abel.fritz.box (p5b0ea1b5.dip0.t-ipconnect.de. [91.14.161.181])
 by smtp.gmail.com with ESMTPSA id
 c5sm1739912wml.9.2021.10.05.04.37.45
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 05 Oct 2021 04:37:45 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: linaro-mm-sig@lists.linaro.org, dri-devel@lists.freedesktop.org,
 linux-media@vger.kernel.org, intel-gfx@lists.freedesktop.org
Date: Tue,  5 Oct 2021 13:37:15 +0200
Message-Id: <20211005113742.1101-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20211005113742.1101-1-christian.koenig@amd.com>
References: <20211005113742.1101-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: [Linaro-mm-sig] [PATCH 01/28] dma-buf: add
 dma_resv_for_each_fence_unlocked v8
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: tvrtko.ursulin@linux.intel.com, daniel@ffwll.ch
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

QWJzdHJhY3QgdGhlIGNvbXBsZXhpdHkgb2YgaXRlcmF0aW5nIG92ZXIgYWxsIHRoZSBmZW5jZXMK
aW4gYSBkbWFfcmVzdiBvYmplY3QuCgpUaGUgbmV3IGxvb3AgaGFuZGxlcyB0aGUgd2hvbGUgUkNV
IGFuZCByZXRyeSBkYW5jZSBhbmQKcmV0dXJucyBvbmx5IGZlbmNlcyB3aGVyZSB3ZSBjYW4gYmUg
c3VyZSB3ZSBncmFiYmVkIHRoZQpyaWdodCBvbmUuCgp2MjogZml4IGFjY2Vzc2luZyB0aGUgc2hh
cmVkIGZlbmNlcyB3aGlsZSB0aGV5IG1pZ2h0IGJlIGZyZWVkLAogICAgaW1wcm92ZSBrZXJuZWxk
b2MsIHJlbmFtZSBfY3Vyc29yIHRvIF9pdGVyLCBhZGQKICAgIGRtYV9yZXN2X2l0ZXJfaXNfZXhj
bHVzaXZlLCBhZGQgZG1hX3Jlc3ZfaXRlcl9iZWdpbi9lbmQKCnYzOiByZXN0cnVjdG9yIHRoZSBj
b2RlLCBtb3ZlIHJjdV9yZWFkX2xvY2soKS91bmxvY2soKSBpbnRvIHRoZQogICAgaXRlcmF0b3Is
IGFkZCBkbWFfcmVzdl9pdGVyX2lzX3Jlc3RhcnRlZCgpCgp2NDogZml4IE5VTEwgZGVyZWYgd2hl
biBubyBleHBsaWNpdCBmZW5jZSBleGlzdHMsIGRyb3Agc3VwZXJmbG91cwogICAgcmN1X3JlYWRf
bG9jaygpL3VubG9jaygpIGNhbGxzLgoKdjU6IGZpeCB0eXBvcyBpbiB0aGUgZG9jdW1lbnRhdGlv
bgoKdjY6IGZpeCBjb2RpbmcgZXJyb3Igd2hlbiBleGNsIGZlbmNlIGlzIE5VTEwKCnY3OiBvbmUg
bW9yZSBsb2dpYyBmaXgKCnY4OiBmaXggaW5kZXggY2hlY2sgaW4gZG1hX3Jlc3ZfaXRlcl9pc19l
eGNsdXNpdmUoKQoKU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtv
ZW5pZ0BhbWQuY29tPgpSZXZpZXdlZC1ieTogVHZydGtvIFVyc3VsaW4gPHR2cnRrby51cnN1bGlu
QGludGVsLmNvbT4gKHY3KQotLS0KIGRyaXZlcnMvZG1hLWJ1Zi9kbWEtcmVzdi5jIHwgMTAwICsr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIGluY2x1ZGUvbGludXgvZG1hLXJl
c3YuaCAgIHwgIDk1ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAyIGZpbGVz
IGNoYW5nZWQsIDE5NSBpbnNlcnRpb25zKCspCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEtYnVm
L2RtYS1yZXN2LmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLXJlc3YuYwppbmRleCA4NGZiZTYwNjI5
ZTMuLjNjYmNmNjZhMTM3ZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMK
KysrIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMKQEAgLTMyMyw2ICszMjMsMTA2IEBAIHZv
aWQgZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2Uoc3RydWN0IGRtYV9yZXN2ICpvYmosIHN0cnVjdCBk
bWFfZmVuY2UgKmZlbmNlKQogfQogRVhQT1JUX1NZTUJPTChkbWFfcmVzdl9hZGRfZXhjbF9mZW5j
ZSk7CiAKKy8qKgorICogZG1hX3Jlc3ZfaXRlcl9yZXN0YXJ0X3VubG9ja2VkIC0gcmVzdGFydCB0
aGUgdW5sb2NrZWQgaXRlcmF0b3IKKyAqIEBjdXJzb3I6IFRoZSBkbWFfcmVzdl9pdGVyIG9iamVj
dCB0byByZXN0YXJ0CisgKgorICogUmVzdGFydCB0aGUgdW5sb2NrZWQgaXRlcmF0aW9uIGJ5IGlu
aXRpYWxpemluZyB0aGUgY3Vyc29yIG9iamVjdC4KKyAqLworc3RhdGljIHZvaWQgZG1hX3Jlc3Zf
aXRlcl9yZXN0YXJ0X3VubG9ja2VkKHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IpCit7CisJ
Y3Vyc29yLT5zZXEgPSByZWFkX3NlcWNvdW50X2JlZ2luKCZjdXJzb3ItPm9iai0+c2VxKTsKKwlj
dXJzb3ItPmluZGV4ID0gLTE7CisJaWYgKGN1cnNvci0+YWxsX2ZlbmNlcykKKwkJY3Vyc29yLT5m
ZW5jZXMgPSBkbWFfcmVzdl9zaGFyZWRfbGlzdChjdXJzb3ItPm9iaik7CisJZWxzZQorCQljdXJz
b3ItPmZlbmNlcyA9IE5VTEw7CisJY3Vyc29yLT5pc19yZXN0YXJ0ZWQgPSB0cnVlOworfQorCisv
KioKKyAqIGRtYV9yZXN2X2l0ZXJfd2Fsa191bmxvY2tlZCAtIHdhbGsgb3ZlciBmZW5jZXMgaW4g
YSBkbWFfcmVzdiBvYmoKKyAqIEBjdXJzb3I6IGN1cnNvciB0byByZWNvcmQgdGhlIGN1cnJlbnQg
cG9zaXRpb24KKyAqCisgKiBSZXR1cm4gYWxsIHRoZSBmZW5jZXMgaW4gdGhlIGRtYV9yZXN2IG9i
amVjdCB3aGljaCBhcmUgbm90IHlldCBzaWduYWxlZC4KKyAqIFRoZSByZXR1cm5lZCBmZW5jZSBo
YXMgYW4gZXh0cmEgbG9jYWwgcmVmZXJlbmNlIHNvIHdpbGwgc3RheSBhbGl2ZS4KKyAqIElmIGEg
Y29uY3VycmVudCBtb2RpZnkgaXMgZGV0ZWN0ZWQgdGhlIHdob2xlIGl0ZXJhdGlvbiBpcyBzdGFy
dGVkIG92ZXIgYWdhaW4uCisgKi8KK3N0YXRpYyB2b2lkIGRtYV9yZXN2X2l0ZXJfd2Fsa191bmxv
Y2tlZChzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vyc29yKQoreworCXN0cnVjdCBkbWFfcmVzdiAq
b2JqID0gY3Vyc29yLT5vYmo7CisKKwlkbyB7CisJCS8qIERyb3AgdGhlIHJlZmVyZW5jZSBmcm9t
IHRoZSBwcmV2aW91cyByb3VuZCAqLworCQlkbWFfZmVuY2VfcHV0KGN1cnNvci0+ZmVuY2UpOwor
CisJCWlmIChjdXJzb3ItPmluZGV4ID09IC0xKSB7CisJCQljdXJzb3ItPmZlbmNlID0gZG1hX3Jl
c3ZfZXhjbF9mZW5jZShvYmopOworCQkJY3Vyc29yLT5pbmRleCsrOworCQkJaWYgKCFjdXJzb3It
PmZlbmNlKQorCQkJCWNvbnRpbnVlOworCisJCX0gZWxzZSBpZiAoIWN1cnNvci0+ZmVuY2VzIHx8
CisJCQkgICBjdXJzb3ItPmluZGV4ID49IGN1cnNvci0+ZmVuY2VzLT5zaGFyZWRfY291bnQpIHsK
KwkJCWN1cnNvci0+ZmVuY2UgPSBOVUxMOworCQkJYnJlYWs7CisKKwkJfSBlbHNlIHsKKwkJCXN0
cnVjdCBkbWFfcmVzdl9saXN0ICpmZW5jZXMgPSBjdXJzb3ItPmZlbmNlczsKKwkJCXVuc2lnbmVk
IGludCBpZHggPSBjdXJzb3ItPmluZGV4Kys7CisKKwkJCWN1cnNvci0+ZmVuY2UgPSByY3VfZGVy
ZWZlcmVuY2UoZmVuY2VzLT5zaGFyZWRbaWR4XSk7CisJCX0KKwkJY3Vyc29yLT5mZW5jZSA9IGRt
YV9mZW5jZV9nZXRfcmN1KGN1cnNvci0+ZmVuY2UpOworCQlpZiAoIWN1cnNvci0+ZmVuY2UgfHwg
IWRtYV9mZW5jZV9pc19zaWduYWxlZChjdXJzb3ItPmZlbmNlKSkKKwkJCWJyZWFrOworCX0gd2hp
bGUgKHRydWUpOworfQorCisvKioKKyAqIGRtYV9yZXN2X2l0ZXJfZmlyc3RfdW5sb2NrZWQgLSBm
aXJzdCBmZW5jZSBpbiBhbiB1bmxvY2tlZCBkbWFfcmVzdiBvYmouCisgKiBAY3Vyc29yOiB0aGUg
Y3Vyc29yIHdpdGggdGhlIGN1cnJlbnQgcG9zaXRpb24KKyAqCisgKiBSZXR1cm5zIHRoZSBmaXJz
dCBmZW5jZSBmcm9tIGFuIHVubG9ja2VkIGRtYV9yZXN2IG9iai4KKyAqLworc3RydWN0IGRtYV9m
ZW5jZSAqZG1hX3Jlc3ZfaXRlcl9maXJzdF91bmxvY2tlZChzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAq
Y3Vyc29yKQoreworCXJjdV9yZWFkX2xvY2soKTsKKwlkbyB7CisJCWRtYV9yZXN2X2l0ZXJfcmVz
dGFydF91bmxvY2tlZChjdXJzb3IpOworCQlkbWFfcmVzdl9pdGVyX3dhbGtfdW5sb2NrZWQoY3Vy
c29yKTsKKwl9IHdoaWxlIChyZWFkX3NlcWNvdW50X3JldHJ5KCZjdXJzb3ItPm9iai0+c2VxLCBj
dXJzb3ItPnNlcSkpOworCXJjdV9yZWFkX3VubG9jaygpOworCisJcmV0dXJuIGN1cnNvci0+ZmVu
Y2U7Cit9CitFWFBPUlRfU1lNQk9MKGRtYV9yZXN2X2l0ZXJfZmlyc3RfdW5sb2NrZWQpOworCisv
KioKKyAqIGRtYV9yZXN2X2l0ZXJfbmV4dF91bmxvY2tlZCAtIG5leHQgZmVuY2UgaW4gYW4gdW5s
b2NrZWQgZG1hX3Jlc3Ygb2JqLgorICogQGN1cnNvcjogdGhlIGN1cnNvciB3aXRoIHRoZSBjdXJy
ZW50IHBvc2l0aW9uCisgKgorICogUmV0dXJucyB0aGUgbmV4dCBmZW5jZSBmcm9tIGFuIHVubG9j
a2VkIGRtYV9yZXN2IG9iai4KKyAqLworc3RydWN0IGRtYV9mZW5jZSAqZG1hX3Jlc3ZfaXRlcl9u
ZXh0X3VubG9ja2VkKHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IpCit7CisJYm9vbCByZXN0
YXJ0OworCisJcmN1X3JlYWRfbG9jaygpOworCWN1cnNvci0+aXNfcmVzdGFydGVkID0gZmFsc2U7
CisJcmVzdGFydCA9IHJlYWRfc2VxY291bnRfcmV0cnkoJmN1cnNvci0+b2JqLT5zZXEsIGN1cnNv
ci0+c2VxKTsKKwlkbyB7CisJCWlmIChyZXN0YXJ0KQorCQkJZG1hX3Jlc3ZfaXRlcl9yZXN0YXJ0
X3VubG9ja2VkKGN1cnNvcik7CisJCWRtYV9yZXN2X2l0ZXJfd2Fsa191bmxvY2tlZChjdXJzb3Ip
OworCQlyZXN0YXJ0ID0gdHJ1ZTsKKwl9IHdoaWxlIChyZWFkX3NlcWNvdW50X3JldHJ5KCZjdXJz
b3ItPm9iai0+c2VxLCBjdXJzb3ItPnNlcSkpOworCXJjdV9yZWFkX3VubG9jaygpOworCisJcmV0
dXJuIGN1cnNvci0+ZmVuY2U7Cit9CitFWFBPUlRfU1lNQk9MKGRtYV9yZXN2X2l0ZXJfbmV4dF91
bmxvY2tlZCk7CisKIC8qKgogICogZG1hX3Jlc3ZfY29weV9mZW5jZXMgLSBDb3B5IGFsbCBmZW5j
ZXMgZnJvbSBzcmMgdG8gZHN0LgogICogQGRzdDogdGhlIGRlc3RpbmF0aW9uIHJlc2VydmF0aW9u
IG9iamVjdApkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9kbWEtcmVzdi5oIGIvaW5jbHVkZS9s
aW51eC9kbWEtcmVzdi5oCmluZGV4IDkxMDBkZDNkYzIxZi4uNzY0MTM4YWQ4NTgzIDEwMDY0NAot
LS0gYS9pbmNsdWRlL2xpbnV4L2RtYS1yZXN2LmgKKysrIGIvaW5jbHVkZS9saW51eC9kbWEtcmVz
di5oCkBAIC0xNDksNiArMTQ5LDEwMSBAQCBzdHJ1Y3QgZG1hX3Jlc3YgewogCXN0cnVjdCBkbWFf
cmVzdl9saXN0IF9fcmN1ICpmZW5jZTsKIH07CiAKKy8qKgorICogc3RydWN0IGRtYV9yZXN2X2l0
ZXIgLSBjdXJyZW50IHBvc2l0aW9uIGludG8gdGhlIGRtYV9yZXN2IGZlbmNlcworICoKKyAqIERv
bid0IHRvdWNoIHRoaXMgZGlyZWN0bHkgaW4gdGhlIGRyaXZlciwgdXNlIHRoZSBhY2Nlc3NvciBm
dW5jdGlvbiBpbnN0ZWFkLgorICovCitzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciB7CisJLyoqIEBvYmo6
IFRoZSBkbWFfcmVzdiBvYmplY3Qgd2UgaXRlcmF0ZSBvdmVyICovCisJc3RydWN0IGRtYV9yZXN2
ICpvYmo7CisKKwkvKiogQGFsbF9mZW5jZXM6IElmIGFsbCBmZW5jZXMgc2hvdWxkIGJlIHJldHVy
bmVkICovCisJYm9vbCBhbGxfZmVuY2VzOworCisJLyoqIEBmZW5jZTogdGhlIGN1cnJlbnRseSBo
YW5kbGVkIGZlbmNlICovCisJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7CisKKwkvKiogQHNlcTog
c2VxdWVuY2UgbnVtYmVyIHRvIGNoZWNrIGZvciBtb2RpZmljYXRpb25zICovCisJdW5zaWduZWQg
aW50IHNlcTsKKworCS8qKiBAaW5kZXg6IGluZGV4IGludG8gdGhlIHNoYXJlZCBmZW5jZXMgKi8K
Kwl1bnNpZ25lZCBpbnQgaW5kZXg7CisKKwkvKiogQGZlbmNlczogdGhlIHNoYXJlZCBmZW5jZXMg
Ki8KKwlzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqZmVuY2VzOworCisJLyoqIEBpc19yZXN0YXJ0ZWQ6
IHRydWUgaWYgdGhpcyBpcyB0aGUgZmlyc3QgcmV0dXJuZWQgZmVuY2UgKi8KKwlib29sIGlzX3Jl
c3RhcnRlZDsKK307CisKK3N0cnVjdCBkbWFfZmVuY2UgKmRtYV9yZXN2X2l0ZXJfZmlyc3RfdW5s
b2NrZWQoc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcik7CitzdHJ1Y3QgZG1hX2ZlbmNlICpk
bWFfcmVzdl9pdGVyX25leHRfdW5sb2NrZWQoc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcik7
CisKKy8qKgorICogZG1hX3Jlc3ZfaXRlcl9iZWdpbiAtIGluaXRpYWxpemUgYSBkbWFfcmVzdl9p
dGVyIG9iamVjdAorICogQGN1cnNvcjogVGhlIGRtYV9yZXN2X2l0ZXIgb2JqZWN0IHRvIGluaXRp
YWxpemUKKyAqIEBvYmo6IFRoZSBkbWFfcmVzdiBvYmplY3Qgd2hpY2ggd2Ugd2FudCB0byBpdGVy
YXRlIG92ZXIKKyAqIEBhbGxfZmVuY2VzOiBJZiBhbGwgZmVuY2VzIHNob3VsZCBiZSByZXR1cm5l
ZCBvciBqdXN0IHRoZSBleGNsdXNpdmUgb25lCisgKi8KK3N0YXRpYyBpbmxpbmUgdm9pZCBkbWFf
cmVzdl9pdGVyX2JlZ2luKHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IsCisJCQkJICAgICAg
IHN0cnVjdCBkbWFfcmVzdiAqb2JqLAorCQkJCSAgICAgICBib29sIGFsbF9mZW5jZXMpCit7CisJ
Y3Vyc29yLT5vYmogPSBvYmo7CisJY3Vyc29yLT5hbGxfZmVuY2VzID0gYWxsX2ZlbmNlczsKKwlj
dXJzb3ItPmZlbmNlID0gTlVMTDsKK30KKworLyoqCisgKiBkbWFfcmVzdl9pdGVyX2VuZCAtIGNs
ZWFudXAgYSBkbWFfcmVzdl9pdGVyIG9iamVjdAorICogQGN1cnNvcjogdGhlIGRtYV9yZXN2X2l0
ZXIgb2JqZWN0IHdoaWNoIHNob3VsZCBiZSBjbGVhbmVkIHVwCisgKgorICogTWFrZSBzdXJlIHRo
YXQgdGhlIHJlZmVyZW5jZSB0byB0aGUgZmVuY2UgaW4gdGhlIGN1cnNvciBpcyBwcm9wZXJseQor
ICogZHJvcHBlZC4KKyAqLworc3RhdGljIGlubGluZSB2b2lkIGRtYV9yZXN2X2l0ZXJfZW5kKHN0
cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IpCit7CisJZG1hX2ZlbmNlX3B1dChjdXJzb3ItPmZl
bmNlKTsKK30KKworLyoqCisgKiBkbWFfcmVzdl9pdGVyX2lzX2V4Y2x1c2l2ZSAtIHRlc3QgaWYg
dGhlIGN1cnJlbnQgZmVuY2UgaXMgdGhlIGV4Y2x1c2l2ZSBvbmUKKyAqIEBjdXJzb3I6IHRoZSBj
dXJzb3Igb2YgdGhlIGN1cnJlbnQgcG9zaXRpb24KKyAqCisgKiBSZXR1cm5zIHRydWUgaWYgdGhl
IGN1cnJlbnRseSByZXR1cm5lZCBmZW5jZSBpcyB0aGUgZXhjbHVzaXZlIG9uZS4KKyAqLworc3Rh
dGljIGlubGluZSBib29sIGRtYV9yZXN2X2l0ZXJfaXNfZXhjbHVzaXZlKHN0cnVjdCBkbWFfcmVz
dl9pdGVyICpjdXJzb3IpCit7CisJcmV0dXJuIGN1cnNvci0+aW5kZXggPT0gMDsKK30KKworLyoq
CisgKiBkbWFfcmVzdl9pdGVyX2lzX3Jlc3RhcnRlZCAtIHRlc3QgaWYgdGhpcyBpcyB0aGUgZmly
c3QgZmVuY2UgYWZ0ZXIgYSByZXN0YXJ0CisgKiBAY3Vyc29yOiB0aGUgY3Vyc29yIHdpdGggdGhl
IGN1cnJlbnQgcG9zaXRpb24KKyAqCisgKiBSZXR1cm4gdHJ1ZSBpZiB0aGlzIGlzIHRoZSBmaXJz
dCBmZW5jZSBpbiBhbiBpdGVyYXRpb24gYWZ0ZXIgYSByZXN0YXJ0LgorICovCitzdGF0aWMgaW5s
aW5lIGJvb2wgZG1hX3Jlc3ZfaXRlcl9pc19yZXN0YXJ0ZWQoc3RydWN0IGRtYV9yZXN2X2l0ZXIg
KmN1cnNvcikKK3sKKwlyZXR1cm4gY3Vyc29yLT5pc19yZXN0YXJ0ZWQ7Cit9CisKKy8qKgorICog
ZG1hX3Jlc3ZfZm9yX2VhY2hfZmVuY2VfdW5sb2NrZWQgLSB1bmxvY2tlZCBmZW5jZSBpdGVyYXRv
cgorICogQGN1cnNvcjogYSBzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBwb2ludGVyCisgKiBAZmVuY2U6
IHRoZSBjdXJyZW50IGZlbmNlCisgKgorICogSXRlcmF0ZSBvdmVyIHRoZSBmZW5jZXMgaW4gYSBz
dHJ1Y3QgZG1hX3Jlc3Ygb2JqZWN0IHdpdGhvdXQgaG9sZGluZyB0aGUKKyAqICZkbWFfcmVzdi5s
b2NrIGFuZCB1c2luZyBSQ1UgaW5zdGVhZC4gVGhlIGN1cnNvciBuZWVkcyB0byBiZSBpbml0aWFs
aXplZAorICogd2l0aCBkbWFfcmVzdl9pdGVyX2JlZ2luKCkgYW5kIGNsZWFuZWQgdXAgd2l0aCBk
bWFfcmVzdl9pdGVyX2VuZCgpLiBJbnNpZGUKKyAqIHRoZSBpdGVyYXRvciBhIHJlZmVyZW5jZSB0
byB0aGUgZG1hX2ZlbmNlIGlzIGhlbGQgYW5kIHRoZSBSQ1UgbG9jayBkcm9wcGVkLgorICogV2hl
biB0aGUgZG1hX3Jlc3YgaXMgbW9kaWZpZWQgdGhlIGl0ZXJhdGlvbiBzdGFydHMgb3ZlciBhZ2Fp
bi4KKyAqLworI2RlZmluZSBkbWFfcmVzdl9mb3JfZWFjaF9mZW5jZV91bmxvY2tlZChjdXJzb3Is
IGZlbmNlKQkJCVwKKwlmb3IgKGZlbmNlID0gZG1hX3Jlc3ZfaXRlcl9maXJzdF91bmxvY2tlZChj
dXJzb3IpOwkJXAorCSAgICAgZmVuY2U7IGZlbmNlID0gZG1hX3Jlc3ZfaXRlcl9uZXh0X3VubG9j
a2VkKGN1cnNvcikpCisKICNkZWZpbmUgZG1hX3Jlc3ZfaGVsZChvYmopIGxvY2tkZXBfaXNfaGVs
ZCgmKG9iaiktPmxvY2suYmFzZSkKICNkZWZpbmUgZG1hX3Jlc3ZfYXNzZXJ0X2hlbGQob2JqKSBs
b2NrZGVwX2Fzc2VydF9oZWxkKCYob2JqKS0+bG9jay5iYXNlKQogCi0tIAoyLjI1LjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbmFyby1tbS1zaWcg
bWFpbGluZyBsaXN0CkxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZwpodHRwczovL2xpc3Rz
LmxpbmFyby5vcmcvbWFpbG1hbi9saXN0aW5mby9saW5hcm8tbW0tc2lnCg==
