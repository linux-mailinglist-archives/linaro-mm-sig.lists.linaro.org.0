Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 14FE5360A9F
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 15 Apr 2021 15:38:44 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id C5F59667B5
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 15 Apr 2021 13:38:42 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id BA1BD667BC; Thu, 15 Apr 2021 13:38:42 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_NONE,RCVD_IN_MSPIKE_H2,SPF_HELO_NONE autolearn=disabled
	version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 0C66B667B7;
	Thu, 15 Apr 2021 13:37:54 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 982C360E3A
 for <linaro-mm-sig@lists.linaro.org>; Thu, 15 Apr 2021 13:37:50 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 8898B667B7; Thu, 15 Apr 2021 13:37:50 +0000 (UTC)
Received: from mail-wr1-f47.google.com (mail-wr1-f47.google.com
 [209.85.221.47])
 by lists.linaro.org (Postfix) with ESMTPS id A372460E3A
 for <linaro-mm-sig@lists.linaro.org>; Thu, 15 Apr 2021 13:37:48 +0000 (UTC)
Received: by mail-wr1-f47.google.com with SMTP id x7so23321482wrw.10
 for <linaro-mm-sig@lists.linaro.org>; Thu, 15 Apr 2021 06:37:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:content-transfer-encoding
 :in-reply-to;
 bh=jlzpWqSDfbhJuZAgj+0XEEwMss/imkxxzLL0+p4EIwE=;
 b=Rvj383Lzbz9g+2a8S8j5ErQzWO/R+TqDvlIZD52iA3IyJbyTMPs/9TBNfDD97JpGR/
 HbIUeaO/VYjJfupHroyZQoy6YxPGKhzoPVpdeYYI8j0byp+3iGdRPIWLXNHlKDIbxsJz
 EpkkLDOOFTHNW/CVD9/LKGsaNKY3Dh1IoHDVFspxj90FVEIBwi92Vz4TwNXGHHaATQ4v
 g8jnSLm89m07sc+/NzL2ku2mwYjClbTp9JXjTY/m3IgGxtM/wIQcsYAs0wG0i/J+FQH/
 MT8H0sxN11qftGFwNsFO+qaeKpm1sTXaeS4+sR2DkfVCrRZUydyKHQGttVgwPQoXMt7y
 9nRA==
X-Gm-Message-State: AOAM5339FMBSMOC0VuOU0xaAVU1EnCow2Bmr5ZL/LV4ffyhWA4B/8Xxq
 3bpansNYXfu1eXunredb7bGtoA==
X-Google-Smtp-Source: ABdhPJwuw95u2hb5tiEiUsQ18aqEAp0zm6GfjfJdMY/C4OxI3Z4ivK+912BF+QeXqggMlNgg/iTSFQ==
X-Received: by 2002:a5d:6605:: with SMTP id n5mr3533686wru.116.1618493867774; 
 Thu, 15 Apr 2021 06:37:47 -0700 (PDT)
Received: from phenom.ffwll.local ([2a02:168:57f4:0:efd0:b9e5:5ae6:c2fa])
 by smtp.gmail.com with ESMTPSA id a15sm3194412wrr.53.2021.04.15.06.37.46
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 15 Apr 2021 06:37:46 -0700 (PDT)
Date: Thu, 15 Apr 2021 15:37:44 +0200
From: Daniel Vetter <daniel@ffwll.ch>
To: Christian =?iso-8859-1?Q?K=F6nig?= <christian.koenig@amd.com>
Message-ID: <YHhBqNKukDlZ2Cld@phenom.ffwll.local>
References: <62e5b25ce7e22633c09fb0242a69d268b3b45595.camel@linux.intel.com>
 <d5ad41b9-0248-285b-8873-b8010e7c8c27@amd.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <d5ad41b9-0248-285b-8873-b8010e7c8c27@amd.com>
X-Operating-System: Linux phenom 5.7.0-1-amd64 
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: Thomas =?iso-8859-1?Q?Hellstr=F6m?= <thomas.hellstrom@linux.intel.com>,
 Ramalingam C <ramalingam.c@intel.com>, intel-gfx@lists.freedesktop.org,
 Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
 dri-devel@lists.freedesktop.org, linaro-mm-sig@lists.linaro.org,
 Matthew Auld <matthew.auld@intel.com>, Daniel Vetter <daniel@ffwll.ch>
Subject: Re: [Linaro-mm-sig] [RFC] Cross-driver ww transaction lock lists
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

T24gVHVlLCBBcHIgMTMsIDIwMjEgYXQgMDk6NTc6MDZBTSArMDIwMCwgQ2hyaXN0aWFuIEvDtm5p
ZyB3cm90ZToKPiAKPiAKPiBBbSAxMy4wNC4yMSB1bSAwOTo1MCBzY2hyaWViIFRob21hcyBIZWxs
c3Ryw7ZtOgo+ID4gSGkhCj4gPiAKPiA+IER1cmluZyB0aGUgZG1hX3Jlc3YgY29udmVyc2lvbiBv
ZiB0aGUgaTkxNSBkcml2ZXIsIHdlJ3ZlIGJlZW4gdXNpbmcgd3cKPiA+IHRyYW5zYWN0aW9uIGxv
Y2sgbGlzdHMgdG8ga2VlcCB0cmFjayBvZiB3d19tdXRleGVzIHRoYXQgYXJlIGxvY2tlZAo+ID4g
ZHVyaW5nIHRoZSB0cmFuc2FjdGlvbiBzbyB0aGF0IHRoZXkgY2FuIGJlIGJhdGNoIHVubG9ja2Vk
IGF0IHN1aXRhYmxlCj4gPiBsb2NhdGlvbnMuIEluY2x1ZGluZyBhbHNvIHRoZSBMTUVNL1ZSQU0g
ZXZpY3Rpb24gd2UndmUgZW5kZWQgdXAgd2l0aAo+ID4gdHdvIHN0YXRpYyBsaXN0cyBwZXIgdHJh
bnNhY3Rpb24gY29udGV4dDsgb25lIHR5cGljYWxseSB1bmxvY2tlZCBhdCB0aGUKPiA+IGVuZCBv
ZiB0cmFuc2FjdGlvbiBhbmQgb25lIGluaXRpYWxpemVkIGJlZm9yZSBhbmQgdW5sb2NrZWQgYWZ0
ZXIgZWFjaAo+ID4gYnVmZmVyIG9iamVjdCB2YWxpZGF0ZS4gVGhpcyBlbmFibGVzIHVzIHRvIGRv
IHNsZWVwaW5nIGxvY2tpbmcgYXQKPiA+IGV2aWN0aW9uIGFuZCBrZWVwIG9iamVjdHMgbG9ja2Vk
IG9uIHRoZSBldmljdGlvbiBsaXN0IHVudGlsIHdlCj4gPiBldmVudHVhbGx5IHN1Y2NlZWQgYWxs
b2NhdGluZyBtZW1vcnkgKG1vZHVsbyBtaW5vciBmbGF3cyBvZiBjb3Vyc2UpLgo+ID4gCj4gPiBJ
dCB3b3VsZCBiZSBiZW5lZmljaWFsIHdpdGggdGhlIGk5MTUgVFRNIGNvbnZlcnNpb24gdG8gYmUg
YWJsZSB0bwo+ID4gaW50cm9kdWNlIGEgc2ltaWxhciBmdW5jdGlvbmFsaXR5IHRoYXQgd291bGQg
d29yayBpbiB0dG0gYnV0IGFsc28KPiA+IGNyb3NzLWRyaXZlciBpbiwgZm9yIGV4YW1wbGUgbW92
ZV9ub3RpZnkuIEl0IHdvdWxkIGFsc28gYmUgYmVuZWZpY2lhbAo+ID4gdG8gYmUgYWJsZSB0byBw
dXQgYW55IGRtYV9yZXN2IHd3IG11dGV4IG9uIHRoZSBsaXN0cywgYW5kIG5vdCByZXF1aXJlCj4g
PiBpdCB0byBiZSBlbWJlZGRlZCBpbiBhIHBhcnRpY3VsYXIgb2JqZWN0IHR5cGUuCj4gPiAKPiA+
IEkgc3RhcnRlZCBzY2V0Y2hpbmcgb24gc29tZSB1dGlsaXRpZXMgZm9yIHRoaXMuIEZvciBUVE0s
IGZvciBleGFtcGxlLAo+ID4gdGhlIGlkZWEgd291bGQgYmUgdG8gcGFzcyBhIGxpc3QgaGVhZCBm
b3IgdGhlIHd3IHRyYW5zYWN0aW9uIGxvY2sgbGlzdAo+ID4gaW4gdGhlIHR0bV9vcGVyYXRpb25f
Y3R4LiBBIGZ1bmN0aW9uIHRha2luZyBhIHd3X211dGV4IGNvdWxkIHRoZW4KPiA+IGVpdGhlciBh
dHRhY2ggYSBncmFiYmVkIGxvY2sgdG8gdGhlIGxpc3QgZm9yIGJhdGNoIHVubG9ja2luZywgb3Ig
YmUKPiA+IHJlc3BvbnNpYmxlIGZvciB1bmxvY2tpbmcgd2hlbiB0aGUgbG9jaydzIHNjb3BlIGlz
IGV4aXRlZC4gSXQncyBhbHNvCj4gPiBwb3NzaWJsZSB0byBjcmVhdGUgc3VibGlzdHMgaWYgc28g
ZGVzaXJlZC4gSSBiZWxpZXZlIHRoZSBiZWxvdyB3b3VsZCBiZQo+ID4gc3VmZmljaWVudCB0byBj
b3ZlciB0aGUgaTkxNSBmdW5jdGlvbmFsaXR5Lgo+ID4gCj4gPiBBbnkgY29tbWVudHMgYW5kIHN1
Z2dlc3Rpb25zIGFwcHJlY2lhdGVkIQo+IAo+IGFoIHllcyBEYW5pZWwgYW5kIEkgaGF2ZW4gYmVl
biBkaXNjdXNzaW5nIHNvbWV0aGluZyBsaWtlIHRoaXMgZm9yIHllYXJzLgo+IAo+IEkgYWxzbyBj
YW1lIHVwIHdpdGggcm91Z2ggaW1wbGVtZW50YXRpb24sIGJ1dCB3ZSBhbHdheXMgcmFuIGludG8g
bGlmZXRpbWUKPiBpc3N1ZXMuCj4gCj4gSW4gb3RoZXIgd29yZHMgdGhlIHd3X211dGV4ZXMgd2hp
Y2ggYXJlIG9uIHRoZSBsaXN0IHdvdWxkIG5lZWQgdG8gYmUga2VwdAo+IGFsaXZlIHVudGlsIHVu
bG9ja2VkLgo+IAo+IEJlY2F1c2Ugb2YgdGhpcyB3ZSBraW5kIG9mIGJhY2tlZCB1cCBhbmQgc2Fp
ZCB3ZSB3b3VsZCBuZWVkIHRoaXMgb24gdGhlIEdFTQo+IGxldmVsIGluc3RlYWQgb2Ygd29ya2lu
ZyB3aXRoIGRtYV9yZXN2IG9iamVjdHMuCgpZZWFoIHRoZXJlJ3MgYSBmZXcgZnVubnkgY29uY2Vy
bnMgaGVyZSB0aGF0IG1ha2UgdGhpcyBhd2t3YXJkOgotIEZvciBzaW1wbGljaXR5IGRvaW5nIHRo
ZXNlIGhlbHBlcnMgYXQgdGhlIGdlbSBsZXZlbCBzaG91bGQgbWFrZSB0aGluZ3MgYQogIGJpdCBl
YXNpZXIsIGJlY2F1c2UgdGhlbiB3ZSBoYXZlIGEgc3RhbmRhcmQgd2F5IHRvIGRyb3AgdGhlIHJl
ZmVyZW5jZS4KICBJdCBkb2VzIG1lYW4gdGhhdCB0aGUgb25seSB0aGluZyB5b3UgY2FuIGxvY2sg
bGlrZSB0aGlzIGFyZSBnZW0gb2JqZWN0cywKICBidXQgSSB0aGluayB0aGF0J3MgZmluZS4gQXQg
bGVhc3QgZm9yIGEgZmlyc3QgY3V0LgoKLSBUaGlzIGlzIGEgYml0IGF3a3dhcmQgZm9yIHZtd2dm
eCwgYnV0IGEpIFphY2sgaGFzIG1lbnRpb25lZCBoZSdzIGxvb2tpbmcKICBpbnRvIGFkb3B0aW5n
IGdlbSBibyBpbnRlcm5hbGx5IHRvIGJlIGFibGUgdG8gZHJvcCBhIHBpbGUgb2YgY29kZSBhbmQK
ICBzdG9wIG1ha2luZyB2bXdnZnggdGhlIG9ubHkgc3BlY2lhbC1jYXNlIHdlIGhhdmUgYikgZHJp
dmVycyB3aGljaCBkb24ndAogIG5lZWQgdGhpcyB3b24ndCBuZWVkIHRoaXMsIHNvIHNob3VsZCBi
ZSBmaW5lLgoKICBUaGUgb3RoZXIgYXdrd2FyZCB0aGluZyBJIGd1ZXNzIGlzIHRoYXQgdHRtIHdv
dWxkIG5lZWQgdG8gdXNlIHRoZQogIGVtYmVkZGVkIGtyZWYgZnJvbSB0aGUgZ2VtIGJvLCBidXQg
dGhhdCBzaG91bGQgYmUgdHJhbnNwYXJlbnQgSSB0aGluay4KCi0gTmV4dCB1cCBpcyBkbWEtYnVm
OiBGb3IgaTkxNSB3ZSdkIGxpa2UgdG8gZG8gdGhlIHNhbWUgZXZpY3Rpb24gdHJpY2sKICBhbHNv
IHRocm91Z2ggcDJwIGRtYS1idWYgY2FsbGJhY2tzLCBzbyB0aGF0IHRoaXMgd29ya3MgdGhlIHNh
bWUgYXMKICBldmljdGlvbi9yZXNlcnZhdGlvbiB3aXRoaW4gYSBncHUuIEJ1dCBmb3IgdGhlc2Ug
aW50ZXJuYWwgYm8geW91IG1pZ2h0CiAgbm90IGhhdmUgYSBkbWEtYnVmLCBzbyB3ZSBjYW4ndCBq
dXN0IGxpZnQgdGhlIHRyaWNrIHRvIHRoZSBkbWEtYnVmCiAgbGV2ZWwuIEJ1dCBJIHRoaW5rIGlm
IHdlIHBhc3MgZS5nLiBhIHN0cnVjdCBsaXN0X2hlYWQgYW5kIGEgY2FsbGJhY2sgdG8KICB1bnJl
ZmVyZW5jZS91bmxvY2sgYWxsIHRoZSBidWZmZXJzIGluIHRoZXJlIHRvIHRoZSBleHBvcnRlciwg
cGx1cwogIHNpbWlsYXIgZm9yIHRoZSBzbG93cGF0aCBsb2NrLCB0aGVuIHRoYXQgc2hvdWxkIGJl
IGRvYWJsZSB3aXRob3V0CiAgZ2xvcmlvdXMgbGF5ZXJpbmcgaW52ZXJzaW9ucyBiZXR3ZWVuIGRt
YS1idWYgYW5kIGdlbS4KCiAgSSB0aGluayBmb3IgZG1hLWJ1ZiBpdCBzaG91bGQgZXZlbiBiZSBv
ayBpZiB0aGlzIHJlcXVpcmVzIHRoYXQgd2UKICBhbGxvY2F0ZSBhbiBlbnRpcmUgc3RydWN0dXJl
IHdpdGgga21hbGxvYyBvciBzb21ldGhpbmcsIGFsbG9jYXRpbmcKICBtZW1vcnkgd2hpbGUgaG9s
ZGluZyBkbWFfcmVzdiBpcyBvay4KCi0gQW5vdGhlciByZWFzb24gZm9yIGRvaW5nIGl0IGF0IHRo
ZSBnZW0gbGV2ZWwgaXMgdGhhdCB0aGUgU29DIGRyaXZlcnMKICBzaG91bGQgcHJvYmFibHkgdXNl
IGRtYV9yZXN2IG1vcmUsIHNvIGhhdmluZyBzb21lIGNvbXBldGVudCBjcy9ldmljdGlvbgogIGhl
bHBlcnMgZGVyaXZlZCBmcm9tIHdoYXQgd2UgaGF2ZSBpbiB0dG0gd291bGQgYmUgbmljZSBJIHRo
aW5rLgoKQnV0IGFsc28gSSBuZXZlciBnb3QgYW55d2hlcmUgd2l0aCBhbnl0aGluZywgc2luY2Ug
bGlrZSBDaHJpc3RpYW4gc2FpZCBpZgp3ZSBqdXN0IGxpbmsgdXAgd3dfbXV0ZXgsIG9yIGRtYV9y
ZXN2LCBpdCBhbHdheXMgZGllcyBvbiBzb21lIGxpZmV0aW1lCmhhbmRsaW5nIGlzc3Vlcy4KLURh
bmllbAoKPiAKPiBSZWdhcmRzLAo+IENocmlzdGlhbi4KPiAKPiA+IAo+ID4gODwtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+IAo+ID4gI2lm
bmRlZiBfVFJBTlNBQ1RJT05fTE9DS0xJU1RfSF8KPiA+ICNkZWZpbmUgX1RSQU5TQUNUSU9OX0xP
Q0tMSVNUX0hfCj4gPiAKPiA+IHN0cnVjdCB0cmFuc19sb2NraXRlbTsKPiA+IAo+ID4gLyoqCj4g
PiAgICogc3RydWN0IHRyYW5zX2xvY2tsaXN0X29wcyAtIE9wcyBzdHJ1Y3R1cmUgZm9yIHRoZSB3
dyBsb2NrbGlzdAo+ID4gZnVuY3Rpb25hbGl0eS4KPiA+ICAgKgo+ID4gICAqIFR5cGljYWxseSBh
IGNvbnN0IHN0cnVjdCB0cmFuc19sb2NrbGlzdF9vcHMgaXMgZGVmaW5lZCBmb3IgZWFjaCB0eXBl
Cj4gPiB0aGF0Cj4gPiAgICogZW1iZWRzIGEgc3RydWN0IHRyYW5zX2xvY2tpdGVtLCBvciBoYXYg
YSBzdHJ1Y3QgdHJhbnNfbG9ja2l0ZW0KPiA+IHBvaW50aW5nCj4gPiAgICogYXQgaXQgdXNpbmcg
dGhlIHByaXZhdGUgcG9pbnRlci4gSXQgY2FuIGJlIGEgYnVmZmVyIG9iamVjdCwKPiA+IHJlc2Vy
dmF0aW9uCj4gPiAgICogb2JqZWN0LCBhIHNpbmdsZSB3d19tdXRleCBvciBldmVuIGEgc3VibGlz
dCBvZiB0cmFuc19sb2NraXRlbXMuCj4gPiAgICovCj4gPiBzdHJ1Y3QgdHJhbnNfbG9ja2xpc3Rf
b3BzIHsKPiA+IAkvKioKPiA+IAkgKiBzbG93X2xvY2s6IFNsb3cgbG9jayB0byByZWxheCB0aGUg
dHJhbnNhY3Rpb24uIE9ubHkgdXNlZCBieQo+ID4gCSAqIGEgY29udGVuZGluZyBsb2NrIGl0ZW0u
Cj4gPiAJICogQGl0ZW06IFRoZSBzdHJ1Y3QgdHJhbnNfbG9ja2l0ZW0gdG8gbG9jawo+ID4gCSAq
IEBpbnRyOiBXaGV0aGVyIHRvIGxvY2sgaW50ZXJydXB0aWJsZQo+ID4gCSAqCj4gPiAJICogUmV0
dXJuOiAtRVJFU1RBUlRTWVM6IEhpdCBhIHNpZ25hbCB3aGVuIHJlbGF4aW5nLAo+ID4gCSAqIC1F
QUdBSU4sIHJlbGF4aW5nIHN1Y2Nlc2Z1bCwgYnV0IHRoZSBjb250ZW5kaW5nIGxvY2sKPiA+IAkg
KiByZW1haW5zIHVubG9ja2VkLgo+ID4gCSAqLwo+ID4gCWludCAoKnNsb3dfbG9jaykgKHN0cnVj
dCB0cmFuc19sb2NraXRlbSAqaXRlbSwgYm9vbCBpbnRyKTsKPiA+IAo+ID4gCS8qKgo+ID4gCSAq
IHVubG9jazogVW5sb2NrLgo+ID4gCSAqIEBpdGVtOiBUaGUgc3RydWN0IHRyYW5zX2xvY2tpdGVt
IHRvIHVubG9jay4KPiA+IAkgKi8KPiA+IAl2b2lkICgqdW5sb2NrKSAoc3RydWN0IHRyYW5zX2xv
Y2tpdGVtICppdGVtKTsKPiA+IAo+ID4gCS8qKgo+ID4gCSAqIHVubG9jazogVW5sb2NrLgo+ID4g
CSAqIEBpdGVtOiBUaGUgc3RydWN0IHRyYW5zX2xvY2tpdGVtIHRvIHB1dC4gVGhpcyBmdW5jdGlv
biBtYXkKPiA+IGJlIE5VTEwuCj4gPiAJICovCj4gPiAJdm9pZCAoKnB1dCkgKHN0cnVjdCB0cmFu
c19sb2NraXRlbSAqaXRlbSk7Cj4gPiB9Owo+ID4gCj4gPiAvKioKPiA+ICAgKiBzdHJ1Y3QgdHJh
bnNfbG9ja2l0ZW0KPiA+ICAgKiBAb3BzOiBQb2ludGVyIHRvIGFuIE9wcyBzdHJ1Y3R1cmUgZm9y
IHRoaXMgbG9ja2l0ZW0uCj4gPiAgICogQGxpbms6IExpc3QgbGluayBmb3IgdGhlIHRyYW5zYWN0
aW9uIGxvY2tsaXN0Lgo+ID4gICAqIEBwcml2YXRlOiBQcml2YXRlIGluZm8uCj4gPiAgICogQHJl
bGF4X3VubG9jazogVW5sb2NrIGNvbnRlbmRpbmcgbG9jayBhZnRlciByZWxheGF0aW9uIHNpbmNl
IGl0IGlzCj4gPiAgICogbGlrZWx5IG5vdCBuZWVkZWQgYWZ0ZXIgYSB0cmFuc2FjdGlvbiByZXN0
YXJ0Lgo+ID4gICAqCj4gPiAgICogQSBzdHJ1Y3QgdHJhbnNfbG9ja2l0ZW0gdHlwaWNhbGx5IHJl
cHJlc2VudHMgYSBzaW5nbGUgbG9jaywgYnV0IGlzCj4gPiAgICogZ2VuZXJpYyBlbm91Z2ggdG8g
cmVwcmVzZW50IGEgc3VibGlzdCBvZiBsb2Nrcy4gSXQgY2FuIGVpdGhlciBiZQo+ID4gICAqIGVt
YmVkZGVkLCBvciBhbGxvY2F0ZWQgb24gZGVtYW5kLiBBIGttZW1fY2FjaGUgbWlnaHQgYmUgYmVu
ZWZpY2lhbC4KPiA+ICAgKi8KPiA+IHN0cnVjdCB0cmFuc19sb2NraXRlbSB7Cj4gPiAJY29uc3Qg
c3RydWN0IHRyYW5zX2xvY2tsaXN0X29wcyAqb3BzOwo+ID4gCXN0cnVjdCBsaXN0X2hlYWQgbGlu
azsKPiA+IAl1MzIgcmVsYXhfdW5sb2NrOjE7Cj4gPiAJdm9pZCAqcHJpdmF0ZTsKPiA+IH07Cj4g
PiAKPiA+IC8qIHVubG9jayBleGFtcGxlICovCj4gPiBzdGF0aWMgaW5saW5lIHZvaWQgdHJhbnNf
dW5sb2NrX3B1dF9hbGwoc3RydWN0IGxpc3RfaGVhZCAqbGlzdCkKPiA+IHsKPiA+IAlzdHJ1Y3Qg
dHJhbnNfbG9ja2l0ZW0gKmxvY2ssICpuZXh0Owo+ID4gCj4gPiAJbGlzdF9mb3JfZWFjaF9lbnRy
eV9zYWZlKGxvY2ssIG5leHQsIHR5cGVvZigqbG9jayksIGxpbmspIHsKPiA+IAkJbG9jay0+b3Bz
LT51bmxvY2sobG9jayk7Cj4gPiAJCWxpc3RfZGVsX2luaXQoJmxvY2stPmxpbmspOwo+ID4gCQlp
ZiAobG9jay0+b3BzX3B1dCkKPiA+IAkJCWxvY2stPm9wcy0+cHV0KGxvY2spOwo+ID4gCX0KPiA+
IH0KPiA+IAo+ID4gLyogQmFja29mZiBleGFtcGxlICovCj4gPiBzdGF0aWMgaW5saW5lIGludCBf
X211c3RfY2hlY2sgdHJhbnNfYmFja29mZihzdHJ1Y3QgbGlzdF9oZWFkICpsaXN0LAo+ID4gYm9v
bCBpbnRyLAo+ID4gCQkJCQkgICAgIHN0cnVjdCB0cmFuc19sb2NraXRlbQo+ID4gKmNvbnRlbmRp
bmcpCj4gPiB7Cj4gPiAJaW50IHJldCA9IDA7Cj4gPiAKPiA+IAl0cmFuc191bmxvY2tfcHV0X2Fs
bChsaXN0KTsKPiA+IAlpZiAoY29udGVuZGluZykgewo+ID4gCQlyZXQgPSBjb250ZW5kaW5nLT5v
cHMtPnNsb3dfbG9jayhjb250ZW5kaW5nLCBpbnRyKTsKPiA+IAkJaWYgKCFyZXQgJiYgY29udGVu
ZGluZy0+cmVsYXhfdW5sb2NrKQo+ID4gCQkJY29udGVuZGluZy0+dW5sb2NrKGNvbnRlbmRpbmcp
Owo+ID4gCQlpZiAocmV0ID09IC1FQUdBSU4pCj4gPiAJCQlyZXQgPSAwOwo+ID4gCQljb250ZW5k
aW5nLT5vcHMtPnB1dChjb250ZW5kaW5nKTsKPiA+IAl9Cj4gPiAKPiA+IAlyZXR1cm4gcmV0Owo+
ID4gfQo+ID4gCQkKPiA+IAkJCj4gPiAjZW5kaWYgX1RSQU5TQUNUSU9OX0xPQ0tMSVNUXwo+ID4g
Cj4gPiAKPiAKCi0tIApEYW5pZWwgVmV0dGVyClNvZnR3YXJlIEVuZ2luZWVyLCBJbnRlbCBDb3Jw
b3JhdGlvbgpodHRwOi8vYmxvZy5mZndsbC5jaApfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdApMaW5hcm8tbW0t
c2lnQGxpc3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5hcm8ub3JnL21haWxtYW4vbGlz
dGluZm8vbGluYXJvLW1tLXNpZwo=
