Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 058FC1CF1E6
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 12 May 2020 11:48:23 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 2B00E618EF
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 12 May 2020 09:48:22 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 1B952619D0; Tue, 12 May 2020 09:48:22 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_BLOCKED,RCVD_IN_MSPIKE_H3,RCVD_IN_MSPIKE_WL,
	SPF_HELO_PASS autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 50A3D6655C;
	Tue, 12 May 2020 09:08:18 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 755AE61900
 for <linaro-mm-sig@lists.linaro.org>; Tue, 12 May 2020 09:08:01 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 648716654B; Tue, 12 May 2020 09:08:01 +0000 (UTC)
Received: from mailout2.w1.samsung.com (mailout2.w1.samsung.com
 [210.118.77.12])
 by lists.linaro.org (Postfix) with ESMTPS id 4655965FA6
 for <linaro-mm-sig@lists.linaro.org>; Tue, 12 May 2020 09:01:28 +0000 (UTC)
Received: from eucas1p2.samsung.com (unknown [182.198.249.207])
 by mailout2.w1.samsung.com (KnoxPortal) with ESMTP id
 20200512090127euoutp02ca54515758534d363d19b83108b78b1d~OPFy82p5X0523105231euoutp02f
 for <linaro-mm-sig@lists.linaro.org>; Tue, 12 May 2020 09:01:27 +0000 (GMT)
DKIM-Filter: OpenDKIM Filter v2.11.0 mailout2.w1.samsung.com
 20200512090127euoutp02ca54515758534d363d19b83108b78b1d~OPFy82p5X0523105231euoutp02f
Received: from eusmges3new.samsung.com (unknown [203.254.199.245]) by
 eucas1p1.samsung.com (KnoxPortal) with ESMTP id
 20200512090126eucas1p101f5e02ec36131b74e821bce14c6f3d0~OPFyakiNr1621116211eucas1p1b;
 Tue, 12 May 2020 09:01:26 +0000 (GMT)
Received: from eucas1p2.samsung.com ( [182.198.249.207]) by
 eusmges3new.samsung.com (EUCPMTA) with SMTP id 7A.7B.60698.6E56ABE5; Tue, 12
 May 2020 10:01:26 +0100 (BST)
Received: from eusmtrp2.samsung.com (unknown [182.198.249.139]) by
 eucas1p1.samsung.com (KnoxPortal) with ESMTPA id
 20200512090126eucas1p1ad8d5dfd09fce31d9a18691a76e9fa75~OPFyGFKV-3053030530eucas1p1y;
 Tue, 12 May 2020 09:01:26 +0000 (GMT)
Received: from eusmgms1.samsung.com (unknown [182.198.249.179]) by
 eusmtrp2.samsung.com (KnoxPortal) with ESMTP id
 20200512090126eusmtrp2164e8a1f47e23be294d333ff632cca58~OPFyFSfRJ0472704727eusmtrp2W;
 Tue, 12 May 2020 09:01:26 +0000 (GMT)
X-AuditID: cbfec7f5-a0fff7000001ed1a-57-5eba65e6d790
Received: from eusmtip1.samsung.com ( [203.254.199.221]) by
 eusmgms1.samsung.com (EUCPMTA) with SMTP id CE.45.08375.6E56ABE5; Tue, 12
 May 2020 10:01:26 +0100 (BST)
Received: from AMDC2765.digital.local (unknown [106.120.51.73]) by
 eusmtip1.samsung.com (KnoxPortal) with ESMTPA id
 20200512090125eusmtip1a261b1781c3fc6a5fbeaa821d4407673~OPFxT4e8k1257212572eusmtip1w;
 Tue, 12 May 2020 09:01:25 +0000 (GMT)
From: Marek Szyprowski <m.szyprowski@samsung.com>
To: dri-devel@lists.freedesktop.org, iommu@lists.linux-foundation.org,
 linaro-mm-sig@lists.linaro.org, linux-kernel@vger.kernel.org
Date: Tue, 12 May 2020 11:00:52 +0200
Message-Id: <20200512090058.14910-32-m.szyprowski@samsung.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200512090058.14910-1-m.szyprowski@samsung.com>
X-Brightmail-Tracker: H4sIAAAAAAAAA0WSWUxTQRSGnbv1gtRcKpGJGpcaTdCIVohOhBBJTJxHDT4Y96JXINJCWkFR
 EguoURTiTsMugggUi2IuWipLRZFFsKgEFYqkiMGNpZYgAtpyXd6+85//n3NyMiwpc9Dz2Sj1
 EV6jVkbLGU9KePqjffUAb9q71vRTgdLamgg0NNXLoLt6I42Svi1Dv4RLJDK3TkjQK+cQg1Ju
 GhlUUvaEQPm1QeiWbjkqMY8T6PurPgLds3fS6KUpm0HlDT0SJBh0NKof7qdRc49DgvI7JySb
 fLBQLdDYkGsAeCpnhMS2mscUfjSWT+Ebo04ad3eaGVw19p7GtTkGCe4930jgysKT+N20ncRX
 uooBrn6jY/BQzWsGp98vBVu9d3oGH+Sjo+J5zZqQ/Z6RelsxEZsVcizLWkDrgCEgFXiwkAuE
 X2qtdCrwZGXcbQAre0uAWHwHsM6cS4iFA8AP2Vfpv5GB62V/IsUAtgo28l/EbKlk3C6GU8DU
 r6kz7MOdBvBZmpfbRHIXaDhYUTHTmMuFweThceBmilsO0651zLCUC4HmD62EOG4xLKuoI93s
 4dJ78yYp90OQy2Hh2wb7n502w0qnlRF5LvzUeF8i8kL462EeIQZSAOxrK5eIxQUAXybrgegK
 gt1tE64069rPDxpNa0Q5FLZkVtFuGXJzYNdXb7dMuvCykEGKshSePSMT3StgZuOdf2PrX3SQ
 ImN4pt9IiRd6AuB40znyIlic+X9YPgClwJeP06oieG2Amj/qr1WqtHHqCP8DMap7wPUVW6Yb
 nQ9AzWS4BXAskHtJz657uFdGK+O1CSoLgCwp95GeinJJ0oPKhOO8JmafJi6a11rAApaS+0oD
 Cgb3yLgI5RH+MM/H8pq/XYL1mK8DLR47NvZEK5O25P3UNwjnNiv0hRfXB9lpyv9z8mqmalUo
 dzqycFXKwqmx8KX9uTv0daP2Wbvbo+pns2FdxSi3umHRhsRdto6MbeWf1aZ5lniHky9qb760
 XdFs8xt9npgWeMi372O5JH1ekjHMy1rUpAoe0WUt+RZ2QmoSDNuDD8gpbaRSsZLUaJW/AQqa
 asmGAwAA
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFrrCIsWRmVeSWpSXmKPExsVy+t/xu7rPUnfFGTRuVLToPXeSyeL93/ts
 FhtnrGe1aHynbPF/20Rmiz1nfrFbXPn6ns2iefF6NouVq48yWSzYb22xrEHVYuWeH0wWX648
 ZLLY9Pgaq8XlXXPYLNYeuctusW1NA6vFwQ9PWC1O3f3MbrHg2i92BxGPbbu3sXqsmbeG0ePv
 3I/MHvf2HWbx2PttAYvHwk9fWT3uXNvD5rH92wNWj/1z17B73O8+zuSxeUm9x+1/j5k9Jt9Y
 zuix+2YDm8f7fVfZPPq2rGIMEIzSsynKLy1JVcjILy6xVYo2tDDSM7S00DMysdQzNDaPtTIy
 VdK3s0lJzcksSy3St0vQy5hxbzlTwWy7itkXF7E2MK4x7mLk5JAQMJF4Nm01axcjF4eQwFJG
 iV0/7jNDJGQkTk5rYIWwhSX+XOtigyj6xCixYkMXWBGbgKFE11uIhIhAJ6PEtO6P7CAOs8AM
 Vol1B+6xg1QJCwRKtJ85wwhiswioSvROvQRm8wrYSex5eoYJYoW8xOoNB8CmcgLF78//wwJi
 CwkUSjy6+pZlAiPfAkaGVYwiqaXFuem5xYZ6xYm5xaV56XrJ+bmbGIExuu3Yz807GC9tDD7E
 KMDBqMTD22G0M06INbGsuDL3EKMEB7OSCG9LJlCINyWxsiq1KD++qDQntfgQoynQUROZpUST
 84HpI68k3tDU0NzC0tDc2NzYzEJJnLdD4GCMkEB6YklqdmpqQWoRTB8TB6dUA6PlZ+EdAfb3
 vtRutVxY7LAqIN3ZR7t9ed9DV5nHa14nXFm611aDZd2f97cm3M/ayf7UJ9un5t/JA3ERy699
 WRnhNk8/e/WjubfsBOxnutoumJatvGbn9wMfNaSMJvXv+H+M44ShWqfdO0/Gtgtx81Zo5vT9
 lvgs7PdCaMfBqf9trD1uOmf+8JBSYinOSDTUYi4qTgQAcfEsvOcCAAA=
X-CMS-MailID: 20200512090126eucas1p1ad8d5dfd09fce31d9a18691a76e9fa75
X-Msg-Generator: CA
X-RootMTR: 20200512090126eucas1p1ad8d5dfd09fce31d9a18691a76e9fa75
X-EPHeader: CA
CMS-TYPE: 201P
X-CMS-RootMailID: 20200512090126eucas1p1ad8d5dfd09fce31d9a18691a76e9fa75
References: <20200512085710.14688-1-m.szyprowski@samsung.com>
 <20200512090058.14910-1-m.szyprowski@samsung.com>
 <CGME20200512090126eucas1p1ad8d5dfd09fce31d9a18691a76e9fa75@eucas1p1.samsung.com>
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: devel@driverdev.osuosl.org, Todd Kjos <tkjos@android.com>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 David Airlie <airlied@linux.ie>,
 Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 =?UTF-8?q?Arve=20Hj=C3=B8nnev=C3=A5g?= <arve@android.com>,
 Martijn Coenen <maco@android.com>, Christian Brauner <christian@brauner.io>,
 Daniel Vetter <daniel@ffwll.ch>, Joel Fernandes <joel@joelfernandes.org>,
 Robin Murphy <robin.murphy@arm.com>, Christoph Hellwig <hch@lst.de>,
 linux-arm-kernel@lists.infradead.org
Subject: [Linaro-mm-sig] [PATCH v4 32/38] staging: ion: fix common struct
 sg_table related issues
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

VGhlIERvY3VtZW50YXRpb24vRE1BLUFQSS1IT1dUTy50eHQgc3RhdGVzIHRoYXQgdGhlIGRtYV9t
YXBfc2coKSBmdW5jdGlvbgpyZXR1cm5zIHRoZSBudW1iZXIgb2YgdGhlIGNyZWF0ZWQgZW50cmll
cyBpbiB0aGUgRE1BIGFkZHJlc3Mgc3BhY2UuCkhvd2V2ZXIgdGhlIHN1YnNlcXVlbnQgY2FsbHMg
dG8gdGhlIGRtYV9zeW5jX3NnX2Zvcl97ZGV2aWNlLGNwdX0oKSBhbmQKZG1hX3VubWFwX3NnIG11
c3QgYmUgY2FsbGVkIHdpdGggdGhlIG9yaWdpbmFsIG51bWJlciBvZiB0aGUgZW50cmllcwpwYXNz
ZWQgdG8gdGhlIGRtYV9tYXBfc2coKS4KCnN0cnVjdCBzZ190YWJsZSBpcyBhIGNvbW1vbiBzdHJ1
Y3R1cmUgdXNlZCBmb3IgZGVzY3JpYmluZyBhIG5vbi1jb250aWd1b3VzCm1lbW9yeSBidWZmZXIs
IHVzZWQgY29tbW9ubHkgaW4gdGhlIERSTSBhbmQgZ3JhcGhpY3Mgc3Vic3lzdGVtcy4gSXQKY29u
c2lzdHMgb2YgYSBzY2F0dGVybGlzdCB3aXRoIG1lbW9yeSBwYWdlcyBhbmQgRE1BIGFkZHJlc3Nl
cyAoc2dsIGVudHJ5KSwKYXMgd2VsbCBhcyB0aGUgbnVtYmVyIG9mIHNjYXR0ZXJsaXN0IGVudHJp
ZXM6IENQVSBwYWdlcyAob3JpZ19uZW50cyBlbnRyeSkKYW5kIERNQSBtYXBwZWQgcGFnZXMgKG5l
bnRzIGVudHJ5KS4KCkl0IHR1cm5lZCBvdXQgdGhhdCBpdCB3YXMgYSBjb21tb24gbWlzdGFrZSB0
byBtaXN1c2UgbmVudHMgYW5kIG9yaWdfbmVudHMKZW50cmllcywgY2FsbGluZyBETUEtbWFwcGlu
ZyBmdW5jdGlvbnMgd2l0aCBhIHdyb25nIG51bWJlciBvZiBlbnRyaWVzIG9yCmlnbm9yaW5nIHRo
ZSBudW1iZXIgb2YgbWFwcGVkIGVudHJpZXMgcmV0dXJuZWQgYnkgdGhlIGRtYV9tYXBfc2coKQpm
dW5jdGlvbi4KClRvIGF2b2lkIHN1Y2ggaXNzdWVzLCBsZXRzIHVzZSBhIGNvbW1vbiBkbWEtbWFw
cGluZyB3cmFwcGVycyBvcGVyYXRpbmcKZGlyZWN0bHkgb24gdGhlIHN0cnVjdCBzZ190YWJsZSBv
YmplY3RzIGFuZCB1c2Ugc2NhdHRlcmxpc3QgcGFnZQppdGVyYXRvcnMgd2hlcmUgcG9zc2libGUu
IFRoaXMsIGFsbW9zdCBhbHdheXMsIGhpZGVzIHJlZmVyZW5jZXMgdG8gdGhlCm5lbnRzIGFuZCBv
cmlnX25lbnRzIGVudHJpZXMsIG1ha2luZyB0aGUgY29kZSByb2J1c3QsIGVhc2llciB0byBmb2xs
b3cKYW5kIGNvcHkvcGFzdGUgc2FmZS4KClNpZ25lZC1vZmYtYnk6IE1hcmVrIFN6eXByb3dza2kg
PG0uc3p5cHJvd3NraUBzYW1zdW5nLmNvbT4KLS0tCkZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUg
J1tQQVRDSCB2NCAwMC8zOF0gRFJNOiBmaXggc3RydWN0IHNnX3RhYmxlIG5lbnRzCnZzLiBvcmln
X25lbnRzIG1pc3VzZScgdGhyZWFkOgpodHRwczovL2xvcmUua2VybmVsLm9yZy9kcmktZGV2ZWwv
MjAyMDA1MTIwODU3MTAuMTQ2ODgtMS1tLnN6eXByb3dza2lAc2Ftc3VuZy5jb20vVC8KLS0tCiBk
cml2ZXJzL3N0YWdpbmcvYW5kcm9pZC9pb24vaW9uLmMgICAgICAgICAgICAgfCAyNSArKysrKysr
LS0tLS0tLS0KIGRyaXZlcnMvc3RhZ2luZy9hbmRyb2lkL2lvbi9pb25faGVhcC5jICAgICAgICB8
IDQ0ICsrKysrKysrLS0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVycy9zdGFnaW5nL2FuZHJvaWQv
aW9uL2lvbl9zeXN0ZW1faGVhcC5jIHwgIDIgKy0KIDMgZmlsZXMgY2hhbmdlZCwgMjUgaW5zZXJ0
aW9ucygrKSwgNDYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5nL2Fu
ZHJvaWQvaW9uL2lvbi5jIGIvZHJpdmVycy9zdGFnaW5nL2FuZHJvaWQvaW9uL2lvbi5jCmluZGV4
IDM4YjUxZWEuLjJkYjA0MWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy9hbmRyb2lkL2lv
bi9pb24uYworKysgYi9kcml2ZXJzL3N0YWdpbmcvYW5kcm9pZC9pb24vaW9uLmMKQEAgLTE0Nywx
NCArMTQ3LDE0IEBAIHN0YXRpYyBzdHJ1Y3Qgc2dfdGFibGUgKmR1cF9zZ190YWJsZShzdHJ1Y3Qg
c2dfdGFibGUgKnRhYmxlKQogCWlmICghbmV3X3RhYmxlKQogCQlyZXR1cm4gRVJSX1BUUigtRU5P
TUVNKTsKIAotCXJldCA9IHNnX2FsbG9jX3RhYmxlKG5ld190YWJsZSwgdGFibGUtPm5lbnRzLCBH
RlBfS0VSTkVMKTsKKwlyZXQgPSBzZ19hbGxvY190YWJsZShuZXdfdGFibGUsIHRhYmxlLT5vcmln
X25lbnRzLCBHRlBfS0VSTkVMKTsKIAlpZiAocmV0KSB7CiAJCWtmcmVlKG5ld190YWJsZSk7CiAJ
CXJldHVybiBFUlJfUFRSKC1FTk9NRU0pOwogCX0KIAogCW5ld19zZyA9IG5ld190YWJsZS0+c2ds
OwotCWZvcl9lYWNoX3NnKHRhYmxlLT5zZ2wsIHNnLCB0YWJsZS0+bmVudHMsIGkpIHsKKwlmb3Jf
ZWFjaF9zZ3RhYmxlX3NnKHRhYmxlLCBzZywgaSkgewogCQltZW1jcHkobmV3X3NnLCBzZywgc2l6
ZW9mKCpzZykpOwogCQluZXdfc2ctPmRtYV9hZGRyZXNzID0gMDsKIAkJbmV3X3NnID0gc2dfbmV4
dChuZXdfc2cpOwpAQCAtMjI0LDEyICsyMjQsMTMgQEAgc3RhdGljIHN0cnVjdCBzZ190YWJsZSAq
aW9uX21hcF9kbWFfYnVmKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaG1lbnQsCiB7
CiAJc3RydWN0IGlvbl9kbWFfYnVmX2F0dGFjaG1lbnQgKmEgPSBhdHRhY2htZW50LT5wcml2Owog
CXN0cnVjdCBzZ190YWJsZSAqdGFibGU7CisJaW50IHJldDsKIAogCXRhYmxlID0gYS0+dGFibGU7
CiAKLQlpZiAoIWRtYV9tYXBfc2coYXR0YWNobWVudC0+ZGV2LCB0YWJsZS0+c2dsLCB0YWJsZS0+
bmVudHMsCi0JCQlkaXJlY3Rpb24pKQotCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKKwlyZXQg
PSBkbWFfbWFwX3NndGFibGUoYXR0YWNobWVudC0+ZGV2LCB0YWJsZSwgZGlyZWN0aW9uKTsKKwlp
ZiAocmV0KQorCQlyZXR1cm4gRVJSX1BUUihyZXQpOwogCiAJcmV0dXJuIHRhYmxlOwogfQpAQCAt
MjM4LDcgKzIzOSw3IEBAIHN0YXRpYyB2b2lkIGlvbl91bm1hcF9kbWFfYnVmKHN0cnVjdCBkbWFf
YnVmX2F0dGFjaG1lbnQgKmF0dGFjaG1lbnQsCiAJCQkgICAgICBzdHJ1Y3Qgc2dfdGFibGUgKnRh
YmxlLAogCQkJICAgICAgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyZWN0aW9uKQogewotCWRt
YV91bm1hcF9zZyhhdHRhY2htZW50LT5kZXYsIHRhYmxlLT5zZ2wsIHRhYmxlLT5uZW50cywgZGly
ZWN0aW9uKTsKKwlkbWFfdW5tYXBfc2d0YWJsZShhdHRhY2htZW50LT5kZXYsIHRhYmxlLCBkaXJl
Y3Rpb24pOwogfQogCiBzdGF0aWMgaW50IGlvbl9tbWFwKHN0cnVjdCBkbWFfYnVmICpkbWFidWYs
IHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKQpAQCAtMjk2LDEwICsyOTcsOCBAQCBzdGF0aWMg
aW50IGlvbl9kbWFfYnVmX2JlZ2luX2NwdV9hY2Nlc3Moc3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwK
IAl9CiAKIAltdXRleF9sb2NrKCZidWZmZXItPmxvY2spOwotCWxpc3RfZm9yX2VhY2hfZW50cnko
YSwgJmJ1ZmZlci0+YXR0YWNobWVudHMsIGxpc3QpIHsKLQkJZG1hX3N5bmNfc2dfZm9yX2NwdShh
LT5kZXYsIGEtPnRhYmxlLT5zZ2wsIGEtPnRhYmxlLT5uZW50cywKLQkJCQkgICAgZGlyZWN0aW9u
KTsKLQl9CisJbGlzdF9mb3JfZWFjaF9lbnRyeShhLCAmYnVmZmVyLT5hdHRhY2htZW50cywgbGlz
dCkKKwkJZG1hX3N5bmNfc2d0YWJsZV9mb3JfY3B1KGEtPmRldiwgYS0+dGFibGUsIGRpcmVjdGlv
bik7CiAKIHVubG9jazoKIAltdXRleF91bmxvY2soJmJ1ZmZlci0+bG9jayk7CkBAIC0zMTksMTAg
KzMxOCw4IEBAIHN0YXRpYyBpbnQgaW9uX2RtYV9idWZfZW5kX2NwdV9hY2Nlc3Moc3RydWN0IGRt
YV9idWYgKmRtYWJ1ZiwKIAl9CiAKIAltdXRleF9sb2NrKCZidWZmZXItPmxvY2spOwotCWxpc3Rf
Zm9yX2VhY2hfZW50cnkoYSwgJmJ1ZmZlci0+YXR0YWNobWVudHMsIGxpc3QpIHsKLQkJZG1hX3N5
bmNfc2dfZm9yX2RldmljZShhLT5kZXYsIGEtPnRhYmxlLT5zZ2wsIGEtPnRhYmxlLT5uZW50cywK
LQkJCQkgICAgICAgZGlyZWN0aW9uKTsKLQl9CisJbGlzdF9mb3JfZWFjaF9lbnRyeShhLCAmYnVm
ZmVyLT5hdHRhY2htZW50cywgbGlzdCkKKwkJZG1hX3N5bmNfc2d0YWJsZV9mb3JfZGV2aWNlKGEt
PmRldiwgYS0+dGFibGUsIGRpcmVjdGlvbik7CiAJbXV0ZXhfdW5sb2NrKCZidWZmZXItPmxvY2sp
OwogCiAJcmV0dXJuIDA7CmRpZmYgLS1naXQgYS9kcml2ZXJzL3N0YWdpbmcvYW5kcm9pZC9pb24v
aW9uX2hlYXAuYyBiL2RyaXZlcnMvc3RhZ2luZy9hbmRyb2lkL2lvbi9pb25faGVhcC5jCmluZGV4
IDljMjNiMjMuLjc5ZjI3OTQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy9hbmRyb2lkL2lv
bi9pb25faGVhcC5jCisrKyBiL2RyaXZlcnMvc3RhZ2luZy9hbmRyb2lkL2lvbi9pb25faGVhcC5j
CkBAIC0yMCw4ICsyMCw3IEBACiB2b2lkICppb25faGVhcF9tYXBfa2VybmVsKHN0cnVjdCBpb25f
aGVhcCAqaGVhcCwKIAkJCSAgc3RydWN0IGlvbl9idWZmZXIgKmJ1ZmZlcikKIHsKLQlzdHJ1Y3Qg
c2NhdHRlcmxpc3QgKnNnOwotCWludCBpLCBqOworCXN0cnVjdCBzZ19wYWdlX2l0ZXIgcGl0ZXI7
CiAJdm9pZCAqdmFkZHI7CiAJcGdwcm90X3QgcGdwcm90OwogCXN0cnVjdCBzZ190YWJsZSAqdGFi
bGUgPSBidWZmZXItPnNnX3RhYmxlOwpAQCAtMzgsMTQgKzM3LDExIEBAIHZvaWQgKmlvbl9oZWFw
X21hcF9rZXJuZWwoc3RydWN0IGlvbl9oZWFwICpoZWFwLAogCWVsc2UKIAkJcGdwcm90ID0gcGdw
cm90X3dyaXRlY29tYmluZShQQUdFX0tFUk5FTCk7CiAKLQlmb3JfZWFjaF9zZyh0YWJsZS0+c2ds
LCBzZywgdGFibGUtPm5lbnRzLCBpKSB7Ci0JCWludCBucGFnZXNfdGhpc19lbnRyeSA9IFBBR0Vf
QUxJR04oc2ctPmxlbmd0aCkgLyBQQUdFX1NJWkU7Ci0JCXN0cnVjdCBwYWdlICpwYWdlID0gc2df
cGFnZShzZyk7Ci0KLQkJQlVHX09OKGkgPj0gbnBhZ2VzKTsKLQkJZm9yIChqID0gMDsgaiA8IG5w
YWdlc190aGlzX2VudHJ5OyBqKyspCi0JCQkqKHRtcCsrKSA9IHBhZ2UrKzsKKwlmb3JfZWFjaF9z
Z3RhYmxlX3BhZ2UodGFibGUsICZwaXRlciwgMCkgeworCQlCVUdfT04odG1wIC0gcGFnZXMgPj0g
bnBhZ2VzKTsKKwkJKnRtcCsrID0gc2dfcGFnZV9pdGVyX3BhZ2UoJnBpdGVyKTsKIAl9CisKIAl2
YWRkciA9IHZtYXAocGFnZXMsIG5wYWdlcywgVk1fTUFQLCBwZ3Byb3QpOwogCXZmcmVlKHBhZ2Vz
KTsKIApAQCAtNjQsMzIgKzYwLDE5IEBAIHZvaWQgaW9uX2hlYXBfdW5tYXBfa2VybmVsKHN0cnVj
dCBpb25faGVhcCAqaGVhcCwKIGludCBpb25faGVhcF9tYXBfdXNlcihzdHJ1Y3QgaW9uX2hlYXAg
KmhlYXAsIHN0cnVjdCBpb25fYnVmZmVyICpidWZmZXIsCiAJCSAgICAgIHN0cnVjdCB2bV9hcmVh
X3N0cnVjdCAqdm1hKQogeworCXN0cnVjdCBzZ19wYWdlX2l0ZXIgcGl0ZXI7CiAJc3RydWN0IHNn
X3RhYmxlICp0YWJsZSA9IGJ1ZmZlci0+c2dfdGFibGU7CiAJdW5zaWduZWQgbG9uZyBhZGRyID0g
dm1hLT52bV9zdGFydDsKLQl1bnNpZ25lZCBsb25nIG9mZnNldCA9IHZtYS0+dm1fcGdvZmYgKiBQ
QUdFX1NJWkU7Ci0Jc3RydWN0IHNjYXR0ZXJsaXN0ICpzZzsKLQlpbnQgaTsKIAlpbnQgcmV0Owog
Ci0JZm9yX2VhY2hfc2codGFibGUtPnNnbCwgc2csIHRhYmxlLT5uZW50cywgaSkgewotCQlzdHJ1
Y3QgcGFnZSAqcGFnZSA9IHNnX3BhZ2Uoc2cpOwotCQl1bnNpZ25lZCBsb25nIHJlbWFpbmRlciA9
IHZtYS0+dm1fZW5kIC0gYWRkcjsKLQkJdW5zaWduZWQgbG9uZyBsZW4gPSBzZy0+bGVuZ3RoOwor
CWZvcl9lYWNoX3NndGFibGVfcGFnZSh0YWJsZSwgJnBpdGVyLCB2bWEtPnZtX3Bnb2ZmKSB7CisJ
CXN0cnVjdCBwYWdlICpwYWdlID0gc2dfcGFnZV9pdGVyX3BhZ2UoJnBpdGVyKTsKIAotCQlpZiAo
b2Zmc2V0ID49IHNnLT5sZW5ndGgpIHsKLQkJCW9mZnNldCAtPSBzZy0+bGVuZ3RoOwotCQkJY29u
dGludWU7Ci0JCX0gZWxzZSBpZiAob2Zmc2V0KSB7Ci0JCQlwYWdlICs9IG9mZnNldCAvIFBBR0Vf
U0laRTsKLQkJCWxlbiA9IHNnLT5sZW5ndGggLSBvZmZzZXQ7Ci0JCQlvZmZzZXQgPSAwOwotCQl9
Ci0JCWxlbiA9IG1pbihsZW4sIHJlbWFpbmRlcik7Ci0JCXJldCA9IHJlbWFwX3Bmbl9yYW5nZSh2
bWEsIGFkZHIsIHBhZ2VfdG9fcGZuKHBhZ2UpLCBsZW4sCisJCXJldCA9IHJlbWFwX3Bmbl9yYW5n
ZSh2bWEsIGFkZHIsIHBhZ2VfdG9fcGZuKHBhZ2UpLCBQQUdFX1NJWkUsCiAJCQkJICAgICAgdm1h
LT52bV9wYWdlX3Byb3QpOwogCQlpZiAocmV0KQogCQkJcmV0dXJuIHJldDsKLQkJYWRkciArPSBs
ZW47CisJCWFkZHIgKz0gUEFHRV9TSVpFOwogCQlpZiAoYWRkciA+PSB2bWEtPnZtX2VuZCkKIAkJ
CXJldHVybiAwOwogCX0KQEAgLTEwOSwxNSArOTIsMTQgQEAgc3RhdGljIGludCBpb25faGVhcF9j
bGVhcl9wYWdlcyhzdHJ1Y3QgcGFnZSAqKnBhZ2VzLCBpbnQgbnVtLCBwZ3Byb3RfdCBwZ3Byb3Qp
CiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBpbnQgaW9uX2hlYXBfc2dsaXN0X3plcm8oc3RydWN0
IHNjYXR0ZXJsaXN0ICpzZ2wsIHVuc2lnbmVkIGludCBuZW50cywKLQkJCQlwZ3Byb3RfdCBwZ3By
b3QpCitzdGF0aWMgaW50IGlvbl9oZWFwX3NnbGlzdF96ZXJvKHN0cnVjdCBzZ190YWJsZSAqc2d0
LCBwZ3Byb3RfdCBwZ3Byb3QpCiB7CiAJaW50IHAgPSAwOwogCWludCByZXQgPSAwOwogCXN0cnVj
dCBzZ19wYWdlX2l0ZXIgcGl0ZXI7CiAJc3RydWN0IHBhZ2UgKnBhZ2VzWzMyXTsKIAotCWZvcl9l
YWNoX3NnX3BhZ2Uoc2dsLCAmcGl0ZXIsIG5lbnRzLCAwKSB7CisJZm9yX2VhY2hfc2d0YWJsZV9w
YWdlKHNndCwgJnBpdGVyLCAwKSB7CiAJCXBhZ2VzW3ArK10gPSBzZ19wYWdlX2l0ZXJfcGFnZSgm
cGl0ZXIpOwogCQlpZiAocCA9PSBBUlJBWV9TSVpFKHBhZ2VzKSkgewogCQkJcmV0ID0gaW9uX2hl
YXBfY2xlYXJfcGFnZXMocGFnZXMsIHAsIHBncHJvdCk7CkBAIC0xNDIsNyArMTI0LDcgQEAgaW50
IGlvbl9oZWFwX2J1ZmZlcl96ZXJvKHN0cnVjdCBpb25fYnVmZmVyICpidWZmZXIpCiAJZWxzZQog
CQlwZ3Byb3QgPSBwZ3Byb3Rfd3JpdGVjb21iaW5lKFBBR0VfS0VSTkVMKTsKIAotCXJldHVybiBp
b25faGVhcF9zZ2xpc3RfemVybyh0YWJsZS0+c2dsLCB0YWJsZS0+bmVudHMsIHBncHJvdCk7CisJ
cmV0dXJuIGlvbl9oZWFwX3NnbGlzdF96ZXJvKHRhYmxlLCBwZ3Byb3QpOwogfQogCiB2b2lkIGlv
bl9oZWFwX2ZyZWVsaXN0X2FkZChzdHJ1Y3QgaW9uX2hlYXAgKmhlYXAsIHN0cnVjdCBpb25fYnVm
ZmVyICpidWZmZXIpCmRpZmYgLS1naXQgYS9kcml2ZXJzL3N0YWdpbmcvYW5kcm9pZC9pb24vaW9u
X3N5c3RlbV9oZWFwLmMgYi9kcml2ZXJzL3N0YWdpbmcvYW5kcm9pZC9pb24vaW9uX3N5c3RlbV9o
ZWFwLmMKaW5kZXggYjgzYTFkMS4uZWFjMDYzMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9zdGFnaW5n
L2FuZHJvaWQvaW9uL2lvbl9zeXN0ZW1faGVhcC5jCisrKyBiL2RyaXZlcnMvc3RhZ2luZy9hbmRy
b2lkL2lvbi9pb25fc3lzdGVtX2hlYXAuYwpAQCAtMTYyLDcgKzE2Miw3IEBAIHN0YXRpYyB2b2lk
IGlvbl9zeXN0ZW1faGVhcF9mcmVlKHN0cnVjdCBpb25fYnVmZmVyICpidWZmZXIpCiAJaWYgKCEo
YnVmZmVyLT5wcml2YXRlX2ZsYWdzICYgSU9OX1BSSVZfRkxBR19TSFJJTktFUl9GUkVFKSkKIAkJ
aW9uX2hlYXBfYnVmZmVyX3plcm8oYnVmZmVyKTsKIAotCWZvcl9lYWNoX3NnKHRhYmxlLT5zZ2ws
IHNnLCB0YWJsZS0+bmVudHMsIGkpCisJZm9yX2VhY2hfc2d0YWJsZV9zZyh0YWJsZSwgc2csIGkp
CiAJCWZyZWVfYnVmZmVyX3BhZ2Uoc3lzX2hlYXAsIGJ1ZmZlciwgc2dfcGFnZShzZykpOwogCXNn
X2ZyZWVfdGFibGUodGFibGUpOwogCWtmcmVlKHRhYmxlKTsKLS0gCjEuOS4xCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxp
bmcgbGlzdApMaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5h
cm8ub3JnL21haWxtYW4vbGlzdGluZm8vbGluYXJvLW1tLXNpZwo=
