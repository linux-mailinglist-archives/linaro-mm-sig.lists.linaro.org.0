Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 684E2AA9EF6
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  6 May 2025 00:16:57 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 82EB845910
	for <lists+linaro-mm-sig@lfdr.de>; Mon,  5 May 2025 22:16:56 +0000 (UTC)
Received: from nyc.source.kernel.org (nyc.source.kernel.org [147.75.193.91])
	by lists.linaro.org (Postfix) with ESMTPS id DDA114582E
	for <linaro-mm-sig@lists.linaro.org>; Mon,  5 May 2025 22:16:30 +0000 (UTC)
Authentication-Results: lists.linaro.org;
	dkim=pass header.d=kernel.org header.s=k20201202 header.b="nus+e6/z";
	dmarc=pass (policy=quarantine) header.from=kernel.org;
	spf=pass (lists.linaro.org: domain of sashal@kernel.org designates 147.75.193.91 as permitted sender) smtp.mailfrom=sashal@kernel.org
Received: from smtp.kernel.org (transwarp.subspace.kernel.org [100.75.92.58])
	by nyc.source.kernel.org (Postfix) with ESMTP id F0C22A4CC29;
	Mon,  5 May 2025 22:11:02 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id BA178C4CEE4;
	Mon,  5 May 2025 22:16:27 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
	s=k20201202; t=1746483390;
	bh=WM5Bt1/8kI3k0/qcvdULGqRf6SUq9+KsJasU795ApL0=;
	h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
	b=nus+e6/zQLYK59oDFfVXBeP9YdXfkPRIqegT7ZrWsCSBUTZUPJLxq9ypGPNU+T5sf
	 A+7rwhcVEfuJcfxPOK/MmR+NF//XP5XTX9Wj/JEcSBlQXz9bkY3PAMLETuV/KZi0AD
	 x4k2kHikmVWXKSQuUP3PW0KCKUAsHuKpKBG6oXPRRzxOdn+RDp9jEEm6Fseqc6/dtV
	 GEN2yagIO0R80dH6atncZEWWPulG3Xp7vyIdx+KAa+I04WTOeXEpON3K/FsZ3Oxp/J
	 xoUh4oDbs6RuoJgWO98K7YfBIwL9YekDfelQa6LUKnDONSYzbmJisUBqM24mAoB6op
	 Xw5SLc+kl7ivQ==
From: Sasha Levin <sashal@kernel.org>
To: linux-kernel@vger.kernel.org,
	stable@vger.kernel.org
Date: Mon,  5 May 2025 18:04:37 -0400
Message-Id: <20250505221419.2672473-61-sashal@kernel.org>
X-Mailer: git-send-email 2.39.5
In-Reply-To: <20250505221419.2672473-1-sashal@kernel.org>
References: <20250505221419.2672473-1-sashal@kernel.org>
MIME-Version: 1.0
X-stable: review
X-Patchwork-Hint: Ignore
X-stable-base: Linux 6.14.5
X-Rspamd-Server: lists.linaro.org
X-Rspamd-Queue-Id: DDA114582E
X-Spamd-Bar: ---
X-Spamd-Result: default: False [-3.00 / 15.00];
	BAYES_HAM(-3.00)[100.00%];
	MID_CONTAINS_FROM(1.00)[];
	DMARC_POLICY_ALLOW(-0.50)[kernel.org,quarantine];
	R_SPF_ALLOW(-0.20)[+ip4:147.75.193.91:c];
	R_DKIM_ALLOW(-0.20)[kernel.org:s=k20201202];
	MIME_GOOD(-0.10)[text/plain];
	RCVD_VIA_SMTP_AUTH(0.00)[];
	FROM_EQ_ENVFROM(0.00)[];
	ARC_NA(0.00)[];
	MIME_TRACE(0.00)[0:+];
	ASN(0.00)[asn:54825, ipnet:147.75.192.0/21, country:US];
	RCPT_COUNT_TWELVE(0.00)[26];
	FREEMAIL_CC(0.00)[amd.com,kernel.org,gmail.com,ffwll.ch,linaro.org,igalia.com,lists.freedesktop.org,vger.kernel.org,lists.linaro.org];
	NEURAL_HAM(-0.00)[-1.000];
	TO_DN_SOME(0.00)[];
	RCVD_COUNT_TWO(0.00)[2];
	FROM_HAS_DN(0.00)[];
	TO_MATCH_ENVRCPT_SOME(0.00)[];
	URIBL_BLOCKED(0.00)[amd.com:email,nyc.source.kernel.org:helo,nyc.source.kernel.org:rdns];
	RCVD_TLS_LAST(0.00)[];
	DKIM_TRACE(0.00)[kernel.org:+]
X-Rspamd-Action: no action
Message-ID-Hash: HDZJPCSBFEV4XJGFTXID3UB2R45AQLKT
X-Message-ID-Hash: HDZJPCSBFEV4XJGFTXID3UB2R45AQLKT
X-MailFrom: sashal@kernel.org
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
CC: =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>, Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>, Alex Deucher <alexander.deucher@amd.com>, Sasha Levin <sashal@kernel.org>, Felix.Kuehling@amd.com, simona@ffwll.ch, sumit.semwal@linaro.org, pierre-eric.pelloux-prayer@amd.com, Arunpravin.PaneerSelvam@amd.com, David.Wu3@amd.com, pvmohammedanees2003@gmail.com, Yunxiang.Li@amd.com, tvrtko.ursulin@igalia.com, Jack.Xiao@amd.com, Hawking.Zhang@amd.com, Jiadong.Zhu@amd.com, mukul.joshi@amd.com, shaoyun.liu@amd.com, chongli2@amd.com, amd-gfx@lists.freedesktop.org, dri-devel@lists.freedesktop.org, linux-media@vger.kernel.org, linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH AUTOSEL 6.14 061/642] drm/amdgpu: use GFP_NOWAIT for memory allocations
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/HDZJPCSBFEV4XJGFTXID3UB2R45AQLKT/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

RnJvbTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPg0KDQpbIFVw
c3RyZWFtIGNvbW1pdCAxNjU5MDc0NWI1NzFjMDc4NjllZjg5NThlMGJiZTQ0YWI2ZjA4ZDFmIF0N
Cg0KSW4gdGhlIGNyaXRpY2FsIHN1Ym1pc3Npb24gcGF0aCBtZW1vcnkgYWxsb2NhdGlvbnMgY2Fu
J3Qgd2FpdCBmb3INCnJlY2xhaW0gc2luY2UgdGhhdCBjYW4gcG90ZW50aWFsbHkgd2FpdCBmb3Ig
c3VibWlzc2lvbnMgdG8gZmluaXNoLg0KDQpGaW5hbGx5IGNsZWFuIHRoYXQgdXAgYW5kIG1hcmsg
bW9zdCBtZW1vcnkgYWxsb2NhdGlvbnMgaW4gdGhlIGNyaXRpY2FsDQpwYXRoIHdpdGggR0ZQX05P
V0FJVC4gVGhlIG9ubHkgZXhjZXB0aW9uIGxlZnQgaXMgdGhlIGRtYV9mZW5jZV9hcnJheSgpDQp1
c2VkIHdoZW4gbm8gVk1JRCBpcyBhdmFpbGFibGUsIGJ1dCB0aGF0IHdpbGwgYmUgY2xlYW5lZCB1
cCBsYXRlciBvbi4NCg0KU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFu
LmtvZW5pZ0BhbWQuY29tPg0KQWNrZWQtYnk6IFNyaW5pdmFzYW4gU2hhbm11Z2FtIDxzcmluaXZh
c2FuLnNoYW5tdWdhbUBhbWQuY29tPg0KU2lnbmVkLW9mZi1ieTogQWxleCBEZXVjaGVyIDxhbGV4
YW5kZXIuZGV1Y2hlckBhbWQuY29tPg0KU2lnbmVkLW9mZi1ieTogU2FzaGEgTGV2aW4gPHNhc2hh
bEBrZXJuZWwub3JnPg0KLS0tDQogLi4uL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2Zk
X2dwdXZtLmMgICB8ICA4ICsrKystLS0tDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2NzLmMgICAgICAgICB8IDE4ICsrKysrKysrKysrLS0tLS0tLQ0KIGRyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9pZHMuYyAgICAgICAgfCAxMSArKysrKysrLS0tLQ0KIGRyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9tZXMuYyAgICAgICAgfCAgNCArKy0tDQogZHJp
dmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuYyAgICAgICB8IDExICsrKysrKy0t
LS0tDQogZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuaCAgICAgICB8ICAz
ICsrLQ0KIDYgZmlsZXMgY2hhbmdlZCwgMzIgaW5zZXJ0aW9ucygrKSwgMjMgZGVsZXRpb25zKC0p
DQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2Zk
X2dwdXZtLmMgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZt
LmMNCmluZGV4IDFlOTk4Zjk3MmMzMDguLjcwMjI0YjlmNTRmMmYgMTAwNjQ0DQotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfYW1ka2ZkX2dwdXZtLmMNCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYw0KQEAgLTQ5OSw3ICs0
OTksNyBAQCBzdGF0aWMgaW50IHZtX3VwZGF0ZV9wZHMoc3RydWN0IGFtZGdwdV92bSAqdm0sIHN0
cnVjdCBhbWRncHVfc3luYyAqc3luYykNCiAJaWYgKHJldCkNCiAJCXJldHVybiByZXQ7DQogDQot
CXJldHVybiBhbWRncHVfc3luY19mZW5jZShzeW5jLCB2bS0+bGFzdF91cGRhdGUpOw0KKwlyZXR1
cm4gYW1kZ3B1X3N5bmNfZmVuY2Uoc3luYywgdm0tPmxhc3RfdXBkYXRlLCBHRlBfS0VSTkVMKTsN
CiB9DQogDQogc3RhdGljIHVpbnQ2NF90IGdldF9wdGVfZmxhZ3Moc3RydWN0IGFtZGdwdV9kZXZp
Y2UgKmFkZXYsIHN0cnVjdCBrZ2RfbWVtICptZW0pDQpAQCAtMTI2Myw3ICsxMjYzLDcgQEAgc3Rh
dGljIGludCB1bm1hcF9ib19mcm9tX2dwdXZtKHN0cnVjdCBrZ2RfbWVtICptZW0sDQogDQogCSh2
b2lkKWFtZGdwdV92bV9jbGVhcl9mcmVlZChhZGV2LCB2bSwgJmJvX3ZhLT5sYXN0X3B0X3VwZGF0
ZSk7DQogDQotCSh2b2lkKWFtZGdwdV9zeW5jX2ZlbmNlKHN5bmMsIGJvX3ZhLT5sYXN0X3B0X3Vw
ZGF0ZSk7DQorCSh2b2lkKWFtZGdwdV9zeW5jX2ZlbmNlKHN5bmMsIGJvX3ZhLT5sYXN0X3B0X3Vw
ZGF0ZSwgR0ZQX0tFUk5FTCk7DQogDQogCXJldHVybiAwOw0KIH0NCkBAIC0xMjg3LDcgKzEyODcs
NyBAQCBzdGF0aWMgaW50IHVwZGF0ZV9ncHV2bV9wdGUoc3RydWN0IGtnZF9tZW0gKm1lbSwNCiAJ
CXJldHVybiByZXQ7DQogCX0NCiANCi0JcmV0dXJuIGFtZGdwdV9zeW5jX2ZlbmNlKHN5bmMsIGJv
X3ZhLT5sYXN0X3B0X3VwZGF0ZSk7DQorCXJldHVybiBhbWRncHVfc3luY19mZW5jZShzeW5jLCBi
b192YS0+bGFzdF9wdF91cGRhdGUsIEdGUF9LRVJORUwpOw0KIH0NCiANCiBzdGF0aWMgaW50IG1h
cF9ib190b19ncHV2bShzdHJ1Y3Qga2dkX21lbSAqbWVtLA0KQEAgLTI5NjksNyArMjk2OSw3IEBA
IGludCBhbWRncHVfYW1ka2ZkX2dwdXZtX3Jlc3RvcmVfcHJvY2Vzc19ib3Modm9pZCAqaW5mbywg
c3RydWN0IGRtYV9mZW5jZSBfX3JjdSAqDQogCQl9DQogCQlkbWFfcmVzdl9mb3JfZWFjaF9mZW5j
ZSgmY3Vyc29yLCBiby0+dGJvLmJhc2UucmVzdiwNCiAJCQkJCURNQV9SRVNWX1VTQUdFX0tFUk5F
TCwgZmVuY2UpIHsNCi0JCQlyZXQgPSBhbWRncHVfc3luY19mZW5jZSgmc3luY19vYmosIGZlbmNl
KTsNCisJCQlyZXQgPSBhbWRncHVfc3luY19mZW5jZSgmc3luY19vYmosIGZlbmNlLCBHRlBfS0VS
TkVMKTsNCiAJCQlpZiAocmV0KSB7DQogCQkJCXByX2RlYnVnKCJNZW1vcnkgZXZpY3Rpb246IFN5
bmMgQk8gZmVuY2UgZmFpbGVkLiBUcnkgYWdhaW5cbiIpOw0KIAkJCQlnb3RvIHZhbGlkYXRlX21h
cF9mYWlsOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9j
cy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2NzLmMNCmluZGV4IDVjYzVm
NTllMzAxODQuLjRhNWI0MDY2MDFmYTIgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1k
L2FtZGdwdS9hbWRncHVfY3MuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X2NzLmMNCkBAIC00MjgsNyArNDI4LDcgQEAgc3RhdGljIGludCBhbWRncHVfY3NfcDJfZGVw
ZW5kZW5jaWVzKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLA0KIAkJCWRtYV9mZW5jZV9wdXQo
b2xkKTsNCiAJCX0NCiANCi0JCXIgPSBhbWRncHVfc3luY19mZW5jZSgmcC0+c3luYywgZmVuY2Up
Ow0KKwkJciA9IGFtZGdwdV9zeW5jX2ZlbmNlKCZwLT5zeW5jLCBmZW5jZSwgR0ZQX0tFUk5FTCk7
DQogCQlkbWFfZmVuY2VfcHV0KGZlbmNlKTsNCiAJCWlmIChyKQ0KIAkJCXJldHVybiByOw0KQEAg
LTQ1MCw3ICs0NTAsNyBAQCBzdGF0aWMgaW50IGFtZGdwdV9zeW5jb2JqX2xvb2t1cF9hbmRfYWRk
KHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwLA0KIAkJcmV0dXJuIHI7DQogCX0NCiANCi0JciA9
IGFtZGdwdV9zeW5jX2ZlbmNlKCZwLT5zeW5jLCBmZW5jZSk7DQorCXIgPSBhbWRncHVfc3luY19m
ZW5jZSgmcC0+c3luYywgZmVuY2UsIEdGUF9LRVJORUwpOw0KIAlkbWFfZmVuY2VfcHV0KGZlbmNl
KTsNCiAJcmV0dXJuIHI7DQogfQ0KQEAgLTExMjQsNyArMTEyNCw4IEBAIHN0YXRpYyBpbnQgYW1k
Z3B1X2NzX3ZtX2hhbmRsaW5nKHN0cnVjdCBhbWRncHVfY3NfcGFyc2VyICpwKQ0KIAlpZiAocikN
CiAJCXJldHVybiByOw0KIA0KLQlyID0gYW1kZ3B1X3N5bmNfZmVuY2UoJnAtPnN5bmMsIGZwcml2
LT5wcnRfdmEtPmxhc3RfcHRfdXBkYXRlKTsNCisJciA9IGFtZGdwdV9zeW5jX2ZlbmNlKCZwLT5z
eW5jLCBmcHJpdi0+cHJ0X3ZhLT5sYXN0X3B0X3VwZGF0ZSwNCisJCQkgICAgICBHRlBfS0VSTkVM
KTsNCiAJaWYgKHIpDQogCQlyZXR1cm4gcjsNCiANCkBAIC0xMTM1LDcgKzExMzYsOCBAQCBzdGF0
aWMgaW50IGFtZGdwdV9jc192bV9oYW5kbGluZyhzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCkN
CiAJCWlmIChyKQ0KIAkJCXJldHVybiByOw0KIA0KLQkJciA9IGFtZGdwdV9zeW5jX2ZlbmNlKCZw
LT5zeW5jLCBib192YS0+bGFzdF9wdF91cGRhdGUpOw0KKwkJciA9IGFtZGdwdV9zeW5jX2ZlbmNl
KCZwLT5zeW5jLCBib192YS0+bGFzdF9wdF91cGRhdGUsDQorCQkJCSAgICAgIEdGUF9LRVJORUwp
Ow0KIAkJaWYgKHIpDQogCQkJcmV0dXJuIHI7DQogCX0NCkBAIC0xMTU0LDcgKzExNTYsOCBAQCBz
dGF0aWMgaW50IGFtZGdwdV9jc192bV9oYW5kbGluZyhzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAq
cCkNCiAJCWlmIChyKQ0KIAkJCXJldHVybiByOw0KIA0KLQkJciA9IGFtZGdwdV9zeW5jX2ZlbmNl
KCZwLT5zeW5jLCBib192YS0+bGFzdF9wdF91cGRhdGUpOw0KKwkJciA9IGFtZGdwdV9zeW5jX2Zl
bmNlKCZwLT5zeW5jLCBib192YS0+bGFzdF9wdF91cGRhdGUsDQorCQkJCSAgICAgIEdGUF9LRVJO
RUwpOw0KIAkJaWYgKHIpDQogCQkJcmV0dXJuIHI7DQogCX0NCkBAIC0xMTY3LDcgKzExNzAsNyBA
QCBzdGF0aWMgaW50IGFtZGdwdV9jc192bV9oYW5kbGluZyhzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNl
ciAqcCkNCiAJaWYgKHIpDQogCQlyZXR1cm4gcjsNCiANCi0JciA9IGFtZGdwdV9zeW5jX2ZlbmNl
KCZwLT5zeW5jLCB2bS0+bGFzdF91cGRhdGUpOw0KKwlyID0gYW1kZ3B1X3N5bmNfZmVuY2UoJnAt
PnN5bmMsIHZtLT5sYXN0X3VwZGF0ZSwgR0ZQX0tFUk5FTCk7DQogCWlmIChyKQ0KIAkJcmV0dXJu
IHI7DQogDQpAQCAtMTI0OCw3ICsxMjUxLDggQEAgc3RhdGljIGludCBhbWRncHVfY3Nfc3luY19y
aW5ncyhzdHJ1Y3QgYW1kZ3B1X2NzX3BhcnNlciAqcCkNCiAJCQljb250aW51ZTsNCiAJCX0NCiAN
Ci0JCXIgPSBhbWRncHVfc3luY19mZW5jZSgmcC0+Z2FuZ19sZWFkZXItPmV4cGxpY2l0X3N5bmMs
IGZlbmNlKTsNCisJCXIgPSBhbWRncHVfc3luY19mZW5jZSgmcC0+Z2FuZ19sZWFkZXItPmV4cGxp
Y2l0X3N5bmMsIGZlbmNlLA0KKwkJCQkgICAgICBHRlBfS0VSTkVMKTsNCiAJCWRtYV9mZW5jZV9w
dXQoZmVuY2UpOw0KIAkJaWYgKHIpDQogCQkJcmV0dXJuIHI7DQpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lkcy5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X2lkcy5jDQppbmRleCA5MDA4YjczODhlODk3Li45MmFiODIxYWZjMDZhIDEw
MDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2lkcy5jDQorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfaWRzLmMNCkBAIC0yMDksNyArMjA5
LDcgQEAgc3RhdGljIGludCBhbWRncHVfdm1pZF9ncmFiX2lkbGUoc3RydWN0IGFtZGdwdV9yaW5n
ICpyaW5nLA0KIAkJcmV0dXJuIDA7DQogCX0NCiANCi0JZmVuY2VzID0ga21hbGxvY19hcnJheShp
ZF9tZ3ItPm51bV9pZHMsIHNpemVvZih2b2lkICopLCBHRlBfS0VSTkVMKTsNCisJZmVuY2VzID0g
a21hbGxvY19hcnJheShpZF9tZ3ItPm51bV9pZHMsIHNpemVvZih2b2lkICopLCBHRlBfTk9XQUlU
KTsNCiAJaWYgKCFmZW5jZXMpDQogCQlyZXR1cm4gLUVOT01FTTsNCiANCkBAIC0zMTMsNyArMzEz
LDggQEAgc3RhdGljIGludCBhbWRncHVfdm1pZF9ncmFiX3Jlc2VydmVkKHN0cnVjdCBhbWRncHVf
dm0gKnZtLA0KIAkvKiBHb29kIHdlIGNhbiB1c2UgdGhpcyBWTUlELiBSZW1lbWJlciB0aGlzIHN1
Ym1pc3Npb24gYXMNCiAJKiB1c2VyIG9mIHRoZSBWTUlELg0KIAkqLw0KLQlyID0gYW1kZ3B1X3N5
bmNfZmVuY2UoJigqaWQpLT5hY3RpdmUsICZqb2ItPmJhc2Uuc19mZW5jZS0+ZmluaXNoZWQpOw0K
KwlyID0gYW1kZ3B1X3N5bmNfZmVuY2UoJigqaWQpLT5hY3RpdmUsICZqb2ItPmJhc2Uuc19mZW5j
ZS0+ZmluaXNoZWQsDQorCQkJICAgICAgR0ZQX05PV0FJVCk7DQogCWlmIChyKQ0KIAkJcmV0dXJu
IHI7DQogDQpAQCAtMzcyLDcgKzM3Myw4IEBAIHN0YXRpYyBpbnQgYW1kZ3B1X3ZtaWRfZ3JhYl91
c2VkKHN0cnVjdCBhbWRncHVfdm0gKnZtLA0KIAkJICogdXNlciBvZiB0aGUgVk1JRC4NCiAJCSAq
Lw0KIAkJciA9IGFtZGdwdV9zeW5jX2ZlbmNlKCYoKmlkKS0+YWN0aXZlLA0KLQkJCQkgICAgICAm
am9iLT5iYXNlLnNfZmVuY2UtPmZpbmlzaGVkKTsNCisJCQkJICAgICAgJmpvYi0+YmFzZS5zX2Zl
bmNlLT5maW5pc2hlZCwNCisJCQkJICAgICAgR0ZQX05PV0FJVCk7DQogCQlpZiAocikNCiAJCQly
ZXR1cm4gcjsNCiANCkBAIC00MjQsNyArNDI2LDggQEAgaW50IGFtZGdwdV92bWlkX2dyYWIoc3Ry
dWN0IGFtZGdwdV92bSAqdm0sIHN0cnVjdCBhbWRncHVfcmluZyAqcmluZywNCiANCiAJCQkvKiBS
ZW1lbWJlciB0aGlzIHN1Ym1pc3Npb24gYXMgdXNlciBvZiB0aGUgVk1JRCAqLw0KIAkJCXIgPSBh
bWRncHVfc3luY19mZW5jZSgmaWQtPmFjdGl2ZSwNCi0JCQkJCSAgICAgICZqb2ItPmJhc2Uuc19m
ZW5jZS0+ZmluaXNoZWQpOw0KKwkJCQkJICAgICAgJmpvYi0+YmFzZS5zX2ZlbmNlLT5maW5pc2hl
ZCwNCisJCQkJCSAgICAgIEdGUF9OT1dBSVQpOw0KIAkJCWlmIChyKQ0KIAkJCQlnb3RvIGVycm9y
Ow0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9tZXMu
YyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9tZXMuYw0KaW5kZXggNmZhMjA5
ODBhMGIxNS4uZTQyNTFkMDY5MWM5YyAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9hbWQv
YW1kZ3B1L2FtZGdwdV9tZXMuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1k
Z3B1X21lcy5jDQpAQCAtMTMzNSwxNCArMTMzNSwxNCBAQCBpbnQgYW1kZ3B1X21lc19jdHhfbWFw
X21ldGFfZGF0YShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCiAJCURSTV9FUlJPUigiZmFp
bGVkIHRvIGRvIHZtX2JvX3VwZGF0ZSBvbiBtZXRhIGRhdGFcbiIpOw0KIAkJZ290byBlcnJvcl9k
ZWxfYm9fdmE7DQogCX0NCi0JYW1kZ3B1X3N5bmNfZmVuY2UoJnN5bmMsIGJvX3ZhLT5sYXN0X3B0
X3VwZGF0ZSk7DQorCWFtZGdwdV9zeW5jX2ZlbmNlKCZzeW5jLCBib192YS0+bGFzdF9wdF91cGRh
dGUsIEdGUF9LRVJORUwpOw0KIA0KIAlyID0gYW1kZ3B1X3ZtX3VwZGF0ZV9wZGVzKGFkZXYsIHZt
LCBmYWxzZSk7DQogCWlmIChyKSB7DQogCQlEUk1fRVJST1IoImZhaWxlZCB0byB1cGRhdGUgcGRl
cyBvbiBtZXRhIGRhdGFcbiIpOw0KIAkJZ290byBlcnJvcl9kZWxfYm9fdmE7DQogCX0NCi0JYW1k
Z3B1X3N5bmNfZmVuY2UoJnN5bmMsIHZtLT5sYXN0X3VwZGF0ZSk7DQorCWFtZGdwdV9zeW5jX2Zl
bmNlKCZzeW5jLCB2bS0+bGFzdF91cGRhdGUsIEdGUF9LRVJORUwpOw0KIA0KIAlhbWRncHVfc3lu
Y193YWl0KCZzeW5jLCBmYWxzZSk7DQogCWRybV9leGVjX2ZpbmkoJmV4ZWMpOw0KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9zeW5jLmMgYi9kcml2ZXJzL2dw
dS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfc3luYy5jDQppbmRleCBkNzU3MTViM2YxODcwLi4zNGZj
NzQyZmRhOTFkIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1
X3N5bmMuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuYw0K
QEAgLTE1Miw3ICsxNTIsOCBAQCBzdGF0aWMgYm9vbCBhbWRncHVfc3luY19hZGRfbGF0ZXIoc3Ry
dWN0IGFtZGdwdV9zeW5jICpzeW5jLCBzdHJ1Y3QgZG1hX2ZlbmNlICpmKQ0KICAqDQogICogQWRk
IHRoZSBmZW5jZSB0byB0aGUgc3luYyBvYmplY3QuDQogICovDQotaW50IGFtZGdwdV9zeW5jX2Zl
bmNlKHN0cnVjdCBhbWRncHVfc3luYyAqc3luYywgc3RydWN0IGRtYV9mZW5jZSAqZikNCitpbnQg
YW1kZ3B1X3N5bmNfZmVuY2Uoc3RydWN0IGFtZGdwdV9zeW5jICpzeW5jLCBzdHJ1Y3QgZG1hX2Zl
bmNlICpmLA0KKwkJICAgICAgZ2ZwX3QgZmxhZ3MpDQogew0KIAlzdHJ1Y3QgYW1kZ3B1X3N5bmNf
ZW50cnkgKmU7DQogDQpAQCAtMTYyLDcgKzE2Myw3IEBAIGludCBhbWRncHVfc3luY19mZW5jZShz
dHJ1Y3QgYW1kZ3B1X3N5bmMgKnN5bmMsIHN0cnVjdCBkbWFfZmVuY2UgKmYpDQogCWlmIChhbWRn
cHVfc3luY19hZGRfbGF0ZXIoc3luYywgZikpDQogCQlyZXR1cm4gMDsNCiANCi0JZSA9IGttZW1f
Y2FjaGVfYWxsb2MoYW1kZ3B1X3N5bmNfc2xhYiwgR0ZQX0tFUk5FTCk7DQorCWUgPSBrbWVtX2Nh
Y2hlX2FsbG9jKGFtZGdwdV9zeW5jX3NsYWIsIGZsYWdzKTsNCiAJaWYgKCFlKQ0KIAkJcmV0dXJu
IC1FTk9NRU07DQogDQpAQCAtMjQ5LDcgKzI1MCw3IEBAIGludCBhbWRncHVfc3luY19yZXN2KHN0
cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1Y3QgYW1kZ3B1X3N5bmMgKnN5bmMsDQogCQkJ
c3RydWN0IGRtYV9mZW5jZSAqdG1wID0gZG1hX2ZlbmNlX2NoYWluX2NvbnRhaW5lZChmKTsNCiAN
CiAJCQlpZiAoYW1kZ3B1X3N5bmNfdGVzdF9mZW5jZShhZGV2LCBtb2RlLCBvd25lciwgdG1wKSkg
ew0KLQkJCQlyID0gYW1kZ3B1X3N5bmNfZmVuY2Uoc3luYywgZik7DQorCQkJCXIgPSBhbWRncHVf
c3luY19mZW5jZShzeW5jLCBmLCBHRlBfS0VSTkVMKTsNCiAJCQkJZG1hX2ZlbmNlX3B1dChmKTsN
CiAJCQkJaWYgKHIpDQogCQkJCQlyZXR1cm4gcjsNCkBAIC0yODEsNyArMjgyLDcgQEAgaW50IGFt
ZGdwdV9zeW5jX2tmZChzdHJ1Y3QgYW1kZ3B1X3N5bmMgKnN5bmMsIHN0cnVjdCBkbWFfcmVzdiAq
cmVzdikNCiAJCWlmIChmZW5jZV9vd25lciAhPSBBTURHUFVfRkVOQ0VfT1dORVJfS0ZEKQ0KIAkJ
CWNvbnRpbnVlOw0KIA0KLQkJciA9IGFtZGdwdV9zeW5jX2ZlbmNlKHN5bmMsIGYpOw0KKwkJciA9
IGFtZGdwdV9zeW5jX2ZlbmNlKHN5bmMsIGYsIEdGUF9LRVJORUwpOw0KIAkJaWYgKHIpDQogCQkJ
YnJlYWs7DQogCX0NCkBAIC0zODgsNyArMzg5LDcgQEAgaW50IGFtZGdwdV9zeW5jX2Nsb25lKHN0
cnVjdCBhbWRncHVfc3luYyAqc291cmNlLCBzdHJ1Y3QgYW1kZ3B1X3N5bmMgKmNsb25lKQ0KIAlo
YXNoX2Zvcl9lYWNoX3NhZmUoc291cmNlLT5mZW5jZXMsIGksIHRtcCwgZSwgbm9kZSkgew0KIAkJ
ZiA9IGUtPmZlbmNlOw0KIAkJaWYgKCFkbWFfZmVuY2VfaXNfc2lnbmFsZWQoZikpIHsNCi0JCQly
ID0gYW1kZ3B1X3N5bmNfZmVuY2UoY2xvbmUsIGYpOw0KKwkJCXIgPSBhbWRncHVfc3luY19mZW5j
ZShjbG9uZSwgZiwgR0ZQX0tFUk5FTCk7DQogCQkJaWYgKHIpDQogCQkJCXJldHVybiByOw0KIAkJ
fSBlbHNlIHsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
c3luYy5oIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3N5bmMuaA0KaW5kZXgg
YTkxYThlYWY4MDhiMS4uNTFlYjQzODJjOTFlYiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2Ry
bS9hbWQvYW1kZ3B1L2FtZGdwdV9zeW5jLmgNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9zeW5jLmgNCkBAIC00Nyw3ICs0Nyw4IEBAIHN0cnVjdCBhbWRncHVfc3luYyB7
DQogfTsNCiANCiB2b2lkIGFtZGdwdV9zeW5jX2NyZWF0ZShzdHJ1Y3QgYW1kZ3B1X3N5bmMgKnN5
bmMpOw0KLWludCBhbWRncHVfc3luY19mZW5jZShzdHJ1Y3QgYW1kZ3B1X3N5bmMgKnN5bmMsIHN0
cnVjdCBkbWFfZmVuY2UgKmYpOw0KK2ludCBhbWRncHVfc3luY19mZW5jZShzdHJ1Y3QgYW1kZ3B1
X3N5bmMgKnN5bmMsIHN0cnVjdCBkbWFfZmVuY2UgKmYsDQorCQkgICAgICBnZnBfdCBmbGFncyk7
DQogaW50IGFtZGdwdV9zeW5jX3Jlc3Yoc3RydWN0IGFtZGdwdV9kZXZpY2UgKmFkZXYsIHN0cnVj
dCBhbWRncHVfc3luYyAqc3luYywNCiAJCSAgICAgc3RydWN0IGRtYV9yZXN2ICpyZXN2LCBlbnVt
IGFtZGdwdV9zeW5jX21vZGUgbW9kZSwNCiAJCSAgICAgdm9pZCAqb3duZXIpOw0KLS0gDQoyLjM5
LjUNCg0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGlu
YXJvLW1tLXNpZyBtYWlsaW5nIGxpc3QgLS0gbGluYXJvLW1tLXNpZ0BsaXN0cy5saW5hcm8ub3Jn
ClRvIHVuc3Vic2NyaWJlIHNlbmQgYW4gZW1haWwgdG8gbGluYXJvLW1tLXNpZy1sZWF2ZUBsaXN0
cy5saW5hcm8ub3JnCg==
