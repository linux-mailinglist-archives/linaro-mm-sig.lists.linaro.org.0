Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 8095859F767
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 24 Aug 2022 12:23:55 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id B69303F57B
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 24 Aug 2022 10:23:54 +0000 (UTC)
Received: from madras.collabora.co.uk (madras.collabora.co.uk [46.235.227.172])
	by lists.linaro.org (Postfix) with ESMTPS id 518663EE60
	for <linaro-mm-sig@lists.linaro.org>; Wed, 24 Aug 2022 10:23:41 +0000 (UTC)
Received: from dimapc.. (109-252-119-13.nat.spd-mgts.ru [109.252.119.13])
	(using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
	 key-exchange X25519 server-signature RSA-PSS (4096 bits) server-digest SHA256)
	(No client certificate requested)
	(Authenticated sender: dmitry.osipenko)
	by madras.collabora.co.uk (Postfix) with ESMTPSA id 0D67E6601E78;
	Wed, 24 Aug 2022 11:23:37 +0100 (BST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=collabora.com;
	s=mail; t=1661336620;
	bh=vjGJDOJcwTx3skquK+c31Lny7pnv/F9aDM8mLEy+Wp8=;
	h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
	b=akEZgBfpUuedzfveI891YN9NvyTcKaZFFmTea57/zUiqOFZcSSBIXucSseqWMz3aK
	 Puo2Jj4yyPvEIGHd/U4OHWBZLsjvLsssFJoVjN1DtXYnaJQYvh5J4/DXMSvI0Ozv3O
	 qju7RAijWrYIAIHvzKRpTfAUp4hUwsUlz5o4dn8lBPLMq5sUUbcCCN94ZIl5KIcpMY
	 jkWKs94GCUsQIFVKEBkf2dz4kD1QX1w6mXxMWRD324LkyB70EVjIgsMPlmBa2BOkQm
	 6Uc4RVBpDy228NR0g+Cjr04HgCmQA4P80xOIHt+dgZFgTI4ik1HitBbSDMvGHT+/tc
	 R6kV9bd+/BO6g==
From: Dmitry Osipenko <dmitry.osipenko@collabora.com>
To: David Airlie <airlied@linux.ie>,
	Gerd Hoffmann <kraxel@redhat.com>,
	Gurchetan Singh <gurchetansingh@chromium.org>,
	Chia-I Wu <olvaffe@gmail.com>,
	Daniel Vetter <daniel@ffwll.ch>,
	Daniel Almeida <daniel.almeida@collabora.com>,
	Gert Wollny <gert.wollny@collabora.com>,
	Gustavo Padovan <gustavo.padovan@collabora.com>,
	Daniel Stone <daniel@fooishbar.org>,
	Tomeu Vizoso <tomeu.vizoso@collabora.com>,
	Maarten Lankhorst <maarten.lankhorst@linux.intel.com>,
	Maxime Ripard <mripard@kernel.org>,
	Thomas Zimmermann <tzimmermann@suse.de>,
	Rob Clark <robdclark@gmail.com>,
	Sumit Semwal <sumit.semwal@linaro.org>,
	=?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>,
	"Pan, Xinhui" <Xinhui.Pan@amd.com>,
	Thierry Reding <thierry.reding@gmail.com>,
	Tomasz Figa <tfiga@chromium.org>,
	Marek Szyprowski <m.szyprowski@samsung.com>,
	Mauro Carvalho Chehab <mchehab@kernel.org>,
	Alex Deucher <alexander.deucher@amd.com>,
	Jani Nikula <jani.nikula@linux.intel.com>,
	Joonas Lahtinen <joonas.lahtinen@linux.intel.com>,
	Rodrigo Vivi <rodrigo.vivi@intel.com>,
	Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>,
	=?UTF-8?q?Thomas=20Hellstr=C3=B6m?= <thomas_os@shipmail.org>,
	Qiang Yu <yuq825@gmail.com>
Date: Wed, 24 Aug 2022 13:22:40 +0300
Message-Id: <20220824102248.91964-2-dmitry.osipenko@collabora.com>
X-Mailer: git-send-email 2.37.2
In-Reply-To: <20220824102248.91964-1-dmitry.osipenko@collabora.com>
References: <20220824102248.91964-1-dmitry.osipenko@collabora.com>
MIME-Version: 1.0
Message-ID-Hash: BDRL5OI24MPHT4LB3EDDBDNQGDDG23L4
X-Message-ID-Hash: BDRL5OI24MPHT4LB3EDDBDNQGDDG23L4
X-MailFrom: dmitry.osipenko@collabora.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
CC: dri-devel@lists.freedesktop.org, linux-kernel@vger.kernel.org, Dmitry Osipenko <digetx@gmail.com>, linux-media@vger.kernel.org, linaro-mm-sig@lists.linaro.org, amd-gfx@lists.freedesktop.org, intel-gfx@lists.freedesktop.org, kernel@collabora.com, virtualization@lists.linux-foundation.org, linux-rdma@vger.kernel.org, linux-arm-msm@vger.kernel.org, lima@lists.freedesktop.org
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH v3 1/9] dma-buf: Add _unlocked postfix to function names
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/BDRL5OI24MPHT4LB3EDDBDNQGDDG23L4/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

QWRkIF91bmxvY2tlZCBwb3N0Zml4IHRvIHRoZSBkbWEtYnVmIEFQSSBmdW5jdGlvbiBuYW1lcyBp
biBhIHByZXBhcmF0aW9uDQp0byBtb3ZlIGFsbCBub24tZHluYW1pYyBkbWEtYnVmIHVzZXJzIG92
ZXIgdG8gdGhlIGR5bmFtaWMgbG9ja2luZw0Kc3BlY2lmaWNhdGlvbi4gVGhpcyBwYXRjaCBvbmx5
IHJlbmFtZXMgQVBJIGZ1bmN0aW9ucywgcHJlcGFyaW5nIGRyaXZlcnMNCnRvIHRoZSBjb21tb24g
bG9ja2luZyBjb252ZW50aW9uLiBMYXRlciBvbiwgd2Ugd2lsbCBtYWtlIHRoZSAidW5sb2NrZWQi
DQpmdW5jdGlvbnMgdG8gdGFrZSB0aGUgcmVzZXJ2YXRpb24gbG9jay4NCg0KQWNrZWQtYnk6IENo
cmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4NClN1Z2dlc3RlZC1ieTog
Q2hyaXN0aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPg0KU2lnbmVkLW9mZi1i
eTogRG1pdHJ5IE9zaXBlbmtvIDxkbWl0cnkub3NpcGVua29AY29sbGFib3JhLmNvbT4NCi0tLQ0K
IGRyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMgICAgICAgICAgICAgICAgICAgICB8IDc2ICsrKysr
KysrKystLS0tLS0tLS0NCiBkcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1
Zi5jICAgfCAgNCArLQ0KIGRyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0uYyAg
ICAgICB8ICA0ICstDQogZHJpdmVycy9ncHUvZHJtL2FybWFkYS9hcm1hZGFfZ2VtLmMgICAgICAg
ICAgIHwgMTQgKystLQ0KIGRyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX2RtYV9oZWxwZXIuYyAgICAg
ICAgICB8ICA2ICstDQogZHJpdmVycy9ncHUvZHJtL2RybV9nZW1fc2htZW1faGVscGVyLmMgICAg
ICAgIHwgIDggKy0NCiBkcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW1lLmMgICAgICAgICAgICAgICAg
ICAgfCAxMiArLS0NCiBkcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9wcmltZS5j
ICAgfCAgNiArLQ0KIGRyaXZlcnMvZ3B1L2RybS9leHlub3MvZXh5bm9zX2RybV9nZW0uYyAgICAg
ICB8ICAyICstDQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jICAg
IHwgMTIgKy0tDQogLi4uL2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9nZW1fZG1hYnVmLmMg
IHwgMjAgKystLS0NCiBkcml2ZXJzL2dwdS9kcm0vb21hcGRybS9vbWFwX2dlbV9kbWFidWYuYyAg
ICAgfCAgOCArLQ0KIGRyaXZlcnMvZ3B1L2RybS90ZWdyYS9nZW0uYyAgICAgICAgICAgICAgICAg
ICB8IDI3ICsrKy0tLS0NCiBkcml2ZXJzL2luZmluaWJhbmQvY29yZS91bWVtX2RtYWJ1Zi5jICAg
ICAgICAgfCAxMSArLS0NCiAuLi4vY29tbW9uL3ZpZGVvYnVmMi92aWRlb2J1ZjItZG1hLWNvbnRp
Zy5jICAgfCAxNSArKy0tDQogLi4uL21lZGlhL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLWRt
YS1zZy5jIHwgMTIgKy0tDQogLi4uL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYyLXZtYWxsb2Mu
YyAgICAgIHwgIDYgKy0NCiAuLi4vcGxhdGZvcm0vbnZpZGlhL3RlZ3JhLXZkZS9kbWFidWYtY2Fj
aGUuYyAgfCAxMiArLS0NCiBkcml2ZXJzL21pc2MvZmFzdHJwYy5jICAgICAgICAgICAgICAgICAg
ICAgICAgfCAxMiArLS0NCiBkcml2ZXJzL3hlbi9nbnRkZXYtZG1hYnVmLmMgICAgICAgICAgICAg
ICAgICAgfCAxNCArKy0tDQogaW5jbHVkZS9saW51eC9kbWEtYnVmLmggICAgICAgICAgICAgICAg
ICAgICAgIHwgMzQgKysrKystLS0tDQogMjEgZmlsZXMgY2hhbmdlZCwgMTYyIGluc2VydGlvbnMo
KyksIDE1MyBkZWxldGlvbnMoLSkNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEt
YnVmLmMgYi9kcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jDQppbmRleCAxYzkxMjI1NWM1ZDYuLjQ1
MmE2YTFmMWU2MCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMNCisrKyBi
L2RyaXZlcnMvZG1hLWJ1Zi9kbWEtYnVmLmMNCkBAIC03OTUsNyArNzk1LDcgQEAgc3RhdGljIHN0
cnVjdCBzZ190YWJsZSAqIF9fbWFwX2RtYV9idWYoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAq
YXR0YWNoLA0KIH0NCiANCiAvKioNCi0gKiBkbWFfYnVmX2R5bmFtaWNfYXR0YWNoIC0gQWRkIHRo
ZSBkZXZpY2UgdG8gZG1hX2J1ZidzIGF0dGFjaG1lbnRzIGxpc3QNCisgKiBkbWFfYnVmX2R5bmFt
aWNfYXR0YWNoX3VubG9ja2VkIC0gQWRkIHRoZSBkZXZpY2UgdG8gZG1hX2J1ZidzIGF0dGFjaG1l
bnRzIGxpc3QNCiAgKiBAZG1hYnVmOgkJW2luXQlidWZmZXIgdG8gYXR0YWNoIGRldmljZSB0by4N
CiAgKiBAZGV2OgkJW2luXQlkZXZpY2UgdG8gYmUgYXR0YWNoZWQuDQogICogQGltcG9ydGVyX29w
czoJW2luXQlpbXBvcnRlciBvcGVyYXRpb25zIGZvciB0aGUgYXR0YWNobWVudA0KQEAgLTgxNyw5
ICs4MTcsOSBAQCBzdGF0aWMgc3RydWN0IHNnX3RhYmxlICogX19tYXBfZG1hX2J1ZihzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsDQogICogaW5kaWNhdGVkIHdpdGggdGhlIGVycm9y
IGNvZGUgLUVCVVNZLg0KICAqLw0KIHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKg0KLWRtYV9i
dWZfZHluYW1pY19hdHRhY2goc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGRldmljZSAq
ZGV2LA0KLQkJICAgICAgIGNvbnN0IHN0cnVjdCBkbWFfYnVmX2F0dGFjaF9vcHMgKmltcG9ydGVy
X29wcywNCi0JCSAgICAgICB2b2lkICppbXBvcnRlcl9wcml2KQ0KK2RtYV9idWZfZHluYW1pY19h
dHRhY2hfdW5sb2NrZWQoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGRldmljZSAqZGV2
LA0KKwkJCQljb25zdCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2hfb3BzICppbXBvcnRlcl9vcHMsDQor
CQkJCXZvaWQgKmltcG9ydGVyX3ByaXYpDQogew0KIAlzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50
ICphdHRhY2g7DQogCWludCByZXQ7DQpAQCAtODkyLDI1ICs4OTIsMjUgQEAgZG1hX2J1Zl9keW5h
bWljX2F0dGFjaChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgZGV2aWNlICpkZXYsDQog
CWlmIChkbWFfYnVmX2lzX2R5bmFtaWMoYXR0YWNoLT5kbWFidWYpKQ0KIAkJZG1hX3Jlc3ZfdW5s
b2NrKGF0dGFjaC0+ZG1hYnVmLT5yZXN2KTsNCiANCi0JZG1hX2J1Zl9kZXRhY2goZG1hYnVmLCBh
dHRhY2gpOw0KKwlkbWFfYnVmX2RldGFjaF91bmxvY2tlZChkbWFidWYsIGF0dGFjaCk7DQogCXJl
dHVybiBFUlJfUFRSKHJldCk7DQogfQ0KLUVYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfZHlu
YW1pY19hdHRhY2gsIERNQV9CVUYpOw0KK0VYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfZHlu
YW1pY19hdHRhY2hfdW5sb2NrZWQsIERNQV9CVUYpOw0KIA0KIC8qKg0KLSAqIGRtYV9idWZfYXR0
YWNoIC0gV3JhcHBlciBmb3IgZG1hX2J1Zl9keW5hbWljX2F0dGFjaA0KKyAqIGRtYV9idWZfYXR0
YWNoX3VubG9ja2VkIC0gV3JhcHBlciBmb3IgZG1hX2J1Zl9keW5hbWljX2F0dGFjaA0KICAqIEBk
bWFidWY6CVtpbl0JYnVmZmVyIHRvIGF0dGFjaCBkZXZpY2UgdG8uDQogICogQGRldjoJW2luXQlk
ZXZpY2UgdG8gYmUgYXR0YWNoZWQuDQogICoNCi0gKiBXcmFwcGVyIHRvIGNhbGwgZG1hX2J1Zl9k
eW5hbWljX2F0dGFjaCgpIGZvciBkcml2ZXJzIHdoaWNoIHN0aWxsIHVzZSBhIHN0YXRpYw0KLSAq
IG1hcHBpbmcuDQorICogV3JhcHBlciB0byBjYWxsIGRtYV9idWZfZHluYW1pY19hdHRhY2hfdW5s
b2NrZWQoKSBmb3IgZHJpdmVycyB3aGljaCBzdGlsbA0KKyAqIHVzZSBhIHN0YXRpYyBtYXBwaW5n
Lg0KICAqLw0KLXN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmRtYV9idWZfYXR0YWNoKHN0cnVj
dCBkbWFfYnVmICpkbWFidWYsDQotCQkJCQkgIHN0cnVjdCBkZXZpY2UgKmRldikNCitzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2htZW50ICpkbWFfYnVmX2F0dGFjaF91bmxvY2tlZChzdHJ1Y3QgZG1hX2J1
ZiAqZG1hYnVmLA0KKwkJCQkJCSAgIHN0cnVjdCBkZXZpY2UgKmRldikNCiB7DQotCXJldHVybiBk
bWFfYnVmX2R5bmFtaWNfYXR0YWNoKGRtYWJ1ZiwgZGV2LCBOVUxMLCBOVUxMKTsNCisJcmV0dXJu
IGRtYV9idWZfZHluYW1pY19hdHRhY2hfdW5sb2NrZWQoZG1hYnVmLCBkZXYsIE5VTEwsIE5VTEwp
Ow0KIH0NCi1FWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX2F0dGFjaCwgRE1BX0JVRik7DQor
RVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQsIERNQV9CVUYpOw0K
IA0KIHN0YXRpYyB2b2lkIF9fdW5tYXBfZG1hX2J1ZihzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50
ICphdHRhY2gsDQogCQkJICAgIHN0cnVjdCBzZ190YWJsZSAqc2dfdGFibGUsDQpAQCAtOTIzLDcg
KzkyMyw3IEBAIHN0YXRpYyB2b2lkIF9fdW5tYXBfZG1hX2J1ZihzdHJ1Y3QgZG1hX2J1Zl9hdHRh
Y2htZW50ICphdHRhY2gsDQogfQ0KIA0KIC8qKg0KLSAqIGRtYV9idWZfZGV0YWNoIC0gUmVtb3Zl
IHRoZSBnaXZlbiBhdHRhY2htZW50IGZyb20gZG1hYnVmJ3MgYXR0YWNobWVudHMgbGlzdA0KKyAq
IGRtYV9idWZfZGV0YWNoX3VubG9ja2VkIC0gUmVtb3ZlIHRoZSBnaXZlbiBhdHRhY2htZW50IGZy
b20gZG1hYnVmJ3MgYXR0YWNobWVudHMgbGlzdA0KICAqIEBkbWFidWY6CVtpbl0JYnVmZmVyIHRv
IGRldGFjaCBmcm9tLg0KICAqIEBhdHRhY2g6CVtpbl0JYXR0YWNobWVudCB0byBiZSBkZXRhY2hl
ZDsgaXMgZnJlZSdkIGFmdGVyIHRoaXMgY2FsbC4NCiAgKg0KQEAgLTkzMSw3ICs5MzEsOCBAQCBz
dGF0aWMgdm9pZCBfX3VubWFwX2RtYV9idWYoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0
YWNoLA0KICAqDQogICogT3B0aW9uYWxseSB0aGlzIGNhbGxzICZkbWFfYnVmX29wcy5kZXRhY2gg
Zm9yIGRldmljZS1zcGVjaWZpYyBkZXRhY2guDQogICovDQotdm9pZCBkbWFfYnVmX2RldGFjaChz
dHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gp
DQordm9pZCBkbWFfYnVmX2RldGFjaF91bmxvY2tlZChzdHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLA0K
KwkJCSAgICAgc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoKQ0KIHsNCiAJaWYgKFdB
Uk5fT04oIWRtYWJ1ZiB8fCAhYXR0YWNoKSkNCiAJCXJldHVybjsNCkBAIC05NTYsMTQgKzk1Nywx
NCBAQCB2b2lkIGRtYV9idWZfZGV0YWNoKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCBk
bWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCkNCiANCiAJa2ZyZWUoYXR0YWNoKTsNCiB9DQotRVhQ
T1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl9kZXRhY2gsIERNQV9CVUYpOw0KK0VYUE9SVF9TWU1C
T0xfTlNfR1BMKGRtYV9idWZfZGV0YWNoX3VubG9ja2VkLCBETUFfQlVGKTsNCiANCiAvKioNCiAg
KiBkbWFfYnVmX3BpbiAtIExvY2sgZG93biB0aGUgRE1BLWJ1Zg0KICAqIEBhdHRhY2g6CVtpbl0J
YXR0YWNobWVudCB3aGljaCBzaG91bGQgYmUgcGlubmVkDQogICoNCi0gKiBPbmx5IGR5bmFtaWMg
aW1wb3J0ZXJzICh3aG8gc2V0IHVwIEBhdHRhY2ggd2l0aCBkbWFfYnVmX2R5bmFtaWNfYXR0YWNo
KCkpIG1heQ0KLSAqIGNhbGwgdGhpcywgYW5kIG9ubHkgZm9yIGxpbWl0ZWQgdXNlIGNhc2VzIGxp
a2Ugc2Nhbm91dCBhbmQgbm90IGZvciB0ZW1wb3JhcnkNCisgKiBPbmx5IGR5bmFtaWMgaW1wb3J0
ZXJzICh3aG8gc2V0IHVwIEBhdHRhY2ggd2l0aCBkbWFfYnVmX2R5bmFtaWNfYXR0YWNoX3VubG9j
a2VkKCkpDQorICogbWF5IGNhbGwgdGhpcywgYW5kIG9ubHkgZm9yIGxpbWl0ZWQgdXNlIGNhc2Vz
IGxpa2Ugc2Nhbm91dCBhbmQgbm90IGZvciB0ZW1wb3JhcnkNCiAgKiBwaW4gb3BlcmF0aW9ucy4g
SXQgaXMgbm90IHBlcm1pdHRlZCB0byBhbGxvdyB1c2Vyc3BhY2UgdG8gcGluIGFyYml0cmFyeQ0K
ICAqIGFtb3VudHMgb2YgYnVmZmVycyB0aHJvdWdoIHRoaXMgaW50ZXJmYWNlLg0KICAqDQpAQCAt
MTAxMCw3ICsxMDExLDcgQEAgdm9pZCBkbWFfYnVmX3VucGluKHN0cnVjdCBkbWFfYnVmX2F0dGFj
aG1lbnQgKmF0dGFjaCkNCiBFWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX3VucGluLCBETUFf
QlVGKTsNCiANCiAvKioNCi0gKiBkbWFfYnVmX21hcF9hdHRhY2htZW50IC0gUmV0dXJucyB0aGUg
c2NhdHRlcmxpc3QgdGFibGUgb2YgdGhlIGF0dGFjaG1lbnQ7DQorICogZG1hX2J1Zl9tYXBfYXR0
YWNobWVudF91bmxvY2tlZCAtIFJldHVybnMgdGhlIHNjYXR0ZXJsaXN0IHRhYmxlIG9mIHRoZSBh
dHRhY2htZW50Ow0KICAqIG1hcHBlZCBpbnRvIF9kZXZpY2VfIGFkZHJlc3Mgc3BhY2UuIElzIGEg
d3JhcHBlciBmb3IgbWFwX2RtYV9idWYoKSBvZiB0aGUNCiAgKiBkbWFfYnVmX29wcy4NCiAgKiBA
YXR0YWNoOglbaW5dCWF0dGFjaG1lbnQgd2hvc2Ugc2NhdHRlcmxpc3QgaXMgdG8gYmUgcmV0dXJu
ZWQNCkBAIC0xMDMwLDggKzEwMzEsOSBAQCBFWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX3Vu
cGluLCBETUFfQlVGKTsNCiAgKiBJbXBvcnRhbnQ6IER5bmFtaWMgaW1wb3J0ZXJzIG11c3Qgd2Fp
dCBmb3IgdGhlIGV4Y2x1c2l2ZSBmZW5jZSBvZiB0aGUgc3RydWN0DQogICogZG1hX3Jlc3YgYXR0
YWNoZWQgdG8gdGhlIERNQS1CVUYgZmlyc3QuDQogICovDQotc3RydWN0IHNnX3RhYmxlICpkbWFf
YnVmX21hcF9hdHRhY2htZW50KHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwNCi0J
CQkJCWVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcmVjdGlvbikNCitzdHJ1Y3Qgc2dfdGFibGUg
Kg0KK2RtYV9idWZfbWFwX2F0dGFjaG1lbnRfdW5sb2NrZWQoc3RydWN0IGRtYV9idWZfYXR0YWNo
bWVudCAqYXR0YWNoLA0KKwkJCQllbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXJlY3Rpb24pDQog
ew0KIAlzdHJ1Y3Qgc2dfdGFibGUgKnNnX3RhYmxlOw0KIAlpbnQgcjsNCkBAIC0xMDk3LDEwICsx
MDk5LDEwIEBAIHN0cnVjdCBzZ190YWJsZSAqZG1hX2J1Zl9tYXBfYXR0YWNobWVudChzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsDQogI2VuZGlmIC8qIENPTkZJR19ETUFfQVBJX0RF
QlVHICovDQogCXJldHVybiBzZ190YWJsZTsNCiB9DQotRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1h
X2J1Zl9tYXBfYXR0YWNobWVudCwgRE1BX0JVRik7DQorRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1h
X2J1Zl9tYXBfYXR0YWNobWVudF91bmxvY2tlZCwgRE1BX0JVRik7DQogDQogLyoqDQotICogZG1h
X2J1Zl91bm1hcF9hdHRhY2htZW50IC0gdW5tYXBzIGFuZCBkZWNyZWFzZXMgdXNlY291bnQgb2Yg
dGhlIGJ1ZmZlcjttaWdodA0KKyAqIGRtYV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZCAt
IHVubWFwcyBhbmQgZGVjcmVhc2VzIHVzZWNvdW50IG9mIHRoZSBidWZmZXI7bWlnaHQNCiAgKiBk
ZWFsbG9jYXRlIHRoZSBzY2F0dGVybGlzdCBhc3NvY2lhdGVkLiBJcyBhIHdyYXBwZXIgZm9yIHVu
bWFwX2RtYV9idWYoKSBvZg0KICAqIGRtYV9idWZfb3BzLg0KICAqIEBhdHRhY2g6CVtpbl0JYXR0
YWNobWVudCB0byB1bm1hcCBidWZmZXIgZnJvbQ0KQEAgLTExMDksOSArMTExMSw5IEBAIEVYUE9S
VF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfbWFwX2F0dGFjaG1lbnQsIERNQV9CVUYpOw0KICAqDQog
ICogVGhpcyB1bm1hcHMgYSBETUEgbWFwcGluZyBmb3IgQGF0dGFjaGVkIG9idGFpbmVkIGJ5IGRt
YV9idWZfbWFwX2F0dGFjaG1lbnQoKS4NCiAgKi8NCi12b2lkIGRtYV9idWZfdW5tYXBfYXR0YWNo
bWVudChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsDQotCQkJCXN0cnVjdCBzZ190
YWJsZSAqc2dfdGFibGUsDQotCQkJCWVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcmVjdGlvbikN
Cit2b2lkIGRtYV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChzdHJ1Y3QgZG1hX2J1Zl9h
dHRhY2htZW50ICphdHRhY2gsDQorCQkJCSAgICAgICBzdHJ1Y3Qgc2dfdGFibGUgKnNnX3RhYmxl
LA0KKwkJCQkgICAgICAgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyZWN0aW9uKQ0KIHsNCiAJ
bWlnaHRfc2xlZXAoKTsNCiANCkBAIC0xMTMzLDcgKzExMzUsNyBAQCB2b2lkIGRtYV9idWZfdW5t
YXBfYXR0YWNobWVudChzdHJ1Y3QgZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gsDQogCSAgICAh
SVNfRU5BQkxFRChDT05GSUdfRE1BQlVGX01PVkVfTk9USUZZKSkNCiAJCWRtYV9idWZfdW5waW4o
YXR0YWNoKTsNCiB9DQotRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl91bm1hcF9hdHRhY2ht
ZW50LCBETUFfQlVGKTsNCitFWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX3VubWFwX2F0dGFj
aG1lbnRfdW5sb2NrZWQsIERNQV9CVUYpOw0KIA0KIC8qKg0KICAqIGRtYV9idWZfbW92ZV9ub3Rp
ZnkgLSBub3RpZnkgYXR0YWNobWVudHMgdGhhdCBETUEtYnVmIGlzIG1vdmluZw0KQEAgLTEzMzAs
NyArMTMzMiw3IEBAIEVYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfZW5kX2NwdV9hY2Nlc3Ms
IERNQV9CVUYpOw0KIA0KIA0KIC8qKg0KLSAqIGRtYV9idWZfbW1hcCAtIFNldHVwIHVwIGEgdXNl
cnNwYWNlIG1tYXAgd2l0aCB0aGUgZ2l2ZW4gdm1hDQorICogZG1hX2J1Zl9tbWFwX3VubG9ja2Vk
IC0gU2V0dXAgdXAgYSB1c2Vyc3BhY2UgbW1hcCB3aXRoIHRoZSBnaXZlbiB2bWENCiAgKiBAZG1h
YnVmOglbaW5dCWJ1ZmZlciB0aGF0IHNob3VsZCBiYWNrIHRoZSB2bWENCiAgKiBAdm1hOglbaW5d
CXZtYSBmb3IgdGhlIG1tYXANCiAgKiBAcGdvZmY6CVtpbl0Jb2Zmc2V0IGluIHBhZ2VzIHdoZXJl
IHRoaXMgbW1hcCBzaG91bGQgc3RhcnQgd2l0aGluIHRoZQ0KQEAgLTEzNDMsOCArMTM0NSw4IEBA
IEVYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfZW5kX2NwdV9hY2Nlc3MsIERNQV9CVUYpOw0K
ICAqDQogICogQ2FuIHJldHVybiBuZWdhdGl2ZSBlcnJvciB2YWx1ZXMsIHJldHVybnMgMCBvbiBz
dWNjZXNzLg0KICAqLw0KLWludCBkbWFfYnVmX21tYXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwg
c3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEsDQotCQkgdW5zaWduZWQgbG9uZyBwZ29mZikNCitp
bnQgZG1hX2J1Zl9tbWFwX3VubG9ja2VkKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVjdCB2
bV9hcmVhX3N0cnVjdCAqdm1hLA0KKwkJCSAgdW5zaWduZWQgbG9uZyBwZ29mZikNCiB7DQogCWlm
IChXQVJOX09OKCFkbWFidWYgfHwgIXZtYSkpDQogCQlyZXR1cm4gLUVJTlZBTDsNCkBAIC0xMzY4
LDEwICsxMzcwLDEwIEBAIGludCBkbWFfYnVmX21tYXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwg
c3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEsDQogDQogCXJldHVybiBkbWFidWYtPm9wcy0+bW1h
cChkbWFidWYsIHZtYSk7DQogfQ0KLUVYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfbW1hcCwg
RE1BX0JVRik7DQorRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl9tbWFwX3VubG9ja2VkLCBE
TUFfQlVGKTsNCiANCiAvKioNCi0gKiBkbWFfYnVmX3ZtYXAgLSBDcmVhdGUgdmlydHVhbCBtYXBw
aW5nIGZvciB0aGUgYnVmZmVyIG9iamVjdCBpbnRvIGtlcm5lbA0KKyAqIGRtYV9idWZfdm1hcF91
bmxvY2tlZCAtIENyZWF0ZSB2aXJ0dWFsIG1hcHBpbmcgZm9yIHRoZSBidWZmZXIgb2JqZWN0IGlu
dG8ga2VybmVsDQogICogYWRkcmVzcyBzcGFjZS4gU2FtZSByZXN0cmljdGlvbnMgYXMgZm9yIHZt
YXAgYW5kIGZyaWVuZHMgYXBwbHkuDQogICogQGRtYWJ1ZjoJW2luXQlidWZmZXIgdG8gdm1hcA0K
ICAqIEBtYXA6CVtvdXRdCXJldHVybnMgdGhlIHZtYXAgcG9pbnRlcg0KQEAgLTEzODYsNyArMTM4
OCw3IEBAIEVYUE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfbW1hcCwgRE1BX0JVRik7DQogICoN
CiAgKiBSZXR1cm5zIDAgb24gc3VjY2Vzcywgb3IgYSBuZWdhdGl2ZSBlcnJubyBjb2RlIG90aGVy
d2lzZS4NCiAgKi8NCi1pbnQgZG1hX2J1Zl92bWFwKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0
cnVjdCBpb3N5c19tYXAgKm1hcCkNCitpbnQgZG1hX2J1Zl92bWFwX3VubG9ja2VkKHN0cnVjdCBk
bWFfYnVmICpkbWFidWYsIHN0cnVjdCBpb3N5c19tYXAgKm1hcCkNCiB7DQogCXN0cnVjdCBpb3N5
c19tYXAgcHRyOw0KIAlpbnQgcmV0ID0gMDsNCkBAIC0xNDIyLDE0ICsxNDI0LDE0IEBAIGludCBk
bWFfYnVmX3ZtYXAoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGlvc3lzX21hcCAqbWFw
KQ0KIAltdXRleF91bmxvY2soJmRtYWJ1Zi0+bG9jayk7DQogCXJldHVybiByZXQ7DQogfQ0KLUVY
UE9SVF9TWU1CT0xfTlNfR1BMKGRtYV9idWZfdm1hcCwgRE1BX0JVRik7DQorRVhQT1JUX1NZTUJP
TF9OU19HUEwoZG1hX2J1Zl92bWFwX3VubG9ja2VkLCBETUFfQlVGKTsNCiANCiAvKioNCi0gKiBk
bWFfYnVmX3Z1bm1hcCAtIFVubWFwIGEgdm1hcCBvYnRhaW5lZCBieSBkbWFfYnVmX3ZtYXAuDQor
ICogZG1hX2J1Zl92dW5tYXBfdW5sb2NrZWQgLSBVbm1hcCBhIHZtYXAgb2J0YWluZWQgYnkgZG1h
X2J1Zl92bWFwLg0KICAqIEBkbWFidWY6CVtpbl0JYnVmZmVyIHRvIHZ1bm1hcA0KICAqIEBtYXA6
CVtpbl0Jdm1hcCBwb2ludGVyIHRvIHZ1bm1hcA0KICAqLw0KLXZvaWQgZG1hX2J1Zl92dW5tYXAo
c3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGlvc3lzX21hcCAqbWFwKQ0KK3ZvaWQgZG1h
X2J1Zl92dW5tYXBfdW5sb2NrZWQoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGlvc3lz
X21hcCAqbWFwKQ0KIHsNCiAJaWYgKFdBUk5fT04oIWRtYWJ1ZikpDQogCQlyZXR1cm47DQpAQCAt
MTQ0Niw3ICsxNDQ4LDcgQEAgdm9pZCBkbWFfYnVmX3Z1bm1hcChzdHJ1Y3QgZG1hX2J1ZiAqZG1h
YnVmLCBzdHJ1Y3QgaW9zeXNfbWFwICptYXApDQogCX0NCiAJbXV0ZXhfdW5sb2NrKCZkbWFidWYt
PmxvY2spOw0KIH0NCi1FWFBPUlRfU1lNQk9MX05TX0dQTChkbWFfYnVmX3Z1bm1hcCwgRE1BX0JV
Rik7DQorRVhQT1JUX1NZTUJPTF9OU19HUEwoZG1hX2J1Zl92dW5tYXBfdW5sb2NrZWQsIERNQV9C
VUYpOw0KIA0KICNpZmRlZiBDT05GSUdfREVCVUdfRlMNCiBzdGF0aWMgaW50IGRtYV9idWZfZGVi
dWdfc2hvdyhzdHJ1Y3Qgc2VxX2ZpbGUgKnMsIHZvaWQgKnVudXNlZCkNCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1Zi5jIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2RtYV9idWYuYw0KaW5kZXggNzgyY2JjYTM3NTM4Li5kOWVk
NWE0ZmJjNmYgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVf
ZG1hX2J1Zi5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZG1hX2J1
Zi5jDQpAQCAtNDQ5LDggKzQ0OSw4IEBAIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqYW1kZ3B1X2dl
bV9wcmltZV9pbXBvcnQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwNCiAJaWYgKElTX0VSUihvYmop
KQ0KIAkJcmV0dXJuIG9iajsNCiANCi0JYXR0YWNoID0gZG1hX2J1Zl9keW5hbWljX2F0dGFjaChk
bWFfYnVmLCBkZXYtPmRldiwNCi0JCQkJCSZhbWRncHVfZG1hX2J1Zl9hdHRhY2hfb3BzLCBvYmop
Ow0KKwlhdHRhY2ggPSBkbWFfYnVmX2R5bmFtaWNfYXR0YWNoX3VubG9ja2VkKGRtYV9idWYsIGRl
di0+ZGV2LA0KKwkJCQkJCSAmYW1kZ3B1X2RtYV9idWZfYXR0YWNoX29wcywgb2JqKTsNCiAJaWYg
KElTX0VSUihhdHRhY2gpKSB7DQogCQlkcm1fZ2VtX29iamVjdF9wdXQob2JqKTsNCiAJCXJldHVy
biBFUlJfQ0FTVChhdHRhY2gpOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV90dG0uYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV90dG0u
Yw0KaW5kZXggYjFjNDU1MzI5MDIzLi5hYzFlMjkxMWI3MjcgMTAwNjQ0DQotLS0gYS9kcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdHRtLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV90dG0uYw0KQEAgLTg4NSw3ICs4ODUsNyBAQCBzdGF0aWMgaW50IGFt
ZGdwdV90dG1fYmFja2VuZF9iaW5kKHN0cnVjdCB0dG1fZGV2aWNlICpiZGV2LA0KIAkJCXN0cnVj
dCBzZ190YWJsZSAqc2d0Ow0KIA0KIAkJCWF0dGFjaCA9IGd0dC0+Z29iai0+aW1wb3J0X2F0dGFj
aDsNCi0JCQlzZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50KGF0dGFjaCwgRE1BX0JJRElSRUNU
SU9OQUwpOw0KKwkJCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnRfdW5sb2NrZWQoYXR0YWNo
LCBETUFfQklESVJFQ1RJT05BTCk7DQogCQkJaWYgKElTX0VSUihzZ3QpKQ0KIAkJCQlyZXR1cm4g
UFRSX0VSUihzZ3QpOw0KIA0KQEAgLTEwMTAsNyArMTAxMCw3IEBAIHN0YXRpYyB2b2lkIGFtZGdw
dV90dG1fYmFja2VuZF91bmJpbmQoc3RydWN0IHR0bV9kZXZpY2UgKmJkZXYsDQogCQlzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2g7DQogDQogCQlhdHRhY2ggPSBndHQtPmdvYmotPmlt
cG9ydF9hdHRhY2g7DQotCQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoYXR0YWNoLCB0dG0tPnNn
LCBETUFfQklESVJFQ1RJT05BTCk7DQorCQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnRfdW5sb2Nr
ZWQoYXR0YWNoLCB0dG0tPnNnLCBETUFfQklESVJFQ1RJT05BTCk7DQogCQl0dG0tPnNnID0gTlVM
TDsNCiAJfQ0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hcm1hZGEvYXJtYWRhX2dl
bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FybWFkYS9hcm1hZGFfZ2VtLmMNCmluZGV4IDU0MzAyNjVh
ZDQ1OC4uYTQ5OTI0NmVjMjhlIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2FybWFkYS9h
cm1hZGFfZ2VtLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9hcm1hZGEvYXJtYWRhX2dlbS5jDQpA
QCAtNjYsOCArNjYsOCBAQCB2b2lkIGFybWFkYV9nZW1fZnJlZV9vYmplY3Qoc3RydWN0IGRybV9n
ZW1fb2JqZWN0ICpvYmopDQogCWlmIChkb2JqLT5vYmouaW1wb3J0X2F0dGFjaCkgew0KIAkJLyog
V2Ugb25seSBldmVyIGRpc3BsYXkgaW1wb3J0ZWQgZGF0YSAqLw0KIAkJaWYgKGRvYmotPnNndCkN
Ci0JCQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoZG9iai0+b2JqLmltcG9ydF9hdHRhY2gsDQot
CQkJCQkJIGRvYmotPnNndCwgRE1BX1RPX0RFVklDRSk7DQorCQkJZG1hX2J1Zl91bm1hcF9hdHRh
Y2htZW50X3VubG9ja2VkKGRvYmotPm9iai5pbXBvcnRfYXR0YWNoLA0KKwkJCQkJCQkgIGRvYmot
PnNndCwgRE1BX1RPX0RFVklDRSk7DQogCQlkcm1fcHJpbWVfZ2VtX2Rlc3Ryb3koJmRvYmotPm9i
aiwgTlVMTCk7DQogCX0NCiANCkBAIC0zNjQsNyArMzY0LDcgQEAgaW50IGFybWFkYV9nZW1fcHdy
aXRlX2lvY3RsKHN0cnVjdCBkcm1fZGV2aWNlICpkZXYsIHZvaWQgKmRhdGEsDQogDQogCWlmIChh
cmdzLT5vZmZzZXQgPiBkb2JqLT5vYmouc2l6ZSB8fA0KIAkgICAgYXJncy0+c2l6ZSA+IGRvYmot
Pm9iai5zaXplIC0gYXJncy0+b2Zmc2V0KSB7DQotCQlEUk1fRVJST1IoImludmFsaWQgc2l6ZTog
b2JqZWN0IHNpemUgJXVcbiIsIGRvYmotPm9iai5zaXplKTsNCisJCURSTV9FUlJPUigiaW52YWxp
ZCBzaXplOiBvYmplY3Qgc2l6ZSAlenVcbiIsIGRvYmotPm9iai5zaXplKTsNCiAJCXJldCA9IC1F
SU5WQUw7DQogCQlnb3RvIHVucmVmOw0KIAl9DQpAQCAtNTE0LDEzICs1MTQsMTMgQEAgYXJtYWRh
X2dlbV9wcmltZV9pbXBvcnQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwgc3RydWN0IGRtYV9idWYg
KmJ1ZikNCiAJCX0NCiAJfQ0KIA0KLQlhdHRhY2ggPSBkbWFfYnVmX2F0dGFjaChidWYsIGRldi0+
ZGV2KTsNCisJYXR0YWNoID0gZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQoYnVmLCBkZXYtPmRldik7
DQogCWlmIChJU19FUlIoYXR0YWNoKSkNCiAJCXJldHVybiBFUlJfQ0FTVChhdHRhY2gpOw0KIA0K
IAlkb2JqID0gYXJtYWRhX2dlbV9hbGxvY19wcml2YXRlX29iamVjdChkZXYsIGJ1Zi0+c2l6ZSk7
DQogCWlmICghZG9iaikgew0KLQkJZG1hX2J1Zl9kZXRhY2goYnVmLCBhdHRhY2gpOw0KKwkJZG1h
X2J1Zl9kZXRhY2hfdW5sb2NrZWQoYnVmLCBhdHRhY2gpOw0KIAkJcmV0dXJuIEVSUl9QVFIoLUVO
T01FTSk7DQogCX0NCiANCkBAIC01MzksOCArNTM5LDggQEAgaW50IGFybWFkYV9nZW1fbWFwX2lt
cG9ydChzdHJ1Y3QgYXJtYWRhX2dlbV9vYmplY3QgKmRvYmopDQogew0KIAlpbnQgcmV0Ow0KIA0K
LQlkb2JqLT5zZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50KGRvYmotPm9iai5pbXBvcnRfYXR0
YWNoLA0KLQkJCQkJICAgRE1BX1RPX0RFVklDRSk7DQorCWRvYmotPnNndCA9IGRtYV9idWZfbWFw
X2F0dGFjaG1lbnRfdW5sb2NrZWQoZG9iai0+b2JqLmltcG9ydF9hdHRhY2gsDQorCQkJCQkJICAg
IERNQV9UT19ERVZJQ0UpOw0KIAlpZiAoSVNfRVJSKGRvYmotPnNndCkpIHsNCiAJCXJldCA9IFBU
Ul9FUlIoZG9iai0+c2d0KTsNCiAJCWRvYmotPnNndCA9IE5VTEw7DQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9ncHUvZHJtL2RybV9nZW1fZG1hX2hlbHBlci5jIGIvZHJpdmVycy9ncHUvZHJtL2RybV9n
ZW1fZG1hX2hlbHBlci5jDQppbmRleCBmNjkwMWZmOTdiYmIuLjFlNjU4YzQ0ODM2NiAxMDA2NDQN
Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX2RtYV9oZWxwZXIuYw0KKysrIGIvZHJpdmVy
cy9ncHUvZHJtL2RybV9nZW1fZG1hX2hlbHBlci5jDQpAQCAtMjMwLDcgKzIzMCw3IEBAIHZvaWQg
ZHJtX2dlbV9kbWFfZnJlZShzdHJ1Y3QgZHJtX2dlbV9kbWFfb2JqZWN0ICpkbWFfb2JqKQ0KIA0K
IAlpZiAoZ2VtX29iai0+aW1wb3J0X2F0dGFjaCkgew0KIAkJaWYgKGRtYV9vYmotPnZhZGRyKQ0K
LQkJCWRtYV9idWZfdnVubWFwKGdlbV9vYmotPmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgJm1hcCk7
DQorCQkJZG1hX2J1Zl92dW5tYXBfdW5sb2NrZWQoZ2VtX29iai0+aW1wb3J0X2F0dGFjaC0+ZG1h
YnVmLCAmbWFwKTsNCiAJCWRybV9wcmltZV9nZW1fZGVzdHJveShnZW1fb2JqLCBkbWFfb2JqLT5z
Z3QpOw0KIAl9IGVsc2UgaWYgKGRtYV9vYmotPnZhZGRyKSB7DQogCQlpZiAoZG1hX29iai0+bWFw
X25vbmNvaGVyZW50KQ0KQEAgLTU4MSw3ICs1ODEsNyBAQCBkcm1fZ2VtX2RtYV9wcmltZV9pbXBv
cnRfc2dfdGFibGVfdm1hcChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LA0KIAlzdHJ1Y3QgaW9zeXNf
bWFwIG1hcDsNCiAJaW50IHJldDsNCiANCi0JcmV0ID0gZG1hX2J1Zl92bWFwKGF0dGFjaC0+ZG1h
YnVmLCAmbWFwKTsNCisJcmV0ID0gZG1hX2J1Zl92bWFwX3VubG9ja2VkKGF0dGFjaC0+ZG1hYnVm
LCAmbWFwKTsNCiAJaWYgKHJldCkgew0KIAkJRFJNX0VSUk9SKCJGYWlsZWQgdG8gdm1hcCBQUklN
RSBidWZmZXJcbiIpOw0KIAkJcmV0dXJuIEVSUl9QVFIocmV0KTsNCkBAIC01ODksNyArNTg5LDcg
QEAgZHJtX2dlbV9kbWFfcHJpbWVfaW1wb3J0X3NnX3RhYmxlX3ZtYXAoc3RydWN0IGRybV9kZXZp
Y2UgKmRldiwNCiANCiAJb2JqID0gZHJtX2dlbV9kbWFfcHJpbWVfaW1wb3J0X3NnX3RhYmxlKGRl
diwgYXR0YWNoLCBzZ3QpOw0KIAlpZiAoSVNfRVJSKG9iaikpIHsNCi0JCWRtYV9idWZfdnVubWFw
KGF0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCisJCWRtYV9idWZfdnVubWFwX3VubG9ja2VkKGF0dGFj
aC0+ZG1hYnVmLCAmbWFwKTsNCiAJCXJldHVybiBvYmo7DQogCX0NCiANCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuYyBiL2RyaXZlcnMvZ3B1L2RybS9k
cm1fZ2VtX3NobWVtX2hlbHBlci5jDQppbmRleCAzNTEzOGY4YTM3NWMuLjVmNTcyNzE2MzA2ZCAx
MDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtX3NobWVtX2hlbHBlci5jDQorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vZHJtX2dlbV9zaG1lbV9oZWxwZXIuYw0KQEAgLTI5OSwxMCArMjk5
LDEwIEBAIHN0YXRpYyBpbnQgZHJtX2dlbV9zaG1lbV92bWFwX2xvY2tlZChzdHJ1Y3QgZHJtX2dl
bV9zaG1lbV9vYmplY3QgKnNobWVtLA0KIAl9DQogDQogCWlmIChvYmotPmltcG9ydF9hdHRhY2gp
IHsNCi0JCXJldCA9IGRtYV9idWZfdm1hcChvYmotPmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgbWFw
KTsNCisJCXJldCA9IGRtYV9idWZfdm1hcF91bmxvY2tlZChvYmotPmltcG9ydF9hdHRhY2gtPmRt
YWJ1ZiwgbWFwKTsNCiAJCWlmICghcmV0KSB7DQogCQkJaWYgKFdBUk5fT04obWFwLT5pc19pb21l
bSkpIHsNCi0JCQkJZG1hX2J1Zl92dW5tYXAob2JqLT5pbXBvcnRfYXR0YWNoLT5kbWFidWYsIG1h
cCk7DQorCQkJCWRtYV9idWZfdnVubWFwX3VubG9ja2VkKG9iai0+aW1wb3J0X2F0dGFjaC0+ZG1h
YnVmLCBtYXApOw0KIAkJCQlyZXQgPSAtRUlPOw0KIAkJCQlnb3RvIGVycl9wdXRfcGFnZXM7DQog
CQkJfQ0KQEAgLTM4Myw3ICszODMsNyBAQCBzdGF0aWMgdm9pZCBkcm1fZ2VtX3NobWVtX3Z1bm1h
cF9sb2NrZWQoc3RydWN0IGRybV9nZW1fc2htZW1fb2JqZWN0ICpzaG1lbSwNCiAJCXJldHVybjsN
CiANCiAJaWYgKG9iai0+aW1wb3J0X2F0dGFjaCkgew0KLQkJZG1hX2J1Zl92dW5tYXAob2JqLT5p
bXBvcnRfYXR0YWNoLT5kbWFidWYsIG1hcCk7DQorCQlkbWFfYnVmX3Z1bm1hcF91bmxvY2tlZChv
YmotPmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgbWFwKTsNCiAJfSBlbHNlIHsNCiAJCXZ1bm1hcChz
aG1lbS0+dmFkZHIpOw0KIAkJZHJtX2dlbV9zaG1lbV9wdXRfcGFnZXMoc2htZW0pOw0KQEAgLTYx
OCw3ICs2MTgsNyBAQCBpbnQgZHJtX2dlbV9zaG1lbV9tbWFwKHN0cnVjdCBkcm1fZ2VtX3NobWVt
X29iamVjdCAqc2htZW0sIHN0cnVjdCB2bV9hcmVhX3N0cnVjdA0KIAkJZHJtX2dlbV9vYmplY3Rf
cHV0KG9iaik7DQogCQl2bWEtPnZtX3ByaXZhdGVfZGF0YSA9IE5VTEw7DQogDQotCQlyZXR1cm4g
ZG1hX2J1Zl9tbWFwKG9iai0+ZG1hX2J1Ziwgdm1hLCAwKTsNCisJCXJldHVybiBkbWFfYnVmX21t
YXBfdW5sb2NrZWQob2JqLT5kbWFfYnVmLCB2bWEsIDApOw0KIAl9DQogDQogCXJldCA9IGRybV9n
ZW1fc2htZW1fZ2V0X3BhZ2VzKHNobWVtKTsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
ZHJtX3ByaW1lLmMgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW1lLmMNCmluZGV4IGViMDllODYw
NDRjNi4uZTliN2QzZmE2N2YxIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL2RybV9wcmlt
ZS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vZHJtX3ByaW1lLmMNCkBAIC05MzQsMTMgKzkzNCwx
MyBAQCBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmRybV9nZW1fcHJpbWVfaW1wb3J0X2RldihzdHJ1
Y3QgZHJtX2RldmljZSAqZGV2LA0KIAlpZiAoIWRldi0+ZHJpdmVyLT5nZW1fcHJpbWVfaW1wb3J0
X3NnX3RhYmxlKQ0KIAkJcmV0dXJuIEVSUl9QVFIoLUVJTlZBTCk7DQogDQotCWF0dGFjaCA9IGRt
YV9idWZfYXR0YWNoKGRtYV9idWYsIGF0dGFjaF9kZXYpOw0KKwlhdHRhY2ggPSBkbWFfYnVmX2F0
dGFjaF91bmxvY2tlZChkbWFfYnVmLCBhdHRhY2hfZGV2KTsNCiAJaWYgKElTX0VSUihhdHRhY2gp
KQ0KIAkJcmV0dXJuIEVSUl9DQVNUKGF0dGFjaCk7DQogDQogCWdldF9kbWFfYnVmKGRtYV9idWYp
Ow0KIA0KLQlzZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50KGF0dGFjaCwgRE1BX0JJRElSRUNU
SU9OQUwpOw0KKwlzZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50X3VubG9ja2VkKGF0dGFjaCwg
RE1BX0JJRElSRUNUSU9OQUwpOw0KIAlpZiAoSVNfRVJSKHNndCkpIHsNCiAJCXJldCA9IFBUUl9F
UlIoc2d0KTsNCiAJCWdvdG8gZmFpbF9kZXRhY2g7DQpAQCAtOTU4LDkgKzk1OCw5IEBAIHN0cnVj
dCBkcm1fZ2VtX29iamVjdCAqZHJtX2dlbV9wcmltZV9pbXBvcnRfZGV2KHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsDQogCXJldHVybiBvYmo7DQogDQogZmFpbF91bm1hcDoNCi0JZG1hX2J1Zl91bm1h
cF9hdHRhY2htZW50KGF0dGFjaCwgc2d0LCBETUFfQklESVJFQ1RJT05BTCk7DQorCWRtYV9idWZf
dW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChhdHRhY2gsIHNndCwgRE1BX0JJRElSRUNUSU9OQUwp
Ow0KIGZhaWxfZGV0YWNoOg0KLQlkbWFfYnVmX2RldGFjaChkbWFfYnVmLCBhdHRhY2gpOw0KKwlk
bWFfYnVmX2RldGFjaF91bmxvY2tlZChkbWFfYnVmLCBhdHRhY2gpOw0KIAlkbWFfYnVmX3B1dChk
bWFfYnVmKTsNCiANCiAJcmV0dXJuIEVSUl9QVFIocmV0KTsNCkBAIC0xMDU2LDkgKzEwNTYsOSBA
QCB2b2lkIGRybV9wcmltZV9nZW1fZGVzdHJveShzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaiwg
c3RydWN0IHNnX3RhYmxlICpzZykNCiANCiAJYXR0YWNoID0gb2JqLT5pbXBvcnRfYXR0YWNoOw0K
IAlpZiAoc2cpDQotCQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoYXR0YWNoLCBzZywgRE1BX0JJ
RElSRUNUSU9OQUwpOw0KKwkJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkKGF0dGFj
aCwgc2csIERNQV9CSURJUkVDVElPTkFMKTsNCiAJZG1hX2J1ZiA9IGF0dGFjaC0+ZG1hYnVmOw0K
LQlkbWFfYnVmX2RldGFjaChhdHRhY2gtPmRtYWJ1ZiwgYXR0YWNoKTsNCisJZG1hX2J1Zl9kZXRh
Y2hfdW5sb2NrZWQoYXR0YWNoLT5kbWFidWYsIGF0dGFjaCk7DQogCS8qIHJlbW92ZSB0aGUgcmVm
ZXJlbmNlICovDQogCWRtYV9idWZfcHV0KGRtYV9idWYpOw0KIH0NCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9wcmltZS5jIGIvZHJpdmVycy9ncHUvZHJt
L2V0bmF2aXYvZXRuYXZpdl9nZW1fcHJpbWUuYw0KaW5kZXggM2ZhMmRhMTQ5NjM5Li5hZTZjMWVk
YTBhNzIgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9w
cmltZS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vZXRuYXZpdi9ldG5hdml2X2dlbV9wcmltZS5j
DQpAQCAtNjUsNyArNjUsNyBAQCBzdGF0aWMgdm9pZCBldG5hdml2X2dlbV9wcmltZV9yZWxlYXNl
KHN0cnVjdCBldG5hdml2X2dlbV9vYmplY3QgKmV0bmF2aXZfb2JqKQ0KIAlzdHJ1Y3QgaW9zeXNf
bWFwIG1hcCA9IElPU1lTX01BUF9JTklUX1ZBRERSKGV0bmF2aXZfb2JqLT52YWRkcik7DQogDQog
CWlmIChldG5hdml2X29iai0+dmFkZHIpDQotCQlkbWFfYnVmX3Z1bm1hcChldG5hdml2X29iai0+
YmFzZS5pbXBvcnRfYXR0YWNoLT5kbWFidWYsICZtYXApOw0KKwkJZG1hX2J1Zl92dW5tYXBfdW5s
b2NrZWQoZXRuYXZpdl9vYmotPmJhc2UuaW1wb3J0X2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCiAN
CiAJLyogRG9uJ3QgZHJvcCB0aGUgcGFnZXMgZm9yIGltcG9ydGVkIGRtYWJ1ZiwgYXMgdGhleSBh
cmUgbm90DQogCSAqIG91cnMsIGp1c3QgZnJlZSB0aGUgYXJyYXkgd2UgYWxsb2NhdGVkOg0KQEAg
LTgyLDcgKzgyLDcgQEAgc3RhdGljIHZvaWQgKmV0bmF2aXZfZ2VtX3ByaW1lX3ZtYXBfaW1wbChz
dHJ1Y3QgZXRuYXZpdl9nZW1fb2JqZWN0ICpldG5hdml2X29iaikNCiANCiAJbG9ja2RlcF9hc3Nl
cnRfaGVsZCgmZXRuYXZpdl9vYmotPmxvY2spOw0KIA0KLQlyZXQgPSBkbWFfYnVmX3ZtYXAoZXRu
YXZpdl9vYmotPmJhc2UuaW1wb3J0X2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCisJcmV0ID0gZG1h
X2J1Zl92bWFwX3VubG9ja2VkKGV0bmF2aXZfb2JqLT5iYXNlLmltcG9ydF9hdHRhY2gtPmRtYWJ1
ZiwgJm1hcCk7DQogCWlmIChyZXQpDQogCQlyZXR1cm4gTlVMTDsNCiAJcmV0dXJuIG1hcC52YWRk
cjsNCkBAIC05MSw3ICs5MSw3IEBAIHN0YXRpYyB2b2lkICpldG5hdml2X2dlbV9wcmltZV92bWFw
X2ltcGwoc3RydWN0IGV0bmF2aXZfZ2VtX29iamVjdCAqZXRuYXZpdl9vYmopDQogc3RhdGljIGlu
dCBldG5hdml2X2dlbV9wcmltZV9tbWFwX29iaihzdHJ1Y3QgZXRuYXZpdl9nZW1fb2JqZWN0ICpl
dG5hdml2X29iaiwNCiAJCXN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hKQ0KIHsNCi0JcmV0dXJu
IGRtYV9idWZfbW1hcChldG5hdml2X29iai0+YmFzZS5kbWFfYnVmLCB2bWEsIDApOw0KKwlyZXR1
cm4gZG1hX2J1Zl9tbWFwX3VubG9ja2VkKGV0bmF2aXZfb2JqLT5iYXNlLmRtYV9idWYsIHZtYSwg
MCk7DQogfQ0KIA0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZXRuYXZpdl9nZW1fb3BzIGV0bmF2aXZf
Z2VtX3ByaW1lX29wcyA9IHsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4
eW5vc19kcm1fZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vZXh5bm9zL2V4eW5vc19kcm1fZ2VtLmMN
CmluZGV4IDNlNDkzZjQ4ZTBkNC4uOGU5NWEzYzVjYWY4IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9n
cHUvZHJtL2V4eW5vcy9leHlub3NfZHJtX2dlbS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vZXh5
bm9zL2V4eW5vc19kcm1fZ2VtLmMNCkBAIC0zNjYsNyArMzY2LDcgQEAgc3RhdGljIGludCBleHlu
b3NfZHJtX2dlbV9tbWFwKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLCBzdHJ1Y3Qgdm1fYXJl
YV9zdHJ1Y3QNCiAJaW50IHJldDsNCiANCiAJaWYgKG9iai0+aW1wb3J0X2F0dGFjaCkNCi0JCXJl
dHVybiBkbWFfYnVmX21tYXAob2JqLT5kbWFfYnVmLCB2bWEsIDApOw0KKwkJcmV0dXJuIGRtYV9i
dWZfbW1hcF91bmxvY2tlZChvYmotPmRtYV9idWYsIHZtYSwgMCk7DQogDQogCXZtYS0+dm1fZmxh
Z3MgfD0gVk1fSU8gfCBWTV9ET05URVhQQU5EIHwgVk1fRE9OVERVTVA7DQogDQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jIGIvZHJpdmVycy9n
cHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jDQppbmRleCBmNTA2MmQwYzYzMzMuLjVl
Y2VhN2RmOThiMSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dl
bV9kbWFidWYuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1
Zi5jDQpAQCAtMjQxLDggKzI0MSw4IEBAIHN0YXRpYyBpbnQgaTkxNV9nZW1fb2JqZWN0X2dldF9w
YWdlc19kbWFidWYoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9iaikNCiANCiAJYXNzZXJ0
X29iamVjdF9oZWxkKG9iaik7DQogDQotCXBhZ2VzID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudChv
YmotPmJhc2UuaW1wb3J0X2F0dGFjaCwNCi0JCQkJICAgICAgIERNQV9CSURJUkVDVElPTkFMKTsN
CisJcGFnZXMgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50X3VubG9ja2VkKG9iai0+YmFzZS5pbXBv
cnRfYXR0YWNoLA0KKwkJCQkJCURNQV9CSURJUkVDVElPTkFMKTsNCiAJaWYgKElTX0VSUihwYWdl
cykpDQogCQlyZXR1cm4gUFRSX0VSUihwYWdlcyk7DQogDQpAQCAtMjcwLDggKzI3MCw4IEBAIHN0
YXRpYyBpbnQgaTkxNV9nZW1fb2JqZWN0X2dldF9wYWdlc19kbWFidWYoc3RydWN0IGRybV9pOTE1
X2dlbV9vYmplY3QgKm9iaikNCiBzdGF0aWMgdm9pZCBpOTE1X2dlbV9vYmplY3RfcHV0X3BhZ2Vz
X2RtYWJ1ZihzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLA0KIAkJCQkJICAgICBzdHJ1
Y3Qgc2dfdGFibGUgKnBhZ2VzKQ0KIHsNCi0JZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KG9iai0+
YmFzZS5pbXBvcnRfYXR0YWNoLCBwYWdlcywNCi0JCQkJIERNQV9CSURJUkVDVElPTkFMKTsNCisJ
ZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkKG9iai0+YmFzZS5pbXBvcnRfYXR0YWNo
LCBwYWdlcywNCisJCQkJCSAgRE1BX0JJRElSRUNUSU9OQUwpOw0KIH0NCiANCiBzdGF0aWMgY29u
c3Qgc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Rfb3BzIGk5MTVfZ2VtX29iamVjdF9kbWFidWZf
b3BzID0gew0KQEAgLTMwNiw3ICszMDYsNyBAQCBzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKmk5MTVf
Z2VtX3ByaW1lX2ltcG9ydChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2LA0KIAkJcmV0dXJuIEVSUl9Q
VFIoLUUyQklHKTsNCiANCiAJLyogbmVlZCB0byBhdHRhY2ggKi8NCi0JYXR0YWNoID0gZG1hX2J1
Zl9hdHRhY2goZG1hX2J1ZiwgZGV2LT5kZXYpOw0KKwlhdHRhY2ggPSBkbWFfYnVmX2F0dGFjaF91
bmxvY2tlZChkbWFfYnVmLCBkZXYtPmRldik7DQogCWlmIChJU19FUlIoYXR0YWNoKSkNCiAJCXJl
dHVybiBFUlJfQ0FTVChhdHRhY2gpOw0KIA0KQEAgLTMzNyw3ICszMzcsNyBAQCBzdHJ1Y3QgZHJt
X2dlbV9vYmplY3QgKmk5MTVfZ2VtX3ByaW1lX2ltcG9ydChzdHJ1Y3QgZHJtX2RldmljZSAqZGV2
LA0KIAlyZXR1cm4gJm9iai0+YmFzZTsNCiANCiBmYWlsX2RldGFjaDoNCi0JZG1hX2J1Zl9kZXRh
Y2goZG1hX2J1ZiwgYXR0YWNoKTsNCisJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoZG1hX2J1Ziwg
YXR0YWNoKTsNCiAJZG1hX2J1Zl9wdXQoZG1hX2J1Zik7DQogDQogCXJldHVybiBFUlJfUFRSKHJl
dCk7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1
X2dlbV9kbWFidWYuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxmdGVzdHMvaTkxNV9n
ZW1fZG1hYnVmLmMNCmluZGV4IDYyYzYxYWY3N2E0Mi4uNjA1M2FmOTIwYTIyIDEwMDY0NA0KLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFidWYuYw0K
KysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9pOTE1X2dlbV9kbWFidWYu
Yw0KQEAgLTIwNywxMyArMjA3LDEzIEBAIHN0YXRpYyBpbnQgaWd0X2RtYWJ1Zl9pbXBvcnRfc2Ft
ZV9kcml2ZXIoc3RydWN0IGRybV9pOTE1X3ByaXZhdGUgKmk5MTUsDQogCWk5MTVfZ2VtX29iamVj
dF91bmxvY2soaW1wb3J0X29iaik7DQogDQogCS8qIE5vdyB0cnkgYSBmYWtlIGFuIGltcG9ydGVy
ICovDQotCWltcG9ydF9hdHRhY2ggPSBkbWFfYnVmX2F0dGFjaChkbWFidWYsIG9iai0+YmFzZS5k
ZXYtPmRldik7DQorCWltcG9ydF9hdHRhY2ggPSBkbWFfYnVmX2F0dGFjaF91bmxvY2tlZChkbWFi
dWYsIG9iai0+YmFzZS5kZXYtPmRldik7DQogCWlmIChJU19FUlIoaW1wb3J0X2F0dGFjaCkpIHsN
CiAJCWVyciA9IFBUUl9FUlIoaW1wb3J0X2F0dGFjaCk7DQogCQlnb3RvIG91dF9pbXBvcnQ7DQog
CX0NCiANCi0Jc3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50KGltcG9ydF9hdHRhY2gsIERNQV9C
SURJUkVDVElPTkFMKTsNCisJc3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50X3VubG9ja2VkKGlt
cG9ydF9hdHRhY2gsIERNQV9CSURJUkVDVElPTkFMKTsNCiAJaWYgKElTX0VSUihzdCkpIHsNCiAJ
CWVyciA9IFBUUl9FUlIoc3QpOw0KIAkJZ290byBvdXRfZGV0YWNoOw0KQEAgLTIyNiw5ICsyMjYs
OSBAQCBzdGF0aWMgaW50IGlndF9kbWFidWZfaW1wb3J0X3NhbWVfZHJpdmVyKHN0cnVjdCBkcm1f
aTkxNV9wcml2YXRlICppOTE1LA0KIAkJdGltZW91dCA9IC1FVElNRTsNCiAJfQ0KIAllcnIgPSB0
aW1lb3V0ID4gMCA/IDAgOiB0aW1lb3V0Ow0KLQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoaW1w
b3J0X2F0dGFjaCwgc3QsIERNQV9CSURJUkVDVElPTkFMKTsNCisJZG1hX2J1Zl91bm1hcF9hdHRh
Y2htZW50X3VubG9ja2VkKGltcG9ydF9hdHRhY2gsIHN0LCBETUFfQklESVJFQ1RJT05BTCk7DQog
b3V0X2RldGFjaDoNCi0JZG1hX2J1Zl9kZXRhY2goZG1hYnVmLCBpbXBvcnRfYXR0YWNoKTsNCisJ
ZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoZG1hYnVmLCBpbXBvcnRfYXR0YWNoKTsNCiBvdXRfaW1w
b3J0Og0KIAlpOTE1X2dlbV9vYmplY3RfcHV0KGltcG9ydF9vYmopOw0KIG91dF9kbWFidWY6DQpA
QCAtMjk2LDcgKzI5Niw3IEBAIHN0YXRpYyBpbnQgaWd0X2RtYWJ1Zl9pbXBvcnQodm9pZCAqYXJn
KQ0KIAkJZ290byBvdXRfb2JqOw0KIAl9DQogDQotCWVyciA9IGRtYV9idWZfdm1hcChkbWFidWYs
ICZtYXApOw0KKwllcnIgPSBkbWFfYnVmX3ZtYXBfdW5sb2NrZWQoZG1hYnVmLCAmbWFwKTsNCiAJ
ZG1hX21hcCA9IGVyciA/IE5VTEwgOiBtYXAudmFkZHI7DQogCWlmICghZG1hX21hcCkgew0KIAkJ
cHJfZXJyKCJkbWFfYnVmX3ZtYXAgZmFpbGVkXG4iKTsNCkBAIC0zMzcsNyArMzM3LDcgQEAgc3Rh
dGljIGludCBpZ3RfZG1hYnVmX2ltcG9ydCh2b2lkICphcmcpDQogDQogCWVyciA9IDA7DQogb3V0
X2RtYV9tYXA6DQotCWRtYV9idWZfdnVubWFwKGRtYWJ1ZiwgJm1hcCk7DQorCWRtYV9idWZfdnVu
bWFwX3VubG9ja2VkKGRtYWJ1ZiwgJm1hcCk7DQogb3V0X29iajoNCiAJaTkxNV9nZW1fb2JqZWN0
X3B1dChvYmopOw0KIG91dF9kbWFidWY6DQpAQCAtMzU4LDcgKzM1OCw3IEBAIHN0YXRpYyBpbnQg
aWd0X2RtYWJ1Zl9pbXBvcnRfb3duZXJzaGlwKHZvaWQgKmFyZykNCiAJaWYgKElTX0VSUihkbWFi
dWYpKQ0KIAkJcmV0dXJuIFBUUl9FUlIoZG1hYnVmKTsNCiANCi0JZXJyID0gZG1hX2J1Zl92bWFw
KGRtYWJ1ZiwgJm1hcCk7DQorCWVyciA9IGRtYV9idWZfdm1hcF91bmxvY2tlZChkbWFidWYsICZt
YXApOw0KIAlwdHIgPSBlcnIgPyBOVUxMIDogbWFwLnZhZGRyOw0KIAlpZiAoIXB0cikgew0KIAkJ
cHJfZXJyKCJkbWFfYnVmX3ZtYXAgZmFpbGVkXG4iKTsNCkBAIC0zNjcsNyArMzY3LDcgQEAgc3Rh
dGljIGludCBpZ3RfZG1hYnVmX2ltcG9ydF9vd25lcnNoaXAodm9pZCAqYXJnKQ0KIAl9DQogDQog
CW1lbXNldChwdHIsIDB4YzUsIFBBR0VfU0laRSk7DQotCWRtYV9idWZfdnVubWFwKGRtYWJ1Ziwg
Jm1hcCk7DQorCWRtYV9idWZfdnVubWFwX3VubG9ja2VkKGRtYWJ1ZiwgJm1hcCk7DQogDQogCW9i
aiA9IHRvX2ludGVsX2JvKGk5MTVfZ2VtX3ByaW1lX2ltcG9ydCgmaTkxNS0+ZHJtLCBkbWFidWYp
KTsNCiAJaWYgKElTX0VSUihvYmopKSB7DQpAQCAtNDE4LDcgKzQxOCw3IEBAIHN0YXRpYyBpbnQg
aWd0X2RtYWJ1Zl9leHBvcnRfdm1hcCh2b2lkICphcmcpDQogCX0NCiAJaTkxNV9nZW1fb2JqZWN0
X3B1dChvYmopOw0KIA0KLQllcnIgPSBkbWFfYnVmX3ZtYXAoZG1hYnVmLCAmbWFwKTsNCisJZXJy
ID0gZG1hX2J1Zl92bWFwX3VubG9ja2VkKGRtYWJ1ZiwgJm1hcCk7DQogCXB0ciA9IGVyciA/IE5V
TEwgOiBtYXAudmFkZHI7DQogCWlmICghcHRyKSB7DQogCQlwcl9lcnIoImRtYV9idWZfdm1hcCBm
YWlsZWRcbiIpOw0KQEAgLTQzNSw3ICs0MzUsNyBAQCBzdGF0aWMgaW50IGlndF9kbWFidWZfZXhw
b3J0X3ZtYXAodm9pZCAqYXJnKQ0KIAltZW1zZXQocHRyLCAweGM1LCBkbWFidWYtPnNpemUpOw0K
IA0KIAllcnIgPSAwOw0KLQlkbWFfYnVmX3Z1bm1hcChkbWFidWYsICZtYXApOw0KKwlkbWFfYnVm
X3Z1bm1hcF91bmxvY2tlZChkbWFidWYsICZtYXApOw0KIG91dDoNCiAJZG1hX2J1Zl9wdXQoZG1h
YnVmKTsNCiAJcmV0dXJuIGVycjsNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vb21hcGRy
bS9vbWFwX2dlbV9kbWFidWYuYyBiL2RyaXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfZ2VtX2Rt
YWJ1Zi5jDQppbmRleCAzOTNmODJlMjY5MjcuLmE3MjVhOTFjMmZmOSAxMDA2NDQNCi0tLSBhL2Ry
aXZlcnMvZ3B1L2RybS9vbWFwZHJtL29tYXBfZ2VtX2RtYWJ1Zi5jDQorKysgYi9kcml2ZXJzL2dw
dS9kcm0vb21hcGRybS9vbWFwX2dlbV9kbWFidWYuYw0KQEAgLTExOSwxMyArMTE5LDEzIEBAIHN0
cnVjdCBkcm1fZ2VtX29iamVjdCAqb21hcF9nZW1fcHJpbWVfaW1wb3J0KHN0cnVjdCBkcm1fZGV2
aWNlICpkZXYsDQogCQl9DQogCX0NCiANCi0JYXR0YWNoID0gZG1hX2J1Zl9hdHRhY2goZG1hX2J1
ZiwgZGV2LT5kZXYpOw0KKwlhdHRhY2ggPSBkbWFfYnVmX2F0dGFjaF91bmxvY2tlZChkbWFfYnVm
LCBkZXYtPmRldik7DQogCWlmIChJU19FUlIoYXR0YWNoKSkNCiAJCXJldHVybiBFUlJfQ0FTVChh
dHRhY2gpOw0KIA0KIAlnZXRfZG1hX2J1ZihkbWFfYnVmKTsNCiANCi0Jc2d0ID0gZG1hX2J1Zl9t
YXBfYXR0YWNobWVudChhdHRhY2gsIERNQV9UT19ERVZJQ0UpOw0KKwlzZ3QgPSBkbWFfYnVmX21h
cF9hdHRhY2htZW50X3VubG9ja2VkKGF0dGFjaCwgRE1BX1RPX0RFVklDRSk7DQogCWlmIChJU19F
UlIoc2d0KSkgew0KIAkJcmV0ID0gUFRSX0VSUihzZ3QpOw0KIAkJZ290byBmYWlsX2RldGFjaDsN
CkBAIC0xNDIsOSArMTQyLDkgQEAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvbWFwX2dlbV9wcmlt
ZV9pbXBvcnQoc3RydWN0IGRybV9kZXZpY2UgKmRldiwNCiAJcmV0dXJuIG9iajsNCiANCiBmYWls
X3VubWFwOg0KLQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoYXR0YWNoLCBzZ3QsIERNQV9UT19E
RVZJQ0UpOw0KKwlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnRfdW5sb2NrZWQoYXR0YWNoLCBzZ3Qs
IERNQV9UT19ERVZJQ0UpOw0KIGZhaWxfZGV0YWNoOg0KLQlkbWFfYnVmX2RldGFjaChkbWFfYnVm
LCBhdHRhY2gpOw0KKwlkbWFfYnVmX2RldGFjaF91bmxvY2tlZChkbWFfYnVmLCBhdHRhY2gpOw0K
IAlkbWFfYnVmX3B1dChkbWFfYnVmKTsNCiANCiAJcmV0dXJuIEVSUl9QVFIocmV0KTsNCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdGVncmEvZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vdGVn
cmEvZ2VtLmMNCmluZGV4IDgxOTkxMDkwYWRjYy4uYmJmZTE5NmZmNmY2IDEwMDY0NA0KLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2dlbS5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0vdGVncmEv
Z2VtLmMNCkBAIC03OCwxNSArNzgsMTUgQEAgc3RhdGljIHN0cnVjdCBob3N0MXhfYm9fbWFwcGlu
ZyAqdGVncmFfYm9fcGluKHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGhvc3QxeF8NCiAJaWYg
KGdlbS0+aW1wb3J0X2F0dGFjaCkgew0KIAkJc3RydWN0IGRtYV9idWYgKmJ1ZiA9IGdlbS0+aW1w
b3J0X2F0dGFjaC0+ZG1hYnVmOw0KIA0KLQkJbWFwLT5hdHRhY2ggPSBkbWFfYnVmX2F0dGFjaChi
dWYsIGRldik7DQorCQltYXAtPmF0dGFjaCA9IGRtYV9idWZfYXR0YWNoX3VubG9ja2VkKGJ1Ziwg
ZGV2KTsNCiAJCWlmIChJU19FUlIobWFwLT5hdHRhY2gpKSB7DQogCQkJZXJyID0gUFRSX0VSUiht
YXAtPmF0dGFjaCk7DQogCQkJZ290byBmcmVlOw0KIAkJfQ0KIA0KLQkJbWFwLT5zZ3QgPSBkbWFf
YnVmX21hcF9hdHRhY2htZW50KG1hcC0+YXR0YWNoLCBkaXJlY3Rpb24pOw0KKwkJbWFwLT5zZ3Qg
PSBkbWFfYnVmX21hcF9hdHRhY2htZW50X3VubG9ja2VkKG1hcC0+YXR0YWNoLCBkaXJlY3Rpb24p
Ow0KIAkJaWYgKElTX0VSUihtYXAtPnNndCkpIHsNCi0JCQlkbWFfYnVmX2RldGFjaChidWYsIG1h
cC0+YXR0YWNoKTsNCisJCQlkbWFfYnVmX2RldGFjaF91bmxvY2tlZChidWYsIG1hcC0+YXR0YWNo
KTsNCiAJCQllcnIgPSBQVFJfRVJSKG1hcC0+c2d0KTsNCiAJCQltYXAtPnNndCA9IE5VTEw7DQog
CQkJZ290byBmcmVlOw0KQEAgLTE2MCw4ICsxNjAsOSBAQCBzdGF0aWMgc3RydWN0IGhvc3QxeF9i
b19tYXBwaW5nICp0ZWdyYV9ib19waW4oc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgaG9zdDF4
Xw0KIHN0YXRpYyB2b2lkIHRlZ3JhX2JvX3VucGluKHN0cnVjdCBob3N0MXhfYm9fbWFwcGluZyAq
bWFwKQ0KIHsNCiAJaWYgKG1hcC0+YXR0YWNoKSB7DQotCQlkbWFfYnVmX3VubWFwX2F0dGFjaG1l
bnQobWFwLT5hdHRhY2gsIG1hcC0+c2d0LCBtYXAtPmRpcmVjdGlvbik7DQotCQlkbWFfYnVmX2Rl
dGFjaChtYXAtPmF0dGFjaC0+ZG1hYnVmLCBtYXAtPmF0dGFjaCk7DQorCQlkbWFfYnVmX3VubWFw
X2F0dGFjaG1lbnRfdW5sb2NrZWQobWFwLT5hdHRhY2gsIG1hcC0+c2d0LA0KKwkJCQkJCSAgbWFw
LT5kaXJlY3Rpb24pOw0KKwkJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQobWFwLT5hdHRhY2gtPmRt
YWJ1ZiwgbWFwLT5hdHRhY2gpOw0KIAl9IGVsc2Ugew0KIAkJZG1hX3VubWFwX3NndGFibGUobWFw
LT5kZXYsIG1hcC0+c2d0LCBtYXAtPmRpcmVjdGlvbiwgMCk7DQogCQlzZ19mcmVlX3RhYmxlKG1h
cC0+c2d0KTsNCkBAIC0xODEsNyArMTgyLDcgQEAgc3RhdGljIHZvaWQgKnRlZ3JhX2JvX21tYXAo
c3RydWN0IGhvc3QxeF9ibyAqYm8pDQogCWlmIChvYmotPnZhZGRyKSB7DQogCQlyZXR1cm4gb2Jq
LT52YWRkcjsNCiAJfSBlbHNlIGlmIChvYmotPmdlbS5pbXBvcnRfYXR0YWNoKSB7DQotCQlyZXQg
PSBkbWFfYnVmX3ZtYXAob2JqLT5nZW0uaW1wb3J0X2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCisJ
CXJldCA9IGRtYV9idWZfdm1hcF91bmxvY2tlZChvYmotPmdlbS5pbXBvcnRfYXR0YWNoLT5kbWFi
dWYsICZtYXApOw0KIAkJcmV0dXJuIHJldCA/IE5VTEwgOiBtYXAudmFkZHI7DQogCX0gZWxzZSB7
DQogCQlyZXR1cm4gdm1hcChvYmotPnBhZ2VzLCBvYmotPm51bV9wYWdlcywgVk1fTUFQLA0KQEAg
LTE5Nyw3ICsxOTgsNyBAQCBzdGF0aWMgdm9pZCB0ZWdyYV9ib19tdW5tYXAoc3RydWN0IGhvc3Qx
eF9ibyAqYm8sIHZvaWQgKmFkZHIpDQogCWlmIChvYmotPnZhZGRyKQ0KIAkJcmV0dXJuOw0KIAll
bHNlIGlmIChvYmotPmdlbS5pbXBvcnRfYXR0YWNoKQ0KLQkJZG1hX2J1Zl92dW5tYXAob2JqLT5n
ZW0uaW1wb3J0X2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCisJCWRtYV9idWZfdnVubWFwX3VubG9j
a2VkKG9iai0+Z2VtLmltcG9ydF9hdHRhY2gtPmRtYWJ1ZiwgJm1hcCk7DQogCWVsc2UNCiAJCXZ1
bm1hcChhZGRyKTsNCiB9DQpAQCAtNDUzLDcgKzQ1NCw3IEBAIHN0YXRpYyBzdHJ1Y3QgdGVncmFf
Ym8gKnRlZ3JhX2JvX2ltcG9ydChzdHJ1Y3QgZHJtX2RldmljZSAqZHJtLA0KIAlpZiAoSVNfRVJS
KGJvKSkNCiAJCXJldHVybiBibzsNCiANCi0JYXR0YWNoID0gZG1hX2J1Zl9hdHRhY2goYnVmLCBk
cm0tPmRldik7DQorCWF0dGFjaCA9IGRtYV9idWZfYXR0YWNoX3VubG9ja2VkKGJ1ZiwgZHJtLT5k
ZXYpOw0KIAlpZiAoSVNfRVJSKGF0dGFjaCkpIHsNCiAJCWVyciA9IFBUUl9FUlIoYXR0YWNoKTsN
CiAJCWdvdG8gZnJlZTsNCkBAIC00NjEsNyArNDYyLDcgQEAgc3RhdGljIHN0cnVjdCB0ZWdyYV9i
byAqdGVncmFfYm9faW1wb3J0KHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sDQogDQogCWdldF9kbWFf
YnVmKGJ1Zik7DQogDQotCWJvLT5zZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50KGF0dGFjaCwg
RE1BX1RPX0RFVklDRSk7DQorCWJvLT5zZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50X3VubG9j
a2VkKGF0dGFjaCwgRE1BX1RPX0RFVklDRSk7DQogCWlmIChJU19FUlIoYm8tPnNndCkpIHsNCiAJ
CWVyciA9IFBUUl9FUlIoYm8tPnNndCk7DQogCQlnb3RvIGRldGFjaDsNCkBAIC00NzksOSArNDgw
LDkgQEAgc3RhdGljIHN0cnVjdCB0ZWdyYV9ibyAqdGVncmFfYm9faW1wb3J0KHN0cnVjdCBkcm1f
ZGV2aWNlICpkcm0sDQogDQogZGV0YWNoOg0KIAlpZiAoIUlTX0VSUl9PUl9OVUxMKGJvLT5zZ3Qp
KQ0KLQkJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KGF0dGFjaCwgYm8tPnNndCwgRE1BX1RPX0RF
VklDRSk7DQorCQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnRfdW5sb2NrZWQoYXR0YWNoLCBiby0+
c2d0LCBETUFfVE9fREVWSUNFKTsNCiANCi0JZG1hX2J1Zl9kZXRhY2goYnVmLCBhdHRhY2gpOw0K
KwlkbWFfYnVmX2RldGFjaF91bmxvY2tlZChidWYsIGF0dGFjaCk7DQogCWRtYV9idWZfcHV0KGJ1
Zik7DQogZnJlZToNCiAJZHJtX2dlbV9vYmplY3RfcmVsZWFzZSgmYm8tPmdlbSk7DQpAQCAtNTA4
LDggKzUwOSw4IEBAIHZvaWQgdGVncmFfYm9fZnJlZV9vYmplY3Qoc3RydWN0IGRybV9nZW1fb2Jq
ZWN0ICpnZW0pDQogCQl0ZWdyYV9ib19pb21tdV91bm1hcCh0ZWdyYSwgYm8pOw0KIA0KIAlpZiAo
Z2VtLT5pbXBvcnRfYXR0YWNoKSB7DQotCQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoZ2VtLT5p
bXBvcnRfYXR0YWNoLCBiby0+c2d0LA0KLQkJCQkJIERNQV9UT19ERVZJQ0UpOw0KKwkJZG1hX2J1
Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkKGdlbS0+aW1wb3J0X2F0dGFjaCwgYm8tPnNndCwN
CisJCQkJCQkgIERNQV9UT19ERVZJQ0UpOw0KIAkJZHJtX3ByaW1lX2dlbV9kZXN0cm95KGdlbSwg
TlVMTCk7DQogCX0gZWxzZSB7DQogCQl0ZWdyYV9ib19mcmVlKGdlbS0+ZGV2LCBibyk7DQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9pbmZpbmliYW5kL2NvcmUvdW1lbV9kbWFidWYuYyBiL2RyaXZlcnMv
aW5maW5pYmFuZC9jb3JlL3VtZW1fZG1hYnVmLmMNCmluZGV4IDA0YzA0ZTZkMjRjMy4uNjY3NDM2
YTkyYjE3IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9pbmZpbmliYW5kL2NvcmUvdW1lbV9kbWFidWYu
Yw0KKysrIGIvZHJpdmVycy9pbmZpbmliYW5kL2NvcmUvdW1lbV9kbWFidWYuYw0KQEAgLTI2LDcg
KzI2LDggQEAgaW50IGliX3VtZW1fZG1hYnVmX21hcF9wYWdlcyhzdHJ1Y3QgaWJfdW1lbV9kbWFi
dWYgKnVtZW1fZG1hYnVmKQ0KIAlpZiAodW1lbV9kbWFidWYtPnNndCkNCiAJCWdvdG8gd2FpdF9m
ZW5jZTsNCiANCi0Jc2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudCh1bWVtX2RtYWJ1Zi0+YXR0
YWNoLCBETUFfQklESVJFQ1RJT05BTCk7DQorCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnRf
dW5sb2NrZWQodW1lbV9kbWFidWYtPmF0dGFjaCwNCisJCQkJCSAgICAgIERNQV9CSURJUkVDVElP
TkFMKTsNCiAJaWYgKElTX0VSUihzZ3QpKQ0KIAkJcmV0dXJuIFBUUl9FUlIoc2d0KTsNCiANCkBA
IC0xMDIsOCArMTAzLDggQEAgdm9pZCBpYl91bWVtX2RtYWJ1Zl91bm1hcF9wYWdlcyhzdHJ1Y3Qg
aWJfdW1lbV9kbWFidWYgKnVtZW1fZG1hYnVmKQ0KIAkJdW1lbV9kbWFidWYtPmxhc3Rfc2dfdHJp
bSA9IDA7DQogCX0NCiANCi0JZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KHVtZW1fZG1hYnVmLT5h
dHRhY2gsIHVtZW1fZG1hYnVmLT5zZ3QsDQotCQkJCSBETUFfQklESVJFQ1RJT05BTCk7DQorCWRt
YV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZCh1bWVtX2RtYWJ1Zi0+YXR0YWNoLCB1bWVt
X2RtYWJ1Zi0+c2d0LA0KKwkJCQkJICBETUFfQklESVJFQ1RJT05BTCk7DQogDQogCXVtZW1fZG1h
YnVmLT5zZ3QgPSBOVUxMOw0KIH0NCkBAIC0xNDksNyArMTUwLDcgQEAgc3RydWN0IGliX3VtZW1f
ZG1hYnVmICppYl91bWVtX2RtYWJ1Zl9nZXQoc3RydWN0IGliX2RldmljZSAqZGV2aWNlLA0KIAlp
ZiAoIWliX3VtZW1fbnVtX3BhZ2VzKHVtZW0pKQ0KIAkJZ290byBvdXRfZnJlZV91bWVtOw0KIA0K
LQl1bWVtX2RtYWJ1Zi0+YXR0YWNoID0gZG1hX2J1Zl9keW5hbWljX2F0dGFjaCgNCisJdW1lbV9k
bWFidWYtPmF0dGFjaCA9IGRtYV9idWZfZHluYW1pY19hdHRhY2hfdW5sb2NrZWQoDQogCQkJCQlk
bWFidWYsDQogCQkJCQlkZXZpY2UtPmRtYV9kZXZpY2UsDQogCQkJCQlvcHMsDQpAQCAtMjI4LDcg
KzIyOSw3IEBAIHZvaWQgaWJfdW1lbV9kbWFidWZfcmVsZWFzZShzdHJ1Y3QgaWJfdW1lbV9kbWFi
dWYgKnVtZW1fZG1hYnVmKQ0KIAkJZG1hX2J1Zl91bnBpbih1bWVtX2RtYWJ1Zi0+YXR0YWNoKTsN
CiAJZG1hX3Jlc3ZfdW5sb2NrKGRtYWJ1Zi0+cmVzdik7DQogDQotCWRtYV9idWZfZGV0YWNoKGRt
YWJ1ZiwgdW1lbV9kbWFidWYtPmF0dGFjaCk7DQorCWRtYV9idWZfZGV0YWNoX3VubG9ja2VkKGRt
YWJ1ZiwgdW1lbV9kbWFidWYtPmF0dGFjaCk7DQogCWRtYV9idWZfcHV0KGRtYWJ1Zik7DQogCWtm
cmVlKHVtZW1fZG1hYnVmKTsNCiB9DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRpYS9jb21tb24v
dmlkZW9idWYyL3ZpZGVvYnVmMi1kbWEtY29udGlnLmMgYi9kcml2ZXJzL21lZGlhL2NvbW1vbi92
aWRlb2J1ZjIvdmlkZW9idWYyLWRtYS1jb250aWcuYw0KaW5kZXggNjc4YjM1OTcxN2M0Li5kZTc2
MmRiZGFmNzggMTAwNjQ0DQotLS0gYS9kcml2ZXJzL21lZGlhL2NvbW1vbi92aWRlb2J1ZjIvdmlk
ZW9idWYyLWRtYS1jb250aWcuYw0KKysrIGIvZHJpdmVycy9tZWRpYS9jb21tb24vdmlkZW9idWYy
L3ZpZGVvYnVmMi1kbWEtY29udGlnLmMNCkBAIC0xMDEsNyArMTAxLDcgQEAgc3RhdGljIHZvaWQg
KnZiMl9kY192YWRkcihzdHJ1Y3QgdmIyX2J1ZmZlciAqdmIsIHZvaWQgKmJ1Zl9wcml2KQ0KIAlp
ZiAoYnVmLT5kYl9hdHRhY2gpIHsNCiAJCXN0cnVjdCBpb3N5c19tYXAgbWFwOw0KIA0KLQkJaWYg
KCFkbWFfYnVmX3ZtYXAoYnVmLT5kYl9hdHRhY2gtPmRtYWJ1ZiwgJm1hcCkpDQorCQlpZiAoIWRt
YV9idWZfdm1hcF91bmxvY2tlZChidWYtPmRiX2F0dGFjaC0+ZG1hYnVmLCAmbWFwKSkNCiAJCQli
dWYtPnZhZGRyID0gbWFwLnZhZGRyOw0KIA0KIAkJcmV0dXJuIGJ1Zi0+dmFkZHI7DQpAQCAtNzEx
LDcgKzcxMSw3IEBAIHN0YXRpYyBpbnQgdmIyX2RjX21hcF9kbWFidWYodm9pZCAqbWVtX3ByaXYp
DQogCX0NCiANCiAJLyogZ2V0IHRoZSBhc3NvY2lhdGVkIHNjYXR0ZXJsaXN0IGZvciB0aGlzIGJ1
ZmZlciAqLw0KLQlzZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50KGJ1Zi0+ZGJfYXR0YWNoLCBi
dWYtPmRtYV9kaXIpOw0KKwlzZ3QgPSBkbWFfYnVmX21hcF9hdHRhY2htZW50X3VubG9ja2VkKGJ1
Zi0+ZGJfYXR0YWNoLCBidWYtPmRtYV9kaXIpOw0KIAlpZiAoSVNfRVJSKHNndCkpIHsNCiAJCXBy
X2VycigiRXJyb3IgZ2V0dGluZyBkbWFidWYgc2NhdHRlcmxpc3RcbiIpOw0KIAkJcmV0dXJuIC1F
SU5WQUw7DQpAQCAtNzIyLDcgKzcyMiw4IEBAIHN0YXRpYyBpbnQgdmIyX2RjX21hcF9kbWFidWYo
dm9pZCAqbWVtX3ByaXYpDQogCWlmIChjb250aWdfc2l6ZSA8IGJ1Zi0+c2l6ZSkgew0KIAkJcHJf
ZXJyKCJjb250aWd1b3VzIGNodW5rIGlzIHRvbyBzbWFsbCAlbHUvJWx1XG4iLA0KIAkJICAgICAg
IGNvbnRpZ19zaXplLCBidWYtPnNpemUpOw0KLQkJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KGJ1
Zi0+ZGJfYXR0YWNoLCBzZ3QsIGJ1Zi0+ZG1hX2Rpcik7DQorCQlkbWFfYnVmX3VubWFwX2F0dGFj
aG1lbnRfdW5sb2NrZWQoYnVmLT5kYl9hdHRhY2gsIHNndCwNCisJCQkJCQkgIGJ1Zi0+ZG1hX2Rp
cik7DQogCQlyZXR1cm4gLUVGQVVMVDsNCiAJfQ0KIA0KQEAgLTc1MCwxMCArNzUxLDEwIEBAIHN0
YXRpYyB2b2lkIHZiMl9kY191bm1hcF9kbWFidWYodm9pZCAqbWVtX3ByaXYpDQogCX0NCiANCiAJ
aWYgKGJ1Zi0+dmFkZHIpIHsNCi0JCWRtYV9idWZfdnVubWFwKGJ1Zi0+ZGJfYXR0YWNoLT5kbWFi
dWYsICZtYXApOw0KKwkJZG1hX2J1Zl92dW5tYXBfdW5sb2NrZWQoYnVmLT5kYl9hdHRhY2gtPmRt
YWJ1ZiwgJm1hcCk7DQogCQlidWYtPnZhZGRyID0gTlVMTDsNCiAJfQ0KLQlkbWFfYnVmX3VubWFw
X2F0dGFjaG1lbnQoYnVmLT5kYl9hdHRhY2gsIHNndCwgYnVmLT5kbWFfZGlyKTsNCisJZG1hX2J1
Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkKGJ1Zi0+ZGJfYXR0YWNoLCBzZ3QsIGJ1Zi0+ZG1h
X2Rpcik7DQogDQogCWJ1Zi0+ZG1hX2FkZHIgPSAwOw0KIAlidWYtPmRtYV9zZ3QgPSBOVUxMOw0K
QEAgLTc2OCw3ICs3NjksNyBAQCBzdGF0aWMgdm9pZCB2YjJfZGNfZGV0YWNoX2RtYWJ1Zih2b2lk
ICptZW1fcHJpdikNCiAJCXZiMl9kY191bm1hcF9kbWFidWYoYnVmKTsNCiANCiAJLyogZGV0YWNo
IHRoaXMgYXR0YWNobWVudCAqLw0KLQlkbWFfYnVmX2RldGFjaChidWYtPmRiX2F0dGFjaC0+ZG1h
YnVmLCBidWYtPmRiX2F0dGFjaCk7DQorCWRtYV9idWZfZGV0YWNoX3VubG9ja2VkKGJ1Zi0+ZGJf
YXR0YWNoLT5kbWFidWYsIGJ1Zi0+ZGJfYXR0YWNoKTsNCiAJa2ZyZWUoYnVmKTsNCiB9DQogDQpA
QCAtNzkyLDcgKzc5Myw3IEBAIHN0YXRpYyB2b2lkICp2YjJfZGNfYXR0YWNoX2RtYWJ1ZihzdHJ1
Y3QgdmIyX2J1ZmZlciAqdmIsIHN0cnVjdCBkZXZpY2UgKmRldiwNCiAJYnVmLT52YiA9IHZiOw0K
IA0KIAkvKiBjcmVhdGUgYXR0YWNobWVudCBmb3IgdGhlIGRtYWJ1ZiB3aXRoIHRoZSB1c2VyIGRl
dmljZSAqLw0KLQlkYmEgPSBkbWFfYnVmX2F0dGFjaChkYnVmLCBidWYtPmRldik7DQorCWRiYSA9
IGRtYV9idWZfYXR0YWNoX3VubG9ja2VkKGRidWYsIGJ1Zi0+ZGV2KTsNCiAJaWYgKElTX0VSUihk
YmEpKSB7DQogCQlwcl9lcnIoImZhaWxlZCB0byBhdHRhY2ggZG1hYnVmXG4iKTsNCiAJCWtmcmVl
KGJ1Zik7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRpYS9jb21tb24vdmlkZW9idWYyL3ZpZGVv
YnVmMi1kbWEtc2cuYyBiL2RyaXZlcnMvbWVkaWEvY29tbW9uL3ZpZGVvYnVmMi92aWRlb2J1ZjIt
ZG1hLXNnLmMNCmluZGV4IGZhNjkxNThhNjViMS4uMzllMTE2MDAzMDRhIDEwMDY0NA0KLS0tIGEv
ZHJpdmVycy9tZWRpYS9jb21tb24vdmlkZW9idWYyL3ZpZGVvYnVmMi1kbWEtc2cuYw0KKysrIGIv
ZHJpdmVycy9tZWRpYS9jb21tb24vdmlkZW9idWYyL3ZpZGVvYnVmMi1kbWEtc2cuYw0KQEAgLTMw
OSw3ICszMDksNyBAQCBzdGF0aWMgdm9pZCAqdmIyX2RtYV9zZ192YWRkcihzdHJ1Y3QgdmIyX2J1
ZmZlciAqdmIsIHZvaWQgKmJ1Zl9wcml2KQ0KIA0KIAlpZiAoIWJ1Zi0+dmFkZHIpIHsNCiAJCWlm
IChidWYtPmRiX2F0dGFjaCkgew0KLQkJCXJldCA9IGRtYV9idWZfdm1hcChidWYtPmRiX2F0dGFj
aC0+ZG1hYnVmLCAmbWFwKTsNCisJCQlyZXQgPSBkbWFfYnVmX3ZtYXBfdW5sb2NrZWQoYnVmLT5k
Yl9hdHRhY2gtPmRtYWJ1ZiwgJm1hcCk7DQogCQkJYnVmLT52YWRkciA9IHJldCA/IE5VTEwgOiBt
YXAudmFkZHI7DQogCQl9IGVsc2Ugew0KIAkJCWJ1Zi0+dmFkZHIgPSB2bV9tYXBfcmFtKGJ1Zi0+
cGFnZXMsIGJ1Zi0+bnVtX3BhZ2VzLCAtMSk7DQpAQCAtNTY1LDcgKzU2NSw3IEBAIHN0YXRpYyBp
bnQgdmIyX2RtYV9zZ19tYXBfZG1hYnVmKHZvaWQgKm1lbV9wcml2KQ0KIAl9DQogDQogCS8qIGdl
dCB0aGUgYXNzb2NpYXRlZCBzY2F0dGVybGlzdCBmb3IgdGhpcyBidWZmZXIgKi8NCi0Jc2d0ID0g
ZG1hX2J1Zl9tYXBfYXR0YWNobWVudChidWYtPmRiX2F0dGFjaCwgYnVmLT5kbWFfZGlyKTsNCisJ
c2d0ID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVudF91bmxvY2tlZChidWYtPmRiX2F0dGFjaCwgYnVm
LT5kbWFfZGlyKTsNCiAJaWYgKElTX0VSUihzZ3QpKSB7DQogCQlwcl9lcnIoIkVycm9yIGdldHRp
bmcgZG1hYnVmIHNjYXR0ZXJsaXN0XG4iKTsNCiAJCXJldHVybiAtRUlOVkFMOw0KQEAgLTU5NCwx
MCArNTk0LDEwIEBAIHN0YXRpYyB2b2lkIHZiMl9kbWFfc2dfdW5tYXBfZG1hYnVmKHZvaWQgKm1l
bV9wcml2KQ0KIAl9DQogDQogCWlmIChidWYtPnZhZGRyKSB7DQotCQlkbWFfYnVmX3Z1bm1hcChi
dWYtPmRiX2F0dGFjaC0+ZG1hYnVmLCAmbWFwKTsNCisJCWRtYV9idWZfdnVubWFwX3VubG9ja2Vk
KGJ1Zi0+ZGJfYXR0YWNoLT5kbWFidWYsICZtYXApOw0KIAkJYnVmLT52YWRkciA9IE5VTEw7DQog
CX0NCi0JZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KGJ1Zi0+ZGJfYXR0YWNoLCBzZ3QsIGJ1Zi0+
ZG1hX2Rpcik7DQorCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChidWYtPmRiX2F0
dGFjaCwgc2d0LCBidWYtPmRtYV9kaXIpOw0KIA0KIAlidWYtPmRtYV9zZ3QgPSBOVUxMOw0KIH0N
CkBAIC02MTEsNyArNjExLDcgQEAgc3RhdGljIHZvaWQgdmIyX2RtYV9zZ19kZXRhY2hfZG1hYnVm
KHZvaWQgKm1lbV9wcml2KQ0KIAkJdmIyX2RtYV9zZ191bm1hcF9kbWFidWYoYnVmKTsNCiANCiAJ
LyogZGV0YWNoIHRoaXMgYXR0YWNobWVudCAqLw0KLQlkbWFfYnVmX2RldGFjaChidWYtPmRiX2F0
dGFjaC0+ZG1hYnVmLCBidWYtPmRiX2F0dGFjaCk7DQorCWRtYV9idWZfZGV0YWNoX3VubG9ja2Vk
KGJ1Zi0+ZGJfYXR0YWNoLT5kbWFidWYsIGJ1Zi0+ZGJfYXR0YWNoKTsNCiAJa2ZyZWUoYnVmKTsN
CiB9DQogDQpAQCAtNjMzLDcgKzYzMyw3IEBAIHN0YXRpYyB2b2lkICp2YjJfZG1hX3NnX2F0dGFj
aF9kbWFidWYoc3RydWN0IHZiMl9idWZmZXIgKnZiLCBzdHJ1Y3QgZGV2aWNlICpkZXYsDQogDQog
CWJ1Zi0+ZGV2ID0gZGV2Ow0KIAkvKiBjcmVhdGUgYXR0YWNobWVudCBmb3IgdGhlIGRtYWJ1ZiB3
aXRoIHRoZSB1c2VyIGRldmljZSAqLw0KLQlkYmEgPSBkbWFfYnVmX2F0dGFjaChkYnVmLCBidWYt
PmRldik7DQorCWRiYSA9IGRtYV9idWZfYXR0YWNoX3VubG9ja2VkKGRidWYsIGJ1Zi0+ZGV2KTsN
CiAJaWYgKElTX0VSUihkYmEpKSB7DQogCQlwcl9lcnIoImZhaWxlZCB0byBhdHRhY2ggZG1hYnVm
XG4iKTsNCiAJCWtmcmVlKGJ1Zik7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRpYS9jb21tb24v
dmlkZW9idWYyL3ZpZGVvYnVmMi12bWFsbG9jLmMgYi9kcml2ZXJzL21lZGlhL2NvbW1vbi92aWRl
b2J1ZjIvdmlkZW9idWYyLXZtYWxsb2MuYw0KaW5kZXggOTQ4MTUyZjE1OTZiLi43ODMxYmY1NDU4
NzQgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL21lZGlhL2NvbW1vbi92aWRlb2J1ZjIvdmlkZW9idWYy
LXZtYWxsb2MuYw0KKysrIGIvZHJpdmVycy9tZWRpYS9jb21tb24vdmlkZW9idWYyL3ZpZGVvYnVm
Mi12bWFsbG9jLmMNCkBAIC0zNzYsNyArMzc2LDcgQEAgc3RhdGljIGludCB2YjJfdm1hbGxvY19t
YXBfZG1hYnVmKHZvaWQgKm1lbV9wcml2KQ0KIAlzdHJ1Y3QgaW9zeXNfbWFwIG1hcDsNCiAJaW50
IHJldDsNCiANCi0JcmV0ID0gZG1hX2J1Zl92bWFwKGJ1Zi0+ZGJ1ZiwgJm1hcCk7DQorCXJldCA9
IGRtYV9idWZfdm1hcF91bmxvY2tlZChidWYtPmRidWYsICZtYXApOw0KIAlpZiAocmV0KQ0KIAkJ
cmV0dXJuIC1FRkFVTFQ7DQogCWJ1Zi0+dmFkZHIgPSBtYXAudmFkZHI7DQpAQCAtMzg5LDcgKzM4
OSw3IEBAIHN0YXRpYyB2b2lkIHZiMl92bWFsbG9jX3VubWFwX2RtYWJ1Zih2b2lkICptZW1fcHJp
dikNCiAJc3RydWN0IHZiMl92bWFsbG9jX2J1ZiAqYnVmID0gbWVtX3ByaXY7DQogCXN0cnVjdCBp
b3N5c19tYXAgbWFwID0gSU9TWVNfTUFQX0lOSVRfVkFERFIoYnVmLT52YWRkcik7DQogDQotCWRt
YV9idWZfdnVubWFwKGJ1Zi0+ZGJ1ZiwgJm1hcCk7DQorCWRtYV9idWZfdnVubWFwX3VubG9ja2Vk
KGJ1Zi0+ZGJ1ZiwgJm1hcCk7DQogCWJ1Zi0+dmFkZHIgPSBOVUxMOw0KIH0NCiANCkBAIC0zOTks
NyArMzk5LDcgQEAgc3RhdGljIHZvaWQgdmIyX3ZtYWxsb2NfZGV0YWNoX2RtYWJ1Zih2b2lkICpt
ZW1fcHJpdikNCiAJc3RydWN0IGlvc3lzX21hcCBtYXAgPSBJT1NZU19NQVBfSU5JVF9WQUREUihi
dWYtPnZhZGRyKTsNCiANCiAJaWYgKGJ1Zi0+dmFkZHIpDQotCQlkbWFfYnVmX3Z1bm1hcChidWYt
PmRidWYsICZtYXApOw0KKwkJZG1hX2J1Zl92dW5tYXBfdW5sb2NrZWQoYnVmLT5kYnVmLCAmbWFw
KTsNCiANCiAJa2ZyZWUoYnVmKTsNCiB9DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRpYS9wbGF0
Zm9ybS9udmlkaWEvdGVncmEtdmRlL2RtYWJ1Zi1jYWNoZS5jIGIvZHJpdmVycy9tZWRpYS9wbGF0
Zm9ybS9udmlkaWEvdGVncmEtdmRlL2RtYWJ1Zi1jYWNoZS5jDQppbmRleCA2OWMzNDYxNDgwNzAu
LjU4ZTQ1OTVmM2ExMCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvbWVkaWEvcGxhdGZvcm0vbnZpZGlh
L3RlZ3JhLXZkZS9kbWFidWYtY2FjaGUuYw0KKysrIGIvZHJpdmVycy9tZWRpYS9wbGF0Zm9ybS9u
dmlkaWEvdGVncmEtdmRlL2RtYWJ1Zi1jYWNoZS5jDQpAQCAtMzgsOCArMzgsOCBAQCBzdGF0aWMg
dm9pZCB0ZWdyYV92ZGVfcmVsZWFzZV9lbnRyeShzdHJ1Y3QgdGVncmFfdmRlX2NhY2hlX2VudHJ5
ICplbnRyeSkNCiAJaWYgKGVudHJ5LT52ZGUtPmRvbWFpbikNCiAJCXRlZ3JhX3ZkZV9pb21tdV91
bm1hcChlbnRyeS0+dmRlLCBlbnRyeS0+aW92YSk7DQogDQotCWRtYV9idWZfdW5tYXBfYXR0YWNo
bWVudChlbnRyeS0+YSwgZW50cnktPnNndCwgZW50cnktPmRtYV9kaXIpOw0KLQlkbWFfYnVmX2Rl
dGFjaChkbWFidWYsIGVudHJ5LT5hKTsNCisJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9j
a2VkKGVudHJ5LT5hLCBlbnRyeS0+c2d0LCBlbnRyeS0+ZG1hX2Rpcik7DQorCWRtYV9idWZfZGV0
YWNoX3VubG9ja2VkKGRtYWJ1ZiwgZW50cnktPmEpOw0KIAlkbWFfYnVmX3B1dChkbWFidWYpOw0K
IA0KIAlsaXN0X2RlbCgmZW50cnktPmxpc3QpOw0KQEAgLTk1LDE0ICs5NSwxNCBAQCBpbnQgdGVn
cmFfdmRlX2RtYWJ1Zl9jYWNoZV9tYXAoc3RydWN0IHRlZ3JhX3ZkZSAqdmRlLA0KIAkJZ290byBy
ZWY7DQogCX0NCiANCi0JYXR0YWNobWVudCA9IGRtYV9idWZfYXR0YWNoKGRtYWJ1ZiwgZGV2KTsN
CisJYXR0YWNobWVudCA9IGRtYV9idWZfYXR0YWNoX3VubG9ja2VkKGRtYWJ1ZiwgZGV2KTsNCiAJ
aWYgKElTX0VSUihhdHRhY2htZW50KSkgew0KIAkJZGV2X2VycihkZXYsICJGYWlsZWQgdG8gYXR0
YWNoIGRtYWJ1ZlxuIik7DQogCQllcnIgPSBQVFJfRVJSKGF0dGFjaG1lbnQpOw0KIAkJZ290byBl
cnJfdW5sb2NrOw0KIAl9DQogDQotCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnQoYXR0YWNo
bWVudCwgZG1hX2Rpcik7DQorCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnRfdW5sb2NrZWQo
YXR0YWNobWVudCwgZG1hX2Rpcik7DQogCWlmIChJU19FUlIoc2d0KSkgew0KIAkJZGV2X2Vycihk
ZXYsICJGYWlsZWQgdG8gZ2V0IGRtYWJ1ZnMgc2dfdGFibGVcbiIpOw0KIAkJZXJyID0gUFRSX0VS
UihzZ3QpOw0KQEAgLTE1Miw5ICsxNTIsOSBAQCBpbnQgdGVncmFfdmRlX2RtYWJ1Zl9jYWNoZV9t
YXAoc3RydWN0IHRlZ3JhX3ZkZSAqdmRlLA0KIGVycl9mcmVlOg0KIAlrZnJlZShlbnRyeSk7DQog
ZXJyX3VubWFwOg0KLQlkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnQoYXR0YWNobWVudCwgc2d0LCBk
bWFfZGlyKTsNCisJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50X3VubG9ja2VkKGF0dGFjaG1lbnQs
IHNndCwgZG1hX2Rpcik7DQogZXJyX2RldGFjaDoNCi0JZG1hX2J1Zl9kZXRhY2goZG1hYnVmLCBh
dHRhY2htZW50KTsNCisJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoZG1hYnVmLCBhdHRhY2htZW50
KTsNCiBlcnJfdW5sb2NrOg0KIAltdXRleF91bmxvY2soJnZkZS0+bWFwX2xvY2spOw0KIA0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvbWlzYy9mYXN0cnBjLmMgYi9kcml2ZXJzL21pc2MvZmFzdHJwYy5j
DQppbmRleCA5M2ViZDE3NGQ4NDguLjU1OGU4MDU2ZWI4MCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMv
bWlzYy9mYXN0cnBjLmMNCisrKyBiL2RyaXZlcnMvbWlzYy9mYXN0cnBjLmMNCkBAIC0zMTAsOSAr
MzEwLDkgQEAgc3RhdGljIHZvaWQgZmFzdHJwY19mcmVlX21hcChzdHJ1Y3Qga3JlZiAqcmVmKQ0K
IAkJCQlyZXR1cm47DQogCQkJfQ0KIAkJfQ0KLQkJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KG1h
cC0+YXR0YWNoLCBtYXAtPnRhYmxlLA0KLQkJCQkJIERNQV9CSURJUkVDVElPTkFMKTsNCi0JCWRt
YV9idWZfZGV0YWNoKG1hcC0+YnVmLCBtYXAtPmF0dGFjaCk7DQorCQlkbWFfYnVmX3VubWFwX2F0
dGFjaG1lbnRfdW5sb2NrZWQobWFwLT5hdHRhY2gsIG1hcC0+dGFibGUsDQorCQkJCQkJICBETUFf
QklESVJFQ1RJT05BTCk7DQorCQlkbWFfYnVmX2RldGFjaF91bmxvY2tlZChtYXAtPmJ1ZiwgbWFw
LT5hdHRhY2gpOw0KIAkJZG1hX2J1Zl9wdXQobWFwLT5idWYpOw0KIAl9DQogDQpAQCAtNzE5LDE0
ICs3MTksMTQgQEAgc3RhdGljIGludCBmYXN0cnBjX21hcF9jcmVhdGUoc3RydWN0IGZhc3RycGNf
dXNlciAqZmwsIGludCBmZCwNCiAJCWdvdG8gZ2V0X2VycjsNCiAJfQ0KIA0KLQltYXAtPmF0dGFj
aCA9IGRtYV9idWZfYXR0YWNoKG1hcC0+YnVmLCBzZXNzLT5kZXYpOw0KKwltYXAtPmF0dGFjaCA9
IGRtYV9idWZfYXR0YWNoX3VubG9ja2VkKG1hcC0+YnVmLCBzZXNzLT5kZXYpOw0KIAlpZiAoSVNf
RVJSKG1hcC0+YXR0YWNoKSkgew0KIAkJZGV2X2VycihzZXNzLT5kZXYsICJGYWlsZWQgdG8gYXR0
YWNoIGRtYWJ1ZlxuIik7DQogCQllcnIgPSBQVFJfRVJSKG1hcC0+YXR0YWNoKTsNCiAJCWdvdG8g
YXR0YWNoX2VycjsNCiAJfQ0KIA0KLQltYXAtPnRhYmxlID0gZG1hX2J1Zl9tYXBfYXR0YWNobWVu
dChtYXAtPmF0dGFjaCwgRE1BX0JJRElSRUNUSU9OQUwpOw0KKwltYXAtPnRhYmxlID0gZG1hX2J1
Zl9tYXBfYXR0YWNobWVudF91bmxvY2tlZChtYXAtPmF0dGFjaCwgRE1BX0JJRElSRUNUSU9OQUwp
Ow0KIAlpZiAoSVNfRVJSKG1hcC0+dGFibGUpKSB7DQogCQllcnIgPSBQVFJfRVJSKG1hcC0+dGFi
bGUpOw0KIAkJZ290byBtYXBfZXJyOw0KQEAgLTc2Myw3ICs3NjMsNyBAQCBzdGF0aWMgaW50IGZh
c3RycGNfbWFwX2NyZWF0ZShzdHJ1Y3QgZmFzdHJwY191c2VyICpmbCwgaW50IGZkLA0KIAlyZXR1
cm4gMDsNCiANCiBtYXBfZXJyOg0KLQlkbWFfYnVmX2RldGFjaChtYXAtPmJ1ZiwgbWFwLT5hdHRh
Y2gpOw0KKwlkbWFfYnVmX2RldGFjaF91bmxvY2tlZChtYXAtPmJ1ZiwgbWFwLT5hdHRhY2gpOw0K
IGF0dGFjaF9lcnI6DQogCWRtYV9idWZfcHV0KG1hcC0+YnVmKTsNCiBnZXRfZXJyOg0KZGlmZiAt
LWdpdCBhL2RyaXZlcnMveGVuL2dudGRldi1kbWFidWYuYyBiL2RyaXZlcnMveGVuL2dudGRldi1k
bWFidWYuYw0KaW5kZXggOTQwZTVlOWU4YTU0Li41YTUwZTI2OTdlOTUgMTAwNjQ0DQotLS0gYS9k
cml2ZXJzL3hlbi9nbnRkZXYtZG1hYnVmLmMNCisrKyBiL2RyaXZlcnMveGVuL2dudGRldi1kbWFi
dWYuYw0KQEAgLTU5Miw3ICs1OTIsNyBAQCBkbWFidWZfaW1wX3RvX3JlZnMoc3RydWN0IGdudGRl
dl9kbWFidWZfcHJpdiAqcHJpdiwgc3RydWN0IGRldmljZSAqZGV2LA0KIAlnbnRkZXZfZG1hYnVm
LT5wcml2ID0gcHJpdjsNCiAJZ250ZGV2X2RtYWJ1Zi0+ZmQgPSBmZDsNCiANCi0JYXR0YWNoID0g
ZG1hX2J1Zl9hdHRhY2goZG1hX2J1ZiwgZGV2KTsNCisJYXR0YWNoID0gZG1hX2J1Zl9hdHRhY2hf
dW5sb2NrZWQoZG1hX2J1ZiwgZGV2KTsNCiAJaWYgKElTX0VSUihhdHRhY2gpKSB7DQogCQlyZXQg
PSBFUlJfQ0FTVChhdHRhY2gpOw0KIAkJZ290byBmYWlsX2ZyZWVfb2JqOw0KQEAgLTYwMCw3ICs2
MDAsNyBAQCBkbWFidWZfaW1wX3RvX3JlZnMoc3RydWN0IGdudGRldl9kbWFidWZfcHJpdiAqcHJp
diwgc3RydWN0IGRldmljZSAqZGV2LA0KIA0KIAlnbnRkZXZfZG1hYnVmLT51LmltcC5hdHRhY2gg
PSBhdHRhY2g7DQogDQotCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnQoYXR0YWNoLCBETUFf
QklESVJFQ1RJT05BTCk7DQorCXNndCA9IGRtYV9idWZfbWFwX2F0dGFjaG1lbnRfdW5sb2NrZWQo
YXR0YWNoLCBETUFfQklESVJFQ1RJT05BTCk7DQogCWlmIChJU19FUlIoc2d0KSkgew0KIAkJcmV0
ID0gRVJSX0NBU1Qoc2d0KTsNCiAJCWdvdG8gZmFpbF9kZXRhY2g7DQpAQCAtNjU4LDkgKzY1OCw5
IEBAIGRtYWJ1Zl9pbXBfdG9fcmVmcyhzdHJ1Y3QgZ250ZGV2X2RtYWJ1Zl9wcml2ICpwcml2LCBz
dHJ1Y3QgZGV2aWNlICpkZXYsDQogZmFpbF9lbmRfYWNjZXNzOg0KIAlkbWFidWZfaW1wX2VuZF9m
b3JlaWduX2FjY2VzcyhnbnRkZXZfZG1hYnVmLT51LmltcC5yZWZzLCBjb3VudCk7DQogZmFpbF91
bm1hcDoNCi0JZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KGF0dGFjaCwgc2d0LCBETUFfQklESVJF
Q1RJT05BTCk7DQorCWRtYV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChhdHRhY2gsIHNn
dCwgRE1BX0JJRElSRUNUSU9OQUwpOw0KIGZhaWxfZGV0YWNoOg0KLQlkbWFfYnVmX2RldGFjaChk
bWFfYnVmLCBhdHRhY2gpOw0KKwlkbWFfYnVmX2RldGFjaF91bmxvY2tlZChkbWFfYnVmLCBhdHRh
Y2gpOw0KIGZhaWxfZnJlZV9vYmo6DQogCWRtYWJ1Zl9pbXBfZnJlZV9zdG9yYWdlKGdudGRldl9k
bWFidWYpOw0KIGZhaWxfcHV0Og0KQEAgLTcwOCwxMCArNzA4LDEwIEBAIHN0YXRpYyBpbnQgZG1h
YnVmX2ltcF9yZWxlYXNlKHN0cnVjdCBnbnRkZXZfZG1hYnVmX3ByaXYgKnByaXYsIHUzMiBmZCkN
CiAJYXR0YWNoID0gZ250ZGV2X2RtYWJ1Zi0+dS5pbXAuYXR0YWNoOw0KIA0KIAlpZiAoZ250ZGV2
X2RtYWJ1Zi0+dS5pbXAuc2d0KQ0KLQkJZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KGF0dGFjaCwg
Z250ZGV2X2RtYWJ1Zi0+dS5pbXAuc2d0LA0KLQkJCQkJIERNQV9CSURJUkVDVElPTkFMKTsNCisJ
CWRtYV9idWZfdW5tYXBfYXR0YWNobWVudF91bmxvY2tlZChhdHRhY2gsIGdudGRldl9kbWFidWYt
PnUuaW1wLnNndCwNCisJCQkJCQkgIERNQV9CSURJUkVDVElPTkFMKTsNCiAJZG1hX2J1ZiA9IGF0
dGFjaC0+ZG1hYnVmOw0KLQlkbWFfYnVmX2RldGFjaChhdHRhY2gtPmRtYWJ1ZiwgYXR0YWNoKTsN
CisJZG1hX2J1Zl9kZXRhY2hfdW5sb2NrZWQoYXR0YWNoLT5kbWFidWYsIGF0dGFjaCk7DQogCWRt
YV9idWZfcHV0KGRtYV9idWYpOw0KIA0KIAlkbWFidWZfaW1wX2ZyZWVfc3RvcmFnZShnbnRkZXZf
ZG1hYnVmKTsNCmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1idWYuaCBiL2luY2x1ZGUv
bGludXgvZG1hLWJ1Zi5oDQppbmRleCA3MTczMTc5NmM4YzMuLjlhYjA5NTY5ZGVjMSAxMDA2NDQN
Ci0tLSBhL2luY2x1ZGUvbGludXgvZG1hLWJ1Zi5oDQorKysgYi9pbmNsdWRlL2xpbnV4L2RtYS1i
dWYuaA0KQEAgLTYwMSwxNCArNjAxLDE2IEBAIGRtYV9idWZfYXR0YWNobWVudF9pc19keW5hbWlj
KHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCkNCiAJcmV0dXJuICEhYXR0YWNoLT5p
bXBvcnRlcl9vcHM7DQogfQ0KIA0KLXN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmRtYV9idWZf
YXR0YWNoKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsDQotCQkJCQkgIHN0cnVjdCBkZXZpY2UgKmRl
dik7DQorc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqZG1hX2J1Zl9hdHRhY2hfdW5sb2NrZWQo
c3RydWN0IGRtYV9idWYgKmRtYWJ1ZiwNCisJCQkJCQkgICBzdHJ1Y3QgZGV2aWNlICpkZXYpOw0K
IHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKg0KLWRtYV9idWZfZHluYW1pY19hdHRhY2goc3Ry
dWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGRldmljZSAqZGV2LA0KLQkJICAgICAgIGNvbnN0
IHN0cnVjdCBkbWFfYnVmX2F0dGFjaF9vcHMgKmltcG9ydGVyX29wcywNCi0JCSAgICAgICB2b2lk
ICppbXBvcnRlcl9wcml2KTsNCi12b2lkIGRtYV9idWZfZGV0YWNoKHN0cnVjdCBkbWFfYnVmICpk
bWFidWYsDQotCQkgICAgc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNoKTsNCitkbWFf
YnVmX2R5bmFtaWNfYXR0YWNoX3VubG9ja2VkKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIHN0cnVj
dCBkZXZpY2UgKmRldiwNCisJCQkJY29uc3Qgc3RydWN0IGRtYV9idWZfYXR0YWNoX29wcyAqaW1w
b3J0ZXJfb3BzLA0KKwkJCQl2b2lkICppbXBvcnRlcl9wcml2KTsNCisNCit2b2lkIGRtYV9idWZf
ZGV0YWNoX3VubG9ja2VkKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsDQorCQkJICAgICBzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpOw0KKw0KIGludCBkbWFfYnVmX3BpbihzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpOw0KIHZvaWQgZG1hX2J1Zl91bnBpbihzdHJ1Y3Qg
ZG1hX2J1Zl9hdHRhY2htZW50ICphdHRhY2gpOw0KIA0KQEAgLTYxOCwxOCArNjIwLDIwIEBAIGlu
dCBkbWFfYnVmX2ZkKHN0cnVjdCBkbWFfYnVmICpkbWFidWYsIGludCBmbGFncyk7DQogc3RydWN0
IGRtYV9idWYgKmRtYV9idWZfZ2V0KGludCBmZCk7DQogdm9pZCBkbWFfYnVmX3B1dChzdHJ1Y3Qg
ZG1hX2J1ZiAqZG1hYnVmKTsNCiANCi1zdHJ1Y3Qgc2dfdGFibGUgKmRtYV9idWZfbWFwX2F0dGFj
aG1lbnQoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqLA0KLQkJCQkJZW51bSBkbWFfZGF0YV9k
aXJlY3Rpb24pOw0KLXZvaWQgZG1hX2J1Zl91bm1hcF9hdHRhY2htZW50KHN0cnVjdCBkbWFfYnVm
X2F0dGFjaG1lbnQgKiwgc3RydWN0IHNnX3RhYmxlICosDQotCQkJCWVudW0gZG1hX2RhdGFfZGly
ZWN0aW9uKTsNCitzdHJ1Y3Qgc2dfdGFibGUgKmRtYV9idWZfbWFwX2F0dGFjaG1lbnRfdW5sb2Nr
ZWQoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqLA0KKwkJCQkJCSBlbnVtIGRtYV9kYXRhX2Rp
cmVjdGlvbik7DQordm9pZCBkbWFfYnVmX3VubWFwX2F0dGFjaG1lbnRfdW5sb2NrZWQoc3RydWN0
IGRtYV9idWZfYXR0YWNobWVudCAqLA0KKwkJCQkgICAgICAgc3RydWN0IHNnX3RhYmxlICosDQor
CQkJCSAgICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbik7DQorDQogdm9pZCBkbWFfYnVmX21v
dmVfbm90aWZ5KHN0cnVjdCBkbWFfYnVmICpkbWFfYnVmKTsNCiBpbnQgZG1hX2J1Zl9iZWdpbl9j
cHVfYWNjZXNzKHN0cnVjdCBkbWFfYnVmICpkbWFfYnVmLA0KIAkJCSAgICAgZW51bSBkbWFfZGF0
YV9kaXJlY3Rpb24gZGlyKTsNCiBpbnQgZG1hX2J1Zl9lbmRfY3B1X2FjY2VzcyhzdHJ1Y3QgZG1h
X2J1ZiAqZG1hX2J1ZiwNCiAJCQkgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIpOw0KIA0K
LWludCBkbWFfYnVmX21tYXAoc3RydWN0IGRtYV9idWYgKiwgc3RydWN0IHZtX2FyZWFfc3RydWN0
ICosDQotCQkgdW5zaWduZWQgbG9uZyk7DQotaW50IGRtYV9idWZfdm1hcChzdHJ1Y3QgZG1hX2J1
ZiAqZG1hYnVmLCBzdHJ1Y3QgaW9zeXNfbWFwICptYXApOw0KLXZvaWQgZG1hX2J1Zl92dW5tYXAo
c3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGlvc3lzX21hcCAqbWFwKTsNCitpbnQgZG1h
X2J1Zl9tbWFwX3VubG9ja2VkKHN0cnVjdCBkbWFfYnVmICosIHN0cnVjdCB2bV9hcmVhX3N0cnVj
dCAqLA0KKwkJCSAgdW5zaWduZWQgbG9uZyk7DQoraW50IGRtYV9idWZfdm1hcF91bmxvY2tlZChz
dHJ1Y3QgZG1hX2J1ZiAqZG1hYnVmLCBzdHJ1Y3QgaW9zeXNfbWFwICptYXApOw0KK3ZvaWQgZG1h
X2J1Zl92dW5tYXBfdW5sb2NrZWQoc3RydWN0IGRtYV9idWYgKmRtYWJ1Ziwgc3RydWN0IGlvc3lz
X21hcCAqbWFwKTsNCiAjZW5kaWYgLyogX19ETUFfQlVGX0hfXyAqLw0KLS0gDQoyLjM3LjINCg0K
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGluYXJvLW1t
LXNpZyBtYWlsaW5nIGxpc3QgLS0gbGluYXJvLW1tLXNpZ0BsaXN0cy5saW5hcm8ub3JnClRvIHVu
c3Vic2NyaWJlIHNlbmQgYW4gZW1haWwgdG8gbGluYXJvLW1tLXNpZy1sZWF2ZUBsaXN0cy5saW5h
cm8ub3JnCg==
