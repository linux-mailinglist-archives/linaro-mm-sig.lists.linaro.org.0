Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 5B99A4EABE6
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 29 Mar 2022 13:06:14 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 8C0223EC23
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 29 Mar 2022 11:06:13 +0000 (UTC)
Received: from mail-oo1-f45.google.com (mail-oo1-f45.google.com [209.85.161.45])
	by lists.linaro.org (Postfix) with ESMTPS id 496E33EBE7
	for <linaro-mm-sig@lists.linaro.org>; Thu, 17 Feb 2022 10:58:18 +0000 (UTC)
Received: by mail-oo1-f45.google.com with SMTP id s203-20020a4a3bd4000000b003191c2dcbe8so6059550oos.9
        for <linaro-mm-sig@lists.linaro.org>; Thu, 17 Feb 2022 02:58:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20210112;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to
         :cc:content-transfer-encoding;
        bh=lLWDb1QANHeU0tDITDX2Se5UlYYAadlTb8UAohw65dA=;
        b=Y+BsR2AKN3IsoVIAqgYdXR9oWZCzTrGtgv1QKFf8KIDJ92fjMFo+xA1vcxDKaJJ6Np
         MA2Uiui9yMA+flwSXX2WeGyMFy49VTnUduZ5IqHQFAYdKN3OlBlAF9DvqpiNxkRlBk0Z
         OvOxYjZ3Wmp92Ggms4wajwO7c+DcIq76xFMsdoL2bXPMgQimqeQpHxPS7xALJcx8uivK
         T/+eN5fesr5QZgImLUCZP2OpOnguBckm/nvHHQPt/bmdVHgwRgSGUI1HvSGBySUEQvrC
         VRQSjNUexnRHIk3L0iQTWwJaM6MElh2NM0BR4/I4EBUE353dWbUGCOBLWFIG0NQvMYEL
         +uNw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to:cc:content-transfer-encoding;
        bh=lLWDb1QANHeU0tDITDX2Se5UlYYAadlTb8UAohw65dA=;
        b=G77TVZV+drowFvQ69/XvSZZ3wcilguCMXj6YphvHiv6GZa1g/nkH/4+vnI9jTZO2s4
         74zF7HjMPq/EeF7YPdCDA+r8NuUx33Dz5gu4SOsuW74vA4cZq3E9CG4Y7C5JDOXTgFrv
         M/GEE1j+r0yjw7LgstJj3h9t8WlD0OpaNvnr/ogmlQN4MgiATdZ01q8eHwSn3W+7eyZV
         kOjQ3r5uVyww7sip7G5NDwAcR6EKNlfsLMYqMA7jtfpqBKhndNz8dFe0oj2NJjw4JQYu
         KVZY9Xgoo6Pnv5aNPVbb+ypnSNUzjopU6jgNYwezMvDlKFamWdNBp3YLbahOPEGU3z7U
         FBPA==
X-Gm-Message-State: AOAM533F87Iy4elKDPghGpeGVvm6FcaDaA56SVMSlmRVFly/vgc6FpSO
	isurrimXKeF9ve7CNFmWOpNnZ0JTNMpYMAbcF5A=
X-Google-Smtp-Source: ABdhPJw1/7GKnKJYHkYeUjjSIqHHSSDLZrcsK2N+dSmEPyM7eId8BbBcs0vwEbBpPaYjIi8138ARe5f3y+BlWGKRzWU=
X-Received: by 2002:a05:6870:d205:b0:d3:52c0:2ba3 with SMTP id
 g5-20020a056870d20500b000d352c02ba3mr719256oac.96.1645095497621; Thu, 17 Feb
 2022 02:58:17 -0800 (PST)
MIME-Version: 1.0
References: <20220217090440.4468-1-qiang.yu@amd.com> <5d3fdd2c-e74a-49f4-2b28-32c06483236f@amd.com>
 <CAKGbVbtLTBJPF5eTu4rABUTBa8eqjQvqjo1AEUrzgPgYgCREuA@mail.gmail.com>
 <dac70c05-e712-d2e3-2267-278380895f1e@amd.com> <CAKGbVbvtLbDiKrX80-dMnipdLkTE+FP=g_mx37e12fuMtA1Y4Q@mail.gmail.com>
 <ca27a9c6-f390-a938-dd66-ac23f3b44dc4@amd.com>
In-Reply-To: <ca27a9c6-f390-a938-dd66-ac23f3b44dc4@amd.com>
From: Qiang Yu <yuq825@gmail.com>
Date: Thu, 17 Feb 2022 18:58:06 +0800
Message-ID: <CAKGbVbv4UFCybS_OFj5UkDgevbrB5qe3pv+0nHv9WdefYhy6Ww@mail.gmail.com>
To: =?UTF-8?Q?Christian_K=C3=B6nig?= <christian.koenig@amd.com>
X-MailFrom: yuq825@gmail.com
X-Mailman-Rule-Hits: nonmember-moderation
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation
Message-ID-Hash: 2YRLX2JIS5PXWYSQIKC4PTTVIAUSPFX5
X-Message-ID-Hash: 2YRLX2JIS5PXWYSQIKC4PTTVIAUSPFX5
X-Mailman-Approved-At: Tue, 29 Mar 2022 11:05:57 +0000
CC: Qiang Yu <qiang.yu@amd.com>, Alex Deucher <alexander.deucher@amd.com>, "Pan, Xinhui" <Xinhui.Pan@amd.com>, David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>, linaro-mm-sig@lists.linaro.org, linux-media@vger.kernel.org, dri-devel <dri-devel@lists.freedesktop.org>, amd-gfx@lists.freedesktop.org, Linux Kernel Mailing List <linux-kernel@vger.kernel.org>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] Re: [PATCH] drm/amdgpu: check vm bo eviction valuable at last
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/2YRLX2JIS5PXWYSQIKC4PTTVIAUSPFX5/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

T24gVGh1LCBGZWIgMTcsIDIwMjIgYXQgNjozOSBQTSBDaHJpc3RpYW4gS8O2bmlnDQo8Y2hyaXN0
aWFuLmtvZW5pZ0BhbWQuY29tPiB3cm90ZToNCj4NCj4NCj4NCj4gQW0gMTcuMDIuMjIgdW0gMTE6
MTMgc2NocmllYiBRaWFuZyBZdToNCj4gPiBPbiBUaHUsIEZlYiAxNywgMjAyMiBhdCA1OjQ2IFBN
IENocmlzdGlhbiBLw7ZuaWcNCj4gPiA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPiB3cm90ZToN
Cj4gPj4gQW0gMTcuMDIuMjIgdW0gMTA6NDAgc2NocmllYiBRaWFuZyBZdToNCj4gPj4+IE9uIFRo
dSwgRmViIDE3LCAyMDIyIGF0IDU6MTUgUE0gQ2hyaXN0aWFuIEvDtm5pZw0KPiA+Pj4gPGNocmlz
dGlhbi5rb2VuaWdAYW1kLmNvbT4gd3JvdGU6DQo+ID4+Pj4gQW0gMTcuMDIuMjIgdW0gMTA6MDQg
c2NocmllYiBRaWFuZyBZdToNCj4gPj4+Pj4gV29ya3N0YXRpb24gYXBwbGljYXRpb24gQU5TQS9N
RVRBIGdldCB0aGlzIGVycm9yIGRtZXNnOg0KPiA+Pj4+PiBbZHJtOmFtZGdwdV9nZW1fdmFfaW9j
dGwgW2FtZGdwdV1dICpFUlJPUiogQ291bGRuJ3QgdXBkYXRlIEJPX1ZBICgtMTYpDQo+ID4+Pj4+
DQo+ID4+Pj4+IFRoaXMgaXMgY2F1c2VkIGJ5Og0KPiA+Pj4+PiAxLiBjcmVhdGUgYSAyNTZNQiBi
dWZmZXIgaW4gaW52aXNpYmxlIFZSQU0NCj4gPj4+Pj4gMi4gQ1BVIG1hcCB0aGUgYnVmZmVyIGFu
ZCBhY2Nlc3MgaXQgY2F1c2VzIHZtX2ZhdWx0IGFuZCB0cnkgdG8gbW92ZQ0KPiA+Pj4+PiAgICAg
ICBpdCB0byB2aXNpYmxlIFZSQU0NCj4gPj4+Pj4gMy4gZm9yY2UgdmlzaWJsZSBWUkFNIHNwYWNl
IGFuZCB0cmF2ZXJzZSBhbGwgVlJBTSBib3MgdG8gY2hlY2sgaWYNCj4gPj4+Pj4gICAgICAgZXZp
Y3RpbmcgdGhpcyBibyBpcyB2YWx1YWJsZQ0KPiA+Pj4+PiA0LiB3aGVuIGNoZWNraW5nIGEgVk0g
Ym8gKGluIGludmlzaWJsZSBWUkFNKSwgYW1kZ3B1X3ZtX2V2aWN0YWJsZSgpDQo+ID4+Pj4+ICAg
ICAgIHdpbGwgc2V0IGFtZGdwdV92bS0+ZXZpY3RpbmcsIGJ1dCBsYXR0ZXIgZHVlIHRvIG5vdCBp
biB2aXNpYmxlDQo+ID4+Pj4+ICAgICAgIFZSQU0sIHdvbid0IHJlYWxseSBldmljdCBpdCBzbyBu
b3QgYWRkIGl0IHRvIGFtZGdwdV92bS0+ZXZpY3RlZA0KPiA+Pj4+PiA1LiBiZWZvcmUgbmV4dCBD
UyB0byBjbGVhciB0aGUgYW1kZ3B1X3ZtLT5ldmljdGluZywgdXNlciBWTSBvcHMNCj4gPj4+Pj4g
ICAgICAgaW9jdGwgd2lsbCBwYXNzIGFtZGdwdV92bV9yZWFkeSgpIChjaGVjayBhbWRncHVfdm0t
PmV2aWN0ZWQpDQo+ID4+Pj4+ICAgICAgIGJ1dCBmYWlsIGluIGFtZGdwdV92bV9ib191cGRhdGVf
bWFwcGluZygpIChjaGVjaw0KPiA+Pj4+PiAgICAgICBhbWRncHVfdm0tPmV2aWN0aW5nKSBhbmQg
Z2V0IHRoaXMgZXJyb3IgbG9nDQo+ID4+Pj4+DQo+ID4+Pj4+IFRoaXMgZXJyb3Igd29uJ3QgYWZm
ZWN0IGZ1bmN0aW9uYWxpdHkgYXMgbmV4dCBDUyB3aWxsIGZpbmlzaCB0aGUNCj4gPj4+Pj4gd2Fp
dGluZyBWTSBvcHMuIEJ1dCB3ZSdkIGJldHRlciBtYWtlIHRoZSBhbWRncHVfdm0tPmV2aWN0aW5n
DQo+ID4+Pj4+IGNvcnJlY3RseSByZWZsYWN0IHRoZSB2bSBzdGF0dXMgYW5kIGNsZWFyIHRoZSBl
cnJvciBsb2cuDQo+ID4+Pj4gV2VsbCBOQUssIHRoYXQgaXMgaW50ZW50aW9uYWwgYmVoYXZpb3Iu
DQo+ID4+Pj4NCj4gPj4+PiBUaGUgVk0gcGFnZSB0YWJsZXMgd2hlcmUgY29uc2lkZXJlZCBmb3Ig
ZXZpY3Rpb24sIHNvIHNldHRpbmcgdGhlIGZsYWcgaXMNCj4gPj4+PiBjb3JyZWN0IGV2ZW4gd2hl
biB0aGUgcGFnZSB0YWJsZXMgbGF0ZXIgb24gYXJlIG5vdCBhY3R1YWxseSBldmljdGVkLg0KPiA+
Pj4+DQo+ID4+PiBCdXQgdGhpcyB3aWxsIHVubmVjZXNzYXJpbHkgc3RvcCBsYXR0ZXIgdXNlciBW
TSBvcHMgaW4gaW9jdGwgYmVmb3JlIENTDQo+ID4+PiBldmVuIHdoZW4gdGhlIFZNIGJvcyBhcmUg
bm90IGV2aWN0ZWQuDQo+ID4+PiBXb24ndCB0aGlzIGhhdmUgYW55IG5lZ2F0aXZlIGVmZmVjdCB3
aGVuIGNvdWxkIGRvIGJldHRlcj8NCj4gPj4gTm8sIHRoaXMgd2lsbCBoYXZlIGEgcG9zaXRpdmUg
ZWZmZWN0LiBTZWUgdGhlIFZNIHdhcyBhbHJlYWR5IGNvbnNpZGVyZWQNCj4gPj4gZm9yIGV2aWN0
aW9uIGJlY2F1c2UgaXQgaXMgaWRsZS4NCj4gPj4NCj4gPj4gVXBkYXRpbmcgaXQgaW1tZWRpYXRl
bHkgZG9lc24ndCBuZWNlc3NhcmlseSBtYWtlIHNlbnNlLCB3ZSBzaG91bGQgd2FpdA0KPiA+PiB3
aXRoIHRoYXQgdW50aWwgaXRzIG5leHQgdXNhZ2UuDQo+ID4+DQo+ID4+IEFkZGl0aW9uYWwgdG8g
dGhhdCB0aGlzIHBhdGNoIGRvZXNuJ3QgcmVhbGx5IGZpeCB0aGUgcHJvYmxlbSwgaXQganVzdA0K
PiA+PiBtaXRpZ2F0ZXMgaXQuDQo+ID4+DQo+ID4+IEV2aWN0aW9uIGNhbiBmYWlsIGxhdGVyIG9u
IGZvciBhIGNvdXBsZSBvZiByZWFzb25zIGFuZCB3ZSBhYnNvbHV0ZWx5DQo+ID4+IG5lZWQgdG8g
Y2hlY2sgdGhlIGZsYWcgaW5zdGVhZCBvZiB0aGUgbGlzdCBpbiBhbWRncHVfdm1fcmVhZHkoKS4N
Cj4gPiBUaGUgZmxhZyBvbmx5IGZvciBib3RoIGZsYWcgYW5kIGxpc3Q/IExvb2tzIGxpa2Ugc2hv
dWxkIGJlIGJvdGggYXMNCj4gPiB0aGUgbGlzdCBpbmRpY2F0ZSBzb21lIHZtIHBhZ2UgdGFibGUg
bmVlZCB0byBiZSB1cGRhdGVkIGFuZCBjb3VsZA0KPiA+IGRlbGF5IHRoZSB1c2VyIHVwZGF0ZSB3
aXRoIHRoZSBzYW1lIGxvZ2ljIGFzIHlvdSBkZXNjcmliZWQgYWJvdmUuDQo+DQo+IEkgdGhpbmsg
Y2hlY2tpbmcgdGhlIGZsYWcgc2hvdWxkIGJlIGVub3VnaC4gVGhlIGlzc3VlIGlzIHRoYXQgdGhl
IGxpc3QNCj4gd2FzIHRoZXJlIGluaXRpYWxseSwgYnV0IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9u
cyB3ZSBhZGRlZCB0aGUgZmxhZyB3aXRoDQo+IHNlcGFyYXRlIGxvY2sgcHJvdGVjdGlvbiBsYXRl
ciBvbi4NCj4NCkJ1dCBsaXN0IGFuZCBmbGFnIGRvZXMgbm90IGFsaWduIGFsd2F5cywgdGhlcmUg
YXJlIGNhc2VzIGxpa2UNCmxpc3QtZW1wdHkvZmxhZy1zZXQgKHRoaXMgcHJvYmxlbSkgYW5kIGxp
c3Qtbm9uLWVtcHR5L2ZsYWctdW5zZXQgKG5vbi12bSBibw0KZXZpY3Rpb24pLiBJZiBvbmx5IGNo
ZWNrIGZsYWcgbGlzdC1ub24tZW1wdHkvZmxhZy11bnNldCBjaGFuZ2UgYmVoYXZpb3IuDQoNClJl
Z2FyZHMsDQpRaWFuZw0KDQo+IFJlZ2FyZHMsDQo+IENocmlzdGlhbi4NCj4NCj4gPg0KPiA+IFJl
Z2FyZHMsDQo+ID4gUWlhbmcNCj4gPg0KPiA+PiBSZWdhcmRzLA0KPiA+PiBDaHJpc3RpYW4uDQo+
ID4+DQo+ID4+PiBSZWdhcmRzLA0KPiA+Pj4gUWlhbmcNCj4gPj4+DQo+ID4+Pj4gV2hhdCB3ZSBz
aG91bGQgcmF0aGVyIGRvIGlzIHRvIGZpeCBhbWRncHVfdm1fcmVhZHkoKSB0byB0YWtlIGEgbG9v
ayBhdA0KPiA+Pj4+IHRoZSBmbGFnIGluc3RlYWQgb2YgdGhlIGxpbmtlZCBsaXN0Lg0KPiA+Pj4+
DQo+ID4+Pj4gUmVnYXJkcywNCj4gPj4+PiBDaHJpc3RpYW4uDQo+ID4+Pj4NCj4gPj4+Pj4gU2ln
bmVkLW9mZi1ieTogUWlhbmcgWXUgPHFpYW5nLnl1QGFtZC5jb20+DQo+ID4+Pj4+IC0tLQ0KPiA+
Pj4+PiAgICAgZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIHwgODUgKysr
KysrKysrKysrKystLS0tLS0tLS0tLQ0KPiA+Pj4+PiAgICAgMSBmaWxlIGNoYW5nZWQsIDQ3IGlu
c2VydGlvbnMoKyksIDM4IGRlbGV0aW9ucygtKQ0KPiA+Pj4+Pg0KPiA+Pj4+PiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jIGIvZHJpdmVycy9ncHUv
ZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3R0bS5jDQo+ID4+Pj4+IGluZGV4IDVhMzJlZTY2ZDhjOC4u
ODhhMjc5MTEwNTRmIDEwMDY0NA0KPiA+Pj4+PiAtLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2Ft
ZGdwdS9hbWRncHVfdHRtLmMNCj4gPj4+Pj4gKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3R0bS5jDQo+ID4+Pj4+IEBAIC0xMzA2LDQ1ICsxMzA2LDExIEBAIHVpbnQ2NF90
IGFtZGdwdV90dG1fdHRfcHRlX2ZsYWdzKHN0cnVjdCBhbWRncHVfZGV2aWNlICphZGV2LCBzdHJ1
Y3QgdHRtX3R0ICp0dG0sDQo+ID4+Pj4+ICAgICAgICAgcmV0dXJuIGZsYWdzOw0KPiA+Pj4+PiAg
ICAgfQ0KPiA+Pj4+Pg0KPiA+Pj4+PiAtLyoNCj4gPj4+Pj4gLSAqIGFtZGdwdV90dG1fYm9fZXZp
Y3Rpb25fdmFsdWFibGUgLSBDaGVjayB0byBzZWUgaWYgd2UgY2FuIGV2aWN0IGEgYnVmZmVyDQo+
ID4+Pj4+IC0gKiBvYmplY3QuDQo+ID4+Pj4+IC0gKg0KPiA+Pj4+PiAtICogUmV0dXJuIHRydWUg
aWYgZXZpY3Rpb24gaXMgc2Vuc2libGUuIENhbGxlZCBieSB0dG1fbWVtX2V2aWN0X2ZpcnN0KCkg
b24NCj4gPj4+Pj4gLSAqIGJlaGFsZiBvZiB0dG1fYm9fbWVtX2ZvcmNlX3NwYWNlKCkgd2hpY2gg
dHJpZXMgdG8gZXZpY3QgYnVmZmVyIG9iamVjdHMgdW50aWwNCj4gPj4+Pj4gLSAqIGl0IGNhbiBm
aW5kIHNwYWNlIGZvciBhIG5ldyBvYmplY3QgYW5kIGJ5IHR0bV9ib19mb3JjZV9saXN0X2NsZWFu
KCkgd2hpY2ggaXMNCj4gPj4+Pj4gLSAqIHVzZWQgdG8gY2xlYW4gb3V0IGEgbWVtb3J5IHNwYWNl
Lg0KPiA+Pj4+PiAtICovDQo+ID4+Pj4+IC1zdGF0aWMgYm9vbCBhbWRncHVfdHRtX2JvX2V2aWN0
aW9uX3ZhbHVhYmxlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sDQo+ID4+Pj4+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCB0dG1fcGxh
Y2UgKnBsYWNlKQ0KPiA+Pj4+PiArc3RhdGljIGJvb2wgYW1kZ3B1X3R0bV9tZW1fZXZpY3Rpb25f
dmFsdWFibGUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywNCj4gPj4+Pj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCB0dG1fcGxhY2Ug
KnBsYWNlKQ0KPiA+Pj4+PiAgICAgew0KPiA+Pj4+PiAgICAgICAgIHVuc2lnbmVkIGxvbmcgbnVt
X3BhZ2VzID0gYm8tPnJlc291cmNlLT5udW1fcGFnZXM7DQo+ID4+Pj4+ICAgICAgICAgc3RydWN0
IGFtZGdwdV9yZXNfY3Vyc29yIGN1cnNvcjsNCj4gPj4+Pj4gLSAgICAgc3RydWN0IGRtYV9yZXN2
X2xpc3QgKmZsaXN0Ow0KPiA+Pj4+PiAtICAgICBzdHJ1Y3QgZG1hX2ZlbmNlICpmOw0KPiA+Pj4+
PiAtICAgICBpbnQgaTsNCj4gPj4+Pj4gLQ0KPiA+Pj4+PiAtICAgICAvKiBTd2Fwb3V0PyAqLw0K
PiA+Pj4+PiAtICAgICBpZiAoYm8tPnJlc291cmNlLT5tZW1fdHlwZSA9PSBUVE1fUExfU1lTVEVN
KQ0KPiA+Pj4+PiAtICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KPiA+Pj4+PiAtDQo+ID4+Pj4+
IC0gICAgIGlmIChiby0+dHlwZSA9PSB0dG1fYm9fdHlwZV9rZXJuZWwgJiYNCj4gPj4+Pj4gLSAg
ICAgICAgICFhbWRncHVfdm1fZXZpY3RhYmxlKHR0bV90b19hbWRncHVfYm8oYm8pKSkNCj4gPj4+
Pj4gLSAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQo+ID4+Pj4+IC0NCj4gPj4+Pj4gLSAgICAg
LyogSWYgYm8gaXMgYSBLRkQgQk8sIGNoZWNrIGlmIHRoZSBibyBiZWxvbmdzIHRvIHRoZSBjdXJy
ZW50IHByb2Nlc3MuDQo+ID4+Pj4+IC0gICAgICAqIElmIHRydWUsIHRoZW4gcmV0dXJuIGZhbHNl
IGFzIGFueSBLRkQgcHJvY2VzcyBuZWVkcyBhbGwgaXRzIEJPcyB0bw0KPiA+Pj4+PiAtICAgICAg
KiBiZSByZXNpZGVudCB0byBydW4gc3VjY2Vzc2Z1bGx5DQo+ID4+Pj4+IC0gICAgICAqLw0KPiA+
Pj4+PiAtICAgICBmbGlzdCA9IGRtYV9yZXN2X3NoYXJlZF9saXN0KGJvLT5iYXNlLnJlc3YpOw0K
PiA+Pj4+PiAtICAgICBpZiAoZmxpc3QpIHsNCj4gPj4+Pj4gLSAgICAgICAgICAgICBmb3IgKGkg
PSAwOyBpIDwgZmxpc3QtPnNoYXJlZF9jb3VudDsgKytpKSB7DQo+ID4+Pj4+IC0gICAgICAgICAg
ICAgICAgICAgICBmID0gcmN1X2RlcmVmZXJlbmNlX3Byb3RlY3RlZChmbGlzdC0+c2hhcmVkW2ld
LA0KPiA+Pj4+PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbWFfcmVzdl9oZWxkKGJv
LT5iYXNlLnJlc3YpKTsNCj4gPj4+Pj4gLSAgICAgICAgICAgICAgICAgICAgIGlmIChhbWRrZmRf
ZmVuY2VfY2hlY2tfbW0oZiwgY3VycmVudC0+bW0pKQ0KPiA+Pj4+PiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQo+ID4+Pj4+IC0gICAgICAgICAgICAgfQ0KPiA+
Pj4+PiAtICAgICB9DQo+ID4+Pj4+DQo+ID4+Pj4+ICAgICAgICAgc3dpdGNoIChiby0+cmVzb3Vy
Y2UtPm1lbV90eXBlKSB7DQo+ID4+Pj4+ICAgICAgICAgY2FzZSBBTURHUFVfUExfUFJFRU1QVDoN
Cj4gPj4+Pj4gQEAgLTEzNzcsMTAgKzEzNDMsNTMgQEAgc3RhdGljIGJvb2wgYW1kZ3B1X3R0bV9i
b19ldmljdGlvbl92YWx1YWJsZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLA0KPiA+Pj4+
PiAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KPiA+Pj4+Pg0KPiA+Pj4+PiAgICAgICAg
IGRlZmF1bHQ6DQo+ID4+Pj4+IC0gICAgICAgICAgICAgYnJlYWs7DQo+ID4+Pj4+ICsgICAgICAg
ICAgICAgcmV0dXJuIHR0bV9ib19ldmljdGlvbl92YWx1YWJsZShibywgcGxhY2UpOw0KPiA+Pj4+
PiAgICAgICAgIH0NCj4gPj4+Pj4gK30NCj4gPj4+Pj4NCj4gPj4+Pj4gLSAgICAgcmV0dXJuIHR0
bV9ib19ldmljdGlvbl92YWx1YWJsZShibywgcGxhY2UpOw0KPiA+Pj4+PiArLyoNCj4gPj4+Pj4g
KyAqIGFtZGdwdV90dG1fYm9fZXZpY3Rpb25fdmFsdWFibGUgLSBDaGVjayB0byBzZWUgaWYgd2Ug
Y2FuIGV2aWN0IGEgYnVmZmVyDQo+ID4+Pj4+ICsgKiBvYmplY3QuDQo+ID4+Pj4+ICsgKg0KPiA+
Pj4+PiArICogUmV0dXJuIHRydWUgaWYgZXZpY3Rpb24gaXMgc2Vuc2libGUuIENhbGxlZCBieSB0
dG1fbWVtX2V2aWN0X2ZpcnN0KCkgb24NCj4gPj4+Pj4gKyAqIGJlaGFsZiBvZiB0dG1fYm9fbWVt
X2ZvcmNlX3NwYWNlKCkgd2hpY2ggdHJpZXMgdG8gZXZpY3QgYnVmZmVyIG9iamVjdHMgdW50aWwN
Cj4gPj4+Pj4gKyAqIGl0IGNhbiBmaW5kIHNwYWNlIGZvciBhIG5ldyBvYmplY3QgYW5kIGJ5IHR0
bV9ib19mb3JjZV9saXN0X2NsZWFuKCkgd2hpY2ggaXMNCj4gPj4+Pj4gKyAqIHVzZWQgdG8gY2xl
YW4gb3V0IGEgbWVtb3J5IHNwYWNlLg0KPiA+Pj4+PiArICovDQo+ID4+Pj4+ICtzdGF0aWMgYm9v
bCBhbWRncHVfdHRtX2JvX2V2aWN0aW9uX3ZhbHVhYmxlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVj
dCAqYm8sDQo+ID4+Pj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNvbnN0IHN0cnVjdCB0dG1fcGxhY2UgKnBsYWNlKQ0KPiA+Pj4+PiArew0KPiA+Pj4+PiArICAg
ICBzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqZmxpc3Q7DQo+ID4+Pj4+ICsgICAgIHN0cnVjdCBkbWFf
ZmVuY2UgKmY7DQo+ID4+Pj4+ICsgICAgIGludCBpOw0KPiA+Pj4+PiArDQo+ID4+Pj4+ICsgICAg
IC8qIFN3YXBvdXQ/ICovDQo+ID4+Pj4+ICsgICAgIGlmIChiby0+cmVzb3VyY2UtPm1lbV90eXBl
ID09IFRUTV9QTF9TWVNURU0pDQo+ID4+Pj4+ICsgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQo+
ID4+Pj4+ICsNCj4gPj4+Pj4gKyAgICAgLyogSWYgYm8gaXMgYSBLRkQgQk8sIGNoZWNrIGlmIHRo
ZSBibyBiZWxvbmdzIHRvIHRoZSBjdXJyZW50IHByb2Nlc3MuDQo+ID4+Pj4+ICsgICAgICAqIElm
IHRydWUsIHRoZW4gcmV0dXJuIGZhbHNlIGFzIGFueSBLRkQgcHJvY2VzcyBuZWVkcyBhbGwgaXRz
IEJPcyB0bw0KPiA+Pj4+PiArICAgICAgKiBiZSByZXNpZGVudCB0byBydW4gc3VjY2Vzc2Z1bGx5
DQo+ID4+Pj4+ICsgICAgICAqLw0KPiA+Pj4+PiArICAgICBmbGlzdCA9IGRtYV9yZXN2X3NoYXJl
ZF9saXN0KGJvLT5iYXNlLnJlc3YpOw0KPiA+Pj4+PiArICAgICBpZiAoZmxpc3QpIHsNCj4gPj4+
Pj4gKyAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZmxpc3QtPnNoYXJlZF9jb3VudDsgKytp
KSB7DQo+ID4+Pj4+ICsgICAgICAgICAgICAgICAgICAgICBmID0gcmN1X2RlcmVmZXJlbmNlX3By
b3RlY3RlZChmbGlzdC0+c2hhcmVkW2ldLA0KPiA+Pj4+PiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBkbWFfcmVzdl9oZWxkKGJvLT5iYXNlLnJlc3YpKTsNCj4gPj4+Pj4gKyAgICAgICAg
ICAgICAgICAgICAgIGlmIChhbWRrZmRfZmVuY2VfY2hlY2tfbW0oZiwgY3VycmVudC0+bW0pKQ0K
PiA+Pj4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQo+ID4+
Pj4+ICsgICAgICAgICAgICAgfQ0KPiA+Pj4+PiArICAgICB9DQo+ID4+Pj4+ICsNCj4gPj4+Pj4g
KyAgICAgLyogQ2hlY2sgYnkgZGlmZmVyZW50IG1lbSB0eXBlLiAqLw0KPiA+Pj4+PiArICAgICBp
ZiAoIWFtZGdwdV90dG1fbWVtX2V2aWN0aW9uX3ZhbHVhYmxlKGJvLCBwbGFjZSkpDQo+ID4+Pj4+
ICsgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KPiA+Pj4+PiArDQo+ID4+Pj4+ICsgICAgIC8q
IFZNIGJvIHNob3VsZCBiZSBjaGVja2VkIGF0IGxhc3QgYmVjYXVzZSBpdCB3aWxsIG1hcmsgVk0g
ZXZpY3RpbmcuICovDQo+ID4+Pj4+ICsgICAgIGlmIChiby0+dHlwZSA9PSB0dG1fYm9fdHlwZV9r
ZXJuZWwpDQo+ID4+Pj4+ICsgICAgICAgICAgICAgcmV0dXJuIGFtZGdwdV92bV9ldmljdGFibGUo
dHRtX3RvX2FtZGdwdV9ibyhibykpOw0KPiA+Pj4+PiArDQo+ID4+Pj4+ICsgICAgIHJldHVybiB0
cnVlOw0KPiA+Pj4+PiAgICAgfQ0KPiA+Pj4+Pg0KPiA+Pj4+PiAgICAgc3RhdGljIHZvaWQgYW1k
Z3B1X3R0bV92cmFtX21tX2FjY2VzcyhzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwgbG9mZl90
IHBvcywNCj4NCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CkxpbmFyby1tbS1zaWcgbWFpbGluZyBsaXN0IC0tIGxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJv
Lm9yZwpUbyB1bnN1YnNjcmliZSBzZW5kIGFuIGVtYWlsIHRvIGxpbmFyby1tbS1zaWctbGVhdmVA
bGlzdHMubGluYXJvLm9yZwo=
