Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id F0E2A3D9E00
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 29 Jul 2021 09:03:54 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 13EFF60639
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 29 Jul 2021 07:03:52 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 7314D647B6; Thu, 29 Jul 2021 07:03:42 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id A57706350B;
	Thu, 29 Jul 2021 07:03:38 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 789C760639
 for <linaro-mm-sig@lists.linaro.org>; Thu, 29 Jul 2021 07:03:35 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 76A6861179; Thu, 29 Jul 2021 07:03:35 +0000 (UTC)
Received: from mail-wr1-f54.google.com (mail-wr1-f54.google.com
 [209.85.221.54])
 by lists.linaro.org (Postfix) with ESMTPS id 63F5A609B5
 for <linaro-mm-sig@lists.linaro.org>; Thu, 29 Jul 2021 07:03:33 +0000 (UTC)
Received: by mail-wr1-f54.google.com with SMTP id d8so5533710wrm.4
 for <linaro-mm-sig@lists.linaro.org>; Thu, 29 Jul 2021 00:03:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references:mime-version
 :content-transfer-encoding;
 bh=P06/wDjljvLTcx1hkh+6VSS2u+Qmgh2zG3JkU3VuM3o=;
 b=RQlG2JN2cixyCnENA0RNSrhMF+N5O9W9x1kHPTFY/RHoYEXNN4qcQSw7nYwcvR8kJH
 zFqwmZR0E2spuWiJcbHYqUSjbCCFshI2AkCDXBFRSd+dBNZozzz3YLuZJROc43GtdjN6
 DRv1PmZN7YekdgNANrRoygvu6Snqjv6pn/9DLeZoaXW19vsRckJc071Y4S/a6kB9gpdW
 /yA+Dssr/hLwK91M78dfEQ2L+w2YkGmBVnsIu/47zc1eH3XYsQbUS1UYMjHmG6dC5L3b
 U7IsGT0LPwaVc3YFEJarvzUkkDSlGf98IreaxB5Zy3i+Ga5vmEE+vWwlyTqHBhE2bmSp
 pDUQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=P06/wDjljvLTcx1hkh+6VSS2u+Qmgh2zG3JkU3VuM3o=;
 b=G2/h+0wXz2Gtv3qmMzYDEDjCC4GsMq03CkzAq7ybKMHbvynVFvEvgMSYotRTO5q9VE
 8anXPjc1xuKhDRo+bd2xoyhWY8931f1sasfRQrT9wZ6kcakeagHXcWaiQEbcAnR/EK2u
 m++sXoGMT0s6+3hsvc00o+L7E9/+XXy1TqP5d/RUSnmkahUwekYeoby8oLExe2SvDEhy
 wM3IVZMWWv5VIwtoXBAex8jsxiJ069VkB8RlqfU50wxHOfEk4Hv8J5Qc6u5tchploijM
 BMnkr0XLiqn2gFZh4+cDoUzFrSK8NsAEGYXpL17c3Mm7T6ofBlC6n/Qg02k0egErfSkR
 I4Hw==
X-Gm-Message-State: AOAM533SjhZiSFZa0GHohAc1S+3W2Qp3zeaH4IzaSiT7lggw8gvfkeus
 PerwyFxz9ftDoP7EywMEFJc=
X-Google-Smtp-Source: ABdhPJyy86twjvGmaQ0gMV2Px9gb/rPdfWDy5OE0mP1Q/unWj8BME/5PlqbCHnlb6m4njsx3qREmYw==
X-Received: by 2002:adf:ebc5:: with SMTP id v5mr3130106wrn.269.1627542212459; 
 Thu, 29 Jul 2021 00:03:32 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:4e80:335d:252f:540b])
 by smtp.gmail.com with ESMTPSA id h14sm2177527wrp.55.2021.07.29.00.03.31
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 29 Jul 2021 00:03:32 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: sumit.semwal@linaro.org, gustavo@padovan.org, daniel@ffwll.ch,
 linux-media@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linaro-mm-sig@lists.linaro.org
Date: Thu, 29 Jul 2021 09:03:29 +0200
Message-Id: <20210729070330.41443-2-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20210729070330.41443-1-christian.koenig@amd.com>
References: <20210729070330.41443-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: [Linaro-mm-sig] [PATCH 2/3] dma-buf: nuke DMA_FENCE_TRACE macros
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

T25seSB0aGUgRFJNIEdQVSBzY2hlZHVsZXIsIHJhZGVvbiBhbmQgYW1kZ3B1IHdoZXJlIHVzaW5n
IHRoZW0gYW5kIHRoZXkgZGVwZW5kCm9uIGEgbm9uIGV4aXN0aW5nIGNvbmZpZyBvcHRpb24gdG8g
YWN0dWFsbHkgZW1pdCBzb21lIGNvZGUuCgpOdWtlIHRoZW0gYW5kIGNsZWFuIHVwIHRoZSBkbWFf
ZmVuY2Vfc2lnbmFsKiByZXR1cm4gdmFsdWUuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2
bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9kbWEtYnVmL2RtYS1m
ZW5jZS5jICAgICAgICAgICAgICAgfCA0NCArKysrKy0tLS0tLS0tLS0tLS0tLS0tLQogZHJpdmVy
cy9kbWEtYnVmL3N0LWRtYS1mZW5jZS5jICAgICAgICAgICAgfCAxMiArKy0tLS0tCiBkcml2ZXJz
L2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYyB8IDEwICstLS0tLQogZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yYWRlb25fZmVuY2UuYyAgICAgfCAyNCArKystLS0tLS0tLS0tCiBkcml2
ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2ZlbmNlLmMgICB8IDE4ICsrLS0tLS0tLS0KIGlu
Y2x1ZGUvbGludXgvZG1hLWZlbmNlLmggICAgICAgICAgICAgICAgIHwgMzIgKysrLS0tLS0tLS0t
LS0tLS0KIDYgZmlsZXMgY2hhbmdlZCwgMjMgaW5zZXJ0aW9ucygrKSwgMTE3IGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtZmVuY2UuYyBiL2RyaXZlcnMvZG1h
LWJ1Zi9kbWEtZmVuY2UuYwppbmRleCBjZTBmNWVmZjU3NWQuLjIxY2JhMGY3NGU2OSAxMDA2NDQK
LS0tIGEvZHJpdmVycy9kbWEtYnVmL2RtYS1mZW5jZS5jCisrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9k
bWEtZmVuY2UuYwpAQCAtMzUwLDEyICszNTAsOSBAQCB2b2lkIF9fZG1hX2ZlbmNlX21pZ2h0X3dh
aXQodm9pZCkKICAqCiAgKiBVbmxpa2UgZG1hX2ZlbmNlX3NpZ25hbF90aW1lc3RhbXAoKSwgdGhp
cyBmdW5jdGlvbiBtdXN0IGJlIGNhbGxlZCB3aXRoCiAgKiAmZG1hX2ZlbmNlLmxvY2sgaGVsZC4K
LSAqCi0gKiBSZXR1cm5zIDAgb24gc3VjY2VzcyBhbmQgYSBuZWdhdGl2ZSBlcnJvciB2YWx1ZSB3
aGVuIEBmZW5jZSBoYXMgYmVlbgotICogc2lnbmFsbGVkIGFscmVhZHkuCiAgKi8KLWludCBkbWFf
ZmVuY2Vfc2lnbmFsX3RpbWVzdGFtcF9sb2NrZWQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsCi0J
CQkJICAgICAga3RpbWVfdCB0aW1lc3RhbXApCit2b2lkIGRtYV9mZW5jZV9zaWduYWxfdGltZXN0
YW1wX2xvY2tlZChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwKKwkJCQkgICAgICAga3RpbWVfdCB0
aW1lc3RhbXApCiB7CiAJc3RydWN0IGRtYV9mZW5jZV9jYiAqY3VyLCAqdG1wOwogCXN0cnVjdCBs
aXN0X2hlYWQgY2JfbGlzdDsKQEAgLTM2NCw3ICszNjEsNyBAQCBpbnQgZG1hX2ZlbmNlX3NpZ25h
bF90aW1lc3RhbXBfbG9ja2VkKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlLAogCiAJaWYgKHVubGlr
ZWx5KHRlc3RfYW5kX3NldF9iaXQoRE1BX0ZFTkNFX0ZMQUdfU0lHTkFMRURfQklULAogCQkJCSAg
ICAgICZmZW5jZS0+ZmxhZ3MpKSkKLQkJcmV0dXJuIC1FSU5WQUw7CisJCXJldHVybjsKIAogCS8q
IFN0YXNoIHRoZSBjYl9saXN0IGJlZm9yZSByZXBsYWNpbmcgaXQgd2l0aCB0aGUgdGltZXN0YW1w
ICovCiAJbGlzdF9yZXBsYWNlKCZmZW5jZS0+Y2JfbGlzdCwgJmNiX2xpc3QpOwpAQCAtMzc3LDgg
KzM3NCw2IEBAIGludCBkbWFfZmVuY2Vfc2lnbmFsX3RpbWVzdGFtcF9sb2NrZWQoc3RydWN0IGRt
YV9mZW5jZSAqZmVuY2UsCiAJCUlOSVRfTElTVF9IRUFEKCZjdXItPm5vZGUpOwogCQljdXItPmZ1
bmMoZmVuY2UsIGN1cik7CiAJfQotCi0JcmV0dXJuIDA7CiB9CiBFWFBPUlRfU1lNQk9MKGRtYV9m
ZW5jZV9zaWduYWxfdGltZXN0YW1wX2xvY2tlZCk7CiAKQEAgLTM5MywyMyArMzg4LDE0IEBAIEVY
UE9SVF9TWU1CT0woZG1hX2ZlbmNlX3NpZ25hbF90aW1lc3RhbXBfbG9ja2VkKTsKICAqIGNhbiBv
bmx5IGdvIGZyb20gdGhlIHVuc2lnbmFsZWQgdG8gdGhlIHNpZ25hbGVkIHN0YXRlIGFuZCBub3Qg
YmFjaywgaXQgd2lsbAogICogb25seSBiZSBlZmZlY3RpdmUgdGhlIGZpcnN0IHRpbWUuIFNldCB0
aGUgdGltZXN0YW1wIHByb3ZpZGVkIGFzIHRoZSBmZW5jZQogICogc2lnbmFsIHRpbWVzdGFtcC4K
LSAqCi0gKiBSZXR1cm5zIDAgb24gc3VjY2VzcyBhbmQgYSBuZWdhdGl2ZSBlcnJvciB2YWx1ZSB3
aGVuIEBmZW5jZSBoYXMgYmVlbgotICogc2lnbmFsbGVkIGFscmVhZHkuCiAgKi8KLWludCBkbWFf
ZmVuY2Vfc2lnbmFsX3RpbWVzdGFtcChzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSwga3RpbWVfdCB0
aW1lc3RhbXApCit2b2lkIGRtYV9mZW5jZV9zaWduYWxfdGltZXN0YW1wKHN0cnVjdCBkbWFfZmVu
Y2UgKmZlbmNlLCBrdGltZV90IHRpbWVzdGFtcCkKIHsKIAl1bnNpZ25lZCBsb25nIGZsYWdzOwot
CWludCByZXQ7Ci0KLQlpZiAoIWZlbmNlKQotCQlyZXR1cm4gLUVJTlZBTDsKIAogCXNwaW5fbG9j
a19pcnFzYXZlKGZlbmNlLT5sb2NrLCBmbGFncyk7Ci0JcmV0ID0gZG1hX2ZlbmNlX3NpZ25hbF90
aW1lc3RhbXBfbG9ja2VkKGZlbmNlLCB0aW1lc3RhbXApOworCWRtYV9mZW5jZV9zaWduYWxfdGlt
ZXN0YW1wX2xvY2tlZChmZW5jZSwgdGltZXN0YW1wKTsKIAlzcGluX3VubG9ja19pcnFyZXN0b3Jl
KGZlbmNlLT5sb2NrLCBmbGFncyk7Ci0KLQlyZXR1cm4gcmV0OwogfQogRVhQT1JUX1NZTUJPTChk
bWFfZmVuY2Vfc2lnbmFsX3RpbWVzdGFtcCk7CiAKQEAgLTQyNSwxMyArNDExLDEwIEBAIEVYUE9S
VF9TWU1CT0woZG1hX2ZlbmNlX3NpZ25hbF90aW1lc3RhbXApOwogICoKICAqIFVubGlrZSBkbWFf
ZmVuY2Vfc2lnbmFsKCksIHRoaXMgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgd2l0aCAmZG1hX2Zl
bmNlLmxvY2sKICAqIGhlbGQuCi0gKgotICogUmV0dXJucyAwIG9uIHN1Y2Nlc3MgYW5kIGEgbmVn
YXRpdmUgZXJyb3IgdmFsdWUgd2hlbiBAZmVuY2UgaGFzIGJlZW4KLSAqIHNpZ25hbGxlZCBhbHJl
YWR5LgogICovCi1pbnQgZG1hX2ZlbmNlX3NpZ25hbF9sb2NrZWQoc3RydWN0IGRtYV9mZW5jZSAq
ZmVuY2UpCit2b2lkIGRtYV9mZW5jZV9zaWduYWxfbG9ja2VkKHN0cnVjdCBkbWFfZmVuY2UgKmZl
bmNlKQogewotCXJldHVybiBkbWFfZmVuY2Vfc2lnbmFsX3RpbWVzdGFtcF9sb2NrZWQoZmVuY2Us
IGt0aW1lX2dldCgpKTsKKwlkbWFfZmVuY2Vfc2lnbmFsX3RpbWVzdGFtcF9sb2NrZWQoZmVuY2Us
IGt0aW1lX2dldCgpKTsKIH0KIEVYUE9SVF9TWU1CT0woZG1hX2ZlbmNlX3NpZ25hbF9sb2NrZWQp
OwogCkBAIC00NDQsMjggKzQyNywxOSBAQCBFWFBPUlRfU1lNQk9MKGRtYV9mZW5jZV9zaWduYWxf
bG9ja2VkKTsKICAqIGRtYV9mZW5jZV9hZGRfY2FsbGJhY2soKS4gQ2FuIGJlIGNhbGxlZCBtdWx0
aXBsZSB0aW1lcywgYnV0IHNpbmNlIGEgZmVuY2UKICAqIGNhbiBvbmx5IGdvIGZyb20gdGhlIHVu
c2lnbmFsZWQgdG8gdGhlIHNpZ25hbGVkIHN0YXRlIGFuZCBub3QgYmFjaywgaXQgd2lsbAogICog
b25seSBiZSBlZmZlY3RpdmUgdGhlIGZpcnN0IHRpbWUuCi0gKgotICogUmV0dXJucyAwIG9uIHN1
Y2Nlc3MgYW5kIGEgbmVnYXRpdmUgZXJyb3IgdmFsdWUgd2hlbiBAZmVuY2UgaGFzIGJlZW4KLSAq
IHNpZ25hbGxlZCBhbHJlYWR5LgogICovCi1pbnQgZG1hX2ZlbmNlX3NpZ25hbChzdHJ1Y3QgZG1h
X2ZlbmNlICpmZW5jZSkKK3ZvaWQgZG1hX2ZlbmNlX3NpZ25hbChzdHJ1Y3QgZG1hX2ZlbmNlICpm
ZW5jZSkKIHsKIAl1bnNpZ25lZCBsb25nIGZsYWdzOwotCWludCByZXQ7CiAJYm9vbCB0bXA7CiAK
LQlpZiAoIWZlbmNlKQotCQlyZXR1cm4gLUVJTlZBTDsKLQogCXRtcCA9IGRtYV9mZW5jZV9iZWdp
bl9zaWduYWxsaW5nKCk7CiAKIAlzcGluX2xvY2tfaXJxc2F2ZShmZW5jZS0+bG9jaywgZmxhZ3Mp
OwotCXJldCA9IGRtYV9mZW5jZV9zaWduYWxfdGltZXN0YW1wX2xvY2tlZChmZW5jZSwga3RpbWVf
Z2V0KCkpOworCWRtYV9mZW5jZV9zaWduYWxfdGltZXN0YW1wX2xvY2tlZChmZW5jZSwga3RpbWVf
Z2V0KCkpOwogCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoZmVuY2UtPmxvY2ssIGZsYWdzKTsKIAog
CWRtYV9mZW5jZV9lbmRfc2lnbmFsbGluZyh0bXApOwotCi0JcmV0dXJuIHJldDsKIH0KIEVYUE9S
VF9TWU1CT0woZG1hX2ZlbmNlX3NpZ25hbCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1
Zi9zdC1kbWEtZmVuY2UuYyBiL2RyaXZlcnMvZG1hLWJ1Zi9zdC1kbWEtZmVuY2UuYwppbmRleCBj
OGExMmQ3YWQ3MWEuLmU4OTAwMWQ4ODczZiAxMDA2NDQKLS0tIGEvZHJpdmVycy9kbWEtYnVmL3N0
LWRtYS1mZW5jZS5jCisrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9zdC1kbWEtZmVuY2UuYwpAQCAtMTIy
LDIxICsxMjIsMTMgQEAgc3RhdGljIGludCB0ZXN0X3NpZ25hbGluZyh2b2lkICphcmcpCiAJCWdv
dG8gZXJyX2ZyZWU7CiAJfQogCi0JaWYgKGRtYV9mZW5jZV9zaWduYWwoZikpIHsKLQkJcHJfZXJy
KCJGZW5jZSByZXBvcnRlZCBiZWluZyBhbHJlYWR5IHNpZ25hbGVkXG4iKTsKLQkJZ290byBlcnJf
ZnJlZTsKLQl9Ci0KKwlkbWFfZmVuY2Vfc2lnbmFsKGYpOwogCWlmICghZG1hX2ZlbmNlX2lzX3Np
Z25hbGVkKGYpKSB7CiAJCXByX2VycigiRmVuY2Ugbm90IHJlcG9ydGluZyBzaWduYWxlZFxuIik7
CiAJCWdvdG8gZXJyX2ZyZWU7CiAJfQogCi0JaWYgKCFkbWFfZmVuY2Vfc2lnbmFsKGYpKSB7Ci0J
CXByX2VycigiRmVuY2UgcmVwb3J0ZWQgbm90IGJlaW5nIGFscmVhZHkgc2lnbmFsZWRcbiIpOwot
CQlnb3RvIGVycl9mcmVlOwotCX0KLQorCWRtYV9mZW5jZV9zaWduYWwoZik7CiAJZXJyID0gMDsK
IGVycl9mcmVlOgogCWRtYV9mZW5jZV9wdXQoZik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vYW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1
L2FtZGdwdV9mZW5jZS5jCmluZGV4IGQ0NTQ3ZDE5NTE3My4uMzk3ODcyNzc5YzMxIDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfZmVuY2UuYwpAQCAtMjQ2LDcgKzI0Niw2IEBA
IGJvb2wgYW1kZ3B1X2ZlbmNlX3Byb2Nlc3Moc3RydWN0IGFtZGdwdV9yaW5nICpyaW5nKQogCXN0
cnVjdCBhbWRncHVfZmVuY2VfZHJpdmVyICpkcnYgPSAmcmluZy0+ZmVuY2VfZHJ2OwogCXN0cnVj
dCBhbWRncHVfZGV2aWNlICphZGV2ID0gcmluZy0+YWRldjsKIAl1aW50MzJfdCBzZXEsIGxhc3Rf
c2VxOwotCWludCByOwogCiAJZG8gewogCQlsYXN0X3NlcSA9IGF0b21pY19yZWFkKCZyaW5nLT5m
ZW5jZV9kcnYubGFzdF9zZXEpOwpAQCAtMjc4LDEyICsyNzcsNyBAQCBib29sIGFtZGdwdV9mZW5j
ZV9wcm9jZXNzKHN0cnVjdCBhbWRncHVfcmluZyAqcmluZykKIAkJaWYgKCFmZW5jZSkKIAkJCWNv
bnRpbnVlOwogCi0JCXIgPSBkbWFfZmVuY2Vfc2lnbmFsKGZlbmNlKTsKLQkJaWYgKCFyKQotCQkJ
RE1BX0ZFTkNFX1RSQUNFKGZlbmNlLCAic2lnbmFsZWQgZnJvbSBpcnEgY29udGV4dFxuIik7Ci0J
CWVsc2UKLQkJCUJVRygpOwotCisJCWRtYV9mZW5jZV9zaWduYWwoZmVuY2UpOwogCQlkbWFfZmVu
Y2VfcHV0KGZlbmNlKTsKIAkJcG1fcnVudGltZV9tYXJrX2xhc3RfYnVzeShhZGV2X3RvX2RybShh
ZGV2KS0+ZGV2KTsKIAkJcG1fcnVudGltZV9wdXRfYXV0b3N1c3BlbmQoYWRldl90b19kcm0oYWRl
diktPmRldik7CkBAIC02NzMsOCArNjY3LDYgQEAgc3RhdGljIGJvb2wgYW1kZ3B1X2ZlbmNlX2Vu
YWJsZV9zaWduYWxpbmcoc3RydWN0IGRtYV9mZW5jZSAqZikKIAlpZiAoIXRpbWVyX3BlbmRpbmco
JnJpbmctPmZlbmNlX2Rydi5mYWxsYmFja190aW1lcikpCiAJCWFtZGdwdV9mZW5jZV9zY2hlZHVs
ZV9mYWxsYmFjayhyaW5nKTsKIAotCURNQV9GRU5DRV9UUkFDRSgmZmVuY2UtPmJhc2UsICJhcm1l
ZCBvbiByaW5nICVpIVxuIiwgcmluZy0+aWR4KTsKLQogCXJldHVybiB0cnVlOwogfQogCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9mZW5jZS5jIGIvZHJpdmVycy9n
cHUvZHJtL3JhZGVvbi9yYWRlb25fZmVuY2UuYwppbmRleCAxOGYyYzJlMGRmYjMuLjNmMzUxZDIy
MmNiYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3JhZGVvbi9yYWRlb25fZmVuY2UuYwor
KysgYi9kcml2ZXJzL2dwdS9kcm0vcmFkZW9uL3JhZGVvbl9mZW5jZS5jCkBAIC0xNzYsMTggKzE3
NiwxMSBAQCBzdGF0aWMgaW50IHJhZGVvbl9mZW5jZV9jaGVja19zaWduYWxlZCh3YWl0X3F1ZXVl
X2VudHJ5X3QgKndhaXQsIHVuc2lnbmVkIG1vZGUsCiAJICovCiAJc2VxID0gYXRvbWljNjRfcmVh
ZCgmZmVuY2UtPnJkZXYtPmZlbmNlX2RydltmZW5jZS0+cmluZ10ubGFzdF9zZXEpOwogCWlmIChz
ZXEgPj0gZmVuY2UtPnNlcSkgewotCQlpbnQgcmV0ID0gZG1hX2ZlbmNlX3NpZ25hbF9sb2NrZWQo
JmZlbmNlLT5iYXNlKTsKLQotCQlpZiAoIXJldCkKLQkJCURNQV9GRU5DRV9UUkFDRSgmZmVuY2Ut
PmJhc2UsICJzaWduYWxlZCBmcm9tIGlycSBjb250ZXh0XG4iKTsKLQkJZWxzZQotCQkJRE1BX0ZF
TkNFX1RSQUNFKCZmZW5jZS0+YmFzZSwgIndhcyBhbHJlYWR5IHNpZ25hbGVkXG4iKTsKLQorCQlk
bWFfZmVuY2Vfc2lnbmFsX2xvY2tlZCgmZmVuY2UtPmJhc2UpOwogCQlyYWRlb25faXJxX2ttc19z
d19pcnFfcHV0KGZlbmNlLT5yZGV2LCBmZW5jZS0+cmluZyk7CiAJCV9fcmVtb3ZlX3dhaXRfcXVl
dWUoJmZlbmNlLT5yZGV2LT5mZW5jZV9xdWV1ZSwgJmZlbmNlLT5mZW5jZV93YWtlKTsKIAkJZG1h
X2ZlbmNlX3B1dCgmZmVuY2UtPmJhc2UpOwotCX0gZWxzZQotCQlETUFfRkVOQ0VfVFJBQ0UoJmZl
bmNlLT5iYXNlLCAicGVuZGluZ1xuIik7CisJfQogCXJldHVybiAwOwogfQogCkBAIC00MjIsOCAr
NDE1LDYgQEAgc3RhdGljIGJvb2wgcmFkZW9uX2ZlbmNlX2VuYWJsZV9zaWduYWxpbmcoc3RydWN0
IGRtYV9mZW5jZSAqZikKIAlmZW5jZS0+ZmVuY2Vfd2FrZS5mdW5jID0gcmFkZW9uX2ZlbmNlX2No
ZWNrX3NpZ25hbGVkOwogCV9fYWRkX3dhaXRfcXVldWUoJnJkZXYtPmZlbmNlX3F1ZXVlLCAmZmVu
Y2UtPmZlbmNlX3dha2UpOwogCWRtYV9mZW5jZV9nZXQoZik7Ci0KLQlETUFfRkVOQ0VfVFJBQ0Uo
JmZlbmNlLT5iYXNlLCAiYXJtZWQgb24gcmluZyAlaSFcbiIsIGZlbmNlLT5yaW5nKTsKIAlyZXR1
cm4gdHJ1ZTsKIH0KIApAQCAtNDQxLDExICs0MzIsNyBAQCBib29sIHJhZGVvbl9mZW5jZV9zaWdu
YWxlZChzdHJ1Y3QgcmFkZW9uX2ZlbmNlICpmZW5jZSkKIAkJcmV0dXJuIHRydWU7CiAKIAlpZiAo
cmFkZW9uX2ZlbmNlX3NlcV9zaWduYWxlZChmZW5jZS0+cmRldiwgZmVuY2UtPnNlcSwgZmVuY2Ut
PnJpbmcpKSB7Ci0JCWludCByZXQ7Ci0KLQkJcmV0ID0gZG1hX2ZlbmNlX3NpZ25hbCgmZmVuY2Ut
PmJhc2UpOwotCQlpZiAoIXJldCkKLQkJCURNQV9GRU5DRV9UUkFDRSgmZmVuY2UtPmJhc2UsICJz
aWduYWxlZCBmcm9tIHJhZGVvbl9mZW5jZV9zaWduYWxlZFxuIik7CisJCWRtYV9mZW5jZV9zaWdu
YWwoJmZlbmNlLT5iYXNlKTsKIAkJcmV0dXJuIHRydWU7CiAJfQogCXJldHVybiBmYWxzZTsKQEAg
LTU1MCw3ICs1MzcsNiBAQCBsb25nIHJhZGVvbl9mZW5jZV93YWl0X3RpbWVvdXQoc3RydWN0IHJh
ZGVvbl9mZW5jZSAqZmVuY2UsIGJvb2wgaW50ciwgbG9uZyB0aW1lbwogewogCXVpbnQ2NF90IHNl
cVtSQURFT05fTlVNX1JJTkdTXSA9IHt9OwogCWxvbmcgcjsKLQlpbnQgcl9zaWc7CiAKIAkvKgog
CSAqIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG5vdCBiZSBjYWxsZWQgb24gIXJhZGVvbiBmZW5jZXMu
CkBAIC01NjcsOSArNTUzLDcgQEAgbG9uZyByYWRlb25fZmVuY2Vfd2FpdF90aW1lb3V0KHN0cnVj
dCByYWRlb25fZmVuY2UgKmZlbmNlLCBib29sIGludHIsIGxvbmcgdGltZW8KIAkJcmV0dXJuIHI7
CiAJfQogCi0Jcl9zaWcgPSBkbWFfZmVuY2Vfc2lnbmFsKCZmZW5jZS0+YmFzZSk7Ci0JaWYgKCFy
X3NpZykKLQkJRE1BX0ZFTkNFX1RSQUNFKCZmZW5jZS0+YmFzZSwgInNpZ25hbGVkIGZyb20gZmVu
Y2Vfd2FpdFxuIik7CisJZG1hX2ZlbmNlX3NpZ25hbCgmZmVuY2UtPmJhc2UpOwogCXJldHVybiBy
OwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2ZlbmNl
LmMgYi9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2ZlbmNlLmMKaW5kZXggNjlkZTJj
NzY3MzFmLi4zNzM2NzQ2YzQ3YmQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVs
ZXIvc2NoZWRfZmVuY2UuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX2Zl
bmNlLmMKQEAgLTUwLDI2ICs1MCwxMiBAQCBzdGF0aWMgdm9pZCBfX2V4aXQgZHJtX3NjaGVkX2Zl
bmNlX3NsYWJfZmluaSh2b2lkKQogCiB2b2lkIGRybV9zY2hlZF9mZW5jZV9zY2hlZHVsZWQoc3Ry
dWN0IGRybV9zY2hlZF9mZW5jZSAqZmVuY2UpCiB7Ci0JaW50IHJldCA9IGRtYV9mZW5jZV9zaWdu
YWwoJmZlbmNlLT5zY2hlZHVsZWQpOwotCi0JaWYgKCFyZXQpCi0JCURNQV9GRU5DRV9UUkFDRSgm
ZmVuY2UtPnNjaGVkdWxlZCwKLQkJCQkic2lnbmFsZWQgZnJvbSBpcnEgY29udGV4dFxuIik7Ci0J
ZWxzZQotCQlETUFfRkVOQ0VfVFJBQ0UoJmZlbmNlLT5zY2hlZHVsZWQsCi0JCQkJIndhcyBhbHJl
YWR5IHNpZ25hbGVkXG4iKTsKKwlkbWFfZmVuY2Vfc2lnbmFsKCZmZW5jZS0+c2NoZWR1bGVkKTsK
IH0KIAogdm9pZCBkcm1fc2NoZWRfZmVuY2VfZmluaXNoZWQoc3RydWN0IGRybV9zY2hlZF9mZW5j
ZSAqZmVuY2UpCiB7Ci0JaW50IHJldCA9IGRtYV9mZW5jZV9zaWduYWwoJmZlbmNlLT5maW5pc2hl
ZCk7Ci0KLQlpZiAoIXJldCkKLQkJRE1BX0ZFTkNFX1RSQUNFKCZmZW5jZS0+ZmluaXNoZWQsCi0J
CQkJInNpZ25hbGVkIGZyb20gaXJxIGNvbnRleHRcbiIpOwotCWVsc2UKLQkJRE1BX0ZFTkNFX1RS
QUNFKCZmZW5jZS0+ZmluaXNoZWQsCi0JCQkJIndhcyBhbHJlYWR5IHNpZ25hbGVkXG4iKTsKKwlk
bWFfZmVuY2Vfc2lnbmFsKCZmZW5jZS0+ZmluaXNoZWQpOwogfQogCiBzdGF0aWMgY29uc3QgY2hh
ciAqZHJtX3NjaGVkX2ZlbmNlX2dldF9kcml2ZXJfbmFtZShzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5j
ZSkKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvZG1hLWZlbmNlLmggYi9pbmNsdWRlL2xpbnV4
L2RtYS1mZW5jZS5oCmluZGV4IDZmZmI0YjJjNjM3MS4uMDI3ZGIyM2ZkNGUzIDEwMDY0NAotLS0g
YS9pbmNsdWRlL2xpbnV4L2RtYS1mZW5jZS5oCisrKyBiL2luY2x1ZGUvbGludXgvZG1hLWZlbmNl
LmgKQEAgLTM3MCwxMSArMzcwLDExIEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBkbWFfZmVuY2VfZW5k
X3NpZ25hbGxpbmcoYm9vbCBjb29raWUpIHt9CiBzdGF0aWMgaW5saW5lIHZvaWQgX19kbWFfZmVu
Y2VfbWlnaHRfd2FpdCh2b2lkKSB7fQogI2VuZGlmCiAKLWludCBkbWFfZmVuY2Vfc2lnbmFsKHN0
cnVjdCBkbWFfZmVuY2UgKmZlbmNlKTsKLWludCBkbWFfZmVuY2Vfc2lnbmFsX2xvY2tlZChzdHJ1
Y3QgZG1hX2ZlbmNlICpmZW5jZSk7Ci1pbnQgZG1hX2ZlbmNlX3NpZ25hbF90aW1lc3RhbXAoc3Ry
dWN0IGRtYV9mZW5jZSAqZmVuY2UsIGt0aW1lX3QgdGltZXN0YW1wKTsKLWludCBkbWFfZmVuY2Vf
c2lnbmFsX3RpbWVzdGFtcF9sb2NrZWQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsCi0JCQkJICAg
ICAga3RpbWVfdCB0aW1lc3RhbXApOwordm9pZCBkbWFfZmVuY2Vfc2lnbmFsKHN0cnVjdCBkbWFf
ZmVuY2UgKmZlbmNlKTsKK3ZvaWQgZG1hX2ZlbmNlX3NpZ25hbF9sb2NrZWQoc3RydWN0IGRtYV9m
ZW5jZSAqZmVuY2UpOwordm9pZCBkbWFfZmVuY2Vfc2lnbmFsX3RpbWVzdGFtcChzdHJ1Y3QgZG1h
X2ZlbmNlICpmZW5jZSwga3RpbWVfdCB0aW1lc3RhbXApOwordm9pZCBkbWFfZmVuY2Vfc2lnbmFs
X3RpbWVzdGFtcF9sb2NrZWQoc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UsCisJCQkJICAgICAgIGt0
aW1lX3QgdGltZXN0YW1wKTsKIHNpZ25lZCBsb25nIGRtYV9mZW5jZV9kZWZhdWx0X3dhaXQoc3Ry
dWN0IGRtYV9mZW5jZSAqZmVuY2UsCiAJCQkJICAgYm9vbCBpbnRyLCBzaWduZWQgbG9uZyB0aW1l
b3V0KTsKIGludCBkbWFfZmVuY2VfYWRkX2NhbGxiYWNrKHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNl
LApAQCAtNTkwLDI2ICs1OTAsNCBAQCBzdHJ1Y3QgZG1hX2ZlbmNlICpkbWFfZmVuY2VfZ2V0X3N0
dWIodm9pZCk7CiBzdHJ1Y3QgZG1hX2ZlbmNlICpkbWFfZmVuY2VfYWxsb2NhdGVfcHJpdmF0ZV9z
dHViKHZvaWQpOwogdTY0IGRtYV9mZW5jZV9jb250ZXh0X2FsbG9jKHVuc2lnbmVkIG51bSk7CiAK
LSNkZWZpbmUgRE1BX0ZFTkNFX1RSQUNFKGYsIGZtdCwgYXJncy4uLikgXAotCWRvIHsJCQkJCQkJ
CVwKLQkJc3RydWN0IGRtYV9mZW5jZSAqX19mZiA9IChmKTsJCQkJXAotCQlpZiAoSVNfRU5BQkxF
RChDT05GSUdfRE1BX0ZFTkNFX1RSQUNFKSkJCQlcCi0JCQlwcl9pbmZvKCJmICVsbHUjJWxsdTog
IiBmbXQsCQkJXAotCQkJCV9fZmYtPmNvbnRleHQsIF9fZmYtPnNlcW5vLCAjI2FyZ3MpOwlcCi0J
fSB3aGlsZSAoMCkKLQotI2RlZmluZSBETUFfRkVOQ0VfV0FSTihmLCBmbXQsIGFyZ3MuLi4pIFwK
LQlkbyB7CQkJCQkJCQlcCi0JCXN0cnVjdCBkbWFfZmVuY2UgKl9fZmYgPSAoZik7CQkJCVwKLQkJ
cHJfd2FybigiZiAlbGx1IyVsbHU6ICIgZm10LCBfX2ZmLT5jb250ZXh0LCBfX2ZmLT5zZXFubyxc
Ci0JCQkgIyNhcmdzKTsJCQkJCVwKLQl9IHdoaWxlICgwKQotCi0jZGVmaW5lIERNQV9GRU5DRV9F
UlIoZiwgZm10LCBhcmdzLi4uKSBcCi0JZG8gewkJCQkJCQkJXAotCQlzdHJ1Y3QgZG1hX2ZlbmNl
ICpfX2ZmID0gKGYpOwkJCQlcCi0JCXByX2VycigiZiAlbGx1IyVsbHU6ICIgZm10LCBfX2ZmLT5j
b250ZXh0LCBfX2ZmLT5zZXFubywJXAotCQkJIyNhcmdzKTsJCQkJCVwKLQl9IHdoaWxlICgwKQot
CiAjZW5kaWYgLyogX19MSU5VWF9ETUFfRkVOQ0VfSCAqLwotLSAKMi4yNS4xCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxp
bmcgbGlzdApMaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5h
cm8ub3JnL21haWxtYW4vbGlzdGluZm8vbGluYXJvLW1tLXNpZwo=
