Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 96D381BBF83
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 28 Apr 2020 15:29:30 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id BAB36617C9
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 28 Apr 2020 13:29:29 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id ABAAD618F1; Tue, 28 Apr 2020 13:29:29 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-7.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_HI,RCVD_IN_MSPIKE_H3,RCVD_IN_MSPIKE_WL,SPF_HELO_PASS
	autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id DB9C46602B;
	Tue, 28 Apr 2020 13:21:31 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 7168861792
 for <linaro-mm-sig@lists.linaro.org>; Tue, 28 Apr 2020 13:20:39 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 65ACC6199D; Tue, 28 Apr 2020 13:20:39 +0000 (UTC)
Received: from mailout1.w1.samsung.com (mailout1.w1.samsung.com
 [210.118.77.11])
 by lists.linaro.org (Postfix) with ESMTPS id D3D7E61792
 for <linaro-mm-sig@lists.linaro.org>; Tue, 28 Apr 2020 13:20:27 +0000 (UTC)
Received: from eucas1p1.samsung.com (unknown [182.198.249.206])
 by mailout1.w1.samsung.com (KnoxPortal) with ESMTP id
 20200428132027euoutp01a2ae1e6101a531554074c061c676e5bd~J-l7fnnRk2027120271euoutp01F
 for <linaro-mm-sig@lists.linaro.org>; Tue, 28 Apr 2020 13:20:27 +0000 (GMT)
DKIM-Filter: OpenDKIM Filter v2.11.0 mailout1.w1.samsung.com
 20200428132027euoutp01a2ae1e6101a531554074c061c676e5bd~J-l7fnnRk2027120271euoutp01F
Received: from eusmges3new.samsung.com (unknown [203.254.199.245]) by
 eucas1p1.samsung.com (KnoxPortal) with ESMTP id
 20200428132026eucas1p169e8d8d422146536585e4fc43de045ca~J-l7KU8T73057830578eucas1p1O;
 Tue, 28 Apr 2020 13:20:26 +0000 (GMT)
Received: from eucas1p1.samsung.com ( [182.198.249.206]) by
 eusmges3new.samsung.com (EUCPMTA) with SMTP id 52.26.60698.A9D28AE5; Tue, 28
 Apr 2020 14:20:26 +0100 (BST)
Received: from eusmtrp2.samsung.com (unknown [182.198.249.139]) by
 eucas1p2.samsung.com (KnoxPortal) with ESMTPA id
 20200428132025eucas1p21580e634500a3e85564551cddf168b4a~J-l6ZWveu1083610836eucas1p2S;
 Tue, 28 Apr 2020 13:20:25 +0000 (GMT)
Received: from eusmgms2.samsung.com (unknown [182.198.249.180]) by
 eusmtrp2.samsung.com (KnoxPortal) with ESMTP id
 20200428132025eusmtrp27192d0ccb55d208d4463f4bf76cd415f~J-l6YtIQE2140221402eusmtrp2J;
 Tue, 28 Apr 2020 13:20:25 +0000 (GMT)
X-AuditID: cbfec7f5-a29ff7000001ed1a-7f-5ea82d9ab5eb
Received: from eusmtip2.samsung.com ( [203.254.199.222]) by
 eusmgms2.samsung.com (EUCPMTA) with SMTP id AC.D3.07950.99D28AE5; Tue, 28
 Apr 2020 14:20:25 +0100 (BST)
Received: from AMDC2765.digital.local (unknown [106.120.51.73]) by
 eusmtip2.samsung.com (KnoxPortal) with ESMTPA id
 20200428132025eusmtip2bf75034e3fddc8716b8207d0cb35a6aa~J-l5rXDuX1062310623eusmtip2m;
 Tue, 28 Apr 2020 13:20:25 +0000 (GMT)
From: Marek Szyprowski <m.szyprowski@samsung.com>
To: dri-devel@lists.freedesktop.org, iommu@lists.linux-foundation.org,
 linaro-mm-sig@lists.linaro.org, linux-kernel@vger.kernel.org
Date: Tue, 28 Apr 2020 15:19:54 +0200
Message-Id: <20200428132005.21424-7-m.szyprowski@samsung.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200428132005.21424-1-m.szyprowski@samsung.com>
X-Brightmail-Tracker: H4sIAAAAAAAAA0WSeUgUYRjG+WZmZ0dzc1wFv+wwt1Iq1MywIU0SJQbKEKSISG3TScWTHbX0
 j3K1QjRDDcpWq0W88lovplpT07Q1jcUL8ax0VVDxygOU1Nwdtf+e53l/7/fAy0eg4kaBFREa
 GcPIIqXhEtwY476tae0V9sX+Z5Yybal07XeEKlDJhVRVtkpAJTW349QWl4lSvSvzOPW+tBWh
 cjJqEErZ6Eot944iVLWuT0D1qHNxqrxlREg1LYwLqPaRJeElU7rsbRmg61eVGD3c9xmnP6z+
 FtC/0jQIXZP/iB7a1KH0i/4iQNcNJOL089oSQC9VH/HZd8vYLYgJD41jZI7ud4xD3kzfjO4I
 eDAoz8cSwaR3KjAiIHkOyrkfwlRgTIjJYgDnuNc7ZhnArqlFjDdLAOYPpaC7K3PyXJwfFAGY
 PFeL7K2oelqFegonnWDqbCqu1xbkEwDb0k30EEpyKBwvajFA5iQN68aqDM9i5AnINa5u5wQh
 Ii9Cpdyfb7OGpZVfDIgR6Q4LxiYMzZDsFsL5vHUhD3nBrPaXCK/N4bSmdic/BLc+vUP4hWQA
 R7XlQt48A7AnKRvwlCsc1q7j+maUPAlVakc+9oCFjYOYPobkftg/a6aP0W2Zxb1C+VgEU56K
 edoWKjQVe7VNnd0716JhWluBQYvJTADrFeYZwFrxv0sJQAmwZGLZiGCGdY5k7juw0gg2NjLY
 ITAqohpsf6uOTc3KR9Dw924zIAkgMRFVmhT7iwXSODY+ohlAApVYiMZCCv3FoiBpfAIjiwqQ
 xYYzbDM4SGASS5Fz3pSfmAyWxjBhDBPNyHanCGFklQiqqq95Lx7g7L5Onp2xueDsZ4IQDxHU
 y/7nQtcxX3XF1SKb41k2bEHgaTvOJ/Nx20DCPdx05vKN6Abfpl6X+o0/o9mYtvj8oHrATZ0i
 z1HozGQToTqNVWmVa3dMjiTn6G1Pz8RQl+sJc1dGDkuSVqPXwpzsPCbpjXRWO7GcEdgpwdgQ
 qdMpVMZK/wE0Mvw8UgMAAA==
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFlrAIsWRmVeSWpSXmKPExsVy+t/xe7ozdVfEGaz9pGfRe+4kk8XS9Y3s
 FhtnrGe1aDp0is3i/7aJzBZXvr5ns1i5+iiTxewJm5ksFuy3tvhy5SGTxabH11gtLu+aw2ax
 9shddouDH56wWpy6+5ndgd9jzbw1jB57vy1g8bhzbQ+bx/ZvD1g97ncfZ/LYvKTe4/a/x8we
 k28sZ/TYfbOBzaNvyypGj8+b5AK4o/RsivJLS1IVMvKLS2yVog0tjPQMLS30jEws9QyNzWOt
 jEyV9O1sUlJzMstSi/TtEvQy5r6KKDgdX3GrcQlLA+Mz3y5GTg4JAROJd41z2LoYuTiEBJYy
 Srx+8IwJIiEjcXJaAyuELSzx51oXVNEnRomdDVvBitgEDCW63kIkRAQ6GSWmdX9kB3GYBQ4w
 S3SfPwlWJSzgIbH70UZmEJtFQFVi2/5vQEUcHLwCthILGuMgNshLrN5wAKyEU8BOYumjp2wg
 JUJAJZdbcicw8i1gZFjFKJJaWpybnltspFecmFtcmpeul5yfu4kRGDvbjv3csoOx613wIUYB
 DkYlHt4NPCvihFgTy4orcw8xSnAwK4nwPspYFifEm5JYWZValB9fVJqTWnyI0RTopInMUqLJ
 +cC4ziuJNzQ1NLewNDQ3Njc2s1AS5+0QOBgjJJCeWJKanZpakFoE08fEwSnVwLhZqjRl+p63
 e05HK4vU179I8qg9/9VH8mHx7bkt/glfvpw/pvf0BUvNgYYtZ48ee/Rn+r4ZrAGGB6TsjK7F
 nDdi9Z943kqwUO7q2+RZvnr5SkI/T/feDiqb6nPCPlfgfPmp0J0ZtrZH2W4faF+7+7LOV+YC
 boV3Fbt/18qIeYXrXUl5/k1PcZMSS3FGoqEWc1FxIgDfCJZbswIAAA==
X-CMS-MailID: 20200428132025eucas1p21580e634500a3e85564551cddf168b4a
X-Msg-Generator: CA
X-RootMTR: 20200428132025eucas1p21580e634500a3e85564551cddf168b4a
X-EPHeader: CA
CMS-TYPE: 201P
X-CMS-RootMailID: 20200428132025eucas1p21580e634500a3e85564551cddf168b4a
References: <20200428132005.21424-1-m.szyprowski@samsung.com>
 <CGME20200428132025eucas1p21580e634500a3e85564551cddf168b4a@eucas1p2.samsung.com>
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: Daniel Vetter <daniel@ffwll.ch>,
 Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 David Airlie <airlied@linux.ie>, intel-gfx@lists.freedesktop.org,
 amd-gfx@lists.freedesktop.org, Christoph Hellwig <hch@lst.de>,
 Robin Murphy <robin.murphy@arm.com>, linux-arm-kernel@lists.infradead.org
Subject: [Linaro-mm-sig] [RFC 06/17] drm: i915: fix sg_table nents vs.
	orig_nents misuse
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

VGhlIERvY3VtZW50YXRpb24vRE1BLUFQSS1IT1dUTy50eHQgc3RhdGVzIHRoYXQgZG1hX21hcF9z
ZyByZXR1cm5zIHRoZQpudW1lciBvZiB0aGUgY3JlYXRlZCBlbnRyaWVzIGluIHRoZSBETUEgYWRk
cmVzcyBzcGFjZS4gSG93ZXZlciB0aGUKc3Vic2VxdWVudCBjYWxscyB0byBkbWFfc3luY19zZ19m
b3Jfe2RldmljZSxjcHV9IGFuZCBkbWFfdW5tYXBfc2cgbXVzdCBiZQpjYWxsZWQgd2l0aCB0aGUg
b3JpZ2luYWwgbnVtYmVyIG9mIGVudHJpZXMgcGFzc2VkIHRvIGRtYV9tYXBfc2cuIFRoZQpzZ190
YWJsZS0+bmVudHMgaW4gdHVybiBob2xkcyB0aGUgcmVzdWx0IG9mIHRoZSBkbWFfbWFwX3NnIGNh
bGwgYXMgc3RhdGVkCmluIGluY2x1ZGUvbGludXgvc2NhdHRlcmxpc3QuaC4gQWRhcHQgdGhlIGNv
ZGUgdG8gb2JleSB0aG9zZSBydWxlcy4KClNpZ25lZC1vZmYtYnk6IE1hcmVrIFN6eXByb3dza2kg
PG0uc3p5cHJvd3NraUBzYW1zdW5nLmNvbT4KLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1fZG1hYnVmLmMgICAgICAgfCAxMyArKysrKysrLS0tLS0tCiBkcml2ZXJzL2dwdS9k
cm0vaTkxNS9nZW0vaTkxNV9nZW1faW50ZXJuYWwuYyAgICAgfCAgNCArKy0tCiBkcml2ZXJzL2dw
dS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fcmVnaW9uLmMgICAgICAgfCAgNCArKy0tCiBkcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fc2htZW0uYyAgICAgICAgfCAgNSArKystLQogZHJp
dmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMgIHwgMTAgKysrKyst
LS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9tb2NrX2RtYWJ1Zi5jIHwg
IDUgKysrLS0KIGRyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVsX2dndHQuYyAgICAgICAgICAg
ICB8IDEyICsrKysrKy0tLS0tLQogZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9nZW1fZ3R0LmMg
ICAgICAgICAgICAgIHwgMTIgKysrKysrKy0tLS0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1
X3NjYXR0ZXJsaXN0LmMgICAgICAgICAgfCAgNCArKy0tCiBkcml2ZXJzL2dwdS9kcm0vaTkxNS9z
ZWxmdGVzdHMvc2NhdHRlcmxpc3QuYyAgICAgfCAgOCArKysrLS0tLQogMTAgZmlsZXMgY2hhbmdl
ZCwgNDEgaW5zZXJ0aW9ucygrKSwgMzYgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5
MTUvZ2VtL2k5MTVfZ2VtX2RtYWJ1Zi5jCmluZGV4IDdkYjVhNzkuLmQ4Mjk4NTIgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9kbWFidWYuYworKysgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fZG1hYnVmLmMKQEAgLTM2LDIxICszNiwyMiBA
QCBzdGF0aWMgc3RydWN0IHNnX3RhYmxlICppOTE1X2dlbV9tYXBfZG1hX2J1ZihzdHJ1Y3QgZG1h
X2J1Zl9hdHRhY2htZW50ICphdHRhY2htZQogCQlnb3RvIGVycl91bnBpbl9wYWdlczsKIAl9CiAK
LQlyZXQgPSBzZ19hbGxvY190YWJsZShzdCwgb2JqLT5tbS5wYWdlcy0+bmVudHMsIEdGUF9LRVJO
RUwpOworCXJldCA9IHNnX2FsbG9jX3RhYmxlKHN0LCBvYmotPm1tLnBhZ2VzLT5vcmlnX25lbnRz
LCBHRlBfS0VSTkVMKTsKIAlpZiAocmV0KQogCQlnb3RvIGVycl9mcmVlOwogCiAJc3JjID0gb2Jq
LT5tbS5wYWdlcy0+c2dsOwogCWRzdCA9IHN0LT5zZ2w7Ci0JZm9yIChpID0gMDsgaSA8IG9iai0+
bW0ucGFnZXMtPm5lbnRzOyBpKyspIHsKKwlmb3IgKGkgPSAwOyBpIDwgb2JqLT5tbS5wYWdlcy0+
b3JpZ19uZW50czsgaSsrKSB7CiAJCXNnX3NldF9wYWdlKGRzdCwgc2dfcGFnZShzcmMpLCBzcmMt
Pmxlbmd0aCwgMCk7CiAJCWRzdCA9IHNnX25leHQoZHN0KTsKIAkJc3JjID0gc2dfbmV4dChzcmMp
OwogCX0KIAotCWlmICghZG1hX21hcF9zZ19hdHRycyhhdHRhY2htZW50LT5kZXYsCi0JCQkgICAg
ICBzdC0+c2dsLCBzdC0+bmVudHMsIGRpciwKLQkJCSAgICAgIERNQV9BVFRSX1NLSVBfQ1BVX1NZ
TkMpKSB7CisJc3QtPm5lbnRzID0gZG1hX21hcF9zZ19hdHRycyhhdHRhY2htZW50LT5kZXYsCisJ
CQkJICAgICBzdC0+c2dsLCBzdC0+b3JpZ19uZW50cywgZGlyLAorCQkJCSAgICAgRE1BX0FUVFJf
U0tJUF9DUFVfU1lOQyk7CisJaWYgKCFzdC0+bmVudHMpIHsKIAkJcmV0ID0gLUVOT01FTTsKIAkJ
Z290byBlcnJfZnJlZV9zZzsKIAl9CkBAIC03NCw3ICs3NSw3IEBAIHN0YXRpYyB2b2lkIGk5MTVf
Z2VtX3VubWFwX2RtYV9idWYoc3RydWN0IGRtYV9idWZfYXR0YWNobWVudCAqYXR0YWNobWVudCwK
IAlzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqID0gZG1hX2J1Zl90b19vYmooYXR0YWNo
bWVudC0+ZG1hYnVmKTsKIAogCWRtYV91bm1hcF9zZ19hdHRycyhhdHRhY2htZW50LT5kZXYsCi0J
CQkgICBzZy0+c2dsLCBzZy0+bmVudHMsIGRpciwKKwkJCSAgIHNnLT5zZ2wsIHNnLT5vcmlnX25l
bnRzLCBkaXIsCiAJCQkgICBETUFfQVRUUl9TS0lQX0NQVV9TWU5DKTsKIAlzZ19mcmVlX3RhYmxl
KHNnKTsKIAlrZnJlZShzZyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0v
aTkxNV9nZW1faW50ZXJuYWwuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9p
bnRlcm5hbC5jCmluZGV4IGNiYmZmODEuLmE4ZWJmZGQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9pbnRlcm5hbC5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9pbnRlcm5hbC5jCkBAIC03Myw3ICs3Myw3IEBAIHN0YXRpYyBpbnQg
aTkxNV9nZW1fb2JqZWN0X2dldF9wYWdlc19pbnRlcm5hbChzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29i
amVjdCAqb2JqKQogCX0KIAogCXNnID0gc3QtPnNnbDsKLQlzdC0+bmVudHMgPSAwOworCXN0LT5u
ZW50cyA9IHN0LT5vcmlnX25lbnRzID0gMDsKIAlzZ19wYWdlX3NpemVzID0gMDsKIAogCWRvIHsK
QEAgLTk0LDcgKzk0LDcgQEAgc3RhdGljIGludCBpOTE1X2dlbV9vYmplY3RfZ2V0X3BhZ2VzX2lu
dGVybmFsKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAKIAkJc2dfc2V0X3BhZ2Uo
c2csIHBhZ2UsIFBBR0VfU0laRSA8PCBvcmRlciwgMCk7CiAJCXNnX3BhZ2Vfc2l6ZXMgfD0gUEFH
RV9TSVpFIDw8IG9yZGVyOwotCQlzdC0+bmVudHMrKzsKKwkJc3QtPm5lbnRzID0gc3QtPm9yaWdf
bmVudHMgPSBzdC0+bmVudHMgKyAxOwogCiAJCW5wYWdlcyAtPSAxIDw8IG9yZGVyOwogCQlpZiAo
IW5wYWdlcykgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2Vt
X3JlZ2lvbi5jIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL2k5MTVfZ2VtX3JlZ2lvbi5jCmlu
ZGV4IDE1MTUzODQuLjU4Y2E1NjAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dl
bS9pOTE1X2dlbV9yZWdpb24uYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9n
ZW1fcmVnaW9uLmMKQEAgLTUzLDcgKzUzLDcgQEAKIAlHRU1fQlVHX09OKGxpc3RfZW1wdHkoYmxv
Y2tzKSk7CiAKIAlzZyA9IHN0LT5zZ2w7Ci0Jc3QtPm5lbnRzID0gMDsKKwlzdC0+bmVudHMgPSBz
dC0+b3JpZ19uZW50cyA9IDA7CiAJc2dfcGFnZV9zaXplcyA9IDA7CiAJcHJldl9lbmQgPSAocmVz
b3VyY2Vfc2l6ZV90KS0xOwogCkBAIC03OCw3ICs3OCw3IEBACiAKIAkJCXNnLT5sZW5ndGggPSBi
bG9ja19zaXplOwogCi0JCQlzdC0+bmVudHMrKzsKKwkJCXN0LT5uZW50cyA9IHN0LT5vcmlnX25l
bnRzID0gc3QtPm5lbnRzICsgMTsKIAkJfSBlbHNlIHsKIAkJCXNnLT5sZW5ndGggKz0gYmxvY2tf
c2l6ZTsKIAkJCXNnX2RtYV9sZW4oc2cpICs9IGJsb2NrX3NpemU7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9nZW0vaTkxNV9nZW1fc2htZW0uYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2dlbS9pOTE1X2dlbV9zaG1lbS5jCmluZGV4IDVkNWQ3ZWUuLjg1MWE3MzIgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaG1lbS5jCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9pOTE1L2dlbS9pOTE1X2dlbV9zaG1lbS5jCkBAIC04MCw3ICs4MCw3IEBAIHN0
YXRpYyBpbnQgc2htZW1fZ2V0X3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmop
CiAJbm9yZWNsYWltIHw9IF9fR0ZQX05PUkVUUlkgfCBfX0dGUF9OT1dBUk47CiAKIAlzZyA9IHN0
LT5zZ2w7Ci0Jc3QtPm5lbnRzID0gMDsKKwlzdC0+bmVudHMgPSBzdC0+b3JpZ19uZW50cyA9IDA7
CiAJc2dfcGFnZV9zaXplcyA9IDA7CiAJZm9yIChpID0gMDsgaSA8IHBhZ2VfY291bnQ7IGkrKykg
ewogCQljb25zdCB1bnNpZ25lZCBpbnQgc2hyaW5rW10gPSB7CkBAIC0xNDAsNyArMTQwLDggQEAg
c3RhdGljIGludCBzaG1lbV9nZXRfcGFnZXMoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3QgKm9i
aikKIAkJCQlzZ19wYWdlX3NpemVzIHw9IHNnLT5sZW5ndGg7CiAJCQkJc2cgPSBzZ19uZXh0KHNn
KTsKIAkJCX0KLQkJCXN0LT5uZW50cysrOworCQkJc3QtPm5lbnRzID0gc3QtPm9yaWdfbmVudHMg
PSBzdC0+bmVudHMgKyAxOworCiAJCQlzZ19zZXRfcGFnZShzZywgcGFnZSwgUEFHRV9TSVpFLCAw
KTsKIAkJfSBlbHNlIHsKIAkJCXNnLT5sZW5ndGggKz0gUEFHRV9TSVpFOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3NlbGZ0ZXN0cy9odWdlX3BhZ2VzLmMgYi9kcml2ZXJz
L2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2VfcGFnZXMuYwppbmRleCBjOTk4OGI2Li5i
ZDE0MWY5IDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1
Z2VfcGFnZXMuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL2h1Z2Vf
cGFnZXMuYwpAQCAtNzYsNyArNzYsNyBAQCBzdGF0aWMgaW50IGdldF9odWdlX3BhZ2VzKHN0cnVj
dCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAKIAlyZW0gPSBvYmotPmJhc2Uuc2l6ZTsKIAlz
ZyA9IHN0LT5zZ2w7Ci0Jc3QtPm5lbnRzID0gMDsKKwlzdC0+bmVudHMgPSBzdC0+b3JpZ19uZW50
cyA9IDA7CiAJc2dfcGFnZV9zaXplcyA9IDA7CiAKIAkvKgpAQCAtOTksNyArOTksNyBAQCBzdGF0
aWMgaW50IGdldF9odWdlX3BhZ2VzKHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAK
IAkJCXNnX3NldF9wYWdlKHNnLCBwYWdlLCBwYWdlX3NpemUsIDApOwogCQkJc2dfcGFnZV9zaXpl
cyB8PSBwYWdlX3NpemU7Ci0JCQlzdC0+bmVudHMrKzsKKwkJCXN0LT5uZW50cyA9IHN0LT5vcmln
X25lbnRzID0gc3QtPm5lbnRzICsgMTsKIAogCQkJcmVtIC09IHBhZ2Vfc2l6ZTsKIAkJCWlmICgh
cmVtKSB7CkBAIC0yMDEsNyArMjAxLDcgQEAgc3RhdGljIGludCBmYWtlX2dldF9odWdlX3BhZ2Vz
KHN0cnVjdCBkcm1faTkxNV9nZW1fb2JqZWN0ICpvYmopCiAJLyogVXNlIG9wdGltYWwgcGFnZSBz
aXplZCBjaHVua3MgdG8gZmlsbCBpbiB0aGUgc2cgdGFibGUgKi8KIAlyZW0gPSBvYmotPmJhc2Uu
c2l6ZTsKIAlzZyA9IHN0LT5zZ2w7Ci0Jc3QtPm5lbnRzID0gMDsKKwlzdC0+bmVudHMgPSBzdC0+
b3JpZ19uZW50cyA9IDA7CiAJc2dfcGFnZV9zaXplcyA9IDA7CiAJZG8gewogCQl1bnNpZ25lZCBp
bnQgcGFnZV9zaXplID0gZ2V0X2xhcmdlc3RfcGFnZV9zaXplKGk5MTUsIHJlbSk7CkBAIC0yMTcs
NyArMjE3LDcgQEAgc3RhdGljIGludCBmYWtlX2dldF9odWdlX3BhZ2VzKHN0cnVjdCBkcm1faTkx
NV9nZW1fb2JqZWN0ICpvYmopCiAKIAkJc2dfcGFnZV9zaXplcyB8PSBsZW47CiAKLQkJc3QtPm5l
bnRzKys7CisJCXN0LT5uZW50cyA9IHN0LT5vcmlnX25lbnRzID0gc3QtPm5lbnRzICsgMTsKIAog
CQlyZW0gLT0gbGVuOwogCQlpZiAoIXJlbSkgewpAQCAtMjUyLDcgKzI1Miw3IEBAIHN0YXRpYyBp
bnQgZmFrZV9nZXRfaHVnZV9wYWdlc19zaW5nbGUoc3RydWN0IGRybV9pOTE1X2dlbV9vYmplY3Qg
Km9iaikKIAl9CiAKIAlzZyA9IHN0LT5zZ2w7Ci0Jc3QtPm5lbnRzID0gMTsKKwlzdC0+bmVudHMg
PSBzdC0+b3JpZ19uZW50cyA9IDE7CiAKIAlwYWdlX3NpemUgPSBnZXRfbGFyZ2VzdF9wYWdlX3Np
emUoaTkxNSwgb2JqLT5iYXNlLnNpemUpOwogCUdFTV9CVUdfT04oIXBhZ2Vfc2l6ZSk7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfZG1hYnVmLmMg
Yi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9nZW0vc2VsZnRlc3RzL21vY2tfZG1hYnVmLmMKaW5kZXgg
ZGViYWY3Yi4uNTcyMzUyNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ2VtL3Nl
bGZ0ZXN0cy9tb2NrX2RtYWJ1Zi5jCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2dlbS9zZWxm
dGVzdHMvbW9ja19kbWFidWYuYwpAQCAtMjgsNyArMjgsOCBAQCBzdGF0aWMgc3RydWN0IHNnX3Rh
YmxlICptb2NrX21hcF9kbWFfYnVmKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaG1l
bnQsCiAJCXNnID0gc2dfbmV4dChzZyk7CiAJfQogCi0JaWYgKCFkbWFfbWFwX3NnKGF0dGFjaG1l
bnQtPmRldiwgc3QtPnNnbCwgc3QtPm5lbnRzLCBkaXIpKSB7CisJc3QtPm5lbnRzID0gZG1hX21h
cF9zZyhhdHRhY2htZW50LT5kZXYsIHN0LT5zZ2wsIHN0LT5vcmlnX25lbnRzLCBkaXIpOworCWlm
ICghc3QtPm5lbnRzKSB7CiAJCWVyciA9IC1FTk9NRU07CiAJCWdvdG8gZXJyX3N0OwogCX0KQEAg
LTQ2LDcgKzQ3LDcgQEAgc3RhdGljIHZvaWQgbW9ja191bm1hcF9kbWFfYnVmKHN0cnVjdCBkbWFf
YnVmX2F0dGFjaG1lbnQgKmF0dGFjaG1lbnQsCiAJCQkgICAgICAgc3RydWN0IHNnX3RhYmxlICpz
dCwKIAkJCSAgICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIpCiB7Ci0JZG1hX3VubWFw
X3NnKGF0dGFjaG1lbnQtPmRldiwgc3QtPnNnbCwgc3QtPm5lbnRzLCBkaXIpOworCWRtYV91bm1h
cF9zZyhhdHRhY2htZW50LT5kZXYsIHN0LT5zZ2wsIHN0LT5vcmlnX25lbnRzLCBkaXIpOwogCXNn
X2ZyZWVfdGFibGUoc3QpOwogCWtmcmVlKHN0KTsKIH0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1
L2RybS9pOTE1L2d0L2ludGVsX2dndHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2d0L2ludGVs
X2dndHQuYwppbmRleCA2NjE2NWIxLi45YTI5OGJmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndC9pbnRlbF9nZ3R0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvZ3QvaW50
ZWxfZ2d0dC5jCkBAIC0xMjIxLDcgKzEyMjEsNyBAQCB2b2lkIGk5MTVfZ2d0dF9yZXN1bWUoc3Ry
dWN0IGk5MTVfZ2d0dCAqZ2d0dCkKIAlmb3IgKGNvbHVtbiA9IDA7IGNvbHVtbiA8IHdpZHRoOyBj
b2x1bW4rKykgewogCQlzcmNfaWR4ID0gc3RyaWRlICogKGhlaWdodCAtIDEpICsgY29sdW1uICsg
b2Zmc2V0OwogCQlmb3IgKHJvdyA9IDA7IHJvdyA8IGhlaWdodDsgcm93KyspIHsKLQkJCXN0LT5u
ZW50cysrOworCQkJc3QtPm5lbnRzID0gc3QtPm9yaWdfbmVudHMgPSBzdC0+bmVudHMgKyAxOwog
CQkJLyoKIAkJCSAqIFdlIGRvbid0IG5lZWQgdGhlIHBhZ2VzLCBidXQgbmVlZCB0byBpbml0aWFs
aXplCiAJCQkgKiB0aGUgZW50cmllcyBzbyB0aGUgc2cgbGlzdCBjYW4gYmUgaGFwcGlseSB0cmF2
ZXJzZWQuCkBAIC0xMjU5LDcgKzEyNTksNyBAQCB2b2lkIGk5MTVfZ2d0dF9yZXN1bWUoc3RydWN0
IGk5MTVfZ2d0dCAqZ2d0dCkKIAlpZiAocmV0KQogCQlnb3RvIGVycl9zZ19hbGxvYzsKIAotCXN0
LT5uZW50cyA9IDA7CisJc3QtPm5lbnRzID0gc3QtPm9yaWdfbmVudHMgPSAwOwogCXNnID0gc3Qt
PnNnbDsKIAogCWZvciAoaSA9IDAgOyBpIDwgQVJSQVlfU0laRShyb3RfaW5mby0+cGxhbmUpOyBp
KyspIHsKQEAgLTEzMDYsNyArMTMwNiw3IEBAIHZvaWQgaTkxNV9nZ3R0X3Jlc3VtZShzdHJ1Y3Qg
aTkxNV9nZ3R0ICpnZ3R0KQogCiAJCQlsZW5ndGggPSBtaW4obGVmdCwgbGVuZ3RoKTsKIAotCQkJ
c3QtPm5lbnRzKys7CisJCQlzdC0+bmVudHMgPSBzdC0+b3JpZ19uZW50cyA9IHN0LT5uZW50cyAr
IDE7CiAKIAkJCXNnX3NldF9wYWdlKHNnLCBOVUxMLCBsZW5ndGgsIDApOwogCQkJc2dfZG1hX2Fk
ZHJlc3Moc2cpID0gYWRkcjsKQEAgLTEzNDMsNyArMTM0Myw3IEBAIHZvaWQgaTkxNV9nZ3R0X3Jl
c3VtZShzdHJ1Y3QgaTkxNV9nZ3R0ICpnZ3R0KQogCWlmIChyZXQpCiAJCWdvdG8gZXJyX3NnX2Fs
bG9jOwogCi0Jc3QtPm5lbnRzID0gMDsKKwlzdC0+bmVudHMgPSBzdC0+b3JpZ19uZW50cyA9IDA7
CiAJc2cgPSBzdC0+c2dsOwogCiAJZm9yIChpID0gMCA7IGkgPCBBUlJBWV9TSVpFKHJlbV9pbmZv
LT5wbGFuZSk7IGkrKykgewpAQCAtMTM4OSw3ICsxMzg5LDcgQEAgdm9pZCBpOTE1X2dndHRfcmVz
dW1lKHN0cnVjdCBpOTE1X2dndHQgKmdndHQpCiAJR0VNX0JVR19PTighaXRlcik7CiAKIAlzZyA9
IHN0LT5zZ2w7Ci0Jc3QtPm5lbnRzID0gMDsKKwlzdC0+bmVudHMgPSBzdC0+b3JpZ19uZW50cyA9
IDA7CiAJZG8gewogCQl1bnNpZ25lZCBpbnQgbGVuOwogCkBAIC0xNDAwLDcgKzE0MDAsNyBAQCB2
b2lkIGk5MTVfZ2d0dF9yZXN1bWUoc3RydWN0IGk5MTVfZ2d0dCAqZ2d0dCkKIAkJCXNnX2RtYV9h
ZGRyZXNzKGl0ZXIpICsgKG9mZnNldCA8PCBQQUdFX1NISUZUKTsKIAkJc2dfZG1hX2xlbihzZykg
PSBsZW47CiAKLQkJc3QtPm5lbnRzKys7CisJCXN0LT5uZW50cyA9IHN0LT5vcmlnX25lbnRzID0g
c3QtPm5lbnRzICsgMTsKIAkJY291bnQgLT0gbGVuID4+IFBBR0VfU0hJRlQ7CiAJCWlmIChjb3Vu
dCA9PSAwKSB7CiAJCQlzZ19tYXJrX2VuZChzZyk7CmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9pOTE1X2dlbV9ndHQuYyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfZ2VtX2d0
dC5jCmluZGV4IGNiNDMzODEuLmM0MTIyY2QzIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
aTkxNS9pOTE1X2dlbV9ndHQuYworKysgYi9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X2dlbV9n
dHQuYwpAQCAtMjgsMTAgKzI4LDExIEBAIGludCBpOTE1X2dlbV9ndHRfcHJlcGFyZV9wYWdlcyhz
dHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCQkJICAgICAgIHN0cnVjdCBzZ190YWJs
ZSAqcGFnZXMpCiB7CiAJZG8gewotCQlpZiAoZG1hX21hcF9zZ19hdHRycygmb2JqLT5iYXNlLmRl
di0+cGRldi0+ZGV2LAotCQkJCSAgICAgcGFnZXMtPnNnbCwgcGFnZXMtPm5lbnRzLAotCQkJCSAg
ICAgUENJX0RNQV9CSURJUkVDVElPTkFMLAotCQkJCSAgICAgRE1BX0FUVFJfTk9fV0FSTikpCisJ
CXBhZ2VzLT5uZW50cyA9IGRtYV9tYXBfc2dfYXR0cnMoJm9iai0+YmFzZS5kZXYtPnBkZXYtPmRl
diwKKwkJCQkJCXBhZ2VzLT5zZ2wsIHBhZ2VzLT5vcmlnX25lbnRzLAorCQkJCQkJUENJX0RNQV9C
SURJUkVDVElPTkFMLAorCQkJCQkJRE1BX0FUVFJfTk9fV0FSTik7CisJCWlmIChwYWdlLT5uZW50
cykKIAkJCXJldHVybiAwOwogCiAJCS8qCkBAIC02OCw3ICs2OSw4IEBAIHZvaWQgaTkxNV9nZW1f
Z3R0X2ZpbmlzaF9wYWdlcyhzdHJ1Y3QgZHJtX2k5MTVfZ2VtX29iamVjdCAqb2JqLAogCQl9CiAJ
fQogCi0JZG1hX3VubWFwX3NnKGtkZXYsIHBhZ2VzLT5zZ2wsIHBhZ2VzLT5uZW50cywgUENJX0RN
QV9CSURJUkVDVElPTkFMKTsKKwlkbWFfdW5tYXBfc2coa2RldiwgcGFnZXMtPnNnbCwgcGFnZXMt
Pm9yaWdfbmVudHMsCisJCSAgICAgUENJX0RNQV9CSURJUkVDVElPTkFMKTsKIH0KIAogLyoqCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjYXR0ZXJsaXN0LmMgYi9kcml2
ZXJzL2dwdS9kcm0vaTkxNS9pOTE1X3NjYXR0ZXJsaXN0LmMKaW5kZXggY2M2YjM4NC4uMDViZWUx
MyAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvaTkxNV9zY2F0dGVybGlzdC5jCisr
KyBiL2RyaXZlcnMvZ3B1L2RybS9pOTE1L2k5MTVfc2NhdHRlcmxpc3QuYwpAQCAtMTUsMTEgKzE1
LDExIEBAIGJvb2wgaTkxNV9zZ190cmltKHN0cnVjdCBzZ190YWJsZSAqb3JpZ19zdCkKIAlpZiAo
b3JpZ19zdC0+bmVudHMgPT0gb3JpZ19zdC0+b3JpZ19uZW50cykKIAkJcmV0dXJuIGZhbHNlOwog
Ci0JaWYgKHNnX2FsbG9jX3RhYmxlKCZuZXdfc3QsIG9yaWdfc3QtPm5lbnRzLCBHRlBfS0VSTkVM
IHwgX19HRlBfTk9XQVJOKSkKKwlpZiAoc2dfYWxsb2NfdGFibGUoJm5ld19zdCwgb3JpZ19zdC0+
b3JpZ19uZW50cywgR0ZQX0tFUk5FTCB8IF9fR0ZQX05PV0FSTikpCiAJCXJldHVybiBmYWxzZTsK
IAogCW5ld19zZyA9IG5ld19zdC5zZ2w7Ci0JZm9yX2VhY2hfc2cob3JpZ19zdC0+c2dsLCBzZywg
b3JpZ19zdC0+bmVudHMsIGkpIHsKKwlmb3JfZWFjaF9zZyhvcmlnX3N0LT5zZ2wsIHNnLCBvcmln
X3N0LT5vcmlnX25lbnRzLCBpKSB7CiAJCXNnX3NldF9wYWdlKG5ld19zZywgc2dfcGFnZShzZyks
IHNnLT5sZW5ndGgsIDApOwogCQlzZ19kbWFfYWRkcmVzcyhuZXdfc2cpID0gc2dfZG1hX2FkZHJl
c3Moc2cpOwogCQlzZ19kbWFfbGVuKG5ld19zZykgPSBzZ19kbWFfbGVuKHNnKTsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9pOTE1L3NlbGZ0ZXN0cy9zY2F0dGVybGlzdC5jIGIvZHJpdmVy
cy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL3NjYXR0ZXJsaXN0LmMKaW5kZXggZDU5OTE4Ni4uNDQ1
NmZlNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL3NjYXR0ZXJs
aXN0LmMKKysrIGIvZHJpdmVycy9ncHUvZHJtL2k5MTUvc2VsZnRlc3RzL3NjYXR0ZXJsaXN0LmMK
QEAgLTQ4LDkgKzQ4LDkgQEAgc3RhdGljIG5vaW5saW5lIGludCBleHBlY3RfcGZuX3NnKHN0cnVj
dCBwZm5fdGFibGUgKnB0LAogCXVuc2lnbmVkIGxvbmcgcGZuLCBuOwogCiAJcGZuID0gcHQtPnN0
YXJ0OwotCWZvcl9lYWNoX3NnKHB0LT5zdC5zZ2wsIHNnLCBwdC0+c3QubmVudHMsIG4pIHsKKwlm
b3JfZWFjaF9zZyhwdC0+c3Quc2dsLCBzZywgcHQtPnN0Lm9yaWdfbmVudHMsIG4pIHsKIAkJc3Ry
dWN0IHBhZ2UgKnBhZ2UgPSBzZ19wYWdlKHNnKTsKLQkJdW5zaWduZWQgaW50IG5wYWdlcyA9IG5w
YWdlc19mbihuLCBwdC0+c3QubmVudHMsIHJuZCk7CisJCXVuc2lnbmVkIGludCBucGFnZXMgPSBu
cGFnZXNfZm4obiwgcHQtPnN0Lm9yaWdfbmVudHMsIHJuZCk7CiAKIAkJaWYgKHBhZ2VfdG9fcGZu
KHBhZ2UpICE9IHBmbikgewogCQkJcHJfZXJyKCIlczogJXMgbGVmdCBwYWdlcyBvdXQgb2Ygb3Jk
ZXIsIGV4cGVjdGVkIHBmbiAlbHUsIGZvdW5kIHBmbiAlbHUgKHVzaW5nIGZvcl9lYWNoX3NnKVxu
IiwKQEAgLTg2LDcgKzg2LDcgQEAgc3RhdGljIG5vaW5saW5lIGludCBleHBlY3RfcGZuX3NnX3Bh
Z2VfaXRlcihzdHJ1Y3QgcGZuX3RhYmxlICpwdCwKIAl1bnNpZ25lZCBsb25nIHBmbjsKIAogCXBm
biA9IHB0LT5zdGFydDsKLQlmb3JfZWFjaF9zZ19wYWdlKHB0LT5zdC5zZ2wsICZzZ2l0ZXIsIHB0
LT5zdC5uZW50cywgMCkgeworCWZvcl9lYWNoX3NnX3BhZ2UocHQtPnN0LnNnbCwgJnNnaXRlciwg
cHQtPnN0Lm9yaWdfbmVudHMsIDApIHsKIAkJc3RydWN0IHBhZ2UgKnBhZ2UgPSBzZ19wYWdlX2l0
ZXJfcGFnZSgmc2dpdGVyKTsKIAogCQlpZiAocGFnZSAhPSBwZm5fdG9fcGFnZShwZm4pKSB7CkBA
IC0yNTYsNyArMjU2LDcgQEAgc3RhdGljIGludCBhbGxvY190YWJsZShzdHJ1Y3QgcGZuX3RhYmxl
ICpwdCwKIAkJcGZuICs9IG5wYWdlczsKIAl9CiAJc2dfbWFya19lbmQoc2cpOwotCXB0LT5zdC5u
ZW50cyA9IG47CisJcHQtPnN0Lm5lbnRzID0gcHQtPnN0Lm9yaWdfbmVudHMgPSBuOwogCXB0LT5l
bmQgPSBwZm47CiAKIAlyZXR1cm4gMDsKLS0gCjEuOS4xCgpfX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdApMaW5h
cm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5hcm8ub3JnL21haWxt
YW4vbGlzdGluZm8vbGluYXJvLW1tLXNpZwo=
