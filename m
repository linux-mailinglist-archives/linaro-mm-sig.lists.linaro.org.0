Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 5CD6E3B318F
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 24 Jun 2021 16:39:28 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 7246763578
	for <lists+linaro-mm-sig@lfdr.de>; Thu, 24 Jun 2021 14:39:26 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 269716354F; Thu, 24 Jun 2021 14:39:25 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 405FA60754;
	Thu, 24 Jun 2021 14:39:22 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 2323D60628
 for <linaro-mm-sig@lists.linaro.org>; Thu, 24 Jun 2021 14:39:20 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 2114760728; Thu, 24 Jun 2021 14:39:20 +0000 (UTC)
Received: from metis.ext.pengutronix.de (metis.ext.pengutronix.de
 [85.220.165.71])
 by lists.linaro.org (Postfix) with ESMTPS id F15186066C
 for <linaro-mm-sig@lists.linaro.org>; Thu, 24 Jun 2021 14:39:17 +0000 (UTC)
Received: from gallifrey.ext.pengutronix.de
 ([2001:67c:670:201:5054:ff:fe8d:eefb] helo=[IPv6:::1])
 by metis.ext.pengutronix.de with esmtps
 (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92)
 (envelope-from <l.stach@pengutronix.de>)
 id 1lwQVd-0006eB-LD; Thu, 24 Jun 2021 16:39:13 +0200
Message-ID: <9465ffc67bce199ad52f272d0c4f7103d61ae734.camel@pengutronix.de>
From: Lucas Stach <l.stach@pengutronix.de>
To: Daniel Vetter <daniel.vetter@ffwll.ch>, DRI Development
 <dri-devel@lists.freedesktop.org>
Date: Thu, 24 Jun 2021 16:39:09 +0200
In-Reply-To: <20210624140025.438303-3-daniel.vetter@ffwll.ch>
References: <20210624140025.438303-1-daniel.vetter@ffwll.ch>
 <20210624140025.438303-3-daniel.vetter@ffwll.ch>
User-Agent: Evolution 3.40.1 (3.40.1-1.fc34) 
MIME-Version: 1.0
X-SA-Exim-Connect-IP: 2001:67c:670:201:5054:ff:fe8d:eefb
X-SA-Exim-Mail-From: l.stach@pengutronix.de
X-SA-Exim-Scanned: No (on metis.ext.pengutronix.de);
 SAEximRunCond expanded to false
X-PTX-Original-Recipient: linaro-mm-sig@lists.linaro.org
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: Re: [Linaro-mm-sig] [PATCH 02/11] drm/sched: Add dependency tracking
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: Luben Tuikov <luben.tuikov@amd.com>, Jack Zhang <Jack.Zhang1@amd.com>,
 David Airlie <airlied@linux.ie>, linaro-mm-sig@lists.linaro.org,
 Boris Brezillon <boris.brezillon@collabora.com>,
 Alex Deucher <alexander.deucher@amd.com>,
 Daniel Vetter <daniel.vetter@intel.com>, Nirmoy Das <nirmoy.aiemd@gmail.com>,
 Lee Jones <lee.jones@linaro.org>,
 Christian =?ISO-8859-1?Q?K=F6nig?= <christian.koenig@amd.com>,
 linux-media@vger.kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

QW0gRG9ubmVyc3RhZywgZGVtIDI0LjA2LjIwMjEgdW0gMTY6MDAgKzAyMDAgc2NocmllYiBEYW5p
ZWwgVmV0dGVyOgo+IEluc3RlYWQgb2YganVzdCBhIGNhbGxiYWNrIHdlIGNhbiBqdXN0IGdsdWUg
aW4gdGhlIGdlbSBoZWxwZXJzIHRoYXQKPiBwYW5mcm9zdCwgdjNkIGFuZCBsaW1hIGN1cnJlbnRs
eSB1c2UuIFRoZXJlJ3MgcmVhbGx5IG5vdCB0aGF0IG1hbnkKPiB3YXlzIHRvIHNraW4gdGhpcyBj
YXQuCj4gCj4gT24gdGhlIG5hbWluZyBiaWtlc2hlZDogVGhlIGlkZWEgZm9yIHVzaW5nIF9hd2Fp
dF8gdG8gZGVub3RlIGFkZGluZwo+IGRlcGVuZGVuY2llcyB0byBhIGpvYiBjb21lcyBmcm9tIGk5
MTUsIHdoZXJlIHRoYXQncyB1c2VkIHF1aXRlCj4gZXh0ZW5zaXZlbHkgYWxsIG92ZXIgdGhlIHBs
YWNlLCBpbiBsb3RzIG9mIGRhdGFzdHJ1Y3R1cmVzLgo+IAo+IFNpZ25lZC1vZmYtYnk6IERhbmll
bCBWZXR0ZXIgPGRhbmllbC52ZXR0ZXJAaW50ZWwuY29tPgo+IENjOiBEYXZpZCBBaXJsaWUgPGFp
cmxpZWRAbGludXguaWU+Cj4gQ2M6IERhbmllbCBWZXR0ZXIgPGRhbmllbEBmZndsbC5jaD4KPiBD
YzogU3VtaXQgU2Vtd2FsIDxzdW1pdC5zZW13YWxAbGluYXJvLm9yZz4KPiBDYzogIkNocmlzdGlh
biBLw7ZuaWciIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cj4gQ2M6IEFuZHJleSBHcm9kem92
c2t5IDxhbmRyZXkuZ3JvZHpvdnNreUBhbWQuY29tPgo+IENjOiBMZWUgSm9uZXMgPGxlZS5qb25l
c0BsaW5hcm8ub3JnPgo+IENjOiBOaXJtb3kgRGFzIDxuaXJtb3kuYWllbWRAZ21haWwuY29tPgo+
IENjOiBCb3JpcyBCcmV6aWxsb24gPGJvcmlzLmJyZXppbGxvbkBjb2xsYWJvcmEuY29tPgo+IENj
OiBMdWJlbiBUdWlrb3YgPGx1YmVuLnR1aWtvdkBhbWQuY29tPgo+IENjOiBBbGV4IERldWNoZXIg
PGFsZXhhbmRlci5kZXVjaGVyQGFtZC5jb20+Cj4gQ2M6IEphY2sgWmhhbmcgPEphY2suWmhhbmcx
QGFtZC5jb20+Cj4gQ2M6IGxpbnV4LW1lZGlhQHZnZXIua2VybmVsLm9yZwo+IENjOiBsaW5hcm8t
bW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKPiAtLS0KPiAgZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxl
ci9zY2hlZF9lbnRpdHkuYyB8ICAxOCArKystCj4gIGRyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIv
c2NoZWRfbWFpbi5jICAgfCAxMDMgKysrKysrKysrKysrKysrKysrKysrKysKPiAgaW5jbHVkZS9k
cm0vZ3B1X3NjaGVkdWxlci5oICAgICAgICAgICAgICB8ICAzMSArKysrKystCj4gIDMgZmlsZXMg
Y2hhbmdlZCwgMTQ2IGluc2VydGlvbnMoKyksIDYgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfZW50aXR5LmMgYi9kcml2ZXJzL2dw
dS9kcm0vc2NoZWR1bGVyL3NjaGVkX2VudGl0eS5jCj4gaW5kZXggZjczNDdjMjg0ODg2Li5iNmY3
MmZhZmQ1MDQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9l
bnRpdHkuYwo+ICsrKyBiL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIvc2NoZWRfZW50aXR5LmMK
PiBAQCAtMjExLDYgKzIxMSwxOSBAQCBzdGF0aWMgdm9pZCBkcm1fc2NoZWRfZW50aXR5X2tpbGxf
am9ic19jYihzdHJ1Y3QgZG1hX2ZlbmNlICpmLAo+ICAJam9iLT5zY2hlZC0+b3BzLT5mcmVlX2pv
Yihqb2IpOwo+ICB9Cj4gIAo+ICtzdGF0aWMgc3RydWN0IGRtYV9mZW5jZSAqCj4gK2RybV9zY2hl
ZF9qb2JfZGVwZW5kZW5jeShzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAqam9iLAo+ICsJCQkgc3RydWN0
IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eSkKPiArewo+ICsJaWYgKCF4YV9lbXB0eSgmam9iLT5k
ZXBlbmRlbmNpZXMpKQo+ICsJCXJldHVybiB4YV9lcmFzZSgmam9iLT5kZXBlbmRlbmNpZXMsIGpv
Yi0+bGFzdF9kZXBlbmRlbmN5KyspOwoKTm90IHN1cmUgaG93IG11Y2ggaXQgYnV5cyB1cyBub3cg
dGhhdCB5b3UgZGVkdXAgZmVuY2VzIGJlZm9yZSBhZGRpbmcKdGhlbSB0byB0aGUgeGEsIGJ1dCB3
ZSBjb3VsZCBhdm9pZCBwb3RlbnRpYWxseSBhdm9pZCBzb21lIHBpbmctcG9uZwpsb29waW5nIGlu
IHRoZSBzY2hlZHVsZXIgYnkgY2hlY2tpbmcgaWYgdGhlIGZlbmNlIHdlIGFyZSBhYm91dCB0bwpy
ZXR1cm4gaGVyZSBpcyBhbHJlYWR5IHNpZ25hbGVkIGFuZCBza2lwcGluZyB0byB0aGUgbmV4dCBv
bmUgaWYgc28uCgpSZWdhcmRzLApMdWNhcwoKPiArCj4gKwlpZiAoam9iLT5zY2hlZC0+b3BzLT5k
ZXBlbmRlbmN5KQo+ICsJCXJldHVybiBqb2ItPnNjaGVkLT5vcHMtPmRlcGVuZGVuY3koam9iLCBl
bnRpdHkpOwo+ICsKPiArCXJldHVybiBOVUxMOwo+ICt9Cj4gKwo+ICAvKioKPiAgICogZHJtX3Nj
aGVkX2VudGl0eV9raWxsX2pvYnMgLSBNYWtlIHN1cmUgYWxsIHJlbWFpbmluZyBqb2JzIGFyZSBr
aWxsZWQKPiAgICoKPiBAQCAtMjI5LDcgKzI0Miw3IEBAIHN0YXRpYyB2b2lkIGRybV9zY2hlZF9l
bnRpdHlfa2lsbF9qb2JzKHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHkpCj4gIAkJc3Ry
dWN0IGRybV9zY2hlZF9mZW5jZSAqc19mZW5jZSA9IGpvYi0+c19mZW5jZTsKPiAgCj4gIAkJLyog
V2FpdCBmb3IgYWxsIGRlcGVuZGVuY2llcyB0byBhdm9pZCBkYXRhIGNvcnJ1cHRpb25zICovCj4g
LQkJd2hpbGUgKChmID0gam9iLT5zY2hlZC0+b3BzLT5kZXBlbmRlbmN5KGpvYiwgZW50aXR5KSkp
Cj4gKwkJd2hpbGUgKChmID0gZHJtX3NjaGVkX2pvYl9kZXBlbmRlbmN5KGpvYiwgZW50aXR5KSkp
Cj4gIAkJCWRtYV9mZW5jZV93YWl0KGYsIGZhbHNlKTsKPiAgCj4gIAkJZHJtX3NjaGVkX2ZlbmNl
X3NjaGVkdWxlZChzX2ZlbmNlKTsKPiBAQCAtNDE5LDcgKzQzMiw2IEBAIHN0YXRpYyBib29sIGRy
bV9zY2hlZF9lbnRpdHlfYWRkX2RlcGVuZGVuY3lfY2Ioc3RydWN0IGRybV9zY2hlZF9lbnRpdHkg
KmVudGl0eSkKPiAgICovCj4gIHN0cnVjdCBkcm1fc2NoZWRfam9iICpkcm1fc2NoZWRfZW50aXR5
X3BvcF9qb2Ioc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eSkKPiAgewo+IC0Jc3RydWN0
IGRybV9ncHVfc2NoZWR1bGVyICpzY2hlZCA9IGVudGl0eS0+cnEtPnNjaGVkOwo+ICAJc3RydWN0
IGRybV9zY2hlZF9qb2IgKnNjaGVkX2pvYjsKPiAgCj4gIAlzY2hlZF9qb2IgPSB0b19kcm1fc2No
ZWRfam9iKHNwc2NfcXVldWVfcGVlaygmZW50aXR5LT5qb2JfcXVldWUpKTsKPiBAQCAtNDI3LDcg
KzQzOSw3IEBAIHN0cnVjdCBkcm1fc2NoZWRfam9iICpkcm1fc2NoZWRfZW50aXR5X3BvcF9qb2Io
c3RydWN0IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eSkKPiAgCQlyZXR1cm4gTlVMTDsKPiAgCj4g
IAl3aGlsZSAoKGVudGl0eS0+ZGVwZW5kZW5jeSA9Cj4gLQkJCXNjaGVkLT5vcHMtPmRlcGVuZGVu
Y3koc2NoZWRfam9iLCBlbnRpdHkpKSkgewo+ICsJCQlkcm1fc2NoZWRfam9iX2RlcGVuZGVuY3ko
c2NoZWRfam9iLCBlbnRpdHkpKSkgewo+ICAJCXRyYWNlX2RybV9zY2hlZF9qb2Jfd2FpdF9kZXAo
c2NoZWRfam9iLCBlbnRpdHktPmRlcGVuZGVuY3kpOwo+ICAKPiAgCQlpZiAoZHJtX3NjaGVkX2Vu
dGl0eV9hZGRfZGVwZW5kZW5jeV9jYihlbnRpdHkpKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2dw
dS9kcm0vc2NoZWR1bGVyL3NjaGVkX21haW4uYyBiL2RyaXZlcnMvZ3B1L2RybS9zY2hlZHVsZXIv
c2NoZWRfbWFpbi5jCj4gaW5kZXggNzBlZWZlZDE3ZTA2Li4zNzBjMzM2ZDM4M2YgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy9ncHUvZHJtL3NjaGVkdWxlci9zY2hlZF9tYWluLmMKPiArKysgYi9kcml2
ZXJzL2dwdS9kcm0vc2NoZWR1bGVyL3NjaGVkX21haW4uYwo+IEBAIC02MDMsNiArNjAzLDggQEAg
aW50IGRybV9zY2hlZF9qb2JfaW5pdChzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAqam9iLAo+ICAKPiAg
CUlOSVRfTElTVF9IRUFEKCZqb2ItPmxpc3QpOwo+ICAKPiArCXhhX2luaXRfZmxhZ3MoJmpvYi0+
ZGVwZW5kZW5jaWVzLCBYQV9GTEFHU19BTExPQyk7Cj4gKwo+ICAJcmV0dXJuIDA7Cj4gIH0KPiAg
RVhQT1JUX1NZTUJPTChkcm1fc2NoZWRfam9iX2luaXQpOwo+IEBAIC02MjYsNiArNjI4LDk4IEBA
IHZvaWQgZHJtX3NjaGVkX2pvYl9hcm0oc3RydWN0IGRybV9zY2hlZF9qb2IgKmpvYikKPiAgfQo+
ICBFWFBPUlRfU1lNQk9MKGRybV9zY2hlZF9qb2JfYXJtKTsKPiAgCj4gKy8qKgo+ICsgKiBkcm1f
c2NoZWRfam9iX2F3YWl0X2ZlbmNlIC0gYWRkcyB0aGUgZmVuY2UgYXMgYSBqb2IgZGVwZW5kZW5j
eQo+ICsgKiBAam9iOiBzY2hlZHVsZXIgam9iIHRvIGFkZCB0aGUgZGVwZW5kZW5jaWVzIHRvCj4g
KyAqIEBmZW5jZTogdGhlIGRtYV9mZW5jZSB0byBhZGQgdG8gdGhlIGxpc3Qgb2YgZGVwZW5kZW5j
aWVzLgo+ICsgKgo+ICsgKiBOb3RlIHRoYXQgQGZlbmNlIGlzIGNvbnN1bWVkIGluIGJvdGggdGhl
IHN1Y2Nlc3MgYW5kIGVycm9yIGNhc2VzLgo+ICsgKgo+ICsgKiBSZXR1cm5zOgo+ICsgKiAwIG9u
IHN1Y2Nlc3MsIG9yIGFuIGVycm9yIG9uIGZhaWxpbmcgdG8gZXhwYW5kIHRoZSBhcnJheS4KPiAr
ICovCj4gK2ludCBkcm1fc2NoZWRfam9iX2F3YWl0X2ZlbmNlKHN0cnVjdCBkcm1fc2NoZWRfam9i
ICpqb2IsCj4gKwkJCSAgICAgIHN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQo+ICt7Cj4gKwlzdHJ1
Y3QgZG1hX2ZlbmNlICplbnRyeTsKPiArCXVuc2lnbmVkIGxvbmcgaW5kZXg7Cj4gKwl1MzIgaWQg
PSAwOwo+ICsJaW50IHJldDsKPiArCj4gKwlpZiAoIWZlbmNlKQo+ICsJCXJldHVybiAwOwo+ICsK
PiArCS8qIERlZHVwbGljYXRlIGlmIHdlIGFscmVhZHkgZGVwZW5kIG9uIGEgZmVuY2UgZnJvbSB0
aGUgc2FtZSBjb250ZXh0Lgo+ICsJICogVGhpcyBsZXRzIHRoZSBzaXplIG9mIHRoZSBhcnJheSBv
ZiBkZXBzIHNjYWxlIHdpdGggdGhlIG51bWJlciBvZgo+ICsJICogZW5naW5lcyBpbnZvbHZlZCwg
cmF0aGVyIHRoYW4gdGhlIG51bWJlciBvZiBCT3MuCj4gKwkgKi8KPiArCXhhX2Zvcl9lYWNoKCZq
b2ItPmRlcGVuZGVuY2llcywgaW5kZXgsIGVudHJ5KSB7Cj4gKwkJaWYgKGVudHJ5LT5jb250ZXh0
ICE9IGZlbmNlLT5jb250ZXh0KQo+ICsJCQljb250aW51ZTsKPiArCj4gKwkJaWYgKGRtYV9mZW5j
ZV9pc19sYXRlcihmZW5jZSwgZW50cnkpKSB7Cj4gKwkJCWRtYV9mZW5jZV9wdXQoZW50cnkpOwo+
ICsJCQl4YV9zdG9yZSgmam9iLT5kZXBlbmRlbmNpZXMsIGluZGV4LCBmZW5jZSwgR0ZQX0tFUk5F
TCk7Cj4gKwkJfSBlbHNlIHsKPiArCQkJZG1hX2ZlbmNlX3B1dChmZW5jZSk7Cj4gKwkJfQo+ICsJ
CXJldHVybiAwOwo+ICsJfQo+ICsKPiArCXJldCA9IHhhX2FsbG9jKCZqb2ItPmRlcGVuZGVuY2ll
cywgJmlkLCBmZW5jZSwgeGFfbGltaXRfMzJiLCBHRlBfS0VSTkVMKTsKPiArCWlmIChyZXQgIT0g
MCkKPiArCQlkbWFfZmVuY2VfcHV0KGZlbmNlKTsKPiArCj4gKwlyZXR1cm4gcmV0Owo+ICt9Cj4g
K0VYUE9SVF9TWU1CT0woZHJtX3NjaGVkX2pvYl9hd2FpdF9mZW5jZSk7Cj4gKwo+ICsvKioKPiAr
ICogZHJtX3NjaGVkX2pvYl9hd2FpdF9pbXBsaWNpdCAtIGFkZHMgaW1wbGljaXQgZGVwZW5kZW5j
aWVzIGFzIGpvYiBkZXBlbmRlbmNpZXMKPiArICogQGpvYjogc2NoZWR1bGVyIGpvYiB0byBhZGQg
dGhlIGRlcGVuZGVuY2llcyB0bwo+ICsgKiBAb2JqOiB0aGUgZ2VtIG9iamVjdCB0byBhZGQgbmV3
IGRlcGVuZGVuY2llcyBmcm9tLgo+ICsgKiBAd3JpdGU6IHdoZXRoZXIgdGhlIGpvYiBtaWdodCB3
cml0ZSB0aGUgb2JqZWN0IChzbyB3ZSBuZWVkIHRvIGRlcGVuZCBvbgo+ICsgKiBzaGFyZWQgZmVu
Y2VzIGluIHRoZSByZXNlcnZhdGlvbiBvYmplY3QpLgo+ICsgKgo+ICsgKiBUaGlzIHNob3VsZCBi
ZSBjYWxsZWQgYWZ0ZXIgZHJtX2dlbV9sb2NrX3Jlc2VydmF0aW9ucygpIG9uIHlvdXIgYXJyYXkg
b2YKPiArICogR0VNIG9iamVjdHMgdXNlZCBpbiB0aGUgam9iIGJ1dCBiZWZvcmUgdXBkYXRpbmcg
dGhlIHJlc2VydmF0aW9ucyB3aXRoIHlvdXIKPiArICogb3duIGZlbmNlcy4KPiArICoKPiArICog
UmV0dXJuczoKPiArICogMCBvbiBzdWNjZXNzLCBvciBhbiBlcnJvciBvbiBmYWlsaW5nIHRvIGV4
cGFuZCB0aGUgYXJyYXkuCj4gKyAqLwo+ICtpbnQgZHJtX3NjaGVkX2pvYl9hd2FpdF9pbXBsaWNp
dChzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAqam9iLAo+ICsJCQkJIHN0cnVjdCBkcm1fZ2VtX29iamVj
dCAqb2JqLAo+ICsJCQkJIGJvb2wgd3JpdGUpCj4gK3sKPiArCWludCByZXQ7Cj4gKwlzdHJ1Y3Qg
ZG1hX2ZlbmNlICoqZmVuY2VzOwo+ICsJdW5zaWduZWQgaW50IGksIGZlbmNlX2NvdW50Owo+ICsK
PiArCWlmICghd3JpdGUpIHsKPiArCQlzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSA9IGRtYV9yZXN2
X2dldF9leGNsX3VubG9ja2VkKG9iai0+cmVzdik7Cj4gKwo+ICsJCXJldHVybiBkcm1fc2NoZWRf
am9iX2F3YWl0X2ZlbmNlKGpvYiwgZmVuY2UpOwo+ICsJfQo+ICsKPiArCXJldCA9IGRtYV9yZXN2
X2dldF9mZW5jZXMob2JqLT5yZXN2LCBOVUxMLCAmZmVuY2VfY291bnQsICZmZW5jZXMpOwo+ICsJ
aWYgKHJldCB8fCAhZmVuY2VfY291bnQpCj4gKwkJcmV0dXJuIHJldDsKPiArCj4gKwlmb3IgKGkg
PSAwOyBpIDwgZmVuY2VfY291bnQ7IGkrKykgewo+ICsJCXJldCA9IGRybV9zY2hlZF9qb2JfYXdh
aXRfZmVuY2Uoam9iLCBmZW5jZXNbaV0pOwo+ICsJCWlmIChyZXQpCj4gKwkJCWJyZWFrOwo+ICsJ
fQo+ICsKPiArCWZvciAoOyBpIDwgZmVuY2VfY291bnQ7IGkrKykKPiArCQlkbWFfZmVuY2VfcHV0
KGZlbmNlc1tpXSk7Cj4gKwlrZnJlZShmZW5jZXMpOwo+ICsJcmV0dXJuIHJldDsKPiArfQo+ICtF
WFBPUlRfU1lNQk9MKGRybV9zY2hlZF9qb2JfYXdhaXRfaW1wbGljaXQpOwo+ICsKPiArCj4gIC8q
Kgo+ICAgKiBkcm1fc2NoZWRfam9iX2NsZWFudXAgLSBjbGVhbiB1cCBzY2hlZHVsZXIgam9iIHJl
c291cmNlcwo+ICAgKgo+IEBAIC02MzMsOCArNzI3LDE3IEBAIEVYUE9SVF9TWU1CT0woZHJtX3Nj
aGVkX2pvYl9hcm0pOwo+ICAgKi8KPiAgdm9pZCBkcm1fc2NoZWRfam9iX2NsZWFudXAoc3RydWN0
IGRybV9zY2hlZF9qb2IgKmpvYikKPiAgewo+ICsJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7Cj4g
Kwl1bnNpZ25lZCBsb25nIGluZGV4Owo+ICsKPiAgCWRtYV9mZW5jZV9wdXQoJmpvYi0+c19mZW5j
ZS0+ZmluaXNoZWQpOwo+ICAJam9iLT5zX2ZlbmNlID0gTlVMTDsKPiArCj4gKwl4YV9mb3JfZWFj
aCgmam9iLT5kZXBlbmRlbmNpZXMsIGluZGV4LCBmZW5jZSkgewo+ICsJCWRtYV9mZW5jZV9wdXQo
ZmVuY2UpOwo+ICsJfQo+ICsJeGFfZGVzdHJveSgmam9iLT5kZXBlbmRlbmNpZXMpOwo+ICsKPiAg
fQo+ICBFWFBPUlRfU1lNQk9MKGRybV9zY2hlZF9qb2JfY2xlYW51cCk7Cj4gIAo+IGRpZmYgLS1n
aXQgYS9pbmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmggYi9pbmNsdWRlL2RybS9ncHVfc2NoZWR1
bGVyLmgKPiBpbmRleCA4MDQzOGQxMjZjOWQuLmU0ZDdlMTQ5NjI5NiAxMDA2NDQKPiAtLS0gYS9p
bmNsdWRlL2RybS9ncHVfc2NoZWR1bGVyLmgKPiArKysgYi9pbmNsdWRlL2RybS9ncHVfc2NoZWR1
bGVyLmgKPiBAQCAtMjcsOSArMjcsMTIgQEAKPiAgI2luY2x1ZGUgPGRybS9zcHNjX3F1ZXVlLmg+
Cj4gICNpbmNsdWRlIDxsaW51eC9kbWEtZmVuY2UuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L2NvbXBs
ZXRpb24uaD4KPiArI2luY2x1ZGUgPGxpbnV4L3hhcnJheS5oPgo+ICAKPiAgI2RlZmluZSBNQVhf
V0FJVF9TQ0hFRF9FTlRJVFlfUV9FTVBUWSBtc2Vjc190b19qaWZmaWVzKDEwMDApCj4gIAo+ICtz
dHJ1Y3QgZHJtX2dlbV9vYmplY3Q7Cj4gKwo+ICBzdHJ1Y3QgZHJtX2dwdV9zY2hlZHVsZXI7Cj4g
IHN0cnVjdCBkcm1fc2NoZWRfcnE7Cj4gIAo+IEBAIC0xOTgsNiArMjAxLDE2IEBAIHN0cnVjdCBk
cm1fc2NoZWRfam9iIHsKPiAgCWVudW0gZHJtX3NjaGVkX3ByaW9yaXR5CQlzX3ByaW9yaXR5Owo+
ICAJc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgICAgICAgICAqZW50aXR5Owo+ICAJc3RydWN0IGRt
YV9mZW5jZV9jYgkJY2I7Cj4gKwkvKioKPiArCSAqIEBkZXBlbmRlbmNpZXM6Cj4gKwkgKgo+ICsJ
ICogQ29udGFpbnMgdGhlIGRlcGVuZGVuY2llcyBhcyBzdHJ1Y3QgZG1hX2ZlbmNlIGZvciB0aGlz
IGpvYiwgc2VlCj4gKwkgKiBkcm1fc2NoZWRfam9iX2F3YWl0X2ZlbmNlKCkgYW5kIGRybV9zY2hl
ZF9qb2JfYXdhaXRfaW1wbGljaXQoKS4KPiArCSAqLwo+ICsJc3RydWN0IHhhcnJheQkJCWRlcGVu
ZGVuY2llczsKPiArCj4gKwkvKiogQGxhc3RfZGVwZW5kZW5jeTogdHJhY2tzIEBkZXBlbmRlbmNp
ZXMgYXMgdGhleSBzaWduYWwgKi8KPiArCXVuc2lnbmVkIGxvbmcJCQlsYXN0X2RlcGVuZGVuY3k7
Cj4gIH07Cj4gIAo+ICBzdGF0aWMgaW5saW5lIGJvb2wgZHJtX3NjaGVkX2ludmFsaWRhdGVfam9i
KHN0cnVjdCBkcm1fc2NoZWRfam9iICpzX2pvYiwKPiBAQCAtMjIwLDkgKzIzMywxNCBAQCBlbnVt
IGRybV9ncHVfc2NoZWRfc3RhdCB7Cj4gICAqLwo+ICBzdHJ1Y3QgZHJtX3NjaGVkX2JhY2tlbmRf
b3BzIHsKPiAgCS8qKgo+IC0gICAgICAgICAqIEBkZXBlbmRlbmN5OiBDYWxsZWQgd2hlbiB0aGUg
c2NoZWR1bGVyIGlzIGNvbnNpZGVyaW5nIHNjaGVkdWxpbmcKPiAtICAgICAgICAgKiB0aGlzIGpv
YiBuZXh0LCB0byBnZXQgYW5vdGhlciBzdHJ1Y3QgZG1hX2ZlbmNlIGZvciB0aGlzIGpvYiB0bwo+
IC0JICogYmxvY2sgb24uICBPbmNlIGl0IHJldHVybnMgTlVMTCwgcnVuX2pvYigpIG1heSBiZSBj
YWxsZWQuCj4gKwkgKiBAZGVwZW5kZW5jeToKPiArCSAqCj4gKwkgKiBDYWxsZWQgd2hlbiB0aGUg
c2NoZWR1bGVyIGlzIGNvbnNpZGVyaW5nIHNjaGVkdWxpbmcgdGhpcyBqb2IgbmV4dCwgdG8KPiAr
CSAqIGdldCBhbm90aGVyIHN0cnVjdCBkbWFfZmVuY2UgZm9yIHRoaXMgam9iIHRvIGJsb2NrIG9u
LiAgT25jZSBpdAo+ICsJICogcmV0dXJucyBOVUxMLCBydW5fam9iKCkgbWF5IGJlIGNhbGxlZC4K
PiArCSAqCj4gKwkgKiBJZiBhIGRyaXZlciBleGNsdXNpdmVseSB1c2VzIGRybV9zY2hlZF9qb2Jf
YXdhaXRfZmVuY2UoKSBhbmQKPiArCSAqIGRybV9zY2hlZF9qb2JfYXdhaXRfaW1wbGljaXQoKSB0
aGlzIGNhbiBiZSBvbW1pdHRlZCBhbmQgbGVmdCBhcyBOVUxMLgo+ICAJICovCj4gIAlzdHJ1Y3Qg
ZG1hX2ZlbmNlICooKmRlcGVuZGVuY3kpKHN0cnVjdCBkcm1fc2NoZWRfam9iICpzY2hlZF9qb2Is
Cj4gIAkJCQkJc3RydWN0IGRybV9zY2hlZF9lbnRpdHkgKnNfZW50aXR5KTsKPiBAQCAtMzE0LDYg
KzMzMiwxMyBAQCBpbnQgZHJtX3NjaGVkX2pvYl9pbml0KHN0cnVjdCBkcm1fc2NoZWRfam9iICpq
b2IsCj4gIAkJICAgICAgIHN0cnVjdCBkcm1fc2NoZWRfZW50aXR5ICplbnRpdHksCj4gIAkJICAg
ICAgIHZvaWQgKm93bmVyKTsKPiAgdm9pZCBkcm1fc2NoZWRfam9iX2FybShzdHJ1Y3QgZHJtX3Nj
aGVkX2pvYiAqam9iKTsKPiAraW50IGRybV9zY2hlZF9qb2JfYXdhaXRfZmVuY2Uoc3RydWN0IGRy
bV9zY2hlZF9qb2IgKmpvYiwKPiArCQkJICAgICAgc3RydWN0IGRtYV9mZW5jZSAqZmVuY2UpOwo+
ICtpbnQgZHJtX3NjaGVkX2pvYl9hd2FpdF9pbXBsaWNpdChzdHJ1Y3QgZHJtX3NjaGVkX2pvYiAq
am9iLAo+ICsJCQkJIHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqLAo+ICsJCQkJIGJvb2wgd3Jp
dGUpOwo+ICsKPiArCj4gIHZvaWQgZHJtX3NjaGVkX2VudGl0eV9tb2RpZnlfc2NoZWQoc3RydWN0
IGRybV9zY2hlZF9lbnRpdHkgKmVudGl0eSwKPiAgCQkJCSAgICBzdHJ1Y3QgZHJtX2dwdV9zY2hl
ZHVsZXIgKipzY2hlZF9saXN0LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHVuc2lnbmVkIGludCBudW1fc2NoZWRfbGlzdCk7CgoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KTGluYXJvLW1tLXNpZyBtYWlsaW5nIGxpc3QKTGluYXJv
LW1tLXNpZ0BsaXN0cy5saW5hcm8ub3JnCmh0dHBzOi8vbGlzdHMubGluYXJvLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL2xpbmFyby1tbS1zaWcK
