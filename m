Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 3E9C81C5171
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  5 May 2020 10:59:39 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 6ABE566072
	for <lists+linaro-mm-sig@lfdr.de>; Tue,  5 May 2020 08:59:38 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 5C6A266078; Tue,  5 May 2020 08:59:38 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-7.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_HI,RCVD_IN_MSPIKE_H3,RCVD_IN_MSPIKE_WL,SPF_HELO_PASS
	autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id C6BAA6652F;
	Tue,  5 May 2020 08:47:51 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 2B9AE66098
 for <linaro-mm-sig@lists.linaro.org>; Tue,  5 May 2020 08:46:46 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 1995566240; Tue,  5 May 2020 08:46:46 +0000 (UTC)
Received: from mailout1.w1.samsung.com (mailout1.w1.samsung.com
 [210.118.77.11])
 by lists.linaro.org (Postfix) with ESMTPS id E8BC266098
 for <linaro-mm-sig@lists.linaro.org>; Tue,  5 May 2020 08:46:32 +0000 (UTC)
Received: from eucas1p2.samsung.com (unknown [182.198.249.207])
 by mailout1.w1.samsung.com (KnoxPortal) with ESMTP id
 20200505084632euoutp01909171dd7a86387f76589d0db2fbc617~MFXxPJycT0374703747euoutp01S
 for <linaro-mm-sig@lists.linaro.org>; Tue,  5 May 2020 08:46:32 +0000 (GMT)
DKIM-Filter: OpenDKIM Filter v2.11.0 mailout1.w1.samsung.com
 20200505084632euoutp01909171dd7a86387f76589d0db2fbc617~MFXxPJycT0374703747euoutp01S
Received: from eusmges1new.samsung.com (unknown [203.254.199.242]) by
 eucas1p2.samsung.com (KnoxPortal) with ESMTP id
 20200505084631eucas1p27b5428febcb7e27e63404bc9e2562723~MFXw_RSkk2337523375eucas1p26;
 Tue,  5 May 2020 08:46:31 +0000 (GMT)
Received: from eucas1p1.samsung.com ( [182.198.249.206]) by
 eusmges1new.samsung.com (EUCPMTA) with SMTP id E4.CF.61286.7E721BE5; Tue,  5
 May 2020 09:46:31 +0100 (BST)
Received: from eusmtrp1.samsung.com (unknown [182.198.249.138]) by
 eucas1p1.samsung.com (KnoxPortal) with ESMTPA id
 20200505084631eucas1p11121f9373a1d282f0262d1faa33f35fb~MFXwm4GNn1829518295eucas1p1G;
 Tue,  5 May 2020 08:46:31 +0000 (GMT)
Received: from eusmgms1.samsung.com (unknown [182.198.249.179]) by
 eusmtrp1.samsung.com (KnoxPortal) with ESMTP id
 20200505084631eusmtrp1b2a447b426b11851ccc7beb9dbe4c0a3~MFXwmFhb00942309423eusmtrp1c;
 Tue,  5 May 2020 08:46:31 +0000 (GMT)
X-AuditID: cbfec7f2-f0bff7000001ef66-a8-5eb127e7e116
Received: from eusmtip1.samsung.com ( [203.254.199.221]) by
 eusmgms1.samsung.com (EUCPMTA) with SMTP id F9.14.08375.7E721BE5; Tue,  5
 May 2020 09:46:31 +0100 (BST)
Received: from AMDC2765.digital.local (unknown [106.120.51.73]) by
 eusmtip1.samsung.com (KnoxPortal) with ESMTPA id
 20200505084630eusmtip1b6044d22f68a33f9e85b8c312b39f146~MFXv_JryM0686606866eusmtip1K;
 Tue,  5 May 2020 08:46:30 +0000 (GMT)
From: Marek Szyprowski <m.szyprowski@samsung.com>
To: dri-devel@lists.freedesktop.org, iommu@lists.linux-foundation.org,
 linaro-mm-sig@lists.linaro.org, linux-kernel@vger.kernel.org
Date: Tue,  5 May 2020 10:46:02 +0200
Message-Id: <20200505084614.30424-13-m.szyprowski@samsung.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20200505084614.30424-1-m.szyprowski@samsung.com>
X-Brightmail-Tracker: H4sIAAAAAAAAA0WSfyyUcRzH973nueeeO86ejvGdRLspY0OqtaeJUTZP6g+ytWpFF8+w/No9
 KKZlRBxasmHHkPwovx0uncmP5Y7UzY5J+VHGulKXxlFqkfNI/70+n8/7/fl8P599cUTUx7XF
 o2ITaGmsJFqMCVClel3rqndqCzlUXuxB5muHOWRbSQuX3FQWIOT46hJGPmkY5JCVvZ7kHXkV
 ShrH5zikYn6CS46pyjAyxyjHyKYXMzyy//sCl1xXlaM+FlRjeSOgetYqUeqZfIZHPV37wKXe
 52o4VHv1bWpqYx6hCifrANX9Ng2j8jO+YdS9jnpArSjsA80vCU6E09FRSbTU3fuqIPL5rB7E
 Z7ne1KtqeGlA4SgDfBwSR+FwbSdXBgS4iHgMYObiIMIGRgCbvwxw2GAFwE+lr7cq+LalJecW
 m68DUFEuQ3cdo4ZSjqkvRnhAmUGGmdiKyARwKN/cJEKIPAT2Ff0ApoIlEQS7Z4u2DShxAM52
 9W7nhYQ3zK54h7IPdIANrX2Iiflb+XndNGZqBIkJHiz4quCwIj+oLviNsWwJFzUdPJbt4Ehh
 HsoaMgCc0zbx2CAPwLH0EsCqPOG09hdmWg4hnGGLyp3d0xfWvzrHogWcNOwxiZEtfKAs3rmE
 EGZnidgeB6Fc07w7tX9Uh7BMwU31ys4VBwH8k12G3gcO8v+zKgGoBzZ0IhMTQTMesfQNN0YS
 wyTGRriFxcUowNa/GtnQLHeBVd21AUDgQGwuvLDSEiLiSpKY5JgBAHFEbCWs/dkaIhKGS5JT
 aGlcqDQxmmYGwF4cFdsIj1R9viIiIiQJ9HWajqel/6ocnG+bBiqCjwkOBw7td7Sov+uzVqad
 PG62ZA2cAlaXiYfWQUiqQWBnW3NSN6LqyPPSTI21p4tzT1fJGnoX7JOrs4gzH1/qlUZG2FNm
 ERAo1o65lBaEdnb6PnojTr24GHbZi1TTsrP56znjpNp/33ldkzM/xeyUf0qtr2dbiTHYys+4
 JEaZSImHCyJlJH8B71YrTFMDAAA=
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFlrEIsWRmVeSWpSXmKPExsVy+t/xu7rP1TfGGTR+l7DoPXeSyWLjjPWs
 Fv+3TWS2uPL1PZvFytVHmSwW7Le2aJm1iMXiy5WHTBabHl9jtbi8aw6bReeXWWwWa4/cZbc4
 +OEJq8XPXfNYHPg81sxbw+ix99sCFo+ds+6ye2z/9oDV4373cSaPzUvqPW7/e8zsMfnGckaP
 3Tcb2Dx6m9+xefRtWcXo8XmTXABPlJ5NUX5pSapCRn5xia1StKGFkZ6hpYWekYmlnqGxeayV
 kamSvp1NSmpOZllqkb5dgl7GvnvPGQvadCue71rK3sC4SaWLkYNDQsBEYn1nbRcjF4eQwFJG
 ibsnZzN1MXICxWUkTk5rYIWwhSX+XOtigyj6xCix6fJrNpAEm4ChRNdbiISIQCejxLTuj+wg
 DrPAFGaJqfcbGEGqhAX8JT6eOQ7WwSKgKnFvx36wOK+AnUTH/FssECvkJVZvOMAMYnMCxR9f
 ugNWLyRQKPHh/HfWCYx8CxgZVjGKpJYW56bnFhvqFSfmFpfmpesl5+duYgTGz7ZjPzfvYLy0
 MfgQowAHoxIPb8Tn9XFCrIllxZW5hxglOJiVRHiX/dgQJ8SbklhZlVqUH19UmpNafIjRFOio
 icxSosn5wNjOK4k3NDU0t7A0NDc2NzazUBLn7RA4GCMkkJ5YkpqdmlqQWgTTx8TBKdXA2BcS
 2G3T91VZwrTt/T39zIeWNmcjOG+ob0wrntxwK3ztnNwS+wtSnYqPuPRezs3Ze8R3ho5djrh9
 V0FB2NX97bLcxX9qLU9t8j7LPemhp3n0e+XTJw8fnyMS3cl7cGZapstDxr3hJspit/Yem27p
 W/OpcEvZRN+9fLNOW3VGfQtWErq1yuCSEktxRqKhFnNRcSIAcRqvT7UCAAA=
X-CMS-MailID: 20200505084631eucas1p11121f9373a1d282f0262d1faa33f35fb
X-Msg-Generator: CA
X-RootMTR: 20200505084631eucas1p11121f9373a1d282f0262d1faa33f35fb
X-EPHeader: CA
CMS-TYPE: 201P
X-CMS-RootMailID: 20200505084631eucas1p11121f9373a1d282f0262d1faa33f35fb
References: <20200505083926.28503-1-m.szyprowski@samsung.com>
 <20200505084614.30424-1-m.szyprowski@samsung.com>
 <CGME20200505084631eucas1p11121f9373a1d282f0262d1faa33f35fb@eucas1p1.samsung.com>
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>,
 David Airlie <airlied@linux.ie>, Jonathan Hunter <jonathanh@nvidia.com>,
 Thierry Reding <thierry.reding@gmail.com>, Daniel Vetter <daniel@ffwll.ch>,
 linux-tegra@vger.kernel.org, Robin Murphy <robin.murphy@arm.com>,
 Christoph Hellwig <hch@lst.de>, linux-arm-kernel@lists.infradead.org
Subject: [Linaro-mm-sig] [PATCH v3 13/25] drm: tegra: fix common struct
 sg_table related issues
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

VGhlIERvY3VtZW50YXRpb24vRE1BLUFQSS1IT1dUTy50eHQgc3RhdGVzIHRoYXQgZG1hX21hcF9z
ZyByZXR1cm5zIHRoZQpudW1lciBvZiB0aGUgY3JlYXRlZCBlbnRyaWVzIGluIHRoZSBETUEgYWRk
cmVzcyBzcGFjZS4gSG93ZXZlciB0aGUKc3Vic2VxdWVudCBjYWxscyB0byBkbWFfc3luY19zZ19m
b3Jfe2RldmljZSxjcHV9IGFuZCBkbWFfdW5tYXBfc2cgbXVzdCBiZQpjYWxsZWQgd2l0aCB0aGUg
b3JpZ2luYWwgbnVtYmVyIG9mIHRoZSBlbnRyaWVzIHBhc3NlZCB0byBkbWFfbWFwX3NnLiBUaGUK
c2dfdGFibGUtPm5lbnRzIGluIHR1cm4gaG9sZHMgdGhlIHJlc3VsdCBvZiB0aGUgZG1hX21hcF9z
ZyBjYWxsIGFzIHN0YXRlZAppbiBpbmNsdWRlL2xpbnV4L3NjYXR0ZXJsaXN0LmguIEEgY29tbW9u
IG1pc3Rha2Ugd2FzIHRvIGlnbm9yZSBhIHJlc3VsdApvZiB0aGUgZG1hX21hcF9zZyBmdW5jdGlv
biBhbmQgZG9uJ3QgdXNlIHRoZSBzZ190YWJsZS0+b3JpZ19uZW50cyBhdCBhbGwuCgpUbyBhdm9p
ZCBzdWNoIGlzc3VlcywgbGV0cyB1c2UgY29tbW9uIGRtYS1tYXBwaW5nIHdyYXBwZXJzIG9wZXJh
dGluZwpkaXJlY3RseSBvbiB0aGUgc3RydWN0IHNnX3RhYmxlIG9iamVjdHMgYW5kIGFkanVzdCBy
ZWZlcmVuY2VzIHRvIHRoZQpuZW50cyBhbmQgb3JpZ19uZW50cyByZXNwZWN0aXZlbHkuCgpTaWdu
ZWQtb2ZmLWJ5OiBNYXJlayBTenlwcm93c2tpIDxtLnN6eXByb3dza2lAc2Ftc3VuZy5jb20+Ci0t
LQpGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlICdbUEFUQ0ggdjMgMDAvMjVdIERSTTogZml4IHN0
cnVjdCBzZ190YWJsZSBuZW50cwp2cy4gb3JpZ19uZW50cyBtaXN1c2UnIHRocmVhZDogaHR0cHM6
Ly9sa21sLm9yZy9sa21sLzIwMjAvNS81LzE4NwotLS0KIGRyaXZlcnMvZ3B1L2RybS90ZWdyYS9n
ZW0uYyAgIHwgMjcgKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLS0tCiBkcml2ZXJzL2dwdS9kcm0v
dGVncmEvcGxhbmUuYyB8IDE1ICsrKysrLS0tLS0tLS0tLQogMiBmaWxlcyBjaGFuZ2VkLCAxNSBp
bnNlcnRpb25zKCspLCAyNyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9k
cm0vdGVncmEvZ2VtLmMgYi9kcml2ZXJzL2dwdS9kcm0vdGVncmEvZ2VtLmMKaW5kZXggNjIzNzY4
MS4uNDU1NGZiYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL2dlbS5jCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS90ZWdyYS9nZW0uYwpAQCAtOTgsOCArOTgsOCBAQCBzdGF0aWMgc3Ry
dWN0IHNnX3RhYmxlICp0ZWdyYV9ib19waW4oc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3QgaG9z
dDF4X2JvICpibywKIAkJICogdGhlIFNHIHRhYmxlIG5lZWRzIHRvIGJlIGNvcGllZCB0byBhdm9p
ZCBvdmVyd3JpdGluZyBhbnkKIAkJICogb3RoZXIgcG90ZW50aWFsIHVzZXJzIG9mIHRoZSBvcmln
aW5hbCBTRyB0YWJsZS4KIAkJICovCi0JCWVyciA9IHNnX2FsbG9jX3RhYmxlX2Zyb21fc2coc2d0
LCBvYmotPnNndC0+c2dsLCBvYmotPnNndC0+bmVudHMsCi0JCQkJCSAgICAgR0ZQX0tFUk5FTCk7
CisJCWVyciA9IHNnX2FsbG9jX3RhYmxlX2Zyb21fc2coc2d0LCBvYmotPnNndC0+c2dsLAorCQkJ
CQkgICAgIG9iai0+c2d0LT5vcmlnX25lbnRzLCBHRlBfS0VSTkVMKTsKIAkJaWYgKGVyciA8IDAp
CiAJCQlnb3RvIGZyZWU7CiAJfSBlbHNlIHsKQEAgLTE5Niw4ICsxOTYsNyBAQCBzdGF0aWMgaW50
IHRlZ3JhX2JvX2lvbW11X21hcChzdHJ1Y3QgdGVncmFfZHJtICp0ZWdyYSwgc3RydWN0IHRlZ3Jh
X2JvICpibykKIAogCWJvLT5pb3ZhID0gYm8tPm1tLT5zdGFydDsKIAotCWJvLT5zaXplID0gaW9t
bXVfbWFwX3NnKHRlZ3JhLT5kb21haW4sIGJvLT5pb3ZhLCBiby0+c2d0LT5zZ2wsCi0JCQkJYm8t
PnNndC0+bmVudHMsIHByb3QpOworCWJvLT5zaXplID0gaW9tbXVfbWFwX3NndGFibGUodGVncmEt
PmRvbWFpbiwgYm8tPmlvdmEsIGJvLT5zZ3QsIHByb3QpOwogCWlmICghYm8tPnNpemUpIHsKIAkJ
ZGV2X2Vycih0ZWdyYS0+ZHJtLT5kZXYsICJmYWlsZWQgdG8gbWFwIGJ1ZmZlclxuIik7CiAJCWVy
ciA9IC1FTk9NRU07CkBAIC0yNjQsOCArMjYzLDcgQEAgc3RhdGljIHN0cnVjdCB0ZWdyYV9ibyAq
dGVncmFfYm9fYWxsb2Nfb2JqZWN0KHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sCiBzdGF0aWMgdm9p
ZCB0ZWdyYV9ib19mcmVlKHN0cnVjdCBkcm1fZGV2aWNlICpkcm0sIHN0cnVjdCB0ZWdyYV9ibyAq
Ym8pCiB7CiAJaWYgKGJvLT5wYWdlcykgewotCQlkbWFfdW5tYXBfc2coZHJtLT5kZXYsIGJvLT5z
Z3QtPnNnbCwgYm8tPnNndC0+bmVudHMsCi0JCQkgICAgIERNQV9GUk9NX0RFVklDRSk7CisJCWRt
YV91bm1hcF9zZ3RhYmxlKGRybS0+ZGV2LCBiby0+c2d0LCBETUFfRlJPTV9ERVZJQ0UpOwogCQlk
cm1fZ2VtX3B1dF9wYWdlcygmYm8tPmdlbSwgYm8tPnBhZ2VzLCB0cnVlLCB0cnVlKTsKIAkJc2df
ZnJlZV90YWJsZShiby0+c2d0KTsKIAkJa2ZyZWUoYm8tPnNndCk7CkBAIC0yOTAsMTIgKzI4OCw5
IEBAIHN0YXRpYyBpbnQgdGVncmFfYm9fZ2V0X3BhZ2VzKHN0cnVjdCBkcm1fZGV2aWNlICpkcm0s
IHN0cnVjdCB0ZWdyYV9ibyAqYm8pCiAJCWdvdG8gcHV0X3BhZ2VzOwogCX0KIAotCWVyciA9IGRt
YV9tYXBfc2coZHJtLT5kZXYsIGJvLT5zZ3QtPnNnbCwgYm8tPnNndC0+bmVudHMsCi0JCQkgRE1B
X0ZST01fREVWSUNFKTsKLQlpZiAoZXJyID09IDApIHsKLQkJZXJyID0gLUVGQVVMVDsKKwllcnIg
PSBkbWFfbWFwX3NndGFibGUoZHJtLT5kZXYsIGJvLT5zZ3QsIERNQV9GUk9NX0RFVklDRSk7CisJ
aWYgKGVycikKIAkJZ290byBmcmVlX3NndDsKLQl9CiAKIAlyZXR1cm4gMDsKIApAQCAtNTcxLDcg
KzU2Niw3IEBAIGludCB0ZWdyYV9kcm1fbW1hcChzdHJ1Y3QgZmlsZSAqZmlsZSwgc3RydWN0IHZt
X2FyZWFfc3RydWN0ICp2bWEpCiAJCQlnb3RvIGZyZWU7CiAJfQogCi0JaWYgKGRtYV9tYXBfc2co
YXR0YWNoLT5kZXYsIHNndC0+c2dsLCBzZ3QtPm5lbnRzLCBkaXIpID09IDApCisJaWYgKGRtYV9t
YXBfc2d0YWJsZShhdHRhY2gtPmRldiwgc2d0LCBkaXIpKQogCQlnb3RvIGZyZWU7CiAKIAlyZXR1
cm4gc2d0OwpAQCAtNTkwLDcgKzU4NSw3IEBAIHN0YXRpYyB2b2lkIHRlZ3JhX2dlbV9wcmltZV91
bm1hcF9kbWFfYnVmKHN0cnVjdCBkbWFfYnVmX2F0dGFjaG1lbnQgKmF0dGFjaCwKIAlzdHJ1Y3Qg
dGVncmFfYm8gKmJvID0gdG9fdGVncmFfYm8oZ2VtKTsKIAogCWlmIChiby0+cGFnZXMpCi0JCWRt
YV91bm1hcF9zZyhhdHRhY2gtPmRldiwgc2d0LT5zZ2wsIHNndC0+bmVudHMsIGRpcik7CisJCWRt
YV91bm1hcF9zZ3RhYmxlKGF0dGFjaC0+ZGV2LCBzZ3QsIGRpcik7CiAKIAlzZ19mcmVlX3RhYmxl
KHNndCk7CiAJa2ZyZWUoc2d0KTsKQEAgLTYwOSw4ICs2MDQsNyBAQCBzdGF0aWMgaW50IHRlZ3Jh
X2dlbV9wcmltZV9iZWdpbl9jcHVfYWNjZXNzKHN0cnVjdCBkbWFfYnVmICpidWYsCiAJc3RydWN0
IGRybV9kZXZpY2UgKmRybSA9IGdlbS0+ZGV2OwogCiAJaWYgKGJvLT5wYWdlcykKLQkJZG1hX3N5
bmNfc2dfZm9yX2NwdShkcm0tPmRldiwgYm8tPnNndC0+c2dsLCBiby0+c2d0LT5uZW50cywKLQkJ
CQkgICAgRE1BX0ZST01fREVWSUNFKTsKKwkJZG1hX3N5bmNfc2d0YWJsZV9mb3JfY3B1KGRybS0+
ZGV2LCBiby0+c2d0LCBETUFfRlJPTV9ERVZJQ0UpOwogCiAJcmV0dXJuIDA7CiB9CkBAIC02MjMs
OCArNjE3LDcgQEAgc3RhdGljIGludCB0ZWdyYV9nZW1fcHJpbWVfZW5kX2NwdV9hY2Nlc3Moc3Ry
dWN0IGRtYV9idWYgKmJ1ZiwKIAlzdHJ1Y3QgZHJtX2RldmljZSAqZHJtID0gZ2VtLT5kZXY7CiAK
IAlpZiAoYm8tPnBhZ2VzKQotCQlkbWFfc3luY19zZ19mb3JfZGV2aWNlKGRybS0+ZGV2LCBiby0+
c2d0LT5zZ2wsIGJvLT5zZ3QtPm5lbnRzLAotCQkJCSAgICAgICBETUFfVE9fREVWSUNFKTsKKwkJ
ZG1hX3N5bmNfc2d0YWJsZV9mb3JfZGV2aWNlKGRybS0+ZGV2LCBiby0+c2d0LCBETUFfVE9fREVW
SUNFKTsKIAogCXJldHVybiAwOwogfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3RlZ3Jh
L3BsYW5lLmMgYi9kcml2ZXJzL2dwdS9kcm0vdGVncmEvcGxhbmUuYwppbmRleCA5Y2NmYjU2Li40
YjFjMmFlNiAxMDA2NDQKLS0tIGEvZHJpdmVycy9ncHUvZHJtL3RlZ3JhL3BsYW5lLmMKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3RlZ3JhL3BsYW5lLmMKQEAgLTEzMCwxMiArMTMwLDkgQEAgc3RhdGlj
IGludCB0ZWdyYV9kY19waW4oc3RydWN0IHRlZ3JhX2RjICpkYywgc3RydWN0IHRlZ3JhX3BsYW5l
X3N0YXRlICpzdGF0ZSkKIAkJfQogCiAJCWlmIChzZ3QpIHsKLQkJCWVyciA9IGRtYV9tYXBfc2co
ZGMtPmRldiwgc2d0LT5zZ2wsIHNndC0+bmVudHMsCi0JCQkJCSBETUFfVE9fREVWSUNFKTsKLQkJ
CWlmIChlcnIgPT0gMCkgewotCQkJCWVyciA9IC1FTk9NRU07CisJCQllcnIgPSBkbWFfbWFwX3Nn
dGFibGUoZGMtPmRldiwgc2d0LCBETUFfVE9fREVWSUNFKTsKKwkJCWlmIChlcnIpCiAJCQkJZ290
byB1bnBpbjsKLQkJCX0KIAogCQkJLyoKIAkJCSAqIFRoZSBkaXNwbGF5IGNvbnRyb2xsZXIgbmVl
ZHMgY29udGlndW91cyBtZW1vcnksIHNvCkBAIC0xNDMsNyArMTQwLDcgQEAgc3RhdGljIGludCB0
ZWdyYV9kY19waW4oc3RydWN0IHRlZ3JhX2RjICpkYywgc3RydWN0IHRlZ3JhX3BsYW5lX3N0YXRl
ICpzdGF0ZSkKIAkJCSAqIG1hcCBpdHMgU0cgdGFibGUgdG8gYSBzaW5nbGUgY29udGlndW91cyBj
aHVuayBvZgogCQkJICogSS9PIHZpcnR1YWwgbWVtb3J5LgogCQkJICovCi0JCQlpZiAoZXJyID4g
MSkgeworCQkJaWYgKHNndC0+bmVudHMgPiAxKSB7CiAJCQkJZXJyID0gLUVJTlZBTDsKIAkJCQln
b3RvIHVucGluOwogCQkJfQpAQCAtMTY1LDggKzE2Miw3IEBAIHN0YXRpYyBpbnQgdGVncmFfZGNf
cGluKHN0cnVjdCB0ZWdyYV9kYyAqZGMsIHN0cnVjdCB0ZWdyYV9wbGFuZV9zdGF0ZSAqc3RhdGUp
CiAJCXN0cnVjdCBzZ190YWJsZSAqc2d0ID0gc3RhdGUtPnNndFtpXTsKIAogCQlpZiAoc2d0KQot
CQkJZG1hX3VubWFwX3NnKGRjLT5kZXYsIHNndC0+c2dsLCBzZ3QtPm5lbnRzLAotCQkJCSAgICAg
RE1BX1RPX0RFVklDRSk7CisJCQlkbWFfdW5tYXBfc2d0YWJsZShkYy0+ZGV2LCBzZ3QsIERNQV9U
T19ERVZJQ0UpOwogCiAJCWhvc3QxeF9ib191bnBpbihkYy0+ZGV2LCAmYm8tPmJhc2UsIHNndCk7
CiAJCXN0YXRlLT5pb3ZhW2ldID0gRE1BX01BUFBJTkdfRVJST1I7CkBAIC0xODUsOCArMTgxLDcg
QEAgc3RhdGljIHZvaWQgdGVncmFfZGNfdW5waW4oc3RydWN0IHRlZ3JhX2RjICpkYywgc3RydWN0
IHRlZ3JhX3BsYW5lX3N0YXRlICpzdGF0ZSkKIAkJc3RydWN0IHNnX3RhYmxlICpzZ3QgPSBzdGF0
ZS0+c2d0W2ldOwogCiAJCWlmIChzZ3QpCi0JCQlkbWFfdW5tYXBfc2coZGMtPmRldiwgc2d0LT5z
Z2wsIHNndC0+bmVudHMsCi0JCQkJICAgICBETUFfVE9fREVWSUNFKTsKKwkJCWRtYV91bm1hcF9z
Z3RhYmxlKGRjLT5kZXYsIHNndCwgRE1BX1RPX0RFVklDRSk7CiAKIAkJaG9zdDF4X2JvX3VucGlu
KGRjLT5kZXYsICZiby0+YmFzZSwgc2d0KTsKIAkJc3RhdGUtPmlvdmFbaV0gPSBETUFfTUFQUElO
R19FUlJPUjsKLS0gCjEuOS4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdApMaW5hcm8tbW0tc2lnQGxpc3Rz
LmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5hcm8ub3JnL21haWxtYW4vbGlzdGluZm8vbGlu
YXJvLW1tLXNpZwo=
