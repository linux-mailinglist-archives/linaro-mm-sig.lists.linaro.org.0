Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 8B790414C37
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 22 Sep 2021 16:38:05 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 4E48461A07
	for <lists+linaro-mm-sig@lfdr.de>; Wed, 22 Sep 2021 14:38:03 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 5F8DE619D7; Wed, 22 Sep 2021 14:38:02 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 64D65617D8;
	Wed, 22 Sep 2021 14:37:59 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id E398361754
 for <linaro-mm-sig@lists.linaro.org>; Wed, 22 Sep 2021 14:37:57 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id CA41D617D8; Wed, 22 Sep 2021 14:37:57 +0000 (UTC)
Received: from mga01.intel.com (mga01.intel.com [192.55.52.88])
 by lists.linaro.org (Postfix) with ESMTPS id 850A061754
 for <linaro-mm-sig@lists.linaro.org>; Wed, 22 Sep 2021 14:37:55 +0000 (UTC)
X-IronPort-AV: E=McAfee;i="6200,9189,10114"; a="246048731"
X-IronPort-AV: E=Sophos;i="5.85,314,1624345200"; d="scan'208";a="246048731"
Received: from fmsmga005.fm.intel.com ([10.253.24.32])
 by fmsmga101.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 22 Sep 2021 07:36:32 -0700
X-IronPort-AV: E=Sophos;i="5.85,314,1624345200"; d="scan'208";a="704043056"
Received: from bbrowne-mobl.ger.corp.intel.com (HELO [10.213.200.151])
 ([10.213.200.151])
 by fmsmga005-auth.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 22 Sep 2021 07:36:31 -0700
To: =?UTF-8?Q?Christian_K=c3=b6nig?= <ckoenig.leichtzumerken@gmail.com>,
 linaro-mm-sig@lists.linaro.org, dri-devel@lists.freedesktop.org,
 linux-media@vger.kernel.org, intel-gfx@lists.freedesktop.org
References: <20210922091044.2612-1-christian.koenig@amd.com>
 <20210922091044.2612-2-christian.koenig@amd.com>
From: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Organization: Intel Corporation UK Plc
Message-ID: <093432d2-de8e-9684-03aa-7cb4842ea755@linux.intel.com>
Date: Wed, 22 Sep 2021 15:36:29 +0100
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.13.0
MIME-Version: 1.0
In-Reply-To: <20210922091044.2612-2-christian.koenig@amd.com>
Content-Language: en-US
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: Re: [Linaro-mm-sig] [PATCH 01/26] dma-buf: add
 dma_resv_for_each_fence_unlocked v4
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: daniel@ffwll.ch
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

Ck9uIDIyLzA5LzIwMjEgMTA6MTAsIENocmlzdGlhbiBLw7ZuaWcgd3JvdGU6Cj4gQWJzdHJhY3Qg
dGhlIGNvbXBsZXhpdHkgb2YgaXRlcmF0aW5nIG92ZXIgYWxsIHRoZSBmZW5jZXMKPiBpbiBhIGRt
YV9yZXN2IG9iamVjdC4KPiAKPiBUaGUgbmV3IGxvb3AgaGFuZGxlcyB0aGUgd2hvbGUgUkNVIGFu
ZCByZXRyeSBkYW5jZSBhbmQKPiByZXR1cm5zIG9ubHkgZmVuY2VzIHdoZXJlIHdlIGNhbiBiZSBz
dXJlIHdlIGdyYWJiZWQgdGhlCj4gcmlnaHQgb25lLgo+IAo+IHYyOiBmaXggYWNjZXNzaW5nIHRo
ZSBzaGFyZWQgZmVuY2VzIHdoaWxlIHRoZXkgbWlnaHQgYmUgZnJlZWQsCj4gICAgICBpbXByb3Zl
IGtlcm5lbGRvYywgcmVuYW1lIF9jdXJzb3IgdG8gX2l0ZXIsIGFkZAo+ICAgICAgZG1hX3Jlc3Zf
aXRlcl9pc19leGNsdXNpdmUsIGFkZCBkbWFfcmVzdl9pdGVyX2JlZ2luL2VuZAo+IAo+IHYzOiBy
ZXN0cnVjdG9yIHRoZSBjb2RlLCBtb3ZlIHJjdV9yZWFkX2xvY2soKS91bmxvY2soKSBpbnRvIHRo
ZQo+ICAgICAgaXRlcmF0b3IsIGFkZCBkbWFfcmVzdl9pdGVyX2lzX3Jlc3RhcnRlZCgpCj4gCj4g
djQ6IGZpeCBOVUxMIGRlcmVmIHdoZW4gbm8gZXhwbGljaXQgZmVuY2UgZXhpc3RzLCBkcm9wIHN1
cGVyZmxvdXMKPiAgICAgIHJjdV9yZWFkX2xvY2soKS91bmxvY2soKSBjYWxscy4KPiAKPiBTaWdu
ZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Cj4g
LS0tCj4gICBkcml2ZXJzL2RtYS1idWYvZG1hLXJlc3YuYyB8IDk1ICsrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrCj4gICBpbmNsdWRlL2xpbnV4L2RtYS1yZXN2LmggICB8IDk1
ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCj4gICAyIGZpbGVzIGNoYW5n
ZWQsIDE5MCBpbnNlcnRpb25zKCspCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hLWJ1Zi9k
bWEtcmVzdi5jIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMKPiBpbmRleCA4NGZiZTYwNjI5
ZTMuLjc3NjgxNDBhYjM2ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL2RtYS1idWYvZG1hLXJlc3Yu
Ywo+ICsrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtcmVzdi5jCj4gQEAgLTMyMyw2ICszMjMsMTAx
IEBAIHZvaWQgZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2Uoc3RydWN0IGRtYV9yZXN2ICpvYmosIHN0
cnVjdCBkbWFfZmVuY2UgKmZlbmNlKQo+ICAgfQo+ICAgRVhQT1JUX1NZTUJPTChkbWFfcmVzdl9h
ZGRfZXhjbF9mZW5jZSk7Cj4gICAKPiArLyoqCj4gKyAqIGRtYV9yZXN2X2l0ZXJfcmVzdGFydF91
bmxvY2tlZCAtIHJlc3RhcnQgdGhlIHVubG9ja2VkIGl0ZXJhdG9yCj4gKyAqIEBjdXJzb3I6IFRo
ZSBkbWFfcmVzdl9pdGVyIG9iamVjdCB0byByZXN0YXJ0Cj4gKyAqCj4gKyAqIFJlc3RhcnQgdGhl
IHVubG9ja2VkIGl0ZXJhdGlvbiBieSBpbml0aWFsaXppbmcgdGhlIGN1cnNvciBvYmplY3QuCj4g
KyAqLwo+ICtzdGF0aWMgdm9pZCBkbWFfcmVzdl9pdGVyX3Jlc3RhcnRfdW5sb2NrZWQoc3RydWN0
IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcikKPiArewo+ICsJY3Vyc29yLT5zZXEgPSByZWFkX3NlcWNv
dW50X2JlZ2luKCZjdXJzb3ItPm9iai0+c2VxKTsKPiArCWN1cnNvci0+aW5kZXggPSAtMTsKPiAr
CWlmIChjdXJzb3ItPmFsbF9mZW5jZXMpCj4gKwkJY3Vyc29yLT5mZW5jZXMgPSBkbWFfcmVzdl9z
aGFyZWRfbGlzdChjdXJzb3ItPm9iaik7Cj4gKwllbHNlCj4gKwkJY3Vyc29yLT5mZW5jZXMgPSBO
VUxMOwo+ICsJY3Vyc29yLT5pc19yZXN0YXJ0ZWQgPSB0cnVlOwo+ICt9Cj4gKwo+ICsvKioKPiAr
ICogZG1hX3Jlc3ZfaXRlcl93YWxrX3VubG9ja2VkIC0gd2FsayBvdmVyIGZlbmNlcyBpbiBhIGRt
YV9yZXN2IG9iago+ICsgKiBAY3Vyc29yOiBjdXJzb3IgdG8gcmVjb3JkIHRoZSBjdXJyZW50IHBv
c2l0aW9uCj4gKyAqCj4gKyAqIFJldHVybiBhbGwgdGhlIGZlbmNlcyBpbiB0aGUgZG1hX3Jlc3Yg
b2JqZWN0IHdoaWNoIGFyZSBub3QgeWV0IHNpZ25hbGVkLgo+ICsgKiBUaGUgcmV0dXJuZWQgZmVu
Y2UgaGFzIGFuIGV4dHJhIGxvY2FsIHJlZmVyZW5jZSBzbyB3aWxsIHN0YXkgYWxpdmUuCj4gKyAq
IElmIGEgY29uY3VycmVudCBtb2RpZnkgaXMgZGV0ZWN0ZWQgdGhlIHdob2xlIGl0ZXJyYXRpb24g
aXMgc3RhcnRlZCBvdmVyIGFnYWluLgoKaXRlcmF0aW9uCgo+ICsgKi8KPiArc3RhdGljIHZvaWQg
ZG1hX3Jlc3ZfaXRlcl93YWxrX3VubG9ja2VkKHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3Ip
Cj4gK3sKPiArCXN0cnVjdCBkbWFfcmVzdiAqb2JqID0gY3Vyc29yLT5vYmo7Cj4gKwo+ICsJZG8g
ewo+ICsJCS8qIERyb3AgdGhlIHJlZmVyZW5jZSBmcm9tIHRoZSBwcmV2aW91cyByb3VuZCAqLwo+
ICsJCWRtYV9mZW5jZV9wdXQoY3Vyc29yLT5mZW5jZSk7Cj4gKwo+ICsJCWlmIChjdXJzb3ItPmlu
ZGV4KysgPT0gLTEpIHsKPiArCQkJY3Vyc29yLT5mZW5jZSA9IGRtYV9yZXN2X2V4Y2xfZmVuY2Uo
b2JqKTsKPiArCj4gKwkJfSBlbHNlIGlmICghY3Vyc29yLT5mZW5jZXMgfHwKPiArCQkJICAgY3Vy
c29yLT5pbmRleCA+PSBjdXJzb3ItPmZlbmNlcy0+c2hhcmVkX2NvdW50KSB7Cj4gKwkJCWN1cnNv
ci0+ZmVuY2UgPSBOVUxMOwo+ICsKPiArCQl9IGVsc2Ugewo+ICsJCQlzdHJ1Y3QgZG1hX3Jlc3Zf
bGlzdCAqZmVuY2VzID0gY3Vyc29yLT5mZW5jZXM7Cj4gKwkJCXVuc2lnbmVkIGludCBpZHggPSBj
dXJzb3ItPmluZGV4Owo+ICsKPiArCQkJY3Vyc29yLT5mZW5jZSA9IHJjdV9kZXJlZmVyZW5jZShm
ZW5jZXMtPnNoYXJlZFtpZHhdKTsKPiArCQl9Cj4gKwkJaWYgKGN1cnNvci0+ZmVuY2UpCj4gKwkJ
CWN1cnNvci0+ZmVuY2UgPSBkbWFfZmVuY2VfZ2V0X3JjdShjdXJzb3ItPmZlbmNlKTsKPiArCX0g
d2hpbGUgKGN1cnNvci0+ZmVuY2UgJiYgZG1hX2ZlbmNlX2lzX3NpZ25hbGVkKGN1cnNvci0+ZmVu
Y2UpKTsKPiArfQo+ICsKPiArLyoqCj4gKyAqIGRtYV9yZXN2X2l0ZXJfZmlyc3RfdW5sb2NrZWQg
LSBmaXJzdCBmZW5jZSBpbiBhbiB1bmxvY2tlZCBkbWFfcmVzdiBvYmouCj4gKyAqIEBjdXJzb3I6
IHRoZSBjdXJzb3Igd2l0aCB0aGUgY3VycmVudCBwb3NpdGlvbgo+ICsgKgo+ICsgKiBSZXR1cm5z
IHRoZSBmaXJzdCBmZW5jZSBmcm9tIGFuIHVubG9ja2VkIGRtYV9yZXN2IG9iai4KPiArICovCj4g
K3N0cnVjdCBkbWFfZmVuY2UgKmRtYV9yZXN2X2l0ZXJfZmlyc3RfdW5sb2NrZWQoc3RydWN0IGRt
YV9yZXN2X2l0ZXIgKmN1cnNvcikKPiArewo+ICsJcmN1X3JlYWRfbG9jaygpOwo+ICsJZG8gewo+
ICsJCWRtYV9yZXN2X2l0ZXJfcmVzdGFydF91bmxvY2tlZChjdXJzb3IpOwo+ICsJCWRtYV9yZXN2
X2l0ZXJfd2Fsa191bmxvY2tlZChjdXJzb3IpOwo+ICsJfSB3aGlsZSAocmVhZF9zZXFjb3VudF9y
ZXRyeSgmY3Vyc29yLT5vYmotPnNlcSwgY3Vyc29yLT5zZXEpKTsKPiArCXJjdV9yZWFkX3VubG9j
aygpOwo+ICsKPiArCXJldHVybiBjdXJzb3ItPmZlbmNlOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0wo
ZG1hX3Jlc3ZfaXRlcl9maXJzdF91bmxvY2tlZCk7CgpXaHkgaXMgdGhpcyBvbmUgc3BsaXQgZnJv
bSBkbWFfcmVzdl9pdGVyX2JlZ2luIGFuZCBldmVuIGV4cG9ydGVkPyBJIApjb3VsZG4ndCBmaW5k
IGFueSB1c2VycyBpbiB0aGUgc2VyaWVzLgoKPiArCj4gKy8qKgo+ICsgKiBkbWFfcmVzdl9pdGVy
X25leHRfdW5sb2NrZWQgLSBuZXh0IGZlbmNlIGluIGFuIHVubG9ja2VkIGRtYV9yZXN2IG9iai4K
PiArICogQGN1cnNvcjogdGhlIGN1cnNvciB3aXRoIHRoZSBjdXJyZW50IHBvc2l0aW9uCj4gKyAq
Cj4gKyAqIFJldHVybnMgdGhlIG5leHQgZmVuY2UgZnJvbSBhbiB1bmxvY2tlZCBkbWFfcmVzdiBv
YmouCj4gKyAqLwo+ICtzdHJ1Y3QgZG1hX2ZlbmNlICpkbWFfcmVzdl9pdGVyX25leHRfdW5sb2Nr
ZWQoc3RydWN0IGRtYV9yZXN2X2l0ZXIgKmN1cnNvcikKPiArewo+ICsJYm9vbCByZXN0YXJ0Owo+
ICsKPiArCXJjdV9yZWFkX2xvY2soKTsKPiArCWN1cnNvci0+aXNfcmVzdGFydGVkID0gZmFsc2U7
Cj4gKwlyZXN0YXJ0ID0gcmVhZF9zZXFjb3VudF9yZXRyeSgmY3Vyc29yLT5vYmotPnNlcSwgY3Vy
c29yLT5zZXEpOwo+ICsJZG8gewo+ICsJCWlmIChyZXN0YXJ0KQo+ICsJCQlkbWFfcmVzdl9pdGVy
X3Jlc3RhcnRfdW5sb2NrZWQoY3Vyc29yKTsKPiArCQlkbWFfcmVzdl9pdGVyX3dhbGtfdW5sb2Nr
ZWQoY3Vyc29yKTsKPiArCQlyZXN0YXJ0ID0gdHJ1ZTsKPiArCX0gd2hpbGUgKHJlYWRfc2VxY291
bnRfcmV0cnkoJmN1cnNvci0+b2JqLT5zZXEsIGN1cnNvci0+c2VxKSk7Cj4gKwlyY3VfcmVhZF91
bmxvY2soKTsKPiArCj4gKwlyZXR1cm4gY3Vyc29yLT5mZW5jZTsKPiArfQo+ICtFWFBPUlRfU1lN
Qk9MKGRtYV9yZXN2X2l0ZXJfbmV4dF91bmxvY2tlZCk7CgpDb3VsZG4ndCBkbWFfcmVzdl9pdGVy
X2ZpcnN0X3VubG9ja2VkIGFuZCBkbWFfcmVzdl9pdGVyX25leHRfdW5sb2NrZWQgCnNoYXJlIHRo
ZSBzYW1lIGltcGxlbWVudGF0aW9uPyBFc3BlY2lhbGx5IGlmIHlvdSBhcmUgYWJsZSB0byByZXBs
YWNlIApjdXJzb3ItPmlzX3Jlc3RhcnRlZCB3aXRoIGN1cnNvci0+aW5kZXggPT0gLTEuCgo+ICsK
PiAgIC8qKgo+ICAgICogZG1hX3Jlc3ZfY29weV9mZW5jZXMgLSBDb3B5IGFsbCBmZW5jZXMgZnJv
bSBzcmMgdG8gZHN0Lgo+ICAgICogQGRzdDogdGhlIGRlc3RpbmF0aW9uIHJlc2VydmF0aW9uIG9i
amVjdAo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L2RtYS1yZXN2LmggYi9pbmNsdWRlL2xp
bnV4L2RtYS1yZXN2LmgKPiBpbmRleCA5MTAwZGQzZGMyMWYuLmJhZjc3YTU0MjM5MiAxMDA2NDQK
PiAtLS0gYS9pbmNsdWRlL2xpbnV4L2RtYS1yZXN2LmgKPiArKysgYi9pbmNsdWRlL2xpbnV4L2Rt
YS1yZXN2LmgKPiBAQCAtMTQ5LDYgKzE0OSwxMDEgQEAgc3RydWN0IGRtYV9yZXN2IHsKPiAgIAlz
dHJ1Y3QgZG1hX3Jlc3ZfbGlzdCBfX3JjdSAqZmVuY2U7Cj4gICB9Owo+ICAgCj4gKy8qKgo+ICsg
KiBzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAtIGN1cnJlbnQgcG9zaXRpb24gaW50byB0aGUgZG1hX3Jl
c3YgZmVuY2VzCj4gKyAqCj4gKyAqIERvbid0IHRvdWNoIHRoaXMgZGlyZWN0bHkgaW4gdGhlIGRy
aXZlciwgdXNlIHRoZSBhY2Nlc3NvciBmdW5jdGlvbiBpbnN0ZWFkLgo+ICsgKi8KPiArc3RydWN0
IGRtYV9yZXN2X2l0ZXIgewo+ICsJLyoqIEBvYmo6IFRoZSBkbWFfcmVzdiBvYmplY3Qgd2UgaXRl
cmF0ZSBvdmVyICovCj4gKwlzdHJ1Y3QgZG1hX3Jlc3YgKm9iajsKPiArCj4gKwkvKiogQGFsbF9m
ZW5jZXM6IElmIGFsbCBmZW5jZXMgc2hvdWxkIGJlIHJldHVybmVkICovCj4gKwlib29sIGFsbF9m
ZW5jZXM7Cj4gKwo+ICsJLyoqIEBmZW5jZTogdGhlIGN1cnJlbnRseSBoYW5kbGVkIGZlbmNlICov
Cj4gKwlzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZTsKPiArCj4gKwkvKiogQHNlcTogc2VxdWVuY2Ug
bnVtYmVyIHRvIGNoZWNrIGZvciBtb2RpZmljYXRpb25zICovCj4gKwl1bnNpZ25lZCBpbnQgc2Vx
Owo+ICsKPiArCS8qKiBAaW5kZXg6IGluZGV4IGludG8gdGhlIHNoYXJlZCBmZW5jZXMgKi8KPiAr
CXVuc2lnbmVkIGludCBpbmRleDsKPiArCj4gKwkvKiogQGZlbmNlczogdGhlIHNoYXJlZCBmZW5j
ZXMgKi8KPiArCXN0cnVjdCBkbWFfcmVzdl9saXN0ICpmZW5jZXM7Cj4gKwo+ICsJLyoqIEBpc19y
ZXN0YXJ0ZWQ6IHRydWUgaWYgdGhpcyBpcyB0aGUgZmlyc3QgcmV0dXJuZWQgZmVuY2UgKi8KPiAr
CWJvb2wgaXNfcmVzdGFydGVkOwo+ICt9Owo+ICsKPiArc3RydWN0IGRtYV9mZW5jZSAqZG1hX3Jl
c3ZfaXRlcl9maXJzdF91bmxvY2tlZChzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vyc29yKTsKPiAr
c3RydWN0IGRtYV9mZW5jZSAqZG1hX3Jlc3ZfaXRlcl9uZXh0X3VubG9ja2VkKHN0cnVjdCBkbWFf
cmVzdl9pdGVyICpjdXJzb3IpOwo+ICsKPiArLyoqCj4gKyAqIGRtYV9yZXN2X2l0ZXJfYmVnaW4g
LSBpbml0aWFsaXplIGEgZG1hX3Jlc3ZfaXRlciBvYmplY3QKPiArICogQGN1cnNvcjogVGhlIGRt
YV9yZXN2X2l0ZXIgb2JqZWN0IHRvIGluaXRpYWxpemUKPiArICogQG9iajogVGhlIGRtYV9yZXN2
IG9iamVjdCB3aGljaCB3ZSB3YW50IHRvIGl0ZXJhdG9yIG92ZXIKCml0ZXJhdGUKCj4gKyAqIEBh
bGxfZmVuY2VzOiBJZiBhbGwgZmVuY2VzIHNob3VsZCBiZSByZXR1cm5lZCBvciBqdXN0IHRoZSBl
eGNsdXNpdmUgb25lCj4gKyAqLwo+ICtzdGF0aWMgaW5saW5lIHZvaWQgZG1hX3Jlc3ZfaXRlcl9i
ZWdpbihzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vyc29yLAo+ICsJCQkJICAgICAgIHN0cnVjdCBk
bWFfcmVzdiAqb2JqLAo+ICsJCQkJICAgICAgIGJvb2wgYWxsX2ZlbmNlcykKPiArewo+ICsJY3Vy
c29yLT5vYmogPSBvYmo7Cj4gKwljdXJzb3ItPmFsbF9mZW5jZXMgPSBhbGxfZmVuY2VzOwo+ICsJ
Y3Vyc29yLT5mZW5jZSA9IE5VTEw7Cj4gK30KPiArCj4gKy8qKgo+ICsgKiBkbWFfcmVzdl9pdGVy
X2VuZCAtIGNsZWFudXAgYSBkbWFfcmVzdl9pdGVyIG9iamVjdAo+ICsgKiBAY3Vyc29yOiB0aGUg
ZG1hX3Jlc3ZfaXRlciBvYmplY3Qgd2hpY2ggc2hvdWxkIGJlIGNsZWFuZWQgdXAKPiArICoKPiAr
ICogTWFrZSBzdXJlIHRoYXQgdGhlIHJlZmVyZW5jZSB0byB0aGUgZmVuY2UgaW4gdGhlIGN1cnNv
ciBpcyBwcm9wZXJseQo+ICsgKiBkcm9wcGVkLgo+ICsgKi8KPiArc3RhdGljIGlubGluZSB2b2lk
IGRtYV9yZXN2X2l0ZXJfZW5kKHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IpCj4gK3sKPiAr
CWRtYV9mZW5jZV9wdXQoY3Vyc29yLT5mZW5jZSk7Cj4gK30KPiArCj4gKy8qKgo+ICsgKiBkbWFf
cmVzdl9pdGVyX2lzX2V4Y2x1c2l2ZSAtIHRlc3QgaWYgdGhlIGN1cnJlbnQgZmVuY2UgaXMgdGhl
IGV4Y2x1c2l2ZSBvbmUKPiArICogQGN1cnNvcjogdGhlIGN1cnNvciBvZiB0aGUgY3VycmVudCBw
b3NpdGlvbgo+ICsgKgo+ICsgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGN1cnJlbnRseSByZXR1cm5l
ZCBmZW5jZSBpcyB0aGUgZXhjbHVzaXZlIG9uZS4KPiArICovCj4gK3N0YXRpYyBpbmxpbmUgYm9v
bCBkbWFfcmVzdl9pdGVyX2lzX2V4Y2x1c2l2ZShzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciAqY3Vyc29y
KQo+ICt7Cj4gKwlyZXR1cm4gY3Vyc29yLT5pbmRleCA9PSAtMTsKPiArfQo+ICsKPiArLyoqCj4g
KyAqIGRtYV9yZXN2X2l0ZXJfaXNfcmVzdGFydGVkIC0gdGVzdCBpZiB0aGlzIGlzIHRoZSBmaXJz
dCBmZW5jZSBhZnRlciBhIHJlc3RhcnQKPiArICogQGN1cnNvcjogdGhlIGN1cnNvciB3aXRoIHRo
ZSBjdXJyZW50IHBvc2l0aW9uCj4gKyAqCj4gKyAqIFJldHVybiB0cnVlIGlmIHRoaXMgaXMgdGhl
IGZpcnN0IGZlbmNlIGluIGFuIGludGVyYXRpb24gYWZ0ZXIgYSByZXN0YXJ0LgoKaXRlcmF0aW9u
Cgo+ICsgKi8KPiArc3RhdGljIGlubGluZSBib29sIGRtYV9yZXN2X2l0ZXJfaXNfcmVzdGFydGVk
KHN0cnVjdCBkbWFfcmVzdl9pdGVyICpjdXJzb3IpCj4gK3sKPiArCXJldHVybiBjdXJzb3ItPmlz
X3Jlc3RhcnRlZDsKPiArfQo+ICsKPiArLyoqCj4gKyAqIGRtYV9yZXN2X2Zvcl9lYWNoX2ZlbmNl
X3VubG9ja2VkIC0gdW5sb2NrZWQgZmVuY2UgaXRlcmF0b3IKPiArICogQGN1cnNvcjogYSBzdHJ1
Y3QgZG1hX3Jlc3ZfaXRlciBwb2ludGVyCj4gKyAqIEBmZW5jZTogdGhlIGN1cnJlbnQgZmVuY2UK
PiArICoKPiArICogSXRlcmF0ZSBvdmVyIHRoZSBmZW5jZXMgaW4gYSBzdHJ1Y3QgZG1hX3Jlc3Yg
b2JqZWN0IHdpdGhvdXQgaG9sZGluZyB0aGUKPiArICogJmRtYV9yZXN2LmxvY2sgYW5kIHVzaW5n
IFJDVSBpbnN0ZWFkLiBUaGUgY3Vyc29yIG5lZWRzIHRvIGJlIGluaXRpYWxpemVkCj4gKyAqIHdp
dGggZG1hX3Jlc3ZfaXRlcl9iZWdpbigpIGFuZCBjbGVhbmVkIHVwIHdpdGggZG1hX3Jlc3ZfaXRl
cl9lbmQoKS4gSW5zaWRlCj4gKyAqIHRoZSBpdGVyYXRvciBhIHJlZmVyZW5jZSB0byB0aGUgZG1h
X2ZlbmNlIGlzIGhvbGQgYW5kIHRoZSBSQ1UgbG9jayBkcm9wcGVkLgoKaGVsZAoKPiArICogV2hl
biB0aGUgZG1hX3Jlc3YgaXMgbW9kaWZpZWQgdGhlIGl0ZXJhdGlvbiBzdGFydHMgb3ZlciBhZ2Fp
bi4KPiArICovCj4gKyNkZWZpbmUgZG1hX3Jlc3ZfZm9yX2VhY2hfZmVuY2VfdW5sb2NrZWQoY3Vy
c29yLCBmZW5jZSkJCQlcCj4gKwlmb3IgKGZlbmNlID0gZG1hX3Jlc3ZfaXRlcl9maXJzdF91bmxv
Y2tlZChjdXJzb3IpOwkJXAo+ICsJICAgICBmZW5jZTsgZmVuY2UgPSBkbWFfcmVzdl9pdGVyX25l
eHRfdW5sb2NrZWQoY3Vyc29yKSkKPiArCj4gICAjZGVmaW5lIGRtYV9yZXN2X2hlbGQob2JqKSBs
b2NrZGVwX2lzX2hlbGQoJihvYmopLT5sb2NrLmJhc2UpCj4gICAjZGVmaW5lIGRtYV9yZXN2X2Fz
c2VydF9oZWxkKG9iaikgbG9ja2RlcF9hc3NlcnRfaGVsZCgmKG9iaiktPmxvY2suYmFzZSkKPiAg
IAo+IAoKUmVnYXJkcywKClR2cnRrbwpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcgbGlzdApMaW5hcm8tbW0tc2lnQGxp
c3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5hcm8ub3JnL21haWxtYW4vbGlzdGluZm8v
bGluYXJvLW1tLXNpZwo=
