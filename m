Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 9EB934F7AC6
	for <lists+linaro-mm-sig@lfdr.de>; Thu,  7 Apr 2022 11:01:13 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id D0781402C5
	for <lists+linaro-mm-sig@lfdr.de>; Thu,  7 Apr 2022 09:01:12 +0000 (UTC)
Received: from mail-ej1-f52.google.com (mail-ej1-f52.google.com [209.85.218.52])
	by lists.linaro.org (Postfix) with ESMTPS id 498AC402DD
	for <linaro-mm-sig@lists.linaro.org>; Thu,  7 Apr 2022 09:00:06 +0000 (UTC)
Received: by mail-ej1-f52.google.com with SMTP id qh7so9352727ejb.11
        for <linaro-mm-sig@lists.linaro.org>; Thu, 07 Apr 2022 02:00:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20210112;
        h=from:to:cc:subject:date:message-id:in-reply-to:references
         :mime-version:content-transfer-encoding;
        bh=k4MdPs7o4lRzMIAjOK9j7SEUNbdccutlRQJY9zoRfHo=;
        b=n0ylii3uNc5xljoSZQwvaXP/k01UyXN3bTTzfNTMJeZVY3+bGJts+DOGJ2HIq6TLhg
         asVjAIehzAZ6PDWB9H0ZXQcYrNwa4VNzxnQh9QiHO4RfwoxLjo3DOKuwRZhVCv9FzpqE
         6QSstXuaXaJENk0LJMyh83zxGxWzZ7AS8VPwXHBED5/ZQo2FPuwbpVm7pEsrn3gBjAMn
         u/aImpOtIZDgVNJcDArDYQ5Noe87aRsNjaCze2u0C6NgPXBWdoW3F0K+DqwvLizBHEkd
         frMN2WGtYNNHhvDwDaf72v/A0gIRLzNxhMBDvsGvaylXNleGNVpx1/u6Vj19F3kOKhnC
         gttA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
         :references:mime-version:content-transfer-encoding;
        bh=k4MdPs7o4lRzMIAjOK9j7SEUNbdccutlRQJY9zoRfHo=;
        b=7xFW7deJEcHZDKEfQUkxhyWkcACwlGAqh7gFW3qtyLOGfUyMAFQoPedgKKP5mYx98m
         4Ae5lcSAd0XaZynfXUE+aTj7NMCUc/DqDU23KgnQc6Fu6/dLst0V8GSOfwGhJqaARkuG
         SChm4WzfFvsay1n/tdk7RulX7MF7KleWszR0frqgEJHBjfsDl3jmmdNJmY59zsN0SiwE
         ODkfjoG06ggDKiRppEQ7GD9dqyPmqg5rjIOZ2mQqudnovqbQApNlMPgppruLrxUXEwhB
         nIHs2xoDzuI1Ynwei6E5PR+fXm9CVXz2uzQoZZR7/XngETX9MKkdv3wL63BZ2ihmcWpu
         R3yQ==
X-Gm-Message-State: AOAM530HGujaRbp9Q+oL2CGSO2Khh57F/J7NsCUcwbTR3ahmVfOdb3fU
	IhfkYE1dG2PiawKW6K5+O+M=
X-Google-Smtp-Source: ABdhPJxuExFLJ4jr7uUdkqn6aUnsN5fbMMqD5bRM4nNm5Iz8xwGHy0SzcltcTit8O5M1NG4/EF03vQ==
X-Received: by 2002:a17:906:a1c8:b0:6da:a635:e402 with SMTP id bx8-20020a170906a1c800b006daa635e402mr12400587ejb.598.1649322004299;
        Thu, 07 Apr 2022 02:00:04 -0700 (PDT)
Received: from able.fritz.box (p57b0b9e1.dip0.t-ipconnect.de. [87.176.185.225])
        by smtp.gmail.com with ESMTPSA id h26-20020a170906111a00b006e778bd4fc8sm5186563eja.38.2022.04.07.02.00.03
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Thu, 07 Apr 2022 02:00:03 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
To: daniel.vetter@ffwll.ch,
	dri-devel@lists.freedesktop.org,
	linux-media@vger.kernel.org,
	linaro-mm-sig@lists.linaro.org,
	intel-gfx@lists.freedesktop.org
Date: Thu,  7 Apr 2022 10:59:44 +0200
Message-Id: <20220407085946.744568-14-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20220407085946.744568-1-christian.koenig@amd.com>
References: <20220407085946.744568-1-christian.koenig@amd.com>
MIME-Version: 1.0
Message-ID-Hash: HFJYNUCAOW3FP4ZXM4PCWHQQKHWCE64K
X-Message-ID-Hash: HFJYNUCAOW3FP4ZXM4PCWHQQKHWCE64K
X-MailFrom: ckoenig.leichtzumerken@gmail.com
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
CC: =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH 13/15] drm/ttm: remove bo->moving
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/HFJYNUCAOW3FP4ZXM4PCWHQQKHWCE64K/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

VGhpcyBpcyBub3cgaGFuZGxlZCBieSB0aGUgRE1BLWJ1ZiBmcmFtZXdvcmsgaW4gdGhlIGRtYV9y
ZXN2IG9iai4NCg0KQWxzbyByZW1vdmUgdGhlIHdvcmthcm91bmQgaW5zaWRlIFZNV0dGWCB0byB1
cGRhdGUgdGhlIG1vdmluZyBmZW5jZS4NCg0KU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEvDtm5p
ZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPg0KUmV2aWV3ZWQtYnk6IERhbmllbCBWZXR0ZXIg
PGRhbmllbC52ZXR0ZXJAZmZ3bGwuY2g+DQotLS0NCiAuLi4vZ3B1L2RybS9hbWQvYW1kZ3B1L2Ft
ZGdwdV9hbWRrZmRfZ3B1dm0uYyAgfCAxMyArKysrLS0tDQogZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X29iamVjdC5jICAgIHwgIDUgKystDQogZHJpdmVycy9ncHUvZHJtL2FtZC9h
bWRncHUvYW1kZ3B1X3ZtX2NwdS5jICAgIHwgMTEgKysrLS0tDQogZHJpdmVycy9ncHUvZHJtL2Ft
ZC9hbWRncHUvYW1kZ3B1X3ZtX3NkbWEuYyAgIHwgMTEgKysrKy0tDQogZHJpdmVycy9ncHUvZHJt
L3R0bS90dG1fYm8uYyAgICAgICAgICAgICAgICAgIHwgMTAgKystLS0tDQogZHJpdmVycy9ncHUv
ZHJtL3R0bS90dG1fYm9fdXRpbC5jICAgICAgICAgICAgIHwgIDcgLS0tLQ0KIGRyaXZlcnMvZ3B1
L2RybS90dG0vdHRtX2JvX3ZtLmMgICAgICAgICAgICAgICB8IDM0ICsrKysrKystLS0tLS0tLS0t
LS0NCiBkcml2ZXJzL2dwdS9kcm0vdm13Z2Z4L3Ztd2dmeF9yZXNvdXJjZS5jICAgICAgfCAgNiAt
LS0tDQogaW5jbHVkZS9kcm0vdHRtL3R0bV9ib19hcGkuaCAgICAgICAgICAgICAgICAgIHwgIDIg
LS0NCiA5IGZpbGVzIGNoYW5nZWQsIDM5IGluc2VydGlvbnMoKyksIDYwIGRlbGV0aW9ucygtKQ0K
DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9n
cHV2bS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5j
DQppbmRleCA4MDhlMjFkY2I1MTcuLmE0OTU1ZWY3NmNmYyAxMDA2NDQNCi0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9hbWRrZmRfZ3B1dm0uYw0KKysrIGIvZHJpdmVycy9n
cHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X2FtZGtmZF9ncHV2bS5jDQpAQCAtMjQ0Nyw2ICsyNDQ3
LDggQEAgaW50IGFtZGdwdV9hbWRrZmRfZ3B1dm1fcmVzdG9yZV9wcm9jZXNzX2Jvcyh2b2lkICpp
bmZvLCBzdHJ1Y3QgZG1hX2ZlbmNlICoqZWYpDQogCQlzdHJ1Y3QgYW1kZ3B1X2JvICpibyA9IG1l
bS0+Ym87DQogCQl1aW50MzJfdCBkb21haW4gPSBtZW0tPmRvbWFpbjsNCiAJCXN0cnVjdCBrZmRf
bWVtX2F0dGFjaG1lbnQgKmF0dGFjaG1lbnQ7DQorCQlzdHJ1Y3QgZG1hX3Jlc3ZfaXRlciBjdXJz
b3I7DQorCQlzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZTsNCiANCiAJCXRvdGFsX3NpemUgKz0gYW1k
Z3B1X2JvX3NpemUoYm8pOw0KIA0KQEAgLTI0NjEsMTAgKzI0NjMsMTMgQEAgaW50IGFtZGdwdV9h
bWRrZmRfZ3B1dm1fcmVzdG9yZV9wcm9jZXNzX2Jvcyh2b2lkICppbmZvLCBzdHJ1Y3QgZG1hX2Zl
bmNlICoqZWYpDQogCQkJCWdvdG8gdmFsaWRhdGVfbWFwX2ZhaWw7DQogCQkJfQ0KIAkJfQ0KLQkJ
cmV0ID0gYW1kZ3B1X3N5bmNfZmVuY2UoJnN5bmNfb2JqLCBiby0+dGJvLm1vdmluZyk7DQotCQlp
ZiAocmV0KSB7DQotCQkJcHJfZGVidWcoIk1lbW9yeSBldmljdGlvbjogU3luYyBCTyBmZW5jZSBm
YWlsZWQuIFRyeSBhZ2FpblxuIik7DQotCQkJZ290byB2YWxpZGF0ZV9tYXBfZmFpbDsNCisJCWRt
YV9yZXN2X2Zvcl9lYWNoX2ZlbmNlKCZjdXJzb3IsIGJvLT50Ym8uYmFzZS5yZXN2LA0KKwkJCQkJ
RE1BX1JFU1ZfVVNBR0VfS0VSTkVMLCBmZW5jZSkgew0KKwkJCXJldCA9IGFtZGdwdV9zeW5jX2Zl
bmNlKCZzeW5jX29iaiwgZmVuY2UpOw0KKwkJCWlmIChyZXQpIHsNCisJCQkJcHJfZGVidWcoIk1l
bW9yeSBldmljdGlvbjogU3luYyBCTyBmZW5jZSBmYWlsZWQuIFRyeSBhZ2FpblxuIik7DQorCQkJ
CWdvdG8gdmFsaWRhdGVfbWFwX2ZhaWw7DQorCQkJfQ0KIAkJfQ0KIAkJbGlzdF9mb3JfZWFjaF9l
bnRyeShhdHRhY2htZW50LCAmbWVtLT5hdHRhY2htZW50cywgbGlzdCkgew0KIAkJCWlmICghYXR0
YWNobWVudC0+aXNfbWFwcGVkKQ0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1k
Z3B1L2FtZGdwdV9vYmplY3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9v
YmplY3QuYw0KaW5kZXggNTgzMmMwNWFiMTBkLi5lZjkzYWJlYzEzYjkgMTAwNjQ0DQotLS0gYS9k
cml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfb2JqZWN0LmMNCisrKyBiL2RyaXZlcnMv
Z3B1L2RybS9hbWQvYW1kZ3B1L2FtZGdwdV9vYmplY3QuYw0KQEAgLTYxMiw5ICs2MTIsOCBAQCBp
bnQgYW1kZ3B1X2JvX2NyZWF0ZShzdHJ1Y3QgYW1kZ3B1X2RldmljZSAqYWRldiwNCiAJCWlmICh1
bmxpa2VseShyKSkNCiAJCQlnb3RvIGZhaWxfdW5yZXNlcnZlOw0KIA0KLQkJYW1kZ3B1X2JvX2Zl
bmNlKGJvLCBmZW5jZSwgZmFsc2UpOw0KLQkJZG1hX2ZlbmNlX3B1dChiby0+dGJvLm1vdmluZyk7
DQotCQliby0+dGJvLm1vdmluZyA9IGRtYV9mZW5jZV9nZXQoZmVuY2UpOw0KKwkJZG1hX3Jlc3Zf
YWRkX2ZlbmNlKGJvLT50Ym8uYmFzZS5yZXN2LCBmZW5jZSwNCisJCQkJICAgRE1BX1JFU1ZfVVNB
R0VfS0VSTkVMKTsNCiAJCWRtYV9mZW5jZV9wdXQoZmVuY2UpOw0KIAl9DQogCWlmICghYnAtPnJl
c3YpDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtX2Nw
dS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUvYW1kZ3B1X3ZtX2NwdS5jDQppbmRleCBl
M2ZiZjBmMTBhZGQuLjMxOTEzYWU4NmRlNiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9h
bWQvYW1kZ3B1L2FtZGdwdV92bV9jcHUuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRn
cHUvYW1kZ3B1X3ZtX2NwdS5jDQpAQCAtNzQsMTMgKzc0LDEyIEBAIHN0YXRpYyBpbnQgYW1kZ3B1
X3ZtX2NwdV91cGRhdGUoc3RydWN0IGFtZGdwdV92bV91cGRhdGVfcGFyYW1zICpwLA0KIHsNCiAJ
dW5zaWduZWQgaW50IGk7DQogCXVpbnQ2NF90IHZhbHVlOw0KLQlpbnQgcjsNCisJbG9uZyByOw0K
IA0KLQlpZiAodm1iby0+Ym8udGJvLm1vdmluZykgew0KLQkJciA9IGRtYV9mZW5jZV93YWl0KHZt
Ym8tPmJvLnRiby5tb3ZpbmcsIHRydWUpOw0KLQkJaWYgKHIpDQotCQkJcmV0dXJuIHI7DQotCX0N
CisJciA9IGRtYV9yZXN2X3dhaXRfdGltZW91dCh2bWJvLT5iby50Ym8uYmFzZS5yZXN2LCBETUFf
UkVTVl9VU0FHRV9LRVJORUwsDQorCQkJCSAgdHJ1ZSwgTUFYX1NDSEVEVUxFX1RJTUVPVVQpOw0K
KwlpZiAociA8IDApDQorCQlyZXR1cm4gcjsNCiANCiAJcGUgKz0gKHVuc2lnbmVkIGxvbmcpYW1k
Z3B1X2JvX2twdHIoJnZtYm8tPmJvKTsNCiANCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0v
YW1kL2FtZGdwdS9hbWRncHVfdm1fc2RtYS5jIGIvZHJpdmVycy9ncHUvZHJtL2FtZC9hbWRncHUv
YW1kZ3B1X3ZtX3NkbWEuYw0KaW5kZXggOTQ4NWI1NDE5NDdlLi45Y2Q2ZjQxODk2YzAgMTAwNjQ0
DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm1fc2RtYS5jDQorKysg
Yi9kcml2ZXJzL2dwdS9kcm0vYW1kL2FtZGdwdS9hbWRncHVfdm1fc2RtYS5jDQpAQCAtMjA1LDE0
ICsyMDUsMTkgQEAgc3RhdGljIGludCBhbWRncHVfdm1fc2RtYV91cGRhdGUoc3RydWN0IGFtZGdw
dV92bV91cGRhdGVfcGFyYW1zICpwLA0KIAlzdHJ1Y3QgYW1kZ3B1X2JvICpibyA9ICZ2bWJvLT5i
bzsNCiAJZW51bSBhbWRncHVfaWJfcG9vbF90eXBlIHBvb2wgPSBwLT5pbW1lZGlhdGUgPyBBTURH
UFVfSUJfUE9PTF9JTU1FRElBVEUNCiAJCTogQU1ER1BVX0lCX1BPT0xfREVMQVlFRDsNCisJc3Ry
dWN0IGRtYV9yZXN2X2l0ZXIgY3Vyc29yOw0KIAl1bnNpZ25lZCBpbnQgaSwgbmR3LCBucHRlczsN
CisJc3RydWN0IGRtYV9mZW5jZSAqZmVuY2U7DQogCXVpbnQ2NF90ICpwdGU7DQogCWludCByOw0K
IA0KIAkvKiBXYWl0IGZvciBQRC9QVCBtb3ZlcyB0byBiZSBjb21wbGV0ZWQgKi8NCi0JciA9IGFt
ZGdwdV9zeW5jX2ZlbmNlKCZwLT5qb2ItPnN5bmMsIGJvLT50Ym8ubW92aW5nKTsNCi0JaWYgKHIp
DQotCQlyZXR1cm4gcjsNCisJZG1hX3Jlc3ZfZm9yX2VhY2hfZmVuY2UoJmN1cnNvciwgYm8tPnRi
by5iYXNlLnJlc3YsDQorCQkJCURNQV9SRVNWX1VTQUdFX0tFUk5FTCwgZmVuY2UpIHsNCisJCXIg
PSBhbWRncHVfc3luY19mZW5jZSgmcC0+am9iLT5zeW5jLCBmZW5jZSk7DQorCQlpZiAocikNCisJ
CQlyZXR1cm4gcjsNCisJfQ0KIA0KIAlkbyB7DQogCQluZHcgPSBwLT5udW1fZHdfbGVmdDsNCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jIGIvZHJpdmVycy9ncHUvZHJt
L3R0bS90dG1fYm8uYw0KaW5kZXggMzYwZjk4MGM3ZTEwLi4wMTVhOTRmNzY2ZGUgMTAwNjQ0DQot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9iby5jDQorKysgYi9kcml2ZXJzL2dwdS9kcm0v
dHRtL3R0bV9iby5jDQpAQCAtNDE4LDcgKzQxOCw2IEBAIHN0YXRpYyB2b2lkIHR0bV9ib19yZWxl
YXNlKHN0cnVjdCBrcmVmICprcmVmKQ0KIAlkbWFfcmVzdl91bmxvY2soYm8tPmJhc2UucmVzdik7
DQogDQogCWF0b21pY19kZWMoJnR0bV9nbG9iLmJvX2NvdW50KTsNCi0JZG1hX2ZlbmNlX3B1dChi
by0+bW92aW5nKTsNCiAJYm8tPmRlc3Ryb3koYm8pOw0KIH0NCiANCkBAIC03MTQsOSArNzEzLDgg
QEAgdm9pZCB0dG1fYm9fdW5waW4oc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibykNCiBFWFBP
UlRfU1lNQk9MKHR0bV9ib191bnBpbik7DQogDQogLyoNCi0gKiBBZGQgdGhlIGxhc3QgbW92ZSBm
ZW5jZSB0byB0aGUgQk8gYW5kIHJlc2VydmUgYSBuZXcgc2hhcmVkIHNsb3QuIFdlIG9ubHkgdXNl
DQotICogYSBzaGFyZWQgc2xvdCB0byBhdm9pZCB1bmVjZXNzYXJ5IHN5bmMgYW5kIHJlbHkgb24g
dGhlIHN1YnNlcXVlbnQgYm8gbW92ZSB0bw0KLSAqIGVpdGhlciBzdGFsbCBvciB1c2UgYW4gZXhj
bHVzaXZlIGZlbmNlIHJlc3BlY3RpdmVseSBzZXQgYm8tPm1vdmluZy4NCisgKiBBZGQgdGhlIGxh
c3QgbW92ZSBmZW5jZSB0byB0aGUgQk8gYXMga2VybmVsIGRlcGVuZGVuY3kgYW5kIHJlc2VydmUg
YSBuZXcNCisgKiBmZW5jZSBzbG90Lg0KICAqLw0KIHN0YXRpYyBpbnQgdHRtX2JvX2FkZF9tb3Zl
X2ZlbmNlKHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAqYm8sDQogCQkJCSBzdHJ1Y3QgdHRtX3Jl
c291cmNlX21hbmFnZXIgKm1hbiwNCkBAIC03NDYsOSArNzQ0LDYgQEAgc3RhdGljIGludCB0dG1f
Ym9fYWRkX21vdmVfZmVuY2Uoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywNCiAJCWRtYV9m
ZW5jZV9wdXQoZmVuY2UpOw0KIAkJcmV0dXJuIHJldDsNCiAJfQ0KLQ0KLQlkbWFfZmVuY2VfcHV0
KGJvLT5tb3ZpbmcpOw0KLQliby0+bW92aW5nID0gZmVuY2U7DQogCXJldHVybiAwOw0KIH0NCiAN
CkBAIC05NTEsNyArOTQ2LDYgQEAgaW50IHR0bV9ib19pbml0X3Jlc2VydmVkKHN0cnVjdCB0dG1f
ZGV2aWNlICpiZGV2LA0KIAliby0+YmRldiA9IGJkZXY7DQogCWJvLT50eXBlID0gdHlwZTsNCiAJ
Ym8tPnBhZ2VfYWxpZ25tZW50ID0gcGFnZV9hbGlnbm1lbnQ7DQotCWJvLT5tb3ZpbmcgPSBOVUxM
Ow0KIAliby0+cGluX2NvdW50ID0gMDsNCiAJYm8tPnNnID0gc2c7DQogCWJvLT5idWxrX21vdmUg
PSBOVUxMOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3V0aWwuYyBi
L2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3V0aWwuYw0KaW5kZXggOTlkZWI0NTg5NGY0Li5i
YzUxOTAzNDBiOWMgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib191dGls
LmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS90dG0vdHRtX2JvX3V0aWwuYw0KQEAgLTIyOCw3ICsy
MjgsNiBAQCBzdGF0aWMgaW50IHR0bV9idWZmZXJfb2JqZWN0X3RyYW5zZmVyKHN0cnVjdCB0dG1f
YnVmZmVyX29iamVjdCAqYm8sDQogDQogCWF0b21pY19pbmMoJnR0bV9nbG9iLmJvX2NvdW50KTsN
CiAJSU5JVF9MSVNUX0hFQUQoJmZiby0+YmFzZS5kZGVzdHJveSk7DQotCWZiby0+YmFzZS5tb3Zp
bmcgPSBOVUxMOw0KIAlkcm1fdm1hX25vZGVfcmVzZXQoJmZiby0+YmFzZS5iYXNlLnZtYV9ub2Rl
KTsNCiANCiAJa3JlZl9pbml0KCZmYm8tPmJhc2Uua3JlZik7DQpAQCAtNTAwLDkgKzQ5OSw2IEBA
IHN0YXRpYyBpbnQgdHRtX2JvX21vdmVfdG9fZ2hvc3Qoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0
ICpibywNCiAJICogb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQuDQogCSAqLw0KIA0KLQlkbWFfZmVu
Y2VfcHV0KGJvLT5tb3ZpbmcpOw0KLQliby0+bW92aW5nID0gZG1hX2ZlbmNlX2dldChmZW5jZSk7
DQotDQogCXJldCA9IHR0bV9idWZmZXJfb2JqZWN0X3RyYW5zZmVyKGJvLCAmZ2hvc3Rfb2JqKTsN
CiAJaWYgKHJldCkNCiAJCXJldHVybiByZXQ7DQpAQCAtNTQ2LDkgKzU0Miw2IEBAIHN0YXRpYyB2
b2lkIHR0bV9ib19tb3ZlX3BpcGVsaW5lX2V2aWN0KHN0cnVjdCB0dG1fYnVmZmVyX29iamVjdCAq
Ym8sDQogCXNwaW5fdW5sb2NrKCZmcm9tLT5tb3ZlX2xvY2spOw0KIA0KIAl0dG1fcmVzb3VyY2Vf
ZnJlZShibywgJmJvLT5yZXNvdXJjZSk7DQotDQotCWRtYV9mZW5jZV9wdXQoYm8tPm1vdmluZyk7
DQotCWJvLT5tb3ZpbmcgPSBkbWFfZmVuY2VfZ2V0KGZlbmNlKTsNCiB9DQogDQogaW50IHR0bV9i
b19tb3ZlX2FjY2VsX2NsZWFudXAoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywNCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jIGIvZHJpdmVycy9ncHUvZHJt
L3R0bS90dG1fYm9fdm0uYw0KaW5kZXggMDhiYTA4M2E4MGQyLi41YjMyNGYyNDUyNjUgMTAwNjQ0
DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vdHRtL3R0bV9ib192bS5jDQorKysgYi9kcml2ZXJzL2dw
dS9kcm0vdHRtL3R0bV9ib192bS5jDQpAQCAtNDYsMTcgKzQ2LDEzIEBADQogc3RhdGljIHZtX2Zh
dWx0X3QgdHRtX2JvX3ZtX2ZhdWx0X2lkbGUoc3RydWN0IHR0bV9idWZmZXJfb2JqZWN0ICpibywN
CiAJCQkJc3RydWN0IHZtX2ZhdWx0ICp2bWYpDQogew0KLQl2bV9mYXVsdF90IHJldCA9IDA7DQot
CWludCBlcnIgPSAwOw0KLQ0KLQlpZiAobGlrZWx5KCFiby0+bW92aW5nKSkNCi0JCWdvdG8gb3V0
X3VubG9jazsNCisJbG9uZyBlcnIgPSAwOw0KIA0KIAkvKg0KIAkgKiBRdWljayBub24tc3RhbGxp
bmcgY2hlY2sgZm9yIGlkbGUuDQogCSAqLw0KLQlpZiAoZG1hX2ZlbmNlX2lzX3NpZ25hbGVkKGJv
LT5tb3ZpbmcpKQ0KLQkJZ290byBvdXRfY2xlYXI7DQorCWlmIChkbWFfcmVzdl90ZXN0X3NpZ25h
bGVkKGJvLT5iYXNlLnJlc3YsIERNQV9SRVNWX1VTQUdFX0tFUk5FTCkpDQorCQlyZXR1cm4gMDsN
CiANCiAJLyoNCiAJICogSWYgcG9zc2libGUsIGF2b2lkIHdhaXRpbmcgZm9yIEdQVSB3aXRoIG1t
YXBfbG9jaw0KQEAgLTY0LDM0ICs2MCwzMCBAQCBzdGF0aWMgdm1fZmF1bHRfdCB0dG1fYm9fdm1f
ZmF1bHRfaWRsZShzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLA0KIAkgKiBpcyB0aGUgZmly
c3QgYXR0ZW1wdC4NCiAJICovDQogCWlmIChmYXVsdF9mbGFnX2FsbG93X3JldHJ5X2ZpcnN0KHZt
Zi0+ZmxhZ3MpKSB7DQotCQlyZXQgPSBWTV9GQVVMVF9SRVRSWTsNCiAJCWlmICh2bWYtPmZsYWdz
ICYgRkFVTFRfRkxBR19SRVRSWV9OT1dBSVQpDQotCQkJZ290byBvdXRfdW5sb2NrOw0KKwkJCXJl
dHVybiBWTV9GQVVMVF9SRVRSWTsNCiANCiAJCXR0bV9ib19nZXQoYm8pOw0KIAkJbW1hcF9yZWFk
X3VubG9jayh2bWYtPnZtYS0+dm1fbW0pOw0KLQkJKHZvaWQpIGRtYV9mZW5jZV93YWl0KGJvLT5t
b3ZpbmcsIHRydWUpOw0KKwkJKHZvaWQpZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGJvLT5iYXNlLnJl
c3YsDQorCQkJCQkgICAgRE1BX1JFU1ZfVVNBR0VfS0VSTkVMLCB0cnVlLA0KKwkJCQkJICAgIE1B
WF9TQ0hFRFVMRV9USU1FT1VUKTsNCiAJCWRtYV9yZXN2X3VubG9jayhiby0+YmFzZS5yZXN2KTsN
CiAJCXR0bV9ib19wdXQoYm8pOw0KLQkJZ290byBvdXRfdW5sb2NrOw0KKwkJcmV0dXJuIFZNX0ZB
VUxUX1JFVFJZOw0KIAl9DQogDQogCS8qDQogCSAqIE9yZGluYXJ5IHdhaXQuDQogCSAqLw0KLQll
cnIgPSBkbWFfZmVuY2Vfd2FpdChiby0+bW92aW5nLCB0cnVlKTsNCi0JaWYgKHVubGlrZWx5KGVy
ciAhPSAwKSkgew0KLQkJcmV0ID0gKGVyciAhPSAtRVJFU1RBUlRTWVMpID8gVk1fRkFVTFRfU0lH
QlVTIDoNCisJZXJyID0gZG1hX3Jlc3Zfd2FpdF90aW1lb3V0KGJvLT5iYXNlLnJlc3YsIERNQV9S
RVNWX1VTQUdFX0tFUk5FTCwgdHJ1ZSwNCisJCQkJICAgIE1BWF9TQ0hFRFVMRV9USU1FT1VUKTsN
CisJaWYgKHVubGlrZWx5KGVyciA8IDApKSB7DQorCQlyZXR1cm4gKGVyciAhPSAtRVJFU1RBUlRT
WVMpID8gVk1fRkFVTFRfU0lHQlVTIDoNCiAJCQlWTV9GQVVMVF9OT1BBR0U7DQotCQlnb3RvIG91
dF91bmxvY2s7DQogCX0NCiANCi1vdXRfY2xlYXI6DQotCWRtYV9mZW5jZV9wdXQoYm8tPm1vdmlu
Zyk7DQotCWJvLT5tb3ZpbmcgPSBOVUxMOw0KLQ0KLW91dF91bmxvY2s6DQotCXJldHVybiByZXQ7
DQorCXJldHVybiAwOw0KIH0NCiANCiBzdGF0aWMgdW5zaWduZWQgbG9uZyB0dG1fYm9faW9fbWVt
X3BmbihzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3QgKmJvLA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
Z3B1L2RybS92bXdnZngvdm13Z2Z4X3Jlc291cmNlLmMgYi9kcml2ZXJzL2dwdS9kcm0vdm13Z2Z4
L3Ztd2dmeF9yZXNvdXJjZS5jDQppbmRleCBhODRkMWQ1NjI4ZDAuLmE3ZDYyYTRlYjQ3YiAxMDA2
NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3Jlc291cmNlLmMNCisrKyBi
L2RyaXZlcnMvZ3B1L2RybS92bXdnZngvdm13Z2Z4X3Jlc291cmNlLmMNCkBAIC0xMTYxLDEyICsx
MTYxLDYgQEAgaW50IHZtd19yZXNvdXJjZXNfY2xlYW4oc3RydWN0IHZtd19idWZmZXJfb2JqZWN0
ICp2Ym8sIHBnb2ZmX3Qgc3RhcnQsDQogCQkqbnVtX3ByZWZhdWx0ID0gX19LRVJORUxfRElWX1JP
VU5EX1VQKGxhc3RfY2xlYW5lZCAtIHJlc19zdGFydCwNCiAJCQkJCQkgICAgICBQQUdFX1NJWkUp
Ow0KIAkJdm13X2JvX2ZlbmNlX3NpbmdsZShibywgTlVMTCk7DQotCQlpZiAoYm8tPm1vdmluZykN
Ci0JCQlkbWFfZmVuY2VfcHV0KGJvLT5tb3ZpbmcpOw0KLQ0KLQkJcmV0dXJuIGRtYV9yZXN2X2dl
dF9zaW5nbGV0b24oYm8tPmJhc2UucmVzdiwNCi0JCQkJCSAgICAgIERNQV9SRVNWX1VTQUdFX1dS
SVRFLA0KLQkJCQkJICAgICAgJmJvLT5tb3ZpbmcpOw0KIAl9DQogDQogCXJldHVybiAwOw0KZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fYXBpLmggYi9pbmNsdWRlL2RybS90dG0v
dHRtX2JvX2FwaS5oDQppbmRleCBjNzY5MzJiNjhhMzMuLjJkNTI0ZjhiMDgwMiAxMDA2NDQNCi0t
LSBhL2luY2x1ZGUvZHJtL3R0bS90dG1fYm9fYXBpLmgNCisrKyBiL2luY2x1ZGUvZHJtL3R0bS90
dG1fYm9fYXBpLmgNCkBAIC05NCw3ICs5NCw2IEBAIHN0cnVjdCB0dG1fdHQ7DQogICogQGRlbGV0
ZWQ6IFRydWUgaWYgdGhlIG9iamVjdCBpcyBvbmx5IGEgem9tYmllIGFuZCBhbHJlYWR5IGRlbGV0
ZWQuDQogICogQGRkZXN0cm95OiBMaXN0IGhlYWQgZm9yIHRoZSBkZWxheWVkIGRlc3Ryb3kgbGlz
dC4NCiAgKiBAc3dhcDogTGlzdCBoZWFkIGZvciBzd2FwIExSVSBsaXN0Lg0KLSAqIEBtb3Zpbmc6
IEZlbmNlIHNldCB3aGVuIEJPIGlzIG1vdmluZw0KICAqIEBvZmZzZXQ6IFRoZSBjdXJyZW50IEdQ
VSBvZmZzZXQsIHdoaWNoIGNhbiBoYXZlIGRpZmZlcmVudCBtZWFuaW5ncw0KICAqIGRlcGVuZGlu
ZyBvbiB0aGUgbWVtb3J5IHR5cGUuIEZvciBTWVNURU0gdHlwZSBtZW1vcnksIGl0IHNob3VsZCBi
ZSAwLg0KICAqIEBjdXJfcGxhY2VtZW50OiBIaW50IG9mIGN1cnJlbnQgcGxhY2VtZW50Lg0KQEAg
LTE0Nyw3ICsxNDYsNiBAQCBzdHJ1Y3QgdHRtX2J1ZmZlcl9vYmplY3Qgew0KIAkgKiBNZW1iZXJz
IHByb3RlY3RlZCBieSBhIGJvIHJlc2VydmF0aW9uLg0KIAkgKi8NCiANCi0Jc3RydWN0IGRtYV9m
ZW5jZSAqbW92aW5nOw0KIAl1bnNpZ25lZCBwcmlvcml0eTsNCiAJdW5zaWduZWQgcGluX2NvdW50
Ow0KIA0KLS0gDQoyLjI1LjENCg0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KTGluYXJvLW1tLXNpZyBtYWlsaW5nIGxpc3QgLS0gbGluYXJvLW1tLXNpZ0Bs
aXN0cy5saW5hcm8ub3JnClRvIHVuc3Vic2NyaWJlIHNlbmQgYW4gZW1haWwgdG8gbGluYXJvLW1t
LXNpZy1sZWF2ZUBsaXN0cy5saW5hcm8ub3JnCg==
