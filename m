Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 09F80382F27
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 17 May 2021 16:13:20 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 52DBF60B8C
	for <lists+linaro-mm-sig@lfdr.de>; Mon, 17 May 2021 14:13:16 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 806BD61019; Mon, 17 May 2021 14:13:13 +0000 (UTC)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 8D42E607E1;
	Mon, 17 May 2021 14:13:09 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 8C56E607C8
 for <linaro-mm-sig@lists.linaro.org>; Mon, 17 May 2021 14:11:36 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 83C9560B82; Mon, 17 May 2021 14:11:36 +0000 (UTC)
Received: from mail-ed1-f48.google.com (mail-ed1-f48.google.com
 [209.85.208.48])
 by lists.linaro.org (Postfix) with ESMTPS id 70F8260B35
 for <linaro-mm-sig@lists.linaro.org>; Mon, 17 May 2021 14:11:34 +0000 (UTC)
Received: by mail-ed1-f48.google.com with SMTP id s6so7064147edu.10
 for <linaro-mm-sig@lists.linaro.org>; Mon, 17 May 2021 07:11:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=hWAO6qtBeCWHwQ2d5zgeA9XWAA84b75ynVVknZJ6VMo=;
 b=vVvZYCSTT/HZCA1FxmCLTQN412dqzj8BF4r2jENkezpE2Omt5ttiOhsDXVCii97REI
 yv706q57EH/PcBN3TFNGLu4cUdDve+er7DgwO0HZchydQyx0TA3jQetItWf8PDf2pd7w
 dJzJsGNGuaFWQ5Bu0BqsK9g6t2otNxUU+S4SGz4MWkAnGeGoNEzta0+mTfOU2gjGp5YH
 MwB5EWijLIZpUcfLhrpjzV2LyNWiHOzQqkDSswhhnfavMRiMxtnOtvMc4m7cEkky7hhu
 iBv0KMbWdZR25h9d/VHYkJh/oQqDvh3BYuxsF9PUIN8nqMBMhPpJjFqc1/PWD2KjOd7A
 luyA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=hWAO6qtBeCWHwQ2d5zgeA9XWAA84b75ynVVknZJ6VMo=;
 b=gUxsZv09HPC3FPIV/tSVZ14ocjymFtiVfIi2mROexhg55Oqqhp60n/eui9KKgau823
 4xKr6DD3I4Mjwbd9WVoyeIl7dw5oa7W8aUxsHKrFO/Paw3uJ5qKH0n8zKW6nf1UWRjXB
 mKzBMlXqWcpns+HlvjFZfyHcPsEuwcQcBaxaYJrIG4aJKzMAJkriodevljZH0W840iTR
 yXHcrorGE7IcKc16GEYjruZ5CJuI1WG8nzScKG2F0U8tkNCIbocOCE5z+BvOucn4Ks6n
 PNLfTGsOcFDMPD2J+NNGCZGJfaZUEfHdbgOabZZGhvpKikb0puYfuKrCq8ZHz6y/kU5M
 moGg==
X-Gm-Message-State: AOAM530QZKcHWw/dGMMy9RBmZazRvVsNgmNVD2A7hZ/ZnD9LovK4GvS5
 /8sPsdtN069rGBcNqP2gmZQ=
X-Google-Smtp-Source: ABdhPJzvTjfQMlf4Z9nxw3X+wBxgmJRQ2XXzGQrffawS5SaS/5HNtMnAbObFkhBF4CgAlOqrPohqBw==
X-Received: by 2002:a50:ccdc:: with SMTP id b28mr277893edj.92.1621260693613;
 Mon, 17 May 2021 07:11:33 -0700 (PDT)
Received: from abel.fritz.box ([2a02:908:1252:fb60:1df4:c5b6:b8fd:3c4b])
 by smtp.gmail.com with ESMTPSA id b9sm2419624edt.71.2021.05.17.07.11.32
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 17 May 2021 07:11:33 -0700 (PDT)
From: "=?UTF-8?q?Christian=20K=C3=B6nig?=" <ckoenig.leichtzumerken@gmail.com>
X-Google-Original-From: =?UTF-8?q?Christian=20K=C3=B6nig?=
 <christian.koenig@amd.com>
To: dri-devel@lists.freedesktop.org,
	linaro-mm-sig@lists.linaro.org
Date: Mon, 17 May 2021 16:11:20 +0200
Message-Id: <20210517141129.2225-3-christian.koenig@amd.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20210517141129.2225-1-christian.koenig@amd.com>
References: <20210517141129.2225-1-christian.koenig@amd.com>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Subject: [Linaro-mm-sig] [PATCH 02/11] dma-buf: add SPDX header and fix
 style in dma-resv.c
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Cc: daniel@ffwll.ch
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

Tm8gZnVuY3Rpb25hbCBjaGFuZ2UuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RpYW4gS8O2bmlnIDxj
aHJpc3RpYW4ua29lbmlnQGFtZC5jb20+Ci0tLQogZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMg
fCAxMjggKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNoYW5n
ZWQsIDY1IGluc2VydGlvbnMoKyksIDYzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvZG1hLWJ1Zi9kbWEtcmVzdi5jIGIvZHJpdmVycy9kbWEtYnVmL2RtYS1yZXN2LmMKaW5kZXgg
NmRkYmViNWRmYmY2Li44N2Y1ZDgyZDk5MmEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZG1hLWJ1Zi9k
bWEtcmVzdi5jCisrKyBiL2RyaXZlcnMvZG1hLWJ1Zi9kbWEtcmVzdi5jCkBAIC0xLDMgKzEsNCBA
QAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVAogLyoKICAqIENvcHlyaWdodCAoQykg
MjAxMi0yMDE0IENhbm9uaWNhbCBMdGQgKE1hYXJ0ZW4gTGFua2hvcnN0KQogICoKQEAgLTkyLDQ5
ICs5Myw2IEBAIHN0YXRpYyB2b2lkIGRtYV9yZXN2X2xpc3RfZnJlZShzdHJ1Y3QgZG1hX3Jlc3Zf
bGlzdCAqbGlzdCkKIAlrZnJlZV9yY3UobGlzdCwgcmN1KTsKIH0KIAotI2lmIElTX0VOQUJMRUQo
Q09ORklHX0xPQ0tERVApCi1zdGF0aWMgaW50IF9faW5pdCBkbWFfcmVzdl9sb2NrZGVwKHZvaWQp
Ci17Ci0Jc3RydWN0IG1tX3N0cnVjdCAqbW0gPSBtbV9hbGxvYygpOwotCXN0cnVjdCB3d19hY3F1
aXJlX2N0eCBjdHg7Ci0Jc3RydWN0IGRtYV9yZXN2IG9iajsKLQlzdHJ1Y3QgYWRkcmVzc19zcGFj
ZSBtYXBwaW5nOwotCWludCByZXQ7Ci0KLQlpZiAoIW1tKQotCQlyZXR1cm4gLUVOT01FTTsKLQot
CWRtYV9yZXN2X2luaXQoJm9iaik7Ci0JYWRkcmVzc19zcGFjZV9pbml0X29uY2UoJm1hcHBpbmcp
OwotCi0JbW1hcF9yZWFkX2xvY2sobW0pOwotCXd3X2FjcXVpcmVfaW5pdCgmY3R4LCAmcmVzZXJ2
YXRpb25fd3dfY2xhc3MpOwotCXJldCA9IGRtYV9yZXN2X2xvY2soJm9iaiwgJmN0eCk7Ci0JaWYg
KHJldCA9PSAtRURFQURMSykKLQkJZG1hX3Jlc3ZfbG9ja19zbG93KCZvYmosICZjdHgpOwotCWZz
X3JlY2xhaW1fYWNxdWlyZShHRlBfS0VSTkVMKTsKLQkvKiBmb3IgdW5tYXBfbWFwcGluZ19yYW5n
ZSBvbiB0cnlsb2NrZWQgYnVmZmVyIG9iamVjdHMgaW4gc2hyaW5rZXJzICovCi0JaV9tbWFwX2xv
Y2tfd3JpdGUoJm1hcHBpbmcpOwotCWlfbW1hcF91bmxvY2tfd3JpdGUoJm1hcHBpbmcpOwotI2lm
ZGVmIENPTkZJR19NTVVfTk9USUZJRVIKLQlsb2NrX21hcF9hY3F1aXJlKCZfX21tdV9ub3RpZmll
cl9pbnZhbGlkYXRlX3JhbmdlX3N0YXJ0X21hcCk7Ci0JX19kbWFfZmVuY2VfbWlnaHRfd2FpdCgp
OwotCWxvY2tfbWFwX3JlbGVhc2UoJl9fbW11X25vdGlmaWVyX2ludmFsaWRhdGVfcmFuZ2Vfc3Rh
cnRfbWFwKTsKLSNlbHNlCi0JX19kbWFfZmVuY2VfbWlnaHRfd2FpdCgpOwotI2VuZGlmCi0JZnNf
cmVjbGFpbV9yZWxlYXNlKEdGUF9LRVJORUwpOwotCXd3X211dGV4X3VubG9jaygmb2JqLmxvY2sp
OwotCXd3X2FjcXVpcmVfZmluaSgmY3R4KTsKLQltbWFwX3JlYWRfdW5sb2NrKG1tKTsKLQkKLQlt
bXB1dChtbSk7Ci0KLQlyZXR1cm4gMDsKLX0KLXN1YnN5c19pbml0Y2FsbChkbWFfcmVzdl9sb2Nr
ZGVwKTsKLSNlbmRpZgotCiAvKioKICAqIGRtYV9yZXN2X2luaXQgLSBpbml0aWFsaXplIGEgcmVz
ZXJ2YXRpb24gb2JqZWN0CiAgKiBAb2JqOiB0aGUgcmVzZXJ2YXRpb24gb2JqZWN0CkBAIC0xOTYs
OSArMTU0LDcgQEAgaW50IGRtYV9yZXN2X3Jlc2VydmVfc2hhcmVkKHN0cnVjdCBkbWFfcmVzdiAq
b2JqLCB1bnNpZ25lZCBpbnQgbnVtX2ZlbmNlcykKIAlpZiAob2xkICYmIG9sZC0+c2hhcmVkX21h
eCkgewogCQlpZiAoKG9sZC0+c2hhcmVkX2NvdW50ICsgbnVtX2ZlbmNlcykgPD0gb2xkLT5zaGFy
ZWRfbWF4KQogCQkJcmV0dXJuIDA7Ci0JCWVsc2UKLQkJCW1heCA9IG1heChvbGQtPnNoYXJlZF9j
b3VudCArIG51bV9mZW5jZXMsCi0JCQkJICBvbGQtPnNoYXJlZF9tYXggKiAyKTsKKwkJbWF4ID0g
bWF4KG9sZC0+c2hhcmVkX2NvdW50ICsgbnVtX2ZlbmNlcywgb2xkLT5zaGFyZWRfbWF4ICogMik7
CiAJfSBlbHNlIHsKIAkJbWF4ID0gbWF4KDR1bCwgcm91bmR1cF9wb3dfb2ZfdHdvKG51bV9mZW5j
ZXMpKTsKIAl9CkBAIC0zMzcsMTcgKzI5MywxNyBAQCB2b2lkIGRtYV9yZXN2X2FkZF9leGNsX2Zl
bmNlKHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBzdHJ1Y3QgZG1hX2ZlbmNlICpmZW5jZSkKIEVYUE9S
VF9TWU1CT0woZG1hX3Jlc3ZfYWRkX2V4Y2xfZmVuY2UpOwogCiAvKioKLSogZG1hX3Jlc3ZfY29w
eV9mZW5jZXMgLSBDb3B5IGFsbCBmZW5jZXMgZnJvbSBzcmMgdG8gZHN0LgotKiBAZHN0OiB0aGUg
ZGVzdGluYXRpb24gcmVzZXJ2YXRpb24gb2JqZWN0Ci0qIEBzcmM6IHRoZSBzb3VyY2UgcmVzZXJ2
YXRpb24gb2JqZWN0Ci0qCi0qIENvcHkgYWxsIGZlbmNlcyBmcm9tIHNyYyB0byBkc3QuIGRzdC1s
b2NrIG11c3QgYmUgaGVsZC4KLSovCisgKiBkbWFfcmVzdl9jb3B5X2ZlbmNlcyAtIENvcHkgYWxs
IGZlbmNlcyBmcm9tIHNyYyB0byBkc3QuCisgKiBAZHN0OiB0aGUgZGVzdGluYXRpb24gcmVzZXJ2
YXRpb24gb2JqZWN0CisgKiBAc3JjOiB0aGUgc291cmNlIHJlc2VydmF0aW9uIG9iamVjdAorICoK
KyAqIENvcHkgYWxsIGZlbmNlcyBmcm9tIHNyYyB0byBkc3QuIGRzdC1sb2NrIG11c3QgYmUgaGVs
ZC4KKyAqLwogaW50IGRtYV9yZXN2X2NvcHlfZmVuY2VzKHN0cnVjdCBkbWFfcmVzdiAqZHN0LCBz
dHJ1Y3QgZG1hX3Jlc3YgKnNyYykKIHsKIAlzdHJ1Y3QgZG1hX3Jlc3ZfbGlzdCAqc3JjX2xpc3Qs
ICpkc3RfbGlzdDsKIAlzdHJ1Y3QgZG1hX2ZlbmNlICpvbGQsICpuZXc7Ci0JdW5zaWduZWQgaTsK
Kwl1bnNpZ25lZCBpbnQgaTsKIAogCWRtYV9yZXN2X2Fzc2VydF9oZWxkKGRzdCk7CiAKQEAgLTM1
Niw3ICszMTIsNyBAQCBpbnQgZG1hX3Jlc3ZfY29weV9mZW5jZXMoc3RydWN0IGRtYV9yZXN2ICpk
c3QsIHN0cnVjdCBkbWFfcmVzdiAqc3JjKQogCiByZXRyeToKIAlpZiAoc3JjX2xpc3QpIHsKLQkJ
dW5zaWduZWQgc2hhcmVkX2NvdW50ID0gc3JjX2xpc3QtPnNoYXJlZF9jb3VudDsKKwkJdW5zaWdu
ZWQgaW50IHNoYXJlZF9jb3VudCA9IHNyY19saXN0LT5zaGFyZWRfY291bnQ7CiAKIAkJcmN1X3Jl
YWRfdW5sb2NrKCk7CiAKQEAgLTM3Myw2ICszMjksNyBAQCBpbnQgZG1hX3Jlc3ZfY29weV9mZW5j
ZXMoc3RydWN0IGRtYV9yZXN2ICpkc3QsIHN0cnVjdCBkbWFfcmVzdiAqc3JjKQogCiAJCWRzdF9s
aXN0LT5zaGFyZWRfY291bnQgPSAwOwogCQlmb3IgKGkgPSAwOyBpIDwgc3JjX2xpc3QtPnNoYXJl
ZF9jb3VudDsgKytpKSB7CisJCQlzdHJ1Y3QgZG1hX2ZlbmNlIF9fcmN1ICoqZHN0OwogCQkJc3Ry
dWN0IGRtYV9mZW5jZSAqZmVuY2U7CiAKIAkJCWZlbmNlID0gcmN1X2RlcmVmZXJlbmNlKHNyY19s
aXN0LT5zaGFyZWRbaV0pOwpAQCAtMzkxLDcgKzM0OCw4IEBAIGludCBkbWFfcmVzdl9jb3B5X2Zl
bmNlcyhzdHJ1Y3QgZG1hX3Jlc3YgKmRzdCwgc3RydWN0IGRtYV9yZXN2ICpzcmMpCiAJCQkJY29u
dGludWU7CiAJCQl9CiAKLQkJCXJjdV9hc3NpZ25fcG9pbnRlcihkc3RfbGlzdC0+c2hhcmVkW2Rz
dF9saXN0LT5zaGFyZWRfY291bnQrK10sIGZlbmNlKTsKKwkJCWRzdCA9ICZkc3RfbGlzdC0+c2hh
cmVkW2RzdF9saXN0LT5zaGFyZWRfY291bnQrK107CisJCQlyY3VfYXNzaWduX3BvaW50ZXIoKmRz
dCwgZmVuY2UpOwogCQl9CiAJfSBlbHNlIHsKIAkJZHN0X2xpc3QgPSBOVUxMOwpAQCAtNDMxLDcg
KzM4OSw3IEBAIEVYUE9SVF9TWU1CT0woZG1hX3Jlc3ZfY29weV9mZW5jZXMpOwogICovCiBpbnQg
ZG1hX3Jlc3ZfZ2V0X2ZlbmNlc19yY3Uoc3RydWN0IGRtYV9yZXN2ICpvYmosCiAJCQkgICAgc3Ry
dWN0IGRtYV9mZW5jZSAqKnBmZW5jZV9leGNsLAotCQkJICAgIHVuc2lnbmVkICpwc2hhcmVkX2Nv
dW50LAorCQkJICAgIHVuc2lnbmVkIGludCAqcHNoYXJlZF9jb3VudCwKIAkJCSAgICBzdHJ1Y3Qg
ZG1hX2ZlbmNlICoqKnBzaGFyZWQpCiB7CiAJc3RydWN0IGRtYV9mZW5jZSAqKnNoYXJlZCA9IE5V
TEw7CkBAIC01MzMsOSArNDkxLDkgQEAgbG9uZyBkbWFfcmVzdl93YWl0X3RpbWVvdXRfcmN1KHN0
cnVjdCBkbWFfcmVzdiAqb2JqLAogCQkJICAgICAgIGJvb2wgd2FpdF9hbGwsIGJvb2wgaW50ciwK
IAkJCSAgICAgICB1bnNpZ25lZCBsb25nIHRpbWVvdXQpCiB7Ci0Jc3RydWN0IGRtYV9mZW5jZSAq
ZmVuY2U7Ci0JdW5zaWduZWQgc2VxLCBzaGFyZWRfY291bnQ7CiAJbG9uZyByZXQgPSB0aW1lb3V0
ID8gdGltZW91dCA6IDE7CisJdW5zaWduZWQgaW50IHNlcSwgc2hhcmVkX2NvdW50OworCXN0cnVj
dCBkbWFfZmVuY2UgKmZlbmNlOwogCWludCBpOwogCiByZXRyeToKQEAgLTU2NSw4ICs1MjMsOSBA
QCBsb25nIGRtYV9yZXN2X3dhaXRfdGltZW91dF9yY3Uoc3RydWN0IGRtYV9yZXN2ICpvYmosCiAJ
CQlzaGFyZWRfY291bnQgPSBmb2JqLT5zaGFyZWRfY291bnQ7CiAKIAkJZm9yIChpID0gMDsgIWZl
bmNlICYmIGkgPCBzaGFyZWRfY291bnQ7ICsraSkgewotCQkJc3RydWN0IGRtYV9mZW5jZSAqbGZl
bmNlID0gcmN1X2RlcmVmZXJlbmNlKGZvYmotPnNoYXJlZFtpXSk7CisJCQlzdHJ1Y3QgZG1hX2Zl
bmNlICpsZmVuY2U7CiAKKwkJCWxmZW5jZSA9IHJjdV9kZXJlZmVyZW5jZShmb2JqLT5zaGFyZWRb
aV0pOwogCQkJaWYgKHRlc3RfYml0KERNQV9GRU5DRV9GTEFHX1NJR05BTEVEX0JJVCwKIAkJCQkg
ICAgICZsZmVuY2UtPmZsYWdzKSkKIAkJCQljb250aW51ZTsKQEAgLTYzMyw3ICs1OTIsNyBAQCBz
dGF0aWMgaW5saW5lIGludCBkbWFfcmVzdl90ZXN0X3NpZ25hbGVkX3NpbmdsZShzdHJ1Y3QgZG1h
X2ZlbmNlICpwYXNzZWRfZmVuY2UpCiAgKi8KIGJvb2wgZG1hX3Jlc3ZfdGVzdF9zaWduYWxlZF9y
Y3Uoc3RydWN0IGRtYV9yZXN2ICpvYmosIGJvb2wgdGVzdF9hbGwpCiB7Ci0JdW5zaWduZWQgc2Vx
LCBzaGFyZWRfY291bnQ7CisJdW5zaWduZWQgaW50IHNlcSwgc2hhcmVkX2NvdW50OwogCWludCBy
ZXQ7CiAKIAlyY3VfcmVhZF9sb2NrKCk7CkBAIC02NDMsMTYgKzYwMiwxNiBAQCBib29sIGRtYV9y
ZXN2X3Rlc3Rfc2lnbmFsZWRfcmN1KHN0cnVjdCBkbWFfcmVzdiAqb2JqLCBib29sIHRlc3RfYWxs
KQogCXNlcSA9IHJlYWRfc2VxY291bnRfYmVnaW4oJm9iai0+c2VxKTsKIAogCWlmICh0ZXN0X2Fs
bCkgewotCQl1bnNpZ25lZCBpOwotCiAJCXN0cnVjdCBkbWFfcmVzdl9saXN0ICpmb2JqID0gcmN1
X2RlcmVmZXJlbmNlKG9iai0+ZmVuY2UpOworCQl1bnNpZ25lZCBpbnQgaTsKIAogCQlpZiAoZm9i
aikKIAkJCXNoYXJlZF9jb3VudCA9IGZvYmotPnNoYXJlZF9jb3VudDsKIAogCQlmb3IgKGkgPSAw
OyBpIDwgc2hhcmVkX2NvdW50OyArK2kpIHsKLQkJCXN0cnVjdCBkbWFfZmVuY2UgKmZlbmNlID0g
cmN1X2RlcmVmZXJlbmNlKGZvYmotPnNoYXJlZFtpXSk7CisJCQlzdHJ1Y3QgZG1hX2ZlbmNlICpm
ZW5jZTsKIAorCQkJZmVuY2UgPSByY3VfZGVyZWZlcmVuY2UoZm9iai0+c2hhcmVkW2ldKTsKIAkJ
CXJldCA9IGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWRfc2luZ2xlKGZlbmNlKTsKIAkJCWlmIChyZXQg
PCAwKQogCQkJCWdvdG8gcmV0cnk7CkBAIC02ODEsMyArNjQwLDQ2IEBAIGJvb2wgZG1hX3Jlc3Zf
dGVzdF9zaWduYWxlZF9yY3Uoc3RydWN0IGRtYV9yZXN2ICpvYmosIGJvb2wgdGVzdF9hbGwpCiAJ
cmV0dXJuIHJldDsKIH0KIEVYUE9SVF9TWU1CT0xfR1BMKGRtYV9yZXN2X3Rlc3Rfc2lnbmFsZWRf
cmN1KTsKKworI2lmIElTX0VOQUJMRUQoQ09ORklHX0xPQ0tERVApCitzdGF0aWMgaW50IF9faW5p
dCBkbWFfcmVzdl9sb2NrZGVwKHZvaWQpCit7CisJc3RydWN0IG1tX3N0cnVjdCAqbW0gPSBtbV9h
bGxvYygpOworCXN0cnVjdCB3d19hY3F1aXJlX2N0eCBjdHg7CisJc3RydWN0IGRtYV9yZXN2IG9i
ajsKKwlzdHJ1Y3QgYWRkcmVzc19zcGFjZSBtYXBwaW5nOworCWludCByZXQ7CisKKwlpZiAoIW1t
KQorCQlyZXR1cm4gLUVOT01FTTsKKworCWRtYV9yZXN2X2luaXQoJm9iaik7CisJYWRkcmVzc19z
cGFjZV9pbml0X29uY2UoJm1hcHBpbmcpOworCisJbW1hcF9yZWFkX2xvY2sobW0pOworCXd3X2Fj
cXVpcmVfaW5pdCgmY3R4LCAmcmVzZXJ2YXRpb25fd3dfY2xhc3MpOworCXJldCA9IGRtYV9yZXN2
X2xvY2soJm9iaiwgJmN0eCk7CisJaWYgKHJldCA9PSAtRURFQURMSykKKwkJZG1hX3Jlc3ZfbG9j
a19zbG93KCZvYmosICZjdHgpOworCWZzX3JlY2xhaW1fYWNxdWlyZShHRlBfS0VSTkVMKTsKKwkv
KiBmb3IgdW5tYXBfbWFwcGluZ19yYW5nZSBvbiB0cnlsb2NrZWQgYnVmZmVyIG9iamVjdHMgaW4g
c2hyaW5rZXJzICovCisJaV9tbWFwX2xvY2tfd3JpdGUoJm1hcHBpbmcpOworCWlfbW1hcF91bmxv
Y2tfd3JpdGUoJm1hcHBpbmcpOworI2lmZGVmIENPTkZJR19NTVVfTk9USUZJRVIKKwlsb2NrX21h
cF9hY3F1aXJlKCZfX21tdV9ub3RpZmllcl9pbnZhbGlkYXRlX3JhbmdlX3N0YXJ0X21hcCk7CisJ
X19kbWFfZmVuY2VfbWlnaHRfd2FpdCgpOworCWxvY2tfbWFwX3JlbGVhc2UoJl9fbW11X25vdGlm
aWVyX2ludmFsaWRhdGVfcmFuZ2Vfc3RhcnRfbWFwKTsKKyNlbHNlCisJX19kbWFfZmVuY2VfbWln
aHRfd2FpdCgpOworI2VuZGlmCisJZnNfcmVjbGFpbV9yZWxlYXNlKEdGUF9LRVJORUwpOworCXd3
X211dGV4X3VubG9jaygmb2JqLmxvY2spOworCXd3X2FjcXVpcmVfZmluaSgmY3R4KTsKKwltbWFw
X3JlYWRfdW5sb2NrKG1tKTsKKworCW1tcHV0KG1tKTsKKworCXJldHVybiAwOworfQorc3Vic3lz
X2luaXRjYWxsKGRtYV9yZXN2X2xvY2tkZXApOworI2VuZGlmCi0tIAoyLjI1LjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbmFyby1tbS1zaWcgbWFp
bGluZyBsaXN0CkxpbmFyby1tbS1zaWdAbGlzdHMubGluYXJvLm9yZwpodHRwczovL2xpc3RzLmxp
bmFyby5vcmcvbWFpbG1hbi9saXN0aW5mby9saW5hcm8tbW0tc2lnCg==
