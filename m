Return-Path: <linaro-mm-sig-bounces@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 118ED1B6DC3
	for <lists+linaro-mm-sig@lfdr.de>; Fri, 24 Apr 2020 08:03:35 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 3DAAC619E9
	for <lists+linaro-mm-sig@lfdr.de>; Fri, 24 Apr 2020 06:03:34 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 2FC88619EA; Fri, 24 Apr 2020 06:03:34 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-7.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_HI,SPF_HELO_NONE autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 0337A665E4;
	Fri, 24 Apr 2020 05:30:16 +0000 (UTC)
X-Original-To: linaro-mm-sig@lists.linaro.org
Delivered-To: linaro-mm-sig@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 7C64D6604B
 for <linaro-mm-sig@lists.linaro.org>; Tue, 14 Apr 2020 13:14:50 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 662E561999; Tue, 14 Apr 2020 13:14:50 +0000 (UTC)
Received: from bombadil.infradead.org (bombadil.infradead.org
 [198.137.202.133])
 by lists.linaro.org (Postfix) with ESMTPS id 2DC9C6604B
 for <linaro-mm-sig@lists.linaro.org>; Tue, 14 Apr 2020 13:14:46 +0000 (UTC)
Received: from [2001:4bb8:180:384b:c70:4a89:bc61:2] (helo=localhost)
 by bombadil.infradead.org with esmtpsa (Exim 4.92.3 #3 (Red Hat Linux))
 id 1jOLOK-0006VK-3Z; Tue, 14 Apr 2020 13:14:16 +0000
From: Christoph Hellwig <hch@lst.de>
To: Andrew Morton <akpm@linux-foundation.org>,
 "K. Y. Srinivasan" <kys@microsoft.com>,
 Haiyang Zhang <haiyangz@microsoft.com>,
 Stephen Hemminger <sthemmin@microsoft.com>, Wei Liu <wei.liu@kernel.org>,
 x86@kernel.org, David Airlie <airlied@linux.ie>,
 Daniel Vetter <daniel@ffwll.ch>, Laura Abbott <labbott@redhat.com>,
 Sumit Semwal <sumit.semwal@linaro.org>,
 Sakari Ailus <sakari.ailus@linux.intel.com>,
 Minchan Kim <minchan@kernel.org>, Nitin Gupta <ngupta@vflare.org>
Date: Tue, 14 Apr 2020 15:13:26 +0200
Message-Id: <20200414131348.444715-8-hch@lst.de>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20200414131348.444715-1-hch@lst.de>
References: <20200414131348.444715-1-hch@lst.de>
MIME-Version: 1.0
X-SRS-Rewrite: SMTP reverse-path rewritten from <hch@infradead.org> by
 bombadil.infradead.org. See http://www.infradead.org/rpr.html
X-Virus-Scanned: ClamAV using ClamSMTP
X-Mailman-Approved-At: Fri, 24 Apr 2020 05:29:38 +0000
Cc: Christophe Leroy <christophe.leroy@c-s.fr>, linux-arch@vger.kernel.org,
 linux-hyperv@vger.kernel.org, linux-s390@vger.kernel.org,
 Peter Zijlstra <peterz@infradead.org>, linuxppc-dev@lists.ozlabs.org,
 linux-kernel@vger.kernel.org, dri-devel@lists.freedesktop.org,
 linaro-mm-sig@lists.linaro.org, linux-mm@kvack.org,
 iommu@lists.linux-foundation.org, bpf@vger.kernel.org,
 Robin Murphy <robin.murphy@arm.com>, linux-arm-kernel@lists.infradead.org
Subject: [Linaro-mm-sig] [PATCH 07/29] powerpc: remove __ioremap_at and
	__iounmap_at
X-BeenThere: linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: "Unified memory management interest group."
 <linaro-mm-sig.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/linaro-mm-sig/>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/linaro-mm-sig>,
 <mailto:linaro-mm-sig-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linaro-mm-sig-bounces@lists.linaro.org
Sender: "Linaro-mm-sig" <linaro-mm-sig-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

VGhlc2UgaGVscGVycyBhcmUgb25seSB1c2VkIGZvciByZW1hcHBpbmcgdGhlIElTQSBJL08gYmFz
ZS4gIFJlcGxhY2UKdGhlIG1hcHBpbmcgc2lkZSB3aXRoIGEgcmVtYXBfaXNhX3JhbmdlIGhlbHBl
ciBpbiBpc2EtYnJpZGdlLmMgdGhhdApoYXJkIGNvZGVzIGFsbCB0aGUga25vd24gYXJndW1lbnRz
LCBhbmQganVzdCByZW1vdmUgX19pb3VubWFwX2F0IGluCmZhdm91ciBvZiBvcGVuIGNvZGluZyBp
dCBpbiB0aGUgb25seSBjYWxsZXIuCgpTaWduZWQtb2ZmLWJ5OiBDaHJpc3RvcGggSGVsbHdpZyA8
aGNoQGxzdC5kZT4KQWNrZWQtYnk6IFBldGVyIFppamxzdHJhIChJbnRlbCkgPHBldGVyekBpbmZy
YWRlYWQub3JnPgotLS0KIGFyY2gvcG93ZXJwYy9pbmNsdWRlL2FzbS9pby5oICAgIHwgIDggLS0t
LS0KIGFyY2gvcG93ZXJwYy9rZXJuZWwvaXNhLWJyaWRnZS5jIHwgMjggKysrKysrKysrKysrKy0t
LS0tCiBhcmNoL3Bvd2VycGMvbW0vaW9yZW1hcF82NC5jICAgICB8IDUwIC0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCiAzIGZpbGVzIGNoYW5nZWQsIDIxIGluc2VydGlvbnMoKyksIDY1
IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2FyY2gvcG93ZXJwYy9pbmNsdWRlL2FzbS9pby5o
IGIvYXJjaC9wb3dlcnBjL2luY2x1ZGUvYXNtL2lvLmgKaW5kZXggOTEzMjA5ODVkMzNmLi4xM2Y5
MGRkMDM0NTAgMTAwNjQ0Ci0tLSBhL2FyY2gvcG93ZXJwYy9pbmNsdWRlL2FzbS9pby5oCisrKyBi
L2FyY2gvcG93ZXJwYy9pbmNsdWRlL2FzbS9pby5oCkBAIC02OTksMTAgKzY5OSw2IEBAIHN0YXRp
YyBpbmxpbmUgdm9pZCBpb3N5bmModm9pZCkKICAqCiAgKiAqIGlvdW5tYXAgdW5kb2VzIHN1Y2gg
YSBtYXBwaW5nIGFuZCBjYW4gYmUgaG9va2VkCiAgKgotICogKiBfX2lvcmVtYXBfYXQgKGFuZCB0
aGUgcGVuZGluZyBfX2lvdW5tYXBfYXQpIGFyZSBsb3cgbGV2ZWwgZnVuY3Rpb25zIHRvCi0gKiAg
IGNyZWF0ZSBoYW5kLW1hZGUgbWFwcGluZ3MgZm9yIHVzZSBvbmx5IGJ5IHRoZSBQQ0kgY29kZSBh
bmQgY2Fubm90Ci0gKiAgIGN1cnJlbnRseSBiZSBob29rZWQuIE11c3QgYmUgcGFnZSBhbGlnbmVk
LgotICoKICAqICogX19pb3JlbWFwX2NhbGxlciBpcyB0aGUgc2FtZSBhcyBhYm92ZSBidXQgdGFr
ZXMgYW4gZXhwbGljaXQgY2FsbGVyCiAgKiAgIHJlZmVyZW5jZSByYXRoZXIgdGhhbiB1c2luZyBf
X2J1aWx0aW5fcmV0dXJuX2FkZHJlc3MoMCkKICAqCkBAIC03MjksMTAgKzcyNSw2IEBAIHZvaWQg
X19pb21lbSAqZG9faW9yZW1hcChwaHlzX2FkZHJfdCBwYSwgcGh5c19hZGRyX3Qgb2Zmc2V0LCB1
bnNpZ25lZCBsb25nIHNpemUsCiBleHRlcm4gdm9pZCBfX2lvbWVtICpfX2lvcmVtYXBfY2FsbGVy
KHBoeXNfYWRkcl90LCB1bnNpZ25lZCBsb25nIHNpemUsCiAJCQkJICAgICAgcGdwcm90X3QgcHJv
dCwgdm9pZCAqY2FsbGVyKTsKIAotZXh0ZXJuIHZvaWQgX19pb21lbSAqIF9faW9yZW1hcF9hdChw
aHlzX2FkZHJfdCBwYSwgdm9pZCAqZWEsCi0JCQkJICAgdW5zaWduZWQgbG9uZyBzaXplLCBwZ3By
b3RfdCBwcm90KTsKLWV4dGVybiB2b2lkIF9faW91bm1hcF9hdCh2b2lkICplYSwgdW5zaWduZWQg
bG9uZyBzaXplKTsKLQogLyoKICAqIFdoZW4gQ09ORklHX1BQQ19JTkRJUkVDVF9QSU8gaXMgc2V0
LCB3ZSB1c2UgdGhlIGdlbmVyaWMgaW9tYXAgaW1wbGVtZW50YXRpb24KICAqIHdoaWNoIG5lZWRz
IHNvbWUgYWRkaXRpb25hbCBkZWZpbml0aW9ucyBoZXJlLiBUaGV5IGJhc2ljYWxseSBhbGxvdyBQ
SU8KZGlmZiAtLWdpdCBhL2FyY2gvcG93ZXJwYy9rZXJuZWwvaXNhLWJyaWRnZS5jIGIvYXJjaC9w
b3dlcnBjL2tlcm5lbC9pc2EtYnJpZGdlLmMKaW5kZXggNzczNjcxYjUxMmRmLi4yMjU3ZDI0ZTZh
MjYgMTAwNjQ0Ci0tLSBhL2FyY2gvcG93ZXJwYy9rZXJuZWwvaXNhLWJyaWRnZS5jCisrKyBiL2Fy
Y2gvcG93ZXJwYy9rZXJuZWwvaXNhLWJyaWRnZS5jCkBAIC0xOCw2ICsxOCw3IEBACiAjaW5jbHVk
ZSA8bGludXgvaW5pdC5oPgogI2luY2x1ZGUgPGxpbnV4L21tLmg+CiAjaW5jbHVkZSA8bGludXgv
bm90aWZpZXIuaD4KKyNpbmNsdWRlIDxsaW51eC92bWFsbG9jLmg+CiAKICNpbmNsdWRlIDxhc20v
cHJvY2Vzc29yLmg+CiAjaW5jbHVkZSA8YXNtL2lvLmg+CkBAIC0zOCw2ICszOSwyMiBAQCBFWFBP
UlRfU1lNQk9MX0dQTChpc2FfYnJpZGdlX3BjaWRldik7CiAjZGVmaW5lIElTQV9TUEFDRV9NQVNL
IDB4MQogI2RlZmluZSBJU0FfU1BBQ0VfSU8gMHgxCiAKK3N0YXRpYyB2b2lkIHJlbWFwX2lzYV9i
YXNlKHBoeXNfYWRkcl90IHBhLCB1bnNpZ25lZCBsb25nIHNpemUpCit7CisJV0FSTl9PTl9PTkNF
KElTQV9JT19CQVNFICYgflBBR0VfTUFTSyk7CisJV0FSTl9PTl9PTkNFKHBhICYgflBBR0VfTUFT
Syk7CisJV0FSTl9PTl9PTkNFKHNpemUgJiB+UEFHRV9NQVNLKTsKKworCWlmIChzbGFiX2lzX2F2
YWlsYWJsZSgpKSB7CisJCWlmIChpb3JlbWFwX3BhZ2VfcmFuZ2UoSVNBX0lPX0JBU0UsIElTQV9J
T19CQVNFICsgc2l6ZSwgcGEsCisJCQkJcGdwcm90X25vbmNhY2hlZChQQUdFX0tFUk5FTCkpKQor
CQkJdW5tYXBfa2VybmVsX3JhbmdlKElTQV9JT19CQVNFLCBzaXplKTsKKwl9IGVsc2UgeworCQll
YXJseV9pb3JlbWFwX3JhbmdlKElTQV9JT19CQVNFLCBwYSwgc2l6ZSwKKwkJCQlwZ3Byb3Rfbm9u
Y2FjaGVkKFBBR0VfS0VSTkVMKSk7CisJfQorfQorCiBzdGF0aWMgdm9pZCBwY2lfcHJvY2Vzc19J
U0FfT0ZfcmFuZ2VzKHN0cnVjdCBkZXZpY2Vfbm9kZSAqaXNhX25vZGUsCiAJCQkJICAgICAgdW5z
aWduZWQgbG9uZyBwaGJfaW9fYmFzZV9waHlzKQogewpAQCAtMTA1LDE1ICsxMjIsMTMgQEAgc3Rh
dGljIHZvaWQgcGNpX3Byb2Nlc3NfSVNBX09GX3JhbmdlcyhzdHJ1Y3QgZGV2aWNlX25vZGUgKmlz
YV9ub2RlLAogCWlmIChzaXplID4gMHgxMDAwMCkKIAkJc2l6ZSA9IDB4MTAwMDA7CiAKLQlfX2lv
cmVtYXBfYXQocGhiX2lvX2Jhc2VfcGh5cywgKHZvaWQgKilJU0FfSU9fQkFTRSwKLQkJICAgICBz
aXplLCBwZ3Byb3Rfbm9uY2FjaGVkKFBBR0VfS0VSTkVMKSk7CisJcmVtYXBfaXNhX2Jhc2UocGhi
X2lvX2Jhc2VfcGh5cywgc2l6ZSk7CiAJcmV0dXJuOwogCiBpbnZhbF9yYW5nZToKIAlwcmludGso
S0VSTl9FUlIgIm5vIElTQSBJTyByYW5nZXMgb3IgdW5leHBlY3RlZCBpc2EgcmFuZ2UsICIKIAkg
ICAgICAgIm1hcHBpbmcgNjRrXG4iKTsKLQlfX2lvcmVtYXBfYXQocGhiX2lvX2Jhc2VfcGh5cywg
KHZvaWQgKilJU0FfSU9fQkFTRSwKLQkJICAgICAweDEwMDAwLCBwZ3Byb3Rfbm9uY2FjaGVkKFBB
R0VfS0VSTkVMKSk7CisJcmVtYXBfaXNhX2Jhc2UocGhiX2lvX2Jhc2VfcGh5cywgMHgxMDAwMCk7
CiB9CiAKIApAQCAtMjQ4LDggKzI2Myw3IEBAIHZvaWQgX19pbml0IGlzYV9icmlkZ2VfaW5pdF9u
b25fcGNpKHN0cnVjdCBkZXZpY2Vfbm9kZSAqbnApCiAJICogYW5kIG1hcCBpdAogCSAqLwogCWlz
YV9pb19iYXNlID0gSVNBX0lPX0JBU0U7Ci0JX19pb3JlbWFwX2F0KHBiYXNlLCAodm9pZCAqKUlT
QV9JT19CQVNFLAotCQkgICAgIHNpemUsIHBncHJvdF9ub25jYWNoZWQoUEFHRV9LRVJORUwpKTsK
KwlyZW1hcF9pc2FfYmFzZShwYmFzZSwgc2l6ZSk7CiAKIAlwcl9kZWJ1ZygiSVNBOiBOb24tUENJ
IGJyaWRnZSBpcyAlcE9GXG4iLCBucCk7CiB9CkBAIC0yOTcsNyArMzExLDcgQEAgc3RhdGljIHZv
aWQgaXNhX2JyaWRnZV9yZW1vdmUodm9pZCkKIAlpc2FfYnJpZGdlX3BjaWRldiA9IE5VTEw7CiAK
IAkvKiBVbm1hcCB0aGUgSVNBIGFyZWEgKi8KLQlfX2lvdW5tYXBfYXQoKHZvaWQgKilJU0FfSU9f
QkFTRSwgMHgxMDAwMCk7CisJdW5tYXBfa2VybmVsX3JhbmdlKElTQV9JT19CQVNFLCAweDEwMDAw
KTsKIH0KIAogLyoqCmRpZmYgLS1naXQgYS9hcmNoL3Bvd2VycGMvbW0vaW9yZW1hcF82NC5jIGIv
YXJjaC9wb3dlcnBjL21tL2lvcmVtYXBfNjQuYwppbmRleCA1MGE5OWQ5Njg0ZjcuLmJhNWNiYjBk
NjZiZCAxMDA2NDQKLS0tIGEvYXJjaC9wb3dlcnBjL21tL2lvcmVtYXBfNjQuYworKysgYi9hcmNo
L3Bvd2VycGMvbW0vaW9yZW1hcF82NC5jCkBAIC00LDU2ICs0LDYgQEAKICNpbmNsdWRlIDxsaW51
eC9zbGFiLmg+CiAjaW5jbHVkZSA8bGludXgvdm1hbGxvYy5oPgogCi0vKioKLSAqIExvdyBsZXZl
bCBmdW5jdGlvbiB0byBlc3RhYmxpc2ggdGhlIHBhZ2UgdGFibGVzIGZvciBhbiBJTyBtYXBwaW5n
Ci0gKi8KLXZvaWQgX19pb21lbSAqX19pb3JlbWFwX2F0KHBoeXNfYWRkcl90IHBhLCB2b2lkICpl
YSwgdW5zaWduZWQgbG9uZyBzaXplLCBwZ3Byb3RfdCBwcm90KQotewotCWludCByZXQ7Ci0JdW5z
aWduZWQgbG9uZyB2YSA9ICh1bnNpZ25lZCBsb25nKWVhOwotCi0JLyogV2UgZG9uJ3Qgc3VwcG9y
dCB0aGUgNEsgUEZOIGhhY2sgd2l0aCBpb3JlbWFwICovCi0JaWYgKHBncHJvdF92YWwocHJvdCkg
JiBIX1BBR0VfNEtfUEZOKQotCQlyZXR1cm4gTlVMTDsKLQotCWlmICgoZWEgKyBzaXplKSA+PSAo
dm9pZCAqKUlPUkVNQVBfRU5EKSB7Ci0JCXByX3dhcm4oIk91dHNpZGUgdGhlIHN1cHBvcnRlZCBy
YW5nZVxuIik7Ci0JCXJldHVybiBOVUxMOwotCX0KLQotCVdBUk5fT04ocGEgJiB+UEFHRV9NQVNL
KTsKLQlXQVJOX09OKCgodW5zaWduZWQgbG9uZyllYSkgJiB+UEFHRV9NQVNLKTsKLQlXQVJOX09O
KHNpemUgJiB+UEFHRV9NQVNLKTsKLQotCWlmIChzbGFiX2lzX2F2YWlsYWJsZSgpKSB7Ci0JCXJl
dCA9IGlvcmVtYXBfcGFnZV9yYW5nZSh2YSwgdmEgKyBzaXplLCBwYSwgcHJvdCk7Ci0JCWlmIChy
ZXQpCi0JCQl1bm1hcF9rZXJuZWxfcmFuZ2UodmEsIHNpemUpOwotCX0gZWxzZSB7Ci0JCXJldCA9
IGVhcmx5X2lvcmVtYXBfcmFuZ2UodmEsIHBhLCBzaXplLCBwcm90KTsKLQl9Ci0KLQlpZiAocmV0
KQotCQlyZXR1cm4gTlVMTDsKLQotCXJldHVybiAodm9pZCBfX2lvbWVtICopZWE7Ci19Ci1FWFBP
UlRfU1lNQk9MKF9faW9yZW1hcF9hdCk7Ci0KLS8qKgotICogTG93IGxldmVsIGZ1bmN0aW9uIHRv
IHRlYXIgZG93biB0aGUgcGFnZSB0YWJsZXMgZm9yIGFuIElPIG1hcHBpbmcuIFRoaXMgaXMKLSAq
IHVzZWQgZm9yIG1hcHBpbmdzIHRoYXQgYXJlIG1hbmlwdWxhdGVkIG1hbnVhbGx5LCBsaWtlIHBh
cnRpYWwgdW5tYXBwaW5nIG9mCi0gKiBQQ0kgSU9zIG9yIElTQSBzcGFjZS4KLSAqLwotdm9pZCBf
X2lvdW5tYXBfYXQodm9pZCAqZWEsIHVuc2lnbmVkIGxvbmcgc2l6ZSkKLXsKLQlXQVJOX09OKCgo
dW5zaWduZWQgbG9uZyllYSkgJiB+UEFHRV9NQVNLKTsKLQlXQVJOX09OKHNpemUgJiB+UEFHRV9N
QVNLKTsKLQotCXVubWFwX2tlcm5lbF9yYW5nZSgodW5zaWduZWQgbG9uZyllYSwgc2l6ZSk7Ci19
Ci1FWFBPUlRfU1lNQk9MKF9faW91bm1hcF9hdCk7Ci0KIHZvaWQgX19pb21lbSAqX19pb3JlbWFw
X2NhbGxlcihwaHlzX2FkZHJfdCBhZGRyLCB1bnNpZ25lZCBsb25nIHNpemUsCiAJCQkgICAgICAg
cGdwcm90X3QgcHJvdCwgdm9pZCAqY2FsbGVyKQogewotLSAKMi4yNS4xCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW5hcm8tbW0tc2lnIG1haWxpbmcg
bGlzdApMaW5hcm8tbW0tc2lnQGxpc3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5hcm8u
b3JnL21haWxtYW4vbGlzdGluZm8vbGluYXJvLW1tLXNpZwo=
