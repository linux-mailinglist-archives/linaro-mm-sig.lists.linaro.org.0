Return-Path: <linaro-mm-sig-bounces+lists+linaro-mm-sig=lfdr.de@lists.linaro.org>
X-Original-To: lists+linaro-mm-sig@lfdr.de
Delivered-To: lists+linaro-mm-sig@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [3.208.193.21])
	by mail.lfdr.de (Postfix) with ESMTPS id 170CBB05C02
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 15 Jul 2025 15:26:30 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 2F4AC44B3D
	for <lists+linaro-mm-sig@lfdr.de>; Tue, 15 Jul 2025 13:26:29 +0000 (UTC)
Received: from dfw.source.kernel.org (dfw.source.kernel.org [139.178.84.217])
	by lists.linaro.org (Postfix) with ESMTPS id 7D17E440EB
	for <linaro-mm-sig@lists.linaro.org>; Tue, 15 Jul 2025 13:26:05 +0000 (UTC)
Authentication-Results: lists.linaro.org;
	dkim=pass header.d=linuxfoundation.org header.s=korg header.b=QqGzHLlC;
	spf=pass (lists.linaro.org: domain of gregkh@linuxfoundation.org designates 139.178.84.217 as permitted sender) smtp.mailfrom=gregkh@linuxfoundation.org;
	dmarc=pass (policy=none) header.from=linuxfoundation.org
Received: from smtp.kernel.org (transwarp.subspace.kernel.org [100.75.92.58])
	by dfw.source.kernel.org (Postfix) with ESMTP id 152145C6520;
	Tue, 15 Jul 2025 13:26:05 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id 6BFF7C4CEF1;
	Tue, 15 Jul 2025 13:26:04 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=linuxfoundation.org;
	s=korg; t=1752585964;
	bh=jvKop24sFrKkwzLsEaMNehHH5CtJHJJ4dw1F+3jOxnA=;
	h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
	b=QqGzHLlCp2QyZ6iLVSFL+zl8y8I9Fwh0KeZmUaWigIV8XjXErYWYGSiNzLpc64lWL
	 wmh0/8AnHuI+/6VuCxJL7asH27hwe0TllENtX650xEpsPv6FUxWYWhDs1KtIWqM2sb
	 aZxJxJ/JPOo5sSxnDDjqf/M+H2hg6g0kXkInlMdk=
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: stable@vger.kernel.org
Date: Tue, 15 Jul 2025 15:12:59 +0200
Message-ID: <20250715130800.605137510@linuxfoundation.org>
X-Mailer: git-send-email 2.50.1
In-Reply-To: <20250715130758.864940641@linuxfoundation.org>
References: <20250715130758.864940641@linuxfoundation.org>
User-Agent: quilt/0.68
X-stable: review
X-Patchwork-Hint: ignore
MIME-Version: 1.0
X-Rspamd-Server: lists.linaro.org
X-Rspamd-Queue-Id: 7D17E440EB
X-Spamd-Bar: -----
X-Spamd-Result: default: False [-5.50 / 15.00];
	BAYES_HAM(-3.00)[100.00%];
	RCVD_DKIM_ARC_DNSWL_HI(-1.00)[];
	RCVD_IN_DNSWL_HI(-0.50)[139.178.84.217:from];
	DMARC_POLICY_ALLOW(-0.50)[linuxfoundation.org,none];
	R_SPF_ALLOW(-0.20)[+ip4:139.178.84.217];
	R_DKIM_ALLOW(-0.20)[linuxfoundation.org:s=korg];
	MIME_GOOD(-0.10)[text/plain];
	RCPT_COUNT_TWELVE(0.00)[12];
	MIME_TRACE(0.00)[0:+];
	TO_DN_SOME(0.00)[];
	RCVD_VIA_SMTP_AUTH(0.00)[];
	ASN(0.00)[asn:15830, ipnet:139.178.80.0/21, country:NL];
	ARC_NA(0.00)[];
	NEURAL_HAM(-0.00)[-1.000];
	URIBL_BLOCKED(0.00)[intel.com:email,lists.freedesktop.org:email,linuxfoundation.org:email,linuxfoundation.org:dkim,linuxfoundation.org:mid,bootlin.com:url,suse.de:email,amd.com:email,linaro.org:email,dfw.source.kernel.org:rdns,dfw.source.kernel.org:helo];
	FROM_EQ_ENVFROM(0.00)[];
	FROM_HAS_DN(0.00)[];
	MID_RHS_MATCH_FROM(0.00)[];
	RCVD_COUNT_TWO(0.00)[2];
	DNSWL_BLOCKED(0.00)[100.75.92.58:received];
	TO_MATCH_ENVRCPT_SOME(0.00)[];
	RCVD_TLS_LAST(0.00)[];
	DKIM_TRACE(0.00)[linuxfoundation.org:+]
X-Rspamd-Action: no action
Message-ID-Hash: JY23H7SXVQQOH7P3L5TNTZ5RXXYIU6ZI
X-Message-ID-Hash: JY23H7SXVQQOH7P3L5TNTZ5RXXYIU6ZI
X-MailFrom: gregkh@linuxfoundation.org
X-Mailman-Rule-Misses: dmarc-mitigation; no-senders; approved; emergency; loop; banned-address; member-moderation; nonmember-moderation; administrivia; implicit-dest; max-recipients; max-size; news-moderation; no-subject; digests; suspicious-header
CC: Greg Kroah-Hartman <gregkh@linuxfoundation.org>, patches@lists.linux.dev, =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>, Thomas Zimmermann <tzimmermann@suse.de>, Anusha Srivatsa <asrivats@redhat.com>, Maarten Lankhorst <maarten.lankhorst@linux.intel.com>, Maxime Ripard <mripard@kernel.org>, Sumit Semwal <sumit.semwal@linaro.org>, linux-media@vger.kernel.org, dri-devel@lists.freedesktop.org, linaro-mm-sig@lists.linaro.org
X-Mailman-Version: 3.3.5
Precedence: list
Subject: [Linaro-mm-sig] [PATCH 6.6 043/109] drm/gem: Acquire references on GEM handles for framebuffers
List-Id: "Unified memory management interest group." <linaro-mm-sig.lists.linaro.org>
Archived-At: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/message/JY23H7SXVQQOH7P3L5TNTZ5RXXYIU6ZI/>
List-Archive: <https://lists.linaro.org/archives/list/linaro-mm-sig@lists.linaro.org/>
List-Help: <mailto:linaro-mm-sig-request@lists.linaro.org?subject=help>
List-Owner: <mailto:linaro-mm-sig-owner@lists.linaro.org>
List-Post: <mailto:linaro-mm-sig@lists.linaro.org>
List-Subscribe: <mailto:linaro-mm-sig-join@lists.linaro.org>
List-Unsubscribe: <mailto:linaro-mm-sig-leave@lists.linaro.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

Ni42LXN0YWJsZSByZXZpZXcgcGF0Y2guICBJZiBhbnlvbmUgaGFzIGFueSBvYmplY3Rpb25zLCBw
bGVhc2UgbGV0IG1lIGtub3cuDQoNCi0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpGcm9tOiBUaG9tYXMg
WmltbWVybWFubiA8dHppbW1lcm1hbm5Ac3VzZS5kZT4NCg0KY29tbWl0IDUzMDdkY2U4NzhkNDEy
NmUxYjM3NTU4NzMxODk1NWJkMDE5YzM3NDEgdXBzdHJlYW0uDQoNCkEgR0VNIGhhbmRsZSBjYW4g
YmUgcmVsZWFzZWQgd2hpbGUgdGhlIEdFTSBidWZmZXIgb2JqZWN0IGlzIGF0dGFjaGVkDQp0byBh
IERSTSBmcmFtZWJ1ZmZlci4gVGhpcyBsZWFkcyB0byB0aGUgcmVsZWFzZSBvZiB0aGUgZG1hLWJ1
ZiBiYWNraW5nDQp0aGUgYnVmZmVyIG9iamVjdCwgaWYgYW55LiBbMV0gVHJ5aW5nIHRvIHVzZSB0
aGUgZnJhbWVidWZmZXIgaW4gZnVydGhlcg0KbW9kZS1zZXR0aW5nIG9wZXJhdGlvbnMgbGVhZHMg
dG8gYSBzZWdtZW50YXRpb24gZmF1bHQuIE1vc3QgZWFzaWx5DQpoYXBwZW5zIHdpdGggZHJpdmVy
IHRoYXQgdXNlIHNoYWRvdyBwbGFuZXMgZm9yIHZtYXAtaW5nIHRoZSBkbWEtYnVmDQpkdXJpbmcg
YSBwYWdlIGZsaXAuIEFuIGV4YW1wbGUgaXMgc2hvd24gYmVsb3cuDQoNClsgIDE1Ni43OTE5Njhd
IC0tLS0tLS0tLS0tLVsgY3V0IGhlcmUgXS0tLS0tLS0tLS0tLQ0KWyAgMTU2Ljc5NjgzMF0gV0FS
TklORzogQ1BVOiAyIFBJRDogMjI1NSBhdCBkcml2ZXJzL2RtYS1idWYvZG1hLWJ1Zi5jOjE1Mjcg
ZG1hX2J1Zl92bWFwKzB4MjI0LzB4NDMwDQpbLi4uXQ0KWyAgMTU2Ljk0MjAyOF0gUklQOiAwMDEw
OmRtYV9idWZfdm1hcCsweDIyNC8weDQzMA0KWyAgMTU3LjA0MzQyMF0gQ2FsbCBUcmFjZToNClsg
IDE1Ny4wNDU4OThdICA8VEFTSz4NClsgIDE1Ny4wNDgwMzBdICA/IHNob3dfdHJhY2VfbG9nX2x2
bCsweDFhZi8weDJjMA0KWyAgMTU3LjA1MjQzNl0gID8gc2hvd190cmFjZV9sb2dfbHZsKzB4MWFm
LzB4MmMwDQpbICAxNTcuMDU2ODM2XSAgPyBzaG93X3RyYWNlX2xvZ19sdmwrMHgxYWYvMHgyYzAN
ClsgIDE1Ny4wNjEyNTNdICA/IGRybV9nZW1fc2htZW1fdm1hcCsweDc0LzB4NzEwDQpbICAxNTcu
MDY1NTY3XSAgPyBkbWFfYnVmX3ZtYXArMHgyMjQvMHg0MzANClsgIDE1Ny4wNjk0NDZdICA/IF9f
d2Fybi5jb2xkKzB4NTgvMHhlNA0KWyAgMTU3LjA3MzA2MV0gID8gZG1hX2J1Zl92bWFwKzB4MjI0
LzB4NDMwDQpbICAxNTcuMDc3MTExXSAgPyByZXBvcnRfYnVnKzB4MWRkLzB4MzkwDQpbICAxNTcu
MDgwODQyXSAgPyBoYW5kbGVfYnVnKzB4NWUvMHhhMA0KWyAgMTU3LjA4NDM4OV0gID8gZXhjX2lu
dmFsaWRfb3ArMHgxNC8weDUwDQpbICAxNTcuMDg4MjkxXSAgPyBhc21fZXhjX2ludmFsaWRfb3Ar
MHgxNi8weDIwDQpbICAxNTcuMDkyNTQ4XSAgPyBkbWFfYnVmX3ZtYXArMHgyMjQvMHg0MzANClsg
IDE1Ny4wOTY2NjNdICA/IGRtYV9yZXN2X2dldF9zaW5nbGV0b24rMHg2ZC8weDIzMA0KWyAgMTU3
LjEwMTM0MV0gID8gX19wZnhfZG1hX2J1Zl92bWFwKzB4MTAvMHgxMA0KWyAgMTU3LjEwNTU4OF0g
ID8gX19wZnhfZG1hX3Jlc3ZfZ2V0X3NpbmdsZXRvbisweDEwLzB4MTANClsgIDE1Ny4xMTA2OTdd
ICBkcm1fZ2VtX3NobWVtX3ZtYXArMHg3NC8weDcxMA0KWyAgMTU3LjExNDg2Nl0gIGRybV9nZW1f
dm1hcCsweGE5LzB4MWIwDQpbICAxNTcuMTE4NzYzXSAgZHJtX2dlbV92bWFwX3VubG9ja2VkKzB4
NDYvMHhhMA0KWyAgMTU3LjEyMzA4Nl0gIGRybV9nZW1fZmJfdm1hcCsweGFiLzB4MzAwDQpbICAx
NTcuMTI2OTc5XSAgZHJtX2F0b21pY19oZWxwZXJfcHJlcGFyZV9wbGFuZXMucGFydC4wKzB4NDg3
LzB4YjEwDQpbICAxNTcuMTMzMDMyXSAgPyBsb2NrZGVwX2luaXRfbWFwX3R5cGUrMHgxOWQvMHg4
ODANClsgIDE1Ny4xMzc3MDFdICBkcm1fYXRvbWljX2hlbHBlcl9jb21taXQrMHgxM2QvMHgyZTAN
ClsgIDE1Ny4xNDI2NzFdICA/IGRybV9hdG9taWNfbm9uYmxvY2tpbmdfY29tbWl0KzB4YTAvMHgx
ODANClsgIDE1Ny4xNDc5ODhdICBkcm1fbW9kZV9hdG9taWNfaW9jdGwrMHg3NjYvMHhlNDANClsu
Li5dDQpbICAxNTcuMzQ2NDI0XSAtLS1bIGVuZCB0cmFjZSAwMDAwMDAwMDAwMDAwMDAwIF0tLS0N
Cg0KQWNxdWlyaW5nIEdFTSBoYW5kbGVzIGZvciB0aGUgZnJhbWVidWZmZXIncyBHRU0gYnVmZmVy
IG9iamVjdHMgcHJldmVudHMNCnRoaXMgZnJvbSBoYXBwZW5pbmcuIFRoZSBmcmFtZWJ1ZmZlcidz
IGNsZWFudXAgbGF0ZXIgcHV0cyB0aGUgaGFuZGxlDQpyZWZlcmVuY2VzLg0KDQpDb21taXQgMWEx
NDhhZjA2MDAwICgiZHJtL2dlbS1zaG1lbTogVXNlIGRtYV9idWYgZnJvbSBHRU0gb2JqZWN0DQpp
bnN0YW5jZSIpIHRyaWdnZXJzIHRoZSBzZWdtZW50YXRpb24gZmF1bHQgZWFzaWx5IGJ5IHVzaW5n
IHRoZSBkbWEtYnVmDQpmaWVsZCBtb3JlIHdpZGVseS4gVGhlIHVuZGVybHlpbmcgaXNzdWUgd2l0
aCByZWZlcmVuY2UgY291bnRpbmcgaGFzDQpiZWVuIHByZXNlbnQgYmVmb3JlLg0KDQp2MjoNCi0g
YWNxdWlyZSB0aGUgaGFuZGxlIGluc3RlYWQgb2YgdGhlIEJPIChDaHJpc3RpYW4pDQotIGZpeCBj
b21tZW50IHN0eWxlIChDaHJpc3RpYW4pDQotIGRyb3AgdGhlIEZpeGVzIHRhZyAoQ2hyaXN0aWFu
KQ0KLSByZW5hbWUgZXJyXyBnb3Rvcw0KLSBhZGQgbWlzc2luZyBMaW5rIHRhZw0KDQpTdWdnZXN0
ZWQtYnk6IENocmlzdGlhbiBLw7ZuaWcgPGNocmlzdGlhbi5rb2VuaWdAYW1kLmNvbT4NClNpZ25l
ZC1vZmYtYnk6IFRob21hcyBaaW1tZXJtYW5uIDx0emltbWVybWFubkBzdXNlLmRlPg0KTGluazog
aHR0cHM6Ly9lbGl4aXIuYm9vdGxpbi5jb20vbGludXgvdjYuMTUvc291cmNlL2RyaXZlcnMvZ3B1
L2RybS9kcm1fZ2VtLmMjTDI0MSAjIFsxXQ0KQ2M6IFRob21hcyBaaW1tZXJtYW5uIDx0emltbWVy
bWFubkBzdXNlLmRlPg0KQ2M6IEFudXNoYSBTcml2YXRzYSA8YXNyaXZhdHNAcmVkaGF0LmNvbT4N
CkNjOiBDaHJpc3RpYW4gS8O2bmlnIDxjaHJpc3RpYW4ua29lbmlnQGFtZC5jb20+DQpDYzogTWFh
cnRlbiBMYW5raG9yc3QgPG1hYXJ0ZW4ubGFua2hvcnN0QGxpbnV4LmludGVsLmNvbT4NCkNjOiBN
YXhpbWUgUmlwYXJkIDxtcmlwYXJkQGtlcm5lbC5vcmc+DQpDYzogU3VtaXQgU2Vtd2FsIDxzdW1p
dC5zZW13YWxAbGluYXJvLm9yZz4NCkNjOiAiQ2hyaXN0aWFuIEvDtm5pZyIgPGNocmlzdGlhbi5r
b2VuaWdAYW1kLmNvbT4NCkNjOiBsaW51eC1tZWRpYUB2Z2VyLmtlcm5lbC5vcmcNCkNjOiBkcmkt
ZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnDQpDYzogbGluYXJvLW1tLXNpZ0BsaXN0cy5saW5h
cm8ub3JnDQpDYzogPHN0YWJsZUB2Z2VyLmtlcm5lbC5vcmc+DQpSZXZpZXdlZC1ieTogQ2hyaXN0
aWFuIEvDtm5pZyA8Y2hyaXN0aWFuLmtvZW5pZ0BhbWQuY29tPg0KTGluazogaHR0cHM6Ly9sb3Jl
Lmtlcm5lbC5vcmcvci8yMDI1MDYzMDA4NDAwMS4yOTMwNTMtMS10emltbWVybWFubkBzdXNlLmRl
DQpTaWduZWQtb2ZmLWJ5OiBHcmVnIEtyb2FoLUhhcnRtYW4gPGdyZWdraEBsaW51eGZvdW5kYXRp
b24ub3JnPg0KLS0tDQogZHJpdmVycy9ncHUvZHJtL2RybV9nZW0uYyAgICAgICAgICAgICAgICAg
ICAgfCAgIDQ0ICsrKysrKysrKysrKysrKysrKysrKysrKy0tLQ0KIGRyaXZlcnMvZ3B1L2RybS9k
cm1fZ2VtX2ZyYW1lYnVmZmVyX2hlbHBlci5jIHwgICAxNiArKysrKy0tLS0NCiBkcml2ZXJzL2dw
dS9kcm0vZHJtX2ludGVybmFsLmggICAgICAgICAgICAgICB8ICAgIDIgKw0KIDMgZmlsZXMgY2hh
bmdlZCwgNTEgaW5zZXJ0aW9ucygrKSwgMTEgZGVsZXRpb25zKC0pDQoNCi0tLSBhL2RyaXZlcnMv
Z3B1L2RybS9kcm1fZ2VtLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9kcm1fZ2VtLmMNCkBAIC0x
ODYsNiArMTg2LDM1IEBAIHZvaWQgZHJtX2dlbV9wcml2YXRlX29iamVjdF9maW5pKHN0cnVjdA0K
IH0NCiBFWFBPUlRfU1lNQk9MKGRybV9nZW1fcHJpdmF0ZV9vYmplY3RfZmluaSk7DQogDQorc3Rh
dGljIHZvaWQgZHJtX2dlbV9vYmplY3RfaGFuZGxlX2dldChzdHJ1Y3QgZHJtX2dlbV9vYmplY3Qg
Km9iaikNCit7DQorCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBvYmotPmRldjsNCisNCisJZHJt
X1dBUk5fT04oZGV2LCAhbXV0ZXhfaXNfbG9ja2VkKCZkZXYtPm9iamVjdF9uYW1lX2xvY2spKTsN
CisNCisJaWYgKG9iai0+aGFuZGxlX2NvdW50KysgPT0gMCkNCisJCWRybV9nZW1fb2JqZWN0X2dl
dChvYmopOw0KK30NCisNCisvKioNCisgKiBkcm1fZ2VtX29iamVjdF9oYW5kbGVfZ2V0X3VubG9j
a2VkIC0gYWNxdWlyZSByZWZlcmVuY2Ugb24gdXNlci1zcGFjZSBoYW5kbGVzDQorICogQG9iajog
R0VNIG9iamVjdA0KKyAqDQorICogQWNxdWlyZXMgYSByZWZlcmVuY2Ugb24gdGhlIEdFTSBidWZm
ZXIgb2JqZWN0J3MgaGFuZGxlLiBSZXF1aXJlZA0KKyAqIHRvIGtlZXAgdGhlIEdFTSBvYmplY3Qg
YWxpdmUuIENhbGwgZHJtX2dlbV9vYmplY3RfaGFuZGxlX3B1dF91bmxvY2tlZCgpDQorICogdG8g
cmVsZWFzZSB0aGUgcmVmZXJlbmNlLg0KKyAqLw0KK3ZvaWQgZHJtX2dlbV9vYmplY3RfaGFuZGxl
X2dldF91bmxvY2tlZChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9iaikNCit7DQorCXN0cnVjdCBk
cm1fZGV2aWNlICpkZXYgPSBvYmotPmRldjsNCisNCisJZ3VhcmQobXV0ZXgpKCZkZXYtPm9iamVj
dF9uYW1lX2xvY2spOw0KKw0KKwlkcm1fV0FSTl9PTihkZXYsICFvYmotPmhhbmRsZV9jb3VudCk7
IC8qIGZpcnN0IHJlZiB0YWtlbiBpbiBjcmVhdGUtdGFpbCBoZWxwZXIgKi8NCisJZHJtX2dlbV9v
YmplY3RfaGFuZGxlX2dldChvYmopOw0KK30NCitFWFBPUlRfU1lNQk9MKGRybV9nZW1fb2JqZWN0
X2hhbmRsZV9nZXRfdW5sb2NrZWQpOw0KKw0KIC8qKg0KICAqIGRybV9nZW1fb2JqZWN0X2hhbmRs
ZV9mcmVlIC0gcmVsZWFzZSByZXNvdXJjZXMgYm91bmQgdG8gdXNlcnNwYWNlIGhhbmRsZXMNCiAg
KiBAb2JqOiBHRU0gb2JqZWN0IHRvIGNsZWFuIHVwLg0KQEAgLTIxNiw4ICsyNDUsMTQgQEAgc3Rh
dGljIHZvaWQgZHJtX2dlbV9vYmplY3RfZXhwb3J0ZWRfZG1hXw0KIAl9DQogfQ0KIA0KLXN0YXRp
YyB2b2lkDQotZHJtX2dlbV9vYmplY3RfaGFuZGxlX3B1dF91bmxvY2tlZChzdHJ1Y3QgZHJtX2dl
bV9vYmplY3QgKm9iaikNCisvKioNCisgKiBkcm1fZ2VtX29iamVjdF9oYW5kbGVfcHV0X3VubG9j
a2VkIC0gcmVsZWFzZXMgcmVmZXJlbmNlIG9uIHVzZXItc3BhY2UgaGFuZGxlcw0KKyAqIEBvYmo6
IEdFTSBvYmplY3QNCisgKg0KKyAqIFJlbGVhc2VzIGEgcmVmZXJlbmNlIG9uIHRoZSBHRU0gYnVm
ZmVyIG9iamVjdCdzIGhhbmRsZS4gUG9zc2libHkgcmVsZWFzZXMNCisgKiB0aGUgR0VNIGJ1ZmZl
ciBvYmplY3QgYW5kIGFzc29jaWF0ZWQgZG1hLWJ1ZiBvYmplY3RzLg0KKyAqLw0KK3ZvaWQgZHJt
X2dlbV9vYmplY3RfaGFuZGxlX3B1dF91bmxvY2tlZChzdHJ1Y3QgZHJtX2dlbV9vYmplY3QgKm9i
aikNCiB7DQogCXN0cnVjdCBkcm1fZGV2aWNlICpkZXYgPSBvYmotPmRldjsNCiAJYm9vbCBmaW5h
bCA9IGZhbHNlOw0KQEAgLTI0Miw2ICsyNzcsNyBAQCBkcm1fZ2VtX29iamVjdF9oYW5kbGVfcHV0
X3VubG9ja2VkKHN0cnVjDQogCWlmIChmaW5hbCkNCiAJCWRybV9nZW1fb2JqZWN0X3B1dChvYmop
Ow0KIH0NCitFWFBPUlRfU1lNQk9MKGRybV9nZW1fb2JqZWN0X2hhbmRsZV9wdXRfdW5sb2NrZWQp
Ow0KIA0KIC8qDQogICogQ2FsbGVkIGF0IGRldmljZSBvciBvYmplY3QgY2xvc2UgdG8gcmVsZWFz
ZSB0aGUgZmlsZSdzDQpAQCAtMzYzLDggKzM5OSw4IEBAIGRybV9nZW1faGFuZGxlX2NyZWF0ZV90
YWlsKHN0cnVjdCBkcm1fZmkNCiAJaW50IHJldDsNCiANCiAJV0FSTl9PTighbXV0ZXhfaXNfbG9j
a2VkKCZkZXYtPm9iamVjdF9uYW1lX2xvY2spKTsNCi0JaWYgKG9iai0+aGFuZGxlX2NvdW50Kysg
PT0gMCkNCi0JCWRybV9nZW1fb2JqZWN0X2dldChvYmopOw0KKw0KKwlkcm1fZ2VtX29iamVjdF9o
YW5kbGVfZ2V0KG9iaik7DQogDQogCS8qDQogCSAqIEdldCB0aGUgdXNlci12aXNpYmxlIGhhbmRs
ZSB1c2luZyBpZHIuICBQcmVsb2FkIGFuZCBwZXJmb3JtDQotLS0gYS9kcml2ZXJzL2dwdS9kcm0v
ZHJtX2dlbV9mcmFtZWJ1ZmZlcl9oZWxwZXIuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJtL2RybV9n
ZW1fZnJhbWVidWZmZXJfaGVscGVyLmMNCkBAIC05OSw3ICs5OSw3IEBAIHZvaWQgZHJtX2dlbV9m
Yl9kZXN0cm95KHN0cnVjdCBkcm1fZnJhbWUNCiAJdW5zaWduZWQgaW50IGk7DQogDQogCWZvciAo
aSA9IDA7IGkgPCBmYi0+Zm9ybWF0LT5udW1fcGxhbmVzOyBpKyspDQotCQlkcm1fZ2VtX29iamVj
dF9wdXQoZmItPm9ialtpXSk7DQorCQlkcm1fZ2VtX29iamVjdF9oYW5kbGVfcHV0X3VubG9ja2Vk
KGZiLT5vYmpbaV0pOw0KIA0KIAlkcm1fZnJhbWVidWZmZXJfY2xlYW51cChmYik7DQogCWtmcmVl
KGZiKTsNCkBAIC0xODIsOCArMTgyLDEwIEBAIGludCBkcm1fZ2VtX2ZiX2luaXRfd2l0aF9mdW5j
cyhzdHJ1Y3QgZHINCiAJCWlmICghb2Jqc1tpXSkgew0KIAkJCWRybV9kYmdfa21zKGRldiwgIkZh
aWxlZCB0byBsb29rdXAgR0VNIG9iamVjdFxuIik7DQogCQkJcmV0ID0gLUVOT0VOVDsNCi0JCQln
b3RvIGVycl9nZW1fb2JqZWN0X3B1dDsNCisJCQlnb3RvIGVycl9nZW1fb2JqZWN0X2hhbmRsZV9w
dXRfdW5sb2NrZWQ7DQogCQl9DQorCQlkcm1fZ2VtX29iamVjdF9oYW5kbGVfZ2V0X3VubG9ja2Vk
KG9ianNbaV0pOw0KKwkJZHJtX2dlbV9vYmplY3RfcHV0KG9ianNbaV0pOw0KIA0KIAkJbWluX3Np
emUgPSAoaGVpZ2h0IC0gMSkgKiBtb2RlX2NtZC0+cGl0Y2hlc1tpXQ0KIAkJCSArIGRybV9mb3Jt
YXRfaW5mb19taW5fcGl0Y2goaW5mbywgaSwgd2lkdGgpDQpAQCAtMTkzLDIyICsxOTUsMjIgQEAg
aW50IGRybV9nZW1fZmJfaW5pdF93aXRoX2Z1bmNzKHN0cnVjdCBkcg0KIAkJCWRybV9kYmdfa21z
KGRldiwNCiAJCQkJICAgICJHRU0gb2JqZWN0IHNpemUgKCV6dSkgc21hbGxlciB0aGFuIG1pbmlt
dW0gc2l6ZSAoJXUpIGZvciBwbGFuZSAlZFxuIiwNCiAJCQkJICAgIG9ianNbaV0tPnNpemUsIG1p
bl9zaXplLCBpKTsNCi0JCQlkcm1fZ2VtX29iamVjdF9wdXQob2Jqc1tpXSk7DQorCQkJZHJtX2dl
bV9vYmplY3RfaGFuZGxlX3B1dF91bmxvY2tlZChvYmpzW2ldKTsNCiAJCQlyZXQgPSAtRUlOVkFM
Ow0KLQkJCWdvdG8gZXJyX2dlbV9vYmplY3RfcHV0Ow0KKwkJCWdvdG8gZXJyX2dlbV9vYmplY3Rf
aGFuZGxlX3B1dF91bmxvY2tlZDsNCiAJCX0NCiAJfQ0KIA0KIAlyZXQgPSBkcm1fZ2VtX2ZiX2lu
aXQoZGV2LCBmYiwgbW9kZV9jbWQsIG9ianMsIGksIGZ1bmNzKTsNCiAJaWYgKHJldCkNCi0JCWdv
dG8gZXJyX2dlbV9vYmplY3RfcHV0Ow0KKwkJZ290byBlcnJfZ2VtX29iamVjdF9oYW5kbGVfcHV0
X3VubG9ja2VkOw0KIA0KIAlyZXR1cm4gMDsNCiANCi1lcnJfZ2VtX29iamVjdF9wdXQ6DQorZXJy
X2dlbV9vYmplY3RfaGFuZGxlX3B1dF91bmxvY2tlZDoNCiAJd2hpbGUgKGkgPiAwKSB7DQogCQkt
LWk7DQotCQlkcm1fZ2VtX29iamVjdF9wdXQob2Jqc1tpXSk7DQorCQlkcm1fZ2VtX29iamVjdF9o
YW5kbGVfcHV0X3VubG9ja2VkKG9ianNbaV0pOw0KIAl9DQogCXJldHVybiByZXQ7DQogfQ0KLS0t
IGEvZHJpdmVycy9ncHUvZHJtL2RybV9pbnRlcm5hbC5oDQorKysgYi9kcml2ZXJzL2dwdS9kcm0v
ZHJtX2ludGVybmFsLmgNCkBAIC0xNTUsNiArMTU1LDggQEAgdm9pZCBkcm1fc3lzZnNfbGVhc2Vf
ZXZlbnQoc3RydWN0IGRybV9kZQ0KIA0KIC8qIGRybV9nZW0uYyAqLw0KIGludCBkcm1fZ2VtX2lu
aXQoc3RydWN0IGRybV9kZXZpY2UgKmRldik7DQordm9pZCBkcm1fZ2VtX29iamVjdF9oYW5kbGVf
Z2V0X3VubG9ja2VkKHN0cnVjdCBkcm1fZ2VtX29iamVjdCAqb2JqKTsNCit2b2lkIGRybV9nZW1f
b2JqZWN0X2hhbmRsZV9wdXRfdW5sb2NrZWQoc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmopOw0K
IGludCBkcm1fZ2VtX2hhbmRsZV9jcmVhdGVfdGFpbChzdHJ1Y3QgZHJtX2ZpbGUgKmZpbGVfcHJp
diwNCiAJCQkgICAgICAgc3RydWN0IGRybV9nZW1fb2JqZWN0ICpvYmosDQogCQkJICAgICAgIHUz
MiAqaGFuZGxlcCk7DQoNCg0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KTGluYXJvLW1tLXNpZyBtYWlsaW5nIGxpc3QgLS0gbGluYXJvLW1tLXNpZ0BsaXN0
cy5saW5hcm8ub3JnClRvIHVuc3Vic2NyaWJlIHNlbmQgYW4gZW1haWwgdG8gbGluYXJvLW1tLXNp
Zy1sZWF2ZUBsaXN0cy5saW5hcm8ub3JnCg==
